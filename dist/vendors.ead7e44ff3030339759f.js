/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors"],{

/***/ "./node_modules/ansi-html-community/index.js":
/*!***************************************************!*\
  !*** ./node_modules/ansi-html-community/index.js ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = ansiHTML\n\n// Reference to https://github.com/sindresorhus/ansi-regex\nvar _regANSI = /(?:(?:\\u001b\\[)|\\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\\u001b[A-M]/\n\nvar _defColors = {\n  reset: ['fff', '000'], // [FOREGROUD_COLOR, BACKGROUND_COLOR]\n  black: '000',\n  red: 'ff0000',\n  green: '209805',\n  yellow: 'e8bf03',\n  blue: '0000ff',\n  magenta: 'ff00ff',\n  cyan: '00ffee',\n  lightgrey: 'f0f0f0',\n  darkgrey: '888'\n}\nvar _styles = {\n  30: 'black',\n  31: 'red',\n  32: 'green',\n  33: 'yellow',\n  34: 'blue',\n  35: 'magenta',\n  36: 'cyan',\n  37: 'lightgrey'\n}\nvar _openTags = {\n  '1': 'font-weight:bold', // bold\n  '2': 'opacity:0.5', // dim\n  '3': '<i>', // italic\n  '4': '<u>', // underscore\n  '8': 'display:none', // hidden\n  '9': '<del>' // delete\n}\nvar _closeTags = {\n  '23': '</i>', // reset italic\n  '24': '</u>', // reset underscore\n  '29': '</del>' // reset delete\n}\n\n;[0, 21, 22, 27, 28, 39, 49].forEach(function (n) {\n  _closeTags[n] = '</span>'\n})\n\n/**\n * Converts text with ANSI color codes to HTML markup.\n * @param {String} text\n * @returns {*}\n */\nfunction ansiHTML (text) {\n  // Returns the text if the string has no ANSI escape code.\n  if (!_regANSI.test(text)) {\n    return text\n  }\n\n  // Cache opened sequence.\n  var ansiCodes = []\n  // Replace with markup.\n  var ret = text.replace(/\\033\\[(\\d+)m/g, function (match, seq) {\n    var ot = _openTags[seq]\n    if (ot) {\n      // If current sequence has been opened, close it.\n      if (!!~ansiCodes.indexOf(seq)) { // eslint-disable-line no-extra-boolean-cast\n        ansiCodes.pop()\n        return '</span>'\n      }\n      // Open tag.\n      ansiCodes.push(seq)\n      return ot[0] === '<' ? ot : '<span style=\"' + ot + ';\">'\n    }\n\n    var ct = _closeTags[seq]\n    if (ct) {\n      // Pop sequence\n      ansiCodes.pop()\n      return ct\n    }\n    return ''\n  })\n\n  // Make sure tags are closed.\n  var l = ansiCodes.length\n  ;(l > 0) && (ret += Array(l + 1).join('</span>'))\n\n  return ret\n}\n\n/**\n * Customize colors.\n * @param {Object} colors reference to _defColors\n */\nansiHTML.setColors = function (colors) {\n  if (typeof colors !== 'object') {\n    throw new Error('`colors` parameter must be an Object.')\n  }\n\n  var _finalColors = {}\n  for (var key in _defColors) {\n    var hex = colors.hasOwnProperty(key) ? colors[key] : null\n    if (!hex) {\n      _finalColors[key] = _defColors[key]\n      continue\n    }\n    if ('reset' === key) {\n      if (typeof hex === 'string') {\n        hex = [hex]\n      }\n      if (!Array.isArray(hex) || hex.length === 0 || hex.some(function (h) {\n        return typeof h !== 'string'\n      })) {\n        throw new Error('The value of `' + key + '` property must be an Array and each item could only be a hex string, e.g.: FF0000')\n      }\n      var defHexColor = _defColors[key]\n      if (!hex[0]) {\n        hex[0] = defHexColor[0]\n      }\n      if (hex.length === 1 || !hex[1]) {\n        hex = [hex[0]]\n        hex.push(defHexColor[1])\n      }\n\n      hex = hex.slice(0, 2)\n    } else if (typeof hex !== 'string') {\n      throw new Error('The value of `' + key + '` property must be a hex string, e.g.: FF0000')\n    }\n    _finalColors[key] = hex\n  }\n  _setTags(_finalColors)\n}\n\n/**\n * Reset colors.\n */\nansiHTML.reset = function () {\n  _setTags(_defColors)\n}\n\n/**\n * Expose tags, including open and close.\n * @type {Object}\n */\nansiHTML.tags = {}\n\nif (Object.defineProperty) {\n  Object.defineProperty(ansiHTML.tags, 'open', {\n    get: function () { return _openTags }\n  })\n  Object.defineProperty(ansiHTML.tags, 'close', {\n    get: function () { return _closeTags }\n  })\n} else {\n  ansiHTML.tags.open = _openTags\n  ansiHTML.tags.close = _closeTags\n}\n\nfunction _setTags (colors) {\n  // reset all\n  _openTags['0'] = 'font-weight:normal;opacity:1;color:#' + colors.reset[0] + ';background:#' + colors.reset[1]\n  // inverse\n  _openTags['7'] = 'color:#' + colors.reset[1] + ';background:#' + colors.reset[0]\n  // dark grey\n  _openTags['90'] = 'color:#' + colors.darkgrey\n\n  for (var code in _styles) {\n    var color = _styles[code]\n    var oriColor = colors[color] || '000'\n    _openTags[code] = 'color:#' + oriColor\n    code = parseInt(code)\n    _openTags[(code + 10).toString()] = 'background:#' + oriColor\n  }\n}\n\nansiHTML.reset()\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYW5zaS1odG1sLWNvbW11bml0eS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Fuc2ktaHRtbC1jb21tdW5pdHkvaW5kZXguanM/ZGYwNiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxubW9kdWxlLmV4cG9ydHMgPSBhbnNpSFRNTFxuXG4vLyBSZWZlcmVuY2UgdG8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9hbnNpLXJlZ2V4XG52YXIgX3JlZ0FOU0kgPSAvKD86KD86XFx1MDAxYlxcWyl8XFx1MDA5YikoPzooPzpbMC05XXsxLDN9KT8oPzooPzo7WzAtOV17MCwzfSkqKT9bQS1NfGYtbV0pfFxcdTAwMWJbQS1NXS9cblxudmFyIF9kZWZDb2xvcnMgPSB7XG4gIHJlc2V0OiBbJ2ZmZicsICcwMDAnXSwgLy8gW0ZPUkVHUk9VRF9DT0xPUiwgQkFDS0dST1VORF9DT0xPUl1cbiAgYmxhY2s6ICcwMDAnLFxuICByZWQ6ICdmZjAwMDAnLFxuICBncmVlbjogJzIwOTgwNScsXG4gIHllbGxvdzogJ2U4YmYwMycsXG4gIGJsdWU6ICcwMDAwZmYnLFxuICBtYWdlbnRhOiAnZmYwMGZmJyxcbiAgY3lhbjogJzAwZmZlZScsXG4gIGxpZ2h0Z3JleTogJ2YwZjBmMCcsXG4gIGRhcmtncmV5OiAnODg4J1xufVxudmFyIF9zdHlsZXMgPSB7XG4gIDMwOiAnYmxhY2snLFxuICAzMTogJ3JlZCcsXG4gIDMyOiAnZ3JlZW4nLFxuICAzMzogJ3llbGxvdycsXG4gIDM0OiAnYmx1ZScsXG4gIDM1OiAnbWFnZW50YScsXG4gIDM2OiAnY3lhbicsXG4gIDM3OiAnbGlnaHRncmV5J1xufVxudmFyIF9vcGVuVGFncyA9IHtcbiAgJzEnOiAnZm9udC13ZWlnaHQ6Ym9sZCcsIC8vIGJvbGRcbiAgJzInOiAnb3BhY2l0eTowLjUnLCAvLyBkaW1cbiAgJzMnOiAnPGk+JywgLy8gaXRhbGljXG4gICc0JzogJzx1PicsIC8vIHVuZGVyc2NvcmVcbiAgJzgnOiAnZGlzcGxheTpub25lJywgLy8gaGlkZGVuXG4gICc5JzogJzxkZWw+JyAvLyBkZWxldGVcbn1cbnZhciBfY2xvc2VUYWdzID0ge1xuICAnMjMnOiAnPC9pPicsIC8vIHJlc2V0IGl0YWxpY1xuICAnMjQnOiAnPC91PicsIC8vIHJlc2V0IHVuZGVyc2NvcmVcbiAgJzI5JzogJzwvZGVsPicgLy8gcmVzZXQgZGVsZXRlXG59XG5cbjtbMCwgMjEsIDIyLCAyNywgMjgsIDM5LCA0OV0uZm9yRWFjaChmdW5jdGlvbiAobikge1xuICBfY2xvc2VUYWdzW25dID0gJzwvc3Bhbj4nXG59KVxuXG4vKipcbiAqIENvbnZlcnRzIHRleHQgd2l0aCBBTlNJIGNvbG9yIGNvZGVzIHRvIEhUTUwgbWFya3VwLlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5mdW5jdGlvbiBhbnNpSFRNTCAodGV4dCkge1xuICAvLyBSZXR1cm5zIHRoZSB0ZXh0IGlmIHRoZSBzdHJpbmcgaGFzIG5vIEFOU0kgZXNjYXBlIGNvZGUuXG4gIGlmICghX3JlZ0FOU0kudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiB0ZXh0XG4gIH1cblxuICAvLyBDYWNoZSBvcGVuZWQgc2VxdWVuY2UuXG4gIHZhciBhbnNpQ29kZXMgPSBbXVxuICAvLyBSZXBsYWNlIHdpdGggbWFya3VwLlxuICB2YXIgcmV0ID0gdGV4dC5yZXBsYWNlKC9cXDAzM1xcWyhcXGQrKW0vZywgZnVuY3Rpb24gKG1hdGNoLCBzZXEpIHtcbiAgICB2YXIgb3QgPSBfb3BlblRhZ3Nbc2VxXVxuICAgIGlmIChvdCkge1xuICAgICAgLy8gSWYgY3VycmVudCBzZXF1ZW5jZSBoYXMgYmVlbiBvcGVuZWQsIGNsb3NlIGl0LlxuICAgICAgaWYgKCEhfmFuc2lDb2Rlcy5pbmRleE9mKHNlcSkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1leHRyYS1ib29sZWFuLWNhc3RcbiAgICAgICAgYW5zaUNvZGVzLnBvcCgpXG4gICAgICAgIHJldHVybiAnPC9zcGFuPidcbiAgICAgIH1cbiAgICAgIC8vIE9wZW4gdGFnLlxuICAgICAgYW5zaUNvZGVzLnB1c2goc2VxKVxuICAgICAgcmV0dXJuIG90WzBdID09PSAnPCcgPyBvdCA6ICc8c3BhbiBzdHlsZT1cIicgKyBvdCArICc7XCI+J1xuICAgIH1cblxuICAgIHZhciBjdCA9IF9jbG9zZVRhZ3Nbc2VxXVxuICAgIGlmIChjdCkge1xuICAgICAgLy8gUG9wIHNlcXVlbmNlXG4gICAgICBhbnNpQ29kZXMucG9wKClcbiAgICAgIHJldHVybiBjdFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfSlcblxuICAvLyBNYWtlIHN1cmUgdGFncyBhcmUgY2xvc2VkLlxuICB2YXIgbCA9IGFuc2lDb2Rlcy5sZW5ndGhcbiAgOyhsID4gMCkgJiYgKHJldCArPSBBcnJheShsICsgMSkuam9pbignPC9zcGFuPicpKVxuXG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBDdXN0b21pemUgY29sb3JzLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbG9ycyByZWZlcmVuY2UgdG8gX2RlZkNvbG9yc1xuICovXG5hbnNpSFRNTC5zZXRDb2xvcnMgPSBmdW5jdGlvbiAoY29sb3JzKSB7XG4gIGlmICh0eXBlb2YgY29sb3JzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignYGNvbG9yc2AgcGFyYW1ldGVyIG11c3QgYmUgYW4gT2JqZWN0LicpXG4gIH1cblxuICB2YXIgX2ZpbmFsQ29sb3JzID0ge31cbiAgZm9yICh2YXIga2V5IGluIF9kZWZDb2xvcnMpIHtcbiAgICB2YXIgaGV4ID0gY29sb3JzLmhhc093blByb3BlcnR5KGtleSkgPyBjb2xvcnNba2V5XSA6IG51bGxcbiAgICBpZiAoIWhleCkge1xuICAgICAgX2ZpbmFsQ29sb3JzW2tleV0gPSBfZGVmQ29sb3JzW2tleV1cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGlmICgncmVzZXQnID09PSBrZXkpIHtcbiAgICAgIGlmICh0eXBlb2YgaGV4ID09PSAnc3RyaW5nJykge1xuICAgICAgICBoZXggPSBbaGV4XVxuICAgICAgfVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGhleCkgfHwgaGV4Lmxlbmd0aCA9PT0gMCB8fCBoZXguc29tZShmdW5jdGlvbiAoaCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGggIT09ICdzdHJpbmcnXG4gICAgICB9KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB2YWx1ZSBvZiBgJyArIGtleSArICdgIHByb3BlcnR5IG11c3QgYmUgYW4gQXJyYXkgYW5kIGVhY2ggaXRlbSBjb3VsZCBvbmx5IGJlIGEgaGV4IHN0cmluZywgZS5nLjogRkYwMDAwJylcbiAgICAgIH1cbiAgICAgIHZhciBkZWZIZXhDb2xvciA9IF9kZWZDb2xvcnNba2V5XVxuICAgICAgaWYgKCFoZXhbMF0pIHtcbiAgICAgICAgaGV4WzBdID0gZGVmSGV4Q29sb3JbMF1cbiAgICAgIH1cbiAgICAgIGlmIChoZXgubGVuZ3RoID09PSAxIHx8ICFoZXhbMV0pIHtcbiAgICAgICAgaGV4ID0gW2hleFswXV1cbiAgICAgICAgaGV4LnB1c2goZGVmSGV4Q29sb3JbMV0pXG4gICAgICB9XG5cbiAgICAgIGhleCA9IGhleC5zbGljZSgwLCAyKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhleCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHZhbHVlIG9mIGAnICsga2V5ICsgJ2AgcHJvcGVydHkgbXVzdCBiZSBhIGhleCBzdHJpbmcsIGUuZy46IEZGMDAwMCcpXG4gICAgfVxuICAgIF9maW5hbENvbG9yc1trZXldID0gaGV4XG4gIH1cbiAgX3NldFRhZ3MoX2ZpbmFsQ29sb3JzKVxufVxuXG4vKipcbiAqIFJlc2V0IGNvbG9ycy5cbiAqL1xuYW5zaUhUTUwucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gIF9zZXRUYWdzKF9kZWZDb2xvcnMpXG59XG5cbi8qKlxuICogRXhwb3NlIHRhZ3MsIGluY2x1ZGluZyBvcGVuIGFuZCBjbG9zZS5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmFuc2lIVE1MLnRhZ3MgPSB7fVxuXG5pZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbnNpSFRNTC50YWdzLCAnb3BlbicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9vcGVuVGFncyB9XG4gIH0pXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbnNpSFRNTC50YWdzLCAnY2xvc2UnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfY2xvc2VUYWdzIH1cbiAgfSlcbn0gZWxzZSB7XG4gIGFuc2lIVE1MLnRhZ3Mub3BlbiA9IF9vcGVuVGFnc1xuICBhbnNpSFRNTC50YWdzLmNsb3NlID0gX2Nsb3NlVGFnc1xufVxuXG5mdW5jdGlvbiBfc2V0VGFncyAoY29sb3JzKSB7XG4gIC8vIHJlc2V0IGFsbFxuICBfb3BlblRhZ3NbJzAnXSA9ICdmb250LXdlaWdodDpub3JtYWw7b3BhY2l0eToxO2NvbG9yOiMnICsgY29sb3JzLnJlc2V0WzBdICsgJztiYWNrZ3JvdW5kOiMnICsgY29sb3JzLnJlc2V0WzFdXG4gIC8vIGludmVyc2VcbiAgX29wZW5UYWdzWyc3J10gPSAnY29sb3I6IycgKyBjb2xvcnMucmVzZXRbMV0gKyAnO2JhY2tncm91bmQ6IycgKyBjb2xvcnMucmVzZXRbMF1cbiAgLy8gZGFyayBncmV5XG4gIF9vcGVuVGFnc1snOTAnXSA9ICdjb2xvcjojJyArIGNvbG9ycy5kYXJrZ3JleVxuXG4gIGZvciAodmFyIGNvZGUgaW4gX3N0eWxlcykge1xuICAgIHZhciBjb2xvciA9IF9zdHlsZXNbY29kZV1cbiAgICB2YXIgb3JpQ29sb3IgPSBjb2xvcnNbY29sb3JdIHx8ICcwMDAnXG4gICAgX29wZW5UYWdzW2NvZGVdID0gJ2NvbG9yOiMnICsgb3JpQ29sb3JcbiAgICBjb2RlID0gcGFyc2VJbnQoY29kZSlcbiAgICBfb3BlblRhZ3NbKGNvZGUgKyAxMCkudG9TdHJpbmcoKV0gPSAnYmFja2dyb3VuZDojJyArIG9yaUNvbG9yXG4gIH1cbn1cblxuYW5zaUhUTUwucmVzZXQoKVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ansi-html-community/index.js\n");

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/***/ ((module) => {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanM/ZmFhMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/events/events.js\n");

/***/ }),

/***/ "./node_modules/tim-js-sdk/tim-js-friendship.es.js":
/*!*********************************************************!*\
  !*** ./node_modules/tim-js-sdk/tim-js-friendship.es.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ zu)\n/* harmony export */ });\nconst e={SDK_READY:\"sdkStateReady\",SDK_NOT_READY:\"sdkStateNotReady\",SDK_DESTROY:\"sdkDestroy\",MESSAGE_RECEIVED:\"onMessageReceived\",MESSAGE_MODIFIED:\"onMessageModified\",MESSAGE_REVOKED:\"onMessageRevoked\",MESSAGE_READ_BY_PEER:\"onMessageReadByPeer\",MESSAGE_READ_RECEIPT_RECEIVED:\"onMessageReadReceiptReceived\",MESSAGE_EXTENSIONS_UPDATED:\"onMessageExtensionsUpdated\",MESSAGE_EXTENSIONS_DELETED:\"onMessageExtensionsDeleted\",CONVERSATION_LIST_UPDATED:\"onConversationListUpdated\",TOTAL_UNREAD_MESSAGE_COUNT_UPDATED:\"onTotalUnreadMessageCountUpdated\",CONVERSATION_GROUP_LIST_UPDATED:\"onConversationGroupListUpdated\",CONVERSATION_IN_GROUP_UPDATED:\"onConversationInGroupUpdated\",GROUP_LIST_UPDATED:\"onGroupListUpdated\",GROUP_SYSTEM_NOTICE_RECEIVED:\"receiveGroupSystemNotice\",GROUP_ATTRIBUTES_UPDATED:\"groupAttributesUpdated\",GROUP_COUNTER_UPDATED:\"onGroupCounterUpdated\",TOPIC_CREATED:\"onTopicCreated\",TOPIC_DELETED:\"onTopicDeleted\",TOPIC_UPDATED:\"onTopicUpdated\",PROFILE_UPDATED:\"onProfileUpdated\",USER_STATUS_UPDATED:\"onUserStatusUpdated\",BLACKLIST_UPDATED:\"blacklistUpdated\",FRIEND_LIST_UPDATED:\"onFriendListUpdated\",FRIEND_GROUP_LIST_UPDATED:\"onFriendGroupListUpdated\",FRIEND_APPLICATION_LIST_UPDATED:\"onFriendApplicationListUpdated\",KICKED_OUT:\"kickedOut\",ERROR:\"error\",NET_STATE_CHANGE:\"netStateChange\",SDK_RELOAD:\"sdkReload\"},t={MSG_TEXT:\"TIMTextElem\",MSG_IMAGE:\"TIMImageElem\",MSG_SOUND:\"TIMSoundElem\",MSG_AUDIO:\"TIMSoundElem\",MSG_FILE:\"TIMFileElem\",MSG_FACE:\"TIMFaceElem\",MSG_VIDEO:\"TIMVideoFileElem\",MSG_GEO:\"TIMLocationElem\",MSG_LOCATION:\"TIMLocationElem\",MSG_GRP_TIP:\"TIMGroupTipElem\",MSG_GRP_SYS_NOTICE:\"TIMGroupSystemNoticeElem\",MSG_CUSTOM:\"TIMCustomElem\",MSG_MERGER:\"TIMRelayElem\",MSG_PRIORITY_HIGH:\"High\",MSG_PRIORITY_NORMAL:\"Normal\",MSG_PRIORITY_LOW:\"Low\",MSG_PRIORITY_LOWEST:\"Lowest\",CONV_C2C:\"C2C\",CONV_GROUP:\"GROUP\",CONV_TOPIC:\"TOPIC\",CONV_SYSTEM:\"@TIM#SYSTEM\",CONV_AT_ME:1,CONV_AT_ALL:2,CONV_AT_ALL_AT_ME:3,CONV_MARK_TYPE_STAR:1,CONV_MARK_TYPE_UNREAD:2,CONV_MARK_TYPE_FOLD:4,CONV_MARK_TYPE_HIDE:8,GRP_PRIVATE:\"Private\",GRP_WORK:\"Private\",GRP_PUBLIC:\"Public\",GRP_CHATROOM:\"ChatRoom\",GRP_MEETING:\"ChatRoom\",GRP_AVCHATROOM:\"AVChatRoom\",GRP_COMMUNITY:\"Community\",GRP_MBR_ROLE_OWNER:\"Owner\",GRP_MBR_ROLE_ADMIN:\"Admin\",GRP_MBR_ROLE_MEMBER:\"Member\",GRP_MBR_ROLE_CUSTOM:\"Custom\",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,GRP_TIP_BAN_AVCHATROOM_MEMBER:10,GRP_TIP_UNBAN_AVCHATROOM_MEMBER:11,MSG_REMIND_ACPT_AND_NOTE:\"AcceptAndNotify\",MSG_REMIND_ACPT_NOT_NOTE:\"AcceptNotNotify\",MSG_REMIND_DISCARD:\"Discard\",GENDER_UNKNOWN:\"Gender_Type_Unknown\",GENDER_FEMALE:\"Gender_Type_Female\",GENDER_MALE:\"Gender_Type_Male\",KICKED_OUT_MULT_ACCOUNT:\"multipleAccount\",KICKED_OUT_MULT_DEVICE:\"multipleDevice\",KICKED_OUT_USERSIG_EXPIRED:\"userSigExpired\",KICKED_OUT_REST_API:\"REST_API_Kick\",ALLOW_TYPE_ALLOW_ANY:\"AllowType_Type_AllowAny\",ALLOW_TYPE_NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_TYPE_DENY_ANY:\"AllowType_Type_DenyAny\",FORBID_TYPE_NONE:\"AdminForbid_Type_None\",FORBID_TYPE_SEND_OUT:\"AdminForbid_Type_SendOut\",JOIN_OPTIONS_FREE_ACCESS:\"FreeAccess\",JOIN_OPTIONS_NEED_PERMISSION:\"NeedPermission\",JOIN_OPTIONS_DISABLE_APPLY:\"DisableApply\",JOIN_STATUS_SUCCESS:\"JoinedSuccess\",JOIN_STATUS_ALREADY_IN_GROUP:\"AlreadyInGroup\",JOIN_STATUS_WAIT_APPROVAL:\"WaitAdminApproval\",INVITE_OPTIONS_DISABLE_INVITE:\"DisableInvite\",INVITE_OPTIONS_NEED_PERMISSION:\"NeedPermission\",INVITE_OPTIONS_FREE_ACCESS:\"FreeAccess\",GRP_PROFILE_OWNER_ID:\"ownerID\",GRP_PROFILE_CREATE_TIME:\"createTime\",GRP_PROFILE_LAST_INFO_TIME:\"lastInfoTime\",GRP_PROFILE_MEMBER_NUM:\"memberNum\",GRP_PROFILE_MAX_MEMBER_NUM:\"maxMemberNum\",GRP_PROFILE_JOIN_OPTION:\"joinOption\",GRP_PROFILE_INVITE_OPTION:\"inviteOption\",GRP_PROFILE_INTRODUCTION:\"introduction\",GRP_PROFILE_NOTIFICATION:\"notification\",GRP_PROFILE_MUTE_ALL_MBRS:\"muteAllMembers\",SNS_ADD_TYPE_SINGLE:\"Add_Type_Single\",SNS_ADD_TYPE_BOTH:\"Add_Type_Both\",SNS_DELETE_TYPE_SINGLE:\"Delete_Type_Single\",SNS_DELETE_TYPE_BOTH:\"Delete_Type_Both\",SNS_APPLICATION_TYPE_BOTH:\"Pendency_Type_Both\",SNS_APPLICATION_SENT_TO_ME:\"Pendency_Type_ComeIn\",SNS_APPLICATION_SENT_BY_ME:\"Pendency_Type_SendOut\",SNS_APPLICATION_AGREE:\"Response_Action_Agree\",SNS_APPLICATION_AGREE_AND_ADD:\"Response_Action_AgreeAndAdd\",SNS_CHECK_TYPE_BOTH:\"CheckResult_Type_Both\",SNS_CHECK_TYPE_SINGLE:\"CheckResult_Type_Single\",SNS_TYPE_NO_RELATION:\"CheckResult_Type_NoRelation\",SNS_TYPE_A_WITH_B:\"CheckResult_Type_AWithB\",SNS_TYPE_B_WITH_A:\"CheckResult_Type_BWithA\",SNS_TYPE_BOTH_WAY:\"CheckResult_Type_BothWay\",NET_STATE_CONNECTED:\"connected\",NET_STATE_CONNECTING:\"connecting\",NET_STATE_DISCONNECTED:\"disconnected\",MSG_AT_ALL:\"__kImSDK_MesssageAtALL__\",READ_ALL_C2C_MSG:\"readAllC2CMessage\",READ_ALL_GROUP_MSG:\"readAllGroupMessage\",READ_ALL_MSG:\"readAllMessage\",USER_STATUS_UNKNOWN:0,USER_STATUS_ONLINE:1,USER_STATUS_OFFLINE:2,USER_STATUS_UNLOGINED:3};class s{constructor(){this.cache=[],this.options=null}use(e){if(\"function\"!=typeof e)throw\"middleware must be a function\";return this.cache.push(e),this}next(e){if(this.middlewares&&this.middlewares.length>0){return this.middlewares.shift().call(this,this.options,this.next.bind(this))}}run(e){return this.middlewares=this.cache.map((function(e){return e})),this.options=e,this.next()}}class o{constructor(e=0,t=0){this.high=e,this.low=t}equal(e){return null!==e&&(this.low===e.low&&this.high===e.high)}toString(){const e=Number(this.high).toString(16);let t=Number(this.low).toString(16);if(t.length<8){let e=8-t.length;for(;e;)t=\"0\"+t,e--}return e+t}}const i={TEST:{CHINA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},OVERSEA:{DEFAULT:\"wss://wss-dev.tim.qq.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp-dev.im.qcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr-dev.im.qcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger-dev.im.qcloud.com\"},IND:{DEFAULT:\"wss://wssind-dev.im.qcloud.com\"},JPN:{DEFAULT:\"wss://wssjpn-dev.im.qcloud.com\"},USA:{DEFAULT:\"wss://wssusa-dev.im.qcloud.com\"}},PRODUCTION:{CHINA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.tim.qq.com\",STAT:\"https://events.im.qcloud.com\",ANYCAST:\"wss://162.14.13.203\"},OVERSEA:{DEFAULT:\"wss://wss.im.qcloud.com\",BACKUP:\"wss://wss.my-imcloud.com\",STAT:\"https://api.my-imcloud.com\"},SINGAPORE:{DEFAULT:\"wss://wsssgp.im.qcloud.com\",BACKUP:\"wss://wsssgp.my-imcloud.com\",STAT:\"https://apisgp.my-imcloud.com\"},KOREA:{DEFAULT:\"wss://wsskr.im.qcloud.com\",BACKUP:\"wss://wsskr.my-imcloud.com\",STAT:\"https://apikr.my-imcloud.com\"},GERMANY:{DEFAULT:\"wss://wssger.im.qcloud.com\",BACKUP:\"wss://wssger.my-imcloud.com\",STAT:\"https://apiger.my-imcloud.com\"},IND:{DEFAULT:\"wss://wssind.my-imcloud.com\",BACKUP:\"wss://wssind.im.qcloud.com\",STAT:\"https://apiind.my-imcloud.com\"},JPN:{DEFAULT:\"wss://wssjpn.im.qcloud.com\",BACKUP:\"wss://wssjpn.my-imcloud.com\",STAT:\"https://apijpn.my-imcloud.com\"},USA:{DEFAULT:\"wss://wssusa.im.qcloud.com\",BACKUP:\"wss://wssusa.my-imcloud.com\",STAT:\"https://apiusa.my-imcloud.com\"}}},n={ANDROID:2,IOS:3,MAC:4,WEB:7,WX_MP:8,QQ_MP:9,TT_MP:10,BAIDU_MP:11,ALI_MP:12,IPAD:13,UNI_NATIVE_APP:15},r=\"1.7.3\",a=537048168,u=\"CHINA\",c=\"OVERSEA\",l=\"SINGAPORE\",d=\"KOREA\",p=\"GERMANY\",h=\"IND\",g=\"JPN\",_=\"USA\",m={HOST:{CURRENT:{DEFAULT:\"wss://wss.im.qcloud.com\",STAT:\"https://events.im.qcloud.com\"},setCurrent(e=u){this.CURRENT=i.PRODUCTION[e]}},NAME:{OPEN_IM:\"openim\",OPEN_IM_MSG_EXT:\"openim_msg_ext_http_svc\",GROUP:\"group_open_http_svc\",GROUP_AVCHATROOM:\"group_open_avchatroom_http_svc\",GROUP_COMMUNITY:\"million_group_open_http_svc\",GROUP_ATTR:\"group_open_attr_http_svc\",FRIEND:\"sns\",PROFILE:\"profile\",RECENT_CONTACT:\"recentcontact\",PIC:\"openpic\",BIG_GROUP_NO_AUTH:\"group_open_http_noauth_svc\",BIG_GROUP_LONG_POLLING:\"group_open_long_polling_http_svc\",BIG_GROUP_LONG_POLLING_NO_AUTH:\"group_open_long_polling_http_noauth_svc\",IM_OPEN_STAT:\"imopenstat\",WEB_IM:\"webim\",IM_COS_SIGN:\"im_cos_sign_svr\",CUSTOM_UPLOAD:\"im_cos_msg\",HEARTBEAT:\"heartbeat\",IM_OPEN_PUSH:\"im_open_push\",IM_OPEN_STATUS:\"im_open_status\",IM_LONG_MESSAGE:\"im_long_msg\",IM_CONFIG_MANAGER:\"im_sdk_config_mgr\",STAT_SERVICE:\"StatSvc\",OVERLOAD_PUSH:\"OverLoadPush\",IM_MSG_AUDIT_MGR:\"im_msg_audit_mgr\",TUIROOM_SVR:\"tui_room_svr\",IM_OPEN_TRANSLATE:\"im_open_translate\"},CMD:{LOGIN:\"wslogin\",LOGOUT_LONG_POLL:\"longpollinglogout\",LOGOUT:\"wslogout\",HELLO:\"wshello\",STAT_BACKGROUND:\"ws_stat_background\",STAT_FOREGROUND:\"ws_stat_foreground\",SET_TOKEN:\"ws_stat_settoken\",PORTRAIT_GET:\"portrait_get_all\",PORTRAIT_SET:\"portrait_set\",GET_LONG_POLL_ID:\"getlongpollingid\",LONG_POLL:\"longpolling\",AVCHATROOM_LONG_POLL:\"get_msg\",ADD_FRIEND:\"friend_add\",UPDATE_FRIEND:\"friend_update\",GET_FRIEND_LIST:\"friend_get\",GET_FRIEND_PROFILE:\"friend_get_specified\",DELETE_FRIEND:\"friend_delete\",CHECK_FRIEND:\"friend_check\",GET_FRIEND_GROUP_LIST:\"group_get\",RESPOND_FRIEND_APPLICATION:\"friend_response\",GET_FRIEND_APPLICATION_LIST:\"pendency_get\",DELETE_FRIEND_APPLICATION:\"pendency_delete\",REPORT_FRIEND_APPLICATION:\"pendency_report\",GET_GROUP_APPLICATION:\"get_pendency\",CREATE_FRIEND_GROUP:\"group_add\",DELETE_FRIEND_GROUP:\"group_delete\",UPDATE_FRIEND_GROUP:\"group_update\",GET_BLACKLIST:\"black_list_get\",ADD_BLACKLIST:\"black_list_add\",DELETE_BLACKLIST:\"black_list_delete\",CREATE_GROUP:\"create_group\",GET_JOINED_GROUPS:\"get_joined_group_list\",SET_GROUP_ATTRIBUTES:\"set_group_attr\",MODIFY_GROUP_ATTRIBUTES:\"modify_group_attr\",DELETE_GROUP_ATTRIBUTES:\"delete_group_attr\",CLEAR_GROUP_ATTRIBUTES:\"clear_group_attr\",GET_GROUP_ATTRIBUTES:\"get_group_attr\",SEND_MESSAGE:\"sendmsg\",REVOKE_C2C_MESSAGE:\"msgwithdraw\",DELETE_C2C_MESSAGE:\"delete_c2c_msg_ramble\",MODIFY_C2C_MESSAGE:\"modify_c2c_msg\",MODIFY_C2C_MESSAGE_EXTENSIONS:\"set_key_values\",GET_C2C_MESSAGE_EXTENSIONS:\"get_key_values\",SEND_GROUP_MESSAGE:\"send_group_msg\",REVOKE_GROUP_MESSAGE:\"group_msg_recall\",DELETE_GROUP_MESSAGE:\"delete_group_ramble_msg_by_seq\",MODIFY_GROUP_MESSAGE:\"modify_group_msg\",MODIFY_GROUP_MESSAGE_EXTENSIONS:\"group_set_key_values\",GET_GROUP_MESSAGE_EXTENSIONS:\"group_get_key_values\",GET_GROUP_INFO:\"get_group_self_member_info\",GET_GROUP_MEMBER_INFO:\"get_specified_group_member_info\",GET_GROUP_MEMBER_LIST:\"get_group_member_info\",GET_AVCHATROOM_MEMBER_LIST:\"get_members\",MARK_AVCHATROOM_MEMBER_INFO:\"modify_user_info\",QUIT_GROUP:\"quit_group\",CHANGE_GROUP_OWNER:\"change_group_owner\",DESTROY_GROUP:\"destroy_group\",ADD_GROUP_MEMBER:\"add_group_member\",DELETE_GROUP_MEMBER:\"delete_group_member\",BAN_AVCHATROOM_MEMBER:\"ban_group_member\",SEARCH_GROUP_BY_ID:\"get_group_public_info\",APPLY_JOIN_GROUP:\"apply_join_group\",HANDLE_APPLY_JOIN_GROUP:\"handle_apply_join_group\",HANDLE_INVITE_JOIN_GROUP:\"handle_invite_join_permission_group\",HANDLE_GROUP_INVITATION:\"handle_invite_join_group\",MODIFY_GROUP_INFO:\"modify_group_base_info\",MODIFY_GROUP_MEMBER_INFO:\"modify_group_member_info\",DELETE_GROUP_SYSTEM_MESSAGE:\"deletemsg\",DELETE_GROUP_AT_TIPS:\"deletemsg\",GET_GROUP_NOTIFY:\"get_group_notify\",GET_CONVERSATION_LIST:\"get\",PAGING_GET_CONVERSATION_LIST:\"page_get\",DELETE_CONVERSATION:\"batch_delete\",CLEAR_HISTORY_MESSAGE:\"clear_msg\",PIN_CONVERSATION:\"top\",SET_CONVERSATION_CUSTOM_DATA:\"mark_contact\",MARK_CONVERSATION:\"mark_contact\",CREATE_CONVERSATION_GROUP:\"create_contact_group\",DELETE_CONVERSATION_GROUP:\"del_contact_group\",UPDATE_CONVERSATION_GROUP:\"update_contact_group\",GET_CONVERSATION_GROUP_LIST:\"get_contact_group\",GET_MESSAGES:\"getmsg\",GET_C2C_ROAM_MESSAGES:\"getroammsg\",SET_C2C_PEER_MUTE_NOTIFICATIONS:\"set_c2c_peer_mute_notifications\",GET_C2C_PEER_MUTE_NOTIFICATIONS:\"get_c2c_peer_mute_notifications\",GET_GROUP_ROAM_MESSAGES:\"group_msg_get\",GET_READ_RECEIPT:\"get_group_msg_receipt\",GET_READ_RECEIPT_DETAIL:\"get_group_msg_receipt_detail\",SEND_READ_RECEIPT:\"group_msg_receipt\",SEND_C2C_READ_RECEIPT:\"c2c_msg_read_receipt\",SET_C2C_MESSAGE_READ:\"msgreaded\",GET_PEER_READ_TIME:\"get_peer_read_time\",SET_GROUP_MESSAGE_READ:\"msg_read_report\",FILE_READ_AND_WRITE_AUTHKEY:\"authkey\",FILE_UPLOAD:\"pic_up\",COS_SIGN:\"cos\",COS_PRE_SIG:\"pre_sig\",VIDEO_COVER:\"video_cover\",TIM_WEB_REPORT_V2:\"tim_web_report_v2\",BIG_DATA_HALLWAY_AUTH_KEY:\"authkey\",GET_ONLINE_MEMBER_NUM:\"get_online_member_num\",ALIVE:\"alive\",MESSAGE_PUSH:\"msg_push\",MULTI_MESSAGE_PUSH:\"multi_msg_push_ws\",MESSAGE_PUSH_ACK:\"ws_msg_push_ack\",STATUS_FORCE_OFFLINE:\"stat_forceoffline\",DOWNLOAD_MERGER_MESSAGE:\"get_relay_json_msg\",UPLOAD_MERGER_MESSAGE:\"save_relay_json_msg\",FETCH_CLOUD_CONTROL_CONFIG:\"fetch_config\",PUSHED_CLOUD_CONTROL_CONFIG:\"push_configv2\",FETCH_COMMERCIAL_CONFIG:\"fetch_imsdk_purchase_bitsv2\",PUSHED_COMMERCIAL_CONFIG:\"push_imsdk_purchase_bitsv2\",KICK_OTHER:\"KickOther\",OVERLOAD_NOTIFY:\"notify2\",SET_ALL_MESSAGE_READ:\"read_all_unread_msg\",CREATE_TOPIC:\"create_topic\",DELETE_TOPIC:\"destroy_topic\",UPDATE_TOPIC_PROFILE:\"modify_topic\",GET_TOPIC_LIST:\"get_topic\",SET_SELF_STATUS:\"ws_set_custom_status\",GET_USER_STATUS:\"ws_get_user_status\",SUBSCRIBE_USER_STATUS:\"ws_status_subscribe\",UNSUBSCRIBE_USER_STATUS:\"ws_status_unsubscribe\",GET_RPOFANITY_LIST:\"get_local_words\",TRANSLATE_TEXT:\"ws_batch_trans_text\",UPDATE_GROUP_COUNTER:\"update_group_counter\",GET_GROUP_COUNTER:\"get_group_counter\"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:\"v4\",group_open_http_svc:\"v4\",sns:\"v4\",profile:\"v4\",recentcontact:\"v4\",openpic:\"v4\",group_open_http_noauth_svc:\"v4\",group_open_long_polling_http_svc:\"v4\",group_open_long_polling_http_noauth_svc:\"v4\",imopenstat:\"v4\",im_cos_sign_svr:\"v4\",im_cos_msg:\"v4\",webim:\"v4\",im_open_push:\"v4\",im_open_status:\"v4\"}},M={SEARCH_MSG:new o(0,Math.pow(2,0)).toString(),SEARCH_GRP_SNS:new o(0,Math.pow(2,1)).toString(),AVCHATROOM_HISTORY_MSG:new o(0,Math.pow(2,2)).toString(),GRP_COMMUNITY:new o(0,Math.pow(2,3)).toString(),MSG_TO_SPECIFIED_GRP_MBR:new o(0,Math.pow(2,4)).toString(),AVCHATROOM_MBR_LIST:new o(0,Math.pow(2,6)).toString(),USER_STATUS:new o(0,Math.pow(2,7)).toString(),CONV_MARK:new o(0,Math.pow(2,9)).toString(),CONV_GROUP:new o(0,Math.pow(2,10)).toString(),AVCHATROOM_BAN_MBR:new o(0,Math.pow(2,11)).toString(),MSG_EXT:new o(0,Math.pow(2,13)).toString(),GRP_COUNTER:new o(0,Math.pow(2,15)).toString()},f=\"c2c_text_message\",I=\"c2c_custom_message\",C=\"group_text_message\",T=\"group_custom_message\",y=\"user_profile\",D=\"sns\",E=\"group_profile\",S=\"group_member_profile\";m.HOST.setCurrent(u);const L=\"undefined\"!=typeof wx&&\"function\"==typeof wx.getSystemInfoSync&&Boolean(wx.getSystemInfoSync().fontSizeSetting),A=L&&\"function\"==typeof wx.createGamePortal,v=\"undefined\"!=typeof qq&&\"function\"==typeof qq.getSystemInfoSync&&Boolean(qq.getSystemInfoSync().fontSizeSetting),N=\"undefined\"!=typeof tt&&\"function\"==typeof tt.getSystemInfoSync&&Boolean(tt.getSystemInfoSync().fontSizeSetting),R=\"undefined\"!=typeof swan&&\"function\"==typeof swan.getSystemInfoSync&&Boolean(swan.getSystemInfoSync().fontSizeSetting),O=\"undefined\"!=typeof my&&\"function\"==typeof my.getSystemInfoSync&&Boolean(my.getSystemInfoSync().fontSizeSetting),G=\"undefined\"!=typeof jd&&\"function\"==typeof jd.getSystemInfoSync,U=\"undefined\"!=typeof uni&&\"undefined\"==typeof window&&\"function\"==typeof uni.requireNativePlugin,k=\"undefined\"!=typeof uni,P=L||v||N||R||O||U||G,b=(\"undefined\"!=typeof uni||\"undefined\"!=typeof window)&&!P,w=v?qq:N?tt:R?swan:O?my:L?wx:U?uni:G?jd:{},F=b&&window&&window.navigator&&window.navigator.userAgent||\"\",$=/(micromessenger|webbrowser)/i.test(F),q=/AppleWebKit\\/([\\d.]+)/i.exec(F);q&&parseFloat(q.pop());const x=function(){let e=\"WEB\";return $?e=\"WEB\":v?e=\"QQ_MP\":N?e=\"TT_MP\":R?e=\"BAIDU_MP\":O?e=\"ALI_MP\":L?e=\"WX_MP\":U&&(e=\"UNI_NATIVE_APP\"),n[e]}(),V=/iPad/i.test(F),B=/iPhone/i.test(F)&&!V,H=/iPod/i.test(F),K=B||V||H,W=function(){const e=F.match(/OS (\\d+)_/i);return e&&e[1]?e[1]:null}(),Y=/Android/i.test(F),j=function(){const e=F.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),s=e[2]&&parseFloat(e[2]);return t&&s?parseFloat(e[1]+\".\"+e[2]):t||null}();!function(){const e=F.match(/Chrome\\/(\\d+)/);e&&e[1]&&parseFloat(e[1])}();const z=/MSIE/.test(F)||F.indexOf(\"Trident\")>-1&&F.indexOf(\"rv:11.0\")>-1,J=function(){const e=/MSIE\\s(\\d+)\\.\\d/.exec(F);let t=e&&parseFloat(e[1]);return!t&&/Trident\\/7.0/i.test(F)&&/rv:11.0/.test(F)&&(t=11),t}();!function(){const e=F.match(/TBS\\/(\\d+)/i);if(e&&e[1])e[1]}();const X=/Windows/i.test(F),Z=/MAC OS X/i.test(F),Q=b&&\"undefined\"!=typeof Worker&&!z,ee=Y||K,te=b&&void 0!==window.tencent_cloud_im_csig_flutter_for_web_25F_cy;let se,oe;se=\"undefined\"!=typeof console?console:\"undefined\"!=typeof __webpack_require__.g&&__webpack_require__.g.console?__webpack_require__.g.console:\"undefined\"!=typeof window&&window.console?window.console:{};const ie=function(){},ne=[\"assert\",\"clear\",\"count\",\"debug\",\"dir\",\"dirxml\",\"error\",\"group\",\"groupCollapsed\",\"groupEnd\",\"info\",\"log\",\"profile\",\"profileEnd\",\"table\",\"time\",\"timeEnd\",\"timeStamp\",\"trace\",\"warn\"];let re=ne.length;for(;re--;)oe=ne[re],console[oe]||(se[oe]=ie);var ae=se;let ue=0;const ce=function(){return(new Date).getTime()+ue},le=function(){ue=0},de=function(){return Math.floor(ce()/1e3)};let pe=0;function he(){return yt()?\"%c TIM %c\":\"TIM\"}function ge(){const e=function(){const e=new Date;return e.setTime(ce()),e}();return e.toLocaleTimeString(\"en-US\",{hour12:!1})+\".\"+function(e){let t;switch(e.toString().length){case 1:t=\"00\"+e;break;case 2:t=\"0\"+e;break;default:t=e}return t}(e.getMilliseconds())}const _e={arguments2String(e){let t=\"\";if(1===e.length)t=e[0];else for(let s=0,o=e.length;s<o;s++)Fe(e[s])?qe(e[s])?t+=He(e[s]):t+=JSON.stringify(e[s]):t+=e[s],t+=\" \";return t},_exec(e,t){yt()?ae[e](he(),\"background:#0abf5b; padding:1px; border-radius:3px; color: #fff\",\"background:transparent\",ge(),t):ae[e](`${he()} ${ge()} ${t}`)},d:function(){if(pe<=-1){const e=this.arguments2String(arguments);this._exec(\"debug\",e)}},l:function(){if(pe<=0){const e=this.arguments2String(arguments);this._exec(\"log\",e)}},log:function(){if(pe<=0){const e=this.arguments2String(arguments);this._exec(\"log\",e)}},i:function(){if(pe<=1){const e=this.arguments2String(arguments);this._exec(\"info\",e)}},w:function(){if(pe<=2){const e=this.arguments2String(arguments);this._exec(\"warn\",e)}},e:function(){if(pe<=3){const e=this.arguments2String(arguments);this._exec(\"error\",e)}},setLevel:function(e){e<4&&this._exec(\"log\",\"set level from \"+pe+\" to \"+e),pe=e},getLevel:function(){return pe}},me={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255},Me={NICK:\"Tag_Profile_IM_Nick\",GENDER:\"Tag_Profile_IM_Gender\",BIRTHDAY:\"Tag_Profile_IM_BirthDay\",LOCATION:\"Tag_Profile_IM_Location\",SELFSIGNATURE:\"Tag_Profile_IM_SelfSignature\",ALLOWTYPE:\"Tag_Profile_IM_AllowType\",LANGUAGE:\"Tag_Profile_IM_Language\",AVATAR:\"Tag_Profile_IM_Image\",MESSAGESETTINGS:\"Tag_Profile_IM_MsgSettings\",ADMINFORBIDTYPE:\"Tag_Profile_IM_AdminForbidType\",LEVEL:\"Tag_Profile_IM_Level\",ROLE:\"Tag_Profile_IM_Role\"},fe=\"Tag_SNS_IM_Group\",Ie=\"Tag_SNS_IM_Remark\",Ce=\"Tag_SNS_IM_AddSource\",Te=\"Tag_SNS_IM_AddWording\",ye=\"Tag_SNS_IM_AddTime\",De={UNKNOWN:\"Gender_Type_Unknown\",FEMALE:\"Gender_Type_Female\",MALE:\"Gender_Type_Male\"},Ee={NONE:\"AdminForbid_Type_None\",SEND_OUT:\"AdminForbid_Type_SendOut\"},Se={NEED_CONFIRM:\"AllowType_Type_NeedConfirm\",ALLOW_ANY:\"AllowType_Type_AllowAny\",DENY_ANY:\"AllowType_Type_DenyAny\"},Le=\"JoinedSuccess\",Ae=\"WaitAdminApproval\",ve=\"@TGS#_\",Ne=\"@TOPIC#_\",Re=function(e){return\"map\"===xe(e)},Oe=function(e){return\"file\"===xe(e)},Ge=function(e){return null!==e&&(\"number\"==typeof e&&!isNaN(e-0)||\"object\"==typeof e&&e.constructor===Number)},Ue=function(e){return\"string\"==typeof e},ke=function(e){return null!==e&&\"object\"==typeof e},Pe=function(e){if(\"object\"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;let s=t;for(;null!==Object.getPrototypeOf(s);)s=Object.getPrototypeOf(s);return t===s},be=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"array\"===xe(e)},we=function(e){return void 0===e},Fe=function(e){return be(e)||ke(e)},$e=function(e){return\"function\"==typeof e},qe=function(e){return e instanceof Error},xe=function(e){return Object.prototype.toString.call(e).match(/^\\[object (.*)\\]$/)[1].toLowerCase()},Ve=function(e){if(\"string\"!=typeof e)return!1;const t=e[0];return!/[^a-zA-Z0-9]/.test(t)};Date.now||(Date.now=function(){return(new Date).getTime()});const Be=function(e,t,s,o){if(!Fe(e)||!Fe(t))return 0;let i=0;const n=Object.keys(t);let r;for(let a=0,u=n.length;a<u;a++)if(r=n[a],!(we(t[r])||s&&s.includes(r)))if(Fe(e[r])&&Fe(t[r]))i+=Be(e[r],t[r],s,o);else{if(o&&o.includes(t[r]))continue;e[r]!==t[r]&&(e[r]=t[r],i+=1)}return i},He=function(e){return JSON.stringify(e,[\"message\",\"code\"])},Ke=function(e){if(0===e.length)return 0;let t=0,s=\"\",o=0,i=1;const n=\"undefined\"!=typeof document&&void 0!==document.characterSet?document.characterSet:\"UTF-8\";for(;void 0!==e[t];)s=e[t++],i=s.charCodeAt[t]<=255?1:!1===n?3:2,o+=i;return o},We=function(e){const t=e||99999999;return Math.round(Math.random()*t)},Ye=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",je=Ye.length,ze=function(e,t){for(const s in e)if(e[s]===t)return!0;return!1},Je={},Xe=function(e){return-1===e.indexOf(\"http://\")||-1===e.indexOf(\"https://\")?\"https://\"+e:e.replace(/https|http/,\"https\")},Ze=function(e){if(0===Object.getOwnPropertyNames(e).length)return Object.create(null);const t=Array.isArray(e)?[]:Object.create(null);let s=\"\";for(const o in e)null!==e[o]?void 0!==e[o]?(s=typeof e[o],[\"string\",\"number\",\"function\",\"boolean\"].indexOf(s)>=0?t[o]=e[o]:t[o]=Ze(e[o])):t[o]=void 0:t[o]=null;return t};function Qe(e,t){if(!be(e)||!be(t))return!1;let s=!1;return t.forEach(({key:t,value:o})=>{const i=e.find(e=>e.key===t);i?i.value!==o&&(i.value=o,s=!0):(e.push({key:t,value:o}),s=!0)}),s}const et=e=>e===t.GRP_AVCHATROOM,st=({type:e,groupID:s})=>e===t.GRP_COMMUNITY||(\"\"+s).startsWith(ve)&&!(\"\"+s).includes(Ne),ot=e=>(\"\"+e).startsWith(ve)&&(\"\"+e).includes(Ne),it=e=>Ue(e)&&e.slice(0,3)===t.CONV_C2C,nt=e=>Ue(e)&&e.slice(0,5)===t.CONV_GROUP,rt=e=>Ue(e)&&e===t.CONV_SYSTEM;function at(e,t){const s={};return Object.keys(e).forEach(o=>{s[o]=t(e[o],o)}),s}function ut(e){return P?new Promise((t,s)=>{w.getImageInfo({src:e,success(e){t({width:e.width,height:e.height})},fail(){t({width:0,height:0})}})}):z&&9===J?Promise.resolve({width:0,height:0}):new Promise((t,s)=>{let o=new Image;o.onload=function(){t({width:this.width,height:this.height}),o=null},o.onerror=function(){t({width:0,height:0}),o=null},o.src=e})}function ct(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return`${e()+e()}${e()}${e()}${e()}${e()}${e()}${e()}`}function lt(){let e=\"unknown\";if(Z&&(e=\"mac\"),X&&(e=\"windows\"),K&&(e=\"ios\"),Y&&(e=\"android\"),P)try{const t=w.getSystemInfoSync().platform;void 0!==t&&(e=t)}catch(t){}return e}function dt(e,t){e=e.split(\".\"),t=t.split(\".\");const s=Math.max(e.length,t.length);for(;e.length<s;)e.push(\"0\");for(;t.length<s;)t.push(\"0\");for(let o=0;o<s;o++){const s=parseInt(e[o]),i=parseInt(t[o]);if(s>i)return 1;if(s<i)return-1}return 0}function pt(e){const{originUrl:t,originWidth:s,originHeight:o,min:i=198}=e,n=parseInt(s),r=parseInt(o),a={url:void 0,width:0,height:0};if((n<=r?n:r)<=i)a.url=t,a.width=n,a.height=r;else{r<=n?(a.width=Math.ceil(n*i/r),a.height=i):(a.width=i,a.height=Math.ceil(r*i/n));const e=t&&t.indexOf(\"?\")>-1?t+\"&\":t+\"?\";a.url=198===i?e+\"imageView2/3/w/198/h/198\":e+\"imageView2/3/w/720/h/720\"}if(we(t)){const{url:e,...t}=a;return t}return a}function ht(e){const t=e[2];e[2]=e[1],e[1]=t;for(let s=0;s<e.length;s++)e[s].setType(s)}function gt(e){const{servcmd:t}=e;return t.slice(t.indexOf(\".\")+1)}function _t(e,t){return Math.round(Number(e)*Math.pow(10,t))/Math.pow(10,t)}function mt(e,t){return e.includes(t)}function Mt(e,t){return e.includes(t)}function ft(e){return e.split(Ne)[0]}const It=function(e,s,o){if(we(s))return\"\";switch(e){case t.MSG_TEXT:return s.text;case t.MSG_IMAGE:return o?\"[Image]\":\"[]\";case t.MSG_LOCATION:return o?\"[Location]\":\"[]\";case t.MSG_AUDIO:return o?\"[Voice]\":\"[]\";case t.MSG_VIDEO:return o?\"[Video]\":\"[]\";case t.MSG_FILE:return o?\"[File]\":\"[]\";case t.MSG_CUSTOM:return o?\"[Custom Messages]\":\"[]\";case t.MSG_GRP_TIP:return o?\"[Group Notification]\":\"[]\";case t.MSG_GRP_SYS_NOTICE:return o?\"[Group System Message]\":\"[]\";case t.MSG_FACE:return o?\"[Animated Sticker]\":\"[]\";case t.MSG_MERGER:return o?\"[Chat Record]\":\"[]\";default:return\"\"}};function Ct(e){return e===t.MSG_TEXT||e===t.MSG_CUSTOM||e===t.MSG_LOCATION||e===t.MSG_FACE}function Tt(e){const t=[];if(!Ue(e))return t;const s=e.length;if(0===s)return t;for(let o=s-1;o>=0;o--)\"1\"===e[o]&&t.push(Math.pow(2,s-o-1));return t}function yt(){return!z&&!P}function Dt(e){return\"the length of userIDList cannot exceed \"+e}function Et(e,t){if(!e)return;let s=e;return t&&(e.startsWith(\"http://\")?s=e.replace(/^http:\\/\\/[^/]+/,t):e.startsWith(\"https://\")&&(s=e.replace(/^https:\\/\\/[^/]+/,t))),s}const St=Object.prototype.hasOwnProperty;function Lt(e){if(null==e)return!0;if(\"boolean\"==typeof e)return!1;if(\"number\"==typeof e)return 0===e;if(\"string\"==typeof e)return 0===e.length;if(\"function\"==typeof e)return 0===e.length;if(Array.isArray(e))return 0===e.length;if(e instanceof Error)return\"\"===e.message;if(Pe(e)){for(const t in e)if(St.call(e,t))return!1;return!0}return!(!Re(e)&&(t=e,\"set\"!==xe(t))&&!Oe(e))&&0===e.size;var t}function At(e,t,s){if(void 0===t)return!0;let o=!0;if(Pe(t))Object.keys(t).forEach(i=>{const n=1===e.length?e[0][i]:void 0;o=!!vt(n,t[i],s,i)&&o});else if(be(t))for(let i=0;i<t.length;i++)o=!!vt(e[i],t[i],s,t[i].name)&&o;if(o)return o;throw new Error(\"Params validate failed.\")}function vt(e,t,s,o){if(void 0===t)return!0;let i=!0;if(t.required&&Lt(e)&&(_e.e(`[${s}] Missing required params: \"${o}\".`),i=!1),!Lt(e)){const n=xe(e),r=t.type.toLowerCase();n!==r&&(\"asyncfunction\"===n&&\"function\"===r||(_e.e(`[${s}] Invalid params: type check failed for \"${o}\".Expected ${t.type}.`),i=!1))}return t.validator&&!t.validator(e)&&(_e.e(`[${s}] Invalid params: custom validator check failed for params.`),i=!1),i}const Nt={UNSEND:\"unSend\",SUCCESS:\"success\",FAIL:\"fail\"},Rt={NOT_START:\"notStart\",PENDING:\"pending\",RESOLVED:\"resolved\",REJECTED:\"rejected\"},Ot=function(e){if(!e)return!1;if(it(e)||nt(e)||rt(e))return!0;const t=os(\"InvalidConversationID\",e);return t&&_e.w(t),!1},Gt=function(e){\"\"!==e.desc&&\"\"!==os(\"API_REFER\")&&_e.w(`[${e.api}] | ${e.param} | ${e.desc}, ${os(\"API_REFER\")}${e.api}`)},Ut=function(){return os(\"StringRequiredLog\")},kt=function(e){return os(\"NonEmptyStringRequiredLog\",e)},Pt=function(){return os(\"NumberRequiredLog\")},bt=function(){return os(\"UndefinedNotAllowedLog\")},wt=function(){return os(\"FileRequiredLog\")},Ft=function(){return os(\"FunctionRequiredLog\")},$t=function(){return os(\"ArrayRequiredLog\")},qt=function(){return os(\"NonEmptyArrayLog\")},xt=function(){return os(\"CallbackMissingLog\")},Vt=function(){return os(\"PositiveIntegerRequiredLog\")},Bt=function(e,t){return os(\"StringNotLongerThanLog\",e,t)},Ht=function(e,t){return os(\"NumberLessThanLog\",e,t)},Kt=function(e){return os(\"KeyValueStringRequiredLog\",e)},Wt=function(){return os(\"PlainObjectRequiredLog\")},Yt=function(){return os(\"NonEmptyContentRequiredLog\")},jt=function(){return os(\"FileNotSelectedLog\")},zt=function(){return os(\"MessageInstanceRequiredLog\")},Jt=function(){return os(\"NonAnonymousFunctionLog\")},Xt=function(){return os(\"MessageExtensionNotAvailableLog\")},Zt={type:\"String\",required:!0},Qt={type:\"Array\",required:!0},es={type:\"Object\",required:!0},ts={type:\"Boolean\",required:!0},ss={type:\"number\",required:!0};let os=null;const is={hookGetAPITips:function(e){os=e},login:{userID:Zt,userSig:Zt},addToBlacklist:{userIDList:Qt},removeFromBlacklist:{userIDList:Qt},on:[{name:\"eventName\",type:\"String\",validator:e=>\"string\"==typeof e&&0!==e.length||(Gt({api:\"on\",param:\"eventName\",desc:kt(\"eventName\")}),!1)},{name:\"handler\",type:\"Function\",validator:e=>\"function\"!=typeof e?(Gt({api:\"on\",param:\"handler\",desc:Ft()}),!1):(\"\"===e.name&&Gt({api:\"on\",param:\"handler\",desc:Jt()}),!0)}],once:[{name:\"eventName\",type:\"String\",validator:e=>\"string\"==typeof e&&0!==e.length||(Gt({api:\"once\",param:\"eventName\",desc:kt(\"eventName\")}),!1)},{name:\"handler\",type:\"Function\",validator:e=>\"function\"!=typeof e?(Gt({api:\"once\",param:\"handler\",desc:Ft()}),!1):(\"\"===e.name&&Gt({api:\"once\",param:\"handler\",desc:Jt()}),!0)}],off:[{name:\"eventName\",type:\"String\",validator:e=>\"string\"==typeof e&&0!==e.length||(Gt({api:\"off\",param:\"eventName\",desc:kt(\"eventName\")}),!1)},{name:\"handler\",type:\"Function\",validator:e=>\"function\"!=typeof e?(Gt({api:\"off\",param:\"handler\",desc:Ft()}),!1):(\"\"===e.name&&Gt({api:\"off\",param:\"handler\",desc:Jt()}),!0)}],sendMessage:[{name:\"message\",...es}],setMessageExtensions:[{name:\"message\",...es,validator:e=>e.status===Nt.SUCCESS&&!0===e.isSupportExtension||(Gt({api:\"setMessageExtensions\",param:\"message\",desc:Xt()}),!1)},{name:\"extensions\",...Qt}],getMessageExtensions:[{name:\"message\",...es,validator:e=>e.status===Nt.SUCCESS&&!0===e.isSupportExtension||(Gt({api:\"getMessageExtensions\",param:\"message\",desc:Xt()}),!1)}],deleteMessageExtensions:[{name:\"message\",...es,validator:e=>e.status===Nt.SUCCESS&&!0===e.isSupportExtension||(Gt({api:\"deleteMessageExtensions\",param:\"message\",desc:Xt()}),!1)}],getMessageList:{conversationID:{...Zt,validator:e=>Ot(e)},nextReqMessageID:{type:\"String\"},count:{type:\"Number\",validator:e=>!(!we(e)&&!/^[1-9][0-9]*$/.test(e))||(Gt({api:\"getMessageList\",param:\"count\",desc:Vt()}),!1)}},getMessageListHopping:{conversationID:{...Zt,validator:e=>Ot(e)},sequence:{type:\"Number\"},time:{type:\"Number\"},direction:{type:\"Number\",validator:e=>!(!we(e)&&0!==e&&1!==e)||(Gt({api:\"getMessageListHopping\",param:\"direction\",desc:os(\"0Or1RequiredLog\")}),!1)},count:{type:\"Number\",validator:e=>!(!we(e)&&!/^[1-9][0-9]*$/.test(e))||(Gt({api:\"getMessageListHopping\",param:\"count\",desc:Vt}),!1)}},setMessageRead:{conversationID:{...Zt,validator:e=>Ot(e)}},setAllMessageRead:{scope:{type:\"String\",required:!1,validator:e=>!e||-1!==[t.READ_ALL_C2C_MSG,t.READ_ALL_GROUP_MSG,t.READ_ALL_MSG].indexOf(e)||(Gt({api:\"setAllMessageRead\",param:\"scope\",desc:\"TIM.TYPES.READ_ALL_C2C_MSG or TIM.TYPES.READ_ALL_GROUP_MSG or TIM.TYPES.READ_ALL_MSG required\"}),!1)}},getConversationProfile:[{name:\"conversationID\",...Zt,validator:e=>Ot(e)}],clearHistoryMessage:[{name:\"conversationID\",...Zt,validator:e=>Ot(e)}],pinConversation:{conversationID:{...Zt,validator:e=>Ot(e)},isPinned:{...ts}},setConversationCustomData:{conversationIDList:{...Qt},customData:{type:\"String\",validator:e=>Ue(e)?!(e.length>256)||(Gt({api:\"setConversationCustomData\",param:\"customData\",desc:Bt(\"customData\",256)}),!1):(Gt({api:\"setConversationCustomData\",param:\"customData\",desc:Ut()}),!1)}},markConversation:{conversationIDList:{...Qt},markType:{type:\"number\",validator:e=>{return Ge(e)?e<=0?(Gt({api:\"markConversation\",param:\"markType\",desc:(t=\"markType\",s=0,os(\"NumberGreaterThanLog\",t,s))}),!1):!(e>=Math.pow(2,64))||(Gt({api:\"markConversation\",param:\"markType\",desc:Ht(\"markType\",\"Math.pow(2,64)\")}),!1):(Gt({api:\"markConversation\",param:\"markType\",desc:Pt()}),!1);var t,s}},enableMark:{...ts}},createConversationGroup:{conversationIDList:{...Qt},groupName:{...Zt,validator:e=>!!e&&(!(e.length>32)||(Gt({api:\"createConversationGroup\",param:\"groupName\",desc:Bt(\"groupName\",32)}),!1))}},deleteConversationGroup:[{name:\"groupName\",...Zt}],renameConversationGroup:{oldName:{...Zt},newName:{...Zt,validator:e=>!!e&&(!(e.length>32)||(Gt({api:\"renameConversationGroup\",param:\"newName\",desc:Bt(\"newName\",32)}),!1))}},addConversationsToGroup:{conversationIDList:{...Qt},groupName:{...Zt}},deleteConversationsFromGroup:{conversationIDList:{...Qt},groupName:{...Zt}},getGroupList:{groupProfileFilter:{type:\"Array\"}},getGroupProfile:{groupID:Zt,groupCustomFieldFilter:{type:\"Array\"},memberCustomFieldFilter:{type:\"Array\"}},getGroupProfileAdvance:{groupIDList:Qt},createGroup:{name:Zt},joinGroup:{groupID:Zt,type:{type:\"String\"},applyMessage:{type:\"String\"}},quitGroup:[{name:\"groupID\",...Zt}],handleApplication:{message:es,handleAction:Zt,handleMessage:{type:\"String\"}},changeGroupOwner:{groupID:Zt,newOwnerID:Zt},updateGroupProfile:{groupID:Zt,muteAllMembers:{type:\"Boolean\"}},dismissGroup:[{name:\"groupID\",...Zt}],searchGroupByID:[{name:\"groupID\",...Zt}],initGroupAttributes:{groupID:Zt,groupAttributes:{...es,validator:e=>{let t=!0;return Object.keys(e).forEach(s=>{if(!Ue(e[s]))return Gt({api:\"initGroupAttributes\",param:\"groupAttributes\",desc:Kt(\"value\")}),t=!1,t}),t}}},setGroupAttributes:{groupID:Zt,groupAttributes:{...es,validator:e=>{let t=!0;return Object.keys(e).forEach(s=>{if(!Ue(e[s]))return Gt({api:\"setGroupAttributes\",param:\"groupAttributes\",desc:Kt(\"value\")}),t=!1,t}),t}}},deleteGroupAttributes:{groupID:Zt,keyList:{type:\"Array\",validator:e=>{if(we(e)||!be(e))return Gt({api:\"deleteGroupAttributes\",param:\"keyList\",desc:$t()}),!1;if(!Lt(e)){let t=!0;return e.forEach(e=>{if(!Ue(e))return Gt({api:\"deleteGroupAttributes\",param:\"keyList\",desc:os(\"StringArrayRequiredLog\")}),t=!1,t}),t}return!0}}},getGroupAttributes:{groupID:Zt,keyList:{type:\"Array\",validator:e=>{if(we(e)||!be(e))return Gt({api:\"getGroupAttributes\",param:\"keyList\",desc:$t()}),!1;if(!Lt(e)){let t=!0;return e.forEach(e=>{if(!Ue(e))return Gt({api:\"getGroupAttributes\",param:\"keyList\",desc:Kt(\"key\")}),t=!1,t}),t}return!0}}},setGroupCounters:{groupID:Zt,counters:es},increaseGroupCounter:{groupID:Zt,key:Zt,value:ss},decreaseGroupCounter:{groupID:Zt,key:Zt,value:ss},getGroupCounters:{groupID:Zt},getGroupMemberList:{groupID:Zt,count:{type:\"Number\"}},getGroupMemberProfile:{groupID:Zt,userIDList:Qt,memberCustomFieldFilter:{type:\"Array\"}},addGroupMember:{groupID:Zt,userIDList:Qt},setGroupMemberRole:{groupID:Zt,userID:Zt,role:Zt},setGroupMemberMuteTime:{groupID:Zt,userID:Zt,muteTime:{type:\"Number\",validator:e=>e>=0}},setGroupMemberNameCard:{groupID:Zt,userID:{type:\"String\"},nameCard:{type:\"String\",validator:e=>Ue(e)?(e.length,!0):(Gt({api:\"setGroupMemberNameCard\",param:\"nameCard\",desc:Ut()}),!1)}},setGroupMemberCustomField:{groupID:Zt,userID:{type:\"String\"},memberCustomField:Qt},deleteGroupMember:{groupID:Zt},markGroupMemberList:{groupID:Zt,markType:{type:\"number\",validator:e=>{return Ge(e)?!(e<1e3)||(Gt({api:\"markGroupMemberList\",param:\"markType\",desc:(t=\"markType\",s=1e3,os(\"NumberGreaterOrEqualLog\",t,s))}),!1):(Gt({api:\"markGroupMemberList\",param:\"markType\",desc:Pt()}),!1);var t,s}},userIDList:{...Qt},enableMark:{...ts}},createTextMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>Pe(e)?Ue(e.text)?0!==e.text.length||(Gt({api:\"createTextMessage\",param:\"payload.text\",desc:Yt()}),!1):(Gt({api:\"createTextMessage\",param:\"payload.text\",desc:Ut()}),!1):(Gt({api:\"createTextMessage\",param:\"payload\",desc:Wt()}),!1)}},createTextAtMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>Pe(e)?Ue(e.text)?0===e.text.length?(Gt({api:\"createTextAtMessage\",param:\"payload.text\",desc:Yt()}),!1):!(e.atUserList&&!be(e.atUserList))||(Gt({api:\"createTextAtMessage\",param:\"payload.atUserList\",desc:$t()}),!1):(Gt({api:\"createTextAtMessage\",param:\"payload.text\",desc:Ut()}),!1):(Gt({api:\"createTextAtMessage\",param:\"payload\",desc:Wt()}),!1)}},createCustomMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>Pe(e)?e.data&&!Ue(e.data)?(Gt({api:\"createCustomMessage\",param:\"payload.data\",desc:Ut()}),!1):e.description&&!Ue(e.description)?(Gt({api:\"createCustomMessage\",param:\"payload.description\",desc:Ut()}),!1):!(e.extension&&!Ue(e.extension))||(Gt({api:\"createCustomMessage\",param:\"payload.extension\",desc:Ut()}),!1):(Gt({api:\"createCustomMessage\",param:\"payload\",desc:Wt()}),!1)}},createImageMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>{if(!Pe(e))return Gt({api:\"createImageMessage\",param:\"payload\",desc:Wt()}),!1;if(we(e.file))return Gt({api:\"createImageMessage\",param:\"payload.file\",desc:bt()}),!1;if(b){if(!(e.file instanceof HTMLInputElement||Oe(e.file)))return Pe(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Gt({api:\"createImageMessage\",param:\"payload.file\",desc:jt()}),!1):(Gt({api:\"createImageMessage\",param:\"payload.file\",desc:wt()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Gt({api:\"createImageMessage\",param:\"payload.file\",desc:jt()}),!1}return!0},onProgress:{type:\"Function\",required:!1,validator:e=>(we(e)&&Gt({api:\"createImageMessage\",param:\"onProgress\",desc:xt()}),!0)}}},createAudioMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>!!Pe(e)||(Gt({api:\"createAudioMessage\",param:\"payload\",desc:Wt()}),!1)},onProgress:{type:\"Function\",required:!1,validator:e=>(we(e)&&Gt({api:\"createAudioMessage\",param:\"onProgress\",desc:xt()}),!0)}},createVideoMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>{if(!Pe(e))return Gt({api:\"createVideoMessage\",param:\"payload\",desc:Wt()}),!1;if(we(e.file))return Gt({api:\"createVideoMessage\",param:\"payload.file\",desc:bt()}),!1;if(b){if(!(e.file instanceof HTMLInputElement||Oe(e.file)))return Pe(e.file)&&\"undefined\"!=typeof uni?!!Oe(e.file.tempFile)||(Gt({api:\"createVideoMessage\",param:\"payload.file\",desc:jt()}),!1):(Gt({api:\"createVideoMessage\",param:\"payload.file\",desc:wt()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Gt({api:\"createVideoMessage\",param:\"payload.file\",desc:jt()}),!1}return!0}},onProgress:{type:\"Function\",required:!1,validator:e=>(we(e)&&Gt({api:\"createVideoMessage\",param:\"onProgress\",desc:xt()}),!0)}},createFaceMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>Pe(e)?Ge(e.index)?!!Ue(e.data)||(Gt({api:\"createFaceMessage\",param:\"payload.data\",desc:Ut()}),!1):(Gt({api:\"createFaceMessage\",param:\"payload.index\",desc:Pt()}),!1):(Gt({api:\"createFaceMessage\",param:\"payload\",desc:Wt()}),!1)}},createFileMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>{if(!Pe(e))return Gt({api:\"createFileMessage\",param:\"payload\",desc:Wt()}),!1;if(we(e.file))return Gt({api:\"createFileMessage\",param:\"payload.file\",desc:bt()}),!1;if(b){if(!(e.file instanceof HTMLInputElement||Oe(e.file)))return Pe(e.file)&&\"undefined\"!=typeof uni?0!==e.file.tempFilePaths.length&&0!==e.file.tempFiles.length||(Gt({api:\"createFileMessage\",param:\"payload.file\",desc:jt()}),!1):(Gt({api:\"createFileMessage\",param:\"payload.file\",desc:wt()}),!1);if(e.file instanceof HTMLInputElement&&0===e.file.files.length)return Gt({api:\"createFileMessage\",param:\"payload.file\",desc:jt()}),!1}return!0}},onProgress:{type:\"Function\",required:!1,validator:e=>(we(e)&&Gt({api:\"createFileMessage\",param:\"onProgress\",desc:xt()}),!0)}},createLocationMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>Pe(e)?Ue(e.description)?Ge(e.longitude)?!!Ge(e.latitude)||(Gt({api:\"createLocationMessage\",param:\"payload.latitude\",desc:Pt()}),!1):(Gt({api:\"createLocationMessage\",param:\"payload.longitude\",desc:Pt()}),!1):(Gt({api:\"createLocationMessage\",param:\"payload.description\",desc:Ut()}),!1):(Gt({api:\"createLocationMessage\",param:\"payload\",desc:Wt()}),!1)}},createMergerMessage:{to:Zt,conversationType:Zt,payload:{...es,validator:e=>{if(Lt(e.messageList))return Gt({api:\"createMergerMessage\",param:\"payload.messageList\",desc:qt()}),!1;if(Lt(e.compatibleText))return Gt({api:\"createMergerMessage\",param:\"payload.compatibleText\",desc:kt(\"compatibleText\")}),!1;let t=!1;return e.messageList.forEach(e=>{e.status===Nt.FAIL&&(t=!0)}),!t||(Gt({api:\"createMergerMessage\",param:\"payload.messageList\",desc:os(\"MergeFailedMessageLog\")}),!1)}}},revokeMessage:[{name:\"message\",...es,validator:e=>Lt(e)?(Gt({api:\"revokeMessage\",param:\"message\",desc:zt()}),!1):e.conversationType===t.CONV_SYSTEM?(Gt({api:\"revokeMessage\",param:\"message\",desc:os(\"MessageCanBeRevokedDesc\")}),!1):!0!==e.isRevoked||(Gt({api:\"revokeMessage\",param:\"message\",desc:os(\"MessageRevokedLog\")}),!1)}],deleteMessage:[{name:\"messageList\",...Qt,validator:e=>!Lt(e)||(Gt({api:\"deleteMessage\",param:\"messageList\",desc:qt()}),!1)}],translateText:{sourceTextList:Qt,sourceLanguage:Zt,targetLanguage:Zt},modifyMessage:[{name:\"message\",...es,validator:e=>Lt(e)?(Gt({api:\"modifyMessage\",param:\"message\",desc:zt()}),!1):e.conversationType===t.CONV_SYSTEM?(Gt({api:\"modifyMessage\",param:\"message\",desc:os(\"MessageCanBeModifiedLog\")}),!1):!0!==e._onlineOnlyFlag||(Gt({api:\"modifyMessage\",param:\"message\",desc:os(\"OnlineMessageNotSupportLog\")}),!1)}],getUserProfile:{userIDList:{type:\"Array\",validator:e=>be(e)?(0===e.length&&Gt({api:\"getUserProfile\",param:\"userIDList\",desc:qt()}),!0):(Gt({api:\"getUserProfile\",param:\"userIDList\",desc:$t()}),!1)}},updateMyProfile:{profileCustomField:{type:\"Array\",validator:e=>!!we(e)||(!!be(e)||(Gt({api:\"updateMyProfile\",param:\"profileCustomField\",desc:$t()}),!1))}},setSelfStatus:{customStatus:{type:\"String\",validator:e=>!!Ue(e)||(Gt({api:\"setSelfStatus\",param:\"customStatus\",desc:Ut()}),!1)}},getUserStatus:{userIDList:{type:\"Array\",validator:e=>be(e)?0!==e.length||(Gt({api:\"getUserStatus\",param:\"userIDList\",desc:qt()}),!1):(Gt({api:\"getUserStatus\",param:\"userIDList\",desc:$t()}),!1)}},subscribeUserStatus:{userIDList:{type:\"Array\",validator:e=>be(e)?0!==e.length||(Gt({api:\"subscribeUserStatus\",param:\"userIDList\",desc:qt()}),!1):(Gt({api:\"subscribeUserStatus\",param:\"userIDList\",desc:$t()}),!1)}},unsubscribeUserStatus:{userIDList:{type:\"Array\",validator:e=>!e||(!!be(e)||(Gt({api:\"subscribeUserStatus\",param:\"userIDList\",desc:$t()}),!1))}},addFriend:{to:Zt,source:{type:\"String\",required:!0,validator:e=>{if(!e)return!1;if(!e.startsWith(\"AddSource_Type_\"))return Gt({api:\"addFriend\",param:\"source\",desc:os(\"SourcePrefixLog\")}),!1;return!(e.replace(\"AddSource_Type_\",\"\").length>8)||(Gt({api:\"addFriend\",param:\"source\",desc:Bt(\"keyword\",8)}),!1)}},remark:{type:\"String\",required:!1,validator:e=>!(Ue(e)&&e.length>96)||(Gt({api:\"addFriend\",param:\"remark\",desc:Bt(\"remark\",96)}),!1)}},deleteFriend:{userIDList:Qt},checkFriend:{userIDList:Qt},getFriendProfile:{userIDList:Qt},updateFriend:{userID:Zt,remark:{type:\"String\",required:!1,validator:e=>!(Ue(e)&&e.length>96)||(Gt({api:\"updateFriend\",param:\"remark\",desc:Bt(\"remark\",96)}),!1)},friendCustomField:{type:\"Array\",required:!1,validator:e=>{if(e){if(!be(e))return Gt({api:\"updateFriend\",param:\"friendCustomField\",desc:$t()}),!1;let t=!0;return e.forEach(e=>{if(!Ue(e.key)||-1===e.key.indexOf(\"Tag_SNS_Custom\"))return Gt({api:\"updateFriend\",param:\"friendCustomField\",desc:os(\"FriendCustomFieldPrefixLog\")}),t=!1,t;if(!Ue(e.value))return Gt({api:\"updateFriend\",param:\"friendCustomField\",desc:Kt(\"value\")}),t=!1,t;return e.key.replace(\"Tag_SNS_Custom_\",\"\").length>8?(Gt({api:\"updateFriend\",param:\"friendCustomField\",desc:Bt(\"keyword\",8)}),t=!1,t):void 0}),t}return!0}}},acceptFriendApplication:{userID:Zt},refuseFriendApplication:{userID:Zt},deleteFriendApplication:{userID:Zt},createFriendGroup:{name:Zt},deleteFriendGroup:{name:Zt},addToFriendGroup:{name:Zt,userIDList:Qt},removeFromFriendGroup:{name:Zt,userIDList:Qt},renameFriendGroup:{oldName:Zt,newName:Zt},sendMessageReadReceipt:[{name:\"messageList\",type:\"Array\",validator:e=>be(e)?0!==e.length||(Gt({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:qt()}),!1):(Gt({api:\"sendMessageReadReceipt\",param:\"messageList\",desc:$t()}),!1)}],getMessageReadReceiptList:[{name:\"messageList\",type:\"Array\",validator:e=>be(e)?0!==e.length||(Gt({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:qt()}),!1):(Gt({api:\"getMessageReadReceiptList\",param:\"messageList\",desc:$t()}),!1)}],createTopicInCommunity:{groupID:Zt,topicName:Zt},deleteTopicFromCommunity:{groupID:Zt,topicIDList:{type:\"Array\",validator:e=>!e||(!!be(e)||(Gt({api:\"deleteTopicFromCommunity\",param:\"topicIDList\",desc:$t()}),!1))}},updateTopicProfile:{groupID:Zt,topicID:Zt},getTopicList:{groupID:Zt,topicIDList:{type:\"Array\",validator:e=>!e||(!!be(e)||(Gt({api:\"getTopicList\",param:\"topicIDList\",desc:$t()}),!1))}}},ns={login:1,logout:1,on:1,once:1,off:1,setLogLevel:1,registerPlugin:1,destroy:1,createTextMessage:1,createTextAtMessage:1,createImageMessage:1,createAudioMessage:1,createVideoMessage:1,createCustomMessage:1,createFaceMessage:1,createFileMessage:1,createLocationMessage:1,createMergerMessage:1,downloadMergerMessage:1,createForwardMessage:1,sendMessage:1,resendMessage:1,revokeMessage:1,deleteMessage:1,translateText:1,modifyMessage:1,sendMessageReadReceipt:1,getGroupMessageReadMemberList:1,getMessageReadReceiptList:1,setMessageExtensions:1,getMessageExtensions:1,deleteMessageExtensions:1,getMessageList:1,findMessage:1,getMessageListHopping:1,setMessageRead:1,setAllMessageRead:1,getConversationList:1,getConversationProfile:1,deleteConversation:1,pinConversation:1,getTotalUnreadMessageCount:1,setConversationCustomData:1,markConversation:1,createConversationGroup:1,getConversationGroupList:1,deleteConversationGroup:1,renameConversationGroup:1,addConversationsToGroup:1,deleteConversationsFromGroup:1,clearHistoryMessage:1,getGroupList:1,getGroupProfile:1,createGroup:1,joinGroup:1,updateGroupProfile:1,quitGroup:1,dismissGroup:1,changeGroupOwner:1,searchGroupByID:1,setMessageRemindType:1,getGroupApplicationList:1,handleGroupApplication:1,initGroupAttributes:1,setGroupAttributes:1,deleteGroupAttributes:1,getGroupAttributes:1,setGroupCounters:1,increaseGroupCounter:1,decreaseGroupCounter:1,getGroupCounters:1,getJoinedCommunityList:1,createTopicInCommunity:1,deleteTopicFromCommunity:1,updateTopicProfile:1,getTopicList:1,getGroupMemberProfile:1,getGroupMemberList:1,addGroupMember:1,deleteGroupMember:1,setGroupMemberNameCard:1,setGroupMemberMuteTime:1,setGroupMemberRole:1,setGroupMemberCustomField:1,getGroupOnlineMemberCount:1,markGroupMemberList:1,getMyProfile:1,getUserProfile:1,updateMyProfile:1,setSelfStatus:1,getUserStatus:1,subscribeUserStatus:1,unsubscribeUserStatus:1,getBlacklist:1,addToBlacklist:1,removeFromBlacklist:1,getFriendList:1,addFriend:1,deleteFriend:1,checkFriend:1,updateFriend:1,getFriendProfile:1,getFriendApplicationList:1,refuseFriendApplication:1,deleteFriendApplication:1,acceptFriendApplication:1,setFriendApplicationRead:1,getFriendGroupList:1,createFriendGroup:1,renameFriendGroup:1,deleteFriendGroup:1,addToFriendGroup:1,removeFromFriendGroup:1,callExperimentalAPI:1},rs=1,as=2,us=3,cs=4,ls=6,ds=7,ps=8,hs=9,gs=10,_s=11,ms=12,Ms=13,fs=14,Is=15,Cs=16,Ts=17,ys=18,Ds=19,Es=20,Ss=21,Ls=22,As=23,vs=24,Ns=25,Rs=26,Os=27,Gs=28,Us=29,ks=30,Ps=31,bs=32,ws=37;class Fs{constructor(e){this._m=e,this._n=\"\"}isLoggedIn(){return this._m.getModule(ms).isLoggedIn()}isOversea(){return this._m.getModule(ms).isOversea()}isPrivateNetWork(){return this._m.getModule(ms).isPrivateNetWork()}getFileDownloadProxy(){return this._m.getModule(ms).getFileDownloadProxy()}getMyUserID(){return this._m.getModule(ms).getUserID()}getMyTinyID(){return this._m.getModule(ms).getTinyID()}getSDKAppID(){return this._m.getModule(ms).getSDKAppID()}isIntl(){return this._m.getModule(ms).isIntl()}isDevMode(){return this._m.getModule(ms).isDevMode()}getModule(e){return this._m.getModule(e)}getPlatform(){return x}getNetworkType(){return this._m.getModule(Is).getNetworkType()}probeNetwork(e){return this._m.getModule(Is).probe(e)}getCloudConfig(e){return this._m.getModule(As).getCloudConfig(e)}emitOuterEvent(e,t){this._m.getOuterEmitterInstance().emit(e,t)}emitInnerEvent(e,t){this._m.getInnerEmitterInstance().emit(e,t)}getInnerEmitterInstance(){return this._m.getInnerEmitterInstance()}generateTjgID(e){return this._m.getModule(ms).getTinyID()+\"-\"+e.random}filterModifiedMessage(t){if(Lt(t))return;const s=t.filter(e=>!0===e.isModified);s.length>0&&this.emitOuterEvent(e.MESSAGE_MODIFIED,s)}filterUnmodifiedMessage(e){if(Lt(e))return[];return e.filter(e=>!1===e.isModified)}request(e){return this._m.getModule(Es).request(e)}canIUse(e){return this._m.getModule(Os).canIUse(e)}getErrorMessage(e,t,s){return this._m.getErrorMessage(e,t,s)}outputWarning(e,t,s){const o=this.getErrorMessage(e,t,s);o&&_e.w(o)}}const $s=\"wslogin\",qs=\"wslogout\",xs=\"wshello\",Vs=\"KickOther\",Bs=\"getmsg\",Hs=\"authkey\",Ks=\"sendmsg\",Ws=\"send_group_msg\",Ys=\"portrait_get_all\",js=\"portrait_set\",zs=\"black_list_get\",Js=\"black_list_add\",Xs=\"black_list_delete\",Zs=\"friend_get\",Qs=\"friend_get_specified\",eo=\"friend_check\",to=\"friend_delete\",so=\"friend_add\",oo=\"friend_update\",io=\"friend_response\",no=\"pendency_get\",ro=\"pendency_delete\",ao=\"pendency_report\",uo=\"group_get\",co=\"group_add\",lo=\"group_delete\",po=\"group_update\",ho=\"msgwithdraw\",go=\"msgreaded\",_o=\"set_c2c_peer_mute_notifications\",mo=\"get_c2c_peer_mute_notifications\",Mo=\"getroammsg\",fo=\"get_peer_read_time\",Io=\"delete_c2c_msg_ramble\",Co=\"modify_c2c_msg\",To=\"set_key_values\",yo=\"get_key_values\",Do=\"page_get\",Eo=\"get\",So=\"batch_delete\",Lo=\"clear_msg\",Ao=\"top\",vo=\"deletemsg\",No=\"set_conv_custom_data\",Ro=\"mark_contact\",Oo=\"create_contact_group\",Go=\"del_contact_group\",Uo=\"update_contact_group\",ko=\"add_conv_to_group\",Po=\"del_conv_from_group\",bo=\"get_contact_group\",wo=\"get_joined_group_list\",Fo=\"get_group_self_member_info\",$o=\"create_group\",qo=\"destroy_group\",xo=\"modify_group_base_info\",Vo=\"apply_join_group\",Bo=\"apply_join_group_noauth\",Ho=\"quit_group\",Ko=\"get_group_public_info\",Wo=\"change_group_owner\",Yo=\"handle_apply_join_group\",jo=\"handle_invite_join_permission_group\",zo=\"handle_invite_join_group\",Jo=\"group_msg_recall\",Xo=\"msg_read_report\",Zo=\"read_all_unread_msg\",Qo=\"group_msg_get\",ei=\"get_group_msg_receipt\",ti=\"group_msg_receipt\",si=\"c2c_msg_read_receipt\",oi=\"get_group_msg_receipt_detail\",ii=\"get_pendency\",ni=\"deletemsg\",ri=\"get_msg\",ai=\"get_msg_noauth\",ui=\"get_online_member_num\",ci=\"delete_group_ramble_msg_by_seq\",li=\"modify_group_msg\",di=\"set_group_attr\",pi=\"modify_group_attr\",hi=\"delete_group_attr\",gi=\"clear_group_attr\",_i=\"get_group_attr\",mi=\"group_set_key_values\",Mi=\"group_get_key_values\",fi=\"get_group_notify\",Ii=\"update_group_counter\",Ci=\"get_group_counter\",Ti=\"get_group_member_info\",yi=\"get_members\",Di=\"get_specified_group_member_info\",Ei=\"add_group_member\",Si=\"delete_group_member\",Li=\"ban_group_member\",Ai=\"modify_group_member_info\",vi=\"modify_user_info\",Ni=\"cos\",Ri=\"pre_sig\",Oi=\"video_cover\",Gi=\"tim_web_report_v2\",Ui=\"alive\",ki=\"msg_push\",Pi=\"multi_msg_push_ws\",bi=\"ws_msg_push_ack\",wi=\"stat_forceoffline\",Fi=\"save_relay_json_msg\",$i=\"get_relay_json_msg\",qi=\"fetch_config\",xi=\"push_configv2\",Vi=\"fetch_imsdk_purchase_bitsv2\",Bi=\"push_imsdk_purchase_bitsv2\",Hi=\"notify2\",Ki=\"create_topic\",Wi=\"destroy_topic\",Yi=\"modify_topic\",ji=\"get_topic\",zi=\"ws_set_custom_status\",Ji=\"ws_get_user_status\",Xi=\"ws_status_subscribe\",Zi=\"ws_status_unsubscribe\",Qi=\"ws_stat_background\",en=\"ws_stat_foreground\",tn=\"ws_stat_settoken\",sn=\"get_local_words\",on=\"ws_batch_trans_text\",nn={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_TINYID:2022,NO_A2KEY:2023,USER_NOT_LOGGED_IN:2024,REPEAT_LOGIN:2025,COS_UNDETECTED:2040,COS_GET_SIG_FAIL:2041,MESSAGE_SEND_FAIL:2100,MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM:2101,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_ONPROGRESS_FUNCTION_ERROR:2109,MESSAGE_REVOKE_FAIL:2110,MESSAGE_DELETE_FAIL:2111,MESSAGE_UNREAD_ALL_FAIL:2112,READ_RECEIPT_MESSAGE_LIST_EMPTY:2114,MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL:2115,CANNOT_DELETE_GROUP_SYSTEM_NOTICE:2116,TRANSLATE_TEXT_FAIL:2117,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_VIDEO_UPLOAD_FAIL:2350,MESSAGE_VIDEO_SIZE_LIMIT:2351,MESSAGE_VIDEO_TYPES_LIMIT:2352,MESSAGE_FILE_UPLOAD_FAIL:2400,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_MERGER_TYPE_INVALID:2450,MESSAGE_MERGER_KEY_INVALID:2451,MESSAGE_MERGER_DOWNLOAD_FAIL:2452,MESSAGE_FORWARD_TYPE_INVALID:2453,MESSAGE_MODIFY_CONFLICT:2480,MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM:2481,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,INVALID_CONVERSATION_ID:2503,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_WORK:2601,ILLEGAL_GROUP_ID:2602,CANNOT_FIND_GROUP:2603,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_WORK:2622,MEMBER_NOT_IN_GROUP:2623,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN:2662,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,CANNOT_MUTE_SELF:2685,BAN_DURATION_INVALID:2686,NOT_MY_FRIEND:2700,ALREADY_MY_FRIEND:2701,FRIEND_GROUP_EXISTED:2710,FRIEND_GROUP_NOT_EXIST:2711,FRIEND_APPLICATION_NOT_EXIST:2716,UPDATE_PROFILE_INVALID_PARAM:2721,UPDATE_PROFILE_NO_KEY:2722,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NO_NETWORK:2805,UNCAUGHT_ERROR:2903,INVALID_OPERATION:2905,INVALID_TRTC_CMD:2995,OVER_FREQUENCY_LIMIT:2996,CANNOT_FIND_PROTOCOL:2997,CANNOT_FIND_MODULE:2998,SDK_IS_NOT_READY:2999,LOGGING_IN:3e3,LOGIN_FAILED:3001,KICKED_OUT_MULT_DEVICE:3002,KICKED_OUT_MULT_ACCOUNT:3003,KICKED_OUT_USERSIG_EXPIRED:3004,LOGGED_OUT:3005,KICKED_OUT_REST_API:3006,ILLEGAL_TOPIC_ID:3021,CANNOT_USE_COMMERCIAL_ABILITY:3122,PROFANITY_FOUND:3123,MESSAGE_A2KEY_EXPIRED:20002,ACCOUNT_A2KEY_EXPIRED:70001,HELLO_ANSWER_KICKED_OUT:1002,OPEN_SERVICE_OVERLOAD_ERROR:60022},rn=\"networkRTT\",an=\"messageE2EDelay\",un=\"sendMessageC2C\",cn=\"sendMessageGroup\",ln=\"sendMessageGroupAV\",dn=\"sendMessageRichMedia\",pn=\"cosUpload\",hn=\"messageReceivedGroup\",gn=\"messageReceivedGroupAVPush\",_n=\"messageReceivedGroupAVPull\",mn={[rn]:2,[an]:3,[un]:4,[cn]:5,[ln]:6,[dn]:7,[hn]:8,[gn]:9,[_n]:10,[pn]:11},Mn={info:4,warning:5,error:6},fn={wifi:1,\"2g\":2,\"3g\":3,\"4g\":4,\"5g\":5,unknown:6,none:7,online:8},In={login:4};class Cn{constructor(e){this._n=\"SSOLogData\",this.eventType=In[e]||0,this.timestamp=0,this.networkType=8,this.code=0,this.message=\"\",this.moreMessage=\"\",this.extension=e,this.costTime=0,this.duplicate=!1,this.level=4,this.uiPlatform=void 0,this._sentFlag=!1,this._startts=ce()}static bindEventStatModule(e){Cn.prototype._eventStatModule=e}updateTimeStamp(){this.timestamp=ce()}start(e){return this._startts=e,this}end(e=!1){if(this._sentFlag)return;const t=ce();0===this.costTime&&(this.costTime=t-this._startts),this.setMoreMessage(`startts:${this._startts} endts:${t}`),e?(this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)):setTimeout(()=>{this._sentFlag=!0,this._eventStatModule&&this._eventStatModule.pushIn(this)},0)}setError(e,t,s){if(!(e instanceof Error))return _e.w(this._n+\".setError value not instanceof Error, please check!\"),this;if(this._sentFlag)return this;if(this.setNetworkType(s),t)e.code&&this.setCode(e.code),e.message&&this.setMoreMessage(e.message);else{const e=nn.NO_NETWORK;this.setCode(e)}return this.setLevel(\"error\"),this}setCode(e){return we(e)||this._sentFlag||(\"ECONNABORTED\"===e&&(this.code=103),Ge(e)?this.code=e:_e.w(this._n+\".setCode value not a number, please check!\",e,typeof e)),this}setMessage(e){return we(e)||this._sentFlag||(Ge(e)&&(this.message=e.toString()),Ue(e)&&(this.message=e)),this}setCostTime(e){return this.costTime=e,this}setLevel(e){return we(e)||this._sentFlag||(this.level=Mn[e]),this}setMoreMessage(e){return Lt(this.moreMessage)?this.moreMessage=\"\"+e:this.moreMessage+=\" \"+e,this}setNetworkType(e){if(we(e))_e.w(this._n+\".setNetworkType value is undefined, please check!\");else{const t=fn[e.toLowerCase()];we(t)||(this.networkType=t)}return this}getStartTs(){return this._startts}setUIPlatform(e){this.uiPlatform=e}}class Tn{constructor(e){this.type=t.MSG_TEXT,this.content={text:e.text||\"\"}}setText(e){this.content.text=e}sendable(){return 0!==this.content.text.length}}class yn{constructor(e,s){this._imageMemoryURL=\"\",this._fileDownloadProxy=s,P?this.createImageDataASURLInWXMiniApp(e.file):this.createImageDataASURLInWeb(e.file),this._initImageInfoModel(),this.type=t.MSG_IMAGE,this._percent=0,this.content={imageFormat:e.imageFormat||me.UNKNOWN,uuid:e.uuid,imageInfoArray:[]},this.initImageInfoArray(e.imageInfoArray),this._autoFixUrl()}_initImageInfoModel(){const e=this;this._ImageInfoModel=function(t){this.instanceID=We(9999999),this.sizeType=t.type||0,this.type=0,this.size=t.size||0,this.width=t.width||0,this.height=t.height||0,this.imageUrl=t.url||\"\",this.url=Et(t.url||e._imageMemoryURL,e._fileDownloadProxy)},this._ImageInfoModel.prototype={setSizeType(e){this.sizeType=e},setType(e){this.type=e},setImageUrl(e){e&&(this.imageUrl=e)},getImageUrl(){return this.imageUrl}}}initImageInfoArray(e){let t=0,s=null,o=null;for(;t<=2;)o=we(e)||we(e[t])?{type:0,size:0,width:0,height:0,url:\"\"}:e[t],s=new this._ImageInfoModel(o),s.setSizeType(t+1),s.setType(t),this.addImageInfo(s),t++;this.updateAccessSideImageInfoArray()}updateImageInfoArray(e){const t=this.content.imageInfoArray.length;let s;for(let o=0;o<t;o++)s=this.content.imageInfoArray[o],e[o].size&&(s.size=e[o].size),e[o].url&&s.setImageUrl(e[o].url),e[o].width&&(s.width=e[o].width),e[o].height&&(s.height=e[o].height)}_autoFixUrl(){const e=this.content.imageInfoArray.length;let t=\"\",s=\"\";const o=[\"http\",\"https\"];let i=null;for(let n=0;n<e;n++)this.content.imageInfoArray[n].url&&(i=this.content.imageInfoArray[n],\"\"!==i.imageUrl&&(s=i.imageUrl.slice(0,i.imageUrl.indexOf(\"://\")+1),t=i.imageUrl.slice(i.imageUrl.indexOf(\"://\")+1),o.indexOf(s)<0&&(s=\"https:\"),this.content.imageInfoArray[n].setImageUrl([s,t].join(\"\"))))}updatePercent(e){this._percent=e,this._percent>1&&(this._percent=1)}updateImageFormat(e){this.content.imageFormat=me[e.toUpperCase()]||me.UNKNOWN}createImageDataASURLInWeb(e){void 0!==e&&e.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(e.files[0]))}createImageDataASURLInWXMiniApp(e){e&&e.url&&(this._imageMemoryURL=e.url)}replaceImageInfo(e,t){this.content.imageInfoArray[t]instanceof this._ImageInfoModel||(this.content.imageInfoArray[t]=e)}addImageInfo(e){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(e)}updateAccessSideImageInfoArray(){const e=this.content.imageInfoArray,{width:t=0,height:s=0}=e[0];0!==t&&0!==s&&(ht(e),Object.assign(e[2],pt({originWidth:t,originHeight:s,min:720})))}sendable(){return 0!==this.content.imageInfoArray.length&&(\"\"!==this.content.imageInfoArray[0].imageUrl&&0!==this.content.imageInfoArray[0].size)}}class Dn{constructor(e){this.type=t.MSG_FACE,this.content=e||null}sendable(){return null!==this.content}}class En{constructor(e,s){this.type=t.MSG_AUDIO,this._percent=0,this.content={downloadFlag:2,second:e.second,size:e.size,url:Et(e.url,s),remoteAudioUrl:e.url||\"\",uuid:e.uuid}}updatePercent(e){this._percent=e,this._percent>1&&(this._percent=1)}updateAudioUrl(e){this.content.remoteAudioUrl=e}sendable(){return\"\"!==this.content.remoteAudioUrl}}const Sn={from:!0,groupID:!0,groupName:!0,to:!0};class Ln{constructor(e){this.type=t.MSG_GRP_TIP,this.content={},this._initContent(e)}_initContent(e){Object.keys(e).forEach(t=>{switch(t){case\"remarkInfo\":break;case\"groupProfile\":this.content.groupProfile={},this._initGroupProfile(e[t]);break;case\"operatorInfo\":break;case\"memberInfoList\":case\"msgMemberInfo\":this._updateMemberList(e[t]);break;case\"memberExtraInfo\":case\"onlineMemberInfo\":break;case\"memberNum\":this.content[t]=e[t],this.content.memberCount=e[t];break;case\"newGroupProfile\":this.content.newGroupProfile={},this._initNewGroupProfile(e[t]);break;default:this.content[t]=e[t]}}),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}_initGroupProfile(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const o=t[s];Sn[o]&&(this.content.groupProfile[o]=e[o])}}_updateMemberList(e){Lt(this.content.memberList)?this.content.memberList=e:this.content.memberList.forEach(t=>{e.forEach(e=>{t.userID===e.userID&&Object.assign(t,e)})})}_initNewGroupProfile(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const o=t[s];\"muteAllMembers\"!==o?this.content.newGroupProfile[o]=e[o]:this.content.newGroupProfile[o]=1===e[o]}}}const An={from:!0,groupID:!0,groupName:!0,to:!0};class vn{constructor(e){this.type=t.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(e)}_initContent(e){Object.keys(e).forEach(t=>{switch(t){case\"memberInfoList\":break;case\"remarkInfo\":this.content.handleMessage=e[t];break;case\"groupProfile\":this.content.groupProfile={},this._initGroupProfile(e[t]);break;default:this.content[t]=e[t]}})}_initGroupProfile(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const o=t[s];An[o]&&(\"groupName\"===o?this.content.groupProfile.name=e[o]:this.content.groupProfile[o]=e[o])}}}class Nn{constructor(e,s){this.type=t.MSG_FILE,this._percent=0;const o=this._getFileInfo(e);this.content={downloadFlag:2,fileUrl:Et(e.url,s)||\"\",uuid:e.uuid,fileName:o.name||\"\",fileSize:o.size||0}}_getFileInfo(e){if(!we(e.fileName)&&!we(e.fileSize))return{size:e.fileSize,name:e.fileName};const t=e.file.files[0];if(U){if(t.path&&-1!==t.path.indexOf(\".\")){const e=t.path.slice(t.path.lastIndexOf(\".\")+1).toLowerCase();t.type=e,t.name||(t.name=`${We(999999)}.${e}`)}t.name||(t.type=\"\",t.name=t.path.slice(t.path.lastIndexOf(\"/\")+1).toLowerCase()),t.suffix&&(t.type=t.suffix),t.url||(t.url=t.path)}return{size:t.size,name:t.name}}updatePercent(e){this._percent=e,this._percent>1&&(this._percent=1)}updateFileUrl(e){this.content.fileUrl=e}sendable(){return\"\"!==this.content.fileUrl&&(\"\"!==this.content.fileName&&0!==this.content.fileSize)}}class Rn{constructor(e){this.type=t.MSG_CUSTOM,this.content={data:e.data||\"\",description:e.description||\"\",extension:e.extension||\"\"}}setData(e){return this.content.data=e,this}setDescription(e){return this.content.description=e,this}setExtension(e){return this.content.extension=e,this}sendable(){return 0!==this.content.data.length||0!==this.content.description.length||0!==this.content.extension.length}}class On{constructor(e,s){this.type=t.MSG_VIDEO,this._percent=0,this.content={remoteVideoUrl:e.remoteVideoUrl||e.videoUrl||\"\",videoFormat:e.videoFormat,videoSecond:parseInt(e.videoSecond,10),videoSize:e.videoSize,videoUrl:Et(e.videoUrl,s),videoDownloadFlag:2,videoUUID:e.videoUUID,thumbUUID:e.thumbUUID,thumbFormat:e.thumbFormat,thumbWidth:e.thumbWidth,snapshotWidth:e.thumbWidth,thumbHeight:e.thumbHeight,snapshotHeight:e.thumbHeight,thumbSize:e.thumbSize,snapshotSize:e.thumbSize,thumbDownloadFlag:2,thumbUrl:Et(e.thumbUrl,s),snapshotUrl:Et(e.thumbUrl,s)}}updatePercent(e){this._percent=e,this._percent>1&&(this._percent=1)}updateVideoUrl(e){e&&(this.content.remoteVideoUrl=e)}updateSnapshotInfo(e){const{snapshotUrl:t,snapshotWidth:s,snapshotHeight:o}=e;Lt(t)||(this.content.thumbUrl=this.content.snapshotUrl=t),Lt(s)||(this.content.thumbWidth=this.content.snapshotWidth=Number(s)),Lt(o)||(this.content.thumbHeight=this.content.snapshotHeight=Number(o))}sendable(){return\"\"!==this.content.remoteVideoUrl}}class Gn{constructor(e){this.type=t.MSG_LOCATION;const{description:s,longitude:o,latitude:i}=e;this.content={description:s,longitude:o,latitude:i}}sendable(){return!0}}class Un{constructor(e,s){if(this.from=e.from,this.messageSender=e.from,this.time=e.time,this.messageSequence=e.sequence,this.clientSequence=e.clientSequence||e.sequence,this.messageRandom=e.random,this.cloudCustomData=e.cloudCustomData||\"\",this.clientTime=e.clientTime||void 0,e.ID)this.ID=e.ID||\"\",this.nick=e.nick||\"\",this.avatar=e.avatar||\"\",this.messageBody=[{type:e.type,payload:e.payload}],e.conversationType.startsWith(t.CONV_C2C)?this.receiverUserID=e.to:e.conversationType.startsWith(t.CONV_GROUP)&&(this.receiverGroupID=e.to),this.messageReceiver=e.to;else{this.nick=e.nick||\"\",this.avatar=e.avatar||\"\",this.messageBody=[];const o=e.elements[0].type,i=e.elements[0].content;this._patchRichMediaPayload(o,i),this._updateRichMediaDownloadUrl(o,i,s),o===t.MSG_MERGER?this.messageBody.push({type:o,payload:new kn(i).content}):this.messageBody.push({type:o,payload:i}),e.groupID&&(this.receiverGroupID=e.groupID,this.messageReceiver=e.groupID),e.to&&(this.receiverUserID=e.to,this.messageReceiver=e.to),this.ID=`${e.tinyID}-${e.clientTime}-${e.random}`}}_patchRichMediaPayload(e,s){e===t.MSG_IMAGE?s.imageInfoArray.forEach(e=>{!e.imageUrl&&e.url&&(e.imageUrl=e.url,e.sizeType=e.type,1===e.type?e.type=0:3===e.type&&(e.type=1))}):e===t.MSG_VIDEO?!s.remoteVideoUrl&&s.videoUrl&&(s.remoteVideoUrl=s.videoUrl):e===t.MSG_AUDIO?!s.remoteAudioUrl&&s.url&&(s.remoteAudioUrl=s.url):e===t.MSG_FILE&&!s.fileUrl&&s.url&&(s.fileUrl=s.url,s.url=void 0)}_updateRichMediaDownloadUrl(e,s,o){o&&(e===t.MSG_IMAGE?s.imageInfoArray.forEach(e=>{e.url=Et(e.url,o)}):e===t.MSG_VIDEO?(s.videoUrl=Et(s.videoUrl,o),s.snapshotUrl=Et(s.thumbUrl,o),s.snapshotHeight=s.thumbHeight,s.snapshotWidth=s.thumbWidth):e===t.MSG_AUDIO?s.url=Et(s.url,o):e===t.MSG_FILE&&(s.fileUrl=Et(s.fileUrl,o)))}}var kn=class{constructor(e,s){if(this.type=t.MSG_MERGER,this.content={downloadKey:\"\",pbDownloadKey:\"\",messageList:[],title:\"\",abstractList:[],compatibleText:\"\",version:0,layersOverLimit:!1},e.downloadKey){const{downloadKey:t,pbDownloadKey:s,title:o,abstractList:i,compatibleText:n,version:r}=e;this.content.downloadKey=t,this.content.pbDownloadKey=s,this.content.title=o,this.content.abstractList=i,this.content.compatibleText=n,this.content.version=r||0}else if(Lt(e.messageList))1===e.layersOverLimit&&(this.content.layersOverLimit=!0);else{const{messageList:t,title:o,abstractList:i,compatibleText:n,version:r}=e,a=[];t.forEach(e=>{if(!Lt(e)){const t=new Un(e,s);a.push(t)}}),this.content.messageList=a,this.content.title=o,this.content.abstractList=i,this.content.compatibleText=n,this.content.version=r||0}}sendable(){return!Lt(this.content.messageList)||!Lt(this.content.downloadKey)}};const Pn={1:t.MSG_PRIORITY_HIGH,2:t.MSG_PRIORITY_NORMAL,3:t.MSG_PRIORITY_LOW,4:t.MSG_PRIORITY_LOWEST};class bn{constructor(e){this.ID=\"\",this.conversationID=e.conversationID||null,this.conversationType=e.conversationType||t.CONV_C2C,this.conversationSubType=e.conversationSubType,this.time=e.time||Math.ceil(Date.now()/1e3),this.sequence=e.sequence||0,this.clientSequence=e.clientSequence||e.sequence||0,this.random=e.random||0===e.random?e.random:We(),this.priority=this._computePriority(e.priority),this.nick=e.nick||\"\",this.avatar=e.avatar||\"\",this.isPeerRead=!1,this.nameCard=\"\",this._elements=[],this.isPlaceMessage=e.isPlaceMessage||0,this.isRevoked=2===e.isPlaceMessage||8===e.msgFlagBits,this.from=e.from||null,this.to=e.to||null,this.flow=\"\",this.isSystemMessage=e.isSystemMessage||!1,this.protocol=e.protocol||\"JSON\",this.isResend=!1,this.isRead=!1,this.status=e.status||Nt.SUCCESS,this._onlineOnlyFlag=!1,this._groupAtInfoList=[],this._relayFlag=!1,this.atUserList=[],this.cloudCustomData=e.cloudCustomData||\"\",this.isDeleted=!1,this.isModified=!1,this._isExcludedFromUnreadCount=!(!e.messageControlInfo||1!==e.messageControlInfo.excludedFromUnreadCount),this._isExcludedFromLastMessage=!(!e.messageControlInfo||1!==e.messageControlInfo.excludedFromLastMessage),this.clientTime=e.clientTime||de()||0,this.senderTinyID=e.senderTinyID||e.tinyID||\"\",this.readReceiptInfo=e.readReceiptInfo||{readCount:void 0,unreadCount:void 0,isPeerRead:void 0},this.needReadReceipt=!0===e.needReadReceipt||1===e.needReadReceipt,this.version=e.messageVersion||0,this.isBroadcastMessage=e.isBroadcastMessage||!1,this._receiverList=e.receiverList||void 0,this.isSupportExtension=!0===e.isSupportExtension||1===e.isSupportExtension,this.revoker=e.revokerInfo&&e.revokerInfo.revoker||null,this.reInitialize(e.currentUser),this.extractGroupInfo(e.groupProfile||null),this.handleGroupAtInfo(e),this.initC2CReadReceiptInfo(e.readReceiptSentByPeer)}get elements(){return this._elements}getElements(){return this._elements}extractGroupInfo(e){if(null===e)return;Ue(e.nick)&&(this.nick=e.nick),Ue(e.avatar)&&(this.avatar=e.avatar);const{messageFromAccountExtraInformation:t}=e;Pe(t)&&Ue(t.nameCard)&&(this.nameCard=t.nameCard)}handleGroupAtInfo(e){e.payload&&e.payload.atUserList&&e.payload.atUserList.forEach(e=>{e!==t.MSG_AT_ALL?(this._groupAtInfoList.push({groupAtAllFlag:0,groupAtUserID:e}),this.atUserList.push(e)):(this._groupAtInfoList.push({groupAtAllFlag:1}),this.atUserList.push(t.MSG_AT_ALL))}),be(e.groupAtInfo)&&e.groupAtInfo.forEach(e=>{0===e.groupAtAllFlag?this.atUserList.push(e.groupAtUserID):1===e.groupAtAllFlag&&this.atUserList.push(t.MSG_AT_ALL)})}getGroupAtInfoList(){return this._groupAtInfoList}_initProxy(){this._elements[0]&&(this.payload=this._elements[0].content,this.type=this._elements[0].type)}reInitialize(e){e&&(this.status=this.from?Nt.SUCCESS:Nt.UNSEND,!this.from&&(this.from=e)),this._initFlow(e),this._initSequence(e),this._concatConversationID(e),this.generateMessageID()}isSendable(){return 0!==this._elements.length&&(\"function\"==typeof this._elements[0].sendable&&this._elements[0].sendable())}_initTo(e){this.conversationType===t.CONV_GROUP&&(this.to=e.groupID)}_initSequence(e){0===this.clientSequence&&e&&(this.clientSequence=function(e){if(!e)return!1;if(void 0===Je[e]){const t=new Date;let s=(\"3\"+t.getHours()).slice(-2),o=(\"0\"+t.getMinutes()).slice(-2),i=(\"0\"+t.getSeconds()).slice(-2);Je[e]=parseInt([s,o,i,\"0001\"].join(\"\")),s=null,o=null,i=null,_e.l(\"autoIncrementIndex start index:\"+Je[e])}return Je[e]++}(e)),0===this.sequence&&this.conversationType===t.CONV_C2C&&(this.sequence=this.clientSequence)}generateMessageID(){this.from===t.CONV_SYSTEM&&(this.senderTinyID=\"144115198244471703\"),this.ID=`${this.senderTinyID}-${this.clientTime}-${this.random}`}_initFlow(e){\"\"!==e&&(e===this.from?(this.flow=\"out\",this.isRead=!0):this.flow=\"in\")}_concatConversationID(e){const{to:s}=this;let o=\"\";const i=this.conversationType;i!==t.CONV_SYSTEM?(o=i===t.CONV_C2C?e===this.from?s:this.from:this.to,this.conversationID=o?`${i}${o}`:null):this.conversationID=t.CONV_SYSTEM}isElement(e){return e instanceof Tn||e instanceof yn||e instanceof Dn||e instanceof En||e instanceof Nn||e instanceof On||e instanceof Ln||e instanceof vn||e instanceof Rn||e instanceof Gn||e instanceof kn}setElement(e,s){if(this.isElement(e))return this._elements=[e],void this._initProxy();const o=e=>{if(e.type&&e.content)switch(e.type){case t.MSG_TEXT:this.setTextElement(e.content);break;case t.MSG_IMAGE:this.setImageElement(e.content,s);break;case t.MSG_AUDIO:this.setAudioElement(e.content,s);break;case t.MSG_FILE:this.setFileElement(e.content,s);break;case t.MSG_VIDEO:this.setVideoElement(e.content,s);break;case t.MSG_CUSTOM:this.setCustomElement(e.content);break;case t.MSG_LOCATION:this.setLocationElement(e.content);break;case t.MSG_GRP_TIP:this.setGroupTipElement(e.content);break;case t.MSG_GRP_SYS_NOTICE:this.setGroupSystemNoticeElement(e.content);break;case t.MSG_FACE:this.setFaceElement(e.content);break;case t.MSG_MERGER:this.setMergerElement(e.content,s)}};if(be(e))for(let t=0;t<e.length;t++)o(e[t]);else o(e);this._initProxy()}clearElement(){this._elements.length=0}setTextElement(e){const t=\"string\"==typeof e?e:e.text,s=new Tn({text:t});this._elements.push(s)}setImageElement(e,t){const s=new yn(e,t);this._elements.push(s)}setAudioElement(e,t){const s=new En(e,t);this._elements.push(s)}setFileElement(e,t){const s=new Nn(e,t);this._elements.push(s)}setVideoElement(e,t){const s=new On(e,t);this._elements.push(s)}setLocationElement(e){const t=new Gn(e);this._elements.push(t)}setCustomElement(e){const t=new Rn(e);this._elements.push(t)}setGroupTipElement(e){let s={};const o=e.operationType;if(Lt(e.memberInfoList)?e.operatorInfo&&(s=e.operatorInfo):o!==t.GRP_TIP_MBR_JOIN&&o!==t.GRP_TIP_MBR_KICKED_OUT&&o!==t.GRP_TIP_MBR_SET_ADMIN&&o!==t.GRP_TIP_MBR_CANCELED_ADMIN||(s=e.memberInfoList[0]),!Lt(e.memberExtraInfo)){const{reason:t}=e.memberExtraInfo;e.msgMemberInfo.forEach(e=>{e.reason=t})}const{nick:i,avatar:n}=s;Ue(i)&&(this.nick=i),Ue(n)&&(this.avatar=n);const r=new Ln(e);this._elements.push(r)}setGroupSystemNoticeElement(e){const t=new vn(e);this._elements.push(t)}setFaceElement(e){const t=new Dn(e);this._elements.push(t)}setMergerElement(e,t){const s=new kn(e,t);this._elements.push(s)}setIsRead(e){this.isRead=e}setRelayFlag(e){this._relayFlag=e}getRelayFlag(){return this._relayFlag}_computePriority(e){if(we(e))return t.MSG_PRIORITY_NORMAL;if(Ue(e)&&-1!==Object.values(Pn).indexOf(e))return e;if(Ge(e)){const t=\"\"+e;if(-1!==Object.keys(Pn).indexOf(t))return Pn[t]}return t.MSG_PRIORITY_NORMAL}setNickAndAvatar(e){const{nick:t,avatar:s}=e;Ue(t)&&(this.nick=t),Ue(s)&&(this.avatar=s)}setNameCard(e){Ue(e)&&(this.nameCard=e)}initC2CReadReceiptInfo(e){this.conversationType===t.CONV_C2C&&!0===this.needReadReceipt&&(this.readReceiptInfo.isPeerRead=1===e)}}const wn=function(e){return{code:0,data:e||{}}};class Fn extends Error{constructor(e){super();const{code:t,message:s,data:o}=e;this.code=t,this.message=s||this._getErrorMessage(this.code),this.data=o||{}}}let $n=null;const qn=function(e){$n=e},xn=function(e){return Promise.resolve(wn(e))},Vn=function(t,s=!1){if(t instanceof Fn)return s&&null!==$n&&$n.emit(e.ERROR,t),Promise.reject(t);if(t instanceof Error){const t=new Fn({code:nn.UNCAUGHT_ERROR});return s&&null!==$n&&$n.emit(e.ERROR,t),Promise.reject(t)}if(we(t)||we(t.code))return;const o=new Fn(t);return s&&null!==$n&&$n.emit(e.ERROR,o),Promise.reject(o)};class Bn extends Fs{constructor(e){super(e),this._n=\"C2CModule\",this._messageFromUnreadDBMap=new Map,this._signalingFromUnreadDBList=[]}onNewC2CMessage(t){const{dataList:s,isInstantMessage:o,C2CRemainingUnreadList:i,C2CPairUnreadList:n}=t;_e.d(`${this._n}.onNewC2CMessage count:${s.length} isInstantMessage:${o}`);const{conversationOptionsList:r,messageList:a,isUnreadC2CMessage:u}=this._newC2CMessageStoredAndSummary({dataList:s,C2CRemainingUnreadList:i,C2CPairUnreadList:n,isInstantMessage:o});if(this.filterModifiedMessage(a),r.length>0){this.getModule(_s).onNewMessage({conversationOptionsList:r,isInstantMessage:o,isUnreadC2CMessage:u})}const c=this.filterUnmodifiedMessage(a);o&&c.length>0&&this.emitOuterEvent(e.MESSAGE_RECEIVED,c),a.length=0}_newC2CMessageStoredAndSummary({dataList:e,C2CRemainingUnreadList:s,C2CPairUnreadList:o,isInstantMessage:i}){let n=null;const r=[],a=[],u={},c=this.getModule(Cs),l=this.getModule(Rs);let d=!1;const p=this.getModule(_s),h=this.getFileDownloadProxy();for(let _=0,m=e.length;_<m;_++){if(this._isSignaling(e[_])){this._signalingFromUnreadDBList.push(e[_].eventArray[0].c2CNotifyMsgArray[0]);continue}const s=e[_];s.currentUser=this.getMyUserID(),s.conversationType=t.CONV_C2C,s.isSystemMessage=!!s.isSystemMessage,(we(s.nick)||we(s.avatar))&&(d=!0,_e.d(this._n+\"._newC2CMessageStoredAndSummary nick or avatar missing!\")),n=new bn(s),s.elements=c.parseElements(s.elements,s.from),n.setElement(s.elements,h),n.setNickAndAvatar({nick:s.nick,avatar:s.avatar});const{conversationID:o}=n;if(i){if(1===this._messageFromUnreadDBMap.get(n.ID))continue;let t=!1;if(n.from!==this.getMyUserID()){const e=p.getLatestMessageSentByPeer(o);if(e){const{nick:s,avatar:o}=e;d?n.setNickAndAvatar({nick:s,avatar:o}):s===n.nick&&o===n.avatar||(t=!0)}}else{const e=p.getLatestMessageSentByMe(o);if(e){const{nick:t,avatar:s}=e;t===n.nick&&s===n.avatar||p.modifyMessageSentByMe({conversationID:o,latestNick:n.nick,latestAvatar:n.avatar})}}let r=1===e[_].isModified;if(p.isMessageSentByCurrentInstance(n)?n.isModified=r:r=!1,0===s.msgLifeTime)n._onlineOnlyFlag=!0,p.isMessageSentByCurrentInstance(n)||a.push(n);else{if(!p.pushIntoMessageList(a,n,r))continue;t&&(p.modifyMessageSentByPeer({conversationID:o,latestNick:n.nick,latestAvatar:n.avatar}),p.updateUserProfileSpecifiedKey({conversationID:o,nick:n.nick,avatar:n.avatar}))}i&&n.clientTime>0&&l.addMessageDelay(n.clientTime)}else this._messageFromUnreadDBMap.set(n.ID,1);if(0!==s.msgLifeTime){if(!1===n._onlineOnlyFlag){const e=p.getLastMessageTime(o);if(Ge(e)&&n.time<e)continue;if(we(u[o])){let e=0;\"in\"===n.flow&&(n._isExcludedFromUnreadCount||(e=1)),u[o]=r.push({conversationID:o,unreadCount:e,type:n.conversationType,subType:n.conversationSubType,lastMessage:n._isExcludedFromLastMessage?\"\":n})-1}else{const e=u[o];r[e].type=n.conversationType,r[e].subType=n.conversationSubType,r[e].lastMessage=n._isExcludedFromLastMessage?\"\":n,\"in\"===n.flow&&(n._isExcludedFromUnreadCount||r[e].unreadCount++)}}}else n._onlineOnlyFlag=!0}this._handleSignalingFromUnreadDB();let g=!1;if(be(o))for(let _=0,m=o.length;_<m;_++)if(o[_].unreadCount>0){g=!0;const e=r.find(({conversationID:e})=>e===\"C2C\"+o[_].from);e?e.unreadCount=o[_].unreadCount:r.push({conversationID:\"C2C\"+o[_].from,unreadCount:o[_].unreadCount,type:t.CONV_C2C})}if(be(s))for(let _=0,m=s.length;_<m;_++){r.find(({conversationID:e})=>e===\"C2C\"+s[_].from)||r.push({conversationID:\"C2C\"+s[_].from,type:t.CONV_C2C,lastMsgTime:s[_].lastMsgTime})}return{conversationOptionsList:r,messageList:a,isUnreadC2CMessage:g}}_isSignaling(e){const{eventArray:t}=e;return!(!be(t)||10!==t[0].event)}_handleSignalingFromUnreadDB(){const e=this._signalingFromUnreadDBList.length;if(_e.l(`${this._n}._handleSignalingFromUnreadDB signalingCount:${e}`),0===e)return;const t=[];this._signalingFromUnreadDBList.forEach(e=>{e.hasOwnProperty(\"c2cMessageRevokedNotify\")&&t.push(e)}),this.onC2CMessageRevoked({dataList:t}),this._signalingFromUnreadDBList.length=0,t.length=0}onC2CMessageRevoked(s){const o=this.getModule(_s),i=[];let n=null,r=!0;s.dataList.forEach(e=>{if(e.c2cMessageRevokedNotify){const{revokedInfos:s}=e.c2cMessageRevokedNotify;we(s)||s.forEach(e=>{const s=this.getMyUserID()===e.from?`${t.CONV_C2C}${e.to}`:`${t.CONV_C2C}${e.from}`;n=o.revoke(s,e.sequence,e.random);const a=e.revokerInfo&&e.revokerInfo.revoker;if(n)n.revoker||(n.revoker=a,i.push(n));else{const t={conversationID:s,sequence:e.sequence,time:e.time,revoker:a};o.isLastMessageRevoked(t)&&(i.push(t),r=!1)}})}}),0!==i.length&&(o.onMessageRevoked(i),!0===r&&(_e.l(`${this._n}.onC2CMessageRevoked count:${i.length}`),this.emitOuterEvent(e.MESSAGE_REVOKED,i)))}onC2CMessageReadReceipt(e){e.dataList.forEach(e=>{if(!Lt(e.c2cMessageReadReceipt)){const{to:s}=e.c2cMessageReadReceipt;e.c2cMessageReadReceipt.uinPairReadArray.forEach(e=>{const{peerReadTime:o}=e;_e.d(`${this._n}._onC2CMessageReadReceipt to:${s} peerReadTime:${o}`);const i=`${t.CONV_C2C}${s}`,n=this.getModule(_s);n.recordPeerReadTime(i,o),n.updateMessageIsPeerReadProperty(i,o)})}})}onC2CMessageReadNotice(e){e.dataList.forEach(e=>{if(!Lt(e.c2cMessageReadNotice)){const s=this.getModule(_s);e.c2cMessageReadNotice.uinPairReadArray.forEach(e=>{const{from:o,peerReadTime:i}=e;_e.d(`${this._n}.onC2CMessageReadNotice from:${o} lastReadTime:${i}`);const n=`${t.CONV_C2C}${o}`;s.updateIsReadAfterReadReport({conversationID:n,lastMessageTime:i}),s.updateUnreadCount(n)})}})}onC2CMessageModified(e){_e.d(this._n+\".onC2CMessageModified options:\",JSON.stringify(e));const s=this.getModule(_s);e.dataList.forEach(e=>{s.onMessageModified({...e,conversationType:t.CONV_C2C})})}onReadReceiptList(e){_e.d(this._n+\".onReadReceiptList options:\",JSON.stringify(e));const{userID:t,readReceiptList:s}=e.dataList;this.getModule(_s).updateReadReceiptInfo({userID:t,readReceiptList:s})}sendMessage(e,t){const s=this._createC2CMessagePack(e,t);return this.request(s)}_createC2CMessagePack(e,t){let s=null;t&&(t.offlinePushInfo&&(s=t.offlinePushInfo),!0===t.onlineUserOnly&&(s?s.disablePush=!0:s={disablePush:!0}));let o=\"\";Ue(e.cloudCustomData)&&e.cloudCustomData.length>0&&(o=e.cloudCustomData);const i=[];if(Pe(t)&&Pe(t.messageControlInfo)){const{excludedFromUnreadCount:e,excludedFromLastMessage:s,excludedFromContentModeration:o}=t.messageControlInfo;!0===e&&i.push(\"NoUnread\"),!0===s&&i.push(\"NoLastMsg\"),!0===o&&i.push(\"NoMsgCheck\")}const n=this.isOnlineMessage(e,t)?0:void 0;return{protocolName:Ks,tjgID:this.generateTjgID(e),requestData:{fromAccount:this.getMyUserID(),toAccount:e.to,msgBody:e.getElements(),cloudCustomData:o,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:n,nick:e.nick,avatar:e.avatar,offlinePushInfo:s?{pushFlag:!0===s.disablePush?1:0,title:s.title||\"\",desc:s.description||\"\",ext:s.extension||\"\",apnsInfo:{badgeMode:!0===s.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(s)},androidInfo:{OPPOChannelID:s.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:0!==n?i:void 0,clientTime:e.clientTime,needReadReceipt:!0===e.needReadReceipt?1:0,isSupportExtension:!0===e.isSupportExtension?1:0}}}_isVoipPush(e){let t=void 0;return we(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}isOnlineMessage(e,t){return!(!t||!0!==t.onlineUserOnly)}revokeMessage(e){return this.request({protocolName:ho,requestData:{msgInfo:{fromAccount:e.from,toAccount:e.to,msgSeq:e.sequence,msgRandom:e.random,msgTimeStamp:e.time}}})}deleteMessage(e){const{to:t,keyList:s}=e;return _e.l(`${this._n}.deleteMessage toAccount:${t} count:${s.length}`),this.request({protocolName:Io,requestData:{fromAccount:this.getMyUserID(),to:t,keyList:s}})}modifyRemoteMessage(e){const{from:t,to:s,version:o=0,sequence:i,random:n,time:r,payload:a,type:u,cloudCustomData:c}=e;let l=void 0;return Ct(u)&&(l=[],l.push({type:u,content:a})),this.request({protocolName:Co,requestData:{from:t,to:s,version:o,sequence:i,random:n,time:r,elements:l,cloudCustomData:c}})}setMessageRead({conversationID:e,lastMessageTime:t}){const s=this._n+\".setMessageRead\";_e.l(`${s} conversationID:${e} lastMessageTime:${t}`),Ge(t)||this.outputWarning(\"DoNotModifyLastTime\");const o=new Cn(\"setC2CMessageRead\");return o.setMessage(`conversationID:${e} lastMessageTime:${t}`),this.request({protocolName:go,requestData:{C2CMsgReaded:{cookie:\"\",C2CMsgReadedItem:[{toAccount:e.replace(\"C2C\",\"\"),lastMessageTime:t,receipt:1}]}}}).then(()=>{o.setNetworkType(this.getNetworkType()).end(),_e.l(s+\" ok\");const i=this.getModule(_s);return i.updateIsReadAfterReadReport({conversationID:e,lastMessageTime:t}),i.updateUnreadCount(e),wn()}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.l(s+\" failed. error:\",e),Vn(e)))}getRoamingMessage(e){const s=this._n+\".getRoamingMessage\",{peerAccount:o,conversationID:i,count:n,lastMessageTime:r,messageKey:a}=e,u=`peerAccount:${o} count:${n||15} lastMessageTime:${r||0} messageKey:${a}`;_e.l(`${s} ${u}`);const c=new Cn(\"getC2CRoamingMessages\");return this.request({protocolName:Mo,requestData:{peerAccount:o,count:n||15,lastMessageTime:r||0,messageKey:a}}).then(e=>{const{complete:o,messageList:n,messageKey:r,lastMessageTime:a}=e.data;we(n)?_e.l(`${s} ok. complete:${o} but messageList is undefined!`):_e.l(`${s} ok. complete:${o} count:${n.length}`),c.setNetworkType(this.getNetworkType()).setMessage(`${u} complete:${o} length:${n.length}`).end();const l=this.getModule(_s);1===o&&l.setCompleted(i);const d=l.onRoamingMessage(n,i);l.modifyMessageList(i),l.updateIsRead(i),l.updateRoamingMessageKeyAndTime(i,r,a);const p=l.getPeerReadTime(i);if(_e.l(`${s} update isPeerRead property. conversationID:${i} peerReadTime:${p}`),p)l.updateMessageIsPeerReadProperty(i,p);else{const e=i.replace(t.CONV_C2C,\"\");this.getRemotePeerReadTime([e]).then(()=>{l.updateMessageIsPeerReadProperty(i,l.getPeerReadTime(i))})}let h=\"\";if(d.length>0)h=d[0].ID;else{const e=l.getLocalOldestMessage(i);e&&(h=e.ID)}return _e.l(`${s} nextReqID:${h} stored message count:${d.length}`),{nextReqID:h,storedMessageList:d}}).catch(e=>(this.probeNetwork().then(([t,s])=>{c.setMessage(u).setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}getRoamingMessagesHopping(e){const s=this._n+\".getRoamingMessagesHopping\",{peerAccount:o,time:i=0,count:n,direction:r}=e,a=`${t.CONV_C2C}${o}`,u=`peerAccount:${o} count:${n} time:${i} direction:${r}`;_e.l(`${s} ${u}`);const c=new Cn(\"getC2CRoamingMessagesHopping\");return this.request({protocolName:Mo,requestData:{peerAccount:o,count:n+1,lastMessageTime:i,direction:r}}).then(e=>{const{complete:t,messageList:o=[],lastMessageTime:i}=e.data;_e.l(`${s} ok. complete:${t} count:${o.length}`),c.setNetworkType(this.getNetworkType()).setMessage(`${u} complete:${t} length:${o.length}`).end(),1!==t&&(1===r?o.pop():o.shift());const n=this.getModule(_s).onRoamingMessage(o,a,!1);this._modifyMessageList(a,n);const l=this._computeResult({complete:t,lastMessageTime:i,resultList:n});return wn(l)}).catch(e=>(this.probeNetwork().then(([t,s])=>{c.setMessage(u).setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}_computeResult(e){const{complete:t=0,lastMessageTime:s,resultList:o=[]}=e,i={messageList:[...o],isCompleted:!1,nextMessageTime:\"\"};return 1===t?(i.isCompleted=!0,i):(i.nextMessageTime=s,i)}_modifyMessageList(e,t){const s=this.getModule(_s).getLocalConversation(e);if(!s)return;const o=s.userProfile.nick,i=s.userProfile.avatar,n=this.getModule(cs).getNickAndAvatarByUserID(this.getMyUserID()),r=n.nick,a=n.avatar;for(let u=t.length-1;u>=0;u--){const e=t[u];\"in\"===e.flow&&(e.nick!==o&&e.setNickAndAvatar({nick:o}),e.avatar!==i&&e.setNickAndAvatar({avatar:i})),\"out\"===e.flow&&(e.nick!==r&&e.setNickAndAvatar({nick:r}),e.avatar!==a&&e.setNickAndAvatar({avatar:a}))}}getRemotePeerReadTime(e){const t=this._n+\".getRemotePeerReadTime\";if(Lt(e))return _e.w(t+\" userIDList is empty!\"),Promise.resolve();const s=new Cn(\"getPeerReadTime\");return _e.l(`${t} userIDList:${e}`),this.request({protocolName:fo,requestData:{userIDList:e}}).then(o=>{const{peerReadTimeList:i}=o.data;_e.l(`${t} ok. peerReadTimeList:${i}`);let n=\"\";const r=this.getModule(_s);for(let t=0;t<e.length;t++)n+=`${e[t]}-${i[t]} `,i[t]>0&&r.recordPeerReadTime(\"C2C\"+e[t],i[t]);s.setNetworkType(this.getNetworkType()).setMessage(n).end()}).catch(e=>{this.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.w(t+\" failed. error:\",e)})}sendReadReceipt(e){const s=e[0].conversationID.replace(t.CONV_C2C,\"\"),o=new Cn(\"sendC2CReadReceipt\");o.setMessage(\"peerAccount:\"+s);const i=this.getMyUserID(),n=e.filter(e=>e.from!==i&&!0===e.needReadReceipt).map(e=>{const{from:t,to:s,sequence:o,random:i,time:n,clientTime:r}=e;return{fromAccount:t,toAccount:s,sequence:o,random:i,time:n,clientTime:r}});if(0===n.length)return Vn({code:nn.READ_RECEIPT_MESSAGE_LIST_EMPTY});const r=this._n+\".sendReadReceipt\";return _e.l(`${r}. peerAccount:${s} messageInfoList length:${n.length}`),this.request({protocolName:si,requestData:{peerAccount:s,messageInfoList:n}}).then(e=>(o.end(),_e.l(r+\" ok\"),wn())).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.w(r+\" failed. error:\",e),Vn(e)))}getReadReceiptList(e){const t=this._n+\".getReadReceiptList\",s=this.getMyUserID(),o=e.filter(e=>e.from===s&&!0===e.needReadReceipt);return _e.l(`${t} userID:${s} messageList length:${o.length}`),xn({messageList:o})}getMessageExtensions(e,t){return _e.l(`${this._n}.getMessageExtensions startSequence:${t}`),this.request({protocolName:yo,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),startSequence:t}})}modifyMessageExtensions(e,t,s=1){return _e.l(`${this._n}.modifyMessageExtensions operateType:${s}`),this.request({protocolName:To,requestData:{from:e.from,to:e.to,messageKey:this._getMessageKey(e),extensionList:t,operateType:s}})}_getMessageKey(e){const{clientSequence:t,random:s,time:o}=e;return`${t}_${s}_${o}`}reset(){_e.l(this._n+\".reset\"),this._messageFromUnreadDBMap.clear(),this._signalingFromUnreadDBList.length=0}}class Hn{constructor(){this.list=new Map,this._n=\"MessageListHandler\",this._latestMessageSentByPeerMap=new Map,this._latestMessageSentByMeMap=new Map}getLocalOldestMessageByConversationID(e){if(!e)return null;if(!this.list.has(e))return null;const t=this.list.get(e).values();return t?t.next().value:null}pushIn(e,t=!1){const{conversationID:s}=e;let o=!0;this.list.has(s)||this.list.set(s,new Map);const i=this._getUniqueIDOfMessage(e);if(this.list.get(s).has(i)){const e=this.list.get(s).get(i);if(!t||!0===e.isModified)return o=!1,o}return this.list.get(s).set(i,e),this._setLatestMessageSentByPeer(s,e),this._setLatestMessageSentByMe(s,e),o}unshift(e,s){let o;if(be(e)?e.length>0&&(o=e[0].conversationID,this._unshiftMultipleMessages(e,s)):(o=e.conversationID,this._unshiftSingleMessage(e,s)),o&&o.startsWith(t.CONV_C2C)){const e=Array.from(this.list.get(o).values()),t=e.length;if(0===t)return;for(let s=t-1;s>=0;s--)if(\"out\"===e[s].flow){this._setLatestMessageSentByMe(o,e[s]);break}for(let s=t-1;s>=0;s--)if(\"in\"===e[s].flow){this._setLatestMessageSentByPeer(o,e[s]);break}}}_unshiftSingleMessage(e,t){const{conversationID:s}=e,o=this._getUniqueIDOfMessage(e);if(!this.list.has(s))return this.list.set(s,new Map),this.list.get(s).set(o,e),void t.push(e);const i=this.list.get(s),n=Array.from(i);i.has(o)||(n.unshift([o,e]),this.list.set(s,new Map(n)),t.push(e))}_unshiftMultipleMessages(e,t){const s=e.length,o=[],i=e[0].conversationID,n=this.list.get(i),r=this.list.has(i)?Array.from(n):[];for(let a=0;a<s;a++){const s=this._getUniqueIDOfMessage(e[a]);n&&n.has(s)||(o.push([s,e[a]]),t.push(e[a]))}this.list.set(i,new Map(o.concat(r)))}remove(e){const{conversationID:t}=e,s=this._getUniqueIDOfMessage(e);this.list.has(t)&&this.list.get(t).delete(s)}revoke(e,t,s){if(_e.d(\"revoke message\",e,t,s),this.list.has(e)){const o=this.list.get(e);for(const[,e]of o)if(e.sequence===t&&(we(s)||e.random===s))return e.isRevoked||(e.isRevoked=!0),e}return null}removeByConversationID(e){this.list.has(e)&&(this.list.delete(e),this._latestMessageSentByPeerMap.delete(e),this._latestMessageSentByMeMap.delete(e))}findMessage(e){let t=null;for(const[,s]of this.list){const o=[...s.values()],i=o.length;for(let s=0;s<i;s++)if(o[s].ID===e){t=o[s];break}}return t}updateMessageIsPeerReadProperty(e,t){const s=[];if(this.list.has(e)){const o=this.list.get(e);for(const[,e]of o)e.time<=t&&!e.isPeerRead&&\"out\"===e.flow&&(e.isPeerRead=!0,s.push(e));_e.l(`${this._n}.updateMessageIsPeerReadProperty conversationID:${e} peerReadTime:${t} count:${s.length}`)}return s}updateMessageIsModifiedProperty(e){const{conversationID:t}=e;if(!this.list.has(t))return;const s=this._getUniqueIDOfMessage(e),o=this.list.get(t).get(s);o&&(o.isModified=!0)}hasLocalMessageList(e){return this.list.has(e)}getLocalMessageList(e){return this.hasLocalMessageList(e)?[...this.list.get(e).values()]:[]}hasLocalMessage(e,t){let s=!1;const o=this.getLocalMessageList(e),i=o.length;for(let n=0;n<i;n++)o[n].ID===t&&(s=!0);return s}getLocalMessage(e,t){let s=null;const o=this.getLocalMessageList(e),i=o.length;for(let n=0;n<i;n++)if(o[n].ID===t){s=o[n];break}return s}getLocalLastMessage(e){const t=this.getLocalMessageList(e);return t[t.length-1]}getLocalOldestMessage(e){return this.getLocalMessageList(e)[0]}_setLatestMessageSentByPeer(e,s){e.startsWith(t.CONV_C2C)&&\"in\"===s.flow&&this._latestMessageSentByPeerMap.set(e,s)}_setLatestMessageSentByMe(e,s){e.startsWith(t.CONV_C2C)&&\"out\"===s.flow&&this._latestMessageSentByMeMap.set(e,s)}getLatestMessageSentByPeer(e){return this._latestMessageSentByPeerMap.get(e)}getLatestMessageSentByMe(e){return this._latestMessageSentByMeMap.get(e)}modifyMessageSentByPeer(e){const{conversationID:t,latestNick:s,latestAvatar:o}=e,i=this.list.get(t);if(Lt(i))return;const n=Array.from(i.values()),r=n.length;if(0===r)return;let a=null,u=0,c=!1;for(let l=r-1;l>=0;l--)\"in\"===n[l].flow&&(a=n[l],a.nick!==s&&(a.setNickAndAvatar({nick:s}),c=!0),a.avatar!==o&&(a.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));_e.l(`${this._n}.modifyMessageSentByPeer conversationID:${t} count:${u}`)}modifyMessageSentByMe(e){const{conversationID:t,latestNick:s,latestAvatar:o}=e,i=this.list.get(t);if(Lt(i))return;const n=Array.from(i.values()),r=n.length;if(0===r)return;let a=null,u=0,c=!1;for(let l=r-1;l>=0;l--)\"out\"===n[l].flow&&(a=n[l],a.nick!==s&&(a.setNickAndAvatar({nick:s}),c=!0),a.avatar!==o&&(a.setNickAndAvatar({avatar:o}),c=!0),c&&(u+=1));_e.l(`${this._n}.modifyMessageSentByMe conversationID:${t} count:${u}`)}getTopicConversationIDList(e){return[...this.list.keys()].filter(s=>s.startsWith(`${t.CONV_GROUP}${e}`))}traversal(){if(0!==this.list.size&&-1===_e.getLevel()){console.group(\"conversationID-messageCount\");for(const[e,t]of this.list)console.log(`${e}-${t.size}`);console.groupEnd()}}onMessageModified(e,t){if(!this.list.has(e))return{isUpdated:!1,message:null};const s=this._getUniqueIDOfMessage(t),o=this.list.get(e).has(s);if(_e.d(`${this._n}.onMessageModified conversationID:${e} uniqueID:${s} has:${o}`),o){const o=this.list.get(e).get(s),{messageVersion:i,elements:n,cloudCustomData:r}=t;return o.version<i?(o.version=i,o._elements=JSON.parse(JSON.stringify(n)),o.payload=JSON.parse(JSON.stringify(n[0].content)),o.type=n[0].type,o.cloudCustomData=r,o.isModified=!0,{isUpdated:!0,message:o}):{isUpdated:!1,message:o}}return{isUpdated:!1,message:null}}_getUniqueIDOfMessage(e){const{from:t,to:s,random:o,sequence:i,time:n}=e;return`${t}-${s}-${o}-${i}-${n}`}reset(){this.list.clear(),this._latestMessageSentByPeerMap.clear(),this._latestMessageSentByMeMap.clear()}}const Kn=\"_a2KeyAndTinyIDUpdated\",Wn=\"_cloudConfigUpdated\",Yn=\"_profileUpdated\";function jn(e){this.mixin(e)}jn.mixin=function(e){const t=e.prototype||e;t._isReady=!1,t.ready=function(e,t=!1){if(e)return this._isReady?void(t?e.call(this):setTimeout(e,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(e))},t.triggerReady=function(){this._isReady=!0,setTimeout(()=>{const e=this._readyQueue;this._readyQueue=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this)},1)},t.resetReady=function(){this._isReady=!1,this._readyQueue=[]},t.isReady=function(){return this._isReady}};const zn=[\"jpg\",\"jpeg\",\"gif\",\"png\",\"bmp\",\"image\",\"webp\"],Jn=[\"mp4\",\"quicktime\",\"mov\"],Xn=1,Zn=2,Qn=3,er=255;class tr{constructor(e){Lt(e)||(this.userID=e.userID||\"\",this.nick=e.nick||\"\",this.gender=e.gender||\"\",this.birthday=e.birthday||0,this.location=e.location||\"\",this.selfSignature=e.selfSignature||\"\",this.allowType=e.allowType||t.ALLOW_TYPE_ALLOW_ANY,this.language=e.language||0,this.avatar=e.avatar||\"\",this.messageSettings=e.messageSettings||0,this.adminForbidType=e.adminForbidType||t.FORBID_TYPE_NONE,this.level=e.level||0,this.role=e.role||0,this.lastUpdatedTime=0,this.profileCustomField=[],Lt(e.profileCustomField)||e.profileCustomField.forEach(e=>{this.profileCustomField.push({key:e.key,value:e.value})}))}validate(e){let t=!0,s=\"\";if(Lt(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField){const t=e.profileCustomField.length;let s=null;for(let o=0;o<t;o++){if(s=e.profileCustomField[o],!Ue(s.key)||-1===s.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom\"};if(!Ue(s.value))return{valid:!1,tips:\"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String\"}}}for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(\"profileCustomField\"===o)continue;if(Lt(e[o])&&!Ue(e[o])&&!Ge(e[o])){s=\"key:\"+o+\", invalid value:\"+e[o],t=!1;continue}switch(o){case\"nick\":Ue(e[o])||(s=\"nick must be a string\",t=!1),Ke(e[o])>500&&(s=`nick name limited: must less than or equal to 500 bytes, current size: ${Ke(e[o])} bytes`,t=!1);break;case\"gender\":ze(De,e.gender)||(s=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":Ge(e.birthday)||(s=\"birthday must be a number\",t=!1);break;case\"location\":Ue(e.location)||(s=\"location must be a string\",t=!1);break;case\"selfSignature\":Ue(e.selfSignature)||(s=\"selfSignature must be a string\",t=!1);break;case\"allowType\":ze(Se,e.allowType)||(s=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":Ge(e.language)||(s=\"language must be a number\",t=!1);break;case\"avatar\":Ue(e.avatar)||(s=\"avatar must be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(s=\"messageSettings must be 0 or 1\",t=!1);break;case\"adminForbidType\":ze(Ee,e.adminForbidType)||(s=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":Ge(e.level)||(s=\"level must be a number\",t=!1);break;case\"role\":Ge(e.role)||(s=\"role must be a number\",t=!1);break;default:s=\"unknown key:\"+o+\"  \"+e[o],t=!1}}return{valid:t,tips:s}}}class sr{constructor(e){this.value=e,this.next=null}}class or{constructor(e){this.MAX_LENGTH=e,this.pTail=null,this.pNodeToDel=null,this.map=new Map}set(e){const t=new sr(e);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=t,this.pNodeToDel=t):(this.pTail.next=t,this.pTail=t),this.map.set(e,1);else{let s=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(s.value),s.next=null,s=null,this.pTail.next=t,this.pTail=t,this.map.set(e,1)}}has(e){return this.map.has(e)}delete(e){this.has(e)&&this.map.delete(e)}tail(){return this.pTail}size(){return this.map.size}data(){return Array.from(this.map.keys())}reset(){let e;for(;null!==this.pNodeToDel;)e=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,e.next=null,e=null;this.pTail=null,this.map.clear()}}const ir=[\"groupID\",\"name\",\"avatar\",\"type\",\"introduction\",\"notification\",\"ownerID\",\"selfInfo\",\"createTime\",\"infoSequence\",\"lastInfoTime\",\"lastMessage\",\"nextMessageSeq\",\"memberNum\",\"maxMemberNum\",\"memberList\",\"joinOption\",\"groupCustomField\",\"muteAllMembers\",\"isSupportTopic\",\"inviteOption\",\"_lastRevokedTime\"];class nr{constructor(e){this.groupID=\"\",this.name=\"\",this.avatar=\"\",this.type=\"\",this.introduction=\"\",this.notification=\"\",this.ownerID=\"\",this.createTime=\"\",this.infoSequence=\"\",this.lastInfoTime=\"\",this.selfInfo={messageRemindType:\"\",joinTime:\"\",nameCard:\"\",role:\"\",userID:\"\",memberCustomField:void 0,readedSequence:0,excludedUnreadSequenceList:void 0},this.lastMessage={lastTime:\"\",lastSequence:\"\",fromAccount:\"\",messageForShow:\"\"},this.nextMessageSeq=\"\",this.memberNum=\"\",this.memberCount=\"\",this.maxMemberNum=\"\",this.maxMemberCount=\"\",this.joinOption=\"\",this.inviteOption=\"\",this.groupCustomField=[],this.muteAllMembers=!1,this.isSupportTopic=!1,this._lastRevokedTime=0,this._initGroup(e)}set memberNum(e){}set maxMemberNum(e){}get memberNum(){return this.memberCount}get maxMemberNum(){return this.maxMemberCount}_initGroup(e){for(const t in e)ir.indexOf(t)<0||(\"selfInfo\"!==t?(\"memberNum\"===t&&(this.memberCount=e[t]),\"maxMemberNum\"===t&&(this.maxMemberCount=e[t]),\"isSupportTopic\"!==t?this[t]=e[t]:this.isSupportTopic=1===e[t]):this.updateSelfInfo(e[t]))}updateGroup(e){e.appid=void 0,e.grossTopicNextMsgSeq=void 0,e.selfInfo&&(e.selfInfo.grossTopicReadSeq=void 0);const t=JSON.parse(JSON.stringify(e));t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),we(t.muteAllMembers)||(\"On\"===t.muteAllMembers?t.muteAllMembers=!0:t.muteAllMembers=!1),t.groupCustomField&&Qe(this.groupCustomField,t.groupCustomField),we(t.memberNum)||(this.memberCount=t.memberNum),we(t.maxMemberNum)||(this.maxMemberCount=t.maxMemberNum),we(t.isSupportTopic)||(this.isSupportTopic=Ge(t.isSupportTopic)?1===t.isSupportTopic:t.isSupportTopic),Be(this,t,[\"members\",\"errorCode\",\"lastMsgTime\",\"groupCustomField\",\"memberNum\",\"maxMemberNum\",\"isSupportTopic\"]),be(t.members)&&t.members.length>0&&t.members.forEach(e=>{e.userID===this.selfInfo.userID&&Be(this.selfInfo,e,[\"sequence\"])})}updateSelfInfo({nameCard:e,joinTime:t,role:s,messageRemindType:o,readedSequence:i,excludedUnreadSequenceList:n}){const r={nameCard:e,joinTime:t,role:s,messageRemindType:o,readedSequence:i,excludedUnreadSequenceList:n};Be(this.selfInfo,{...r},[],[\"\",null,void 0,0,NaN])}setSelfNameCard(e){this.selfInfo.nameCard=e}}const rr=function(e,t){return we(e)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:\"\",payload:null,type:\"\",isRevoked:!1,cloudCustomData:\"\",onlineOnlyFlag:!1,nick:\"\",nameCard:\"\",version:0,isPeerRead:!1,revoker:null}:e instanceof bn?{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",messageForShow:It(e.type,e.payload,t),payload:e.payload||null,type:e.type||null,isRevoked:e.isRevoked||!1,cloudCustomData:e.cloudCustomData||\"\",onlineOnlyFlag:e._onlineOnlyFlag||!1,nick:e.nick||\"\",nameCard:e.nameCard||\"\",version:e.version||0,isPeerRead:e.isPeerRead||!1,revoker:e.revoker||null}:{...e,messageForShow:It(e.type,e.payload,t)}};class ar{constructor(e,t){this.conversationID=e.conversationID||\"\",this.unreadCount=e.unreadCount||0,this.type=e.type||\"\",this.lastMessage=rr(e.lastMessage,t),e.lastMsgTime&&(this.lastMessage.lastTime=e.lastMsgTime),this._isInfoCompleted=!1,this.peerReadTime=e.peerReadTime||0,this.groupAtInfoList=[],this.remark=\"\",this.isPinned=e.isPinned||!1,this.messageRemindType=\"\",this.markList=e.markList||[],this.customData=e.customData||\"\",this.conversationGroupList=e.conversationGroupList||[],this._initProfile(e)}get toAccount(){return this.conversationID.startsWith(t.CONV_C2C)?this.conversationID.replace(t.CONV_C2C,\"\"):this.conversationID.startsWith(t.CONV_GROUP)?this.conversationID.replace(t.CONV_GROUP,\"\"):\"\"}get subType(){return this.groupProfile?this.groupProfile.type:\"\"}_initProfile(e){Object.keys(e).forEach(t=>{switch(t){case\"userProfile\":this.userProfile=e.userProfile;break;case\"groupProfile\":this.groupProfile=e.groupProfile}}),we(this.userProfile)&&this.type===t.CONV_C2C?this.userProfile=new tr({userID:e.conversationID.replace(\"C2C\",\"\")}):we(this.groupProfile)&&this.type===t.CONV_GROUP&&(this.groupProfile=new nr({groupID:e.conversationID.replace(\"GROUP\",\"\")}))}updateUnreadCount(e){const{nextUnreadCount:s,isFromGetConversations:o,isUnreadC2CMessage:i}=e;we(s)||(et(this.subType)?this.unreadCount=0:o&&this.type===t.CONV_GROUP||o&&this.type===t.CONV_TOPIC||i&&this.type===t.CONV_C2C?this.unreadCount=s:this.unreadCount=this.unreadCount+s)}updateLastMessage(e){this.lastMessage=rr(e)}updateGroupAtInfoList(e){if(this._isNeedMergeGroupAtInfo(e))return;let[...s]=e.groupAtType;-1!==s.indexOf(t.CONV_AT_ME)&&-1!==s.indexOf(t.CONV_AT_ALL)&&(s=[t.CONV_AT_ALL_AT_ME]);const o={from:e.from,groupID:e.groupID,topicID:e.topicID,messageSequence:e.sequence,atTypeArray:s,__random:e.__random,__sequence:e.__sequence};this.groupAtInfoList.push(o)}_isNeedMergeGroupAtInfo(e){const{groupID:s,sequence:o}=e;if(!st({groupID:s}))return!1;let i=!1;return this.groupAtInfoList.forEach(s=>{s.messageSequence===o&&(s.atTypeArray.indexOf(t.CONV_AT_ME)>-1&&e.groupAtType.indexOf(t.CONV_AT_ALL)>-1&&(s.atTypeArray=[t.CONV_AT_ALL_AT_ME]),s.atTypeArray.indexOf(t.CONV_AT_ALL)>-1&&e.groupAtType.indexOf(t.CONV_AT_ME)>-1&&(s.atTypeArray=[t.CONV_AT_ALL_AT_ME],s.__random=e.__random,s.__sequence=e.__sequence),i=!0)}),i}clearGroupAtInfoList(){this.groupAtInfoList.length=0}reduceUnreadCount(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}isLastMessageRevoked({sequence:e,time:s}){return this.type===t.CONV_C2C&&e===this.lastMessage.lastSequence&&s===this.lastMessage.lastTime||this.type===t.CONV_GROUP&&e===this.lastMessage.lastSequence}setLastMessageRevoked(e){this.lastMessage.isRevoked=e}setLastMessageRevoker(e){this.lastMessage.revoker=e}}class ur{constructor(e){this._conversationModule=e,this._n=\"MessageRemindHandler\",this._updateSequence=0}getC2CMessageRemindType(){const e=this._n+\".getC2CMessageRemindType\";return this._conversationModule.request({protocolName:mo,updateSequence:this._updateSequence}).then(t=>{_e.l(e+\" ok\");const{updateSequence:s,muteFlagList:o}=t.data;this._updateSequence=s,this._patchC2CMessageRemindType(o)}).catch(t=>{_e.e(e+\" failed. error:\",t)})}_patchC2CMessageRemindType(e){let s=0,o=\"\";be(e)&&e.length>0&&e.forEach(e=>{const{userID:i,muteFlag:n}=e;0===n?o=t.MSG_REMIND_ACPT_AND_NOTE:1===n?o=t.MSG_REMIND_DISCARD:2===n&&(o=t.MSG_REMIND_ACPT_NOT_NOTE),!0===this._conversationModule.patchMessageRemindType({ID:i,isC2CConversation:!0,messageRemindType:o})&&(s+=1)}),_e.l(`${this._n}._patchC2CMessageRemindType count:${s}`)}set(e){return e.groupID?this._setGroupMessageRemindType(e):be(e.userIDList)?this._setC2CMessageRemindType(e):void 0}_setGroupMessageRemindType(e){const t=this._n+\"._setGroupMessageRemindType\",{groupID:s,messageRemindType:o}=e,i=`groupID:${s} messageRemindType:${o}`,n=new Cn(\"setMessageRemindType\");n.setMessage(i);return this._getModule(hs).modifyGroupMemberInfo({groupID:s,messageRemindType:o,userID:this._conversationModule.getMyUserID()}).then(()=>{n.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(`${t} ok. ${i}`);const s=this.onGroupMessageRemindTypeUpdated(e);return this._conversationModule.emitTotalUnreadMessageCountUpdate(),wn(s)}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}onGroupMessageRemindTypeUpdated(t){const{groupID:s,messageRemindType:o}=t,i=this._getModule(ds).getLocalGroupProfile(s);if(i&&(i.selfInfo.messageRemindType=o),ot(s)){const t=s,i=ft(t),n=this._getModule(gs).getLocalTopic(i,t);return n&&(n.updateSelfInfo({messageRemindType:o}),this._conversationModule.emitOuterEvent(e.TOPIC_UPDATED,{groupID:i,topic:n})),{topic:n}}return this._conversationModule.patchMessageRemindType({ID:s,isC2CConversation:!1,messageRemindType:o})&&this._emitConversationUpdate(),{group:i}}_setC2CMessageRemindType(e){const s=this._n+\"._setC2CMessageRemindType\",{userIDList:o,messageRemindType:i}=e,n=o.slice(0,30);let r=0;i===t.MSG_REMIND_DISCARD?r=1:i===t.MSG_REMIND_ACPT_NOT_NOTE&&(r=2);const a=`userIDList:${n} messageRemindType:${i}`,u=new Cn(\"setMessageRemindType\");return u.setMessage(a),this._conversationModule.request({protocolName:_o,requestData:{userIDList:n,muteFlag:r}}).then(e=>{u.setNetworkType(this._conversationModule.getNetworkType()).end();const{updateSequence:t,errorList:o}=e.data;this._updateSequence=t;const r=[],a=[];be(o)&&o.forEach(e=>{r.push(e.userID),a.push({userID:e.userID,code:e.errorCode})});const c=n.filter(e=>-1===r.indexOf(e));_e.l(`${s} ok. successUserIDList:${c} failureUserIDList:${JSON.stringify(a)}`);let l=0;return c.forEach(e=>{this._conversationModule.patchMessageRemindType({ID:e,isC2CConversation:!0,messageRemindType:i})&&(l+=1)}),l>=1&&this._emitConversationUpdate(),n.length=r.length=0,this._conversationModule.emitTotalUnreadMessageCountUpdate(),xn({successUserIDList:c.map(e=>({userID:e})),failureUserIDList:a})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}_getModule(e){return this._conversationModule.getModule(e)}_emitConversationUpdate(){this._conversationModule.emitConversationUpdate(!0,!1)}setUpdateSequence(e){this._updateSequence=e}reset(){_e.l(this._n+\".reset\"),this._updateSequence=0}}class cr{constructor(e){this._conversationModule=e,this._n=\"ConvGroupHandler\",this._convGroupMap=new Map,this._startIndex=0,this._pagingStatus=Rt.NOT_START}setConvCustomData(e){const s=this._n+\".setConvCustomData\",{conversationIDList:o,customData:i}=e;_e.l(s+\" options:\",e);const n=new Cn(\"setConvCustomData\");n.setMessage(JSON.stringify(e));const r={fromAccount:this._getMyUserID(),itemList:[]},a=[],u=[];return o.forEach(e=>{if(!this._hasLocalConversation(e))return this._onConversationNotFound(u,e),!0;if(!it(e)&&!nt(e))return this._onConversationIDInvalid(u,e),!0;const s={operationType:2,contactItem:void 0,customMark:i};it(e)?s.contactItem={type:1,toAccount:e.replace(t.CONV_C2C,\"\")}:nt(e)&&(s.contactItem={type:2,groupID:e.replace(t.CONV_GROUP,\"\")}),r.itemList.push(s)}),u.length===o.length?xn({successConversationIDList:a,failureConversationIDList:u}):this._conversationModule.request({protocolName:No,requestData:r}).then(e=>{n.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(s+\" ok\");const{resultItem:t}=e.data;if(be(t)){let e,s,o=!1;t.forEach(t=>{e=this._concatConversationID(t.contactItem),0===t.resultCode?(a.push(e),s=this._getLocalConversation(e),s&&s.customData!==i&&(s.customData=i,o=!0)):u.push({conversationID:e,code:t.resultCode,message:t.resultInfo})}),!0===o&&this._emitConversationUpdate()}return wn({successConversationIDList:a,failureConversationIDList:u})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}markConversation(e){if(!this._conversationModule.canIUse(M.CONV_MARK))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".markConversation\",{conversationIDList:o,markType:i,enableMark:n}=e;_e.l(s+\" options:\",e);const r=new Cn(\"markConversation\");r.setMessage(JSON.stringify(e));let a=void 0,u=void 0;const c=this._getFlagBit(i);!0===n?u=[c]:a=[c];const l={fromAccount:this._getMyUserID(),itemList:[]},d=[],p=[];return o.forEach(e=>{if(!this._hasLocalConversation(e))return this._onConversationNotFound(p,e),!0;if(!it(e)&&!nt(e))return this._onConversationIDInvalid(p,e),!0;const s={operationType:1,contactItem:void 0,clearMark:a,setMark:u};it(e)?s.contactItem={type:1,toAccount:e.replace(t.CONV_C2C,\"\")}:nt(e)&&(s.contactItem={type:2,groupID:e.replace(t.CONV_GROUP,\"\")}),l.itemList.push(s)}),p.length===o.length?xn({successConversationIDList:d,failureConversationIDList:p}):this._conversationModule.request({protocolName:Ro,requestData:l}).then(e=>{r.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(s+\" ok\");const{resultItem:t}=e.data;if(be(t)){let e,s,o=!1;t.forEach(t=>{if(e=this._concatConversationID(t.contactItem),0===t.resultCode){if(d.push(e),s=this._getLocalConversation(e),s){const e=s.markList.indexOf(i);!0===n?-1===e&&(s.markList.push(i),o=!0):-1!==e&&(s.markList.splice(e,1),o=!0)}}else p.push({conversationID:e,code:t.resultCode,message:t.resultInfo})}),!0===o&&this._emitConversationUpdate()}return wn({successConversationIDList:d,failureConversationIDList:p})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}getLocalConvGroupList(){return _e.l(`${this._n}.getLocalConvGroupList pagingStatus:${this._pagingStatus}`),this._pagingStatus===Rt.REJECTED?this.getRemoteConvGroupList().then(()=>wn([...this._convGroupMap.values()])):xn([...this._convGroupMap.values()])}getRemoteConvGroupList(){const e=this._n+\".getRemoteConvGroupList\";return this._pagingStatus=Rt.PENDING,this._conversationModule.request({protocolName:bo,requestData:{fromAccount:this._getMyUserID(),startIndex:this._startIndex,startTime:de()}}).then(t=>{const{completeFlag:s,contactItem:o,nextStartIndex:i=0,groupItem:n}=t.data;if(this._startIndex=i,_e.l(`${e} completeFlag:${s} nextStartIndex:${i}`),be(n)&&n.forEach(e=>{const{convGroupID:t,groupName:s}=e;this._convGroupMap.set(t,s)}),be(o)){let e,t;o.forEach(s=>{const{standardMark:o,customData:i,convGroupIDList:n}=s;if(e=this._concatConversationID(s),t=this._getLocalConversation(e),t&&(t.markList=Tt(o),t.customData=i||\"\",be(n))){const e=[];n.forEach(t=>{this._convGroupMap.has(t)&&e.push(this._convGroupMap.get(t))}),t.conversationGroupList=[...e],e.length=0}})}if(0===s)return this.getRemoteConvGroupList();1===s&&(this._pagingStatus=Rt.RESOLVED,this._emitConversationUpdate(),this._emitConvGroupListUpdate())}).catch(t=>{this._pagingStatus=Rt.REJECTED,_e.w(e+\" failed. error:\",t)})}createConvGroup(e){if(!this._conversationModule.canIUse(M.CONV_GROUP))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".createConvGroup\";_e.l(s+\" options:\",e);const o=new Cn(\"createConvGroup\");o.setMessage(JSON.stringify(e));const{groupName:i,conversationIDList:n}=e,r={fromAccount:this._getMyUserID(),itemList:[{groupName:i,contactItem:[]}]},a=[],u=[];return n.forEach(e=>this._hasLocalConversation(e)?it(e)||nt(e)?void(it(e)?r.itemList[0].contactItem.push({type:1,toAccount:e.replace(t.CONV_C2C,\"\")}):nt(e)&&r.itemList[0].contactItem.push({type:2,groupID:e.replace(t.CONV_GROUP,\"\")})):(this._onConversationIDInvalid(u,e),!0):(this._onConversationNotFound(u,e),!0)),u.length===n.length?xn({successConversationIDList:a,failureConversationIDList:u}):this._conversationModule.request({protocolName:Oo,requestData:r}).then(e=>{o.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(s+\" ok\");const{groupResultItem:t}=e.data,{groupItem:n,resultItem:r}=t[0];if(Pe(n)&&(this._convGroupMap.set(n.convGroupID,n.groupName),this._emitConvGroupListUpdate()),be(r)){let e,t,s=!1;r.forEach(o=>{e=this._concatConversationID(o.contactItem),0===o.resultCode?(a.push(e),t=this._getLocalConversation(e),t&&-1===t.conversationGroupList.indexOf(i)&&(t.conversationGroupList.push(i),s=!0)):u.push({conversationID:e,code:o.resultCode,message:o.resultInfo})}),!0===s&&(this._emitConversationUpdate(),this._emitConvGroupListUpdate())}return wn({successConversationIDList:a,failureConversationIDList:u})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}deleteConvGroup(e){if(!this._conversationModule.canIUse(M.CONV_GROUP))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".deleteConvGroup\";_e.l(`${t} groupName:${e}`);const s=new Cn(\"deleteConvGroup\");return s.setMessage(e),this._conversationModule.request({protocolName:Go,requestData:{fromAccount:this._getMyUserID(),groupName:[e]}}).then(o=>{s.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(t+\" ok\");const{groupItem:i}=o.data;if(be(i)){let e=!1;i.forEach(t=>{this._convGroupMap.has(t.convGroupID)&&(this._convGroupMap.delete(t.convGroupID),e=!0)}),!0===e&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList([e])}).catch(e=>(this._conversationModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}renameConvGroup(e){if(!this._conversationModule.canIUse(M.CONV_GROUP))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".renameConvGroup\";_e.l(t+\" options:\",e);const s=new Cn(\"renameConvGroup\");s.setMessage(JSON.stringify(e));const{oldName:o,newName:i}=e;return this._conversationModule.request({protocolName:Uo,requestData:{fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:1,oldName:o,newName:i}}}).then(e=>{s.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(t+\" ok\");const{updateGroupResult:n}=e.data,{convGroupID:r}=n;this._convGroupMap.set(r,i),this._emitConvGroupListUpdate();const a=this._conversationModule.getLocalConversationList();let u,c,l=!1;a.forEach(e=>{u=e.conversationGroupList,c=u.indexOf(o),-1!==c&&(u.splice(c,1,i),l=!0)}),!0===l&&this._emitConversationUpdate()}).catch(e=>(this._conversationModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}addConvsToGroup(e){if(!this._conversationModule.canIUse(M.CONV_GROUP))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".addConvsToGroup\";_e.l(s+\" options:\",e);const o=new Cn(\"addConvsToGroup\");o.setMessage(JSON.stringify(e));const{conversationIDList:i,groupName:n}=e,r={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:n,updateItem:[]}},a=[],u=[];return i.forEach(e=>this._hasLocalConversation(e)?it(e)||nt(e)?void(it(e)?r.updateGroup.updateItem.push({operationType:1,contactItem:{type:1,toAccount:e.replace(t.CONV_C2C,\"\")}}):nt(e)&&r.updateGroup.updateItem.push({operationType:1,contactItem:{type:2,groupID:e.replace(t.CONV_GROUP,\"\")}})):(this._onConversationIDInvalid(u,e),!0):(this._onConversationNotFound(u,e),!0)),u.length===i.length?xn({successConversationIDList:a,failureConversationIDList:u}):this._conversationModule.request({protocolName:ko,requestData:r}).then(e=>{o.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(s+\" ok\");const{contactResultItem:t}=e.data.updateGroupResult;if(be(t)){let e,s,o=!1;t.forEach(t=>{e=this._concatConversationID(t.contactItem),0===t.resultCode?(s=this._getLocalConversation(e),s&&-1===s.conversationGroupList.indexOf(n)&&(s.conversationGroupList.push(n),a.push(e),o=!0)):u.push({conversationID:e,code:t.resultCode,message:t.resultInfo})}),!0===o&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(n))}return wn({successConversationIDList:a,failureConversationIDList:u})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}deleteConvsFromGroup(e){if(!this._conversationModule.canIUse(M.CONV_GROUP))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".deleteConvsFromGroup\";_e.l(s+\" options:\",e);const o=new Cn(\"deleteConvsFromGroup\");o.setMessage(JSON.stringify(e));const{conversationIDList:i,groupName:n}=e,r={fromAccount:this._getMyUserID(),updateType:1,updateGroup:{updateGroupType:2,groupName:n,updateItem:[]}},a=[],u=[];return i.forEach(e=>this._hasLocalConversation(e)?it(e)||nt(e)?void(it(e)?r.updateGroup.updateItem.push({operationType:2,contactItem:{type:1,toAccount:e.replace(t.CONV_C2C,\"\")}}):nt(e)&&r.updateGroup.updateItem.push({operationType:2,contactItem:{type:2,groupID:e.replace(t.CONV_GROUP,\"\")}})):(this._onConversationIDInvalid(u,e),!0):(this._onConversationNotFound(u,e),!0)),u.length===i.length?xn({successConversationIDList:a,failureConversationIDList:u}):this._conversationModule.request({protocolName:Po,requestData:r}).then(e=>{o.setNetworkType(this._conversationModule.getNetworkType()).end(),_e.l(s+\" ok\");const{contactResultItem:t}=e.data.updateGroupResult;if(be(t)){let e,s,o=!1;t.forEach(t=>{if(e=this._concatConversationID(t.contactItem),0===t.resultCode){if(s=this._getLocalConversation(e),s){const t=s.conversationGroupList.indexOf(n);-1!==t&&(s.conversationGroupList.splice(t,1),a.push(e),o=!0)}}else u.push({conversationID:e,code:t.resultCode,message:t.resultInfo})}),!0===o&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(n))}return wn({successConversationIDList:a,failureConversationIDList:u})}).catch(e=>(this._conversationModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}onConvMarkUpdated(e){if(Lt(e))return;let t,s;_e.d(this._n+\".onConvMarkUpdated markItemList:\",e);let o=!1;e.forEach(e=>{const{recentContactItem:i,optType:n,standardMark:r,customMark:a}=e;if(t=this._concatConversationID(i),s=this._getLocalConversation(t),s)if(1===n){const e=Tt(r);!0!==function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let s=0,o=e.length;s<o;s++)if(e[s]!==t[s])return!1;return!0}(s.markList,e)&&(s.markList=e,o=!0)}else 2===n&&s.customData!==a&&void 0!==a&&(s.customData=a,o=!0)}),!0===o&&this._emitConversationUpdate()}onConvGroupCreated(e){_e.d(this._n+\".onConvGroupCreated resultList:\",e);let t=!1,s=!1;be(e)&&(e.forEach(e=>{const{groupID:o,groupName:i}=e.msgGroupItem;this._convGroupMap.get(o)!==i&&(this._convGroupMap.set(o,i),s=!0);const n=e.msgRecentContactItem;if(be(n)){let e,s;n.forEach(o=>{e=this._concatConversationID(o),s=this._getLocalConversation(e),s&&-1===s.conversationGroupList.indexOf(i)&&(s.conversationGroupList.push(i),t=!0)})}}),!0===t&&this._emitConversationUpdate(),!0===s&&this._emitConvGroupListUpdate())}onConvGroupDeleted(e){_e.d(this._n+\".onConvGroupDeleted groupItemList:\",e);const t=[];if(be(e)){let s=!1;e.forEach(e=>{const{groupID:o,groupName:i}=e;this._convGroupMap.has(o)&&(this._convGroupMap.delete(o),s=!0,t.push(i))}),!0===s&&this._emitConvGroupListUpdate()}this._eraseFromConversationGroupList(t)}_eraseFromConversationGroupList(e){if(Lt(e))return;this._conversationModule.getLocalConversationList().forEach(t=>{t.conversationGroupList=t.conversationGroupList.filter(t=>!e.includes(t))}),this._emitConversationUpdate()}onConvGroupNameUpdated(e){_e.d(this._n+\".onConvGroupNameUpdated options:\",e);const{groupID:t,groupName:s,oldGroupName:o}=e;if(this._convGroupMap.get(t)===s)return;this._convGroupMap.set(t,s),this._emitConvGroupListUpdate();const i=this._conversationModule.getLocalConversationList();let n,r,a=!1;i.forEach(e=>{n=e.conversationGroupList,r=n.indexOf(o),-1!==r&&(n.splice(r,1,s),a=!0)}),!0===a&&this._emitConversationUpdate()}onConvInGroupUpdated(e){_e.d(this._n+\".onConvInGroupUpdated options:\",e);const{oldGroupName:t,recentContactUpdateGroupItem:s}=e;if(be(s)){let e,o,i,n=!1;s.forEach(s=>{const{contactOptType:r,recentContactItem:a}=s;e=this._concatConversationID(a),o=this._getLocalConversation(e),o&&(i=o.conversationGroupList.indexOf(t),1===r?-1===i&&(o.conversationGroupList.push(t),n=!0):2===r&&-1!==i&&(o.conversationGroupList.splice(i,1),n=!0))}),!0===n&&(this._emitConversationUpdate(),this._emitConvInGroupUpdate(t))}}onConvAddedToOrDeletedFromGroup(e){_e.d(this._n+\".onConvAddedToOrDeletedFromGroup options:\",e);const{msgRecentContactItem:t,msgRecentContactUpdateContactItem:s}=e,o=this._concatConversationID(t),i=this._getLocalConversation(o);if(i&&be(s)){let e,t=!1;s.forEach(s=>{const{groupOptType:o,recentContactGroupItem:n}=s,{groupName:r}=n;e=i.conversationGroupList.indexOf(r),1===o?-1===e&&(i.conversationGroupList.push(r),t=!0):2===o&&-1!==e&&(i.conversationGroupList.splice(e,1),t=!0),!0===t&&this._emitConvInGroupUpdate(r)}),!0===t&&this._emitConversationUpdate()}}onConvGroupListSynced(e){be(e)&&0!==e.length&&(_e.l(this._n+\".onConvGroupListSynced groupItemList:\",e),e.forEach(e=>{this._convGroupMap.set(e.convGroupID,e.groupName)}))}getConvGroupListByID(e){if(Lt(e))return;const t=[];return e.forEach(e=>{this._convGroupMap.has(e)&&t.push(this._convGroupMap.get(e))}),t}_onConversationNotFound(e,t){e.push({conversationID:t,code:nn.CONVERSATION_NOT_FOUND,message:this._conversationModule.getErrorMessage(nn.CONVERSATION_NOT_FOUND)})}_onConversationIDInvalid(e,t){e.push({conversationID:t,code:nn.INVALID_CONVERSATION_ID,message:this._conversationModule.getErrorMessage(nn.INVALID_CONVERSATION_ID)})}_getFlagBit(e){const t=e.toString(2),s=t.length;for(let o=s-1;o>=0;o--)if(\"1\"===t[o])return s-o-1}_concatConversationID(e){const{type:s,to:o,groupID:i,userID:n}=e;let r;return 1===s?we(n)?we(o)||(r=`${t.CONV_C2C}${o}`):r=`${t.CONV_C2C}${n}`:2===s&&(r=`${t.CONV_GROUP}${i}`),r}_getMyUserID(){return this._conversationModule.getMyUserID()}_insertConversationGroup(e,t){const s=this._getLocalConversation(e);if(s){const e=s.conversationGroupList;-1===e.indexOf(t)&&e.push(t)}}_getLocalConversation(e){return this._conversationModule.getLocalConversation(e)}_hasLocalConversation(e){return this._conversationModule.hasLocalConversation(e)}_emitConversationUpdate(){this._conversationModule.emitConversationUpdate(!0,!1)}_emitConvGroupListUpdate(){this._conversationModule.emitOuterEvent(e.CONVERSATION_GROUP_LIST_UPDATED,[...this._convGroupMap.values()])}_emitConvInGroupUpdate(t){const s={groupName:t,conversationList:[]},o=this._conversationModule.getLocalConversationList();s.conversationList=o.filter(e=>e.conversationGroupList.includes(t)),this._conversationModule.emitOuterEvent(e.CONVERSATION_IN_GROUP_UPDATED,s)}reset(){_e.l(this._n+\".reset\"),this._convGroupMap.clear(),this._startIndex=0,this._pagingStatus=Rt.NOT_START}}class lr extends Fs{constructor(e){super(e),this._n=\"ConversationModule\",jn.mixin(this),this._messageListHandler=new Hn,this._messageRemindHandler=new ur(this),this._convGroupHandler=new cr(this),this.singlyLinkedList=new or(100),this._pagingStatus=Rt.NOT_START,this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._pagingConvIDMap=new Map,this._convIDFromUnreadDBMap=new Map,this._conversationMap=new Map,this._tmpGroupList=[],this._tmpGroupAtTipsList=[],this._peerReadTimeMap=new Map,this._completedMap=new Map,this._roamingMessageKeyAndTimeMap=new Map,this._roamingMessageSequenceMap=new Map,this._remoteGroupReadSequenceMap=new Map,this._convTotalUnreadCount=0,this._pagingGetCostList=[],this._initListeners()}_initListeners(){const e=this.getInnerEmitterInstance();e.on(Kn,this._initLocalConversationList,this),e.on(Yn,this._onProfileUpdated,this)}onCheckTimer(e){e%60==0&&this._messageListHandler.traversal()}_initLocalConversationList(){const e=new Cn(\"_initLocalConversationList\");_e.l(this._n+\"._initLocalConversationList\");let s=\"\";const o=this._getStorageConversationList(),i=this.isIntl();if(o){const e=o.length;for(let s=0;s<e;s++){const e=o[s];if(e){if(e.conversationID===t.CONV_C2C+\"@TLS#ERROR\"||e.conversationID===t.CONV_C2C+\"@TLS#NOT_FOUND\")continue;if(e.groupProfile){const t=e.groupProfile.type;if(et(t))continue}}this._conversationMap.set(o[s].conversationID,new ar(o[s],i))}this.emitConversationUpdate(!0,!1),s=\"count:\"+e}else s=\"count:0\";e.setNetworkType(this.getNetworkType()).setMessage(s).end(),this.getModule(ls)||this.triggerReady(),this.ready(()=>{this._tmpGroupList.length>0&&(this.updateConversationGroupProfile(this._tmpGroupList),this._tmpGroupList.length=0)}),this.syncConversationList()}onMessageSent(e){this._onSendOrReceiveMessage({conversationOptionsList:e.conversationOptionsList,isInstantMessage:!0})}onNewMessage(e){this._onSendOrReceiveMessage(e)}_onSendOrReceiveMessage(e){const{conversationOptionsList:s,isInstantMessage:o=!0,isUnreadC2CMessage:i=!1,updateUnreadCount:n=!0}=e;if(!this._isReady)return void this.ready(()=>{this._onSendOrReceiveMessage(e)});if(0===s.length)return;this._getC2CPeerReadTime(s),this._updateLocalConversationList({conversationOptionsList:s,isInstantMessage:o,isUnreadC2CMessage:i,isFromGetConversations:!1,updateUnreadCount:n}),o||(this._convIDFromUnreadDBMap=new Map([...this._convIDFromUnreadDBMap,...s.map(e=>[e.conversationID,1])]),this._diffAndDeleteConversation()),this._setStorageConversationList();s.filter(e=>e.type===t.CONV_TOPIC).length>0||this.emitConversationUpdate()}updateConversationGroupProfile(e){if(be(e)&&0===e.length)return;if(0===this._conversationMap.size)return void(this._tmpGroupList=e);let t=!1;e.forEach(e=>{const s=\"GROUP\"+e.groupID;if(this._conversationMap.has(s)){t=!0;const o=this._conversationMap.get(s);o.groupProfile=JSON.parse(JSON.stringify(e)),o.lastMessage.lastSequence<e.nextMessageSeq&&(o.lastMessage.lastSequence=e.nextMessageSeq-1),o.subType||(o.subType=e.type)}}),t&&this.emitConversationUpdate(!0,!1)}_updateConversationUserProfile({data:e}){e.forEach(e=>{const t=\"C2C\"+e.userID;this._conversationMap.has(t)&&(this._conversationMap.get(t).userProfile=e)}),this.emitConversationUpdate(!0,!1)}onMessageRevoked(e){if(0===e.length)return;let s=null,o=!1;const i=[];e.forEach(e=>{s=this._conversationMap.get(e.conversationID),s&&(s.type===t.CONV_TOPIC?i.push(e):(s.reduceUnreadCount()&&(o=!0),s.isLastMessageRevoked({sequence:e.sequence,time:e.time})&&(s.setLastMessageRevoked(!0),s.setLastMessageRevoker(e.revoker),o=!0)))});this.getModule(gs).onMessageRevoked(i),o&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())}isLastMessageRevoked(e){let s=!1;const{conversationID:o,sequence:i,time:n}=e,r=this._conversationMap.get(o);if(r)if(r.type===t.CONV_TOPIC){s=this.getModule(gs).isLastMessageRevoked({topicID:o.replace(t.CONV_GROUP,\"\"),sequence:i})}else s=r.isLastMessageRevoked({sequence:i,time:n});return _e.l(`${this._n}.isLastMessageRevoked options:${JSON.stringify(e)} ret:${s}`),s}onMessageDeleted(e){if(0===e.length)return;let s=null;e.forEach(e=>{s=this._messageListHandler.getLocalMessage(e.conversationID,e.ID),s&&(s.isDeleted=!0),e!==s&&(e.isDeleted=!0)});const o=e[0].conversationID,i=this._messageListHandler.getLocalMessageList(o);let n={};for(let t=i.length-1;t>=0;t--)if(!i[t].isDeleted){n=i[t];break}const r=this._conversationMap.get(o);if(!r)return;let a=!1;r.lastMessage.lastSequence===n.sequence&&r.lastMessage.lastTime===n.time||(Lt(n)&&(n=void 0),r.updateLastMessage(n),r.type!==t.CONV_TOPIC&&(a=!0),_e.l(`${this._n}.onMessageDeleted. update conversationID:${o} with lastMessage:`,r.lastMessage)),o.startsWith(t.CONV_C2C)&&this.updateUnreadCount(o),a&&this.emitConversationUpdate(!0,!1)}onMessageModified(s){const{conversationType:o,from:i,to:n,time:r,sequence:a,elements:u,cloudCustomData:c,messageVersion:l}=s;let d=`${o}${n}`;n===this.getMyUserID()&&o===t.CONV_C2C&&(d=`${o}${i}`);const{isUpdated:p,message:h}=this._messageListHandler.onMessageModified(d,s);!0===p&&this.emitOuterEvent(e.MESSAGE_MODIFIED,[h]);const g=this._isTopicConversation(d);if(_e.l(`${this._n}.onMessageModified isUpdated:${p} isTopicMessage:${g} from:${i} to:${n}`),g){this.getModule(gs).onMessageModified(s)}else{const e=this._conversationMap.get(d);if(e){const t=e.lastMessage;_e.d(this._n.onMessageModified+\" lastMessage:\",JSON.stringify(t),\"options:\",JSON.stringify(s)),t&&t.lastTime===r&&t.lastSequence===a&&t.version!==l&&(t.type=u[0].type,t.payload=u[0].content,t.messageForShow=It(t.type,t.payload,this.isIntl()),t.cloudCustomData=c,t.version=l,this.emitConversationUpdate(!0,!1))}}return h}onNewGroupAtTips(e){const t=e.dataList;let s=null;t.forEach(e=>{e.groupAtTips?s=e.groupAtTips:e.elements?s={...e.elements,sync:!0}:e.groupAtType&&(s={...e,sync:!0}),s.__random=e.random,s.__sequence=e.clientSequence,this._tmpGroupAtTipsList.push(s)}),_e.d(`${this._n}.onNewGroupAtTips isReady:${this._isReady}`,this._tmpGroupAtTipsList),this._isReady&&this._handleGroupAtTipsList()}_handleGroupAtTipsList(){if(0===this._tmpGroupAtTipsList.length)return;let e=!1;this._tmpGroupAtTipsList.forEach(s=>{const{groupID:o,from:i,topicID:n,sync:r=!1}=s;if(i!==this.getMyUserID())if(we(n)){const i=this._conversationMap.get(`${t.CONV_GROUP}${o}`);i&&(i.updateGroupAtInfoList(s),e=!0)}else{const e=this._conversationMap.get(`${t.CONV_GROUP}${n}`);if(e){e.updateGroupAtInfoList(s);const t=this.getModule(gs),{groupAtInfoList:o}=e;t.onConversationProxy({topicID:n,groupAtInfoList:o})}if(Lt(e)&&r){this.updateTopicConversation([{conversationID:`${t.CONV_GROUP}${n}`,type:t.CONV_TOPIC}]);this._conversationMap.get(`${t.CONV_GROUP}${n}`).updateGroupAtInfoList(s)}}}),e&&this.emitConversationUpdate(!0,!1),this._tmpGroupAtTipsList.length=0}_getC2CPeerReadTime(e){const s=[];if(e.forEach(e=>{this._conversationMap.has(e.conversationID)||e.type!==t.CONV_C2C||s.push(e.conversationID.replace(t.CONV_C2C,\"\"))}),s.length>0){_e.d(`${this._n}._getC2CPeerReadTime userIDList:${s}`);const e=this.getModule(ls);e&&e.getRemotePeerReadTime(s)}}_getStorageConversationList(){return this.getModule(Ms).getItem(\"conversationMap\")}_setStorageConversationList(){const e=this.getLocalConversationList().filter(e=>e.type===t.CONV_C2C||e.type===t.CONV_GROUP&&e.lastMessage.type!==t.MSG_GRP_TIP).slice(0,20).map(e=>({conversationID:e.conversationID,type:e.type,subType:e.subType,lastMessage:e.lastMessage,groupProfile:e.groupProfile,userProfile:e.userProfile}));this.getModule(Ms).setItem(\"conversationMap\",e)}emitConversationUpdate(t=!0,s=!0){const o=this.getLocalConversationList();if(s){const e=this.getModule(ds);e&&e.updateGroupLastMessage(o)}t&&this.emitOuterEvent(e.CONVERSATION_LIST_UPDATED)}getLocalConversationList(){return[...this._conversationMap.values()].filter(e=>e.type!==t.CONV_TOPIC)}getLocalConversation(e){return this._conversationMap.get(e)}hasLocalConversation(e){return this._conversationMap.has(e)}getLocalOldestMessage(e){return this._messageListHandler.getLocalOldestMessage(e)}syncConversationList(){const e=new Cn(\"syncConversationList\");return this._pagingStatus===Rt.NOT_START&&this._conversationMap.clear(),this._pagingGetConversationList().then(t=>{const s=function(e){if(!be(e)||0===e.length)return;let t=0;return e.forEach(e=>{t+=e}),(t/e.length).toFixed(0)}(this._pagingGetCostList);return _e.l(`${this._n}.syncConversationList. sum ${function(e){if(!be(e)||0===e.length)return;let t=0;return e.forEach(e=>{t+=e}),t.toFixed(0)}(this._pagingGetCostList)} ms, average ${s} ms`),this._pagingGetCostList.length=0,this._pagingStatus=Rt.RESOLVED,this._diffAndDeleteConversation(),this.emitConversationUpdate(!0,!1),this._setStorageConversationList(),this._handleC2CPeerReadTime(),this._patchConversationProperties(),e.setMessage(this._conversationMap.size).setMoreMessage(s).setNetworkType(this.getNetworkType()).end(),t}).catch(t=>(this._pagingStatus=Rt.REJECTED,e.setMessage(this._pagingTimeStamp),this.probeNetwork().then(([s,o])=>{e.setError(t,s,o).end()}),Vn(t)))}_diffAndDeleteConversation(){if(this._isSyncCompleted()){const e=[];this._conversationMap.forEach((t,s)=>{!this._pagingConvIDMap.has(s)&&this._convIDFromUnreadDBMap.has(s)&&(this._conversationMap.delete(s),e.push(s))}),_e.l(`${this._n}._diffAndDeleteConversation list:${e}`)}}_patchConversationProperties(){const e=Date.now(),t=this.checkAndPatchRemark(),s=this._messageRemindHandler.getC2CMessageRemindType(),o=this.getModule(ds).getGroupList();Promise.all([t,s,o]).then(()=>{const t=Date.now()-e;_e.l(`${this._n}._patchConversationProperties ok. cost ${t} ms`),this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()})}_pagingGetConversationList(){const e=this._n+\"._pagingGetConversationList\";_e.l(`${e} timeStamp:${this._pagingTimeStamp} startIndex:${this._pagingStartIndex} pinnedTimeStamp:${this._pagingPinnedTimeStamp} pinnedStartIndex:${this._pagingPinnedStartIndex}`);const t=Date.now();return this._pagingStatus=Rt.PENDING,this.request({protocolName:Do,requestData:{fromAccount:this.getMyUserID(),timeStamp:this._pagingTimeStamp,startIndex:this._pagingStartIndex,pinnedTimeStamp:this._pagingPinnedTimeStamp,pinnedStartIndex:this._pagingPinnedStartIndex,orderType:1}}).then(s=>{const{completeFlag:o,conversations:i=[],timeStamp:n,startIndex:r,pinnedTimeStamp:a,pinnedStartIndex:u,groupItem:c}=s.data,l=Date.now()-t;if(this._pagingGetCostList.push(l),_e.l(`${e} ok. completeFlag:${o} count:${i.length} cost ${l} ms`),this._convGroupHandler.onConvGroupListSynced(c),i.length>0){const e=this._getConversationOptions(i);this._pagingConvIDMap=new Map([...this._pagingConvIDMap,...e.map(e=>[e.conversationID,1])]),this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0}),this.isLoggedIn()&&this.emitConversationUpdate()}if(!this._isReady){if(!this.isLoggedIn())return xn();this.triggerReady()}return this._pagingTimeStamp=n,this._pagingStartIndex=r,this._pagingPinnedTimeStamp=a,this._pagingPinnedStartIndex=u,1!==o?this._pagingGetConversationList():(this._handleGroupAtTipsList(),this._convGroupHandler.getRemoteConvGroupList(),xn())}).catch(t=>{throw this.isLoggedIn()&&(this._isReady||(_e.w(e+\" failed. error:\",t),this.triggerReady())),t})}_updateLocalConversationList(e){const{isFromGetConversations:t,isInstantMessage:s}=e,o=Date.now();let i={toBeUpdatedConversationList:[],newConversationList:[]};i=this._getTmpConversationListMapping(e),this._conversationMap=new Map(this._sortConversationList([...i.toBeUpdatedConversationList,...this._conversationMap])),t||(this._updateUserOrGroupProfile(i.newConversationList),s&&this.emitTotalUnreadMessageCountUpdate()),_e.d(`${this._n}._updateLocalConversationList cost ${Date.now()-o} ms`)}_getTmpConversationListMapping(e){const{conversationOptionsList:s,isFromGetConversations:o,isInstantMessage:i,isUnreadC2CMessage:n=!1,updateUnreadCount:r}=e,a=[],u=[],c=this.getModule(ds),l=this.getModule(ps),d=this.isIntl();for(let h=0,g=s.length;h<g;h++){const e=new ar(s[h],d),{conversationID:p}=e;if(p!==t.CONV_C2C+\"@TLS#ERROR\"&&p!==t.CONV_C2C+\"@TLS#NOT_FOUND\")if(this._conversationMap.has(p)){const u=this._conversationMap.get(p),c=[\"unreadCount\",\"allowType\",\"adminForbidType\",\"payload\",\"isPinned\"];!1===i&&c.push(\"lastMessage\");const l=s[h].lastMessage,d=!we(l);d||s[h].type===t.CONV_TOPIC||this._onLastMessageNotExist(s[h]),we(i)&&d&&null===u.lastMessage.payload&&(u.lastMessage.payload=l.payload),Lt(u.lastMessage.revoker)||(u.lastMessage.revoker=null);Be(u,e,c,[null,void 0,\"\",0,NaN]),!0===r&&u.updateUnreadCount({nextUnreadCount:e.unreadCount,isFromGetConversations:o,isUnreadC2CMessage:n}),i&&d&&(l.payload&&(u.lastMessage.payload=l.payload),u.type===t.CONV_GROUP&&(u.lastMessage.nameCard=l.nameCard,u.lastMessage.nick=l.nick)),d&&u.lastMessage.cloudCustomData!==l.cloudCustomData&&(u.lastMessage.cloudCustomData=l.cloudCustomData||\"\"),this._conversationMap.delete(p),a.push([p,u])}else{if(e.type===t.CONV_GROUP&&c){const{groupID:t}=e.groupProfile,s=c.getLocalGroupProfile(t);s&&(e.groupProfile=s,!0===r&&e.updateUnreadCount({nextUnreadCount:0}))}else if(e.type===t.CONV_C2C){const s=p.replace(t.CONV_C2C,\"\");l&&l.isMyFriend(s)&&(e.remark=l.getFriendRemark(s))}u.push(e),a.push([p,e])}}const p=this.getModule(gs);return a.forEach(e=>{if(e[1].type===t.CONV_TOPIC){const{conversationID:s,unreadCount:o,groupAtInfoList:i}=e[1];p.onConversationProxy({topicID:s.replace(t.CONV_GROUP,\"\"),unreadCount:o,groupAtInfoList:Lt(i)?void 0:i})}}),{toBeUpdatedConversationList:a,newConversationList:u}}_onLastMessageNotExist(e){new Cn(\"lastMessageNotExist\").setMessage(\"\"+JSON.stringify(e)).setNetworkType(this.getNetworkType()).end()}_sortConversationList(e){const t=[],s=[],o=[],i=[];return e.forEach(e=>{!0===e[1].isPinned?Lt(e[1].lastMessage.lastTime)?s.push(e):t.push(e):Lt(e[1].lastMessage.lastTime)?i.push(e):o.push(e)}),t.sort((e,t)=>t[1].lastMessage.lastTime-e[1].lastMessage.lastTime).concat(s).concat(o.sort((e,t)=>t[1].lastMessage.lastTime-e[1].lastMessage.lastTime)).concat(i)}_sortConversationListAndEmitEvent(){this._conversationMap=new Map(this._sortConversationList([...this._conversationMap])),this.emitConversationUpdate(!0,!1)}_updateUserOrGroupProfile(e){if(0===e.length)return;const s=[],o=[],i=this.getModule(cs),n=this.getModule(ds);e.forEach(e=>{if(e.type===t.CONV_C2C)s.push(e.toAccount);else if(e.type===t.CONV_GROUP){const t=e.toAccount;n.hasLocalGroup(t)?e.groupProfile=n.getLocalGroupProfile(t):o.push(t)}}),_e.l(`${this._n}._updateUserOrGroupProfile c2cUserIDList:${s} groupIDList:${o}`),s.length>0&&i.getUserProfile({userIDList:s}).then(({data:e})=>{be(e)?e.forEach(e=>{this._doUpdateUserProfile(\"C2C\"+e.userID,e)}):this._doUpdateUserProfile(\"C2C\"+e.userID,e)}),o.length>0&&n.getGroupProfileAdvance({groupIDList:o,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"FaceUrl\"]}}).then(({data:{successGroupList:e}})=>{e.forEach(e=>{const t=\"GROUP\"+e.groupID;if(this._conversationMap.has(t)){const s=this._conversationMap.get(t);Be(s.groupProfile,e,[],[null,void 0,\"\",0,NaN]),!s.subType&&e.type&&(s.subType=e.type)}})})}_doUpdateUserProfile(e,t){this.hasLocalConversation(e)&&(this.getLocalConversation(e).userProfile=t)}_getConversationOptions(e){const t=[],s=e.filter(({type:e,userID:t})=>1===e&&\"@TLS#NOT_FOUND\"!==t&&\"@TLS#ERROR\"!==t||2===e),o=this.getMyUserID(),i=s.map(e=>{if(we(e.lastMsg)&&(e.lastMsg={elements:[]}),1===e.type){const s={userID:e.userID,nick:e.peerNick,avatar:e.peerAvatar};return t.push(s),{conversationID:\"C2C\"+e.userID,type:\"C2C\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.lastC2CMsgFromAccount,messageForShow:e.messageShow,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:null,payload:e.lastMsg.elements[0]?this._amendLayersOverLimitProperty(e.lastMsg.elements[0].content):null,cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:8===e.lastMessageFlag,onlineOnlyFlag:!1,nick:\"\",nameCard:\"\",version:0,isPeerRead:e.lastC2CMsgFromAccount===o&&e.time<=e.c2cPeerReadTime,revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},userProfile:new tr(s),peerReadTime:e.c2cPeerReadTime,isPinned:1===e.isPinned,messageRemindType:\"\",customData:e.customMark||\"\",markList:Tt(e.standardMark),conversationGroupList:this._convGroupHandler.getConvGroupListByID(e.contactGroupId)}}return{conversationID:\"GROUP\"+e.groupID,type:\"GROUP\",lastMessage:{lastTime:e.time,lastSequence:e.sequence,fromAccount:e.msgGroupFromAccount,messageForShow:e.messageShow,...this._patchTypeAndPayload(e),cloudCustomData:e.lastMsg.cloudCustomData||\"\",isRevoked:2===e.lastMessageFlag,onlineOnlyFlag:!1,nick:e.senderNick||\"\",nameCard:e.senderNameCard||\"\",revoker:e.lastMsg.revokerInfo?e.lastMsg.revokerInfo.revoker:null},groupProfile:new nr({groupID:e.groupID,name:e.groupNick,avatar:e.groupImage}),unreadCount:e.unreadCount,peerReadTime:0,isPinned:1===e.isPinned,messageRemindType:\"\",version:0,customData:e.customMark||\"\",markList:Tt(e.standardMark),conversationGroupList:this._convGroupHandler.getConvGroupListByID(e.contactGroupId)}});if(t.length>0){this.getModule(cs).onConversationsProfileUpdated(t)}return i}_patchTypeAndPayload(e){const{event:s,elements:o=[],groupTips:i={}}=e.lastMsg;if(!we(s)&&!Lt(i)){let e=new bn(i);e.setElement({type:t.MSG_GRP_TIP,content:{...i.elements,groupProfile:i.groupProfile}});const s=JSON.parse(JSON.stringify(e.payload));return e=null,{type:t.MSG_GRP_TIP,payload:s}}return{type:o[0]?o[0].type:null,payload:o[0]?this._amendLayersOverLimitProperty(o[0].content):null}}_amendLayersOverLimitProperty(e){const{layersOverLimit:t}=e;return 0===t?e.layersOverLimit=!1:1===t&&(e.layersOverLimit=!0),e}getLocalMessageList(e){return this._messageListHandler.getLocalMessageList(e)}deleteLocalMessage(e){e instanceof bn&&this._messageListHandler.remove(e)}onConversationDeleted(e){if(!be(e))return;const s=e.map(e=>{const{type:s,userID:o,groupID:i}=e;return 1===s?`${t.CONV_C2C}${o}`:2===s?`${t.CONV_GROUP}${i}`:void 0});_e.l(`${this._n}.onConversationDeleted conversationIDList:${s}`),this.deleteLocalConversationList(s)}onConversationPinned(e){if(!be(e))return;let s=!1;e.forEach(e=>{const{type:o,userID:i,groupID:n}=e;let r;1===o?r=this.getLocalConversation(`${t.CONV_C2C}${i}`):2===o&&(r=this.getLocalConversation(`${t.CONV_GROUP}${n}`)),r&&(_e.l(`${this._n}.onConversationPinned conversationID:${r.conversationID} isPinned:${r.isPinned}`),r.isPinned||(r.isPinned=!0,s=!0))}),s&&this._sortConversationListAndEmitEvent()}onConversationUnpinned(e){if(!be(e))return;let s=!1;e.forEach(e=>{const{type:o,userID:i,groupID:n}=e;let r;1===o?r=this.getLocalConversation(`${t.CONV_C2C}${i}`):2===o&&(r=this.getLocalConversation(`${t.CONV_GROUP}${n}`)),r&&(_e.l(`${this._n}.onConversationUnpinned conversationID:${r.conversationID} isPinned:${r.isPinned}`),r.isPinned&&(r.isPinned=!1,s=!0))}),s&&this._sortConversationListAndEmitEvent()}getMessageList({conversationID:e,nextReqMessageID:t,count:s}){const o=this._n+\".getMessageList\",i=this.getLocalConversation(e);let n=\"\";if(i&&i.groupProfile&&(n=i.groupProfile.type),et(n))return _e.l(`${o} not available in avchatroom. conversationID:${e}`),xn({messageList:[],nextReqMessageID:\"\",isCompleted:!0});(we(s)||s>15)&&(s=15),!t&&this._isNotInCommunity(e)&&(this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this._roamingMessageSequenceMap.delete(e));const r=this._computeRemainingCount({conversationID:e,nextReqMessageID:t}),a=this._completedMap.has(e);if(_e.l(`${o} conversationID:${e} nextReqMessageID:${t} remainingCount:${r} count:${s} isCompleted:${a}`),this._needGetHistory({conversationID:e,remainingCount:r,count:s}))return this.getHistoryMessages({conversationID:e,nextReqMessageID:t,count:20}).then(t=>{const{nextReqID:s,storedMessageList:i}=t,n=this._completedMap.has(e);let a=i;if(r>0){a=this._messageListHandler.getLocalMessageList(e).slice(0,i.length+r)}const u={nextReqMessageID:n?\"\":s,messageList:a,isCompleted:n};return _e.l(`${o} ret.nextReqMessageID:${u.nextReqMessageID} ret.isCompleted:${u.isCompleted} ret.length:${a.length}`),wn(u)});this.modifyMessageList(e);const u=this._getMessageListFromMemory({conversationID:e,nextReqMessageID:t,count:s});return xn(u)}_getMessageListFromMemory({conversationID:e,nextReqMessageID:t,count:s}){const o=this._n+\"._getMessageListFromMemory\",i=this._messageListHandler.getLocalMessageList(e),n=i.length;let r=0;const a={isCompleted:!1,nextReqMessageID:\"\",messageList:[]};return t?(r=i.findIndex(e=>e.ID===t),r>s?(a.messageList=i.slice(r-s,r),a.nextReqMessageID=i[r-s].ID):(a.messageList=i.slice(0,r),a.isCompleted=!0)):n>s?(r=n-s,a.messageList=i.slice(r,n),a.nextReqMessageID=i[r].ID):(a.messageList=i.slice(0,n),a.isCompleted=!0),_e.l(`${o} conversationID:${e} ret.nextReqMessageID:${a.nextReqMessageID} ret.isCompleted:${a.isCompleted} ret.length:${a.messageList.length}`),a}getMessageListHopping(e){let{conversationID:s,sequence:o,time:i,count:n,direction:r=0}=e;if((we(n)||n>15)&&(n=15),s.startsWith(t.CONV_C2C)){const e=this.getModule(ls),o=s.replace(t.CONV_C2C,\"\");return e.getRoamingMessagesHopping({peerAccount:o,time:i,count:n,direction:r})}if(s.startsWith(t.CONV_GROUP)){const e=this.getModule(ds),i=s.replace(t.CONV_GROUP,\"\");return e.getRoamingMessagesHopping({groupID:i,sequence:o,count:n,direction:r})}}_computeRemainingCount({conversationID:e,nextReqMessageID:t}){const s=this._messageListHandler.getLocalMessageList(e),o=s.length;if(!t)return o;let i=0;return it(e)?i=s.findIndex(e=>e.ID===t):nt(e)&&(i=-1!==t.indexOf(\"-\")?s.findIndex(e=>e.ID===t):s.findIndex(e=>e.sequence===t)),-1===i&&(i=0),i}_getMessageListSize(e){return this._messageListHandler.getLocalMessageList(e).length}_needGetHistory({conversationID:e,remainingCount:t,count:s}){const o=this.getLocalConversation(e);let i=\"\";return o&&o.groupProfile&&(i=o.groupProfile.type),!rt(e)&&!et(i)&&(!(nt(e)&&this._isPagingGetGroupListCompleted()&&this._getLocalGroupCount()<=4e3&&!this._hasLocalGroup(e)&&!this._isTopicConversation(e))&&(t<=s&&!this._completedMap.has(e)))}_isTopicConversation(e){const s=e.replace(t.CONV_GROUP,\"\");return ot(s)}getHistoryMessages(e){const{conversationID:s,count:o}=e;if(s===t.CONV_SYSTEM)return xn();let i=15;o>20&&(i=20);let n=null;if(it(s)){const e=this._roamingMessageKeyAndTimeMap.has(s);return n=this.getModule(ls),n?n.getRoamingMessage({conversationID:s,peerAccount:s.replace(t.CONV_C2C,\"\"),count:i,lastMessageTime:e?this._roamingMessageKeyAndTimeMap.get(s).lastMessageTime:0,messageKey:e?this._roamingMessageKeyAndTimeMap.get(s).messageKey:\"\"}):Vn({code:nn.CANNOT_FIND_MODULE})}if(nt(s)){if(n=this.getModule(ds),!n)return Vn({code:nn.CANNOT_FIND_MODULE});let e=null;this._conversationMap.has(s)&&(e=this._conversationMap.get(s).lastMessage);let o=0;e&&(o=e.lastSequence);const r=this._roamingMessageSequenceMap.get(s);return n.getRoamingMessage({conversationID:s,groupID:s.replace(t.CONV_GROUP,\"\"),count:i,sequence:r||o})}return xn()}patchConversationLastMessage(e){const t=this.getLocalConversation(e);if(!t)return;const{messageForShow:s,payload:o}=t.lastMessage;if(Lt(s)||Lt(o)){const s=this._messageListHandler.getLocalMessageList(e);if(0===s.length)return;const o=s[s.length-1];_e.l(`${this._n}.patchConversationLastMessage conversationID:${e} payload:`,o.payload),t.updateLastMessage(o)}}onRoamingMessage(e=[],s,o=!0){const i=s.startsWith(t.CONV_C2C)?t.CONV_C2C:t.CONV_GROUP;let n=null,r=[],a=[],u=0,c=e.length,l=null;const d=i===t.CONV_GROUP,p=this.getModule(Cs),h=this.getFileDownloadProxy();let g=()=>{u=d?e.length-1:0,c=d?0:e.length},_=()=>{d?--u:++u},m=()=>d?u>=c:u<c;for(g();m();_())if(d&&1===e[u].sequence&&o&&this.setCompleted(s),1!==e[u].isPlaceMessage)if(n=new bn(e[u]),n.to=e[u].to,i!==t.CONV_GROUP||we(e[u].topicID)||(n.to=e[u].topicID),n.isSystemMessage=!!e[u].isSystemMessage,n.conversationType=i,4===e[u].event?l={type:t.MSG_GRP_TIP,content:{...e[u].elements,groupProfile:e[u].groupProfile}}:(e[u].elements=p.parseElements(e[u].elements,e[u].from),l=e[u].elements),d||n.setNickAndAvatar({nick:e[u].nick,avatar:e[u].avatar}),Lt(l)){const t=new Cn(\"emptyMessageBody\");t.setMessage(`from:${n.from} to:${n.to} sequence:${n.sequence} event:${e[u].event}`),t.setNetworkType(this.getNetworkType()).setLevel(\"warning\").end()}else n.setElement(l,h),n.reInitialize(this.getMyUserID()),r.push(n);return g=_=m=null,o?(this._messageListHandler.unshift(r,a),r=null,a):(a=null,r)}findMessage(e){return this._messageListHandler.findMessage(e)}_isNotInCommunity(e){let s=!1;if(e.startsWith(t.CONV_GROUP)&&this._isTopicConversation(e)){const o=ft(e.replace(t.CONV_GROUP,\"\"));this.getModule(ds).hasLocalGroup(o)||(s=!0)}return s}deleteTopicRoamingMessageInfo(e){if(!st({groupID:e}))return;this._messageListHandler.getTopicConversationIDList(e).forEach(e=>{this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),this._roamingMessageSequenceMap.delete(e)})}deleteGroupRomaingMessageInfo(e){const s=`${t.CONV_GROUP}${e}`;this._messageListHandler.removeByConversationID(s),this._completedMap.delete(s),this._roamingMessageSequenceMap.delete(s)}setMessageRead({conversationID:e}){const s=this.getLocalConversation(e);if(_e.l(`${this._n}.setMessageRead conversationID:${e} unreadCount:${s?s.unreadCount:0}`),!s)return xn();if(s.type!==t.CONV_GROUP&&s.type!==t.CONV_TOPIC||Lt(s.groupAtInfoList)||this.deleteGroupAtTips(e),0===s.unreadCount)return xn();if(s.type===t.CONV_GROUP&&!this._hasLocalGroup(e))return 0!==s.unreadCount&&(s.unreadCount=0,this.emitConversationUpdate(!0,!1)),xn();const o=this._messageListHandler.getLocalLastMessage(e);let i=s.lastMessage.lastTime;o&&i<o.time&&(i=o.time);let n=s.lastMessage.lastSequence;if(o&&n<o.sequence&&(n=o.sequence),s.type===t.CONV_TOPIC&&we(o)){const s=this.getModule(gs),o=e.replace(t.CONV_GROUP,\"\"),i=ft(o),r=s.getLocalTopic(i,o);r&&(n=r.nextMessageSeq-1)}let r=null;switch(s.type){case t.CONV_C2C:return r=this.getModule(ls),r?r.setMessageRead({conversationID:e,lastMessageTime:i}):Vn({code:nn.CANNOT_FIND_MODULE});case t.CONV_GROUP:case t.CONV_TOPIC:return r=this.getModule(ds),r?r.setMessageRead({conversationID:e,lastMessageSeq:n}):Vn({code:nn.CANNOT_FIND_MODULE});case t.CONV_SYSTEM:return s.unreadCount=0,this.emitConversationUpdate(!0,!1),xn();default:return xn()}}setAllMessageRead(e={}){const s=this._n+\".setAllMessageRead\";e.scope||(e.scope=t.READ_ALL_MSG),_e.l(s+\" options:\",e);const o=this._createSetAllMessageReadPack(e);if(0===o.readAllC2CMessage&&0===o.groupMessageReadInfoList.length)return xn();const i=new Cn(\"setAllMessageRead\");return this.request({protocolName:Zo,requestData:o}).then(t=>{const{data:s}=t,o=this._handleAllMessageRead(s);return i.setMessage(`scope:${e.scope} failureGroups:${JSON.stringify(o)}`).setNetworkType(this.getNetworkType()).end(),xn()}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn({code:e&&e.code?e.code:nn.MESSAGE_UNREAD_ALL_FAIL,message:e&&e.message?e.message:void 0})))}setConversationCustomData(e){return this._convGroupHandler.setConvCustomData(e)}markConversation(e){return this._convGroupHandler.markConversation(e)}getConversationGroupList(){return this._convGroupHandler.getLocalConvGroupList()}createConversationGroup(e){return this._convGroupHandler.createConvGroup(e)}deleteConversationGroup(e){return this._convGroupHandler.deleteConvGroup(e)}renameConversationGroup(e){return this._convGroupHandler.renameConvGroup(e)}addConversationsToGroup(e){return this._convGroupHandler.addConvsToGroup(e)}deleteConversationsFromGroup(e){return this._convGroupHandler.deleteConvsFromGroup(e)}onConversationMarkUpdated(e){this._convGroupHandler.onConvMarkUpdated(e)}onConversationGroupCreated(e){this._convGroupHandler.onConvGroupCreated(e)}onConversationGroupDeleted(e){this._convGroupHandler.onConvGroupDeleted(e)}onConversationGroupNameUpdated(e){this._convGroupHandler.onConvGroupNameUpdated(e)}onConversationInGroupUpdated(e){this._convGroupHandler.onConvInGroupUpdated(e)}onConversationAddedToOrDeletedFromGroup(e){this._convGroupHandler.onConvAddedToOrDeletedFromGroup(e)}_getConversationLastMessageSequence(e){const t=this._messageListHandler.getLocalLastMessage(e.conversationID);let s=e.lastMessage.lastSequence;return t&&s<t.sequence&&(s=t.sequence),s}_getConversationLastMessageTime(e){const t=this._messageListHandler.getLocalLastMessage(e.conversationID);let s=e.lastMessage.lastTime;return t&&s<t.time&&(s=t.time),s}_createSetAllMessageReadPack(e){const s={readAllC2CMessage:0,groupMessageReadInfoList:[]},{scope:o}=e;for(const[,i]of this._conversationMap)if(i.unreadCount>0)if(i.type===t.CONV_C2C&&0===s.readAllC2CMessage){if(o===t.READ_ALL_MSG)s.readAllC2CMessage=1;else if(o===t.READ_ALL_C2C_MSG){s.readAllC2CMessage=1;break}}else if(i.type===t.CONV_GROUP&&(o===t.READ_ALL_GROUP_MSG||o===t.READ_ALL_MSG)){const e=this._getConversationLastMessageSequence(i);s.groupMessageReadInfoList.push({groupID:i.groupProfile.groupID,messageSequence:e})}return s}onPushedAllMessageRead(e){this._handleAllMessageRead(e)}_handleAllMessageRead(e){const{groupMessageReadInfoList:t,readAllC2CMessage:s}=e,o=this._parseGroupReadInfo(t);return this._updateAllConversationUnreadCount({readAllC2CMessage:s})>=1&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate()),o}_parseGroupReadInfo(e){const t=[];if(e&&e.length)for(let s=0,o=e.length;s<o;s++){const{groupID:o,sequence:i,retCode:n,lastMessageSeq:r}=e[s];we(n)?this._remoteGroupReadSequenceMap.set(o,r):(this._remoteGroupReadSequenceMap.set(o,i),0!==n&&t.push(`${o}-${i}-${n}`))}return t}_updateAllConversationUnreadCount(e){const{readAllC2CMessage:s}=e;let o=0;for(const[i,n]of this._conversationMap)if(n.unreadCount>=1){if(1===s&&n.type===t.CONV_C2C){const e=this._getConversationLastMessageTime(n);this.updateIsReadAfterReadReport({conversationID:i,lastMessageTime:e})}else if(n.type===t.CONV_GROUP){const e=i.replace(t.CONV_GROUP,\"\");if(this._remoteGroupReadSequenceMap.has(e)){const t=this._remoteGroupReadSequenceMap.get(e),s=this._getConversationLastMessageSequence(n);this.updateIsReadAfterReadReport({conversationID:i,remoteReadSequence:t}),s>=t&&this._remoteGroupReadSequenceMap.delete(e)}}this.updateUnreadCount(i,!1)&&(o+=1)}return o}isRemoteRead(e){const{conversationID:s,sequence:o}=e,i=s.replace(t.CONV_GROUP,\"\");let n=!1;if(this._remoteGroupReadSequenceMap.has(i)){const e=this._remoteGroupReadSequenceMap.get(i);o<=e&&(n=!0,_e.l(`${this._n}.isRemoteRead conversationID:${s} messageSequence:${o} remoteReadSequence:${e}`)),o>=e+10&&this._remoteGroupReadSequenceMap.delete(i)}return n}updateIsReadAfterReadReport({conversationID:e,lastMessageSeq:t,lastMessageTime:s}){const o=this._messageListHandler.getLocalMessageList(e);if(0===o.length)return;let i;for(let n=o.length-1;n>=0;n--)if(i=o[n],!(s&&i.time>s||t&&i.sequence>t)){if(\"in\"===i.flow&&i.isRead)break;i.setIsRead(!0)}}updateUnreadCount(e,s=!0){let o=!1;const i=this.getLocalConversation(e),n=this._messageListHandler.getLocalMessageList(e);if(!i)return;const r=i.unreadCount,a=n.filter(e=>!e.isRead&&!e._onlineOnlyFlag&&!e.isDeleted).length;if(r!==a&&(i.unreadCount=a,o=!0,_e.l(`${this._n}.updateUnreadCount from ${r} to ${a}, conversationID:${e}`),!0===s&&(this.emitConversationUpdate(!0,!1),this.emitTotalUnreadMessageCountUpdate())),o&&i.type===t.CONV_TOPIC){const{unreadCount:s}=i,o=this.getModule(gs),n=e.replace(t.CONV_GROUP,\"\");o.onConversationProxy({topicID:n,unreadCount:s})}return o}clearGroupAtInfoList(e,s=!0){const o=this.getLocalConversation(e);if(o&&o.groupAtInfoList.length>0){if(o.clearGroupAtInfoList(),_e.l(`${this._n}.clearGroupAtInfoList conversationID:${e}`),o.type===t.CONV_TOPIC){const{groupAtInfoList:s}=o,i=this.getModule(gs),n=e.replace(t.CONV_GROUP,\"\");i.onConversationProxy({topicID:n,groupAtInfoList:s})}!0===s&&this.emitConversationUpdate(!0,!1)}}updateReadReceiptInfo(s){const{userID:o,groupID:i,readReceiptList:n}=s;if(Lt(n))return;const r=[];if(we(o)){if(!we(i)){const e=`${t.CONV_GROUP}${i}`;n.forEach(t=>{const{tinyID:s,clientTime:o,random:n,readCount:a,unreadCount:u}=t,c=`${s}-${o}-${n}`,l=this._messageListHandler.getLocalMessage(e,c),d={groupID:i,messageID:c,readCount:0,unreadCount:0};l&&(Ge(a)&&(l.readReceiptInfo.readCount=a,d.readCount=a),Ge(u)&&(l.readReceiptInfo.unreadCount=u,d.unreadCount=u),r.push(d))})}}else{const e=`${t.CONV_C2C}${o}`;n.forEach(t=>{const{tinyID:s,clientTime:i,random:n}=t,a=`${s}-${i}-${n}`,u=this._messageListHandler.getLocalMessage(e,a);if(u){u.readReceiptInfo.isPeerRead=!0;const e={userID:o,messageID:a,isPeerRead:!0};r.push(e)}})}r.length>0&&this.emitOuterEvent(e.MESSAGE_READ_RECEIPT_RECEIVED,r)}recomputeGroupUnreadCount(e){const{conversationID:t,count:s}=e,o=this.getLocalConversation(t);if(o){const e=o.unreadCount;let i=e-s;i<0&&(i=0),o.unreadCount=i,_e.l(`${this._n}.recomputeGroupUnreadCount from ${e} to ${i}, conversationID:${t}`)}}updateIsRead(e){const s=this.getLocalConversation(e),o=this.getLocalMessageList(e);if(!s||0===o.length||rt(s.type))return;const i=[];for(let t=0,r=o.length;t<r;t++)\"in\"!==o[t].flow?\"out\"!==o[t].flow||o[t].isRead||o[t].setIsRead(!0):i.push(o[t]);let n=0;if(s.type===t.CONV_C2C){const e=i.slice(-s.unreadCount).filter(e=>e.isRevoked).length;n=i.length-s.unreadCount-e}else n=i.length-s.unreadCount;for(let t=0;t<n&&!i[t].isRead;t++)i[t].setIsRead(!0)}deleteGroupAtTips(e){const s=this._n+\".deleteGroupAtTips\";_e.l(\"\"+s);const o=this._conversationMap.get(e);if(!o)return Promise.resolve();const i=o.groupAtInfoList;if(0===i.length)return Promise.resolve();let n=void 0;e.startsWith(t.CONV_GROUP)&&(n=e.replace(t.CONV_GROUP,\"\"));let r=[...i];if((st({groupID:n})||ot(n))&&(r=i.filter(e=>!e.atTypeArray.includes(t.CONV_AT_ALL)),0===r.length))return this.clearGroupAtInfoList(e,!1),Promise.resolve();const a=this.getMyUserID();return this.request({protocolName:vo,requestData:{messageListToDelete:r.map(e=>({from:e.from,to:a,messageSeq:e.__sequence,messageRandom:e.__random,groupID:we(e.topicID)?e.groupID:e.topicID}))}}).then(()=>(_e.l(`${s} ok. count:${i.length}`),this.clearGroupAtInfoList(e,!1),Promise.resolve())).catch(e=>(_e.e(s+\" failed. error:\",e),Vn(e)))}appendToMessageList(e){this._messageListHandler.pushIn(e)}setMessageRandom(e){this.singlyLinkedList.set(e.random)}deleteMessageRandom(e){this.singlyLinkedList.delete(e.random)}pushIntoMessageList(e,t,s){return!(!this._messageListHandler.pushIn(t,s)||this._isMessageFromCurrentInstance(t)&&!s)&&(e.push(t),!0)}_isMessageFromCurrentInstance(e){return this.singlyLinkedList.has(e.random)}revoke(e,t,s){return this._messageListHandler.revoke(e,t,s)}getPeerReadTime(e){return this._peerReadTimeMap.get(e)}recordPeerReadTime(e,t){if(this._peerReadTimeMap.has(e)){this._peerReadTimeMap.get(e)<t&&this._peerReadTimeMap.set(e,t)}else this._peerReadTimeMap.set(e,t)}updateMessageIsPeerReadProperty(s,o){if(s.startsWith(t.CONV_C2C)&&o>0){const t=this._messageListHandler.updateMessageIsPeerReadProperty(s,o);if(t.length>0&&this.emitOuterEvent(e.MESSAGE_READ_BY_PEER,t),this._conversationMap.has(s)){const e=this._conversationMap.get(s).lastMessage;Lt(e)||e.fromAccount===this.getMyUserID()&&e.lastTime<=o&&!e.isPeerRead&&(e.isPeerRead=!0,this.emitConversationUpdate(!0,!1))}}}updateMessageIsModifiedProperty(e){this._messageListHandler.updateMessageIsModifiedProperty(e)}setCompleted(e){_e.l(`${this._n}.setCompleted. conversationID:${e}`),this._completedMap.set(e,!0)}updateRoamingMessageKeyAndTime(e,t,s){this._roamingMessageKeyAndTimeMap.set(e,{messageKey:t,lastMessageTime:s})}updateRoamingMessageSequence(e,t){this._roamingMessageSequenceMap.set(e,t)}getConversationList(e){const t=\"getConversationList\",s=`${this._n}.${t}`,o=`pagingStatus:${this._pagingStatus}, local conversation count:${this._conversationMap.size}, options:${e}`;if(_e.l(`${s}. ${o}`),this._pagingStatus===Rt.REJECTED){const i=new Cn(t);return i.setMessage(o),this.syncConversationList().then(()=>{i.setNetworkType(this.getNetworkType()).end();const t=this._getConversationList(e);return wn({conversationList:t,isSyncCompleted:this._isSyncCompleted()})}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}if(0===this._conversationMap.size){const i=new Cn(t);return i.setMessage(o),this.syncConversationList().then(()=>{i.setNetworkType(this.getNetworkType()).end();const t=this._getConversationList(e);return wn({conversationList:t,isSyncCompleted:this._isSyncCompleted()})}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}const i=this._getConversationList(e);return _e.l(`${s}. returned conversation count:${i.length}`),xn({conversationList:i,isSyncCompleted:this._isSyncCompleted()})}_getConversationList(e){if(we(e))return this.getLocalConversationList();if(be(e)){if(0===e.length)return[];return this.getLocalConversationList().filter(t=>e.includes(t.conversationID))}if(Pe(e)){const{type:s,markType:o,groupName:i}=e;return this.getLocalConversationList().filter(e=>(s!==t.CONV_C2C&&s!==t.CONV_GROUP||e.type===s)&&(!Ue(i)||e.conversationGroupList.includes(i))&&(!Ge(o)||e.markList.includes(o)))}return[]}_handleC2CPeerReadTime(){for(const[e,s]of this._conversationMap)s.type===t.CONV_C2C&&(_e.d(`${this._n}._handleC2CPeerReadTime conversationID:${e} peerReadTime:${s.peerReadTime}`),this.recordPeerReadTime(e,s.peerReadTime))}_isPagingGetGroupListCompleted(){return this.getModule(ds).isPagingGetCompleted()}_getLocalGroupCount(){return this.getModule(ds).getLocalGroupList().length}_hasLocalGroup(e){return this.getModule(ds).hasLocalGroup(e.replace(t.CONV_GROUP,\"\"))}getConversationProfile(e){let s;if(s=this._conversationMap.has(e)?this._conversationMap.get(e):new ar({conversationID:e,type:e.slice(0,3)===t.CONV_C2C?t.CONV_C2C:t.CONV_GROUP},this.isIntl()),s._isInfoCompleted||s.type===t.CONV_SYSTEM)return xn({conversation:s});if(nt(e)&&!this._hasLocalGroup(e))return xn({conversation:s});const o=this._n+\".getConversationProfile\",i=new Cn(\"getConversationProfile\");return _e.l(`${o}. conversationID:${e} remark:${s.remark} lastMessage:`,s.lastMessage),this._updateUserOrGroupProfileCompletely(s).then(n=>{i.setNetworkType(this.getNetworkType()).setMessage(`conversationID:${e} unreadCount:${n.data.conversation.unreadCount}`).end();const r=this.getModule(ps);if(r&&s.type===t.CONV_C2C){const i=e.replace(t.CONV_C2C,\"\");if(r.isMyFriend(i)){const t=r.getFriendRemark(i);s.remark!==t&&(s.remark=t,_e.l(`${o}. conversationID:${e} patch remark:${s.remark}`))}}return _e.l(`${o} ok. conversationID:${e}`),n}).catch(t=>(this.probeNetwork().then(([s,o])=>{i.setError(t,s,o).setMessage(\"conversationID:\"+e).end()}),_e.e(o+\" failed. error:\",t),Vn(t)))}_updateUserOrGroupProfileCompletely(e){if(e.type===t.CONV_C2C){return this.getModule(cs).getUserProfile({userIDList:[e.toAccount]}).then(t=>{const s=t.data;return 0===s.length?Vn(new Fn({code:nn.USER_OR_GROUP_NOT_FOUND})):(e.userProfile=s[0],e._isInfoCompleted=!0,this._unshiftConversation(e),xn({conversation:e}))})}return this.getModule(ds).getGroupProfile({groupID:e.toAccount}).then(t=>(e.groupProfile=t.data.group,e._isInfoCompleted=!0,this._unshiftConversation(e),xn({conversation:e})))}_unshiftConversation(e){e instanceof ar&&!this._conversationMap.has(e.conversationID)&&(this._conversationMap=new Map([[e.conversationID,e],...this._conversationMap]),this._setStorageConversationList(),this.emitConversationUpdate(!0,!1))}_onProfileUpdated(e){e.data.forEach(e=>{const{userID:s}=e;if(s===this.getMyUserID())this._onMyProfileModified({latestNick:e.nick,latestAvatar:e.avatar});else{const o=this._conversationMap.get(`${t.CONV_C2C}${s}`);o&&(o.userProfile=e)}})}_isSyncCompleted(){return this._pagingStatus===Rt.RESOLVED}_errorLog(e,t,s,o){const i=new Error(\"Params validate failed.\"),n=`${this.getErrorMessage(\"API_REFER\")}${e}`;throw _e.w(`[${e}] | ${t} | ${this.getErrorMessage(s,o)}, ${n}`),_e.e(`[${e}] Invalid ${t}: type check failed for ${t}.`),i}_isValidConversationID(e){return it(e)||nt(e)||rt(e)}deleteConversation(e){const t=\"deleteConversation\";return Ue(e)||ke(e)||this._errorLog(t,\"options\",\"StringOrObjectRequiredLog\"),Ue(e)?(this._isValidConversationID(e)||this._errorLog(t,\"options\",\"InvalidConversationID\",e),_e.l(`${this._n}.${t} conversationID:${e}`),this.deleteConversationList({conversationIDList:[e],flag:1})):(be(e.conversationIDList)||this._errorLog(t,\"conversationIDList\",\"ArrayRequiredLog\"),0===e.conversationIDList.length&&this._errorLog(t,\"conversationIDList\",\"NonEmptyArrayLog\"),e.conversationIDList.forEach(e=>{this._isValidConversationID(e)||this._errorLog(t,\"conversationIDList\",\"InvalidConversationID\",e)}),\"clearHistoryMessage\"in e&&\"boolean\"!=typeof e.clearHistoryMessage&&this._errorLog(t,\"clearHistoryMessage\",\"BooleanRequiredLog\"),e.conversationIDList.length>100&&(e.conversationIDList=e.conversationIDList.slice(0,100)),this.deleteConversationList(e))}deleteConversationList(e){const{conversationIDList:t=[],clearHistoryMessage:s=!0,flag:o=0}=e,i=this._n+\".deleteConversationList\";_e.l(`${i} conversationIDList.length:${t.length} clearHistoryMessage:${s}`);const n=new Cn(\"deleteConversationList\");return n.setMessage(\"conversationIDList:\"+t),Promise.all([this.rmLocalOnlyConversationList(t),this.rmLocalAndRemoteConversationList(t,s)]).then(e=>{n.setNetworkType(this.getNetworkType()).end();const t=[...e[0],...e[1]];return 0===t.length?Vn(new Fn({code:nn.CONVERSATION_NOT_FOUND})):(_e.l(i+\" ok\"),xn(1===o?{conversationID:t[0]}:{conversationIDList:t}))}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(i+\" failed. error:\",e),Vn(e)))}rmLocalOnlyConversationList(e){return e.filter(e=>{if(!this._conversationMap.has(e))return!1;const s=this.getLocalConversation(e).type;if(s===t.CONV_GROUP&&!this._hasLocalGroup(e))return this.deleteLocalConversation(e),!0;if(s===t.CONV_SYSTEM){return this.getModule(ds).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),this.deleteLocalConversation(e),!0}return!1})}rmLocalAndRemoteConversationList(e,s){const o={fromAccount:this.getMyUserID(),conversationList:[],clearHistoryMessage:s?1:0};return e.forEach(e=>{if(this._conversationMap.has(e)){const s=this.getLocalConversation(e).type;s===t.CONV_C2C?o.conversationList.push({toAccount:e.replace(s,\"\"),type:1}):s===t.CONV_GROUP&&this._hasLocalGroup(e)&&o.conversationList.push({toGroupID:e.replace(s,\"\"),type:2})}}),0===o.conversationList.length?[]:this.request({protocolName:So,requestData:o}).then(e=>{const s=[];return e.data.resultList.length>0&&e.data.resultList.map(e=>{if(0===e.code){const o=1===e.type?`${t.CONV_C2C}${e.to}`:`${t.CONV_GROUP}${e.groupID}`;s.push(o)}}),this.deleteLocalConversationList(s),s})}clearHistoryMessage(e){const s={fromAccount:this.getMyUserID(),toAccount:void 0,type:void 0,toGroupID:void 0};if(!this._conversationMap.has(e))return Vn({code:nn.CONVERSATION_NOT_FOUND});const o=this._conversationMap.get(e).type;if(o===t.CONV_C2C)s.type=1,s.toAccount=e.replace(t.CONV_C2C,\"\");else{if(o!==t.CONV_GROUP){if(o===t.CONV_SYSTEM){return this.getModule(ds).deleteGroupSystemNotice({messageList:this._messageListHandler.getLocalMessageList(e)}),xn({conversationID:e})}return Vn({code:nn.CONVERSATION_UN_RECORDED_TYPE})}s.type=2,s.toGroupID=e.replace(t.CONV_GROUP,\"\")}const i=this._n+\".clearHistoryMessage\",n=new Cn(\"clearHistoryMessage\");return n.setMessage(\"conversationID:\"+e),_e.l(`${i}. conversationID:${e}`),this.setMessageRead({conversationID:e}).then(()=>this.request({protocolName:Lo,requestData:s})).then(()=>{n.setNetworkType(this.getNetworkType()).end(),_e.l(i+\" ok\"),this._messageListHandler.removeByConversationID(e),this.setCompleted(e);const t=this.getLocalConversation(e);return t&&(t.updateLastMessage(),this._sortConversationListAndEmitEvent()),xn({conversationID:e})}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(i+\" failed. error:\",e),Vn(e)))}pinConversation(e){const{conversationID:s,isPinned:o}=e;if(!this._conversationMap.has(s))return Vn({code:nn.CONVERSATION_NOT_FOUND});const i=this.getLocalConversation(s);if(i.isPinned===o)return xn({conversationID:s});const n=this._n+\".pinConversation\",r=new Cn(\"pinConversation\");r.setMessage(`conversationID:${s} isPinned:${o}`),_e.l(`${n}. conversationID:${s} isPinned:${o}`);let a=null;return it(s)?a={type:1,toAccount:s.replace(t.CONV_C2C,\"\")}:nt(s)&&(a={type:2,groupID:s.replace(t.CONV_GROUP,\"\")}),this.request({protocolName:Ao,requestData:{fromAccount:this.getMyUserID(),operationType:!0===o?1:2,itemList:[a]}}).then(()=>(r.setNetworkType(this.getNetworkType()).end(),_e.l(n+\" ok\"),i.isPinned!==o&&(i.isPinned=o,this._sortConversationListAndEmitEvent()),wn({conversationID:s}))).catch(e=>(this.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),_e.e(n+\" failed. error:\",e),Vn(e)))}setMessageRemindType(e){return this._messageRemindHandler.set(e)}patchMessageRemindType(e){const{ID:s,isC2CConversation:o,messageRemindType:i}=e;let n=!1;const r=this.getLocalConversation(o?`${t.CONV_C2C}${s}`:`${t.CONV_GROUP}${s}`);return r&&r.messageRemindType!==i&&(r.messageRemindType=i,n=!0),_e.d(this._n+\".patchMessageRemindType options:\",e,\"ret:\"+n),n}onC2CMessageRemindTypeSynced(e){const s=this._n+\".onC2CMessageRemindTypeSynced\";_e.d(s,e),e.dataList.forEach(e=>{if(!Lt(e.muteNotificationsSync)){const{to:o,updateSequence:i,muteFlag:n}=e.muteNotificationsSync;let r;this._messageRemindHandler.setUpdateSequence(i),0===n?r=t.MSG_REMIND_ACPT_AND_NOTE:1===n?r=t.MSG_REMIND_DISCARD:2===n&&(r=t.MSG_REMIND_ACPT_NOT_NOTE);let a=0;this.patchMessageRemindType({ID:o,isC2CConversation:!0,messageRemindType:r})&&(a+=1),_e.l(`${s} updateCount:${a}`),a>=1&&this.emitConversationUpdate(!0,!1)}})}onGroupMessageRemindTypeSynced(e){_e.d(this._n+\".onGroupMessageRemindTypeSynced options:\",e),this._messageRemindHandler.onGroupMessageRemindTypeUpdated(e)}deleteLocalConversation(e,t=!0){const s=this._conversationMap.has(e);if(_e.d(`${this._n}.deleteLocalConversation conversationID:${e} has:${s}`),s&&(this._conversationMap.delete(e),this._roamingMessageKeyAndTimeMap.has(e)&&this._roamingMessageKeyAndTimeMap.delete(e),this._roamingMessageSequenceMap.has(e)&&this._roamingMessageSequenceMap.delete(e),this._setStorageConversationList(),this._messageListHandler.removeByConversationID(e),this._completedMap.delete(e),t)){const t=!this._isTopicConversation(e);this.emitConversationUpdate(t,!1)}}deleteLocalConversationList(e){let t=0,s=!1;e.forEach(e=>{this._conversationMap.has(e)&&(t+=this._conversationMap.get(e).unreadCount||0,this.deleteLocalConversation(e,!1),s=!0)}),_e.l(`${this._n}.deleteLocalConversationList conversationIDList.length:${e.length} isConvIDExisted:${s}`),s&&(this.emitConversationUpdate(!0,!1),t>0&&this.emitTotalUnreadMessageCountUpdate())}isMessageSentByCurrentInstance(e){return!(!this._messageListHandler.hasLocalMessage(e.conversationID,e.ID)&&!this.singlyLinkedList.has(e.random))}modifyMessageList(e){if(!e.startsWith(t.CONV_C2C))return;if(!this._conversationMap.has(e))return;const s=this._conversationMap.get(e),o=Date.now();this._messageListHandler.modifyMessageSentByPeer({conversationID:e,latestNick:s.userProfile.nick,latestAvatar:s.userProfile.avatar});const i=this.getModule(cs).getNickAndAvatarByUserID(this.getMyUserID());this._messageListHandler.modifyMessageSentByMe({conversationID:e,latestNick:i.nick,latestAvatar:i.avatar}),_e.l(`${this._n}.modifyMessageList conversationID:${e} cost ${Date.now()-o} ms`)}updateUserProfileSpecifiedKey(e){_e.l(this._n+\".updateUserProfileSpecifiedKey options:\",e);const{conversationID:t,nick:s,avatar:o}=e;if(this._conversationMap.has(t)){const e=this._conversationMap.get(t).userProfile;Ue(s)&&e.nick!==s&&(e.nick=s),Ue(o)&&e.avatar!==o&&(e.avatar=o),this.emitConversationUpdate(!0,!1)}}_onMyProfileModified(e){const t=this.getLocalConversationList(),s=Date.now();t.forEach(t=>{this.modifyMessageSentByMe({conversationID:t.conversationID,...e})}),_e.l(`${this._n}._onMyProfileModified. modify all messages sent by me, cost ${Date.now()-s} ms`)}modifyMessageSentByMe(e){this._messageListHandler.modifyMessageSentByMe(e)}getLatestMessageSentByMe(e){return this._messageListHandler.getLatestMessageSentByMe(e)}modifyMessageSentByPeer(e){this._messageListHandler.modifyMessageSentByPeer(e)}getLatestMessageSentByPeer(e){return this._messageListHandler.getLatestMessageSentByPeer(e)}pushIntoNoticeResult(e,t){return!(!this._messageListHandler.pushIn(t)||this.singlyLinkedList.has(t.random))&&(e.push(t),!0)}getLocalLastMessage(e){return this._messageListHandler.getLocalLastMessage(e)}checkAndPatchRemark(){const e=Promise.resolve();if(0===this._conversationMap.size)return e;const s=this.getModule(ps);if(!s)return e;const o=[...this._conversationMap.values()].filter(e=>e.type===t.CONV_C2C);if(0===o.length)return e;let i=0;return o.forEach(e=>{const o=e.conversationID.replace(t.CONV_C2C,\"\");if(s.isMyFriend(o)){const t=s.getFriendRemark(o);e.remark!==t&&(e.remark=t,i+=1)}}),_e.l(`${this._n}.checkAndPatchRemark. c2c conversation count:${o.length}, patched count:${i}`),e}updateTopicConversation(e){this._updateLocalConversationList({conversationOptionsList:e,isFromGetConversations:!0})}sendReadReceipt(e){const s=e[0];let o=null;return s.conversationType===t.CONV_C2C?o=this._m.getModule(ls):s.conversationType===t.CONV_GROUP&&(o=this._m.getModule(ds)),o?o.sendReadReceipt(e):Vn({code:nn.CANNOT_FIND_MODULE})}getReadReceiptList(e){const s=e[0];let o=null;return s.conversationType===t.CONV_C2C?o=this._m.getModule(ls):s.conversationType===t.CONV_GROUP&&(o=this._m.getModule(ds)),o?o.getReadReceiptList(e):Vn({code:nn.CANNOT_FIND_MODULE})}getLastMessageTime(e){const t=this.getLocalConversation(e);return t?t.lastMessage.lastTime:0}getTotalUnreadMessageCount(){const e=this.getLocalConversationList();let s=0;return e.forEach(e=>{e.type!==t.CONV_SYSTEM&&(\"\"!==e.messageRemindType&&e.messageRemindType!==t.MSG_REMIND_ACPT_AND_NOTE||(s+=e.unreadCount))}),s}emitTotalUnreadMessageCountUpdate(){const t=this.getTotalUnreadMessageCount();this._convTotalUnreadCount!==t&&(_e.l(`${this._n}.emitTotalUnreadMessageCountUpdate from ${this._convTotalUnreadCount} to ${t}`),this._convTotalUnreadCount=t,this.emitOuterEvent(e.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED))}reset(){_e.l(this._n+\".reset\"),this._pagingStatus=Rt.NOT_START,this._messageListHandler.reset(),this._messageRemindHandler.reset(),this._roamingMessageKeyAndTimeMap.clear(),this._roamingMessageSequenceMap.clear(),this.singlyLinkedList.reset(),this._peerReadTimeMap.clear(),this._completedMap.clear(),this._conversationMap.clear(),this._pagingTimeStamp=0,this._pagingStartIndex=0,this._pagingPinnedTimeStamp=0,this._pagingPinnedStartIndex=0,this._remoteGroupReadSequenceMap.clear(),this._convTotalUnreadCount=0,this._pagingGetCostList.length=0,this.resetReady()}}class dr{constructor(e){this._groupModule=e,this._n=\"GroupTipsHandler\",this._cachedGroupTipsMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map}onCheckTimer(e){e%1==0&&this._cachedGroupTipsMap.size>0&&this._checkCachedGroupTips()}_checkCachedGroupTips(){this._cachedGroupTipsMap.forEach((e,t)=>{let s=this._checkCountMap.get(t);const o=this._groupModule.hasLocalGroup(t);_e.l(`${this._n}._checkCachedGroupTips groupID:${t} hasLocalGroup:${o} checkCount:${s}`),o?(this._notifyCachedGroupTips(t),this._checkCountMap.delete(t),this._groupModule.deleteUnjoinedAVChatRoom(t)):s>=this.MAX_CHECK_COUNT?(this._deleteCachedGroupTips(t),this._checkCountMap.delete(t)):(s++,this._checkCountMap.set(t,s))})}onNewGroupTips(t){_e.d(`${this._n}.onReceiveGroupTips count:${t.dataList.length}`);const{eventDataList:s,result:o,AVChatRoomMessageList:i}=this.newGroupTipsStoredAndSummary(t);if(i.length>0&&this._groupModule.onAVChatRoomMessage(i),s.length>0){this._groupModule.updateNextMessageSeq(s);this._groupModule.getModule(_s).onNewMessage({conversationOptionsList:s,isInstantMessage:!0})}o.length>0&&(this._groupModule.emitOuterEvent(e.MESSAGE_RECEIVED,o),this.handleMessageList(o))}newGroupTipsStoredAndSummary(e){const{event:s,dataList:o}=e;let i=null;const n=[],r=[],a={},u=[];for(let c=0,l=o.length;c<l;c++){const e=Ze(o[c]);if(6===s){if(this._groupModule.isGroupAttributesUpdatedNotice(e))continue;if(this._groupModule.isGroupCountersNotice(e))continue}const{groupProfile:{groupID:l,communityType:d=0,topicID:p,invisible:h}}=e;let g=void 0;const _=this._groupModule.isMessageFromTopic(d,p);if(_){g=t.CONV_TOPIC,e.to=p;const s=this._groupModule.getModule(gs);s.hasLocalTopic(l,p)||this._getTopicPendingMap.has(p)||(this._getTopicPendingMap.set(p,1),s.getTopicList({groupID:l,topicIDList:[p]}).finally(()=>{this._getTopicPendingMap.delete(p)}))}const m=this._groupModule.hasLocalGroup(l);if(!m&&this._groupModule.isUnjoinedAVChatRoom(l))continue;if(!m&&!_){this._cacheGroupTipsAndProbe({groupID:l,event:s,item:e});continue}if(this._groupModule.isMessageFromOrToAVChatroom(l)){e.event=s,u.push(e);continue}if(e.currentUser=this._groupModule.getMyUserID(),e.conversationType=t.CONV_GROUP,i=new bn(e),i.setElement({type:t.MSG_GRP_TIP,content:{...e.elements,groupProfile:e.groupProfile}}),i.isSystemMessage=!1,1===h){this._qualityStat(i);continue}const M=this._groupModule.getModule(_s),{conversationID:f,sequence:I}=i;if(6===s)i._onlineOnlyFlag=!0,r.push(i);else{if(!M.pushIntoNoticeResult(r,i))continue}if(this._groupModule.isMessageFromCommunityOfTopic(d,p))continue;if(6===s&&M.getLocalConversation(f))continue;6!==s&&this._qualityStat(i);const C=M.isRemoteRead({conversationID:f,sequence:I});if(we(a[f])){let e=0;\"in\"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||C||(e=1)),a[f]=n.push({conversationID:f,unreadCount:e,type:we(g)?i.conversationType:g,subType:i.conversationSubType,lastMessage:i._isExcludedFromLastMessage?\"\":i})-1}else{const e=a[f];n[e].type=i.conversationType,n[e].subType=i.conversationSubType,n[e].lastMessage=i._isExcludedFromLastMessage?\"\":i,\"in\"===i.flow&&(i._isExcludedFromUnreadCount||i._onlineOnlyFlag||C||n[e].unreadCount++)}}return{eventDataList:n,result:r,AVChatRoomMessageList:u}}_qualityStat(e){this._groupModule.getModule(Rs).addMessageSequence({key:hn,message:e})}handleMessageList(e){e.forEach(e=>{switch(e.payload.operationType){case 1:this._onNewMemberComeIn(e);break;case 2:this._onMemberQuit(e);break;case 3:this._onMemberKickedOut(e);break;case 4:this._onMemberSetAdmin(e);break;case 5:this._onMemberCancelledAdmin(e);break;case 6:this._onGroupProfileModified(e);break;case 7:this._onMemberInfoModified(e);break;case 8:this._onTopicProfileUpdated(e);break;default:_e.w(`${this._n}.handleMessageList unknown operationType:${e.payload.operationType}`)}})}_onNewMemberComeIn(e){const{memberNum:t,groupProfile:{groupID:s}}=e.payload,o=this._groupModule.getLocalGroupProfile(s);o&&Ge(t)&&o.memberCount!==t&&(o.memberCount=t,this._updateConversationGroupProfile(o))}_onMemberQuit(e){const{memberNum:t,groupProfile:{groupID:s}}=e.payload,o=this._groupModule.getLocalGroupProfile(s);o&&Ge(t)&&o.memberCount!==t&&(o.memberCount=t,this._updateConversationGroupProfile(o));this._groupModule.getModule(hs).deleteLocalGroupMembers(s,e.payload.userIDList)}_onMemberKickedOut(e){const{memberNum:t,groupProfile:{groupID:s}}=e.payload,o=this._groupModule.getLocalGroupProfile(s);o&&Ge(t)&&o.memberCount!==t&&(o.memberCount=t,this._updateConversationGroupProfile(o));this._groupModule.getModule(hs).deleteLocalGroupMembers(s,e.payload.userIDList)}_updateConversationGroupProfile(e){this._groupModule.getModule(_s).updateConversationGroupProfile([e])}_onMemberSetAdmin(e){const s=e.payload.groupProfile.groupID,o=e.payload.userIDList,i=this._groupModule.getModule(hs);o.forEach(e=>{const o=i.getLocalGroupMemberInfo(s,e);o&&o.updateRole(t.GRP_MBR_ROLE_ADMIN)})}_onMemberCancelledAdmin(e){const s=e.payload.groupProfile.groupID,o=e.payload.userIDList,i=this._groupModule.getModule(hs);o.forEach(e=>{const o=i.getLocalGroupMemberInfo(s,e);o&&o.updateRole(t.GRP_MBR_ROLE_MEMBER)})}_onGroupProfileModified(e){const{newGroupProfile:t,groupProfile:s}=e.payload,{groupID:o}=s,i=this._groupModule.getLocalGroupProfile(o);Object.keys(t).forEach(e=>{switch(e){case\"ownerID\":this._ownerChanged(i,t);break;case\"groupName\":i.name=t[e];break;default:i[e]=t[e]}});const n=!i.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,n)}_ownerChanged({groupID:e},s){const o=this._groupModule.getLocalGroupProfile(e),i=this._groupModule.getMyUserID();if(i===s.ownerID){o.updateGroup({selfInfo:{role:t.GRP_MBR_ROLE_OWNER}});const s=this._groupModule.getModule(hs),n=s.getLocalGroupMemberInfo(e,i),r=this._groupModule.getLocalGroupProfile(e).ownerID,a=s.getLocalGroupMemberInfo(e,r);n&&n.updateRole(t.GRP_MBR_ROLE_OWNER),a&&a.updateRole(t.GRP_MBR_ROLE_MEMBER)}}_onMemberInfoModified(e){const{to:t,payload:{groupProfile:s,memberList:o}}=e,i=s.groupID;ot(t)&&this._updateTopicMuteTime(e);const n=this._groupModule.getModule(hs);o.forEach(e=>{const t=n.getLocalGroupMemberInfo(i,e.userID);t&&Ge(e.muteTime)&&t.updateMuteUntil(e.muteTime)})}_updateTopicMuteTime(t){const{to:s,payload:{groupProfile:o,memberList:i=[]}}=t,n=this._groupModule.getModule(gs),{groupID:r}=o,a=n.getLocalTopic(r,s);if(a){let t=!1;for(let e=0;e<i.length;e++){const s=i[e];if(s.userID===this._groupModule.getMyUserID()&&s.muteTime>=0){a.updateSelfInfo({muteTime:s.muteTime}),t=!0;break}}t&&this._groupModule.emitOuterEvent(e.TOPIC_UPDATED,{groupID:r,topic:a})}}_onTopicProfileUpdated(e){const{groupProfile:{groupID:t},newTopicInfo:s}=e.payload;this._groupModule.getModule(gs).onTopicProfileUpdated({groupID:t,topicID:e.to,...s})}_cacheGroupTips(e,t){this._cachedGroupTipsMap.has(e)||this._cachedGroupTipsMap.set(e,[]),this._cachedGroupTipsMap.get(e).push(t)}_deleteCachedGroupTips(e){this._cachedGroupTipsMap.has(e)&&this._cachedGroupTipsMap.delete(e)}_notifyCachedGroupTips(e){const t=this._cachedGroupTipsMap.get(e)||[];t.forEach(e=>{this.onNewGroupTips(e)}),this._deleteCachedGroupTips(e),_e.l(`${this._n}._notifyCachedGroupTips groupID:${e} count:${t.length}`)}_cacheGroupTipsAndProbe(e){const{groupID:s,event:o,item:i}=e;this._cacheGroupTips(s,{event:o,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(s).then(e=>{const{type:o}=e;o===t.GRP_AVCHATROOM?this._groupModule.hasLocalGroup(s)?this._notifyCachedGroupTips(s):this._groupModule.setUnjoinedAVChatRoom(s):(this._groupModule.updateGroupMap([e]),this._notifyCachedGroupTips(s))}),this._checkCountMap.has(s)||this._checkCountMap.set(s,0),_e.l(`${this._n}._cacheGroupTipsAndProbe groupID:${s}`)}reset(){this._cachedGroupTipsMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear()}}class pr{constructor(e){this._groupModule=e,this._n=\"CommonGroupHandler\",this.tempConversationList=null,this._cachedGroupMessageMap=new Map,this._checkCountMap=new Map,this.MAX_CHECK_COUNT=4,this._getTopicPendingMap=new Map,this._isPagingGetCompleted=!1;e.getInnerEmitterInstance().once(Kn,this._initGroupList,this)}onCheckTimer(e){e%1==0&&this._cachedGroupMessageMap.size>0&&this._checkCachedGroupMessage()}_checkCachedGroupMessage(){this._cachedGroupMessageMap.forEach((e,t)=>{let s=this._checkCountMap.get(t);const o=this._groupModule.hasLocalGroup(t);_e.l(`${this._n}._checkCachedGroupMessage groupID:${t} hasLocalGroup:${o} checkCount:${s}`),o?(this._notifyCachedGroupMessage(t),this._checkCountMap.delete(t),this._groupModule.deleteUnjoinedAVChatRoom(t)):s>=this.MAX_CHECK_COUNT?(this._deleteCachedGroupMessage(t),this._checkCountMap.delete(t)):(s++,this._checkCountMap.set(t,s))})}_initGroupList(){_e.l(this._n+\"._initGroupList\");const e=new Cn(\"getGroupListInStorage\"),t=this._groupModule.getStorageGroupList();if(be(t)&&t.length>0){t.forEach(e=>{this._groupModule.initGroupMap(e)}),this._groupModule.emitGroupListUpdate(!0,!1);const s=this._groupModule.getLocalGroupList().length;e.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:\"+s).end()}else e.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"group count:0\").end();_e.l(this._n+\"._initGroupList ok\")}handleUpdateGroupLastMessage(e){const s=this._n+\".handleUpdateGroupLastMessage\";if(_e.l(`${s} conversation count:${e.length}, local group count:${this._groupModule.getLocalGroupList().length}`),0===this._groupModule.getGroupMap().size)return void(this.tempConversationList=e);let o,i,n,r=!1;for(let a=0,u=e.length;a<u;a++)o=e[a],o.type===t.CONV_GROUP&&(i=o.conversationID.split(/^GROUP/)[1],n=this._groupModule.getLocalGroupProfile(i),n&&(n.lastMessage={...o.lastMessage},r=!0));r&&(this._groupModule.sortLocalGroupList(),this._groupModule.emitGroupListUpdate(!0,!1))}onNewGroupMessage(t){_e.d(`${this._n}.onNewGroupMessage count:${t.dataList.length}`);const{conversationOptionsList:s,messageList:o,AVChatRoomMessageList:i}=this._newGroupMessageStoredAndSummary(t);if(i.length>0&&this._groupModule.onAVChatRoomMessage(i),this._groupModule.filterModifiedMessage(o),s.length>0){this._groupModule.updateNextMessageSeq(s);this._groupModule.getModule(_s).onNewMessage({conversationOptionsList:s,isInstantMessage:t.isInstantMessage||!0,updateUnreadCount:t.updateUnreadCount||!0})}const n=this._groupModule.filterUnmodifiedMessage(o);n.length>0&&this._groupModule.emitOuterEvent(e.MESSAGE_RECEIVED,n),o.length=0}_newGroupMessageStoredAndSummary(e){const{dataList:s,event:o,isInstantMessage:i}=e;let n=null;const r=[],a=[],u=[],c={},l=this._groupModule.getModule(Cs),d=this._groupModule.getFileDownloadProxy(),p=s.length;p>1&&s.sort((e,t)=>e.sequence-t.sequence);for(let h=0;h<p;h++){const e=Ze(s[h]),{groupProfile:{groupID:p,communityType:g=0,topicID:_,invisible:m}}=e;let M=void 0;const f=this._groupModule.isMessageFromTopic(g,_);if(f){M=t.CONV_TOPIC,e.to=_;const s=this._groupModule.getModule(gs);s.hasLocalTopic(p,_)||this._getTopicPendingMap.has(_)||(this._getTopicPendingMap.set(_,1),s.getTopicList({groupID:p,topicIDList:[_]}).finally(()=>{this._getTopicPendingMap.delete(_)}))}const I=this._groupModule.hasLocalGroup(p);if(!I&&this._groupModule.isUnjoinedAVChatRoom(p))continue;if(!I&&!f){this._cacheGroupMessageAndProbe({groupID:p,event:o,item:e});continue}if(this._groupModule.isMessageFromOrToAVChatroom(p)){e.event=o,u.push(e);continue}if(e.currentUser=this._groupModule.getMyUserID(),e.conversationType=t.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage,n=new bn(e),e.elements=l.parseElements(e.elements,e.from),n.setElement(e.elements,d),1===m){this._qualityStat(i,n);continue}let C=1===s[h].isModified;const T=this._groupModule.getModule(_s);if(T.isMessageSentByCurrentInstance(n)?n.isModified=C:C=!1,1===e.onlineOnlyFlag)n._onlineOnlyFlag=!0,T.isMessageSentByCurrentInstance(n)||a.push(n);else{if(this._groupModule.isMessageFromCommunityOfTopic(g,_)){a.push(n);continue}if(!T.pushIntoMessageList(a,n,C))continue;this._qualityStat(i,n);const{conversationID:e,sequence:t}=n,s=T.isRemoteRead({conversationID:e,sequence:t});if(we(c[e])){let t=0;\"in\"===n.flow&&(n._isExcludedFromUnreadCount||s||(t=1)),c[e]=r.push({conversationID:e,unreadCount:t,type:we(M)?n.conversationType:M,subType:n.conversationSubType,lastMessage:n._isExcludedFromLastMessage?\"\":n})-1}else{const t=c[e];r[t].type=we(M)?n.conversationType:M,r[t].subType=n.conversationSubType,r[t].lastMessage=n._isExcludedFromLastMessage?\"\":n,\"in\"===n.flow&&(n._isExcludedFromUnreadCount||s||r[t].unreadCount++)}}}return{conversationOptionsList:r,messageList:a,AVChatRoomMessageList:u}}_qualityStat(e,t){const s=this._groupModule.getModule(Rs);s.addMessageSequence({key:hn,message:t}),e&&t.clientTime>0&&s.addMessageDelay(t.clientTime)}onGroupMessageRevoked(t){const s=this._groupModule.getModule(_s),o=[];let i=null,n=!0;t.dataList.forEach(e=>{const{revokedInfos:t}=e.elements;we(t)||t.forEach(e=>{const t=Lt(e.topicID)?\"GROUP\"+e.groupID:\"GROUP\"+e.topicID;i=s.revoke(t,e.sequence,e.random);const r=e.revokerInfo&&e.revokerInfo.revoker;if(i)i.revoker=r,o.push(i);else{const i={conversationID:t,to:e.topicID||\"\",sequence:e.sequence,time:e.time,revoker:r};s.isLastMessageRevoked(i)&&(o.push(i),n=!1)}})}),0!==o.length&&(s.onMessageRevoked(o),!0===n&&(_e.l(`${this._n}.onGroupMessageRevoked count:${o.length}`),this._groupModule.emitOuterEvent(e.MESSAGE_REVOKED,o)))}_groupListTreeShaking(e){const t=new Map([...this._groupModule.getGroupMap()]);for(let o=0,i=e.length;o<i;o++)t.delete(e[o].groupID);if(this._groupModule.hasJoinedAVChatRoom()){this._groupModule.getJoinedAVChatRoom().forEach(e=>{t.delete(e)})}this._groupModule.getGroupMap().forEach((e,s)=>{e.isSupportTopic&&t.delete(s)});const s=[...t.keys()];for(let o=0,i=s.length;o<i;o++)this._groupModule.deleteGroup(s[o])}getGroupList(e){const t=this._n+\".getGroupList\",s=new Cn(\"getGroupList\");_e.l(\"\"+t);const o={introduction:\"Introduction\",notification:\"Notification\",createTime:\"CreateTime\",ownerID:\"Owner_Account\",lastInfoTime:\"LastInfoTime\",memberNum:\"MemberNum\",maxMemberNum:\"MaxMemberNum\",joinOption:\"ApplyJoinOption\",inviteOption:\"InviteJoinOption\",muteAllMembers:\"ShutUpAllMember\"},i=[\"Type\",\"Name\",\"FaceUrl\",\"NextMsgSeq\",\"LastMsgTime\",\"AtInfoList\",\"LastRecallTime\"],n=[];e&&e.groupProfileFilter&&e.groupProfileFilter.forEach(e=>{o[e]&&i.push(o[e])});const{isGroupWithTopicOnly:r=!1}=e||{};return this._pagingGetGroupList({limit:50,offset:0,groupBaseInfoFilter:i,groupList:n,isGroupWithTopicOnly:r}).then(()=>{_e.l(`${t} ok. count:${n.length} isGroupWithTopicOnly:${r}`),r||this._groupListTreeShaking(n),this._groupModule.updateGroupMap(n);const e=this._groupModule.getLocalGroupList().length;s.setNetworkType(this._groupModule.getNetworkType()).setMessage(`remote count:${n.length}, after tree shaking, local count:${e}, isGroupWithTopicOnly:${r}`).end(),this.tempConversationList&&(this.handleUpdateGroupLastMessage(this.tempConversationList),this.tempConversationList=null),this._groupModule.patchGroupMessageRemindType(),this._groupModule.recomputeUnreadCount(),this._groupModule.emitGroupListUpdate(!0,!r);const o=this._groupModule.getLocalGroupList();if(r){const e=o.filter(e=>!0===e.isSupportTopic);return wn({groupList:e})}return this._isPagingGetCompleted=!0,wn({groupList:o})}).catch(e=>(this._groupModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}isPagingGetCompleted(){return this._isPagingGetCompleted}_pagingGetGroupList(e){const s=this._n+\"._pagingGetGroupList\";let{isCommunityRelay:o=!1,isGroupWithTopicOnly:i=!1,limit:n,offset:r,groupBaseInfoFilter:a,groupList:u}=e;if(i)return this._pagingGetGroupListWithTopic({limit:n,offset:r,groupBaseInfoFilter:a,groupList:u});let c=new Cn(\"_pagingGetGroupList\");return this._groupModule.request({protocolName:wo,requestData:{type:o?t.GRP_COMMUNITY:void 0,memberAccount:this._groupModule.getMyUserID(),limit:n,offset:r,responseFilter:{groupBaseInfoFilter:a,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\",\"MsgSeq\"]}}}).then(e=>{const{groups:t=[],totalCount:i}=e.data;u.push(...t),this._handleGroupAtInfoWithoutTopic(o,t);const l=r+n,d=!(i>l),p=`offset:${r} totalCount:${i} isCompleted:${d} currentCount:${u.length} isCommunityRelay:${o}`;return c.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"\"+p).end(),o||d?!o&&d?(_e.l(s+\" start to get community list\"),r=0,this._pagingGetGroupList({limit:n,offset:r,groupBaseInfoFilter:a,groupList:u,isCommunityRelay:!0})):o&&!d?(r=l,this._pagingGetGroupList({limit:n,offset:r,groupBaseInfoFilter:a,groupList:u,isCommunityRelay:!0})):(_e.l(`${s} ok. totalCount:${u.length}`),wn({groupList:u})):(r=l,this._pagingGetGroupList({limit:n,offset:r,groupBaseInfoFilter:a,groupList:u}))}).catch(e=>(11e3!==e.code&&this._groupModule.probeNetwork().then(([t,s])=>{c.setMessage(\"isCommunityRelay:\"+o).setError(e,t,s).end()}),o?(11e3===e.code&&(c=null,_e.l(s+\" ok. community unavailable\")),xn({groupList:u})):Vn(e)))}_pagingGetGroupListWithTopic(e){const s=this._n+\"._pagingGetGroupListWithTopic\";let{limit:o,offset:i,groupBaseInfoFilter:n,groupList:r}=e;const a=new Cn(\"pagingGetGroupListWithTopic\");return this._groupModule.request({protocolName:wo,requestData:{type:t.GRP_COMMUNITY,memberAccount:this._groupModule.getMyUserID(),limit:o,offset:i,responseFilter:{groupBaseInfoFilter:n,selfInfoFilter:[\"Role\",\"JoinTime\",\"MsgFlag\",\"MsgSeq\"]},isSupportTopic:1}}).then(e=>{const{groups:t=[],totalCount:u}=e.data;r.push(...t);const c=i+o,l=!(u>c),d=`offset:${i} totalCount:${u} isCompleted:${l} currentCount:`+r.length;return a.setNetworkType(this._groupModule.getNetworkType()).setMessage(\"\"+d).end(),l?(_e.l(`${s} ok. totalCount:${r.length}`),wn({groupList:r})):(i=c,this._pagingGetGroupListWithTopic({limit:o,offset:i,groupBaseInfoFilter:n,groupList:r}))}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),Vn(e)))}_cacheGroupMessage(e,t){this._cachedGroupMessageMap.has(e)||this._cachedGroupMessageMap.set(e,[]),this._cachedGroupMessageMap.get(e).push(t)}_deleteCachedGroupMessage(e){this._cachedGroupMessageMap.has(e)&&this._cachedGroupMessageMap.delete(e)}_notifyCachedGroupMessage(e){const t=this._cachedGroupMessageMap.get(e)||[];t.forEach(e=>{this.onNewGroupMessage(e)}),this._deleteCachedGroupMessage(e),_e.l(`${this._n}._notifyCachedGroupMessage groupID:${e} count:${t.length}`)}_cacheGroupMessageAndProbe(e){const{groupID:s,event:o,item:i}=e;this._cacheGroupMessage(s,{event:o,dataList:[i]}),this._groupModule.getGroupSimplifiedInfo(s).then(e=>{const{type:o}=e;o===t.GRP_AVCHATROOM?this._groupModule.hasLocalGroup(s)?this._notifyCachedGroupMessage(s):this._groupModule.setUnjoinedAVChatRoom(s):(this._groupModule.updateGroupMap([e]),this._notifyCachedGroupMessage(s))}),this._checkCountMap.has(s)||this._checkCountMap.set(s,0),_e.l(`${this._n}._cacheGroupMessageAndProbe groupID:${s}`)}_handleGroupAtInfoWithoutTopic(e,t){e&&0!==t.length&&t.forEach(e=>{const{groupID:t,groupAtInfoList:s}=e,o=[];if(!we(s)){s.forEach(e=>{o.push({...e,groupID:t})});this._groupModule.getModule(_s).onNewGroupAtTips({dataList:o})}})}reset(){this._cachedGroupMessageMap.clear(),this._checkCountMap.clear(),this._getTopicPendingMap.clear(),this._isPagingGetCompleted=!1;this._groupModule.getInnerEmitterInstance().once(Kn,this._initGroupList,this)}}const hr=1,gr=2,_r=3,mr=4,Mr=5;class fr{constructor(e){this._groupModule=e,this._n=\"GroupAttributesHandler\",this._groupAttributesMap=new Map,this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4;this._groupModule.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){const e=this._groupModule.getCloudConfig(\"grp_attr_cache_time\");we(e)||(this.CACHE_EXPIRE_TIME=Number(e))}updateLocalMainSequenceOnReconnected(){this._groupAttributesMap.forEach(e=>{e.localMainSequence=0})}isGroupAttributesUpdatedNotice(e){const{to:t,elements:{newGroupProfile:s}}=e,o=!we(s)&&!Lt(s.groupAttributeOption);return o&&this._onGroupAttributesUpdated({groupID:t,groupAttributeOption:s.groupAttributeOption}),o}_onGroupAttributesUpdated(e){const{groupID:t,groupAttributeOption:s}=e,{mainSequence:o,isWithChangedAttributeInfo:i,groupAttributeList:n=[],operationType:r}=s;if(_e.l(this._n+\".onGroupAttributesUpdated. \"+`groupID:${t} isWithChangedAttributeInfo:${i} operationType:${r}`),we(r))return;this._groupAttributesCopy=this._getCachedAttributes({groupID:t});const{localMainSequence:a}=this._getLocalGroupAttributes(t),u=o-a;if(0!==u){if(1===i&&1===u)return this._refreshCachedGroupAttributes({groupID:t,remoteMainSequence:o,groupAttributeList:n,operationType:r}),void this._emitGroupAttributesUpdated(t);if(this._hasLocalGroupAttributes(t)){const{avChatRoomKey:e}=this._getLocalGroupAttributes(t);this._getGroupAttributes({groupID:t,avChatRoomKey:e}).then(()=>{this._emitGroupAttributesUpdated(t)})}}}initGroupAttributesCache(e){const{groupID:t,avChatRoomKey:s}=e;this._groupAttributesMap.set(t,{lastUpdateTime:0,localMainSequence:0,remoteMainSequence:0,attributes:new Map,avChatRoomKey:s}),_e.l(`${this._n}.initGroupAttributesCache groupID:${t} avChatRoomKey:${s}`)}initGroupAttributes(e){const{groupID:t,groupAttributes:s}=e,{remoteMainSequence:o,avChatRoomKey:i}=this._getLocalGroupAttributes(t),n=new Cn(\"initGroupAttributes\");return n.setMessage(`groupID:${t} avChatRoomKey:${i} mainSequence:${o}`),this._groupModule.request({protocolName:di,requestData:{groupID:t,avChatRoomKey:i,mainSequence:o,groupAttributeList:this._transformGroupAttributes(s)}}).then(e=>{_e.l(`${this._n}.initGroupAttributes ok. groupID:${t}`);const{mainSequence:o,groupAttributeList:i}=e.data,r=[...i];return r.forEach(e=>{e.value=s[e.key]}),this._groupAttributesCopy=this._getCachedAttributes({groupID:t}),this._refreshCachedGroupAttributes({groupID:t,remoteMainSequence:o,groupAttributeList:r,operationType:hr}),this._emitGroupAttributesUpdated(t),n.setNetworkType(this._groupModule.getNetworkType()).end(),wn({groupAttributes:s})}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),Vn(e)))}setGroupAttributes(e){const t=this._n+\".setGroupAttributes\",{groupID:s,groupAttributes:o}=e,{remoteMainSequence:i,avChatRoomKey:n,attributes:r}=this._getLocalGroupAttributes(s),a=this._transformGroupAttributes(o);a.forEach(e=>{const{key:t}=e;e.sequence=0,r.has(t)&&(e.sequence=r.get(t).sequence)});const u=new Cn(\"setGroupAttributes\");return u.setMessage(`groupID:${s} groupAttributes:${JSON.stringify(o)}`),_e.l(`${t}. groupID:${s} mainSequence:${i}`),this._groupModule.request({protocolName:pi,requestData:{groupID:s,avChatRoomKey:n,mainSequence:i,groupAttributeList:a}}).then(e=>{_e.l(t+\" ok.\");const{mainSequence:i,groupAttributeList:n}=e.data,r=[...n];return r.forEach(e=>{e.value=o[e.key]}),this._groupAttributesCopy=this._getCachedAttributes({groupID:s}),this._refreshCachedGroupAttributes({groupID:s,remoteMainSequence:i,groupAttributeList:r,operationType:gr}),this._emitGroupAttributesUpdated(s),u.setNetworkType(this._groupModule.getNetworkType()).end(),wn({groupAttributes:o})}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),Vn(e)))}deleteGroupAttributes(e){const{groupID:t,keyList:s=[]}=e,{remoteMainSequence:o,avChatRoomKey:i,attributes:n}=this._getLocalGroupAttributes(t);let r=[...n.keys()],a=gi,u=_r;const c={groupID:t,avChatRoomKey:i,mainSequence:o},l=[];s.length>0&&(r=[],a=hi,u=mr,s.forEach(e=>{let t=0;n.has(e)&&(t=n.get(e).sequence,r.push(e)),l.push({key:e,sequence:t})}),c.groupAttributeList=l);const d=new Cn(\"deleteGroupAttributes\");return d.setMessage(`groupID:${t} mainSequence:${o} keyList:${s} protocolName:${a}`),this._groupModule.request({protocolName:a,requestData:c}).then(e=>{_e.l(`${this._n}.deleteGroupAttributes ok. groupID:${t}`);const{mainSequence:s}=e.data;return this._groupAttributesCopy=this._getCachedAttributes({groupID:t}),this._refreshCachedGroupAttributes({groupID:t,remoteMainSequence:s,groupAttributeList:l,operationType:u}),this._emitGroupAttributesUpdated(t),d.setNetworkType(this._groupModule.getNetworkType()).end(),wn({keyList:r})}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{d.setError(e,t,s).end()}),Vn(e)))}getGroupAttributes(e){const t=this._n+\".getGroupAttributes\",{groupID:s}=e,{avChatRoomKey:o,lastUpdateTime:i,localMainSequence:n,remoteMainSequence:r}=this._getLocalGroupAttributes(s),a=new Cn(\"getGroupAttributes\");if(a.setMessage(`groupID:${s} localMainSequence:${n} remoteMainSequence:${r} keyList:${e.keyList}`),Date.now()-i>=this.CACHE_EXPIRE_TIME||n<r)return this._getGroupAttributes({groupID:s,avChatRoomKey:o}).then(o=>{a.setMoreMessage(\"get attributes from remote. count:\"+o.length).setNetworkType(this._groupModule.getNetworkType()).end(),_e.l(`${t} from remote. groupID:${s}`);const i=this._getCachedAttributes(e);return wn({groupAttributes:i})}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),Vn(e)));a.setMoreMessage(\"get attributes from cache\").setNetworkType(this._groupModule.getNetworkType()).end(),_e.l(`${t} from cache. groupID:${s}`);const u=this._getCachedAttributes(e);return xn({groupAttributes:u})}_getGroupAttributes(e){let t=0;return we(e.avChatRoomKey)||(t=1),this._groupModule.request({protocolName:_i,requestData:{...e,groupType:t}}).then(t=>{_e.l(`${this._n}._getGroupAttributes ok. groupID:${e.groupID}`);const{mainSequence:s,groupAttributeList:o}=t.data,i=[...o];return we(s)||this._refreshCachedGroupAttributes({groupID:e.groupID,remoteMainSequence:s,groupAttributeList:i,operationType:Mr}),o}).catch(e=>Vn(e))}_refreshCachedGroupAttributes(e){const{groupID:t,remoteMainSequence:s,groupAttributeList:o,operationType:i}=e;if(this._hasLocalGroupAttributes(t)){const e=this._getLocalGroupAttributes(t),{localMainSequence:n}=e;if(i===Mr||s-n==1)e.remoteMainSequence=s,e.localMainSequence=s,e.lastUpdateTime=Date.now(),this._updateCachedAttributes({groupAttributes:e,groupAttributeList:o,operationType:i});else{if(n===s)return;e.remoteMainSequence=s}this._groupAttributesMap.set(t,e);const r=`operationType:${i} localMainSequence:${n} remoteMainSequence:${s}`;_e.l(`${this._n}._refreshCachedGroupAttributes. ${r}`)}}_getCachedAttributes(e){const{groupID:t,keyList:s=[]}=e,o={};if(this._hasLocalGroupAttributes(t)){const{attributes:e}=this._getLocalGroupAttributes(t);if(s.length>0)s.forEach(t=>{e.has(t)&&(o[t]=e.get(t).value)});else for(const t of e.keys())o[t]=e.get(t).value}return o}_updateCachedAttributes(e){const{groupAttributes:t,groupAttributeList:s,operationType:o}=e;o!==_r?o!==mr?(o===hr&&t.attributes.clear(),s.forEach(e=>{const{key:s,value:o,sequence:i}=e;t.attributes.set(s,{value:o,sequence:i})})):s.forEach(e=>{t.attributes.delete(e.key)}):t.attributes.clear()}_hasLocalGroupAttributes(e){return this._groupAttributesMap.has(e)}_getLocalGroupAttributes(e){return this._hasLocalGroupAttributes(e)||this.initGroupAttributesCache({groupID:e}),this._groupAttributesMap.get(e)}_transformGroupAttributes(e){const t=[];return Object.keys(e).forEach(s=>{t.push({key:s,value:e[s]})}),t}_emitGroupAttributesUpdated(t){const s=this._getCachedAttributes({groupID:t}),{updatedKeyList:o,deletedKeyList:i}=this._computeAttrChangedInfo(s);_e.l(`${this._n}._emitGroupAttributesUpdated update:${o.length}, delete:${i.length}`),0===o.length&&0===i.length||this._groupModule.emitOuterEvent(e.GROUP_ATTRIBUTES_UPDATED,{groupID:t,groupAttributes:s,updatedKeyList:o,deletedKeyList:i})}_computeAttrChangedInfo(e){const t=[],s=[];return Object.keys(e).forEach(s=>{e[s]!==this._groupAttributesCopy[s]&&t.push(s)}),Object.keys(this._groupAttributesCopy).forEach(t=>{we(e[t])&&s.push(t)}),this._groupAttributesCopy={},{updatedKeyList:t,deletedKeyList:s}}deleteLocalGroupAttributes(e){this._hasLocalGroupAttributes(e)&&this._groupAttributesMap.delete(e)}reset(){this._groupAttributesMap.clear(),this._groupAttributesCopy={},this.CACHE_EXPIRE_TIME=3e4}}const Ir=\"Set\",Cr=\"Increase\",Tr=\"Decrease\";class yr{constructor(e){this._groupModule=e,this._n=\"GroupCountersHandler\",this._groupCountersMap=new Map,this.EXPIRE_TIME=3e4;this._groupModule.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){const e=this._groupModule.getCloudConfig(\"grp_counter_expire_time\");we(e)||(this.EXPIRE_TIME=Number(e))}isGroupCountersNotice(e){const{to:t,elements:{groupCounterInfo:s}}=e;let o=!1;return Lt(s)||(this._onGroupCountersUpdated({groupID:t,groupCounterInfo:s}),o=!0),o}_onGroupCountersUpdated(t){const{groupID:s,groupCounterInfo:o}=t;o.forEach(t=>{const{type:o,groupCounterSeq:i,counterList:n=[]}=t;0!==o&&2!==o||(this._updateLocalGroupCounters({groupID:s,groupCounterSeq:i,counterList:n}),n.forEach(t=>{this._groupModule.emitOuterEvent(e.GROUP_COUNTER_UPDATED,{groupID:s,key:t.key,value:t.value})})),1===o&&this._deleteLocalGroupCounters({groupID:s,groupCounterSeq:i,counterList:n})}),_e.l(`${this._n}._onGroupCountersUpdated groupID:${s}`)}initGroupCountersCache(e){const{groupID:t,avChatRoomKey:s}=e;this._groupCountersMap.set(t,{lastUpdateTime:0,groupCounterSeq:0,counters:new Map,avChatRoomKey:s}),_e.l(`${this._n}.initGroupCountersCache groupID:${t} avChatRoomKey:${s}`)}setGroupCounters(e){if(!this._groupModule.canIUse(M.GRP_COUNTER))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".setGroupCounters\",{groupID:s,counters:o}=e,i=this._convertObjectToList(o),{avChatRoomKey:n}=this._getLocalGroupCounters(s),r=`groupID:${s} count:${i.length}`,a=new Cn(\"setGroupCounters\");return a.setMessage(\"\"+r),_e.l(`${t}. ${r}`),this._updateGroupCounters({groupID:s,counterList:i,avChatRoomKey:n,mode:Ir}).then(e=>(a.end(),_e.l(t+\" ok.\"),wn({counters:e}))).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}increaseGroupCounter(e){if(!this._groupModule.canIUse(M.GRP_COUNTER))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".increaseGroupCounters\",{groupID:s,key:o,value:i}=e,{avChatRoomKey:n}=this._getLocalGroupCounters(s),r=`groupID:${s} key:${o} value:${i}`,a=new Cn(\"increaseGroupCounter\");a.setMessage(\"\"+r),_e.l(`${t}. ${r}`);const u=[{key:o,value:i}];return this._updateGroupCounters({groupID:s,counterList:u,avChatRoomKey:n,mode:Cr}).then(e=>(a.end(),_e.l(t+\" ok.\"),wn({counters:e}))).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}decreaseGroupCounter(e){if(!this._groupModule.canIUse(M.GRP_COUNTER))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".decreaseGroupCounter\",{groupID:s,key:o,value:i}=e,{avChatRoomKey:n}=this._getLocalGroupCounters(s),r=`groupID:${s} key:${o} value:${i}`,a=new Cn(\"decreaseGroupCounter\");a.setMessage(\"\"+r),_e.l(`${t}. ${r}`);const u=[{key:o,value:i}];return this._updateGroupCounters({groupID:s,counterList:u,avChatRoomKey:n,mode:Tr}).then(e=>(a.end(),_e.l(t+\" ok.\"),wn({counters:e}))).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}getGroupCounters(e){if(!this._groupModule.canIUse(M.GRP_COUNTER))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".getGroupCounters\",{groupID:s,keyList:o=[]}=e,{avChatRoomKey:i,lastUpdateTime:n}=this._getLocalGroupCounters(s),r=new Cn(\"getGroupCounters\");if(r.setMessage(\"groupID:\"+s),Date.now()-n>=this.EXPIRE_TIME)return this._getRemoteGroupCounters({groupID:s,avChatRoomKey:i}).then(e=>{r.setMoreMessage(\"from remote. count:\"+e.length).end(),_e.l(`${t} from remote. groupID:${s}`);const i=this._getLocalCounters(s,o);return wn({counters:i})}).catch(e=>(this._groupModule.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),Vn(e)));r.setMoreMessage(\"from cache\").end(),_e.l(`${t} from cache. groupID:${s}`);const a=this._getLocalCounters(s,o);return xn({counters:a})}_getRemoteGroupCounters(e){return this._groupModule.request({protocolName:Ci,requestData:{...e}}).then(t=>{const{counterList:s=[],groupCounterSeq:o}=t.data;return this._updateLocalGroupCounters({groupID:e.groupID,counterList:s,groupCounterSeq:o}),_e.l(`${this._n}._getRemoteGroupCounters ok. groupID:${e.groupID}`),s}).catch(e=>Vn(e))}_convertObjectToList(e){const t=[];return Object.keys(e).forEach(s=>{t.push({key:s,value:e[s]})}),t}_updateGroupCounters(e){const t=this._n+\"._updateGroupCounters\",{groupID:s,avChatRoomKey:o,mode:i}=e;return _e.l(`${t}. groupID:${s} avChatRoomKey:${o} mode:${i}`),this._groupModule.request({protocolName:Ii,requestData:{...e}}).then(e=>{_e.l(t+\" ok.\");const{counterList:s=[]}=e.data,o={};return s.forEach(e=>{const{key:t,value:s}=e;o[t]=s}),o}).catch(e=>Vn(e))}_hasLocalGroupCounters(e){return this._groupCountersMap.has(e)}_getLocalGroupCounters(e){return this._hasLocalGroupCounters(e)||this.initGroupCountersCache({groupID:e}),this._groupCountersMap.get(e)}_updateLocalGroupCounters(e){const{groupID:t,counterList:s=[],groupCounterSeq:o}=e;if(this._hasLocalGroupCounters(t)){const{counters:e,avChatRoomKey:i,groupCounterSeq:n}=this._getLocalGroupCounters(t);if(o>0&&o<n)return;s.forEach(t=>{const{key:s,value:o}=t;e.set(s,o)}),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:o,counters:e,avChatRoomKey:i})}}_deleteLocalGroupCounters(e){const{groupID:t,counterList:s=[],groupCounterSeq:o}=e;if(this._hasLocalGroupCounters(t)){const{counters:e,avChatRoomKey:i}=this._getLocalGroupCounters(t);s.forEach(t=>{e.delete(t.key)}),this._groupCountersMap.set(t,{lastUpdateTime:Date.now(),groupCounterSeq:o,counters:e,avChatRoomKey:i})}}_getLocalCounters(e,t){const s={};if(!this._hasLocalGroupCounters(e))return s;const{counters:o}=this._getLocalGroupCounters(e);if(t.length>0)t.forEach(e=>{o.has(e)&&(s[e]=o.get(e))});else for(const i of o.keys())s[i]=o.get(i);return s}reset(){this._groupCountersMap.clear(),this.EXPIRE_TIME=3e4}}class Dr{constructor(e){const{manager:t,groupID:s,onInit:o,onSuccess:i,onFail:n}=e;this._n=\"Polling\",this._manager=t,this._groupModule=t._groupModule,this._onInit=o,this._onSuccess=i,this._onFail=n,this._groupID=s,this._timeoutID=-1,this._isRunning=!1,this._protocolName=ri}start(){const e=this._groupModule.isLoggedIn();e||(this._protocolName=ai),_e.l(`${this._n}.start pollingInterval:${this._manager.getPollingInterval()} isLoggedIn:${e}`),this._isRunning=!0,this._request()}isRunning(){return this._isRunning}_request(){const e=this._onInit(this._groupID);this._groupModule.request({protocolName:this._protocolName,requestData:e}).then(e=>{this._onSuccess(this._groupID,e),this.isRunning()&&(clearTimeout(this._timeoutID),this._timeoutID=setTimeout(this._request.bind(this),this._manager.getPollingInterval()))}).catch(e=>{this._onFail(this._groupID,e),this.isRunning()&&(clearTimeout(this._timeoutID),this._timeoutID=setTimeout(this._request.bind(this),this._manager.MAX_POLLING_INTERVAL))})}stop(){_e.l(this._n+\".stop\"),this._timeoutID>0&&(clearTimeout(this._timeoutID),this._timeoutID=-1),this._isRunning=!1}getPollingTimerID(){return this._timeoutID}}const Er={3:!0,4:!0,5:!0,6:!0,17:!0};class Sr{constructor(e){this._groupModule=e,this._n=\"AVChatRoomHandler\",this._joinedGroupMap=new Map,this._pollingRequestInfoMap=new Map,this._pollingInstanceMap=new Map,this.sequencesLinkedList=new or(200),this.messageIDLinkedList=new or(100),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._onlineMemberCountMap=new Map,this.DEFAULT_EXPIRE_TIME=60,this.DEFAULT_POLLING_INTERVAL=300,this.MAX_POLLING_INTERVAL=2e3,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0,this._startBroadcastSeq=1,this._broadcastMessageIDMap=new Map,this.DEFAULT_POLLING_SIMPLIFIED_MSG=0}hasJoinedAVChatRoom(){return this._joinedGroupMap.size>0}checkJoinedAVChatRoomByID(e){return this._joinedGroupMap.has(e)}getJoinedAVChatRoom(){return this._joinedGroupMap.size>0?[...this._joinedGroupMap.keys()]:null}_updateRequestData(e){const t=this._pollingRequestInfoMap.get(e);return e===[...this._pollingInstanceMap.keys()][0]?{...t,startBroadcastSeq:this._startBroadcastSeq,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}:{...t,simplifiedMessage:this.DEFAULT_POLLING_SIMPLIFIED_MSG}}_handleSuccess(e,t){const{key:s,nextSeq:o,rspMsgList:i,errorCode:n,nextBroadcastSeq:r,broadcastMessageList:a}=t.data;if(0!==n){const s=this._pollingRequestInfoMap.get(e),o=new Cn(\"longPollingAVError\"),i=s?`${s.key}-${s.startSeq}`:\"requestInfo is undefined\";o.setMessage(`${e}-${i}-${t.errorInfo}`).setCode(t.errorCode).setNetworkType(this._groupModule.getNetworkType()).end(!0)}else{if(!this.checkJoinedAVChatRoomByID(e))return;Ue(s)&&Ge(o)&&this._pollingRequestInfoMap.set(e,{key:s,startSeq:o}),Ge(r)&&r>this._startBroadcastSeq&&(this._startBroadcastSeq=r),be(i)&&i.length>0?(i.forEach(e=>{e.to=e.groupID}),this.onMessage(i)):(this._pollingNoMessageCount+=1,this._pollingNoMessageCount===this.DEFAULT_POLLING_NO_MESSAGE_COUNT&&(this._pollingInterval=this.DEFAULT_POLLING_INTERVAL+this.DEFAULT_POLLING_INTERVAL_PLUS)),this._onBroadcastMessage(a)}}_handleFailure(e,t){}onMessage(s){if(!be(s)||0===s.length)return;0!==this._pollingNoMessageCount&&(this._pollingNoMessageCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL);let o=null;const i=[],n=this._getModule(_s),r=this._getModule(Rs),a=s.length;a>1&&s.sort((e,t)=>e.sequence-t.sequence);const u=this._getModule(ms);for(let e=0;e<a;e++){const a=this.restoreMessageFromSimplified(s[e]);if(!Er[a.event]){_e.w(`${this._n}.onMessage unknown event:${a.event}`);continue}if(6===a.event){if(this._groupModule.isGroupAttributesUpdatedNotice(a))continue;if(this._groupModule.isGroupCountersNotice(a))continue}this.receivedMessageCount+=1,o=this.packMessage(a,a.event);const c=1===a.isModified,l=1===a.isHistoryMessage;if(!u.isUnlimitedAVChatRoom()&&this.sequencesLinkedList.has(o.sequence))continue;if(this.messageIDLinkedList.has(o.ID))continue;const{conversationID:d}=o;if(this.receivedMessageCount%50==0?this._getModule(Ls).detectFirstRound(d,this.sequencesLinkedList.data()):this.receivedMessageCount%80==0&&this._getModule(Ls).detectSecondRound(d,this.sequencesLinkedList.data()),null!==this.sequencesLinkedList.tail()){const e=this.sequencesLinkedList.tail().value,t=o.sequence-e;t>1&&t<=20?this._getModule(Ls).onMessageMaybeLost(d,e+1,t-1):t<-1&&t>=-20&&this._getModule(Ls).onMessageMaybeLost(d,o.sequence+1,Math.abs(t)-1)}this.sequencesLinkedList.set(o.sequence),this.messageIDLinkedList.set(o.ID);let p=!1;if(this._isMessageSentByCurrentInstance(o)?c&&(p=!0,o.isModified=c,n.updateMessageIsModifiedProperty(o)):p=!0,p){if(o.conversationType===t.CONV_SYSTEM&&5===o.payload.operationType&&this._onGroupDismissed(o.payload.groupProfile.groupID),!l&&o.conversationType!==t.CONV_SYSTEM){const e=o.conversationID.replace(t.CONV_GROUP,\"\");this._pollingInstanceMap.has(e)?this._groupModule.isLoggedIn()&&r.addMessageSequence({key:_n,message:o}):(o.type!==t.MSG_GRP_TIP&&o.clientTime>0&&r.addMessageDelay(o.clientTime),r.addMessageSequence({key:gn,message:o}))}i.push(o)}}if(0===i.length)return;this._groupModule.filterModifiedMessage(i);const c=this.packConversationOption(i);if(c.length>0){this._getModule(_s).onNewMessage({conversationOptionsList:c,isInstantMessage:!0})}_e.d(`${this._n}.onMessage count:${i.length}`),this._checkMessageStacked(i);const l=this._groupModule.filterUnmodifiedMessage(i);l.length>0&&this._groupModule.emitOuterEvent(e.MESSAGE_RECEIVED,l),i.length=0}isBroadcastOrNormal(e){return 3===e||17===e}isGroupTip(e){return 4===e||6===e}isGroupSystemNotice(e){return 5===e}restoreGroupTipElements(e={}){e.groupJoinType||(e.groupJoinType=1);const{operatorInfo:t={},operatorID:s,userIDList:o=[]}=e,{userID:i=s,avatar:n=\"\",nick:r=\"\"}=t;e.operatorInfo={userID:i,avatar:n,nick:r};const a=o.map(e=>({userID:e}));return e.memberInfoList=e.memberInfoList||a,e}restoreMessageFromSimplified(e){const{event:s}=e;if(this.isBroadcastOrNormal(s)&&(e.cloudCustomData=e.cloudCustomData||\"\",e.elements=e.elements.map(e=>{if(e.type===t.MSG_CUSTOM){const{content:t={}}=e;e.content={data:\"\",description:\"\",extension:\"\",...t}}return e})),(this.isGroupTip(s)||this.isGroupSystemNotice(s))&&(e.from=e.from||\"@TIM#SYSTEM\"),this.isGroupTip(s)){e.elements=this.restoreGroupTipElements(e.elements);const{elements:t={}}=e,{operationType:s,operatorInfo:o={}}=t;if(1===s){const e=[{userID:o.userID}];t.memberInfoList=t.memberInfoList||e}}if(this.isGroupSystemNotice(s)){let{memberInfoList:t,operatorInfo:s={}}=e.elements;t||(t=s),e.elements.memberInfoList={userID:e.elements.operatorID,avatar:\"\",nick:\"\",...t},e.elements={authentication:\"\",remarkInfo:\"\",messageKey:1e3*e.time,...e.elements};const o=Object.keys(e.elements).filter(e=>\"operatorInfo\"!==e).reduce((t,s)=>({...t,[s]:e.elements[s]}),{});e.elements=o}return e}_onGroupDismissed(e){_e.l(`${this._n}._onGroupDismissed groupID:${e}`),this._groupModule.deleteLocalGroupAndConversation(e),this.reset(e)}_checkMessageStacked(e){const t=\"MessageStacked\",s=e.length;if(s>=100&&(this._groupModule.outputWarning(t,s),this._reportMessageStackedCount<5)){new Cn(t).setNetworkType(this._groupModule.getNetworkType()).setMessage(`count:${s} groupID:${[...this._joinedGroupMap.keys()]}`).setLevel(\"warning\").end(),this._reportMessageStackedCount+=1}}_isMessageSentByCurrentInstance(e){return!!this._getModule(_s).isMessageSentByCurrentInstance(e)}packMessage(e,s){e.currentUser=this._groupModule.getMyUserID(),e.conversationType=5===s?t.CONV_SYSTEM:t.CONV_GROUP,e.isSystemMessage=!!e.isSystemMessage;const o=new bn(e),i=this.packElements(e,s);return o.setElement(i,this._groupModule.getFileDownloadProxy()),o}packElements(e,s){if(4===s||6===s)return this._updateMemberCountByGroupTips(e),{type:t.MSG_GRP_TIP,content:{...e.elements,groupProfile:e.groupProfile}};if(5===s)return{type:t.MSG_GRP_SYS_NOTICE,content:{...e.elements,groupProfile:{...e.groupProfile,groupID:e.groupID}}};return this._getModule(Cs).parseElements(e.elements,e.from)}packConversationOption(e){const t=new Map;for(let s=0;s<e.length;s++){const o=e[s],i=o.conversationID;if(t.has(i)){const e=t.get(i);e.lastMessage=o,\"in\"===o.flow&&e.unreadCount++}else t.set(i,{conversationID:o.conversationID,unreadCount:\"out\"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})}return[...t.values()]}_updateMemberCountByGroupTips(e){const{groupProfile:{groupID:t},elements:{onlineMemberInfo:s}}=e;if(Lt(s))return;const{onlineMemberNum:o=0,expireTime:i=this.DEFAULT_EXPIRE_TIME}=s,n=this._onlineMemberCountMap.get(t)||{},r=Date.now();Lt(n)?Object.assign(n,{lastReqTime:0,lastSyncTime:0,latestUpdateTime:r,memberCount:o,expireTime:i}):(n.latestUpdateTime=r,n.memberCount=o),_e.d(this._n+\"._updateMemberCountByGroupTips info:\",n),this._onlineMemberCountMap.set(t,n)}_onBroadcastMessage(t){if(Lt(t))return;const s=[],o=t.length;let i=null;for(let e=0;e<o;e++){const o=this.restoreMessageFromSimplified(t[e]);Er[o.event]?(i=this.packMessage(o,o.event),i.isBroadcastMessage=!0,this._broadcastMessageIDMap.has(i.ID)||(s.push(i),this._broadcastMessageIDMap.set(i.ID,1))):_e.w(`${this._n}._onBroadcastMessage unknown event:${o.event}`)}s.length>0&&this._groupModule.emitOuterEvent(e.MESSAGE_RECEIVED,s)}start(e){if(this._pollingInstanceMap.has(e)){const t=this._pollingInstanceMap.get(e);return void(t.isRunning()||t.start())}const t=new Dr({manager:this,groupID:e,onInit:this._updateRequestData.bind(this),onSuccess:this._handleSuccess.bind(this),onFail:this._handleFailure.bind(this)});t.start(),this._pollingInstanceMap.set(e,t),_e.l(`${this._n}.start groupID:${e}`)}handleJoinResult(e){return this._preCheck().then(()=>{const{longPollingKey:t,group:s}=e,o=s.groupID;return this._joinedGroupMap.set(o,s),this._groupModule.updateGroupMap([s]),this._groupModule.deleteUnjoinedAVChatRoom(o),this._groupModule.emitGroupListUpdate(!0,!1),we(t)?xn({status:Le,group:s}):Promise.resolve()})}startRunLoop(e){return this.handleJoinResult(e).then(()=>{const{longPollingKey:t,group:s,startSeq:o=0}=e,i=s.groupID;return this._pollingRequestInfoMap.set(i,{key:t,startSeq:o}),this.start(i),this._groupModule.isLoggedIn()?xn({status:Le,group:s}):xn({status:Le})})}_preCheck(){if(this._getModule(ms).isUnlimitedAVChatRoom())return Promise.resolve();if(!this.hasJoinedAVChatRoom())return Promise.resolve();const[e,s]=this._joinedGroupMap.entries().next().value;if(this._groupModule.isLoggedIn()){if(!(s.selfInfo.role===t.GRP_MBR_ROLE_OWNER||s.ownerID===this._groupModule.getMyUserID()))return this._groupModule.quitGroup(e);this._groupModule.deleteLocalGroupAndConversation(e)}else this._groupModule.deleteLocalGroupAndConversation(e);return this.reset(e),Promise.resolve()}joinWithoutAuth(e){const{groupID:s}=e,o=this._n+\".joinWithoutAuth\",i=new Cn(\"joinWithoutAuth\");return this._groupModule.request({protocolName:Bo,requestData:e}).then(({data:{longPollingKey:e}})=>{if(this._groupModule.probeNetwork().then(([t,o])=>{i.setNetworkType(o).setMessage(`groupID:${s} longPollingKey:${e}`).end(!0)}),we(e))return Vn({code:nn.CANNOT_JOIN_NON_AVCHATROOM_WITHOUT_LOGIN});_e.l(`${o} ok. groupID:${s}`);this._getModule(_s).setCompleted(`${t.CONV_GROUP}${s}`);const n=new nr({groupID:s});return this.startRunLoop({group:n,longPollingKey:e}),wn({status:Le})}).catch(e=>(_e.e(`${o} failed. groupID:${s} error:`,e),this._groupModule.probeNetwork().then(([t,o])=>{i.setError(e,t,o).setMessage(\"groupID:\"+s).end(!0)}),Vn(e))).finally(()=>{this._groupModule.getModule(fs).reportAtOnce()})}getGroupOnlineMemberCount(e){const t=this._onlineMemberCountMap.get(e)||{},s=Date.now();return Lt(t)||s-t.lastSyncTime>1e3*t.expireTime&&s-t.latestUpdateTime>1e4&&s-t.lastReqTime>3e3?(t.lastReqTime=s,this._onlineMemberCountMap.set(e,t),this._getGroupOnlineMemberCount(e).then(e=>wn({memberCount:e.memberCount})).catch(e=>Vn(e))):xn({memberCount:t.memberCount})}_getGroupOnlineMemberCount(e){const t=this._n+\"._getGroupOnlineMemberCount\";return this._groupModule.request({protocolName:ui,requestData:{groupID:e}}).then(s=>{const o=this._onlineMemberCountMap.get(e)||{},{data:{onlineMemberNum:i=0,expireTime:n=this.DEFAULT_EXPIRE_TIME}}=s;_e.l(`${t} ok. groupID:${e} memberCount:${i} expireTime:${n}`);const r=Date.now();return Lt(o)&&(o.lastReqTime=r),this._onlineMemberCountMap.set(e,Object.assign(o,{lastSyncTime:r,latestUpdateTime:r,memberCount:i,expireTime:n})),{memberCount:i}}).catch(s=>{_e.w(t+\" failed. error:\",s);return new Cn(\"_getGroupOnlineMemberCount\").setCode(s.code).setMessage(`groupID:${e} error:${JSON.stringify(s)}`).setNetworkType(this._groupModule.getNetworkType()).end(),Promise.reject(s)})}_getModule(e){return this._groupModule.getModule(e)}setPollingInterval(e){we(e)||(Ge(e)?this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=e:this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=parseInt(e,10))}setPollingIntervalPlus(e){we(e)||(Ge(e)?this.DEFAULT_POLLING_INTERVAL_PLUS=e:this.DEFAULT_POLLING_INTERVAL_PLUS=parseInt(e,10))}setPollingNoMessageCount(e){we(e)||(Ge(e)?this.DEFAULT_POLLING_NO_MESSAGE_COUNT=e:this.DEFAULT_POLLING_NO_MESSAGE_COUNT=parseInt(e,10))}setPollingSimplifiedMessage(e){we(e)||\"0\"!==e&&\"1\"!==e||(this.DEFAULT_POLLING_SIMPLIFIED_MSG=parseInt(e,10))}getPollingInterval(){return this._pollingInterval}onAVChatRoomMemberBanned(e){const{groupID:t}=e.payload.groupProfile;_e.l(`${this._n}.onAVChatRoomMemberBanned groupID:${t}`),this._groupModule.deleteLocalGroupAndConversation(t),this.reset(t)}restartPolling(){_e.l(`${this._n}.restartPolling count:${this._pollingInstanceMap.size}`);for(const e of this._pollingInstanceMap.values())e.stop(),e.start()}getPollingTimerID(e){if(!this._pollingInstanceMap.has(e))return-1;const t=this._pollingInstanceMap.get(e).getPollingTimerID();return _e.l(`${this._n}.getPollingTimerID groupID:${e} timerID:${t}`),t}reset(e){if(e){_e.l(`${this._n}.reset groupID:${e}`);const t=this._pollingInstanceMap.get(e);t&&t.stop(),this._pollingInstanceMap.delete(e),this._joinedGroupMap.delete(e),this._pollingRequestInfoMap.delete(e),this._onlineMemberCountMap.delete(e)}else{_e.l(this._n+\".reset all\");for(const e of this._pollingInstanceMap.values())e.stop();this._pollingInstanceMap.clear(),this._joinedGroupMap.clear(),this._pollingRequestInfoMap.clear(),this._onlineMemberCountMap.clear(),this._broadcastMessageIDMap.clear()}this.sequencesLinkedList.reset(),this.messageIDLinkedList.reset(),this.receivedMessageCount=0,this._reportMessageStackedCount=0,this._pollingInterval=this.DEFAULT_POLLING_INTERVAL=300,this.DEFAULT_POLLING_NO_MESSAGE_COUNT=20,this.DEFAULT_POLLING_INTERVAL_PLUS=2e3,this._pollingNoMessageCount=0}}const Lr=1,Ar=15;class vr{constructor(e){this._groupModule=e,this._n=\"GroupSystemNoticeHandler\",this.pendencyMap=new Map}onNewGroupSystemNotice(t){const{dataList:s,isSyncingEnded:o,isInstantMessage:i}=t;_e.d(`${this._n}.onReceiveSystemNotice count:${s.length}`);const{eventDataList:n,result:r}=this.newSystemNoticeStoredAndSummary({notifiesList:s,isInstantMessage:i});if(n.length>0){this._groupModule.getModule(_s).onNewMessage({conversationOptionsList:n,isInstantMessage:i}),this._onReceivedGroupSystemNotice({result:r,isInstantMessage:i})}i?r.length>0&&this._groupModule.emitOuterEvent(e.MESSAGE_RECEIVED,r):!0===o&&this._clearGroupSystemNotice()}newSystemNoticeStoredAndSummary({notifiesList:e,isInstantMessage:s}){let o=null;const i=e.length;let n=0;const r=[],a={conversationID:t.CONV_SYSTEM,unreadCount:0,type:t.CONV_SYSTEM,subType:null,lastMessage:null};for(n=0;n<i;n++){const i=e[n],{groupProfile:{communityType:u=0,topicID:c},elements:{topicIDList:l,operationType:d}}=i;if(!(2!==u||Lt(c)&&Lt(l))){if([17,18,20].includes(d)){this._handleTopicSystemNotice(i);continue}Lt(c)||(i.to=c)}if(i.elements.operationType===Ar)continue;i.currentUser=this._groupModule.getMyUserID(),i.conversationType=t.CONV_SYSTEM,i.conversationID=t.CONV_SYSTEM,o=new bn(i),o.setElement({type:t.MSG_GRP_SYS_NOTICE,content:{...i.elements,groupProfile:{...i.groupProfile}}}),o.isSystemMessage=!0,(1===o.sequence&&1===o.random||2===o.sequence&&2===o.random)&&(o.sequence=We(),o.random=We(),o.generateMessageID(),_e.l(`${this._n}.newSystemNoticeStoredAndSummary sequence and random maybe duplicated, regenerate. ID:${o.ID}`));this._groupModule.getModule(_s).pushIntoNoticeResult(r,o)&&(s?a.unreadCount++:o.setIsRead(!0),a.subType=o.conversationSubType)}return a.lastMessage=r[r.length-1],{eventDataList:r.length>0?[a]:[],result:r}}_clearGroupSystemNotice(){this._getPendencyList().then(e=>{e.forEach(e=>{this.pendencyMap.set(`${e.from}_${e.groupID}_${e.to}`,e)});const s=this._groupModule.getModule(_s).getLocalMessageList(t.CONV_SYSTEM),o=[];s.forEach(e=>{const{operatorID:t,operationType:s,groupProfile:i}=e.payload;if(s===Lr){const s=`${t}_${i.groupID}_${i.to}`,n=this.pendencyMap.get(s);n&&Ge(n.handled)&&0!==n.handled&&o.push(e)}}),this.deleteGroupSystemNotice({messageList:o})})}deleteGroupSystemNotice(e){const s=this._n+\".deleteGroupSystemNotice\";return be(e.messageList)&&0!==e.messageList.length?(_e.l(s+\" \"+e.messageList.map(e=>e.ID)),this._groupModule.request({protocolName:ni,requestData:{messageListToDelete:e.messageList.map(e=>({from:t.CONV_SYSTEM,messageSeq:e.clientSequence,messageRandom:e.random}))}}).then(()=>{_e.l(s+\" ok\");const t=this._groupModule.getModule(_s);return e.messageList.forEach(e=>{t.deleteLocalMessage(e)}),wn()}).catch(e=>(_e.e(s+\" error:\",e),Vn(e)))):xn()}_getPendencyList(e={}){const{type:t,startTime:s=0,limit:o=20}=e;return this._groupModule.request({protocolName:ii,requestData:{type:t,startTime:s,limit:o,handleAccount:this._groupModule.getMyUserID()}}).then(e=>{const t=e.data.pendencyList;return 0!==e.data.nextStartTime?this._getPendencyList({startTime:e.data.nextStartTime}).then(e=>[...t,...e]):t})}getGroupApplicationList(){return this._getPendencyList().then(e=>this._getPendencyList({type:t.GRP_COMMUNITY}).then(t=>(e.push(...t),this._handlePendencyResult(e))).catch(t=>this._handlePendencyResult(e)))}_handlePendencyResult(e){const t=[];return e.forEach(e=>{this.pendencyMap.set(`${e.from}_${e.groupID}_${e.to}`,e),0===e.handled&&t.push({applicant:e.from,applicantNick:e.fromUserNickName,groupName:e.groupName,groupID:e.groupID,authentication:e.authentication,messageKey:e.time,applicationType:e.applicationType,userID:e.userID})}),xn({applicationList:t})}_onReceivedGroupSystemNotice({result:e,isInstantMessage:t}){t&&e.forEach(e=>{switch(e.payload.operationType){case 1:break;case 2:this._onApplyGroupRequestAgreed(e);break;case 3:break;case 4:this._onMemberKicked(e);break;case 5:this._onGroupDismissed(e);break;case 6:break;case 7:this._onInviteGroup(e);break;case 8:this._onQuitGroup(e);break;case 9:this._onSetManager(e);break;case 10:this._onDeleteManager(e);break;case 11:case 12:case 15:break;case 20:this._onMessageRemindTypeSynced(e);break;case 21:this._groupModule.onAVChatRoomMemberBanned(e)}})}_onApplyGroupRequestAgreed(e){const t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)||this._groupModule.getGroupProfile({groupID:t}).then(({data:{group:e}})=>{if(e){this._groupModule.updateGroupMap([e]);const t=!e.isSupportTopic;this._groupModule.emitGroupListUpdate(!0,t)}})}_onMemberKicked(e){const t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}_onGroupDismissed(e){const t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t);const{_AVChatRoomHandler:s}=this._groupModule;s&&s.checkJoinedAVChatRoomByID(t)&&s.reset(t)}_onInviteGroup(e){const t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)||this._groupModule.getGroupProfile({groupID:t}).then(({data:{group:e}})=>{e&&(this._groupModule.updateGroupMap([e]),this._groupModule.emitGroupListUpdate())})}_onQuitGroup(e){const t=e.payload.groupProfile.groupID;this._groupModule.hasLocalGroup(t)&&this._groupModule.deleteLocalGroupAndConversation(t)}_onSetManager(e){const{to:s,groupID:o}=e.payload.groupProfile,i=this._groupModule.getModule(hs).getLocalGroupMemberInfo(o,s);i&&i.updateRole(t.GRP_MBR_ROLE_ADMIN)}_onDeleteManager(e){const{to:s,groupID:o}=e.payload.groupProfile,i=this._groupModule.getModule(hs).getLocalGroupMemberInfo(o,s);i&&i.updateRole(t.GRP_MBR_ROLE_MEMBER)}_onMessageRemindTypeSynced(e){const{groupID:t}=e.payload.groupProfile,s=e.payload.messageRemindType;this._groupModule.getModule(_s).onGroupMessageRemindTypeSynced({groupID:t,messageRemindType:s})}_handleTopicSystemNotice(e){const{groupProfile:{groupID:t,topicID:s},elements:{operationType:o,topicIDList:i,messageRemindType:n}}=e,r=this._groupModule.getModule(gs);17===o?r.onTopicCreated({groupID:t,topicID:s}):18===o?r.onTopicDeleted({groupID:t,topicIDList:i}):20===o&&r.onTopicMessageRemindTypeUpdated({groupID:t,topicID:s,messageRemindType:n})}reset(){this.pendencyMap.clear()}}class Nr extends Fs{constructor(e){super(e),this._n=\"GroupModule\",this._commonGroupHandler=null,this._AVChatRoomHandler=null,this._groupSystemNoticeHandler=null,this._commonGroupHandler=new pr(this),this._groupAttributesHandler=new fr(this),this._groupCountersHandler=new yr(this),this._AVChatRoomHandler=new Sr(this),this._groupTipsHandler=new dr(this),this._groupSystemNoticeHandler=new vr(this),this.groupMap=new Map,this._unjoinedAVChatRoomList=new Map,this._receiptDetailCompleteMap=new Map;this.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){const e=this.getCloudConfig(\"polling_interval\"),t=this.getCloudConfig(\"polling_interval_plus\"),s=this.getCloudConfig(\"polling_no_msg_count\"),o=this.getCloudConfig(\"polling_simplified_msg\");this._AVChatRoomHandler&&(_e.l(`${this._n}._onCloudConfigUpdated pollingInterval:${e} pollingIntervalPlus:${t} pollingNoMessageCount:${s} pollingSimplifiedMessage:`+o),this._AVChatRoomHandler.setPollingInterval(e),this._AVChatRoomHandler.setPollingIntervalPlus(t),this._AVChatRoomHandler.setPollingNoMessageCount(s),this._AVChatRoomHandler.setPollingSimplifiedMessage(o))}onCheckTimer(e){this.isLoggedIn()&&(this._commonGroupHandler.onCheckTimer(e),this._groupTipsHandler.onCheckTimer(e))}guardForAVChatRoom(e){if(e.conversationType===t.CONV_GROUP){const s=ot(e.to)?ft(e.to):e.to;return this.hasLocalGroup(s)?xn():this.getGroupProfile({groupID:s}).then(o=>{const i=o.data.group.type;if(_e.l(`${this._n}.guardForAVChatRoom. groupID:${s} type:${i}`),i===t.GRP_AVCHATROOM){const t=nn.MESSAGE_SEND_FAIL_NOT_IN_AVCHATROOM;return Vn(new Fn({code:t,message:this.getErrorMessage(t,e.from,s),data:{message:e}}))}return xn()})}return xn()}checkJoinedAVChatRoomByID(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}onNewGroupMessage(e){this._commonGroupHandler&&this._commonGroupHandler.onNewGroupMessage(e)}updateNextMessageSeq(e){if(be(e)){const s=this.getModule(gs);e.forEach(e=>{const o=e.conversationID.replace(t.CONV_GROUP,\"\");ot(o)&&s.updateLastMessage(o,e.lastMessage),this.groupMap.has(o)&&(this.groupMap.get(o).nextMessageSeq=e.lastMessage.sequence+1)})}}onNewGroupTips(e){this._groupTipsHandler&&this._groupTipsHandler.onNewGroupTips(e)}onGroupMessageRevoked(e){this._commonGroupHandler&&this._commonGroupHandler.onGroupMessageRevoked(e)}onNewGroupSystemNotice(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.onNewGroupSystemNotice(e)}onGroupMessageReadNotice(e){e.dataList.forEach(e=>{const{groupMessageReadNotice:s}=e.elements;if(!we(s)){const e=this.getModule(_s);s.forEach(s=>{const{groupID:o,topicID:i,lastMessageSeq:n}=s;_e.d(`${this._n}.onGroupMessageReadNotice groupID:${o} lastMessageSeq:${n}`);let r=`${t.CONV_GROUP}${o}`,a=!0;Lt(i)||(r=`${t.CONV_GROUP}${i}`,a=!1),e.updateIsReadAfterReadReport({conversationID:r,lastMessageSeq:n}),e.updateUnreadCount(r,a),e.clearGroupAtInfoList(r,a)})}})}onReadReceiptList(e){_e.d(this._n+\".onReadReceiptList options:\",JSON.stringify(e)),e.dataList.forEach(e=>{const{groupProfile:t,elements:s}=e,{groupID:o}=t,i=this.getModule(_s),{readReceiptList:n}=s;i.updateReadReceiptInfo({groupID:o,readReceiptList:n})})}onGroupMessageModified(e){_e.d(this._n+\".onGroupMessageModified options:\",JSON.stringify(e));const s=this.getModule(_s);e.dataList.forEach(e=>{s.onMessageModified({...e,conversationType:t.CONV_GROUP,to:e.topicID?e.topicID:e.groupID})})}deleteGroupSystemNotice(e){this._groupSystemNoticeHandler&&this._groupSystemNoticeHandler.deleteGroupSystemNotice(e)}initGroupMap(e){this.groupMap.set(e.groupID,new nr(e))}deleteGroup(e){this.groupMap.delete(e)}updateGroupMap(e){const t=this.getModule(_s);let s;e.forEach(e=>{s=e.groupID,this.groupMap.has(s)?this.groupMap.get(s).updateGroup(e):(this.groupMap.set(s,new nr(e)),t.deleteGroupRomaingMessageInfo(s))});const o=this.getMyUserID();for(const[,i]of this.groupMap)i.selfInfo.userID=o,\"Owner\"===i.selfInfo.role&&(i.ownerID=o);this._setStorageGroupList()}getStorageGroupList(){return this.getModule(Ms).getItem(\"groupMap\")}_setStorageGroupList(){const e=this.getLocalGroupList().filter(({type:e})=>!et(e)).filter(({isSupportTopic:e})=>!e).slice(0,20).map(({groupID:e,name:t,avatar:s,type:o})=>({groupID:e,name:t,avatar:s,type:o}));this.getModule(Ms).setItem(\"groupMap\",e)}getGroupMap(){return this.groupMap}getLocalGroupList(){return[...this.groupMap.values()]}getLocalGroupProfile(e){return this.groupMap.get(e)}sortLocalGroupList(){const e=[...this.groupMap].filter(([e,t])=>!Lt(t.lastMessage));e.sort((e,t)=>t[1].lastMessage.lastTime-e[1].lastMessage.lastTime),this.groupMap=new Map([...e])}updateGroupLastMessage(e){this._commonGroupHandler&&this._commonGroupHandler.handleUpdateGroupLastMessage(e)}emitGroupListUpdate(t=!0,s=!0){const o=this.getLocalGroupList();if(t&&this.emitOuterEvent(e.GROUP_LIST_UPDATED),s){const e=JSON.parse(JSON.stringify(o));this.getModule(_s).updateConversationGroupProfile(e)}}patchGroupMessageRemindType(){const e=this.getLocalGroupList(),t=this.getModule(_s);let s=0;e.forEach(e=>{!0===t.patchMessageRemindType({ID:e.groupID,isC2CConversation:!1,messageRemindType:e.selfInfo.messageRemindType})&&(s+=1)}),_e.l(`${this._n}.patchGroupMessageRemindType count:${s}`)}recomputeUnreadCount(){const e=this.getLocalGroupList(),s=this.getModule(_s);e.forEach(e=>{const{groupID:o}=e,{excludedUnreadSequenceList:i,readedSequence:n}=e.selfInfo;if(be(i)){let r=0;i.forEach(t=>{t>=n&&t<=e.nextMessageSeq-1&&(r+=1)}),r>=1&&s.recomputeGroupUnreadCount({conversationID:`${t.CONV_GROUP}${o}`,count:r})}})}getMyNameCardByGroupID(e){const t=this.getLocalGroupProfile(e);return t?t.selfInfo.nameCard:\"\"}isPagingGetCompleted(){return!!this._commonGroupHandler&&this._commonGroupHandler.isPagingGetCompleted()}getGroupList(e){return this._commonGroupHandler?this._commonGroupHandler.getGroupList(e):xn()}getGroupProfile(e){const t=this._n+\".getGroupProfile\",s=new Cn(\"getGroupProfile\"),{groupID:o,groupCustomFieldFilter:i}=e;_e.l(`${t} groupID:${o}`);const n={groupIDList:[o],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\",\"InviteJoinOption\"],groupCustomFieldFilter:i,memberInfoFilter:[\"Role\",\"JoinTime\",\"MsgSeq\",\"MsgFlag\",\"NameCard\"]}};return this.getGroupProfileAdvance(n).then(({data:{successGroupList:e,failureGroupList:i}})=>{if(_e.l(t+\" ok\"),i.length>0)return Vn(i[0]);let n;if(et(e[0].type)&&!this.hasLocalGroup(o)?n=new nr(e[0]):(this.updateGroupMap(e),n=this.getLocalGroupProfile(o)),!n.isSupportTopic){this.getModule(_s).updateConversationGroupProfile([n])}return s.setNetworkType(this.getNetworkType()).setMessage(`groupID:${o} type:${n.type} muteAllMembers:${n.muteAllMembers} ownerID:${n.ownerID}`).end(),wn({group:n})}).catch(o=>(this.probeNetwork().then(([t,i])=>{s.setError(o,t,i).setMessage(\"groupID:\"+e.groupID).end()}),_e.e(t+\" failed. error:\",o),Vn(o)))}getGroupProfileAdvance(e){const t=this._n+\".getGroupProfileAdvance\",{groupIDList:s}=e;be(s)&&s.length>50&&(this.outputWarning(\"GetGroupProfileLimit\"),s.length=50);const o=[],i=[];s.forEach(e=>{st({groupID:e})?i.push(e):o.push(e)});const n=[];if(o.length>0){const t=this._getGroupProfileAdvance({...e,groupIDList:o});n.push(t)}if(i.length>0){const t=this._getGroupProfileAdvance({...e,groupIDList:i,relayFlag:o.length>0});n.push(t)}return Promise.all(n).then(e=>{const t=[],s=[];return e.forEach(e=>{t.push(...e.successGroupList),s.push(...e.failureGroupList)}),wn({successGroupList:t,failureGroupList:s})}).catch(e=>(_e.e(t+\" failed. error:\",e),Vn(e)))}_getGroupProfileAdvance(e){const{relayFlag:t=!1,...s}=e;return this.request({protocolName:Fo,requestData:s}).then(e=>{_e.l(this._n+\"._getGroupProfileAdvance ok.\");const{groups:t}=e.data;return{successGroupList:t.filter(e=>we(e.errorCode)||0===e.errorCode),failureGroupList:t.filter(e=>e.errorCode&&0!==e.errorCode).map(e=>new Fn({code:e.errorCode,message:e.errorInfo,data:{groupID:e.groupID}}))}}).catch(s=>t&&st({groupID:e.groupIDList[0]})?{successGroupList:[],failureGroupList:[]}:Vn(s))}createGroup(e){const s=this._n+\".createGroup\",{type:o,groupID:i}=e;if(e.name&&!1===this._filterProfanity(\"name\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity(\"introduction\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity(\"notification\",e))return Vn({code:nn.PROFANITY_FOUND});if(![\"Public\",\"Private\",\"ChatRoom\",\"AVChatRoom\",\"Community\"].includes(o))return Vn({code:nn.ILLEGAL_GROUP_TYPE});if(!st({type:o})){if(!Lt(i)&&st({groupID:i}))return Vn({code:nn.ILLEGAL_GROUP_ID});e.isSupportTopic=void 0}if(et(o)&&!we(e.memberList)&&e.memberList.length>0&&(e.memberList=void 0),this._canIUseJoinOption(o)||we(e.joinOption)||(e.joinOption=void 0),st({type:o})){if(!Lt(i)&&!st({groupID:i}))return Vn({code:nn.ILLEGAL_GROUP_ID});e.isSupportTopic=!0===e.isSupportTopic?1:0}const n=new Cn(\"createGroup\");_e.l(s+\" options:\",e);let r=null,a=[];return this.request({protocolName:$o,requestData:{...e,ownerID:this.getMyUserID(),webPushFlag:1}}).then(o=>{const{groupID:i,overLimitUserIDList:u=[]}=o.data;if(r=i,a=u,n.setNetworkType(this.getNetworkType()).setMessage(`groupType:${e.type} groupID:${i} overLimitUserIDList=${u}`).end(),_e.l(`${s} ok groupID:${i} overLimitUserIDList:`,u),e.type===t.GRP_AVCHATROOM)return this.getGroupProfile({groupID:i});if(e.type===t.GRP_COMMUNITY&&1===e.isSupportTopic)return this.getGroupProfile({groupID:i});Lt(e.memberList)||Lt(u)||(e.memberList=e.memberList.filter(e=>-1===u.indexOf(e.userID))),this.updateGroupMap([{...e,groupID:i}]);const c=this.getModule(as),l=c.createCustomMessage({to:i,conversationType:t.CONV_GROUP,payload:{data:\"group_create\",extension:this.isIntl()?this.getMyUserID()+\" created a group\":this.getMyUserID()+\"\"}});return c.sendMessageInstance(l),this.emitGroupListUpdate(),this.getGroupProfile({groupID:i})}).then(e=>{const{group:s}=e.data,{nameCard:o,joinTime:i}=s.selfInfo;return s.updateSelfInfo({nameCard:o,joinTime:i,messageRemindType:t.MSG_REMIND_ACPT_AND_NOTE,role:t.GRP_MBR_ROLE_OWNER}),wn({group:s,overLimitUserIDList:a})}).catch(t=>{if(n.setMessage(\"groupType:\"+e.type),this.probeNetwork().then(([e,s])=>{n.setError(t,e,s).end()}),10010===t.code||10007===t.code){this.updateGroupMap([{...e,groupID:r}]);const t=this.getLocalGroupProfile(r);return _e.l(s+\" success, but failed to get group profile.\"),wn({group:t,overLimitUserIDList:a})}return _e.e(s+\" failed. error:\",t),Vn(t)})}dismissGroup(e){const s=this._n+\".dismissGroup\";if(this.hasLocalGroup(e)&&this.getLocalGroupProfile(e).type===t.GRP_WORK)return Vn(new Fn({code:nn.CANNOT_DISMISS_WORK}));const o=new Cn(\"dismissGroup\");return o.setMessage(\"groupID:\"+e),_e.l(`${s} groupID:${e}`),this.request({protocolName:qo,requestData:{groupID:e}}).then(()=>(o.setNetworkType(this.getNetworkType()).end(),_e.l(s+\" ok\"),this.deleteLocalGroupAndConversation(e),this.checkJoinedAVChatRoomByID(e)&&this._AVChatRoomHandler.reset(e),this._groupAttributesHandler.deleteLocalGroupAttributes(e),wn({groupID:e}))).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}updateGroupProfile(e){const t=this._n+\".updateGroupProfile\";if(this.hasLocalGroup(e.groupID)){const s=this.getLocalGroupProfile(e.groupID).type;this._canIUseJoinOption(s)||we(e.joinOption)||(_e.w(t+\" joinOption is unavailable for Work/Meeting/AVChatRoom\"),e.joinOption=void 0)}if(we(e.muteAllMembers)||(e.muteAllMembers?e.muteAllMembers=\"On\":e.muteAllMembers=\"Off\"),e.name&&!1===this._filterProfanity(\"name\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity(\"introduction\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity(\"notification\",e))return Vn({code:nn.PROFANITY_FOUND});const s=new Cn(\"updateGroupProfile\");return s.setMessage(JSON.stringify(e)),_e.l(`${t} groupID:${e.groupID}`),this.request({protocolName:xo,requestData:e}).then(()=>{if(s.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this.hasLocalGroup(e.groupID)){this.groupMap.get(e.groupID).updateGroup(e),this._setStorageGroupList()}return wn({group:this.groupMap.get(e.groupID)})}).catch(e=>(this.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.l(t+\" failed. error:\",e),Vn(e)))}_filterProfanity(e,t){const s=this.getModule(Us);if(!s)return!0;const{isAllowedToSend:o,modifiedText:i}=s.filterText(t[e],E);return!0===o&&(t[e]=i,!0)}joinGroup(e){const{groupID:s,type:o}=e,i=this._n+\".joinGroup\";if(o===t.GRP_WORK)return Vn({code:nn.CANNOT_JOIN_WORK});if(this.deleteUnjoinedAVChatRoom(s),this.hasLocalGroup(s)){if(!this.isLoggedIn())return xn({status:t.JOIN_STATUS_ALREADY_IN_GROUP});const o=new Cn(\"applyJoinGroup\");return this.getGroupProfile({groupID:s}).then(()=>(o.setNetworkType(this.getNetworkType()).setMessage(`groupID:${s} joinedStatus:${t.JOIN_STATUS_ALREADY_IN_GROUP}`).end(),xn({status:t.JOIN_STATUS_ALREADY_IN_GROUP}))).catch(t=>(o.setNetworkType(this.getNetworkType()).setMessage(`groupID:${s} unjoined`).end(),_e.w(`${i} ${s} was unjoined, now join!`),this.groupMap.delete(s),this.applyJoinGroup(e)))}return _e.l(`${i} groupID:${s}`),this.isLoggedIn()?this.applyJoinGroup(e):this._AVChatRoomHandler.joinWithoutAuth(e)}applyJoinGroup(e){const t=this._n+\".applyJoinGroup\",{groupID:s,applyMessage:o}=e;if(!Lt(o)&&!1===this._filterProfanity(\"applyMessage\",e))return Vn({code:nn.PROFANITY_FOUND});const i=new Cn(\"applyJoinGroup\"),n={...e},r=this.canIUse(M.AVCHATROOM_HISTORY_MSG);r&&(n.historyMessageFlag=1);return this.getModule(_s).deleteTopicRoamingMessageInfo(s),this.request({protocolName:Vo,requestData:n}).then(({data:{joinedStatus:e,longPollingKey:o,startSeq:n,avChatRoomFlag:a,avChatRoomKey:u,messageList:c}})=>{const l=`groupID:${s} joinedStatus:${e} longPollingKey:${o} startSeq:${n} avChatRoomFlag:${a} canGetAVChatRoomHistoryMessage:${r}, history message count:`+(Lt(c)?0:c.length);switch(i.setNetworkType(this.getNetworkType()).setMessage(\"\"+l).end(),_e.l(`${t} ok. ${l}`),e){case Ae:return wn({status:Ae});case Le:return this.getGroupProfile({groupID:s}).then(({data:{group:e}})=>this._handleJoinResult({group:e,avChatRoomFlag:a,longPollingKey:o,startSeq:n,avChatRoomKey:u,messageList:c})).catch(()=>{const e=new nr({groupID:s});return this._handleJoinResult({group:e,avChatRoomFlag:a,longPollingKey:o,startSeq:n,avChatRoomKey:u,messageList:c})});default:{const e=new Fn({code:nn.JOIN_GROUP_FAIL});return _e.e(t+\" failed. error:\",e),Vn(e)}}}).catch(e=>(i.setMessage(\"groupID:\"+s),this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}_handleJoinResult(e){const{group:s,avChatRoomFlag:o,longPollingKey:i,startSeq:n,avChatRoomKey:r,messageList:a}=e,{groupID:u}=s;if(1===o){let e;return this.getModule(_s).setCompleted(`${t.CONV_GROUP}${u}`),this._groupAttributesHandler.initGroupAttributesCache({groupID:u,avChatRoomKey:r}),this._groupCountersHandler.initGroupCountersCache({groupID:u,avChatRoomKey:r}),e=we(i)?this._AVChatRoomHandler.handleJoinResult({group:s}):this._AVChatRoomHandler.startRunLoop({group:s,longPollingKey:i,startSeq:n}),e.then(()=>{this._onAVChatRoomHistoryMessage(a)}),e}return this.emitGroupListUpdate(!0,!1),wn({status:Le,group:s})}quitGroup(e){const t=this._n+\".quitGroup\";_e.l(`${t} groupID:${e}`);const s=this.checkJoinedAVChatRoomByID(e);if(!s&&!this.hasLocalGroup(e))return Vn({code:nn.MEMBER_NOT_IN_GROUP});if(s&&!this.isLoggedIn())return _e.l(`${t} anonymously ok. groupID:${e}`),this.deleteLocalGroupAndConversation(e),this._AVChatRoomHandler.reset(e),xn({groupID:e});const o=new Cn(\"quitGroup\");return o.setMessage(\"groupID:\"+e),this.request({protocolName:Ho,requestData:{groupID:e}}).then(()=>(o.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this.deleteLocalGroupAndConversation(e),s&&this._AVChatRoomHandler.reset(e),this._groupAttributesHandler.deleteLocalGroupAttributes(e),wn({groupID:e}))).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}searchGroupByID(e){const t=this._n+\".searchGroupByID\",s={groupIDList:[e]},o=new Cn(\"searchGroupByID\");return o.setMessage(\"groupID:\"+e),_e.l(`${t} groupID:${e}`),this.request({protocolName:Ko,requestData:s}).then(({data:{groupProfile:e}})=>{if(0!==e[0].errorCode)throw new Fn({code:e[0].errorCode,message:e[0].errorInfo});return o.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),wn({group:new nr(e[0])})}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}changeGroupOwner(e){const s=this._n+\".changeGroupOwner\";if(this.hasLocalGroup(e.groupID)&&this.getLocalGroupProfile(e.groupID).type===t.GRP_AVCHATROOM)return Vn({code:nn.CANNOT_CHANGE_OWNER_IN_AVCHATROOM});if(e.newOwnerID===this.getMyUserID())return Vn({code:nn.CANNOT_CHANGE_OWNER_TO_SELF});const o=new Cn(\"changeGroupOwner\");return o.setMessage(`groupID:${e.groupID} newOwnerID:${e.newOwnerID}`),_e.l(`${s} groupID:${e.groupID}`),this.request({protocolName:Wo,requestData:e}).then(()=>{o.setNetworkType(this.getNetworkType()).end(),_e.l(s+\" ok\");const{groupID:t,newOwnerID:i}=e;this.groupMap.get(t).ownerID=i;const n=this.getModule(hs).getLocalGroupMemberList(t);if(n instanceof Map){const e=n.get(this.getMyUserID());we(e)||(e.updateRole(\"Member\"),this.groupMap.get(t).selfInfo.role=\"Member\");const s=n.get(i);we(s)||s.updateRole(\"Owner\")}return this.emitGroupListUpdate(!0,!1),wn({group:this.groupMap.get(t)})}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}getGroupApplicationList(){return this._groupSystemNoticeHandler.getGroupApplicationList()}handleGroupApplication(e){const t=this._n+\".handleGroupApplication\",{handleAction:s,handleMessage:o,message:i,application:n}=e;let r,a,u,c,l;i?(r=i.payload.operatorID,a=i.payload.groupProfile.groupID,u=i.payload.authentication,c=i.payload.messageKey):n&&(r=n.applicant,a=n.groupID,u=n.authentication,c=n.messageKey);let d=Yo;n&&2===n.applicationType&&(d=jo,l=n.userID);const p=new Cn(\"handleGroupApplication\");return p.setMessage(\"groupID:\"+a),_e.l(`${t} groupID:${a}`),this.request({protocolName:d,requestData:{handleAction:s,handleMessage:o,applicant:r,invitee:l,groupID:a,authentication:u,messageKey:c}}).then(()=>(p.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),i&&this._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),wn({group:this.getLocalGroupProfile(a)}))).catch(e=>(this.probeNetwork().then(([t,s])=>{p.setError(e,t,s).end()}),_e.e(t+\" failed. error\",e),Vn(e)))}handleGroupInvitation(e){const t=this._n+\".handleGroupInvitation\",{groupProfile:{groupID:s},authentication:o,messageKey:i,operatorID:n}=e.message.payload,{handleAction:r}=e,a=new Cn(\"handleGroupInvitation\");return a.setMessage(`groupID:${s} inviter:${n} handleAction:${r}`),_e.l(`${t} groupID:${s} inviter:${n} handleAction:${r}`),this.request({protocolName:zo,requestData:{...e,inviter:n,groupID:s,authentication:o,messageKey:i}}).then(()=>(a.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this._groupSystemNoticeHandler.deleteGroupSystemNotice({messageList:[e.message]}),wn({group:this.getLocalGroupProfile(s)}))).catch(e=>(this.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),_e.e(t+\" failed. error\",e),Vn(e)))}getGroupOnlineMemberCount(e){if(!this._AVChatRoomHandler)return Vn({code:nn.CANNOT_FIND_MODULE});return this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)?this._AVChatRoomHandler.getGroupOnlineMemberCount(e):xn({memberCount:0})}hasLocalGroup(e){return this.groupMap.has(e)}deleteLocalGroupAndConversation(e){const s=this.checkJoinedAVChatRoomByID(e);if(_e.l(`${this._n}.deleteLocalGroupAndConversation isJoinedAVChatRoom:${s}`),s){this.getModule(_s).deleteLocalConversation(`${t.CONV_GROUP}${e}`)}if(st({groupID:e})){const t=this.getLocalGroupProfile(e);if(t&&!0===t.isSupportTopic){this.getModule(gs).deleteTopicListInCommunity(e)}}this._deleteLocalGroup(e),this.emitGroupListUpdate(!0,!1)}_deleteLocalGroup(e){this.groupMap.delete(e);this.getModule(hs).deleteGroupMemberList(e),this._setStorageGroupList()}sendMessage(e,t){if(be(e._receiverList)&&e._receiverList.length>0){if(!this.canIUse(M.MSG_TO_SPECIFIED_GRP_MBR))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY})}const s=this.createGroupMessagePack(e,t);return this.request(s)}createGroupMessagePack(e,s){let o=null;s&&s.offlinePushInfo&&(o=s.offlinePushInfo);let i=\"\";Ue(e.cloudCustomData)&&e.cloudCustomData.length>0&&(i=e.cloudCustomData);const n=[];if(Pe(s)&&Pe(s.messageControlInfo)){const{excludedFromUnreadCount:e,excludedFromLastMessage:t,excludedFromContentModeration:o}=s.messageControlInfo;!0===e&&n.push(\"NoUnread\"),!0===t&&n.push(\"NoLastMsg\"),!0===o&&n.push(\"NoMsgCheck\")}let r=void 0;be(e._receiverList)&&e._receiverList.length>0&&(r=e._receiverList,e._receiverList.length>50&&(r=e._receiverList.slice(0,50),this.outputWarning(\"ReceiverListLimit\")));const a=this.isOnlineMessage(e,s)?1:0,u=e.getGroupAtInfoList(),c={fromAccount:this.getMyUserID(),groupID:e.to,msgBody:e.getElements(),cloudCustomData:i,random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:e.type!==t.MSG_TEXT||Lt(u)?void 0:u,onlineOnlyFlag:a,clientTime:e.clientTime,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0,isVoipPush:this._isVoipPush(o)},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:0===a?n:void 0,needReadReceipt:!0!==e.needReadReceipt||this.isMessageFromOrToAVChatroom(e.to)?0:1,receiverList:r,isSupportExtension:!0===e.isSupportExtension?1:0};return ot(e.to)&&(c.groupID=ft(e.to),c.topicID=e.to),{protocolName:Ws,tjgID:this.generateTjgID(e),requestData:c}}_isVoipPush(e){let t=void 0;return we(e.disableVoipPush)||(t=!1===e.disableVoipPush?1:0),t}revokeMessage(e){const t={groupID:e.to,msgSeqList:[{msgSeq:e.sequence}]};return ot(e.to)&&(t.groupID=ft(e.to),t.topicID=e.to),this.request({protocolName:Jo,requestData:t})}deleteMessage(e){const{to:t,keyList:s}=e;_e.l(`${this._n}.deleteMessage groupID:${t} count:${s.length}`);const o={groupID:t,deleter:this.getMyUserID(),keyList:s};return ot(t)&&(o.groupID=ft(t),o.topicID=t),this.request({protocolName:ci,requestData:o})}modifyRemoteMessage(e){const{to:t,sequence:s,payload:o,type:i,version:n=0,cloudCustomData:r}=e;let a=t,u=void 0;ot(t)&&(a=ft(t),u=t);let c=void 0;return Ct(i)&&(c=[],c.push({type:i,content:o})),this.request({protocolName:li,requestData:{groupID:a,topicID:u,sequence:s,version:n,elements:c,cloudCustomData:r}})}getRoamingMessage(e){const t=this._n+\".getRoamingMessage\";let{conversationID:s,groupID:o,sequence:i}=e;const n=new Cn(\"getGroupRoamingMessages\");let r=0,a=void 0;return ot(o)&&(a=o,o=ft(a)),this._computeLastSequence({groupID:o,topicID:a,sequence:i}).then(e=>(r=e,_e.l(`${t} groupID:${o} startSequence:${r}`),this.request({protocolName:Qo,requestData:{groupID:o,count:21,sequence:r,topicID:a}}))).then(e=>{const{messageList:i,complete:u,invisibleSequenceList:c=[]}=e.data;we(i)?_e.l(`${t} ok. complete:${u} but messageList is undefined!`):_e.l(`${t} ok. complete:${u} count:${i.length}`);let l=this._getMinSequence(c,i)-1;n.setNetworkType(this.getNetworkType()).setMessage(`groupID:${o} topicID:${a} startSequence:${r} complete:${u} nextSequence:${l}`).end();const d=this.getModule(_s);let p=[];return Lt(i)||(d.updateRoamingMessageSequence(s,l),p=d.onRoamingMessage(i,s),d.updateIsRead(s),d.patchConversationLastMessage(s)),(2===u||l<=1)&&(d.setCompleted(s),l=\"\"),_e.l(`${t} nextReqID:${l}, stored message count:${p.length}, invisible sequence count:${c.length}`),{nextReqID:l+\"\",storedMessageList:p}}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).setMessage(`groupID:${o} topicID:${a} startSequence:${r}`).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}_getGroupIDOfMessage(e){return e.conversationID.replace(t.CONV_GROUP,\"\")}_getMinSequence(e,t){let s=0;Lt(t)||(s=t[t.length-1].sequence);let o=0;if(!Lt(e)){o=e[e.length-1]}return _e.l(`${this._n}._getMinSequence minVisibleSequence:${s} minInvisibleSequence:${o}`),o>0&&o<s?o:s}getReadReceiptList(e){const t=this._n+\".getReadReceiptList\",s=this._getGroupIDOfMessage(e[0]),o=this.getMyUserID(),i=e.filter(e=>e.from===o&&!0===e.needReadReceipt).map(e=>({sequence:e.sequence}));if(_e.l(`${t} groupID:${s} sequenceList:${JSON.stringify(i)}`),0===i.length)return xn({messageList:e});const n=new Cn(\"getReadReceiptList\");return n.setMessage(\"groupID:\"+s),this.request({protocolName:ei,requestData:{groupID:s,sequenceList:i}}).then(s=>{n.end(),_e.l(t+\" ok\");const{readReceiptList:o}=s.data;return be(o)&&o.forEach(t=>{e.forEach(e=>{0===t.code&&t.sequence===e.sequence&&(e.readReceiptInfo.readCount=t.readCount,e.readReceiptInfo.unreadCount=t.unreadCount)})}),wn({messageList:e})}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}sendReadReceipt(e){const t=this._n+\".sendReadReceipt\",s=this._getGroupIDOfMessage(e[0]),o=new Cn(\"sendReadReceipt\");o.setMessage(\"groupID:\"+s);const i=this.getMyUserID(),n=e.filter(e=>e.from!==i&&!0===e.needReadReceipt).map(e=>({sequence:e.sequence}));return 0===n.length?Vn({code:nn.READ_RECEIPT_MESSAGE_LIST_EMPTY}):(_e.l(`${t}. sequenceList:${JSON.stringify(n)}`),this.request({protocolName:ti,requestData:{groupID:s,sequenceList:n}}).then(e=>(o.end(),_e.l(t+\" ok\"),wn())).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e))))}getReadReceiptDetail(e){const{message:t,filter:s,cursor:o,count:i}=e,n=this._getGroupIDOfMessage(t),r=t.ID,a=t.sequence,u=this._n+\".getReadReceiptDetail\",c=this._receiptDetailCompleteMap.get(r)||!1,l=0!==s&&1!==s?0:s,d=Ue(o)?o:\"\",p=!Ge(i)||i<=0||i>=100?100:i,h=`groupID:${n} sequence:${a} cursor:${d} filter:${l} completeFlag:${c}`;_e.l(`${u} ${h}`);const g={cursor:\"\",isCompleted:!1,messageID:r,unreadUserIDList:[],readUserIDList:[]},_=new Cn(\"getReadReceiptDetail\");return _.setMessage(h),this.request({protocolName:oi,requestData:{groupID:n,sequence:a,flag:l,cursor:d,count:p}}).then(e=>{_.end();const{cursor:t,isCompleted:s,unreadUserIDList:o,readUserIDList:i}=e.data;return g.cursor=t,1===s&&(g.isCompleted=!0,this._receiptDetailCompleteMap.set(r,!0)),0===l?g.readUserIDList=i.map(e=>e.userID):1===l&&(g.unreadUserIDList=o.map(e=>e.userID)),_e.l(u+\" ok\"),wn(g)}).catch(e=>(this.probeNetwork().then(([t,s])=>{_.setError(e,t,s).end()}),_e.w(u+\" failed. error:\",e),Vn(e)))}getRoamingMessagesHopping(e){const s=this._n+\".getRoamingMessagesHopping\",o=new Cn(\"getGroupRoamingMessagesHopping\");let{groupID:i,count:n,sequence:r,direction:a}=e,u=r;1===a&&(u=r+n-1);let c=void 0;ot(i)&&(c=i,i=ft(c));const l=`${c?\"topicID:\"+c:\"groupID:\"+i} sequence:${r} direction:${a}`;return _e.l(`${s} ${l}`),this.request({protocolName:Qo,requestData:{groupID:i,topicID:c,count:n,sequence:u}}).then(i=>{const{messageList:n,complete:u}=i.data,c=`complete:${u} count:${n?n.length:0}`;if(_e.l(`${s} ok. ${c}`),o.setNetworkType(this.getNetworkType()).setMessage(`${l} ${c}`).end(),2===u||Lt(n)){const e=this._computeResult();return wn(e)}const d=`${t.CONV_GROUP}${e.groupID}`,p=this.getModule(_s).onRoamingMessage(n,d,!1),h=this._computeResult({direction:a,sequence:r,remoteMessageList:n,processedMessageList:p});return wn(h)}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).setMessage(`groupID:${i} sequence:${r} count:${n}`).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}_computeResult(e){const t={messageList:[],isCompleted:!1,nextMessageSeq:\"\"};if(we(e))return t.isCompleted=!0,t;const{direction:s,sequence:o,remoteMessageList:i=[],processedMessageList:n=[]}=e,r=i.length;return 1===s?(t.nextMessageSeq=i[0].sequence+1,n.forEach(e=>{e.sequence>=o&&t.messageList.push(e)}),0===t.messageList.length&&i[0].sequence<o&&(t.isCompleted=!0,t.nextMessageSeq=\"\"),t):(t.nextMessageSeq=i[r-1].sequence-1,t.messageList=[...n],0===t.nextMessageSeq&&(t.isCompleted=!0,t.nextMessageSeq=\"\"),t)}setMessageRead({conversationID:e,lastMessageSeq:s}){const o=this._n+\".setMessageRead\";_e.l(`${o} conversationID:${e} lastMessageSeq:${s}`),Ge(s)||this.outputWarning(\"DoNotModifyLastSeq\");const i=new Cn(\"setGroupMessageRead\");i.setMessage(`${e}-${s}`);let n=e.replace(t.CONV_GROUP,\"\"),r=void 0;return ot(n)&&(r=n,n=ft(r)),this.request({protocolName:Xo,requestData:{groupID:n,topicID:r,messageReadSeq:s}}).then(()=>{i.setNetworkType(this.getNetworkType()).end(),_e.l(o+\" ok.\");const t=this.getModule(_s);t.updateIsReadAfterReadReport({conversationID:e,lastMessageSeq:s});let a=!0;if(!we(r)){a=!1;const e=this.getModule(gs).getLocalTopic(n,r);e&&e.updateSelfInfo({readedSequence:s})}return t.updateUnreadCount(e,a),wn()}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.l(o+\" failed. error:\",e),Vn(e)))}_computeLastSequence(e){const{groupID:t,topicID:s,sequence:o}=e;return o>0?Promise.resolve(o):we(s)||this.hasLocalGroup(t)?we(s)?this.getGroupLastSequence(t):this.getTopicLastSequence({groupID:t,topicID:s}):Promise.resolve(0)}getGroupLastSequence(e){const t=this._n+\".getGroupLastSequence\",s=new Cn(\"getGroupLastSequence\");let o=0,i=\"\";if(this.hasLocalGroup(e)){const n=this.getLocalGroupProfile(e),r=n.lastMessage;if(r.lastSequence>0&&!1===r.onlineOnlyFlag)return o=r.lastSequence,i=`got lastSequence:${o} from local group profile[lastMessage.lastSequence]. groupID:${e}`,_e.l(`${t} ${i}`),s.setNetworkType(this.getNetworkType()).setMessage(\"\"+i).end(),Promise.resolve(o);if(n.nextMessageSeq>1)return o=n.nextMessageSeq-1,i=`got lastSequence:${o} from local group profile[nextMessageSeq]. groupID:${e}`,_e.l(`${t} ${i}`),s.setNetworkType(this.getNetworkType()).setMessage(\"\"+i).end(),Promise.resolve(o)}const n=\"GROUP\"+e,r=this.getModule(_s).getLocalConversation(n);if(r&&r.lastMessage.lastSequence&&!1===r.lastMessage.onlineOnlyFlag)return o=r.lastMessage.lastSequence,i=`got lastSequence:${o} from local conversation profile[lastMessage.lastSequence]. groupID:${e}`,_e.l(`${t} ${i}`),s.setNetworkType(this.getNetworkType()).setMessage(\"\"+i).end(),Promise.resolve(o);const a={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"NextMsgSeq\"]}};return this.getGroupProfileAdvance(a).then(({data:{successGroupList:n}})=>(Lt(n)?_e.l(`${t} successGroupList is empty. groupID:${e}`):(o=n[0].nextMessageSeq-1,i=`got lastSequence:${o} from getGroupProfileAdvance. groupID:${e}`,_e.l(`${t} ${i}`)),s.setNetworkType(this.getNetworkType()).setMessage(\"\"+i).end(),o)).catch(o=>(this.probeNetwork().then(([t,i])=>{s.setError(o,t,i).setMessage(\"get lastSequence failed from getGroupProfileAdvance. groupID:\"+e).end()}),_e.w(t+\" failed. error:\",o),Vn(o)))}getTopicLastSequence({groupID:e,topicID:t}){const s=this._n+\".getTopicLastSequence\",o=new Cn(\"getTopicLastSequence\");let i=0,n=\"\";const r=this.getModule(gs);return r.hasLocalTopic(e,t)?(i=r.getLocalTopic(e,t).nextMessageSeq-1,n=`get lastSequence:${i} from local topic info[nextMessageSeq]. topicID:${t}`,_e.l(`${s} ${n}`),o.setNetworkType(this.getNetworkType()).setMessage(\"\"+n).end(),Promise.resolve(i)):r.getTopicList({groupID:e,topicIDList:[t]}).then(({data:{successTopicList:e}})=>(Lt(e)?_e.l(`${s} successTopicList is empty. topicID:${t}`):(i=e[0].nextMessageSeq-1,n=`get lastSequence:${i} from getTopicList. topicID:${t}`,_e.l(`${s} ${n}`)),o.setNetworkType(this.getNetworkType()).setMessage(\"\"+n).end(),i)).catch(e=>(this.probeNetwork().then(([s,i])=>{o.setError(e,s,i).setMessage(\"get lastSequence failed from getTopicList. topicID:\"+t).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}isMessageFromOrToAVChatroom(e){return!!this._AVChatRoomHandler&&this._AVChatRoomHandler.checkJoinedAVChatRoomByID(e)}hasJoinedAVChatRoom(){return this._AVChatRoomHandler?this._AVChatRoomHandler.hasJoinedAVChatRoom():0}getJoinedAVChatRoom(){return this._AVChatRoomHandler?this._AVChatRoomHandler.getJoinedAVChatRoom():[]}isOnlineMessage(e,t){return!(!this._canIUseOnlineOnlyFlag(e)||!t||!0!==t.onlineUserOnly)}_canIUseOnlineOnlyFlag(e){const s=this.getJoinedAVChatRoom();return!s||!s.includes(e.to)||e.conversationType!==t.CONV_GROUP}_onAVChatRoomHistoryMessage(e){if(Lt(e))return;_e.l(`${this._n}._onAVChatRoomHistoryMessage count:${e.length}`);const t=[];e.forEach(e=>{t.push({...e,isHistoryMessage:1})}),this.onAVChatRoomMessage(t)}onAVChatRoomMessage(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onMessage(e)}onAVChatRoomMemberBanned(e){this._AVChatRoomHandler&&this._AVChatRoomHandler.onAVChatRoomMemberBanned(e)}getGroupSimplifiedInfo(e){const t=new Cn(\"getGroupSimplifiedInfo\"),s={groupIDList:[e],responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\"]}};return this.getGroupProfileAdvance(s).then(({data:{successGroupList:s}})=>(t.setNetworkType(this.getNetworkType()).setMessage(`groupID:${e} type:${s[0].type}`).end(),s[0])).catch(s=>{this.probeNetwork().then(([o,i])=>{t.setError(s,o,i).setMessage(\"groupID:\"+e).end()})})}setUnjoinedAVChatRoom(e){this._unjoinedAVChatRoomList.set(e,1)}deleteUnjoinedAVChatRoom(e){this._unjoinedAVChatRoomList.has(e)&&this._unjoinedAVChatRoomList.delete(e)}isUnjoinedAVChatRoom(e){return this._unjoinedAVChatRoomList.has(e)}isGroupAttributesUpdatedNotice(e){return this._groupAttributesHandler.isGroupAttributesUpdatedNotice(e)}updateLocalMainSequenceOnReconnected(){this._groupAttributesHandler.updateLocalMainSequenceOnReconnected()}initGroupAttributes(e){return this._groupAttributesHandler.initGroupAttributes(e)}setGroupAttributes(e){return this._groupAttributesHandler.setGroupAttributes(e)}deleteGroupAttributes(e){return this._groupAttributesHandler.deleteGroupAttributes(e)}getGroupAttributes(e){return this._groupAttributesHandler.getGroupAttributes(e)}isMessageFromTopic(e,t){return 2===e&&!Lt(t)}isMessageFromCommunityOfTopic(e,t){return 2===e&&Lt(t)}getMessageExtensions(e,t){return _e.l(`${this._n}.getMessageExtensions startSequence:${t}`),this.request({protocolName:Mi,requestData:{groupID:e.to,messageSequence:e.sequence,startSequence:t}})}modifyMessageExtensions(e,t,s=1){return _e.l(`${this._n}.modifyMessageExtensions operateType:${s}`),this.request({protocolName:mi,requestData:{groupID:e.to,messageSequence:e.sequence,extensionList:t,operateType:s}})}getGroupNotify(e){if(!this.hasLocalGroup(e))return;const s=this.getLocalGroupProfile(e),{type:o,isSupportTopic:i}=s;if(et(o)||i)return;const n=this._n+\".getGroupNotify\",r=this._getGroupLastRevokedTime(e),a=1e3*ce();_e.l(`${n} groupID:${e} type:${o} beginTime:${r} endTime:${a}`),this.request({protocolName:fi,requestData:{type:st({type:o,groupID:e})?t.GRP_COMMUNITY:void 0,groupID:e,beginTime:r,endTime:a}}).then(t=>{const{nextRevokedTime:s,notifyList:o}=t.data;_e.l(`${n} ok. groupID:${e} nextRevokedTime:${s}`);const i={dataList:[{elements:{revokedInfos:[]}}]};be(o)&&o.forEach(t=>{i.dataList[0].elements.revokedInfos.push({groupID:e,sequence:t.sequence,random:t.random,revokerInfo:{...t.revokerInfo}})}),this.onGroupMessageRevoked(i),0!==s?(this._setGroupLastRevokedTime(e,s),this.getGroupNotify(e)):this._setGroupLastRevokedTime(e,1e3*ce())}).catch(e=>{_e.e(n+\" failed. error:\",e)})}_getGroupLastRevokedTime(e){return this.hasLocalGroup(e)?this.getLocalGroupProfile(e)._lastRevokedTime:0}_setGroupLastRevokedTime(e,t){this.hasLocalGroup(e)&&(this.getLocalGroupProfile(e)._lastRevokedTime=t)}isGroupCountersNotice(e){return this._groupCountersHandler.isGroupCountersNotice(e)}setGroupCounters(e){return this._groupCountersHandler.setGroupCounters(e)}increaseGroupCounter(e){return this._groupCountersHandler.increaseGroupCounter(e)}decreaseGroupCounter(e){return this._groupCountersHandler.decreaseGroupCounter(e)}getGroupCounters(e){return this._groupCountersHandler.getGroupCounters(e)}restartPolling(){this._AVChatRoomHandler&&this._AVChatRoomHandler.restartPolling()}getPollingTimerID(e){if(!e)return-1;const t=this.getLocalGroupProfile(e);return t&&et(t.type)?this._AVChatRoomHandler.getPollingTimerID(e):-1}_canIUseJoinOption(e){return(e=>e===t.GRP_PUBLIC)(e)||st({type:e})}reset(){this.groupMap.clear(),this._unjoinedAVChatRoomList.clear(),this._receiptDetailCompleteMap.clear(),this._commonGroupHandler.reset(),this._groupSystemNoticeHandler.reset(),this._groupTipsHandler.reset(),this._groupAttributesHandler.reset(),this._groupCountersHandler.reset(),this._AVChatRoomHandler&&this._AVChatRoomHandler.reset()}}class Rr{constructor(e){this.userID=\"\",this.avatar=\"\",this.nick=\"\",this.role=\"\",this.joinTime=\"\",this.lastSendMsgTime=\"\",this.nameCard=\"\",this.muteUntil=0,this.memberCustomField=[],this._initMember(e)}_initMember(e){this.updateMember(e)}updateMember(e){const t=[null,void 0,\"\",0,NaN];e.memberCustomField&&Qe(this.memberCustomField,e.memberCustomField),Be(this,e,[\"memberCustomField\",\"marks\"],t)}updateRole(e){[\"Owner\",\"Admin\",\"Member\"].indexOf(e)<0||(this.role=e)}updateMuteUntil(e){we(e)||(this.muteUntil=Math.floor((Date.now()+1e3*e)/1e3))}updateNameCard(e){we(e)||(this.nameCard=e)}updateMemberCustomField(e){e&&Qe(this.memberCustomField,e)}}class Or extends Fs{constructor(e){super(e),this._n=\"GroupMemberModule\",this.groupMemberListMap=new Map,this.getInnerEmitterInstance().on(Yn,this._onProfileUpdated,this)}_onProfileUpdated({data:e}){for(let t=0;t<e.length;t++){const s=e[t];this.groupMemberListMap.forEach(e=>{e.has(s.userID)&&e.get(s.userID).updateMember({nick:s.nick,avatar:s.avatar})})}}deleteGroupMemberList(e){this.groupMemberListMap.delete(e)}getGroupMemberList({groupID:e,offset:s=0,count:o=15,filter:i}){const n=this._n+\".getGroupMemberList\",r=this.getModule(ds),a=r.hasLocalGroup(e);if(_e.l(`${n} groupID:${e} offset:${s} count:${o} hasLocalGroup:${a}`),!a)return xn({memberList:[],offset:0});if(r.getLocalGroupProfile(e).type===t.GRP_AVCHATROOM){if(this.canIUse(M.AVCHATROOM_MBR_LIST))return this._getAVChatRoomMemberList({groupID:e,offset:s,filter:i});this.outputWarning(\"LiveOnlineMember\")}const u=new Cn(\"getGroupMemberList\");let c=0;const l={groupID:e,limit:o>100?100:o};st({groupID:e})?l.next=\"\"+s:(l.offset=s,c=s+o);let d=[];return this.request({protocolName:Ti,requestData:l}).then(({data:{members:t,memberNum:s,next:o}})=>{if(we(o)||(c=Lt(o)?0:o),!be(t)||0===t.length)return c=0,Promise.resolve([]);const i=this.getModule(ds);i.hasLocalGroup(e)&&(i.getLocalGroupProfile(e).memberNum=s),d=this._updateLocalGroupMemberMap(e,t);return this.getModule(cs).getUserProfile({userIDList:t.map(e=>e.userID),tagList:[Me.NICK,Me.AVATAR]})}).then(t=>{const{data:i}=t;if(!be(i)||0===i.length)return xn({memberList:[],offset:c});const r=i.map(e=>({userID:e.userID,nick:e.nick,avatar:e.avatar}));return this._updateLocalGroupMemberMap(e,r),d.length<o&&(c=0),u.setNetworkType(this.getNetworkType()).setMessage(`groupID:${e} offset:${s} count:${o}`).end(),_e.l(n+\" ok.\"),wn({memberList:d,offset:c})}).catch(e=>(this.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.e(n+\" failed. error:\",e),Vn(e)))}_getAVChatRoomMemberList({groupID:e,offset:t,filter:s}){const o=this._n+\"._getAVChatRoomMemberList\",i=new Cn(\"_getAVChatRoomMemberList\");return i.setMessage(`groupID:${e} offset:${t} filter:${s}`),this.request({protocolName:yi,requestData:{groupID:e,offset:t,filter:s}}).then(t=>{const{memberList:s=[],offset:n=0}=t.data;i.setNetworkType(this.getNetworkType()).end(),_e.l(`${o} ok. member count:${s.length}, next request timestamp:${n}`);const r=this._updateLocalGroupMemberMap(e,s);return wn({memberList:r,offset:n})}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.e(o+\" failed. error:\",e),Vn(e)))}getGroupMemberProfile(e){const t=this._n+\".getGroupMemberProfile\",s=new Cn(\"getGroupMemberProfile\");s.setMessage(e.userIDList.length>5?\"userIDList.length:\"+e.userIDList.length:\"userIDList:\"+e.userIDList),_e.l(`${t} groupID:${e.groupID} userIDList:${e.userIDList.join(\",\")}`),e.userIDList.length>50&&(e.userIDList=e.userIDList.slice(0,50));const{groupID:o,userIDList:i}=e;return this._getGroupMemberProfileAdvance({...e,userIDList:i}).then(e=>{const{members:t}=e.data;if(!be(t)||0===t.length)return xn([]);this._updateLocalGroupMemberMap(o,t);return this.getModule(cs).getUserProfile({userIDList:t.map(({userID:e})=>e),tagList:[Me.NICK,Me.AVATAR]})}).then(e=>{const t=e.data.map(({userID:e,nick:t,avatar:s})=>({userID:e,nick:t,avatar:s}));this._updateLocalGroupMemberMap(o,t);const n=i.filter(e=>this.hasLocalGroupMember(o,e)).map(e=>this.getLocalGroupMemberInfo(o,e));return s.setNetworkType(this.getNetworkType()).end(),wn({memberList:n})})}addGroupMember(e){const t=this._n+\".addGroupMember\",{groupID:s}=e,o=this.getModule(ds).getLocalGroupProfile(s),{type:i}=o,n=new Cn(\"addGroupMember\");if(n.setMessage(`groupID:${s} groupType:${i}`),et(i)){const e=new Fn({code:nn.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return n.setError(e,!0,this.getNetworkType()).end(),Vn(e)}return e.userIDList=e.userIDList.map(e=>({userID:e})),_e.l(`${t} groupID:${s}`),this.request({protocolName:Ei,requestData:e}).then(({data:{members:s}})=>{_e.l(t+\" ok\");const i=s.filter(e=>1===e.result).map(e=>e.userID),r=s.filter(e=>0===e.result).map(e=>e.userID),a=s.filter(e=>2===e.result).map(e=>e.userID),u=s.filter(e=>4===e.result).map(e=>e.userID),c=`groupID:${e.groupID}, successUserIDList:${i}, failureUserIDList:${r}, existedUserIDList:${a}, overLimitUserIDList:`+u;return n.setNetworkType(this.getNetworkType()).setMoreMessage(c).end(),0===i.length?wn({successUserIDList:i,failureUserIDList:r,existedUserIDList:a,overLimitUserIDList:u}):(o.memberCount+=i.length,this._updateConversationGroupProfile(o),wn({successUserIDList:i,failureUserIDList:r,existedUserIDList:a,overLimitUserIDList:u,group:o}))}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}deleteGroupMember(e){const t=this._n+\".deleteGroupMember\",{groupID:s,userIDList:o}=e,i=this.getModule(ds).getLocalGroupProfile(s);if(we(i))return Vn({code:nn.CANNOT_FIND_GROUP});if(et(i.type)){return this.canIUse(M.AVCHATROOM_BAN_MBR)?this._banAVChatRoomMember(e):Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY})}const n=new Cn(\"deleteGroupMember\"),r=`groupID:${s} ${o.length>5?\"userIDList.length:\"+o.length:\"userIDList:\"+o}`;return n.setMessage(r),_e.l(`${t} groupID:${s} userIDList:`,o),this.request({protocolName:Si,requestData:e}).then(()=>(n.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),i.memberCount-=1,this._updateConversationGroupProfile(i),this.deleteLocalGroupMembers(s,o),wn({group:i,userIDList:o}))).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}_updateConversationGroupProfile(e){this.getModule(_s).updateConversationGroupProfile([e])}_banAVChatRoomMember(e){const t=this._n+\".deleteGroupMember\",{groupID:s,userIDList:o}=e,i=`groupID:${s} ${o.length>5?\"userIDList.length:\"+o.length:\"userIDList:\"+o}`,n=new Cn(\"deleteGroupMember\");n.setMessage(i),_e.l(`${t} groupID:${s} userIDList:`,o);const r=this.getModule(ds).getLocalGroupProfile(s);return we(e.duration)||0===e.duration?Vn({code:nn.BAN_DURATION_INVALID}):this.request({protocolName:Li,requestData:e}).then(()=>(n.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this.deleteLocalGroupMembers(s,o),wn({group:r,userIDList:o}))).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}setGroupMemberMuteTime(e){const{groupID:t,userID:s,muteTime:o}=e,i=this._n+\".setGroupMemberMuteTime\";if(s===this.getMyUserID())return Vn(new Fn({code:nn.CANNOT_MUTE_SELF}));_e.l(`${i} groupID:${t} userID:${s}`);const n=new Cn(\"setGroupMemberMuteTime\");return n.setMessage(`groupID:${t} userID:${s} muteTime:${o}`),this.modifyGroupMemberInfo({groupID:t,userID:s,muteTime:o}).then(e=>{n.setNetworkType(this.getNetworkType()).end(),_e.l(i+\" ok\");const s=this.getModule(ds);return wn({group:s.getLocalGroupProfile(t),member:e})}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(i+\" failed. error:\",e),Vn(e)))}setGroupMemberRole(e){const s=this._n+\".setGroupMemberRole\",{groupID:o,userID:i,role:n}=e,r=this.getModule(ds).getLocalGroupProfile(o);if(r.selfInfo.role!==t.GRP_MBR_ROLE_OWNER)return Vn({code:nn.NOT_OWNER});if([t.GRP_WORK,t.GRP_AVCHATROOM].includes(r.type))return Vn({code:nn.CANNOT_SET_MEMBER_ROLE_IN_WORK_AND_AVCHATROOM});const a=[t.GRP_MBR_ROLE_ADMIN,t.GRP_MBR_ROLE_MEMBER];if(st({groupID:o})&&a.push(t.GRP_MBR_ROLE_CUSTOM),a.indexOf(n)<0)return Vn({code:nn.INVALID_MEMBER_ROLE});if(i===this.getMyUserID())return Vn({code:nn.CANNOT_SET_SELF_MEMBER_ROLE});const u=new Cn(\"setGroupMemberRole\");return u.setMessage(`groupID:${o} userID:${i} role:${n}`),_e.l(`${s} groupID:${o} userID:${i}`),this.modifyGroupMemberInfo({groupID:o,userID:i,role:n}).then(e=>(u.setNetworkType(this.getNetworkType()).end(),_e.l(s+\" ok\"),wn({group:r,member:e}))).catch(e=>(this.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}_filterProfanity(e,t){const s=this.getModule(Us);if(!s)return!0;const{isAllowedToSend:o,modifiedText:i}=s.filterText(t[e],S);return!0===o&&(t[e]=i,!0)}setGroupMemberNameCard(e){const t=this._n+\".setGroupMemberNameCard\";if(e.nameCard&&!1===this._filterProfanity(\"nameCard\",e))return Vn({code:nn.PROFANITY_FOUND});const{groupID:s,userID:o=this.getMyUserID(),nameCard:i}=e;_e.l(`${t} groupID:${s} userID:${o}`);const n=new Cn(\"setGroupMemberNameCard\");return n.setMessage(`groupID:${s} userID:${o} nameCard:${i}`),this.modifyGroupMemberInfo({groupID:s,userID:o,nameCard:i}).then(e=>{_e.l(t+\" ok\"),n.setNetworkType(this.getNetworkType()).end();const r=this.getModule(ds).getLocalGroupProfile(s);return o===this.getMyUserID()&&r&&r.setSelfNameCard(i),wn({group:r,member:e})}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}setGroupMemberCustomField(e){const t=this._n+\".setGroupMemberCustomField\",{groupID:s,userID:o=this.getMyUserID(),memberCustomField:i}=e;_e.l(`${t} groupID:${s} userID:${o}`);const n=new Cn(\"setGroupMemberCustomField\");return n.setMessage(`groupID:${s} userID:${o} memberCustomField:${JSON.stringify(i)}`),this.modifyGroupMemberInfo({groupID:s,userID:o,memberCustomField:i}).then(e=>{n.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\");const o=this.getModule(ds).getLocalGroupProfile(s);return wn({group:o,member:e})}).catch(e=>(this.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}modifyGroupMemberInfo(e){let{groupID:t,userID:s}=e,o=void 0;return ot(t)&&(o=t,t=ft(o)),this.request({protocolName:Ai,requestData:{...e,groupID:t,topicID:o}}).then(()=>{if(this.hasLocalGroupMember(t,s)){const o=this.getLocalGroupMemberInfo(t,s);return we(e.muteTime)||o.updateMuteUntil(e.muteTime),we(e.role)||o.updateRole(e.role),we(e.nameCard)||o.updateNameCard(e.nameCard),we(e.memberCustomField)||o.updateMemberCustomField(e.memberCustomField),o}return this.getGroupMemberProfile({groupID:t,userIDList:[s]}).then(({data:{memberList:[e]}})=>e)})}markGroupMemberList(e){const t=this._n+\".markGroupMemberList\",{groupID:s,markType:o,enableMark:i,userIDList:n=[]}=e,r=`groupID:${s} markType:${o} enableMark:${i} userIDList count: ${n.length}`;_e.l(`${t} ${r}`);let a=2;const u=[];!0===i&&(a=1);let c=[...n];n.length>500&&(c=n.slice(0,500),_e.w(`${t} ${Dt(500)}`)),c.forEach(e=>{u.push({userID:e,markType:[o]})}),c=null;const l=new Cn(\"markGroupMemberList\");return l.setMessage(\"\"+r),this.request({protocolName:vi,requestData:{groupID:s,operationType:a,memberList:u}}).then(e=>{const{memberList:s=[]}=e.data,o=[],i=[];s.length===n.length?o.push(...n):(s.forEach(e=>{o.push(e.userID)}),n.forEach(e=>{o.includes(e)||i.push(e)}));const r=`success count:${o.length} fail count:${i.length}`;return l.setNetworkType(this.getNetworkType()).setMessage(r).end(),_e.l(`${t} ok. ${r}`),wn({successUserIDList:o,failureUserIDList:i})}).catch(e=>(this.probeNetwork().then(([t,s])=>{l.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}_getGroupMemberProfileAdvance(e){return this.request({protocolName:Di,requestData:{...e,memberInfoFilter:e.memberInfoFilter?e.memberInfoFilter:[\"Role\",\"JoinTime\",\"NameCard\",\"ShutUpUntil\"]}})}_updateLocalGroupMemberMap(e,t){if(!be(t)||0===t.length)return[];return t.map(t=>(this.hasLocalGroupMember(e,t.userID)?this.getLocalGroupMemberInfo(e,t.userID).updateMember(t):this.setLocalGroupMember(e,new Rr(t)),this.getLocalGroupMemberInfo(e,t.userID)))}deleteLocalGroupMembers(e,t){const s=this.groupMemberListMap.get(e);s&&t.forEach(e=>{s.delete(e)})}getLocalGroupMemberInfo(e,t){return this.groupMemberListMap.has(e)?this.groupMemberListMap.get(e).get(t):null}setLocalGroupMember(e,t){if(this.groupMemberListMap.has(e))this.groupMemberListMap.get(e).set(t.userID,t);else{const s=(new Map).set(t.userID,t);this.groupMemberListMap.set(e,s)}}getLocalGroupMemberList(e){return this.groupMemberListMap.get(e)}hasLocalGroupMember(e,t){return this.groupMemberListMap.has(e)&&this.groupMemberListMap.get(e).has(t)}hasLocalGroupMemberMap(e){return this.groupMemberListMap.has(e)}reset(){this.groupMemberListMap.clear()}}const Gr=[\"topicID\",\"topicName\",\"avatar\",\"introduction\",\"notification\",\"unreadCount\",\"muteAllMembers\",\"customData\",\"groupAtInfoList\",\"nextMessageSeq\",\"selfInfo\"],Ur=function(e,t){return Lt(e)?{lastTime:0,lastSequence:0,fromAccount:\"\",payload:null,type:\"\",messageForShow:\"\",nick:\"\",version:0,cloudCustomData:\"\",isRevoked:!1,revoker:null}:{lastTime:e.time||0,lastSequence:e.sequence||0,fromAccount:e.from||\"\",payload:e.payload||null,type:e.type||\"\",messageForShow:It(e.type,e.payload,t),nick:e.nick||\"\",version:e.version||0,cloudCustomData:e.cloudCustomData||\"\",isRevoked:e.isRevoked||!1,revoker:e.revoker||null}};class kr{constructor(e,t){this.topicID=\"\",this.topicName=\"\",this.avatar=\"\",this.introduction=\"\",this.notification=\"\",this.unreadCount=0,this.muteAllMembers=!1,this.customData=\"\",this.groupAtInfoList=[],this.nextMessageSeq=0,this.lastMessage=Ur(e.lastMessage,t),this.selfInfo={muteTime:0,readedSequence:0,messageRemindType:\"\",excludedUnreadSequenceList:void 0},this._initTopic(e)}_initTopic(e){for(const t in e)Gr.indexOf(t)<0||(\"selfInfo\"===t?this.updateSelfInfo(e[t]):this[t]=\"muteAllMembers\"===t?1===e[t]:e[t])}updateUnreadCount(e=0){this.unreadCount=e}updateNextMessageSeq(e){this.nextMessageSeq=e}updateLastMessage(e){this.lastMessage=Ur(e)}updateGroupAtInfoList(e){this.groupAtInfoList=JSON.parse(JSON.stringify(e))}updateTopic(e){we(e.selfInfo)||this.updateSelfInfo(e.selfInfo),we(e.muteAllMembers)||(this.muteAllMembers=1===e.muteAllMembers),Be(this,e,[\"groupID\",\"lastMessageTime\",\"selfInfo\",\"muteAllMembers\",\"lastMsg\"])}updateSelfInfo(e){return 0!==Be(this.selfInfo,e,[],[\"\"])}reduceUnreadCount(){return this.unreadCount>=1&&(this.unreadCount-=1,!0)}isLastMessageRevoked({sequence:e}){return e===this.lastMessage.lastSequence}setLastMessageRevoked(e){this.lastMessage.isRevoked=e}setLastMessageRevoker(e){this.lastMessage.revoker=e}}class Pr extends Fs{constructor(e){super(e),this._n=\"TopicModule\",this._topicMap=new Map,this._getTopicTimeMap=new Map,this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600;this.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){const e=this.getCloudConfig(\"topic_cache_time\"),t=this.getCloudConfig(\"topic_last_active_time\");we(e)||(this.TOPIC_CACHE_TIME=Number(e)),we(t)||(this.TOPIC_LAST_ACTIVE_TIME=Number(t))}onTopicCreated(t){const{groupID:s}=t;this.resetGetTopicTime(s),this.emitOuterEvent(e.TOPIC_CREATED,t)}onTopicDeleted(t){const{groupID:s,topicIDList:o=[]}=t;o.forEach(e=>{this._deleteLocalTopic(s,e)}),this.emitOuterEvent(e.TOPIC_DELETED,t)}onTopicMessageRemindTypeUpdated(t){const{groupID:s,topicID:o,messageRemindType:i}=t,n=this.getLocalTopic(s,o);if(n){const t=n.updateSelfInfo({messageRemindType:i});t&&this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:s,topic:n}),_e.d(`${this._n}.onTopicMessageRemindTypeUpdated topicID:${o} messageRemindType:${i} isTopicUpdated:${t}`)}}onTopicProfileUpdated(t){const{groupID:s,topicID:o}=t,i=this.getLocalTopic(s,o);i&&(i.updateTopic(t),this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:s,topic:i}))}onConversationProxy(t){const{topicID:s,unreadCount:o,groupAtInfoList:i}=t,n=ft(s),r=this.getLocalTopic(n,s);let a=!1;r&&(we(o)||r.unreadCount===o||(r.updateUnreadCount(o),a=!0),we(i)||(r.updateGroupAtInfoList(i),a=!0)),a&&this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:n,topic:r})}onMessageSent(t){const{groupID:s,topicID:o,lastMessage:i}=t,n=this.getLocalTopic(s,o);n&&(n.nextMessageSeq+=1,n.updateLastMessage(i),this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:s,topic:n}))}onMessageModified(t){const{to:s,time:o,sequence:i,elements:n,cloudCustomData:r,messageVersion:a}=t,u=ft(s),c=this.getLocalTopic(u,s);if(c){const l=c.lastMessage;_e.d(`${this._n}.onMessageModified topicID:${s} lastMessage:`,JSON.stringify(l),\"options:\",JSON.stringify(t)),l&&(null===l.payload||l.lastTime===o&&l.lastSequence===i&&l.version!==a)&&(l.type=n[0].type,l.payload=n[0].content,l.messageForShow=It(l.type,l.payload,this.isIntl()),l.cloudCustomData=r,l.version=a,l.lastSequence=i,l.lastTime=o,this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:u,topic:c}))}}onMessageRevoked(t){if(0===t.length)return;let s=null,o=null,i=!1;t.forEach(e=>{const t=e.to;o=ft(t),s=this.getLocalTopic(o,t),s&&(s.reduceUnreadCount()&&(i=!0),s.isLastMessageRevoked(e)&&(s.setLastMessageRevoked(!0),s.setLastMessageRevoker(e.revoker),i=!0))}),i&&this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:o,topic:s})}isLastMessageRevoked(e){const{topicID:t,sequence:s}=e,o=ft(t),i=this.getLocalTopic(o,t);let n=!1;return i&&(n=i.isLastMessageRevoked({sequence:s})),n}getJoinedCommunityList(){return this.getModule(ds).getGroupList({isGroupWithTopicOnly:!0}).then(e=>{const{groupList:t=[]}=e.data;return wn({groupList:t})}).catch(e=>Vn(e))}createTopicInCommunity(e){const t=this._n+\".createTopicInCommunity\",{topicID:s}=e;if(!we(s)&&!ot(s))return Vn({code:nn.ILLEGAL_TOPIC_ID});if(e.topicName&&!1===this._filterProfanity(\"topicName\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity(\"introduction\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity(\"notification\",e))return Vn({code:nn.PROFANITY_FOUND});const o=new Cn(\"createTopicInCommunity\");return this.request({protocolName:Ki,requestData:{...e}}).then(s=>{const{topicID:i}=s.data;return o.setMessage(\"topicID:\"+i).setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this._updateTopicMap([{...e,topicID:i}]),wn({topicID:i})}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}deleteTopicFromCommunity(e){const t=this._n+\".deleteTopicFromCommunity\",{groupID:s,topicIDList:o=[]}=e,i=new Cn(\"deleteTopicFromCommunity\");return i.setMessage(`groupID:${s} topicIDList:${o}`),this.request({protocolName:Wi,requestData:{groupID:s,topicIDList:o}}).then(e=>{const{resultList:t=[]}=e.data,o=[],n=[];t.forEach(e=>{const{topicID:t,errorCode:s,errorInfo:i}=e;0===s?o.push({topicID:t}):n.push({topicID:t,code:s,message:i})});const r=`success count:${o.length}, fail count:${n.length}`;return i.setMoreMessage(\"\"+r).setNetworkType(this.getNetworkType()).end(),_e.l(\"\"+r),o.forEach(e=>{this._deleteLocalTopic(s,e.topicID)}),wn({successTopicList:o,failureTopicList:n})}).catch(e=>(this.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}updateTopicProfile(e){const t=this._n+\".updateTopicProfile\";if(_e.l(t+\" options:\",e),e.topicName&&!1===this._filterProfanity(\"topicName\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.introduction&&!1===this._filterProfanity(\"introduction\",e))return Vn({code:nn.PROFANITY_FOUND});if(e.notification&&!1===this._filterProfanity(\"notification\",e))return Vn({code:nn.PROFANITY_FOUND});const s=new Cn(\"updateTopicProfile\");return s.setMessage(`groupID:${e.groupID} topicID:${e.topicID}`),we(e.muteAllMembers)||(e.muteAllMembers=!0===e.muteAllMembers?\"On\":\"Off\"),this.request({protocolName:Yi,requestData:{...e}}).then(()=>(s.setNetworkType(this.getNetworkType()).end(),_e.l(t+\" ok\"),this._updateTopicMap([e]),wn({topic:this.getLocalTopic(e.groupID,e.topicID)}))).catch(e=>(this.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}getTopicList(e){const t=this._n+\".getTopicList\",{groupID:s,topicIDList:o=[]}=e,i=0===o.length,n=new Cn(\"getTopicList\");if(n.setMessage(\"groupID:\"+s),this._getTopicTimeMap.has(s)){const{isGetAll:e,time:r}=this._getTopicTimeMap.get(s);if((e||!e&&!i)&&Date.now()-r<1e3*this.TOPIC_CACHE_TIME){const e=this._getLocalTopicList(s,o);if(i||e.length===o.length)return n.setNetworkType(this.getNetworkType()).setMoreMessage(\"from cache, topic count:\"+e.length).end(),_e.l(`${t} groupID:${s} from cache, topic count:${e.length}`),xn({successTopicList:e,failureTopicList:[]})}}return this.request({protocolName:ji,requestData:{groupID:s,topicIDList:o}}).then(e=>{const{topicInfoList:o=[]}=e.data,r=[],a=[],u=[];o.forEach(e=>{const{topic:t,selfInfo:s,errorCode:o,errorInfo:i}=e,{topicID:n}=t;0===o?(r.push({...t,selfInfo:s}),a.push(n)):u.push({topicID:n,code:o,message:i})}),this._updateTopicMap(r),this._handleTopicAtInfo(r);const c=`success count:${a.length}, fail count:${u.length}`;n.setNetworkType(this.getNetworkType()).setMoreMessage(\"\"+c).end(),_e.l(`${t} groupID:${s} from remote, ${c}`);let l=[];return Lt(a)||(this._getTopicTimeMap.set(s,{time:Date.now(),isGetAll:i}),l=this._getLocalTopicList(s,a)),wn({successTopicList:l,failureTopicList:u})}).catch(e=>(this.probeNetwork(e).then(([t,s])=>{n.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}hasLocalTopic(e,t){return!!this._topicMap.has(e)&&this._topicMap.get(e).has(t)}getLocalTopic(e,t){let s=null;return this._topicMap.has(e)&&(s=this._topicMap.get(e).get(t)),s}_getLocalTopicList(e,t=[]){const s=this._topicMap.get(e);let o=[];return s&&(o=[...s.values()]),0===t.length?o:o.filter(e=>t.includes(e.topicID))}_deleteLocalTopic(e,t){this._topicMap.has(e)&&(this._topicMap.get(e).delete(t),_e.l(`${this._n}._deleteLocalTopic groupID:${e} topicID:${t}`))}_updateTopicMap(e){const s=[];if(e.forEach(e=>{const{groupID:o,topicID:i}=e;let n=null;this._topicMap.has(o)||this._topicMap.set(o,new Map);this._topicMap.get(o).has(i)?(n=this._topicMap.get(o).get(i),n.updateTopic(e)):(this._getTopicLastMessage(e),n=new kr(e,this.isIntl()),this._topicMap.get(o).set(i,n));const r=this._computeUnreadCount(n);n.updateUnreadCount(r),s.push({conversationID:`${t.CONV_GROUP}${i}`,type:t.CONV_TOPIC,unreadCount:r})}),s.length>0){this.getModule(_s).updateTopicConversation(s)}}resetGetTopicTime(e){if(!we(e))return void this._getTopicTimeMap.set(e,0);[...this._getTopicTimeMap.keys()].forEach(e=>{this._getTopicTimeMap.set(e,0)})}getTopicListOnReconnected(){const e=[...this._topicMap.keys()],t=[];e.forEach(e=>{const s=[];this._getLocalTopicList(e).forEach(e=>{const{lastMessage:{lastTime:t=0}}=e;Date.now()-1e3*t<1e3*this.TOPIC_LAST_ACTIVE_TIME&&s.push(e.topicID)}),s.length>0&&t.push({groupID:e,topicIDList:s})}),_e.l(`${this._n}.getTopicListOnReconnected. active community count:${t.length}`),this._relayGetTopicList(t)}_relayGetTopicList(e){if(0===e.length)return;const t=e.shift(),s=t.topicIDList.length>5?\"topicIDList.length:\"+t.topicIDList.length:\"topicIDList:\"+t.topicIDList,o=new Cn(\"relayGetTopicList\");o.setMessage(s),_e.l(`${this._n}._relayGetTopicList. ${s}`),this.getTopicList(t).then(()=>{o.setNetworkType(this.getNetworkType()).end(),this._relayGetTopicList(e)}).catch(t=>{this.probeNetwork().then(([e,s])=>{o.setError(t,e,s).end()}),this._relayGetTopicList(e)})}_handleTopicAtInfo(e){0!==e.length&&e.forEach(e=>{const{groupID:t,topicID:s,groupAtInfoList:o}=e,i=[];if(!we(o)){o.forEach(e=>{i.push({...e,groupID:t,topicID:s})});this.getModule(_s).onNewGroupAtTips({dataList:i})}})}_getTopicLastMessage(e){if(!we(e.lastMsg)){const t={time:e.lastMsg.time,sequence:e.lastMsg.sequence,from:e.lastMsg.from,payload:e.lastMsg.elements[0]?e.lastMsg.elements[0].content:null,type:e.lastMsg.elements[0]?e.lastMsg.elements[0].type:\"\",nick:e.lastMsg.nick,version:e.lastMsg.messageVersion,cloudCustomData:e.lastMsg.cloudCustomData,isRevoked:2===e.lastMsg.isPlaceMessage,revoker:Lt(e.lastMsg.revokerInfo)?null:e.lastMsg.revokerInfo.revoker};e.lastMessage=t}}deleteTopicListInCommunity(e){const s=this._getLocalTopicList(e),o=this.getModule(_s);s.forEach(s=>{const{topicID:i}=s;this._deleteLocalTopic(e,i),this._getTopicTimeMap.delete(e),o.deleteLocalConversation(`${t.CONV_GROUP}${i}`)})}_computeUnreadCount(e){const{excludedUnreadSequenceList:t,readedSequence:s}=e.selfInfo;let o=e.nextMessageSeq-e.selfInfo.readedSequence-1;if(be(t)){let i=0;t.forEach(t=>{t>=s&&t<=e.nextMessageSeq-1&&(i+=1)}),i>=1&&(o-=i)}return o<0?0:o}_filterProfanity(e,t){const s=this.getModule(Us);if(!s)return!0;const{isAllowedToSend:o,modifiedText:i}=s.filterText(t[e],E);return!0===o&&(t[e]=i,!0)}updateLastMessage(t,s){const o=ft(t),i=this.getLocalTopic(o,t);if(i){const t=s.sequence+1;i.updateNextMessageSeq(t),i.updateLastMessage(s),this.emitOuterEvent(e.TOPIC_UPDATED,{groupID:o,topic:i})}}getMessageExtensions(e,t){_e.l(`${this._n}.getMessageExtensions startSequence:${t}`);const s=ft(e.to);return this.request({protocolName:Mi,requestData:{groupID:s,topicID:e.to,messageSequence:e.sequence,startSequence:t}})}modifyMessageExtensions(e,t,s=1){_e.l(`${this._n}.modifyMessageExtensions operateType:${s}`);const o=ft(e.to);return this.request({protocolName:mi,requestData:{groupID:o,topicID:e.to,messageSequence:e.sequence,extensionList:t,operateType:s}})}reset(){_e.l(this._n+\".reset\"),this._topicMap.clear(),this._getTopicTimeMap.clear(),this.TOPIC_CACHE_TIME=300,this.TOPIC_LAST_ACTIVE_TIME=3600}}class br{constructor(e){this._userModule=e,this._n=\"ProfileHandler\",this.TAG=\"profile\",this.accountProfileMap=new Map,this.expirationTime=864e5}setExpirationTime(e){this.expirationTime=e}getUserProfile(e){const t=this._n+\".getUserProfile\",s=e.userIDList;e.fromAccount=this._userModule.getMyAccount(),s.length>100&&(_e.w(`${t} ${Dt(100)}`),s.length=100);const o=[],i=[];let n;for(let c=0,l=s.length;c<l;c++)n=s[c],this._userModule.isMyFriend(n)&&this._contains(n)?i.push(this._getProfileFromMap(n)):o.push(n);if(0===o.length)return xn(i);e.toAccount=o;const r=e.bFromGetMyProfile||!1,a=[];e.toAccount.forEach(e=>{a.push({toAccount:e,standardSequence:0,customSequence:0})}),e.userItem=a;const u=new Cn(\"getUserProfile\");u.setMessage(s.length>5?\"userIDList.length:\"+s.length:\"userIDList:\"+s);return this._userModule.request({protocolName:Ys,requestData:e}).then(e=>{u.setNetworkType(this._userModule.getNetworkType()).end(),_e.i(t+\" ok\");const s=this._handleResponse(e).concat(i);return wn(r?s[0]:s)}).catch(e=>(this._userModule.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}getMyProfile(){const e=this._userModule.getMyAccount(),t=this._n+\".getMyProfile\";if(_e.l(`${t} myAccount:${e}`),this._fill(),this._contains(e)){const s=this._getProfileFromMap(e);return _e.d(`${t} from cache, myProfile:${JSON.stringify(s)}`),xn(s)}return this.getUserProfile({fromAccount:e,userIDList:[e],bFromGetMyProfile:!0})}_handleResponse(e){const{userProfileItem:t}=e.data;if(!be(t))return[];const s=[],o=Date.now();for(let i=0,n=t.length;i<n;i++){const{to:e,profileItem:o}=t[i];if(\"@TLS#NOT_FOUND\"===e||\"\"===e)continue;const{latestProfile:n}=this._update(e,this._getLatestProfileFromResponse(e,o));s.push(n)}return _e.l(`${this._n}._handleResponse cost ${Date.now()-o} ms`),s}_getLatestProfileFromResponse(e,t){const s={userID:e,profileCustomField:[]};if(!Lt(t))for(let o=0,i=t.length;o<i;o++)if(t[o].tag.indexOf(\"Tag_Profile_Custom\")>-1)s.profileCustomField.push({key:t[o].tag,value:t[o].value});else switch(t[o].tag){case Me.NICK:s.nick=t[o].value;break;case Me.GENDER:s.gender=t[o].value;break;case Me.BIRTHDAY:s.birthday=t[o].value;break;case Me.LOCATION:s.location=t[o].value;break;case Me.SELFSIGNATURE:s.selfSignature=t[o].value;break;case Me.ALLOWTYPE:s.allowType=t[o].value;break;case Me.LANGUAGE:s.language=t[o].value;break;case Me.AVATAR:s.avatar=t[o].value;break;case Me.MESSAGESETTINGS:s.messageSettings=t[o].value;break;case Me.ADMINFORBIDTYPE:s.adminForbidType=t[o].value;break;case Me.LEVEL:s.level=t[o].value;break;case Me.ROLE:s.role=t[o].value;break;default:_e.w(this._n+\"._getLatestProfileFromResponse unknown tag:\",t[o].tag,t[o].value)}return s}updateMyProfile(t){const s=this._n+\".updateMyProfile\";if(t.nick&&!1===this._userModule.filterProfanity(\"nick\",t))return Vn({code:nn.PROFANITY_FOUND});if(t.selfSignature&&!1===this._userModule.filterProfanity(\"selfSignature\",t))return Vn({code:nn.PROFANITY_FOUND});const o=new Cn(\"updateMyProfile\");o.setMessage(JSON.stringify(t));const i=(new tr).validate(t);if(!i.valid)return o.setCode(nn.UPDATE_PROFILE_INVALID_PARAM).setMoreMessage(\"info:\"+i.tips).setNetworkType(this._userModule.getNetworkType()).end(),_e.e(`${s} info:${i.tips}`),Vn({code:nn.UPDATE_PROFILE_INVALID_PARAM});const n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(\"profileCustomField\"===e?t.profileCustomField.forEach(e=>{n.push({tag:e.key,value:e.value})}):n.push({tag:Me[e.toUpperCase()],value:t[e]}));if(0===n.length){const e=new Fn({code:nn.UPDATE_PROFILE_NO_KEY});return o.setError(e,!0,this._userModule.getNetworkType()).end(),_e.e(s+\" failed. error:\",e),Vn(e)}const r=this._userModule.getMyAccount();return this._userModule.request({protocolName:js,requestData:{fromAccount:r,profileItem:n}}).then(i=>{o.setNetworkType(this._userModule.getNetworkType()).end(),_e.i(s+\" ok\");const{isProfileUpdated:n,latestProfile:a}=this._update(r,t);return!0===n&&this._userModule.emitOuterEvent(e.PROFILE_UPDATED,[a]),xn(a)}).catch(e=>(this._userModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}onProfileModified(t){const s=t.dataList;if(Lt(s))return;const o=s.length;let i;_e.d(`${this._n}.onProfileModified count:${o} dataList:`,t.dataList);const n=[];for(let e=0;e<o;e++){i=s[e].userID;const{isProfileUpdated:t,latestProfile:o}=this._update(i,this._getLatestProfileFromResponse(i,s[e].profileList));!0===t&&n.push(o)}n.length>0&&(this._userModule.emitInnerEvent(Yn,n),this._userModule.emitOuterEvent(e.PROFILE_UPDATED,n))}_fill(){if(0===this.accountProfileMap.size){const e=this._getCachedProfiles(),t=Date.now();for(let s=0,o=e.length;s<o;s++)t-e[s].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(e[s].userID,e[s]);_e.l(`${this._n}._fill from cache, size:${this.accountProfileMap.size}`)}}_update(e,t){let s,o=!1;const i=Date.now();if(this._contains(e)){s=this._getProfileFromMap(e),t.profileCustomField&&!0===Qe(s.profileCustomField,t.profileCustomField)&&(s.lastUpdatedTime=i,o=!0);Be(s,t,[\"profileCustomField\"])>0&&(s.lastUpdatedTime=i,o=!0)}else s=new tr(t),(this._userModule.isMyFriend(e)||e===this._userModule.getMyAccount())&&(s.lastUpdatedTime=i,o=!0,this.accountProfileMap.set(e,s));return this._flush(e===this._userModule.getMyAccount()),_e.l(`${this._n}._update account:${e} isProfileUpdated:${o}`),{isProfileUpdated:o,latestProfile:s}}_flush(e){const t=[...this.accountProfileMap.values()],s=this._userModule.getStorageModule();_e.d(`${this._n}._flush length:${t.length} flushAtOnce:${e}`),s.setItem(this.TAG,t,e)}_contains(e){return this.accountProfileMap.has(e)}_getProfileFromMap(e){return this.accountProfileMap.get(e)}_getCachedProfiles(){const e=this._userModule.getStorageModule().getItem(this.TAG);return Lt(e)?[]:e}onConversationsProfileUpdated(e){let t,s;const o=[];let i;for(let n=0,r=e.length;n<r;n++)t=e[n],s=t.userID,this._userModule.isMyFriend(s)&&(this._contains(s)?(i=this._getProfileFromMap(s),Be(i,t)>0&&o.push(s)):o.push(t.userID));0!==o.length&&(_e.i(`${this._n}.onConversationsProfileUpdated toAccountList:${o}`),this.getUserProfile({userIDList:o}))}getNickAndAvatarByUserID(e){if(this._contains(e)){const t=this._getProfileFromMap(e);return{nick:t.nick,avatar:t.avatar}}return{nick:\"\",avatar:\"\"}}reset(){this._flush(!0),this.accountProfileMap.clear()}}class wr{constructor(e){Lt||(this.userID=e.userID||\"\",this.timeStamp=e.timeStamp||0)}}class Fr{constructor(e){this._userModule=e,this._n=\"BlacklistHandler\",this._blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.currentSequence=0}getLocalBlacklist(){return[...this._blacklistMap.keys()]}getBlacklist(){const t=this._n+\".getBlacklist\",s={fromAccount:this._userModule.getMyAccount(),maxLimited:this.maxLimited,startIndex:0,lastSequence:this.currentSequence},o=new Cn(\"getBlacklist\");return this._userModule.request({protocolName:zs,requestData:s}).then(s=>{const{blackListItem:i,currentSequence:n}=s.data,r=Lt(i)?0:i.length;o.setNetworkType(this._userModule.getNetworkType()).setMessage(\"count:\"+r).end(),_e.i(t+\" ok\"),this.currentSequence=n,this._handleResponse(i,!0),this._userModule.emitOuterEvent(e.BLACKLIST_UPDATED,[...this._blacklistMap.keys()])}).catch(e=>(this._userModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}addBlacklist(e){const t=new Cn(\"addToBlacklist\"),s=this._n+\".addBlacklist\",o=this._userModule.getMyAccount();if(1===e.userIDList.length&&e.userIDList[0]===o){const e=nn.CANNOT_ADD_SELF_TO_BLACKLIST,o=this._userModule.getErrorMessage(e);t.setCode(e).setMessage(o).setNetworkType(this._userModule.getNetworkType()).end();const i=new Fn({code:e});return _e.e(s+\" failed. error:\",i),Vn(i)}e.userIDList.includes(o)&&(e.userIDList=e.userIDList.filter(e=>e!==o)),e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList;return this._userModule.request({protocolName:Js,requestData:e}).then(o=>(t.setNetworkType(this._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\"+e.userIDList.length:\"userIDList:\"+e.userIDList).end(),_e.i(s+\" ok\"),this._handleResponse(o.resultItem,!0),wn([...this._blacklistMap.keys()]))).catch(e=>(this._userModule.probeNetwork().then(([s,o])=>{t.setError(e,s,o).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}_handleResponse(e,t){if(!Lt(e)){let s,o,i;for(let n=0,r=e.length;n<r;n++)o=e[n].to,i=e[n].resultCode,(we(i)||0===i)&&(t?(s=this._blacklistMap.has(o)?this._blacklistMap.get(o):new wr,s.userID=o,!Lt(e[n].addBlackTimeStamp)&&(s.timeStamp=e[n].addBlackTimeStamp),this._blacklistMap.set(o,s)):this._blacklistMap.has(o)&&(s=this._blacklistMap.get(o),this._blacklistMap.delete(o)))}_e.l(`${this._n}._handleResponse total:${this._blacklistMap.size} bAdd:${t}`)}deleteBlacklist(e){const t=this._n+\".deleteBlacklist\",s=new Cn(\"removeFromBlacklist\");e.fromAccount=this._userModule.getMyAccount(),e.toAccount=e.userIDList;return this._userModule.request({protocolName:Xs,requestData:e}).then(o=>(s.setNetworkType(this._userModule.getNetworkType()).setMessage(e.userIDList.length>5?\"userIDList.length:\"+e.userIDList.length:\"userIDList:\"+e.userIDList).end(),_e.i(t+\" ok\"),this._handleResponse(o.data.resultItem,!1),wn([...this._blacklistMap.keys()]))).catch(e=>(this._userModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}onAccountDeleted(t){const s=[];let o;for(let e=0,i=t.length;e<i;e++)o=t[e],this._blacklistMap.has(o)&&(this._blacklistMap.delete(o),s.push(o));s.length>0&&(_e.l(`${this._n}.onAccountDeleted count:${s.length} userIDList:`,s),this._userModule.emitOuterEvent(e.BLACKLIST_UPDATED,[...this._blacklistMap.keys()]))}onAccountAdded(t){const s=[];let o;for(let e=0,i=t.length;e<i;e++)o=t[e],this._blacklistMap.has(o)||(this._blacklistMap.set(o,new wr({userID:o})),s.push(o));s.length>0&&(_e.l(`${this._n}.onAccountAdded count:${s.length} userIDList:`,s),this._userModule.emitOuterEvent(e.BLACKLIST_UPDATED,[...this._blacklistMap.keys()]))}reset(){this._blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.currentSequence=0}}const $r=function(e){const t=String(e).replace(/[=]+$/,\"\");let s=\"\";if(t.length%4==1)return\"\";for(let i,n,r=0,a=0;n=t.charAt(a++);~n&&(i=r%4?64*i+n:n,r++%4)?s+=String.fromCharCode(255&i>>(-2*r&6)):0)n=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(n);try{return decodeURIComponent(escape(s))}catch(o){return\"\"}};class qr{constructor(e){this._userModule=e,this._n=\"UserStatusHandler\",this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100;this._userModule.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){const e=this._userModule.getCloudConfig(\"status_query_count\"),t=this._userModule.getCloudConfig(\"status_sub_count\"),s=this._userModule.getCloudConfig(\"status_unsub_count\");_e.l(`${this._n}._onCloudConfigUpdated statusQueryCount:${e} statusSubscribeCount:${t} statusUnsubscribeCount:`+s),we(e)||(this.MAX_QUERY_USER_COUNT=parseInt(e,10)),we(e)||(this.MAX_SUBSCRIBE_USER_COUNT=parseInt(t,10)),we(e)||(this.MAX_UNSUBSCRIBE_USER_COUNT=parseInt(s,10))}onUserStatusUpdated(t){const{dataList:s}=t,o=this._userModule.getMyUserID(),i=this._userModule.getModule(ms),n=s.map(e=>{const{to:t,statusType:s,customStatus:n}=e,r=$r(n);return t===o&&i.setCustomStatus(r),{userID:t,statusType:s,customStatus:r}});this._userModule.emitOuterEvent(e.USER_STATUS_UPDATED,n)}setSelfStatus(e){const t=this._n+\".setSelfStatus\";if(!1===this._userModule.filterProfanity(\"customStatus\",e))return Vn({code:nn.PROFANITY_FOUND});const s=new Cn(\"setSelfStatus\"),{customStatus:o}=e;return this._userModule.request({protocolName:zi,requestData:{customStatus:o}}).then(e=>{s.setNetworkType(this._userModule.getNetworkType()).setMessage(\"customStatus:\"+o).end(),_e.l(`${t} ok. customStatus:${o}`);return this._userModule.getModule(ms).setCustomStatus(o),wn({userID:this._userModule.getMyUserID(),statusType:1,customStatus:o})}).catch(e=>(this._userModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}getUserStatus(e){const t=this._n+\".getUserStatus\",{userIDList:s=[]}=e,o=this._userModule.getMyUserID();let i=[...s],n=void 0;const r=i.indexOf(o);if(r>-1){i.splice(r,1);const e=this._userModule.getModule(ms).getCustomStatus();n={userID:o,statusType:1,customStatus:e}}if(0===i.length)return xn({successUserList:[n],failureUserList:[]});if(!this._userModule.canIUse(M.USER_STATUS))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});i.length>this.MAX_QUERY_USER_COUNT&&(_e.w(`${t} ${Dt(this.MAX_QUERY_USER_COUNT)}`),i=s.slice(0,this.MAX_QUERY_USER_COUNT));const a=new Cn(\"getUserStatus\");return this._userModule.request({protocolName:Ji,requestData:{userIDList:i}}).then(e=>{const{successUserList:o=[],failureUserList:i=[]}=e.data,r=o.map(e=>{const{userID:t,statusType:s,customStatus:o}=e;return{userID:t,statusType:s,customStatus:$r(o)}}),u=i.map(e=>{const{userID:t,invalidUserID:s,errorCode:o,errorInfo:i}=e;return{userID:Lt(s)?t:s,code:o,message:i}});we(n)||r.unshift(n);const c=`userID count:${s.length}, success count:${r.length}, fail count:${u.length}`;return a.setNetworkType(this._userModule.getNetworkType()).setMessage(\"\"+c).end(),_e.l(`${t} ok. ${c}.`),wn({successUserList:r,failureUserList:u})}).catch(e=>(this._userModule.probeNetwork().then(([t,o])=>{a.setMessage(\"userID count:\"+s.length).setError(e,t,o).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}subscribeUserStatus(e){if(!this._userModule.canIUse(M.USER_STATUS))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".subscribeUserStatus\",{userIDList:s=[]}=e;let o=[...s];o.length>this.MAX_SUBSCRIBE_USER_COUNT&&(_e.w(`${t} ${Dt(this.MAX_SUBSCRIBE_USER_COUNT)}`),o=s.slice(0,this.MAX_SUBSCRIBE_USER_COUNT));const i=new Cn(\"subscribeUserStatus\"),n=\"userID count:\"+s.length;return _e.l(`${t} ${n}`),this._userModule.request({protocolName:Xi,requestData:{userIDList:o}}).then(e=>{const{failureUserList:s=[]}=e.data,o=s.map(e=>{const{userID:t,invalidUserID:s,errorCode:o,errorInfo:i}=e;return{userID:Lt(s)?t:s,code:o,message:i}});return i.setNetworkType(this._userModule.getNetworkType()).setMessage(`${n} fail count:${o.length}`).end(),_e.l(`${t} ok. fail count:${o.length}.`),wn({failureUserList:o})}).catch(e=>(this._userModule.probeNetwork().then(([t,s])=>{i.setMessage(\"\"+n).setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}unsubscribeUserStatus(e){if(!this._userModule.canIUse(M.USER_STATUS))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".unsubscribeUserStatus\",{userIDList:s=[]}=e||{};let o=[...s];s.length>this.MAX_UNSUBSCRIBE_USER_COUNT&&(_e.w(`${t} ${Dt(this.MAX_UNSUBSCRIBE_USER_COUNT)}`),o=s.slice(0,this.MAX_UNSUBSCRIBE_USER_COUNT));const i=new Cn(\"unsubscribeUserStatus\"),n=\"userID count:\"+s.length;_e.l(`${t} ${n}`);const r={userIDList:o};return 0===o.length&&(r.userIDList=void 0,r.unsubscribeAll=1),this._userModule.request({protocolName:Zi,requestData:r}).then(e=>{const{failureUserList:s=[]}=e.data,o=s.map(e=>{const{userID:t,invalidUserID:s,errorCode:o,errorInfo:i}=e;return{userID:Lt(s)?t:s,code:o,message:i}});return i.setNetworkType(this._userModule.getNetworkType()).setMessage(`${n} fail count:${o.length}`).end(),_e.l(`${t} ok. fail count:${o.length}.`),wn({failureUserList:o})}).catch(e=>(this._userModule.probeNetwork().then(([t,s])=>{i.setMessage(\"\"+n).setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}reset(){this.MAX_QUERY_USER_COUNT=500,this.MAX_SUBSCRIBE_USER_COUNT=100,this.MAX_UNSUBSCRIBE_USER_COUNT=100}}class xr extends Fs{constructor(e){super(e),this._n=\"UserModule\",this._profileHandler=new br(this),this._blacklistHandler=new Fr(this),this._userStatusHandler=new qr(this);this.getInnerEmitterInstance().on(Kn,this.onContextUpdated,this)}onContextUpdated(e){this._profileHandler.getMyProfile(),this._blacklistHandler.getBlacklist()}onProfileModified(e){this._profileHandler.onProfileModified(e)}onRelationChainModified(e){const{dataList:t}=e;if(Lt(t))return;const s=[];t.forEach(e=>{e.blackListDelAccount&&s.push(...e.blackListDelAccount)}),s.length>0&&this._blacklistHandler.onAccountDeleted(s);const o=[];t.forEach(e=>{e.blackListAddAccount&&o.push(...e.blackListAddAccount)}),o.length>0&&this._blacklistHandler.onAccountAdded(o)}onConversationsProfileUpdated(e){this._profileHandler.onConversationsProfileUpdated(e)}getMyAccount(){return this.getMyUserID()}getMyProfile(){return this._profileHandler.getMyProfile()}getStorageModule(){return this.getModule(Ms)}filterProfanity(e,t){const s=this.getModule(Us);if(!s)return!0;const{isAllowedToSend:o,modifiedText:i}=s.filterText(t[e],y);return!0===o&&(t[e]=i,!0)}isMyFriend(e){const t=this.getModule(ps);return!!t&&t.isMyFriend(e)}getUserProfile(e){return this._profileHandler.getUserProfile(e)}updateMyProfile(e){return this._profileHandler.updateMyProfile(e)}getNickAndAvatarByUserID(e){return this._profileHandler.getNickAndAvatarByUserID(e)}getLocalBlacklist(){const e=this._blacklistHandler.getLocalBlacklist();return xn(e)}addBlacklist(e){return this._blacklistHandler.addBlacklist(e)}deleteBlacklist(e){return this._blacklistHandler.deleteBlacklist(e)}onUserStatusUpdated(e){this._userStatusHandler.onUserStatusUpdated(e)}setSelfStatus(e){return this._userStatusHandler.setSelfStatus(e)}getUserStatus(e){return this._userStatusHandler.getUserStatus(e)}subscribeUserStatus(e){return this._userStatusHandler.subscribeUserStatus(e)}unsubscribeUserStatus(e){return this._userStatusHandler.unsubscribeUserStatus(e)}reset(){_e.l(this._n+\".reset\"),this._profileHandler.reset(),this._blacklistHandler.reset(),this._userStatusHandler.reset()}}class Vr{constructor(e,t){this._m=e,this._isLoggedIn=!1,this._SDKAppID=t.SDKAppID,this._userID=t.userID||\"\",this._userSig=t.userSig||\"\",this._version=\"2.27.6\",this._a2Key=\"\",this._tinyID=\"\",this._customStatus=\"\",this._contentType=\"json\",this._unlimitedAVChatRoom=t.unlimitedAVChatRoom,this._scene=t.scene||\"\",this._oversea=t.oversea,this._instanceID=t.instanceID,this._statusInstanceID=0,this._isDevMode=t.devMode,this._proxyServer=t.proxyServer,this._fileUploadProxy=t.fileUploadProxy,this._fileDownloadProxy=t.fileDownloadProxy}isLoggedIn(){return this._isLoggedIn}isOversea(){return this._oversea}isPrivateNetWork(){return this._proxyServer}isDevMode(){return this._isDevMode}isSingaporeSite(){return this._SDKAppID>=2e7&&this._SDKAppID<3e7||this._SDKAppID>=172e7&&this._SDKAppID<173e7}isKoreaSite(){return this._SDKAppID>=3e7&&this._SDKAppID<4e7||this._SDKAppID>=173e7&&this._SDKAppID<174e7}isGermanySite(){return this._SDKAppID>=4e7&&this._SDKAppID<5e7||this._SDKAppID>=174e7&&this._SDKAppID<175e7}isIndiaSite(){return this._SDKAppID>=5e7&&this._SDKAppID<6e7||this._SDKAppID>=175e7&&this._SDKAppID<176e7}isJapanSite(){return this._SDKAppID>=6e7&&this._SDKAppID<7e7||this._SDKAppID>=176e7&&this._SDKAppID<177e7}isUSASite(){return this._SDKAppID>=7e7&&this._SDKAppID<8e7||this._SDKAppID>=177e7&&this._SDKAppID<178e7}isIntl(){return 0===(e=this._SDKAppID)||e>=2e7&&e<8e7||e>=172e7&&e<178e7;var e}isUnlimitedAVChatRoom(){return this._unlimitedAVChatRoom}setUserID(e){this._userID=e}getUserID(){return this._userID}setUserSig(e){this._userSig=e}getUserSig(){return this._userSig}getSDKAppID(){return this._SDKAppID}setTinyID(e){this._tinyID=e,this._isLoggedIn=!0}getTinyID(){return this._tinyID}setCustomStatus(e){this._customStatus=e}getCustomStatus(){return this._customStatus}getScene(){return te?window.tencent_cloud_im_csig_flutter_for_web_25F_cy:this._isTUIKit()?\"tuikit\":this._scene}getInstanceID(){return this._instanceID}getStatusInstanceID(){return this._statusInstanceID}setStatusInstanceID(e){this._statusInstanceID=e}getVersion(){return this._version}getA2Key(){return this._a2Key}setA2Key(e){this._a2Key=e}getContentType(){return this._contentType}getProxyServer(){return this._proxyServer}getFileUploadProxy(){return this._fileUploadProxy}getFileDownloadProxy(){return this._fileDownloadProxy}_isTUIKit(){let e=!1,t=!1,s=!1,o=!1,i=[];P&&(i=Object.keys(w)),b&&(i=k?Object.keys(uni):Object.keys(window));for(let r=0,a=i.length;r<a;r++)if(i[r].toLowerCase().includes(\"uikit\")){e=!0;break}if(i=null,P&&!$e(w.createGamePortal)&&$e(getApp)&&!we(getApp())){const e=getApp().globalData;Pe(e)&&!0===e.isTUIKit&&(t=!0)}!0===this._m.getModule(Ms).getStorageSync(`TIM_${this._SDKAppID}_isTUIKit`)&&(s=!0);let n=null;if(L&&!N&&\"undefined\"==typeof uni&&__wxConfig&&(n=__wxConfig.pages),v&&\"undefined\"==typeof uni&&__qqConfig&&(n=__qqConfig.pages),be(n)&&n.length>0){for(let e=0,t=n.length;e<t;e++)if(n[e].toLowerCase().includes(\"tui\")){o=!0;break}n=null}return e||t||s||o}reset(){this._isLoggedIn=!1,this._userSig=\"\",this._a2Key=\"\",this._tinyID=\"\",this._customStatus=\"\",this._statusInstanceID=0}}class Br extends Fs{constructor(e){super(e),this._n=\"SignModule\",this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0,jn.mixin(this)}onCheckTimer(e){this.isLoggedIn()&&e%this._helloInterval==0&&this._hello()}login(e){let t=\"\";if(this.isLoggedIn()){const e=this.getMyUserID();return t=this.getErrorMessage(\"RepeatLogin\",e),t&&_e.w(t),xn({actionStatus:\"OK\",errorCode:0,errorInfo:t,repeatLogin:!0})}if(Date.now()-this._lastLoginTs<=15e3)return this.outputWarning(\"LoggingIn\",e.userID),Vn({code:nn.REPEAT_LOGIN});_e.l(`${this._n}.login userID:${e.userID}`);const s=this._checkLoginInfo(e);if(0!==s.code)return Vn(s);const o=this.getModule(ms),{userID:i,userSig:n}=e;o.setUserID(i),o.setUserSig(n);return this.getModule(Es).updateProtocolConfig(),this._login()}_login(){const e=this.getModule(ms),t=e.getScene();let s=0;const o=new Cn(\"login\");o.setMessage(\"\"+t).setMoreMessage(\"identifier:\"+this.getMyUserID()),k?\"tuikit\"===t?o.setUIPlatform(4):o.setUIPlatform(3):P?\"tuikit\"===t?o.setUIPlatform(12):o.setUIPlatform(11):b&&(te?\"flutter_web_uikit\"===t?o.setUIPlatform(21):o.setUIPlatform(20):this._isReactUIKit()?ee?o.setUIPlatform(25):o.setUIPlatform(24):ee?\"tuikit\"===t?o.setUIPlatform(17):o.setUIPlatform(16):\"tuikit\"===t?o.setUIPlatform(14):o.setUIPlatform(13));const i=this.getModule(Gs);if(i.canIUseOfflinePush()){this._isWebUniapp=i.getUniAppPlatform();const t=this._getStatusInstanceID();e.setStatusInstanceID(t);this.getModule(Es).updateProtocolConfig(),s=i.getDeviceBrand()}const n=this._n+\"._login\";return this._lastLoginTs=Date.now(),this.request({protocolName:$s,requestData:{deviceBrand:s,isWebUniapp:this._isWebUniapp}}).then(s=>{this._lastLoginTs=0;const i=Date.now();let r=null;const{a2Key:a,tinyID:u,helloInterval:c,instanceID:l,timeStamp:d,customStatus:p=\"\",purchaseBits:h}=s.data;_e.l(`${n} ok. scene:${t} helloInterval:${c} instanceID:${l} timeStamp:${d}`);const g=1e3*d,_=i-o.getStartTs(),m=g+parseInt(_/2)-i,M=o.getStartTs()+m;if(o.start(M),function(e,t){ue=t;const s=new Date;s.setTime(e),_e.i(`baseTime from server:${s} offset:${ue}`)}(g,m),!u)throw r=new Fn({code:nn.NO_TINYID}),o.setError(r,!0,this.getNetworkType()).end(),r;if(!a)throw r=new Fn({code:nn.NO_A2KEY}),o.setError(r,!0,this.getNetworkType()).end(),r;const f=$r(p);if(o.setNetworkType(this.getNetworkType()).setMoreMessage(`helloInterval:${c} instanceID:${l} offset:${m} customStatus:${f}`).end(),e.setA2Key(a),e.setTinyID(u),e.setStatusInstanceID(l),e.setCustomStatus(f),h){this.getModule(Os).onPushedConfig({errorCode:0,expiredTime:0,purchaseBits:h})}this.getModule(Es).updateProtocolConfig(),this.emitInnerEvent(Kn),this._helloInterval=c,this.triggerReady();const I=this.getModule(Gs);I.canIUseOfflinePush()&&(uni.setStorageSync(\"timUniAppInstanceID\",l),I.init()),this._fetchCloudControlConfig();return this.getModule(Us).init(),s}).catch(e=>(this.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end(!0)}),this._m.setNotReadyReason(nn.LOGIN_FAILED),_e.e(n+\" failed. error:\",e),this._lastLoginTs=0,this._m.onLoginFailed(),Vn(e)))}logout(e=0){if(!this.isLoggedIn())return Vn({code:nn.USER_NOT_LOGGED_IN});new Cn(\"logout\").setNetworkType(this.getNetworkType()).setMessage(\"identifier:\"+this.getMyUserID()).end(!0);const t=this._n+\".logout\";return _e.i(`${t} type:${e}`),0===e&&this._m.setNotReadyReason(nn.LOGGED_OUT),this.request({protocolName:qs,requestData:{type:e}}).then(()=>(this.resetReady(),xn({}))).catch(e=>(_e.e(t+\" error:\",e),this.resetReady(),xn({})))}_fetchCloudControlConfig(){this.getModule(As).fetchConfig()}_getStatusInstanceID(){return uni.getStorageSync(\"timUniAppInstanceID\")}_hello(){this._lastWsHelloTs=Date.now(),this.request({protocolName:xs,requestData:{isWebUniapp:this._isWebUniapp}}).catch(e=>{_e.w(this._n+\"._hello error:\",e)})}getLastWsHelloTs(){return this._lastWsHelloTs}_checkLoginInfo(e){let t=0;return Lt(this.getModule(ms).getSDKAppID())?t=nn.NO_SDKAPPID:Lt(e.userID)?t=nn.NO_IDENTIFIER:Lt(e.userSig)&&(t=nn.NO_USERSIG),{code:t}}_isReactUIKit(){return b&&void 0!==window.tencent_cloud_im_csig_react_uikit_23F_xa}onMultipleAccountKickedOut(s){new Cn(\"kickedOut\").setNetworkType(this.getNetworkType()).setMessage(`type:${t.KICKED_OUT_MULT_ACCOUNT} newInstanceInfo:${JSON.stringify(s)}`).end(!0),_e.w(`${this._n}.onMultipleAccountKickedOut userID:${this.getMyUserID()} newInstanceInfo:`,s),this.logout(1).then(()=>{this.emitOuterEvent(e.KICKED_OUT,{type:t.KICKED_OUT_MULT_ACCOUNT}),this._m.setNotReadyReason(nn.KICKED_OUT_MULT_ACCOUNT),this._m.reset()})}onMultipleDeviceKickedOut(s){new Cn(\"kickedOut\").setNetworkType(this.getNetworkType()).setMessage(`type:${t.KICKED_OUT_MULT_DEVICE} newInstanceInfo:${JSON.stringify(s)}`).end(!0),_e.w(`${this._n}.onMultipleDeviceKickedOut userID:${this.getMyUserID()} newInstanceInfo:`,s),this.logout(1).then(()=>{this.emitOuterEvent(e.KICKED_OUT,{type:t.KICKED_OUT_MULT_DEVICE}),this._m.setNotReadyReason(nn.KICKED_OUT_MULT_DEVICE),this._m.reset()})}onUserSigExpired(){new Cn(\"kickedOut\").setNetworkType(this.getNetworkType()).setMessage(t.KICKED_OUT_USERSIG_EXPIRED).end(!0),_e.w(this._n+\".onUserSigExpired: userSig expired\");0!==this.getModule(ms).getStatusInstanceID()&&(this.emitOuterEvent(e.KICKED_OUT,{type:t.KICKED_OUT_USERSIG_EXPIRED}),this._m.setNotReadyReason(nn.KICKED_OUT_USERSIG_EXPIRED),this._m.reset())}onRestApiKickedOut(s){new Cn(\"kickedOut\").setNetworkType(this.getNetworkType()).setMessage(`type:${t.KICKED_OUT_REST_API} newInstanceInfo:${JSON.stringify(s)}`).end(!0),_e.w(`${this._n}.onRestApiKickedOut userID:${this.getMyUserID()} newInstanceInfo:`,s);if(0!==this.getModule(ms).getStatusInstanceID()){this.emitOuterEvent(e.KICKED_OUT,{type:t.KICKED_OUT_REST_API}),this._m.setNotReadyReason(nn.KICKED_OUT_REST_API),this._m.reset();this.getModule(Ss).onRestApiKickedOut()}}reset(){_e.l(this._n+\".reset\"),this.resetReady(),this._helloInterval=120,this._lastLoginTs=0,this._lastWsHelloTs=0,this._isWebUniapp=0}}function Hr(){return null}class Kr{constructor(e){this._m=e,this._n=\"StorageModule\",this._storageQueue=new Map,this._errorTolerantHandle()}_errorTolerantHandle(){P||!we(window)&&this._canIUseCookies()||(this.getItem=Hr,this.setItem=Hr,this.removeItem=Hr,this.clear=Hr)}onCheckTimer(e){if(e%20==0){if(0===this._storageQueue.size)return;this._doFlush()}}_doFlush(){try{for(const[e,t]of this._storageQueue)this._setStorageSync(this._getKey(e),t);this._storageQueue.clear()}catch(e){_e.w(this._n+\"._doFlush error:\",e)}}_getPrefix(){const e=this._m.getModule(ms);return`TIM_${e.getSDKAppID()}_${e.getUserID()}_`}_getKey(e){return`${this._getPrefix()}${e}`}getItem(e,t=!0){try{const s=t?this._getKey(e):e;return this.getStorageSync(s)}catch(s){return _e.w(this._n+\".getItem error:\",s),{}}}setItem(e,t,s=!1,o=!0){if(s){const s=o?this._getKey(e):e;this._setStorageSync(s,t)}else this._storageQueue.set(e,t)}clear(){try{P?w.clearStorageSync():this._canIUseCookies()&&localStorage.clear()}catch(e){_e.w(this._n+\".clear error:\",e)}}removeItem(e,t=!0){try{const s=t?this._getKey(e):e;this._removeStorageSync(s)}catch(s){_e.w(this._n+\".removeItem error:\",s)}}getSize(e,t=\"b\"){try{const s={size:0,limitSize:5242880,unit:t};if(Object.defineProperty(s,\"leftSize\",{enumerable:!0,get:()=>s.limitSize-s.size}),P&&(s.limitSize=1024*w.getStorageInfoSync().limitSize),e)s.size=JSON.stringify(this.getItem(e)).length+this._getKey(e).length;else if(P){const{keys:e}=w.getStorageInfoSync();e.forEach(e=>{s.size+=JSON.stringify(this.getStorageSync(e)).length+this._getKey(e).length})}else if(this._canIUseCookies())for(const e in localStorage)localStorage.hasOwnProperty(e)&&(s.size+=localStorage.getItem(e).length+e.length);return this._convertUnit(s)}catch(s){_e.w(this._n+\" error:\",s)}}_convertUnit(e){const t={},{unit:s}=e;t.unit=s;for(const o in e)\"number\"==typeof e[o]&&(\"kb\"===s.toLowerCase()?t[o]=Math.round(e[o]/1024):\"mb\"===s.toLowerCase()?t[o]=Math.round(e[o]/1024/1024):t[o]=e[o]);return t}_setStorageSync(e,t){P?O?my.setStorageSync({key:e,data:t}):w.setStorageSync(e,t):this._canIUseCookies()&&localStorage.setItem(e,JSON.stringify(t))}getStorageSync(e){if(P){if(O){return my.getStorageSync({key:e}).data}return w.getStorageSync(e)}return this._canIUseCookies()?JSON.parse(localStorage.getItem(e)):{}}_removeStorageSync(e){P?O?my.removeStorageSync({key:e}):w.removeStorageSync(e):this._canIUseCookies()&&localStorage.removeItem(e)}_canIUseCookies(){return navigator&&navigator.cookieEnabled&&localStorage}reset(){_e.l(this._n+\".reset\"),this._doFlush()}}class Wr{constructor(e){this._n=\"SSOLogBody\",this._report=[]}pushIn(e){_e.d(this._n+\".pushIn\",this._report.length,e),this._report.push(e)}backfill(e){be(e)&&0!==e.length&&(_e.d(this._n+\".backfill\",this._report.length,e.length),this._report.unshift(...e))}getLogsNumInMemory(){return this._report.length}isEmpty(){return 0===this._report.length}_reset(){this._report.length=0,this._report=[]}getLogsInMemory(){const e=this._report.slice();return this._reset(),e}}const Yr=function(e){const t=e.getModule(ms);return{SDKType:10,SDKAppID:t.getSDKAppID(),SDKVersion:t.getVersion(),tinyID:Number(t.getTinyID()),userID:t.getUserID(),platform:e.getPlatform(),instanceID:t.getInstanceID(),traceID:ce()}};class jr extends Fs{constructor(e){super(e),this._n=\"EventStatModule\",this.TAG=\"im-ssolog-event\",this._reportBody=new Wr,this.MIN_THRESHOLD=20,this.MAX_THRESHOLD=100,this.WAITING_TIME=6e4,this.REPORT_LEVEL=[4,5,6],this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._lastReportTime=Date.now();const t=this.getInnerEmitterInstance();t.on(Kn,this._onLoginSuccess,this),t.on(Wn,this._onCloudConfigUpdated,this)}reportAtOnce(){_e.d(this._n+\".reportAtOnce\"),this._report()}_onLoginSuccess(){const e=this.getModule(Ms),t=e.getItem(this.TAG,!1);!Lt(t)&&$e(t.forEach)&&(_e.l(`${this._n}._onLoginSuccess get ssolog in storage, count:${t.length}`),t.forEach(e=>{this._reportBody.pushIn(e)}),e.removeItem(this.TAG,!1))}_onCloudConfigUpdated(){const e=this.getCloudConfig(\"evt_rpt_threshold\"),t=this.getCloudConfig(\"evt_rpt_waiting\"),s=this.getCloudConfig(\"evt_rpt_level\"),o=this.getCloudConfig(\"evt_rpt_sdkappid_bl\"),i=this.getCloudConfig(\"evt_rpt_tinyid_wl\");we(e)||(this.MIN_THRESHOLD=Number(e)),we(t)||(this.WAITING_TIME=Number(t)),we(s)||(this.REPORT_LEVEL=s.split(\",\").map(e=>Number(e))),we(o)||(this.REPORT_SDKAPPID_BLACKLIST=o.split(\",\").map(e=>Number(e))),we(i)||(this.REPORT_TINYID_WHITELIST=i.split(\",\"))}pushIn(e){e instanceof Cn&&(e.updateTimeStamp(),this._reportBody.pushIn(e),this._reportBody.getLogsNumInMemory()>=this.MIN_THRESHOLD&&this._report())}onCheckTimer(){Date.now()<this._lastReportTime+this.WAITING_TIME||this._reportBody.isEmpty()||this._report()}_filterLogs(e){const t=this.getModule(ms),s=t.getSDKAppID(),o=t.getTinyID();if(mt(this.REPORT_SDKAPPID_BLACKLIST,s)&&!Mt(this.REPORT_TINYID_WHITELIST,o))return[];return e.filter(e=>this.REPORT_LEVEL.includes(e.level))}_report(){if(this._reportBody.isEmpty())return;const e=this._reportBody.getLogsInMemory(),t=this._filterLogs(e);if(0===t.length)return void(this._lastReportTime=Date.now());const s={header:Yr(this),event:t};this.request({protocolName:Gi,requestData:{...s}}).then(()=>{this._lastReportTime=Date.now()}).catch(t=>{_e.w(`${this._n}.report failed. networkType:${this.getNetworkType()} error:`,t),this._reportBody.backfill(e);this._reportBody.getLogsNumInMemory()>this.MAX_THRESHOLD&&this._flushAtOnce()})}_flushAtOnce(){const e=this.getModule(Ms),t=e.getItem(this.TAG,!1),s=this._reportBody.getLogsInMemory(),o=this._n+\"._flushAtOnce\";if(Lt(t))_e.l(`${o} count:${s.length}`),e.setItem(this.TAG,s,!0,!1);else{let i=s.concat(t);i.length>this.MAX_THRESHOLD&&(i=i.slice(0,this.MAX_THRESHOLD)),_e.l(`${o} count:${i.length}`),e.setItem(this.TAG,i,!0,!1)}}reset(){_e.l(this._n+\".reset\"),this._lastReportTime=0,this._report(),this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[]}}const zr=\"none\",Jr=\"online\",Xr=[nn.OVER_FREQUENCY_LIMIT,nn.OPEN_SERVICE_OVERLOAD_ERROR];class Zr{constructor(e){this._m=e,this._networkType=\"\",this._n=\"NetMonitorModule\",this.MAX_WAIT_TIME=3e3,this._mpNetworkStatusCallback=null,this._webOnlineCallback=null,this._webOfflineCallback=null}start(){P?(w.getNetworkType({success:e=>{this._networkType=e.networkType||e.subtype||\"\",e.networkType===zr?_e.w(this._n+\".start no network, please check!\"):_e.i(`${this._n}.start networkType:${e.networkType}`)}}),this._mpNetworkStatusCallback=this._onNetworkStatusChange.bind(this),w.onNetworkStatusChange(this._mpNetworkStatusCallback)):(this._networkType=Jr,this._webOnlineCallback=this._onWebOnline.bind(this),this._webOfflineCallback=this._onWebOffline.bind(this),window&&(window.addEventListener(\"online\",this._webOnlineCallback),window.addEventListener(\"offline\",this._webOfflineCallback)))}_onWebOnline(){this._onNetworkStatusChange({isConnected:!0,networkType:Jr})}_onWebOffline(){this._onNetworkStatusChange({isConnected:!1,networkType:zr})}_onNetworkStatusChange(e){const{isConnected:t,networkType:s}=e,o=this._n+\"._onNetworkStatusChange\";let i=!1;if(t){if(_e.i(`${o} previous:${this._networkType} current:${s}`),this._networkType!==s){i=!0;this._m.getModule(Ss).reConnect(!0)}}else if(this._networkType!==s){i=!0,_e.w(o+\" no network, please check!\");this._m.getModule(Ss).offline()}if(i){new Cn(\"networkChange\").setMessage(`isConnected:${t} previousNetworkType:${this._networkType} networkType:${s}`).end(),this._networkType=s}}probe(e){if(!we(e)&&Xr.includes(e.code))return Promise.resolve([!0,this._networkType]);const t=this._n+\".probe\";return new Promise((e,s)=>{P?w.getNetworkType({success:s=>{this._networkType=s.networkType,s.networkType===zr?(_e.w(t+\" no network, please check!\"),e([!1,s.networkType])):(_e.i(`${t} networkType:${s.networkType}`),e([!0,s.networkType]))}}):this._networkType===zr?e([!1,zr]):e([!0,Jr])})}getNetworkType(){return this._networkType}reset(){_e.l(this._n+\".reset\"),P?null!==this._mpNetworkStatusCallback&&(w.offNetworkStatusChange&&(U||N?w.offNetworkStatusChange(this._mpNetworkStatusCallback):w.offNetworkStatusChange()),this._mpNetworkStatusCallback=null):window&&(null!==this._webOnlineCallback&&(window.removeEventListener(\"online\",this._webOnlineCallback),this._webOnlineCallback=null),null!==this._onWebOffline&&(window.removeEventListener(\"offline\",this._webOfflineCallback),this._webOfflineCallback=null))}}function Qr(e,t){return e(t={exports:{}},t.exports),t.exports}var ea=Qr((function(e){var t=Object.prototype.hasOwnProperty,s=\"~\";function o(){}function i(e,t,s){this.fn=e,this.context=t,this.once=s||!1}function n(e,t,o,n,r){if(\"function\"!=typeof o)throw new TypeError(\"The listener must be a function\");var a=new i(o,n||e,r),u=s?s+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function r(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,o,i=[];if(0===this._eventsCount)return i;for(o in e=this._events)t.call(e,o)&&i.push(s?o.slice(1):o);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=s?s+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var i=0,n=o.length,r=new Array(n);i<n;i++)r[i]=o[i].fn;return r},a.prototype.listenerCount=function(e){var t=s?s+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,i,n,r){var a=s?s+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,o),!0;case 4:return l.fn.call(l.context,t,o,i),!0;case 5:return l.fn.call(l.context,t,o,i,n),!0;case 6:return l.fn.call(l.context,t,o,i,n,r),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,o);break;case 4:l[c].fn.call(l[c].context,t,o,i);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,s){return n(this,e,t,s,!1)},a.prototype.once=function(e,t,s){return n(this,e,t,s,!0)},a.prototype.removeListener=function(e,t,o,i){var n=s?s+e:e;if(!this._events[n])return this;if(!t)return r(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||i&&!a.once||o&&a.context!==o||r(this,n);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||o&&a[u].context!==o)&&c.push(a[u]);c.length?this._events[n]=1===c.length?c[0]:c:r(this,n)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&r(this,t)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,e.exports=a}));class ta extends Fs{constructor(e){super(e),this._n=\"BigDataChannelModule\",this.FILETYPE={SOUND:2106,FILE:2107,VIDEO:2113},this._bdh_download_server=\"grouptalk.c2c.qq.com\",this._BDHBizID=10001,this._authKey=\"\",this._expireTime=0,this.getInnerEmitterInstance().on(Kn,this._getAuthKey,this)}_getAuthKey(){this.isIntl()||this.request({protocolName:Hs}).then(e=>{e.data.authKey&&(this._authKey=e.data.authKey,this._expireTime=parseInt(e.data.expireTime))})}_isFromOlderVersion(e){return!(!e.content||2===e.content.downloadFlag)}parseElements(e,t){if(!be(e)||!t)return[];const s=[];let o=null;for(let i=0;i<e.length;i++)o=e[i],this._needParse(o)?s.push(this._parseElement(o,t)):s.push(e[i]);return s}_needParse(e){return!e.cloudCustomData&&!(!this._isFromOlderVersion(e)||e.type!==t.MSG_AUDIO&&e.type!==t.MSG_FILE&&e.type!==t.MSG_VIDEO)}_parseElement(e,s){switch(e.type){case t.MSG_AUDIO:return this._parseAudioElement(e,s);case t.MSG_FILE:return this._parseFileElement(e,s);case t.MSG_VIDEO:return this._parseVideoElement(e,s)}}_parseAudioElement(e,t){return e.content.url=this._genAudioUrl(e.content.uuid,t),e}_parseFileElement(e,t){return e.content.url=this._genFileUrl(e.content.uuid,t,e.content.fileName),e}_parseVideoElement(e,t){return e.content.url=this._genVideoUrl(e.content.uuid,t),e}_genAudioUrl(e,t){if(\"\"===this._authKey)return\"\";const s=this.getModule(ms).getSDKAppID();return`https://${this._bdh_download_server}/asn.com/stddownload_common_file?authkey=${this._authKey}&bid=${this._BDHBizID}&subbid=${s}&fileid=${e}&filetype=${this.FILETYPE.SOUND}&openid=${t}&ver=0`}_genFileUrl(e,t,s){if(\"\"===this._authKey)return\"\";s||(s=`${Math.floor(1e5*Math.random())}-${Date.now()}`);const o=this.getModule(ms).getSDKAppID();return`https://${this._bdh_download_server}/asn.com/stddownload_common_file?authkey=${this._authKey}&bid=${this._BDHBizID}&subbid=${o}&fileid=${e}&filetype=${this.FILETYPE.FILE}&openid=${t}&ver=0&filename=${encodeURIComponent(s)}`}_genVideoUrl(e,t){if(\"\"===this._authKey)return\"\";const s=this.getModule(ms).getSDKAppID();return`https://${this._bdh_download_server}/asn.com/stddownload_common_file?authkey=${this._authKey}&bid=${this._BDHBizID}&subbid=${s}&fileid=${e}&filetype=${this.FILETYPE.VIDEO}&openid=${t}&ver=0`}reset(){this._authKey=\"\",this.expireTime=0}}class sa extends Fs{constructor(e){super(e),this._n=\"UploadModule\",this.TIMUploadPlugin=null,this.timUploadPlugin=null,this.COSSDK=null,this._cosUploadMethod=null,this.expiredTimeLimit=600,this.appid=0,this.bucketName=\"\",this.ciUrl=\"\",this.directory=\"\",this.downloadUrl=\"\",this.uploadUrl=\"\",this.region=\"ap-shanghai\",this.cos=null,this.cosOptions={secretId:\"\",secretKey:\"\",sessionToken:\"\",expiredTime:0},this.uploadFileType=\"\",this.duration=900,this.tryCount=0,this.UPLOAD_SIZE_LIMIT={AUDIO:20971520,FILE:104857600,IMAGE:20971520,VIDEO:104857600};const t=this.getInnerEmitterInstance();t.on(Kn,this._init,this),t.on(Wn,this._onCloudConfigUpdated,this)}_init(){const e=this.getModule(ys);if(this.TIMUploadPlugin=e.getPlugin(\"tim-upload-plugin\"),this.TIMUploadPlugin)return void this._initUploaderMethod();const t=P?\"cos-wx-sdk\":\"cos-js-sdk\";this.COSSDK=e.getPlugin(t),this.COSSDK?(this._getAuthorizationKey(),this.outputWarning(\"CosReplacement\",t)):this.outputWarning(\"PluginUndetected\")}_onCloudConfigUpdated(){const e=this._n+\"._onCloudConfigUpdated\",t=this.getCloudConfig(\"upload_size_limit\");if(_e.l(`${e} uploadSizeLimit:${t}`),!we(t))try{const e=JSON.parse(t);this.UPLOAD_SIZE_LIMIT={AUDIO:e.a?1048576*parseInt(e.a):this.UPLOAD_SIZE_LIMIT.AUDIO,FILE:e.f?1048576*parseInt(e.f):this.UPLOAD_SIZE_LIMIT.FILE,IMAGE:e.i?1048576*parseInt(e.i):this.UPLOAD_SIZE_LIMIT.IMAGE,VIDEO:e.v?1048576*parseInt(e.v):this.UPLOAD_SIZE_LIMIT.VIDEO}}catch(s){_e.e(e+\" JSON parse error. uploadSizeLimit:\",t)}}_getAuthorizationKey(){const e=this._n+\"._getAuthorizationKey\",t=new Cn(\"_getAuthorizationKey\"),s=Math.ceil(Date.now()/1e3);this.request({protocolName:Ni,requestData:{duration:this.expiredTimeLimit}}).then(o=>{const{data:i}=o;_e.l(e+\" ok. data:\",i);const n=i.expiredTime-s;t.setMessage(`requestId:${i.requestId} requestTime:${s} expiredTime:${i.expiredTime} diff:${n}s`).setNetworkType(this.getNetworkType()).end(),!P&&i.region&&(this.region=i.region),this.appid=i.appid,this.bucketName=i.bucketName,this.ciUrl=i.ciUrl,this.directory=i.directory,this.downloadUrl=i.downloadUrl,this.uploadUrl=i.uploadUrl,this.cosOptions={secretId:i.secretId,secretKey:i.secretKey,sessionToken:i.sessionToken,expiredTime:i.expiredTime},_e.l(`${e} ok. region:${this.region} bucketName:${this.bucketName}`),this._initUploaderMethod()}).catch(s=>{this.probeNetwork().then(([e,o])=>{t.setError(s,e,o).end()}),_e.w(e+\" failed. error:\",s)})}_getCosPreSigUrl(e){const t=this._n+\"._getCosPreSigUrl\",s=Math.ceil(Date.now()/1e3),o=new Cn(\"_getCosPreSigUrl\");return this.request({protocolName:Ri,requestData:{fileType:e.fileType,fileName:e.fileName,uploadMethod:e.uploadMethod,duration:e.duration}}).then(e=>{this.tryCount=0;const i=e.data||{},n=i.expiredTime-s;return _e.l(t+\" ok. data:\",i),o.setMessage(`requestId:${i.requestId} expiredTime:${i.expiredTime} diff:${n}s`).setNetworkType(this.getNetworkType()).end(),i}).catch(s=>(-1===s.code&&(s.code=nn.COS_GET_SIG_FAIL),this.probeNetwork().then(([e,t])=>{o.setError(s,e,t).end()}),_e.w(t+\" failed. error:\",s),this.tryCount<1?(this.tryCount++,this._getCosPreSigUrl(e)):(this.tryCount=0,Vn({code:nn.COS_GET_SIG_FAIL}))))}_initUploaderMethod(){if(this.TIMUploadPlugin)return this.timUploadPlugin=new this.TIMUploadPlugin,void(this._cosUploadMethod=(e,t)=>{this.timUploadPlugin.uploadFile(e,t)});this.appid&&(this.cos=P?new this.COSSDK({ForcePathStyle:!0,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=P?(e,t)=>{this.cos.postObject(e,t)}:(e,t)=>{this.cos.uploadFiles(e,t)})}onCheckTimer(e){if(!this.COSSDK)return;if(this.TIMUploadPlugin)return;if(!this.isLoggedIn())return;if(e%60!=0)return;Math.ceil(Date.now()/1e3)>=this.cosOptions.expiredTime-120&&this._getAuthorizationKey()}_getAuthorization(e,t){t({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}upload(e){if(!0===e.getRelayFlag())return Promise.resolve();const s=this.getModule(Rs);switch(e.type){case t.MSG_IMAGE:return s.addTotalCount(pn),this._uploadImage(e);case t.MSG_FILE:return s.addTotalCount(pn),this._uploadFile(e);case t.MSG_AUDIO:return s.addTotalCount(pn),this._uploadAudio(e);case t.MSG_VIDEO:return s.addTotalCount(pn),this._uploadVideo(e);default:return Promise.resolve()}}_uploadImage(e){const t=this.getModule(as),s=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadImage({file:o.payload.file,to:o.to,onProgress:e=>{if(s.updatePercent(e),$e(o.onProgress))try{o.onProgress(e)}catch(t){return Vn({code:nn.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then(({location:t,fileType:o,fileSize:i,width:n,height:r,smallImageUrl:a,smallImageWidth:u,smallImageHeight:c,largeImageUrl:l,largeImageWidth:d,largeImageHeight:p})=>{const h=this.isPrivateNetWork()?t:Xe(t);let g,_;return s.updateImageFormat(o),a&&l?(g={url:a,width:u,height:c},_={url:l,width:d,height:p}):(g=pt({originUrl:h,originWidth:n,originHeight:r,min:198}),_=pt({originUrl:h,originWidth:n,originHeight:r,min:720})),s.updateImageInfoArray([{size:i,url:h,width:n,height:r},{..._},{...g}]),e})}_uploadFile(e){const t=this.getModule(as),s=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadFile({file:o.payload.file,to:o.to,onProgress:e=>{if(s.updatePercent(e),$e(o.onProgress))try{o.onProgress(e)}catch(t){return Vn({code:nn.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then(({location:t})=>{const o=this.isPrivateNetWork()?t:Xe(t);return s.updateFileUrl(o),e})}_uploadAudio(e){const t=this.getModule(as),s=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadAudio({file:o.payload.file,to:o.to,onProgress:e=>{if(s.updatePercent(e),$e(o.onProgress))try{o.onProgress(e)}catch(t){return Vn({code:nn.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then(({location:t})=>{const o=this.isPrivateNetWork()?t:Xe(t);return s.updateAudioUrl(o),e})}_uploadVideo(e){const t=this.getModule(as),s=e.getElements()[0],o=t.getMessageOption(e.clientSequence);return this.doUploadVideo({file:o.payload.file,to:o.to,onProgress:e=>{if(s.updatePercent(e),$e(o.onProgress))try{o.onProgress(e)}catch(t){return Vn({code:nn.MESSAGE_ONPROGRESS_FUNCTION_ERROR})}}}).then(t=>{const{location:o,snapshotInfo:i}=t,n=this.isPrivateNetWork()?o:Xe(o);return s.updateVideoUrl(n),Lt(i)||s.updateSnapshotInfo(i),e})}_checkSizeError(e){return Vn({code:nn[`MESSAGE_${e}_SIZE_LIMIT`],message:this.getErrorMessage(\"UploadSizeLimit\",e.toLowerCase(),this.UPLOAD_SIZE_LIMIT[e]/1048576+\" MB\")})}doUploadImage(e){if(!e.file)return Vn({code:nn.MESSAGE_IMAGE_SELECT_FILE_FIRST});const t=this._checkImageType(e.file);if(!0!==t)return t;const s=this._checkImageSize(e.file);if(!0!==s)return s;let o=null;return this._setUploadFileType(Xn),this.uploadByCOS(e).then(e=>(o=e,this.isPrivateNetWork()?ut(e.location):ut(\"https://\"+e.location))).then(e=>(o.width=e.width,o.height=e.height,Promise.resolve(o)))}_checkImageType(e){let t=\"\";return t=P?e.url.slice(e.url.lastIndexOf(\".\")+1):e.files[0].name.slice(e.files[0].name.lastIndexOf(\".\")+1),zn.indexOf(t.toLowerCase())>=0||Vn({code:nn.MESSAGE_IMAGE_TYPES_LIMIT})}_checkImageSize(e){let t=0;return t=P?e.size:e.files[0].size,0===t?Vn({code:nn.MESSAGE_FILE_IS_EMPTY}):t<this.UPLOAD_SIZE_LIMIT.IMAGE||this._checkSizeError(\"IMAGE\")}doUploadFile(e){let t=null;return e.file?e.file.files[0].size>this.UPLOAD_SIZE_LIMIT.FILE?this._checkSizeError(\"FILE\"):0===e.file.files[0].size?(t={code:nn.MESSAGE_FILE_IS_EMPTY},Vn(t)):(this._setUploadFileType(er),this.uploadByCOS(e)):(t={code:nn.MESSAGE_FILE_SELECT_FILE_FIRST},Vn(t))}doUploadVideo(e){return e.file.videoFile.size>this.UPLOAD_SIZE_LIMIT.VIDEO?this._checkSizeError(\"VIDEO\"):0===e.file.videoFile.size?Vn({code:nn.MESSAGE_FILE_IS_EMPTY}):-1===Jn.indexOf(e.file.videoFile.type)?Vn({code:nn.MESSAGE_VIDEO_TYPES_LIMIT}):(this._setUploadFileType(Zn),P?this.handleVideoUpload({file:e.file.videoFile,onProgress:e.onProgress}):b?this.handleVideoUpload(e):void 0)}handleVideoUpload(e){return new Promise((t,s)=>{this.uploadByCOS(e).then(e=>{t(e)}).catch(()=>{this.uploadByCOS(e).then(e=>{t(e)}).catch(()=>{s(new Fn({code:nn.MESSAGE_VIDEO_UPLOAD_FAIL}))})})})}doUploadAudio(e){return e.file?e.file.size>this.UPLOAD_SIZE_LIMIT.AUDIO?this._checkSizeError(\"AUDIO\"):0===e.file.size?Vn({code:nn.MESSAGE_FILE_IS_EMPTY}):(this._setUploadFileType(Qn),this.uploadByCOS(e)):Vn({code:nn.MESSAGE_AUDIO_UPLOAD_FAIL})}uploadByCOS(e){if(!$e(this._cosUploadMethod))return this.outputWarning(\"PluginUndetected\"),Vn({code:nn.COS_UNDETECTED});if(this.timUploadPlugin)return this._uploadWithPreSigUrl(e);const t=new Cn(\"upload\"),s=this._n+\".uploadByCOS\",o=Date.now(),i=this._getFile(e);return new Promise((n,r)=>{const a=P?this._createCosOptionsWXMiniApp(e):this._createCosOptionsWeb(e),u=this;this._cosUploadMethod(a,(e,a)=>{const c=Object.create(null);if(a){if(e||be(a.files)&&a.files[0].error){const e=new Fn({code:nn.MESSAGE_FILE_UPLOAD_FAIL});return t.setError(e,!0,this.getNetworkType()).end(),_e.l(s+\" failed. error:\",a.files[0].error),403===a.files[0].error.statusCode&&(_e.w(s+\" failed. cos AccessKeyId was invalid, regain auth key!\"),this._getAuthorizationKey()),void r(e)}c.fileName=i.name,c.fileSize=i.size,c.fileType=i.type.slice(i.type.indexOf(\"/\")+1).toLowerCase(),c.location=P?a.Location:a.files[0].data.Location;const l=Date.now()-o,d=`size:${u._formatFileSize(i.size)} time:${l}ms speed:${u._formatSpeed(1e3*i.size/l)}`;_e.l(`${s} success. name:${i.name} ${d}`),n(c);const p=this.getModule(Rs);return p.addCost(pn,l),p.addFileSize(pn,i.size),void t.setNetworkType(this.getNetworkType()).setMessage(d).end()}const l=new Fn({code:nn.MESSAGE_FILE_UPLOAD_FAIL});t.setError(l,!0,u.getNetworkType()).end(),_e.w(s+\" failed. error:\",e),403===e.statusCode&&(_e.w(s+\" failed. cos AccessKeyId was invalid, regain auth key!\"),this._getAuthorizationKey()),r(l)})})}_uploadWithPreSigUrl(e){const t=this._n+\"._uploadWithPreSigUrl\",s=this._getFile(e);return this._createCosOptionsPreSigUrl(e).then(e=>new Promise((o,i)=>{const n=new Cn(\"upload\"),{requestSnapshotUrl:r,...a}=e,u=Date.now();this._cosUploadMethod(a,(e,c)=>{if(e||403===c.statusCode)return n.setError(new Fn(e),!0,this.getNetworkType()).end(),_e.l(t+\" failed, error:\",e),void i(new Fn({code:nn.MESSAGE_FILE_UPLOAD_FAIL}));const l=Object.create(null);let d=c.data.location||\"\";this.isPrivateNetWork()||0!==d.indexOf(\"https://\")&&0!==d.indexOf(\"http://\")||(d=d.split(\"//\")[1]),l.fileName=s.name,l.fileSize=s.size,l.fileType=s.type.slice(s.type.indexOf(\"/\")+1).toLowerCase(),l.location=d;const p=Date.now()-u,h=`size:${this._formatFileSize(s.size)},time:${p}ms,speed:${this._formatSpeed(1e3*s.size/p)} res:${JSON.stringify(c.data)}`;_e.l(`${t} success name:${s.name},${h}`),n.setNetworkType(this.getNetworkType()).setMessage(h).end();const g=this.getModule(Rs);g.addCost(pn,p),g.addFileSize(pn,s.size);let _=[];if(a.thumbUrl&&a.largeUrl&&(_=[this._getSmallImageInfoByUrl(a.thumbUrl,l),this._getLargeImageInfoByUrl(a.largeUrl,l)]),r&&_.push(this._getSnapshotInfoByUrl(r,l)),_.length>0)return Promise.all(_).then(()=>{o(l)});o(l)})}))}_getRawOrUploadProxyUrl(e){const t=this.getModule(ms).getFileUploadProxy();let s=e;return t&&(s=e.replace(/^https:\\/\\/[^/]+/,t)),s}_getFile(e){let t=null;var s;return t=be(e.file.files)||(s=e.file.files,\"filelist\"===xe(s))?e.file.files[0]:e.file,t}_formatFileSize(e){return e<1024?e+\"B\":e<1048576?Math.floor(e/1024)+\"KB\":Math.floor(e/1048576)+\"MB\"}_formatSpeed(e){if(e<=1048576){return _t(e/1024,1)+\"KB/s\"}return _t(e/1048576,1)+\"MB/s\"}_createCosOptionsWeb(e){const t=this._getFile(e),s=t.name,o=s.slice(s.lastIndexOf(\".\")),i=this._genFileName(`${We(999999)}${o}`);return{files:[{Bucket:`${this.bucketName}-${this.appid}`,Region:this.region,Key:`${this.directory}/${i}`,Body:t}],SliceSize:1048576,onProgress:t=>{if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(s){_e.w(\"onProgress callback error:\",s)}},onFileFinish:(e,t,s)=>{}}}_createCosOptionsWXMiniApp(e){const t=this._getFile(e),s=this._genFileName(t.name),o=t.url;return{Bucket:`${this.bucketName}-${this.appid}`,Region:this.region,Key:`${this.directory}/${s}`,FilePath:o,onProgress:t=>{if(_e.l(JSON.stringify(t)),\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(s){_e.w(\"onProgress callback error:\",s)}}}}_createCosOptionsPreSigUrl(e){let t=\"\",s=\"\",o=0;const i=this._getFile(e);if(P)t=this._genFileName(i.name),s=i.url,o=1;else{const e=i.name,n=e.slice(e.lastIndexOf(\".\"));t=this._genFileName(`${We(999999)}${n}`),s=i,o=0}return this._getCosPreSigUrl({fileType:this.uploadFileType,fileName:t,uploadMethod:o,duration:this.duration}).then(o=>{const{uploadUrl:i,downloadUrl:n,requestSnapshotUrl:r,thumbUrl:a,largeUrl:u}=o;return{url:this._getRawOrUploadProxyUrl(i),fileType:this.uploadFileType,fileName:t,resources:s,downloadUrl:n,requestSnapshotUrl:r,thumbUrl:a,largeUrl:u,onProgress:t=>{if(\"function\"==typeof e.onProgress)try{e.onProgress(t.percent)}catch(s){_e.w(\"onProgress callback error:\",s),_e.e(s)}}}})}_genFileName(e){return`${ct()}-${e}`}_setUploadFileType(e){this.uploadFileType=e}_getSnapshotInfoByUrl(e,t){const s=new Cn(\"getSnapshotInfo\");return this.request({protocolName:Oi,requestData:{platform:this.getPlatform(),coverName:this._genFileName(We(99999)),requestSnapshotUrl:e}}).then(e=>{const{snapshotUrl:o}=e.data||{};return s.setMessage(\"snapshotUrl:\"+o).end(),Lt(o)?{}:ut(o).then(e=>{t.snapshotInfo={snapshotUrl:o,snapshotWidth:e.width,snapshotHeight:e.height}})}).catch(e=>(_e.w(this._n+\"._getSnapshotInfoByUrl failed. error:\",e),s.setCode(e.errorCode).setMessage(e.errorInfo).end(),{}))}_getSmallImageInfoByUrl(e,t){return ut(e).then(s=>{t.smallImageUrl=e,t.smallImageWidth=s.width,t.smallImageHeight=s.height})}_getLargeImageInfoByUrl(e,t){return ut(e).then(s=>{t.largeImageUrl=e,t.largeImageWidth=s.width,t.largeImageHeight=s.height})}reset(){_e.l(this._n+\".reset\")}}class oa{constructor(e){this._n=\"MergerMessageHandler\",this._messageModule=e}uploadMergerMessage(e,t){const s=this._n+\".uploadMergerMessage\";_e.d(s+\" message:\",e,\"messageBytes:\"+t);const{messageList:o}=e.payload,i=o.length,n=new Cn(\"uploadMergerMessage\");return this._messageModule.request({protocolName:Fi,requestData:{messageList:o}}).then(e=>{_e.d(s+\" ok. response:\",e.data);const{pbDownloadKey:o,downloadKey:r}=e.data,a={pbDownloadKey:o,downloadKey:r,messageNumber:i};return n.setNetworkType(this._messageModule.getNetworkType()).setMessage(`${i}-${t}-${r}`).end(),a}).catch(e=>{throw _e.w(s+\" failed. error:\",e),this._messageModule.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),e})}downloadMergerMessage(e){const t=this._n+\".downloadMergerMessage\";_e.d(t+\" message:\",e);const{downloadKey:s}=e.payload,o=this._messageModule.getFileDownloadProxy(),i=new Cn(\"downloadMergerMessage\");return i.setMessage(\"downloadKey:\"+s),this._messageModule.request({protocolName:$i,requestData:{downloadKey:s}}).then(s=>{if(_e.d(t+\" ok. response:\",s.data),$e(e.clearElement)){const{downloadKey:t,pbDownloadKey:i,messageList:n,...r}=e.payload;e.clearElement(),e.setElement({type:e.type,content:{messageList:s.data.messageList,...r}},o)}else{const t=[];s.data.messageList.forEach(e=>{if(!Lt(e)){const s=new Un(e,o);t.push(s)}}),e.payload.messageList=t,e.payload.downloadKey=\"\",e.payload.pbDownloadKey=\"\"}return i.setNetworkType(this._messageModule.getNetworkType()).end(),e}).catch(e=>{throw _e.w(`${t} failed. key:${s} error:`,e),this._messageModule.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),e})}createMergerMessagePack(e,s,o){return e.conversationType===t.CONV_C2C?this._createC2CMergerMessagePack(e,s,o):this._createGroupMergerMessagePack(e,s,o)}_createC2CMergerMessagePack(e,t,s){let o=null;t&&(t.offlinePushInfo&&(o=t.offlinePushInfo),!0===t.onlineUserOnly&&(o?o.disablePush=!0:o={disablePush:!0}));const i=[];if(Pe(t)&&Pe(t.messageControlInfo)){const{excludedFromUnreadCount:e,excludedFromLastMessage:s,excludedFromContentModeration:o}=t.messageControlInfo;!0===e&&i.push(\"NoUnread\"),!0===s&&i.push(\"NoLastMsg\"),!0===o&&i.push(\"NoMsgCheck\")}let n=\"\";Ue(e.cloudCustomData)&&e.cloudCustomData.length>0&&(n=e.cloudCustomData);const{pbDownloadKey:r,downloadKey:a,messageNumber:u}=s,{title:c,abstractList:l,compatibleText:d}=e.payload,p=this._messageModule.getModule(ls),h=p&&p.isOnlineMessage(e,t)?0:void 0;return{protocolName:Ks,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),toAccount:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:r,downloadKey:a,title:c,abstractList:l,compatibleText:d,messageNumber:u}}],cloudCustomData:n,clientTime:e.clientTime,msgSeq:e.sequence,msgRandom:e.random,msgLifeTime:h,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0,messageControlInfo:0!==h?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}_createGroupMergerMessagePack(e,t,s){let o=null;t&&t.offlinePushInfo&&(o=t.offlinePushInfo);const i=[];if(Pe(t)&&Pe(t.messageControlInfo)){const{excludedFromUnreadCount:e,excludedFromLastMessage:s,excludedFromContentModeration:o}=t.messageControlInfo;!0===e&&i.push(\"NoUnread\"),!0===s&&i.push(\"NoLastMsg\"),!0===o&&i.push(\"NoMsgCheck\")}let n=\"\";Ue(e.cloudCustomData)&&e.cloudCustomData.length>0&&(n=e.cloudCustomData);const{pbDownloadKey:r,downloadKey:a,messageNumber:u}=s,{title:c,abstractList:l,compatibleText:d}=e.payload,p=this._messageModule.getModule(ds),h=p&&p.isOnlineMessage(e,t)?1:0;return{protocolName:Ws,tjgID:this._messageModule.generateTjgID(e),requestData:{fromAccount:this._messageModule.getMyUserID(),groupID:e.to,msgBody:[{msgType:e.type,msgContent:{pbDownloadKey:r,downloadKey:a,title:c,abstractList:l,compatibleText:d,messageNumber:u}}],random:e.random,priority:e.priority,clientSequence:e.clientSequence,groupAtInfo:void 0,cloudCustomData:n,onlineOnlyFlag:h,offlinePushInfo:o?{pushFlag:!0===o.disablePush?1:0,title:o.title||\"\",desc:o.description||\"\",ext:o.extension||\"\",apnsInfo:{badgeMode:!0===o.ignoreIOSBadge?1:0},androidInfo:{OPPOChannelID:o.androidOPPOChannelID||\"\"}}:void 0,clientTime:e.clientTime,needReadReceipt:!0!==e.needReadReceipt||p.isMessageFromOrToAVChatroom(e.to)?0:1,messageControlInfo:0===h?i:void 0,isSupportExtension:!0===e.isSupportExtension?1:0}}}}const ia={ERR_SVR_COMM_SENSITIVE_TEXT:80001,ERR_SVR_COMM_BODY_SIZE_LIMIT:80002,OPEN_SERVICE_OVERLOAD_ERROR:60022,ERR_SVR_MSG_PKG_PARSE_FAILED:20001,ERR_SVR_MSG_INTERNAL_AUTH_FAILED:20002,ERR_SVR_MSG_INVALID_ID:20003,ERR_SVR_MSG_PUSH_DENY:20006,ERR_SVR_MSG_IN_PEER_BLACKLIST:20007,ERR_SVR_MSG_BOTH_NOT_FRIEND:20009,ERR_SVR_MSG_NOT_PEER_FRIEND:20010,ERR_SVR_MSG_NOT_SELF_FRIEND:20011,ERR_SVR_MSG_SHUTUP_DENY:20012,ERR_SVR_GROUP_INVALID_PARAMETERS:10004,ERR_SVR_GROUP_PERMISSION_DENY:10007,ERR_SVR_GROUP_NOT_FOUND:10010,ERR_SVR_GROUP_INVALID_GROUPID:10015,ERR_SVR_GROUP_REJECT_FROM_THIRDPARTY:10016,ERR_SVR_GROUP_SHUTUP_DENY:10017,MESSAGE_SEND_FAIL:2100,OVER_FREQUENCY_LIMIT:2996},na=[nn.MESSAGE_ONPROGRESS_FUNCTION_ERROR,nn.MESSAGE_IMAGE_SELECT_FILE_FIRST,nn.MESSAGE_IMAGE_TYPES_LIMIT,nn.MESSAGE_FILE_IS_EMPTY,nn.MESSAGE_IMAGE_SIZE_LIMIT,nn.MESSAGE_FILE_SELECT_FILE_FIRST,nn.MESSAGE_FILE_SIZE_LIMIT,nn.MESSAGE_VIDEO_SIZE_LIMIT,nn.MESSAGE_VIDEO_TYPES_LIMIT,nn.MESSAGE_AUDIO_UPLOAD_FAIL,nn.MESSAGE_AUDIO_SIZE_LIMIT,nn.COS_UNDETECTED];function ra(e){let t=!1;return Object.values(ia).includes(e)&&(t=!0),(e>=120001&&e<=13e4||e>=10100&&e<=10200)&&(t=!0),t}class aa extends Fs{constructor(e){super(e),this._n=\"MessageModule\",this._messageOptionsMap=new Map,this._mergerMessageHandler=new oa(this)}createTextMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e),o=\"string\"==typeof e.payload?e.payload:e.payload.text,i=new Tn({text:o}),n=this._getNickAndAvatarByUserID(t);return s.setElement(i),s.setNickAndAvatar(n),s.setNameCard(this._getNameCardByGroupID(s)),s}createImageMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e);if(P){const{file:t}=e.payload;if(Oe(t))return void this.outputWarning(\"FileUnsupportedInMP\",\"createImageMessage\");const s=t.tempFiles[0].path||t.tempFiles[0].tempFilePath,o={url:s,name:s.slice(s.lastIndexOf(\"/\")+1),size:t.tempFiles&&t.tempFiles[0].size||1,type:s.slice(s.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=o}else if(b)if(Oe(e.payload.file)){const t=e.payload.file;e.payload.file={files:[t]}}else if(Pe(e.payload.file)&&\"undefined\"!=typeof uni){const t=e.payload.file.tempFiles[0];e.payload.file={files:[t]}}const o=new yn({imageFormat:me.UNKNOWN,uuid:this._generateUUID(e.payload.file),file:e.payload.file}),i=this._getNickAndAvatarByUserID(t);return s.setElement(o),s.setNickAndAvatar(i),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}createAudioMessage(e){const{file:t}=e.payload;if(P){const s={url:t.tempFilePath,name:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),size:t.fileSize,second:parseInt(t.duration)/1e3,type:t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()};e.payload.file=s}const s=this.getMyUserID();e.currentUser=s,e.senderTinyID=this.getMyTinyID();const o=new bn(e),i=new En({second:Math.floor(t.duration/1e3),size:t.fileSize||t.size,url:t.tempFilePath,uuid:this._generateUUID(e.payload.file)}),n=this._getNickAndAvatarByUserID(s);return o.setElement(i),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}createVideoMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID(),e.payload.file.thumbUrl=\"\",e.payload.file.thumbSize=0;const s={};if(P){if(O)return void this.outputWarning(\"VideoUnsupportedInAlipay\");if(Oe(e.payload.file))return void this.outputWarning(\"FileUnsupportedInMP\",\"createVideoMessage\");let{file:t}=e.payload;be(t.tempFiles)&&(t=t.tempFiles[0]),s.url=t.tempFilePath,s.name=t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\"/\")+1),s.size=t.size||1,s.second=t.duration||0,s.type=t.tempFilePath.slice(t.tempFilePath.lastIndexOf(\".\")+1).toLowerCase()}else if(b){if(Oe(e.payload.file)){const t=e.payload.file;e.payload.file.files=[t]}else if(Pe(e.payload.file)&&\"undefined\"!=typeof uni){const t=e.payload.file.tempFile;e.payload.file.files=[t]}const{file:t}=e.payload;s.url=window.URL.createObjectURL(t.files[0]),s.name=t.files[0].name,s.size=t.files[0].size||1,s.second=t.files[0].duration||0,s.type=t.files[0].type.split(\"/\")[1]}e.payload.file.videoFile=s;const o=new bn(e),i=new On({videoFormat:s.type,videoSecond:_t(s.second,0),videoSize:s.size,remoteVideoUrl:\"\",videoUrl:s.url,videoUUID:this._generateUUID(e.payload.file.videoFile),thumbUUID:this._generateUUID(e.payload.file.videoFile),thumbWidth:e.payload.file.width||200,thumbHeight:e.payload.file.height||200,thumbUrl:e.payload.file.thumbUrl,thumbSize:e.payload.file.thumbSize,thumbFormat:e.payload.file.thumbUrl.slice(e.payload.file.thumbUrl.lastIndexOf(\".\")+1).toLowerCase()}),n=this._getNickAndAvatarByUserID(t);return o.setElement(i),o.setNickAndAvatar(n),o.setNameCard(this._getNameCardByGroupID(o)),this._messageOptionsMap.set(o.clientSequence,e),o}createCustomMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e),o=new Rn({data:e.payload.data,description:e.payload.description,extension:e.payload.extension}),i=this._getNickAndAvatarByUserID(t);return s.setElement(o),s.setNickAndAvatar(i),s.setNameCard(this._getNameCardByGroupID(s)),s}createFaceMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e),o=new Dn(e.payload),i=this._getNickAndAvatarByUserID(t);return s.setElement(o),s.setNickAndAvatar(i),s.setNameCard(this._getNameCardByGroupID(s)),s}createMergerMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=this._getNickAndAvatarByUserID(t),o=new bn(e),i=new kn(e.payload);return o.setElement(i),o.setNickAndAvatar(s),o.setNameCard(this._getNameCardByGroupID(o)),o.setRelayFlag(!0),o}createForwardMessage(e){const{to:s,conversationType:o,priority:i,payload:n,needReadReceipt:r,receiverList:a}=e,u=this.getMyUserID(),c=this._getNickAndAvatarByUserID(u);if(n.type===t.MSG_GRP_TIP)return Vn({code:nn.MESSAGE_FORWARD_TYPE_INVALID});const l={to:s,conversationType:o,conversationID:`${o}${s}`,priority:i,isPlaceMessage:0,status:Nt.UNSEND,currentUser:u,senderTinyID:this.getMyTinyID(),cloudCustomData:e.cloudCustomData||n.cloudCustomData||\"\",needReadReceipt:r,receiverList:a,isSupportExtension:e.isSupportExtension||!1},d=new bn(l);return d.setElement(n.getElements()[0]),d.setNickAndAvatar(c),d.setNameCard(this._getNameCardByGroupID(n)),d.setRelayFlag(!0),d}downloadMergerMessage(e){return this._mergerMessageHandler.downloadMergerMessage(e)}createFileMessage(e){if(P){if(!L&&!v&&!U)return;let e;const t=w.getSystemInfoSync().SDKVersion;if(L&&(e=\"2.5.0\",dt(t,e)<0))return void this.outputWarning(\"WXChooseMessageFile\");if(v&&(e=\"1.18.0\",dt(t,e)<0))return void this.outputWarning(\"QQChooseMessageFile\")}if(b||U){if(Oe(e.payload.file)){const t=e.payload.file;e.payload.file={files:[t]}}else if(Pe(e.payload.file)&&\"undefined\"!=typeof uni){const{tempFiles:t,files:s}=e.payload.file;let o=null;be(t)?o=t[0]:be(s)&&(o=s[0]),e.payload.file={files:[o]}}}else if(L||v){const{tempFiles:t}=e.payload.file,s={...t[0],url:t[0].path};e.payload.file={files:[s]}}const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e),o=new Nn({uuid:this._generateUUID(e.payload.file),file:e.payload.file}),i=this._getNickAndAvatarByUserID(t);return s.setElement(o),s.setNickAndAvatar(i),s.setNameCard(this._getNameCardByGroupID(s)),this._messageOptionsMap.set(s.clientSequence,e),s}createLocationMessage(e){const t=this.getMyUserID();e.currentUser=t,e.senderTinyID=this.getMyTinyID();const s=new bn(e),o=new Gn(e.payload),i=this._getNickAndAvatarByUserID(t);return s.setElement(o),s.setNickAndAvatar(i),s.setNameCard(this._getNameCardByGroupID(s)),s}_onCannotFindModule(){return Vn({code:nn.CANNOT_FIND_MODULE})}sendMessageInstance(e,s){if(!1===this.getModule(Us).filterMessage(e,s))return this._onSendMessageFailed(e,new Fn({code:nn.PROFANITY_FOUND}));let o,i=null;switch(e.conversationType){case t.CONV_C2C:if(i=this.getModule(ls),!i)return this._onCannotFindModule();break;case t.CONV_GROUP:if(i=this.getModule(ds),!i)return this._onCannotFindModule();if(st({groupID:e.to})){const t=i.getLocalGroupProfile(e.to);if(t&&t.isSupportTopic)return Vn({code:nn.MESSAGE_SEND_GROUP_WITH_TOPIC_FAIL})}break;default:return Vn({code:nn.MESSAGE_SEND_INVALID_CONVERSATION_TYPE})}const n=this.getModule(Ts),r=this.getModule(ds);return n.upload(e).then(()=>{if(this._getSendMessageSpecifiedKey(e)===dn){this.getModule(Rs).addSuccessCount(pn)}return r.guardForAVChatRoom(e).then(()=>{if(!e.isSendable())return Vn({code:nn.MESSAGE_FILE_URL_IS_EMPTY});this._addSendMessageTotalCount(e),o=Date.now();const n=function(e){let t=\"utf-8\";b&&document&&(t=document.charset.toLowerCase());let s,o=0,i=0;if(i=e.length,\"utf-8\"===t||\"utf8\"===t)for(let n=0;n<i;n++)s=e.codePointAt(n),s<=127?o+=1:s<=2047?o+=2:s<=65535?o+=3:(o+=4,n++);else if(\"utf-16\"===t||\"utf16\"===t)for(let n=0;n<i;n++)s=e.codePointAt(n),s<=65535?o+=2:(o+=4,n++);else o=e.replace(/[^\\x00-\\xff]/g,\"aa\").length;return o}(JSON.stringify(e));if(e.type===t.MSG_MERGER&&n>11264)return this._mergerMessageHandler.uploadMergerMessage(e,n).then(t=>{const o=this._mergerMessageHandler.createMergerMessagePack(e,s,t);return this.request(o)});return this.getModule(_s).setMessageRandom(e),e.conversationType===t.CONV_C2C||e.conversationType===t.CONV_GROUP?i.sendMessage(e,s):void 0}).then(n=>{const{time:r,sequence:a,readReceiptCode:u}=n.data;if(Ge(u)&&0!==u){new Cn(\"sendMessageWithReceipt\").setMessage(`from:${e.from} to:${e.to} sequence:${a} readReceiptCode:${u}`).end(),_e.w(`${this._n}.sendMessageInstance readReceiptCode:${u} message:${this.getErrorMessage(u)}`)}this._addSendMessageSuccessCount(e,o),this._messageOptionsMap.delete(e.clientSequence);const c=this.getModule(_s);e.status=Nt.SUCCESS,e.time=r;let l=!1;if(e.conversationType===t.CONV_GROUP)e.sequence=a;else if(e.conversationType===t.CONV_C2C){const t=c.getLatestMessageSentByMe(e.conversationID);if(t){const{nick:s,avatar:o}=t;s===e.nick&&o===e.avatar||(l=!0)}}if(l&&c.modifyMessageSentByMe({conversationID:e.conversationID,latestNick:e.nick,latestAvatar:e.avatar}),i.isOnlineMessage(e,s))e._onlineOnlyFlag=!0;else{c.appendToMessageList(e);let o=e;Pe(s)&&Pe(s.messageControlInfo)&&(!0===s.messageControlInfo.excludedFromLastMessage&&(e._isExcludedFromLastMessage=!0,o=\"\"),!0===s.messageControlInfo.excludedFromUnreadCount&&(e._isExcludedFromUnreadCount=!0));let i=e.conversationType;if(ot(e.to)){i=t.CONV_TOPIC;this.getModule(gs).onMessageSent({groupID:ft(e.to),topicID:e.to,lastMessage:o})}c.onMessageSent({conversationOptionsList:[{conversationID:e.conversationID,unreadCount:0,type:i,subType:e.conversationSubType,lastMessage:o}]})}return e.getRelayFlag()||\"TIMImageElem\"!==e.type||ht(e.payload.imageInfoArray),wn({message:e})})}).catch(t=>this._onSendMessageFailed(e,t))}_onSendMessageFailed(e,t){e.status=Nt.FAIL;this.getModule(_s).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);const s=new Cn(\"sendMessage\");return s.setMessage(`tjg_id:${this.generateTjgID(e)} type:${e.type} from:${e.from} to:${e.to}`),this.probeNetwork().then(([e,o])=>{s.setError(t,e,o).end()}),_e.e(this._n+\"._onSendMessageFailed error:\",t),Vn(new Fn({code:t&&t.code?t.code:nn.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}_getSendMessageSpecifiedKey(e){if([t.MSG_IMAGE,t.MSG_AUDIO,t.MSG_VIDEO,t.MSG_FILE].includes(e.type))return dn;if(e.conversationType===t.CONV_C2C)return un;if(e.conversationType===t.CONV_GROUP){const t=this.getModule(ds).getLocalGroupProfile(e.to);if(!t)return;const s=t.type;return et(s)?ln:cn}}_addSendMessageTotalCount(e){const t=this._getSendMessageSpecifiedKey(e);if(t){this.getModule(Rs).addTotalCount(t)}}_addSendMessageSuccessCount(e,t){const s=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){const e=this.getModule(Rs);e.addSuccessCount(o),e.addCost(o,s)}}_addSendMessageFailCountOnUser(e,t){const{code:s=-1}=t,o=this.getModule(Rs),i=this._getSendMessageSpecifiedKey(e);i===dn&&function(e){let t=!1;return na.includes(e)&&(t=!0),t}(s)?o.addFailedCountOfUserSide(pn):ra(s)&&i&&o.addFailedCountOfUserSide(i)}resendMessage(e){return e.isResend=!0,e.status=Nt.UNSEND,this.sendMessageInstance(e)}revokeMessage(e){let s=null;if(e.conversationType===t.CONV_C2C?s=this.getModule(ls):e.conversationType===t.CONV_GROUP&&(s=this.getModule(ds)),!s)return this._onCannotFindModule();const o=new Cn(\"revokeMessage\");o.setMessage(`tjg_id:${this.generateTjgID(e)} type:${e.type} from:${e.from} to:${e.to}`);const i=this._n+\".revokeMessage\";return s.revokeMessage(e).then(t=>{const s=t.data.recallRetList;if(!Lt(s)&&0!==s[0].retCode){const t=new Fn({code:s[0].retCode,data:{message:e}});return o.setCode(t.code).setMoreMessage(t.message).end(),Vn(t)}_e.i(`${i} ok. ID:${e.ID}`),e.isRevoked=!0,o.end();return this.getModule(_s).onMessageRevoked([e]),wn({message:e})}).catch(t=>{this.probeNetwork().then(([e,s])=>{o.setError(t,e,s).end()});const s=new Fn({code:t&&t.code?t.code:nn.MESSAGE_REVOKE_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}});return _e.w(i+\" failed. error:\",t),Vn(s)})}deleteMessage(e){let s=null;const o=e[0],i=o.conversationID;let n=\"\",r=[],a=[];if(o.conversationType===t.CONV_C2C)s=this.getModule(ls),n=i.replace(t.CONV_C2C,\"\"),e.forEach(e=>{e&&e.status===Nt.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||r.push(`${e.sequence}_${e.random}_${e.time}`),a.push(e))});else if(o.conversationType===t.CONV_GROUP)s=this.getModule(ds),n=i.replace(t.CONV_GROUP,\"\"),e.forEach(e=>{e&&e.status===Nt.SUCCESS&&e.conversationID===i&&(e._onlineOnlyFlag||r.push(\"\"+e.sequence),a.push(e))});else if(o.conversationType===t.CONV_SYSTEM)return Vn({code:nn.CANNOT_DELETE_GROUP_SYSTEM_NOTICE});if(!s)return this._onCannotFindModule();if(0===r.length)return this._onMessageDeleted(a);r.length>30&&(r=r.slice(0,30),a=a.slice(0,30));const u=new Cn(\"deleteMessage\");u.setMessage(`to:${n} count:${r.length}`);const c=this._n+\".deleteMessage\";return s.deleteMessage({to:n,keyList:r}).then(e=>(u.end(),_e.i(c+\" ok\"),this._onMessageDeleted(a))).catch(e=>{this.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.w(c+\" failed. error:\",e);const t=new Fn({code:e&&e.code?e.code:nn.MESSAGE_DELETE_FAIL,message:e&&e.message?e.message:void 0});return Vn(t)})}_onMessageDeleted(e){return this.getModule(_s).onMessageDeleted(e),xn({messageList:e})}translateText(e){const t=this._n+\".translateText\",{sourceTextList:s,sourceLanguage:o,targetLanguage:i}=e,n=new Cn(\"translateText\");return n.setMessage(`sourceLanguage:${o} targetLanguage:${i}`),this.request({protocolName:on,requestData:{sourceTextList:s,source:o||\"auto\",target:i,from:this.getMyTinyID(),SDKAppID:this.getSDKAppID()}}).then(e=>{const{error:s,requestID:o,translatedTextList:i}=e.data,{code:r}=s;if(0===r)return n.end(),_e.i(`${t} ok. requestID:${o}`),wn({translatedTextList:i});throw{...s,requestID:o}}).catch(e=>(n.setCode(e.code).setMoreMessage(e.requestID).end(),_e.w(t+\" failed. error:\",e),Vn({code:nn.TRANSLATE_TEXT_FAIL})))}modifyRemoteMessage(e){let s=null;const{conversationType:o,to:i}=e;if(this.getModule(ds).isMessageFromOrToAVChatroom(i))return Vn({code:nn.MESSAGE_MODIFY_DISABLED_IN_AVCHATROOM,data:{message:e}});if(!1===this.getModule(Us).filterMessage(e))return Vn({code:nn.PROFANITY_FOUND,data:{message:e}});o===t.CONV_C2C?s=this.getModule(ls):o===t.CONV_GROUP&&(s=this.getModule(ds));const n=new Cn(\"modifyMessage\");n.setMessage(\"to:\"+i);const r=this._n+\".modifyRemoteMessage\";return s.modifyRemoteMessage(e).then(t=>{n.end(),_e.i(r+\" ok\");const s=this._onModifyRemoteMessageResp(e,t.data);return wn({message:s})}).catch(t=>{if(n.setCode(t.code).setMoreMessage(t.message).end(),_e.w(r+\" failed. error:\",t),20027===t.code){const s=this._onModifyRemoteMessageResp(e,t.data);return Vn({code:nn.MESSAGE_MODIFY_CONFLICT,data:{message:s}})}return Vn({code:t.code,message:t.message,data:{message:e}})})}_onModifyRemoteMessageResp(e,t){_e.d(this._n+\"._onModifyRemoteMessageResp options:\",t);const{conversationType:s,from:o,to:i,random:n,sequence:r,time:a}=e,{elements:u,messageVersion:c,cloudCustomData:l=\"\"}=t;return this.getModule(_s).onMessageModified({conversationType:s,from:o,to:i,time:a,random:n,sequence:r,elements:u,cloudCustomData:l,messageVersion:c})}_generateUUID(e){const t=this.getModule(ms);let s=`${t.getSDKAppID()}-${t.getUserID()}-${function(){let e=\"\";for(let t=32;t>0;--t)e+=Ye[Math.floor(Math.random()*je)];return e}()}`;const o=e.name||e.value||e.url||e.tempFilePath,i=o&&o.slice(o.lastIndexOf(\".\")+1);return i&&(s=`${s}.${i}`),s}getMessageOption(e){return this._messageOptionsMap.get(e)}_getNickAndAvatarByUserID(e){return this.getModule(cs).getNickAndAvatarByUserID(e)}_getNameCardByGroupID(e){if(e.conversationType===t.CONV_GROUP){const t=this.getModule(ds);if(t)return t.getMyNameCardByGroupID(e.to)}return\"\"}reset(){_e.l(this._n+\".reset\"),this._messageOptionsMap.clear()}}class ua extends Fs{constructor(e){super(e),this._n=\"MessageExtensionModule\",this.messageExtensionMap=new Map,this.globalSeqMap=new Map,this.getMessageExtensionsMap=new Map}onMessageExtensionNotify(t){const{messageInfo:s,operateType:o,operateResultList:i,tinyID:n,globalSequence:r}=t.dataList,{clientTime:a,random:u}=s,c=`${n}-${a}-${u}`,l=[],d=[];_e.l(`${this._n}.onMessageExtensionNotify messageID:${c} operateType:${o} globalSequence:${r}`),this._updateGlobalSequence(c,r);let p=!1,h=!1;i.forEach(e=>{const{extensions:t=[],clearSequence:s}=e;if(1===o)p=!0,t.forEach(e=>{l.push({key:e.key,value:e.value})}),this._updateLocalExtension(c,t);else if(2===o)h=!0,t.forEach(e=>{d.push(e.key)}),this._updateLocalExtension(c,t);else if(3===o){if(h=!0,this._hasLocalExtension(c)){this._getLocalExtension(c).forEach((e,t)=>{e.seq<=s&&!Lt(e.value)&&d.push(t)})}this._clearLocalExtension(c,s)}}),p&&this.emitOuterEvent(e.MESSAGE_EXTENSIONS_UPDATED,{messageID:c,extensions:l}),h&&this.emitOuterEvent(e.MESSAGE_EXTENSIONS_DELETED,{messageID:c,keyList:d})}setMessageExtensions(e,t){if(!this.canIUse(M.MSG_EXT))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".setMessageExtensions\",{ID:o,conversationID:i,sequence:n,time:r}=e;let a=[...t];t.length>20&&(a=t.slice(0,20),_e.w(s+\". the length of extensions cannot exceed 20.\"));const u=`conversationID:${i} messageID:${o} sequence:${n} time:${r} count:${a.length}`,c=new Cn(\"setMessageExtensions\");return c.setMessage(u),_e.l(`${s} ${u}`),this._modifyMessageExtensions(e,a).then(e=>{const{resultList:t,successCount:o,failureCount:i}=e,n=`success count:${o} fail count:${i}`;return c.setMoreMessage(n).end(),_e.l(`${s} ok. ${n}`),wn({extensions:t})}).catch(e=>(this.probeNetwork().then(([t,s])=>{c.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}getMessageExtensions(e){if(!this.canIUse(M.MSG_EXT))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const t=this._n+\".getMessageExtensions\",{ID:s,conversationID:o,sequence:i,time:n}=e,r=`conversationID:${o} messageID:${s} sequence:${i} time:${n}`,a=new Cn(\"getMessageExtensions\");a.setMessage(r),_e.l(`${t} ${r}`);let u=void 0;return this.getMessageExtensionsMap.has(s)&&(u=this._getGlobalSequence(s)),this._getMessageExtensions(e,u).then(e=>(a.end(),_e.l(`${t} ok. total count:${e.length}`),we(u)&&e.length>0&&this.getMessageExtensionsMap.set(s,1),wn({extensions:e}))).catch(e=>(this.probeNetwork().then(([t,s])=>{a.setError(e,t,s).end()}),_e.e(t+\" failed. error:\",e),Vn(e)))}deleteMessageExtensions(e,t){if(!this.canIUse(M.MSG_EXT))return Vn({code:nn.CANNOT_USE_COMMERCIAL_ABILITY});const s=this._n+\".deleteMessageExtensions\",o=[];let i=3;Lt(t)||(i=2,t.forEach(e=>{o.push({key:e,value:\"\",seq:0})}));const{ID:n,conversationID:r,sequence:a,time:u}=e,c=`conversationID:${r} messageID:${n} sequence:${a} time:${u} operateType:${i}`,l=new Cn(\"deleteMessageExtensions\");return l.setMessage(c),_e.l(`${s} ${c}`),this._modifyMessageExtensions(e,o,i).then(e=>{const{resultList:t,successCount:o,failureCount:n}=e;let r=\"\";return 2===i&&(r=`success count:${o} fail count:${n}`),l.setMoreMessage(\"\"+r).end(),_e.l(`${s} ok. ${r}`),wn({extensions:t})}).catch(e=>(this.probeNetwork().then(([t,s])=>{l.setError(e,t,s).end()}),_e.e(s+\" failed. error:\",e),Vn(e)))}_modifyMessageExtensions(e,s,o=1){const i=ot(e.to)?t.CONV_TOPIC:e.conversationType;let n=void 0;3!==o&&(n=this._getRequestExtensions(e,s));let r=null;switch(i){case t.CONV_C2C:r=this.getModule(ls);break;case t.CONV_GROUP:r=this.getModule(ds);break;case t.CONV_TOPIC:r=this.getModule(gs);break;default:return Vn({code:nn.CANNOT_FIND_MODULE})}return r.modifyMessageExtensions(e,n,o).then(t=>{let{extensions:s,seq:o}=t.data;const i=[];let n=0,r=0,a=[];return s=Lt(s)?[]:s,s.forEach(e=>{const{errorCode:t,extension:s}=e,{key:o,value:u,seq:c}=s;i.push({code:t,key:o,value:u}),0===t?n++:r++,a.push({key:o,value:u,seq:c})}),this._updateGlobalSequence(e.ID,o),a.length>0&&(this._updateLocalExtension(e.ID,a),a=null),{resultList:i,successCount:n,failureCount:r}}).catch(e=>Vn(e))}_getRequestExtensions(e,t){const s=[];if(this._hasLocalExtension(e.ID)){const o=this._getLocalExtension(e.ID);return t.forEach(e=>{const{key:t,value:i}=e;let n=0;o.has(t)&&(n=o.get(t).seq),s.push({key:t,value:i,seq:n})}),s}return t.forEach(e=>{const{key:t,value:o}=e;s.push({key:t,value:o,seq:0})}),s}_getMessageExtensions(e,s){const o=this._n+\"._getMessageExtensions\",{ID:i,to:n}=e;let r=null;switch(ot(n)?t.CONV_TOPIC:e.conversationType){case t.CONV_C2C:r=this.getModule(ls);break;case t.CONV_GROUP:r=this.getModule(ds);break;case t.CONV_TOPIC:r=this.getModule(gs);break;default:return Vn({code:nn.CANNOT_FIND_MODULE})}return r.getMessageExtensions(e,s).then(t=>{let{extensions:s,completeFlag:n,globalSequence:r,clearSequence:a}=t.data;if(s=Lt(s)?[]:s,_e.l(`${o} ok. completeFlag:${n} globalSequence:${r} clearSequence:${a} count:${s.length}`),this._updateLocalExtension(i,s),this._clearLocalExtension(i,a),this._updateGlobalSequence(i,r),1!==n){const t=s.slice(-1)[0].seq+1;return this._getMessageExtensions(e,t)}return this._getLocalExtensions(i)}).catch(e=>Vn(e))}_hasLocalExtension(e){return this.messageExtensionMap.has(e)}_getLocalExtension(e){return this.messageExtensionMap.get(e)}_updateLocalExtension(e,t){this._hasLocalExtension(e)||this.messageExtensionMap.set(e,new Map);const s=this._getLocalExtension(e);t.forEach(e=>{const{key:t,value:o=\"\",seq:i}=e;s.set(t,{value:o,seq:i})})}_clearLocalExtension(e,t){if(!(t<=0)&&this._hasLocalExtension(e)){const s=this._getLocalExtension(e);s.forEach((e,o)=>{e.seq<=t&&s.delete(o)})}}_getLocalExtensions(e){const t=[];if(this._hasLocalExtension(e)){this._getLocalExtension(e).forEach((e,s)=>{const{value:o}=e;Lt(o)||t.push({key:s,value:o})})}return t}_getGlobalSequence(e){return this.globalSeqMap.get(e)}_updateGlobalSequence(e,t){this.globalSeqMap.set(e,t)}reset(){_e.l(this._n+\".reset\"),this.messageExtensionMap.clear(),this.globalSeqMap.clear(),this.getMessageExtensionsMap.clear()}}class ca extends Fs{constructor(e){super(e),this._n=\"ComboMessageModule\"}sendMessage(e){const s=this._constructMessageInstance(e);if(null===s)return Vn({code:nn.MESSAGE_SEND_FAIL});this._addSendMessageTotalCount(s);const o=Date.now();return this.getModule(_s).setMessageRandom(s),this._sendComboMessage(s,e).then(e=>{const{time:i,sequence:n,readReceiptCode:r}=e.data;if(Ge(r)&&0!==r){new Cn(\"sendMessageWithReceipt\").setMessage(`from:${s.from} to:${s.to} sequence:${n} readReceiptCode:${r}`).end(),_e.w(`${this._n}.sendMessage readReceiptCode:${r} message:${this.getErrorMessage(r)}`)}this._addSendMessageSuccessCount(s,o);const a=this.getModule(_s);s.status=Nt.SUCCESS,s.time=i,s.conversationType===t.CONV_GROUP&&(s.sequence=n),a.appendToMessageList(s);let u=s;return!0===s._isExcludedFromLastMessage&&(u=\"\"),a.onMessageSent({conversationOptionsList:[{conversationID:s.conversationID,unreadCount:0,type:s.conversationType,subType:s.conversationSubType,lastMessage:u}]}),wn({message:s})}).catch(e=>this._onSendMessageFailed(s,e))}_sendComboMessage(e,s){const o=this._m.getModule(Es);let i=\"\";return e.conversationType===t.CONV_C2C&&(i=`${m.NAME.OPEN_IM}.${m.CMD.SEND_MESSAGE}`),e.conversationType===t.CONV_GROUP&&(i=`${m.NAME.GROUP}.${m.CMD.SEND_GROUP_MESSAGE}`),o.sendComboMessage({servcmd:i,data:s})}_constructMessageInstance(e){const s=this._n+\"._constructMessageInstance\";let o=null;try{const i=this.getMyUserID(),n={};if(n.senderTinyID=this.getMyTinyID(),n.currentUser=i,n.from=e.From_Account||i,e.GroupId?(n.conversationID=`${t.CONV_GROUP}${e.GroupId}`,n.conversationType=t.CONV_GROUP,n.to=e.GroupId):e.To_Account&&(n.conversationID=`${t.CONV_C2C}${e.To_Account}`,n.conversationType=t.CONV_C2C,n.to=e.To_Account),n.time=e.MsgTimeStamp||0,n.random=e.Random||e.MsgRandom||0,n.priority=e.MsgPriority,Ue(e.CloudCustomData)&&e.CloudCustomData.length>0&&(n.cloudCustomData=e.CloudCustomData),be(e.SendMsgControl)&&(n.messageControlInfo={},e.SendMsgControl.includes(\"NoUnread\")&&(n.messageControlInfo.excludedFromUnreadCount=1),e.SendMsgControl.includes(\"NoLastMsg\")&&(n.messageControlInfo.excludedFromLastMessage=1)),n.conversationType===t.CONV_GROUP&&be(e.To_Account)&&e.To_Account.length>0){let t=e.To_Account;e.To_Account.length>50&&(t=e.To_Account.slice(0,50),_e.w(s+\" To_Account must be less than or equal to 50.\")),n.receiverList=[...t],e.To_Account=[...t]}1!==e.IsNeedReadReceipt&&1!==e.NeedReadReceipt||(n.needReadReceipt=!0),1===e.SupportMessageExtension&&(n.isSupportExtension=!0),o=new bn(n),o.status=Nt.UNSEND,e.MsgClientTime=o.clientTime,o.conversationType===t.CONV_C2C&&(e.MsgSeq=o.sequence);const r=e.MsgBody.length;let a;for(let t=0;t<r;t++)a=e.MsgBody[t],\"TIMTextElem\"===a.MsgType?o.setTextElement(a.MsgContent.Text):\"TIMCustomElem\"===a.MsgType?o.setCustomElement({data:a.MsgContent.Data||\"\",description:a.MsgContent.Desc||\"\",extension:a.MsgContent.Ext||\"\"}):\"TIMFaceElem\"===a.MsgType&&o.setFaceElement({index:a.MsgContent.Index,data:a.MsgContent.Data});const u=o.getElements();o.payload=u[0].content,o.type=u[0].type}catch(i){o=null,_e.e(s+\" failed. error:\",i)}return o}_onSendMessageFailed(e,t){e.status=Nt.FAIL;this.getModule(_s).deleteMessageRandom(e),this._addSendMessageFailCountOnUser(e,t);const s=new Cn(\"sendMessage\");return s.setMessage(`tjg_id:${this.generateTjgID(e)} type:${e.type} from:${e.from} to:${e.to}`),this.probeNetwork().then(([e,o])=>{s.setError(t,e,o).end()}),_e.e(this._n+\"._onSendMessageFailed error:\",t),Vn(new Fn({code:t&&t.code?t.code:nn.MESSAGE_SEND_FAIL,message:t&&t.message?t.message:void 0,data:{message:e}}))}_getSendMessageSpecifiedKey(e){if(e.conversationType===t.CONV_C2C)return un;if(e.conversationType===t.CONV_GROUP){const t=this.getModule(ds).getLocalGroupProfile(e.to);if(!t)return;const s=t.type;return et(s)?ln:cn}}_addSendMessageTotalCount(e){const t=this._getSendMessageSpecifiedKey(e);if(t){this.getModule(Rs).addTotalCount(t)}}_addSendMessageSuccessCount(e,t){const s=Math.abs(Date.now()-t),o=this._getSendMessageSpecifiedKey(e);if(o){const e=this.getModule(Rs);e.addSuccessCount(o),e.addCost(o,s)}}_addSendMessageFailCountOnUser(e,t){const{code:s=-1}=t,o=this.getModule(Rs),i=this._getSendMessageSpecifiedKey(e);ra(s)&&i&&o.addFailedCountOfUserSide(i)}}class la extends Fs{constructor(e){super(e),this._n=\"PluginModule\",this.plugins={}}registerPlugin(e){Object.keys(e).forEach(t=>{this.plugins[t]=e[t]});new Cn(\"registerPlugin\").setMessage(\"\"+Object.keys(e)).end()}getPlugin(e){return this.plugins[e]}reset(){}}class da extends Fs{constructor(e){super(e),this._n=\"SyncUnreadMessageModule\",this._cookie=\"\",this._onlineSyncFlag=!1,this.getInnerEmitterInstance().on(Kn,this._onLoginSuccess,this)}_onLoginSuccess(e){this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}_startSync(e){const{cookie:t,syncFlag:s,isOnlineSync:o}=e,i=this._n+\"._startSync\";_e.l(`${i} cookie:${t} syncFlag:${s} isOnlineSync:${o}`),this.request({protocolName:Bs,requestData:{cookie:t,syncFlag:s,isOnlineSync:o}}).then(e=>{const{cookie:t,syncFlag:s}=e.data;this._cookie=t,Lt(t)||(0===s||1===s?(this._dispatchUnreadMessage({...e.data,isSyncingEnded:!1}),this._startSync({cookie:t,syncFlag:s,isOnlineSync:0})):2===s&&this._dispatchUnreadMessage({...e.data,isSyncingEnded:!0}))}).catch(e=>{_e.e(i+\" failed. error:\",e)})}_dispatchUnreadMessage(e){if(e.eventArray){this.getModule(Es).onMessage({head:{},body:{eventArray:e.eventArray,isInstantMessage:this._onlineSyncFlag,isSyncingEnded:e.isSyncingEnded}})}this.getModule(ls).onNewC2CMessage({dataList:e.messageList,isInstantMessage:!!e.isSyncingEnded&&this._onlineSyncFlag,C2CRemainingUnreadList:e.C2CRemainingUnreadList,C2CPairUnreadList:e.C2CPairUnreadList})}startOnlineSync(){_e.l(this._n+\".startOnlineSync\"),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:1})}startSyncOnReconnected(){_e.l(this._n+\".startSyncOnReconnected.\"),this._onlineSyncFlag=!0,this._startSync({cookie:this._cookie,syncFlag:0,isOnlineSync:0})}reset(){_e.l(this._n+\".reset\"),this._onlineSyncFlag=!1,this._cookie=\"\"}}const pa={request:{toAccount:\"To_Account\",fromAccount:\"From_Account\",to:\"To_Account\",from:\"From_Account\",groupID:\"GroupId\",groupAtUserID:\"GroupAt_Account\",extension:\"Ext\",data:\"Data\",description:\"Desc\",elements:\"MsgBody\",sizeType:\"Type\",downloadFlag:\"Download_Flag\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",videoUrl:\"\",imageUrl:\"URL\",fileUrl:\"Url\",uuid:\"UUID\",priority:\"MsgPriority\",receiverUserID:\"To_Account\",receiverGroupID:\"GroupId\",messageSender:\"SenderId\",messageReceiver:\"ReceiverId\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",messageNumber:\"MsgNum\",pbDownloadKey:\"PbMsgKey\",downloadKey:\"JsonMsgKey\",applicationType:\"PendencyType\",userIDList:\"To_Account\",groupNameList:\"GroupName\",userID:\"To_Account\",groupAttributeList:\"GroupAttr\",mainSequence:\"AttrMainSeq\",avChatRoomKey:\"BytesKey\",attributeControl:\"AttrControl\",sequence:\"seq\",messageControlInfo:\"SendMsgControl\",updateSequence:\"UpdateSeq\",clientTime:\"MsgClientTime\",sequenceList:\"MsgSeqList\",topicID:\"TopicId\",customData:\"CustomString\",isSupportTopic:\"SupportTopic\",isWebUniapp:\"is_web_uniapp\",isSupportExtension:\"SupportMessageExtension\",messageSequence:\"MsgSeq\",messageKey:\"MsgKey\",startSequence:\"startSeq\",simplifiedMessage:\"DownsizeFlag\"},response:{MsgPriority:\"priority\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",Download_Flag:\"downloadFlag\",GroupId:\"groupID\",Member_Account:\"userID\",MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",MsgSeq:\"sequence\",MsgRandom:\"random\",MsgTime:\"time\",MsgTimeStamp:\"time\",MsgContent:\"content\",MsgBody:\"elements\",From_AccountNick:\"nick\",From_AccountHeadurl:\"avatar\",GroupWithdrawInfoArray:\"revokedInfos\",GroupReadInfoArray:\"groupMessageReadNotice\",LastReadMsgSeq:\"lastMessageSeq\",WithdrawC2cMsgNotify:\"c2cMessageRevokedNotify\",C2cWithdrawInfoArray:\"revokedInfos\",C2cReadedReceipt:\"c2cMessageReadReceipt\",ReadC2cMsgNotify:\"c2cMessageReadNotice\",LastReadTime:\"peerReadTime\",MsgRand:\"random\",MsgType:\"type\",MsgShow:\"messageShow\",NextMsgSeq:\"nextMessageSeq\",FaceUrl:\"avatar\",ProfileDataMod:\"profileModify\",Profile_Account:\"userID\",ValueBytes:\"value\",ValueNum:\"value\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgFrom_AccountExtraInfo:\"messageFromAccountExtraInformation\",Operator_Account:\"operatorID\",OpType:\"operationType\",ReportType:\"operationType\",UserId:\"userID\",User_Account:\"userID\",List_Account:\"userIDList\",MsgOperatorMemberExtraInfo:\"operatorInfo\",MsgMemberExtraInfo:\"memberInfoList\",ImageUrl:\"avatar\",NickName:\"nick\",MsgGroupNewInfo:\"newGroupProfile\",MsgAppDefinedData:\"groupCustomField\",Owner_Account:\"ownerID\",GroupFaceUrl:\"avatar\",GroupIntroduction:\"introduction\",GroupNotification:\"notification\",GroupApplyJoinOption:\"joinOption\",MsgKey:\"messageKey\",GroupInfo:\"groupProfile\",ShutupTime:\"muteTime\",Desc:\"description\",Ext:\"extension\",GroupAt_Account:\"groupAtUserID\",MsgNum:\"messageNumber\",PbMsgKey:\"pbDownloadKey\",JsonMsgKey:\"downloadKey\",MsgModifiedFlag:\"isModified\",PendencyItem:\"applicationItem\",PendencyType:\"applicationType\",AddTime:\"time\",AddSource:\"source\",AddWording:\"wording\",ProfileImImage:\"avatar\",PendencyAdd:\"friendApplicationAdded\",FrienPencydDel_Account:\"friendApplicationDeletedUserIDList\",Peer_Account:\"userID\",GroupAttr:\"groupAttributeList\",GroupAttrAry:\"groupAttributeList\",AttrMainSeq:\"mainSequence\",seq:\"sequence\",GroupAttrOption:\"groupAttributeOption\",BytesChangedKeys:\"changedKeyList\",GroupAttrInfo:\"groupAttributeList\",GroupAttrSeq:\"mainSequence\",PushChangedAttrValFlag:\"isWithChangedAttributeInfo\",SubKeySeq:\"sequence\",Val:\"value\",MsgGroupFromCardName:\"senderNameCard\",MsgGroupFromNickName:\"senderNick\",C2cNick:\"peerNick\",C2cImage:\"peerAvatar\",SendMsgControl:\"messageControlInfo\",NoLastMsg:\"excludedFromLastMessage\",NoUnread:\"excludedFromUnreadCount\",UpdateSeq:\"updateSequence\",MuteNotifications:\"muteFlag\",MsgClientTime:\"clientTime\",TinyId:\"tinyID\",GroupMsgReceiptList:\"readReceiptList\",ReadNum:\"readCount\",UnreadNum:\"unreadCount\",TopicId:\"topicID\",MillionGroupFlag:\"communityType\",SupportTopic:\"isSupportTopic\",MsgTopicNewInfo:\"newTopicInfo\",ShutupAll:\"muteAllMembers\",CustomString:\"customData\",TopicFaceUrl:\"avatar\",TopicIntroduction:\"introduction\",TopicNotification:\"notification\",TopicIdArray:\"topicIDList\",MsgVersion:\"messageVersion\",C2cMsgModNotifys:\"c2cMessageModified\",GroupMsgModNotifys:\"groupMessageModified\",ApplyJoinOption:\"joinOption\",MsgFlag:\"messageRemindType\",AtInfoList:\"groupAtInfoList\",AtFlagList:\"groupAtType\",AtMsgSeq:\"sequence\",BanDuration:\"duration\",BanDescription:\"reason\",NotVisible:\"invisible\",BytesTag:\"tag\",BytesValue:\"value\",RptBytesValue:\"value\",LatestSeq:\"globalSequence\",ClearSeq:\"clearSequence\",SupportMessageExtension:\"isSupportExtension\",ExtensionList:\"extensions\",GroupCounter:\"counterList\",Revoker_Account:\"revoker\",MsgExtensionNotify:\"messageExtensionNotify\",ExtensionC2cMsgInfo:\"messageInfo\",ExtensionGroupMsgInfo:\"messageInfo\",MsgOptType:\"operateType\",SetKVInfo:\"operateResultList\",DeleteKVInfo:\"operateResultList\",ClearKVInfo:\"operateResultList\",MsgKeyValue:\"extensions\",ClearMsgSeq:\"clearSequence\",MsgLastSeq:\"globalSequence\",InviteJoinOption:\"inviteOption\",MemberList_Account:\"inviteeList\",MsgMemberExtraInfoList:\"inviteeInfoList\",E:\"event\",GInf:\"groupProfile\",MCT:\"clientTime\",MR:\"random\",MP:\"priority\",MTS:\"time\",GId:\"groupID\",MS:\"sequence\",CCD:\"cloudCustomData\",F_Account:\"from\",F_Hd:\"avatar\",F_NN:\"nick\",GN:\"groupName\",GT:\"groupType\",IsSys:\"isSystemMessage\",OpInf:\"operatorInfo\",Img:\"avatar\",NN:\"nick\",OnlineInf:\"onlineMemberInfo\",ET:\"expireTime\",Num:\"onlineMemberNum\",Opt:\"operationType\",O_Account:\"operatorID\",RT:\"operationType\",UDF:\"userDefinedField\",L_Account:\"userIDList\"},ignoreKeyWord:[\"C2C\",\"ID\",\"USP\"]};function ha(e,t){if(\"string\"!=typeof e&&!Array.isArray(e))throw new TypeError(\"Expected the input to be `string | string[]`\");t=Object.assign({pascalCase:!1},t);if(0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join(\"-\"):e.trim()).length)return\"\";if(1===e.length)return t.pascalCase?e.toUpperCase():e.toLowerCase();return e!==e.toLowerCase()&&(e=ga(e)),e=e.replace(/^[_.\\- ]+/,\"\").toLowerCase().replace(/[_.\\- ]+(\\w|$)/g,(e,t)=>t.toUpperCase()).replace(/\\d+(\\w|$)/g,e=>e.toUpperCase()),s=e,t.pascalCase?s.charAt(0).toUpperCase()+s.slice(1):s;var s}const ga=e=>{let t=!1,s=!1,o=!1;for(let i=0;i<e.length;i++){const n=e[i];t&&/[a-zA-Z]/.test(n)&&n.toUpperCase()===n?(e=e.slice(0,i)+\"-\"+e.slice(i),t=!1,o=s,s=!0,i++):s&&o&&/[a-zA-Z]/.test(n)&&n.toLowerCase()===n?(e=e.slice(0,i-1)+\"-\"+e.slice(i-1),o=s,s=!1,t=!0):(t=n.toLowerCase()===n&&n.toUpperCase()!==n,o=s,s=n.toUpperCase()===n&&n.toLowerCase()!==n)}return e};function _a(e,t){let s=0;return function e(t,o){if(s++,s>100)return s--,t;if(be(t)){const i=t.map(t=>ke(t)?e(t,o):t);return s--,i}if(ke(t)){let i=function(e,t){const s=Object.create(null);return Object.keys(e).forEach(o=>{const i=t(e[o],o);i&&(s[i]=e[o])}),s}(t,(e,t)=>{if(!Ve(t))return!1;if((s=t)!==ha(s))for(let o=0;o<pa.ignoreKeyWord.length&&!t.includes(pa.ignoreKeyWord[o]);o++);var s;return we(o[t])?function(e){if(\"OPPOChannelID\"===e)return e;return e[0].toUpperCase()+ha(e).slice(1)}(t):o[t]});return i=at(i,(t,s)=>be(t)||ke(t)?e(t,o):t),s--,i}}(e,t)}function ma(e,t){if(be(e))return e.map(e=>ke(e)?ma(e,t):e);if(ke(e)){let s=function(e,t){const s={};return Object.keys(e).forEach(o=>{s[t(e[o],o)]=e[o]}),s}(e,(e,s)=>we(t[s])?ha(s):t[s]);return s=at(s,e=>be(e)||ke(e)?ma(e,t):e),s}}const Ma=String.fromCharCode,fa=function(e){let t=0|e.charCodeAt(0);if(55296<=t)if(t<56320){const s=0|e.charCodeAt(1);if(56320<=s&&s<=57343){if(t=(t<<10)+s-56613888|0,t>65535)return Ma(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}else t=65533}else t<=57343&&(t=65533);return t<=2047?Ma(192|t>>>6,128|63&t):Ma(224|t>>>12,128|t>>>6&63,128|63&t)},Ia=function(e){const t=void 0===e?\"\":(\"\"+e).replace(/[\\x80-\\uD7ff\\uDC00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]?/g,fa),s=0|t.length,o=new Uint8Array(s);let i=0;for(;i<s;i=i+1|0)o[i]=0|t.charCodeAt(i);return o};class Ca{constructor(e){this._handler=e;const t=e.getURL();if(this._socket=null,this._workerSocket=null,this._id=We(),this._handler.getIsWorkerEnabled()){const e=URL.createObjectURL(new Blob([';let _socket = null;onmessage = function(event) {  if (event.data.cmd === \"start\") {    const url = event.data.url;    _socket = new WebSocket(url);    _socket.binaryType = \"arraybuffer\";    _socket.onopen = function() {      postMessage({ callback: \"onOpen\", extensions: _socket.extensions });    };    _socket.onclose = function(e) {      postMessage({ callback: \"onOpen\", e: { code: e.code, reason: e.reason } });    };    _socket.onmessage = function(e) {      postMessage({ callback: \"onMessage\", data: e.data });    };    _socket.onerror = function(e) {      postMessage({ callback: \"onError\", e: { isTrusted: \"true\" } });    };  } else if (event.data.cmd === \"sendMessage\") {    if (_socket !== null) {      _socket.send(event.data.data);    }  } else if (event.data.cmd === \"stop\") {    if (_socket !== null) {      _socket.close(event.data.code);      _socket = null;    }  }};'],{type:\"application/javascript; charset=utf-8\"}));this._workerSocket=new Worker(e);const s=this;this._workerSocket.onmessage=function(e){const{callback:t,e:o,extensions:i}=e.data;\"onOpen\"===t?s._onOpen(i):\"onClose\"===t?s._onClose(o):\"onError\"===t?s._onError(o):\"onMessage\"===t&&s._onMessage(e.data)},this._workerSocket.postMessage({cmd:\"start\",id:this._id,url:t})}else P?O?(w.connectSocket({url:t,header:{\"content-type\":\"application/json\"}}),w.onSocketClose(this._onClose.bind(this)),w.onSocketOpen(this._onOpen.bind(this)),w.onSocketMessage(this._onMessage.bind(this)),w.onSocketError(this._onError.bind(this))):(this._socket=w.connectSocket({url:t,header:{\"content-type\":\"application/json\"},complete:()=>{}}),this._socket.onClose(this._onClose.bind(this)),this._socket.onOpen(this._onOpen.bind(this)),this._socket.onMessage(this._onMessage.bind(this)),this._socket.onError(this._onError.bind(this))):b&&(this._socket=new WebSocket(t),this._socket.binaryType=\"arraybuffer\",this._socket.onopen=this._onOpen.bind(this,this._socket.extensions),this._socket.onmessage=this._onMessage.bind(this),this._socket.onclose=this._onClose.bind(this),this._socket.onerror=this._onError.bind(this));this._canIUseBinaryFrame=e.canIUseBinaryFrame()}getID(){return this._id}_onOpen(e){this._handler.onOpen({id:this._id,res:JSON.stringify(e)})}_onClose(e){this._handler.onClose({id:this._id,e:e})}_onMessage(e){let t;t=this._canIUseBinaryFrame?this._isAppCompressedData(e.data)?this._handler.inflate(e.data):function(e){const t=new Uint8Array(e);let s=\"\",o=0;const i=t.length;for(;o<i;){let e=t[o],n=0,r=0;if(e<=127?(n=0,r=255&e):e<=223?(n=1,r=31&e):e<=239?(n=2,r=15&e):e<=244&&(n=3,r=7&e),i-o-n>0){let s=0;for(;s<n;)e=t[o+s+1],r=r<<6|63&e,s+=1}else r=65533,n=i-o;s+=String.fromCodePoint(r),o+=n+1}return s}(e.data):e.data,this._handler.onMessage({data:t})}_isAppCompressedData(e){const t=new Uint8Array(e);return 67===t[0]&&79===t[1]&&77===t[2]&&80===t[3]}_onError(e){this._handler.onError({id:this._id,e:e})}setIsWorkerEnabled(e){this._isWorkerEnabled=!0}close(e){if(this._workerSocket&&(this._workerSocket.postMessage({cmd:\"stop\",code:e}),this._workerSocket.terminate(),this._workerSocket=null),O)return w.offSocketClose(),w.offSocketMessage(),w.offSocketOpen(),w.offSocketError(),void w.closeSocket();this._socket&&(P?(this._socket.onClose(()=>{}),this._socket.onOpen(()=>{}),this._socket.onMessage(()=>{}),this._socket.onError(()=>{})):b&&(this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null),R?this._socket.close({code:e}):this._socket.close(e),this._socket=null)}send(e){if(this._workerSocket)this._workerSocket.postMessage({cmd:\"sendMessage\",data:this._canIUseBinaryFrame?Ia(e.data).buffer:e.data});else{if(O)return void w.sendSocketMessage({data:e.data,fail:()=>{e.fail&&e.requestID&&e.fail(e.requestID)}});this._socket&&(P?this._socket.send({data:this._canIUseBinaryFrame?Ia(e.data).buffer:e.data,fail:()=>{e.fail&&e.requestID&&e.fail(e.requestID)}}):b&&this._socket.send(this._canIUseBinaryFrame?Ia(e.data):e.data))}}}const Ta=4e3,ya=4001,Da=\"connected\",Ea=\"connecting\",Sa=\"disconnected\";class La{constructor(e){this._channelModule=e,this._n=\"SocketHandler\",this._promiseMap=new Map,this._readyState=Sa,this._simpleRequestMap=new Map,this.MAX_SIZE=100,this._startSequence=We(),this._startTs=0,this._reConnectFlag=!1,this._nextPingTs=0,this._reConnectCount=0,this.MAX_RECONNECT_COUNT=3,this._socketID=-1,this._random=0,this._socket=null,this._url=\"\",this._onOpenTs=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0,this._setWebsocketHost(),this._initConnection()}_setWebsocketHost(){const e=this._channelModule.getModule(ms);let t=u;this._channelModule.isOversea()&&(t=c),e.isSingaporeSite()?t=l:e.isKoreaSite()?t=d:e.isGermanySite()?t=p:e.isIndiaSite()?t=h:e.isJapanSite()?t=g:e.isUSASite()&&(t=_),m.HOST.setCurrent(t)}_initConnection(){we(m.HOST.CURRENT.BACKUP)||\"\"===this._url?this._url=m.HOST.CURRENT.DEFAULT:this._url===m.HOST.CURRENT.DEFAULT?this._url=m.HOST.CURRENT.BACKUP:this._url===m.HOST.CURRENT.BACKUP?this._url=this._canIUseAnyCast()?m.HOST.CURRENT.ANYCAST:m.HOST.CURRENT.DEFAULT:this._url===m.HOST.CURRENT.ANYCAST&&(m.HOST.CURRENT.ANYCAST=\"\",this._url=m.HOST.CURRENT.DEFAULT);const e=this._channelModule.getModule(ms).getProxyServer();Lt(e)||(this._url=e),this._connect(),this._nextPingTs=0}_canIUseAnyCast(){return b&&m.HOST.CURRENT.ANYCAST}onCheckTimer(e){e%1==0&&this._checkPromiseMap()}_checkPromiseMap(){0!==this._promiseMap.size&&this._promiseMap.forEach((e,t)=>{const{reject:s,timestamp:o}=e;let i=15e3;-1!==t.indexOf($s)?i=9e4:-1!==t.indexOf(Ui)&&(i=3e3),Date.now()-o>=i&&(_e.l(`${this._n}._checkPromiseMap request timeout, delete requestID:${t}`),this._promiseMap.delete(t),s(new Fn({code:nn.NETWORK_TIMEOUT})),this._channelModule.onRequestTimeout(t))})}onOpen(e){if(\"\"===this._readyState)return;this._onOpenTs=Date.now();const{id:t,res:s}=e;this._socketID=t;const o=Date.now()-this._startTs,i=`socketID:${t} res:${s}`;_e.l(`${this._n}._onOpen cost:${o} ms. ${i}`);new Cn(\"wsOnOpen\").setMessage(o).setCostTime(o).setMoreMessage(i).end(),e.id===this._socketID&&(this._readyState=Da,this._reConnectCount=0,this._resend(),!0===this._reConnectFlag&&(this._channelModule.onReconnected(),this._reConnectFlag=!1),this._channelModule.onOpen())}onClose(e){const t=new Cn(\"wsOnClose\"),{id:s,e:o}=e,i=`sourceSocketID:${s} currentSocketID:${this._socketID} code:${o.code} reason:${o.reason}`;let n=0;0!==this._onOpenTs&&(n=Date.now()-this._onOpenTs),t.setMessage(n).setCostTime(n).setMoreMessage(i).setCode(o.code).end(),_e.l(`${this._n}._onClose ${i} onlineTime:${n}`),s===this._socketID&&(this._readyState=Sa,n<1e3?this._channelModule.onReconnectFailed():this._channelModule.onClose())}onError(e){const{id:t,e:s}=e,o=`sourceSocketID:${t} currentSocketID:${this._socketID}`;new Cn(\"wsOnError\").setMessage(s.errMsg||He(s)).setMoreMessage(o).setLevel(\"error\").end(),_e.w(this._n+\"._onError\",s,o),t===this._socketID&&(this._readyState=\"\",this._channelModule.onError())}onMessage(e){let t;try{t=JSON.parse(e.data)}catch(i){new Cn(\"jsonParseError\").setMessage(e.data).end()}if(!t||!t.head)return;const s=this._getRequestIDFromHead(t.head);let o=t.body;if(!this._isTRTCCommand(s)){const e=gt(t.head);o=ma(t.body,this._getResponseKeyMap(e))}if(_e.d(`${this._n}.onMessage ret:${JSON.stringify(o)} requestID:${s} has:${this._promiseMap.has(s)}`),this._setNextPingTs(),this._promiseMap.has(s)){const{resolve:e,reject:t,timestamp:i}=this._promiseMap.get(s);return this._promiseMap.delete(s),this._calcRTT(i),void(o.errorCode&&0!==o.errorCode?(this._channelModule.onErrorCodeNotZero(o),t(new Fn({code:o.errorCode,message:o.errorInfo||\"\",data:s.includes(Co)||s.includes(li)?{elements:o.elements,messageVersion:o.messageVersion,cloudCustomData:o.cloudCustomData}:void 0}))):e(wn(o)))}this._channelModule.onMessage({head:t.head,body:o})}_isTRTCCommand(e){const t=this._channelModule.getModule(ks).getCommandList();let s=!1;for(let o=0;o<t.length;o++)if(e.startsWith(t[o])){s=!0;break}return s}_calcRTT(e){const t=Date.now()-e;this._channelModule.getModule(Rs).addRTT(t)}_connect(){this._startTs=Date.now(),this._onOpenTs=0,this._socket=new Ca(this),this._socketID=this._socket.getID(),this._readyState=Ea,_e.l(`${this._n}._connect isWorkerEnabled:${this.getIsWorkerEnabled()} socketID:${this._socketID} url:${this.getURL()}`);new Cn(\"wsConnect\").setMessage(`socketID:${this._socketID} url:${this.getURL()}`).end()}getURL(){this._channelModule.isDevMode()&&(this._canIUseBinaryFrame=!1);const e=lt();(O||L&&\"windows\"===e||U)&&(this._canIUseBinaryFrame=!1);let t=-1;\"ios\"===e?t=W||-1:\"android\"===e&&(t=j||-1);const s=this._channelModule.getModule(ms),o=this._channelModule.getPlatform();let i=`sdkappid=${s.getSDKAppID()}&instanceid=${s.getInstanceID()}&random=${this._getRandom()}&platform=${o}&host=${e}&version=${t}&sdkversion=2.27.6`;return A&&(i+=\"&isminigame=1\"),this._channelModule.canIUseInflate()&&(i+=\"&compress=gzip\"),this._canIUseBinaryFrame?`${this._url}/binfo?${i}`:`${this._url}/info?${i}`}_closeConnection(e){_e.l(`${this._n}._closeConnection socketID:${this._socketID}`),this._socket&&(this._socket.close(e),this._socketID=-1,this._socket=null,this._readyState=Sa)}_resend(){if(_e.l(`${this._n}._resend reConnectFlag:${this._reConnectFlag}`,`promiseMap.size:${this._promiseMap.size} simpleRequestMap.size:${this._simpleRequestMap.size}`),this._promiseMap.size>0&&this._promiseMap.forEach((e,t)=>{const{uplinkData:s,resolve:o,reject:i}=e;this._promiseMap.set(t,{resolve:o,reject:i,timestamp:Date.now(),uplinkData:s}),this._execute(t,s)}),this._simpleRequestMap.size>0){for(const[e,t]of this._simpleRequestMap)this._execute(e,t);this._simpleRequestMap.clear()}}send(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);const{keyMap:t,...s}=e,o=this._getRequestIDFromHead(e.head),i=JSON.stringify(s);return new Promise((e,t)=>{if(this._promiseMap.set(o,{resolve:e,reject:t,timestamp:Date.now(),uplinkData:i}),_e.d(`${this._n}.send uplinkData:${JSON.stringify(s)} requestID:${o} readyState:${this._readyState}`),this._readyState!==Da)this._reConnect();else{this._execute(o,i);this._channelModule.getModule(Rs).addRequestCount()}})}simplySend(e){e.head.seq=this._getSequence(),e.head.reqtime=Math.floor(Date.now()/1e3);const{keyMap:t,...s}=e,o=this._getRequestIDFromHead(e.head),i=JSON.stringify(s);this._readyState!==Da?(this._simpleRequestMap.size<this.MAX_SIZE?this._simpleRequestMap.set(o,i):_e.l(this._n+\".simplySend. simpleRequestMap is full, drop request!\"),this._reConnect()):this._execute(o,i)}_execute(e,t){this._socket.send({data:t,fail:P?this._onSendFail.bind(this):void 0,requestID:e})}_onSendFail(e){_e.l(`${this._n}._onSendFail requestID:${e}`)}_getSequence(){let e;if(this._startSequence<2415919103)return e=this._startSequence,this._startSequence+=1,2415919103===this._startSequence&&(this._startSequence=We()),e}_getRequestIDFromHead(e){const{servcmd:t,seq:s}=e;return t+s}_getResponseKeyMap(e){const t=this._channelModule.getKeyMap(e);return{...pa.response,...t.response}}_reConnect(){this._readyState!==Da&&this._readyState!==Ea&&this.forcedReconnect()}forcedReconnect(){const e=this._n+\".forcedReconnect\";_e.l(`${e} count:${this._reConnectCount} readyState:${this._readyState}`),this._reConnectFlag=!0,this._resetRandom(),this._reConnectCount<this.MAX_RECONNECT_COUNT?(this._reConnectCount+=1,this._closeConnection(ya),this._initConnection()):(this._reConnectCount=0,this._channelModule.probeNetwork().then(([t,s])=>{t?(_e.w(e+\" disconnected from wsserver but network is ok, continue...\"),this._closeConnection(ya),this._initConnection()):this._channelModule.onReconnectFailed()}))}getReconnectFlag(){return this._reConnectFlag}_setNextPingTs(){this._nextPingTs=Date.now()+1e4}getNextPingTs(){return this._nextPingTs}isConnected(){return this._readyState===Da}canIUseBinaryFrame(){return this._canIUseBinaryFrame}inflate(e){if(this._channelModule.canIUseInflate())return this._channelModule.getModule(ws).inflate(e)}setIsWorkerEnabled(e){_e.l(`${this._n}.setIsWorkerEnabled flag:${e}`),this._isWorkerEnabled=e}getIsWorkerEnabled(){return this._isWorkerEnabled&&Q}_getRandom(){return 0===this._random&&(this._random=Math.random()),this._random}_resetRandom(){this._random=0}close(){_e.l(this._n+\".close\"),this._closeConnection(Ta),this._promiseMap.clear(),this._startSequence=We(),this._readyState=Sa,this._simpleRequestMap.clear(),this._reConnectFlag=!1,this._reConnectCount=0,this._onOpenTs=0,this._url=\"\",this._random=0,this._canIUseBinaryFrame=!0,this._isWorkerEnabled=!0}}class Aa extends Fs{constructor(e){if(super(e),this._n=\"ChannelModule\",this._socketHandler=new La(this),this._probing=!1,this._isAppShowing=!0,this._previousState=t.NET_STATE_CONNECTED,P&&\"function\"==typeof w.onAppShow&&\"function\"==typeof w.onAppHide){const e=this._onAppHide.bind(this),t=this._onAppShow.bind(this);\"function\"==typeof w.offAppHide&&w.offAppHide(e),\"function\"==typeof w.offAppShow&&w.offAppShow(t),w.onAppHide(e),w.onAppShow(t)}this._timerForNotLoggedIn=-1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3),this._fatalErrorFlag=!1}onCheckTimer(e){this._socketHandler&&(this.isLoggedIn()?(this._timerForNotLoggedIn>0&&(clearInterval(this._timerForNotLoggedIn),this._timerForNotLoggedIn=-1),this._socketHandler.onCheckTimer(e)):this._socketHandler.onCheckTimer(1),this._checkNextPing())}onErrorCodeNotZero(e){this.getModule(Es).onErrorCodeNotZero(e)}onMessage(e){this.getModule(Es).onMessage(e)}send(e){return this._socketHandler?this._previousState!==t.NET_STATE_CONNECTED&&e.head.servcmd.includes(Gi)?(this.reConnect(),this._sendLogViaHTTP(e)):this._socketHandler.send(e):Promise.reject()}_sendLogViaHTTP(e){const t=m.HOST.CURRENT.STAT;return new Promise((s,o)=>{const i=`${t}/v4/imopenstat/tim_web_report_v2?sdkappid=${e.head.sdkappid}&reqtime=${Date.now()}`,n=JSON.stringify(e.body),r=\"application/x-www-form-urlencoded;charset=UTF-8\";if(P)w.request({url:i,data:n,method:\"POST\",timeout:3e3,header:{\"content-type\":r},success:()=>{s()},fail:()=>{o(new Fn({code:nn.NETWORK_ERROR}))}});else{const e=new XMLHttpRequest,t=setTimeout(()=>{e.abort(),o(new Fn({code:nn.NETWORK_TIMEOUT}))},3e3);e.onreadystatechange=function(){4===e.readyState&&(clearTimeout(t),200===e.status||304===e.status?s():o(new Fn({code:nn.NETWORK_ERROR})))},e.open(\"POST\",i,!0),e.setRequestHeader(\"Content-type\",r),e.send(n)}})}simplySend(e){return this._socketHandler?this._socketHandler.simplySend(e):Promise.reject()}onOpen(){this._ping()}onClose(){if(this._socketHandler){this._socketHandler.getReconnectFlag()&&this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)}this.reConnect()}onError(){P&&!U&&this.outputWarning(\"DomainNameInMP\"),this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)}getKeyMap(e){return this.getModule(Es).getKeyMap(e)}_onAppHide(){this._isAppShowing=!1}_onAppShow(){this._isAppShowing=!0}onRequestTimeout(e){}onReconnected(){_e.l(this._n+\".onReconnected\"),this._m.restartTimer();this.getModule(Es).onReconnected(),this._emitNetStateChangeEvent(t.NET_STATE_CONNECTED)}onReconnectFailed(){_e.l(this._n+\".onReconnectFailed\"),this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)}setIsWorkerEnabled(e){this._socketHandler&&this._socketHandler.setIsWorkerEnabled(!1)}offline(){this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)}reConnect(e=!1){let s=!1;this._socketHandler&&(s=this._socketHandler.getReconnectFlag());const o=`forcedFlag:${e} fatalErrorFlag:${this._fatalErrorFlag} previousState:${this._previousState} reconnectFlag:${s}`;if(_e.l(`${this._n}.reConnect ${o}`),!this._fatalErrorFlag&&this._socketHandler){if(!0===e)this._socketHandler.forcedReconnect();else{if(this._previousState===t.NET_STATE_CONNECTING&&s)return;this._socketHandler.forcedReconnect()}this._emitNetStateChangeEvent(t.NET_STATE_CONNECTING)}}_emitNetStateChangeEvent(t){this._previousState!==t&&(_e.l(`${this._n}._emitNetStateChangeEvent from ${this._previousState} to ${t}`),this._previousState=t,this.emitOuterEvent(e.NET_STATE_CHANGE,{state:t}))}_ping(){if(!0===this._probing)return;this._probing=!0;const e=this.getModule(Es).getProtocolData({protocolName:Ui});this.send(e).then(()=>{this._probing=!1}).catch(e=>{if(_e.w(this._n+\"._ping failed. error:\",e),this._probing=!1,e&&60002===e.code){return new Cn(\"error\").setMessage(`code:${e.code} message:${e.message}`).setNetworkType(this.getModule(Is).getNetworkType()).end(),this._fatalErrorFlag=!0,void this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)}this.probeNetwork().then(([e,s])=>{_e.l(`${this._n}._ping failed. probe network, isAppShowing:${this._isAppShowing} online:${e} networkType:${s}`),e?this.reConnect():this._emitNetStateChangeEvent(t.NET_STATE_DISCONNECTED)})})}_checkNextPing(){if(!this._socketHandler)return;if(!this._socketHandler.isConnected())return;Date.now()>=this._socketHandler.getNextPingTs()&&this._ping()}canIUseInflate(){return this._m.canIUseInflate()}dealloc(){this._socketHandler&&(this._socketHandler.close(),this._socketHandler=null),this._timerForNotLoggedIn>-1&&clearInterval(this._timerForNotLoggedIn)}onRestApiKickedOut(){this._socketHandler&&(this._socketHandler.close(),this.reConnect(!0))}reset(){_e.l(this._n+\".reset\"),this._previousState=t.NET_STATE_CONNECTED,this._probing=!1,this._fatalErrorFlag=!1,this._timerForNotLoggedIn=setInterval(this.onCheckTimer.bind(this),1e3)}}class va{constructor(e){this._n=\"ProtocolHandler\",this._sessionModule=e,this._configMap=new Map,this._fillConfigMap()}_fillConfigMap(){this._configMap.clear();const e=this._sessionModule.genCommonHead(),t=this._sessionModule.genCosSpecifiedHead(),s=this._sessionModule.genSSOReportHead(),o=this._sessionModule.isIntl();this._configMap.set($s,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.LOGIN}`},body:{state:\"Online\",isWebUniapp:0,deviceBrand:0},keyMap:{request:{deviceBrand:\"InstType\"},response:{InstId:\"instanceID\",HelloInterval:\"helloInterval\"}}}}(e)),this._configMap.set(qs,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.LOGOUT}`},body:{type:0},keyMap:{request:{type:\"wslogout_type\"}}}}(e)),this._configMap.set(xs,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.HELLO}`},body:{isWebUniapp:0},keyMap:{response:{NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set(Vs,function(e){return{head:{...e,servcmd:`${m.NAME.STAT_SERVICE}.${m.CMD.KICK_OTHER}`},body:{}}}(e)),this._configMap.set(Ni,function(e){return{head:{...e,servcmd:`${m.NAME.IM_COS_SIGN}.${m.CMD.COS_SIGN}`},body:{cmd:\"open_im_cos_svc\",subCmd:\"get_cos_token\",duration:300,version:2},keyMap:{request:{userSig:\"usersig\",subCmd:\"sub_cmd\",cmd:\"cmd\",duration:\"duration\",version:\"version\"},response:{expired_time:\"expiredTime\",bucket_name:\"bucketName\",session_token:\"sessionToken\",tmp_secret_id:\"secretId\",tmp_secret_key:\"secretKey\"}}}}(t)),this._configMap.set(Ri,function(e){return{head:{...e,servcmd:`${m.NAME.CUSTOM_UPLOAD}.${m.CMD.COS_PRE_SIG}`},body:{fileType:void 0,fileName:void 0,uploadMethod:0,duration:900},keyMap:{request:{userSig:\"usersig\",fileType:\"file_type\",fileName:\"file_name\",uploadMethod:\"upload_method\"},response:{expired_time:\"expiredTime\",request_id:\"requestId\",head_url:\"headUrl\",upload_url:\"uploadUrl\",download_url:\"downloadUrl\",ci_url:\"ciUrl\",snapshot_url:\"requestSnapshotUrl\"}}}}(t)),this._configMap.set(Oi,function(e){return{head:{...e,servcmd:`${m.NAME.CUSTOM_UPLOAD}.${m.CMD.VIDEO_COVER}`},body:{version:1,platform:void 0,coverName:void 0,requestSnapshotUrl:void 0},keyMap:{request:{version:\"version\",platform:\"platform\",coverName:\"cover_name\",requestSnapshotUrl:\"snapshot_url\"},response:{error_code:\"errorCode\",error_msg:\"errorInfo\",download_url:\"snapshotUrl\"}}}}(t)),this._configMap.set(Vi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_CONFIG_MANAGER}.${m.CMD.FETCH_COMMERCIAL_CONFIG}`},body:{SDKAppID:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(Bi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_CONFIG_MANAGER}.${m.CMD.PUSHED_COMMERCIAL_CONFIG}`},body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_purchase_bits:\"purchaseBits\",uint32_expired_time:\"expiredTime\"}}}}(e)),this._configMap.set(qi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_CONFIG_MANAGER}.${m.CMD.FETCH_CLOUD_CONTROL_CONFIG}`},body:{SDKAppID:0,version:0},keyMap:{request:{SDKAppID:\"uint32_sdkappid\",version:\"uint64_version\"},response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(xi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_CONFIG_MANAGER}.${m.CMD.PUSHED_CLOUD_CONTROL_CONFIG}`},body:{},keyMap:{response:{int32_error_code:\"errorCode\",str_error_message:\"errorMessage\",str_json_config:\"cloudControlConfig\",uint32_expired_time:\"expiredTime\",uint32_sdkappid:\"SDKAppID\",uint64_version:\"version\"}}}}(e)),this._configMap.set(Hi,function(e){return{head:{...e,servcmd:`${m.NAME.OVERLOAD_PUSH}.${m.CMD.OVERLOAD_NOTIFY}`},body:{},keyMap:{response:{OverLoadServCmd:\"overloadCommand\",DelaySecs:\"waitingTime\"}}}}(e)),this._configMap.set(Bs,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.GET_MESSAGES}`},body:{cookie:\"\",syncFlag:0,needAbstract:1,isOnlineSync:0,needSignaling:1},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",from:\"From_Account\",to:\"To_Account\",time:\"MsgTimeStamp\",sequence:\"MsgSeq\",random:\"MsgRandom\",elements:\"MsgBody\"},response:{MsgList:\"messageList\",SyncFlag:\"syncFlag\",To_Account:\"to\",From_Account:\"from\",ClientSeq:\"clientSequence\",MsgSeq:\"sequence\",NoticeSeq:\"noticeSequence\",NotifySeq:\"notifySequence\",MsgRandom:\"random\",MsgTimeStamp:\"time\",MsgContent:\"content\",ToGroupId:\"to\",MsgKey:\"messageKey\",GroupTips:\"groupTips\",MsgBody:\"elements\",MsgType:\"type\",C2CRemainingUnreadCount:\"C2CRemainingUnreadList\",C2CPairUnreadCount:\"C2CPairUnreadList\"}}}}(e)),o||(this._configMap.set(Hs,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.BIG_DATA_HALLWAY_AUTH_KEY}`},body:{}}}(e)),this._configMap.set(sn,function(e){return{head:{...e,servcmd:`${m.NAME.IM_MSG_AUDIT_MGR}.${m.CMD.GET_RPOFANITY_LIST}`},body:{version:0,deviceID:\"\",startIndex:void 0},keyMap:{request:{version:\"uint64_version\",deviceID:\"str_device_id\",startIndex:\"uint64_start_index\"},response:{msg_cmd_error_code:\"errorInfo\",str_err_msg:\"errorMessage\",uint32_code:\"errorCode\",msg_scene_ctl_config:\"filterConfig\",uint64_c2c_custom_msg_flag:\"c2c_custom_message\",uint64_c2c_text_msg_flag:\"c2c_text_message\",uint64_group_custom_msg_flag:\"group_custom_message\",uint64_group_text_msg_flag:\"group_text_message\",uint64_group_info_flag:\"group_profile\",uint64_group_member_info_flag:\"group_member_profile\",uint64_relation_chain_flag:\"sns\",uint64_user_info_flag:\"user_profile\",rpt_msg_dirty_word:\"lexicon\",str_dirty_word:\"profanity\",str_replaced_content:\"replacement\",uint64_filter_type:\"filterType\",uint64_id:\"id\",uint64_word_type:\"profanityType\",uint64_complete_flag:\"completeFlag\",uint64_next_start_index:\"nextStartIndex\",uint64_version:\"version\",uint64_expired_time:\"expiredTime\"}}}}(e))),this._configMap.set(Ks,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.SEND_MESSAGE}`},body:{fromAccount:\"\",toAccount:\"\",msgSeq:0,msgRandom:0,msgBody:[],cloudCustomData:void 0,nick:\"\",avatar:\"\",msgLifeTime:void 0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:\"\"}},messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,isSupportExtension:0},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",data:\"Data\",description:\"Desc\",extension:\"Ext\",type:\"MsgType\",content:\"MsgContent\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",nick:\"From_AccountNick\",avatar:\"From_AccountHeadurl\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\",needReadReceipt:\"IsNeedReadReceipt\"}}}}(e)),this._configMap.set(Ws,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.SEND_GROUP_MESSAGE}`},body:{fromAccount:\"\",groupID:\"\",random:0,clientSequence:0,priority:\"\",msgBody:[],cloudCustomData:void 0,onlineOnlyFlag:0,offlinePushInfo:{pushFlag:0,title:\"\",desc:\"\",ext:\"\",apnsInfo:{badgeMode:0,isVoipPush:void 0},androidInfo:{OPPOChannelID:\"\"}},groupAtInfo:[],messageControlInfo:void 0,clientTime:void 0,needReadReceipt:0,topicID:void 0,receiverList:void 0,isSupportExtension:0},keyMap:{request:{to:\"GroupId\",extension:\"Ext\",data:\"Data\",description:\"Desc\",random:\"Random\",sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",type:\"MsgType\",priority:\"MsgPriority\",content:\"MsgContent\",elements:\"MsgBody\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",clientSequence:\"ClientSeq\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\",needReadReceipt:\"NeedReadReceipt\",receiverList:\"To_Account\"},response:{MsgTime:\"time\",MsgSeq:\"sequence\"}}}}(e)),this._configMap.set(ho,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.REVOKE_C2C_MESSAGE}`},body:{msgInfo:{fromAccount:\"\",toAccount:\"\",msgTimeStamp:0,msgSeq:0,msgRandom:0}},keyMap:{request:{msgInfo:\"MsgInfo\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(Jo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.REVOKE_GROUP_MESSAGE}`},body:{groupID:\"\",msgSeqList:void 0,topicID:\"\"},keyMap:{request:{msgSeqList:\"MsgSeqList\",msgSeq:\"MsgSeq\"}}}}(e)),this._configMap.set(Mo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.GET_C2C_ROAM_MESSAGES}`},body:{peerAccount:\"\",count:15,lastMessageTime:0,messageKey:\"\",withRecalledMessage:1,direction:0},keyMap:{request:{messageKey:\"MsgKey\",peerAccount:\"Peer_Account\",count:\"MaxCnt\",lastMessageTime:\"LastMsgTime\",withRecalledMessage:\"WithRecalledMsg\",direction:\"GetDirection\"},response:{LastMsgTime:\"lastMessageTime\",IsNeedReadReceipt:\"needReadReceipt\",IsPeerRead:\"readReceiptSentByPeer\"}}}}(e)),this._configMap.set(Co,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.MODIFY_C2C_MESSAGE}`},body:{from:\"\",to:\"\",sequence:0,random:0,time:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:\"MsgSeq\",random:\"MsgRandom\",time:\"MsgTime\",version:\"MsgVersion\",type:\"MsgType\",content:\"MsgContent\"}}}}(e)),this._configMap.set(Qo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_ROAM_MESSAGES}`},body:{withRecalledMsg:1,groupID:\"\",count:15,sequence:\"\",topicID:void 0},keyMap:{request:{sequence:\"ReqMsgSeq\",count:\"ReqMsgNumber\",withRecalledMessage:\"WithRecalledMsg\"},response:{Random:\"random\",MsgTime:\"time\",MsgSeq:\"sequence\",ReqMsgSeq:\"sequence\",RspMsgList:\"messageList\",IsPlaceMsg:\"isPlaceMessage\",IsSystemMsg:\"isSystemMessage\",ToGroupId:\"to\",EnumFrom_AccountType:\"fromAccountType\",EnumTo_AccountType:\"toAccountType\",GroupCode:\"groupCode\",MsgPriority:\"priority\",MsgBody:\"elements\",MsgType:\"type\",MsgContent:\"content\",IsFinished:\"complete\",Download_Flag:\"downloadFlag\",ClientSeq:\"clientSequence\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\",ToTopicId:\"topicID\",InvisibleMsgSeq:\"invisibleSequenceList\"}}}}(e)),this._configMap.set(go,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.SET_C2C_MESSAGE_READ}`},body:{C2CMsgReaded:void 0},keyMap:{request:{lastMessageTime:\"LastedMsgTime\"}}}}(e)),this._configMap.set(_o,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.SET_C2C_PEER_MUTE_NOTIFICATIONS}`},body:{userIDList:void 0,muteFlag:0},keyMap:{request:{userIDList:\"Peer_Account\",muteFlag:\"Mute_Notifications\"}}}}(e)),this._configMap.set(mo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.GET_C2C_PEER_MUTE_NOTIFICATIONS}`},body:{updateSequence:0},keyMap:{response:{MuteNotificationsList:\"muteFlagList\"}}}}(e)),this._configMap.set(Xo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.SET_GROUP_MESSAGE_READ}`},body:{groupID:void 0,messageReadSeq:void 0,topicID:void 0},keyMap:{request:{messageReadSeq:\"MsgReadedSeq\"}}}}(e)),this._configMap.set(Zo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.SET_ALL_MESSAGE_READ}`},body:{readAllC2CMessage:0,groupMessageReadInfoList:[]},keyMap:{request:{readAllC2CMessage:\"C2CReadAllMsg\",groupMessageReadInfoList:\"GroupReadInfo\",messageSequence:\"MsgSeq\"},response:{C2CReadAllMsg:\"readAllC2CMessage\",GroupReadInfoArray:\"groupMessageReadInfoList\"}}}}(e)),this._configMap.set(Io,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.DELETE_C2C_MESSAGE}`},body:{fromAccount:\"\",to:\"\",keyList:void 0},keyMap:{request:{keyList:\"MsgKeyList\"}}}}(e)),this._configMap.set(ci,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.DELETE_GROUP_MESSAGE}`},body:{groupID:\"\",deleter:\"\",keyList:void 0,topicID:void 0},keyMap:{request:{deleter:\"Deleter_Account\",keyList:\"Seqs\"}}}}(e)),this._configMap.set(on,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_TRANSLATE}.${m.CMD.TRANSLATE_TEXT}`},body:{sourceTextList:void 0,SDKAppID:0,from:0,source:\"\",target:\"\"},keyMap:{request:{sourceTextList:\"SourceText\",SDKAppID:\"SdkAppId\",from:\"FromAccount\"},response:{TargetText:\"translatedTextList\",RequestId:\"requestID\",CmdErrorCode:\"error\",ErrorCode:\"code\",ErrorInfo:\"message\"}}}}(e)),this._configMap.set(li,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.MODIFY_GROUP_MESSAGE}`},body:{groupID:\"\",topicID:void 0,sequence:0,version:0,elements:void 0,cloudCustomData:void 0},keyMap:{request:{sequence:\"MsgSeq\",version:\"MsgVersion\",type:\"MsgType\",content:\"MsgContent\"}}}}(e)),this._configMap.set(ei,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_READ_RECEIPT}`},body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(si,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.SEND_C2C_READ_RECEIPT}`},body:{peerAccount:\"\",messageInfoList:void 0},keyMap:{request:{peerAccount:\"Peer_Account\",messageInfoList:\"C2CMsgInfo\",fromAccount:\"From_Account\",toAccount:\"To_Account\",sequence:\"MsgSeq\",random:\"MsgRandom\",time:\"MsgTime\",clientTime:\"MsgClientTime\"}}}}(e)),this._configMap.set(ti,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.SEND_READ_RECEIPT}`},body:{groupID:\"\",sequenceList:void 0},keyMap:{request:{sequenceList:\"MsgSeqList\",sequence:\"MsgSeq\"}}}}(e)),this._configMap.set(oi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_READ_RECEIPT_DETAIL}`},body:{groupID:\"\",sequence:void 0,flag:0,cursor:0,count:0},keyMap:{request:{sequence:\"MsgSeq\",count:\"Num\"},response:{ReadList:\"readUserIDList\",Read_Account:\"userID\",UnreadList:\"unreadUserIDList\",Unread_Account:\"userID\",IsFinish:\"isCompleted\"}}}}(e)),this._configMap.set(To,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM_MSG_EXT}.${m.CMD.MODIFY_C2C_MESSAGE_EXTENSIONS}`},body:{from:void 0,to:void 0,messageKey:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(yo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM_MSG_EXT}.${m.CMD.GET_C2C_MESSAGE_EXTENSIONS}`},body:{from:void 0,to:void 0,messageKey:void 0,startSequence:void 0}}}(e)),this._configMap.set(mi,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM_MSG_EXT}.${m.CMD.MODIFY_GROUP_MESSAGE_EXTENSIONS}`},body:{groupID:void 0,topicID:void 0,messageSequence:void 0,operateType:void 0,extensionList:void 0}}}(e)),this._configMap.set(Mi,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM_MSG_EXT}.${m.CMD.GET_GROUP_MESSAGE_EXTENSIONS}`},body:{groupID:void 0,topicID:void 0,messageSequence:void 0,startSequence:void 0}}}(e)),this._configMap.set(fo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.GET_PEER_READ_TIME}`},body:{userIDList:void 0},keyMap:{request:{userIDList:\"To_Account\"},response:{ReadTime:\"peerReadTimeList\"}}}}(e)),this._configMap.set(Eo,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.GET_CONVERSATION_LIST}`},body:{fromAccount:void 0,count:0},keyMap:{request:{},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\"}}}}(e)),this._configMap.set(Do,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.PAGING_GET_CONVERSATION_LIST}`},body:{fromAccount:void 0,timeStamp:void 0,startIndex:void 0,pinnedTimeStamp:void 0,pinnedStartIndex:void 0,orderType:void 0,messageAssistFlag:4,assistFlag:15},keyMap:{request:{messageAssistFlag:\"MsgAssistFlags\",assistFlag:\"AssistFlags\",pinnedTimeStamp:\"TopTimeStamp\",pinnedStartIndex:\"TopStartIndex\"},response:{SessionItem:\"conversations\",ToAccount:\"groupID\",To_Account:\"userID\",UnreadMsgCount:\"unreadCount\",MsgGroupReadedSeq:\"messageReadSeq\",C2cPeerReadTime:\"c2cPeerReadTime\",LastMsgFlags:\"lastMessageFlag\",TopFlags:\"isPinned\",TopTimeStamp:\"pinnedTimeStamp\",TopStartIndex:\"pinnedStartIndex\",GroupId:\"convGroupID\"}}}}(e)),this._configMap.set(So,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.DELETE_CONVERSATION}`},body:{fromAccount:\"\",conversationList:void 0,clearHistoryMessage:void 0},keyMap:{request:{toGroupID:\"ToGroupid\",clearHistoryMessage:\"ClearRamble\",conversationList:\"ContactItem\"},response:{ResultItem:\"resultList\",ToGroupid:\"groupID\",ResultCode:\"code\",ResultInfo:\"info\"}}}}(e)),this._configMap.set(Lo,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.CLEAR_HISTORY_MESSAGE}`},body:{fromAccount:\"\",toAccount:void 0,type:1,toGroupID:void 0},keyMap:{request:{toGroupID:\"ToGroupid\"}}}}(e)),this._configMap.set(Ao,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.PIN_CONVERSATION}`},body:{fromAccount:\"\",operationType:1,itemList:void 0},keyMap:{request:{itemList:\"RecentContactItem\"}}}}(e)),this._configMap.set(vo,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.DELETE_GROUP_AT_TIPS}`},body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(No,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.MARK_CONVERSATION}`},body:{fromAccount:\"\",itemList:void 0},keyMap:{request:{itemList:\"MarkItem\",operationType:\"OptType\",groupID:\"ToGroupId\"},response:{ToGroupId:\"groupID\",OptType:\"operationType\"}}}}(e)),this._configMap.set(Ro,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.MARK_CONVERSATION}`},body:{fromAccount:\"\",itemList:void 0},keyMap:{request:{itemList:\"MarkItem\",operationType:\"OptType\",groupID:\"ToGroupId\"},response:{ToGroupId:\"groupID\",OptType:\"operationType\"}}}}(e)),this._configMap.set(Oo,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.CREATE_CONVERSATION_GROUP}`},body:{fromAccount:\"\",itemList:void 0},keyMap:{request:{itemList:\"GroupContactItem\",groupID:\"ToGroupId\"},response:{GroupId:\"convGroupID\",ToGroupId:\"groupID\",OptType:\"operationType\"}}}}(e)),this._configMap.set(Go,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.DELETE_CONVERSATION_GROUP}`},body:{fromAccount:\"\",groupName:void 0},keyMap:{request:{},response:{GroupId:\"convGroupID\"}}}}(e)),this._configMap.set(Uo,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.UPDATE_CONVERSATION_GROUP}`},body:{fromAccount:\"\",updateType:void 0,updateGroup:void 0},keyMap:{request:{oldName:\"OldGroupName\",newName:\"NewGroupName\",groupID:\"ToGroupId\",operationType:\"ContactOptType\",groupName:\"OldGroupName\",updateItem:\"ContactUpdateItem\"},response:{ContactOptType:\"operationType\",ToGroupId:\"groupID\",GroupId:\"convGroupID\"}}}}(e)),this._configMap.set(ko,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.UPDATE_CONVERSATION_GROUP}`},body:{fromAccount:\"\",updateType:void 0,updateGroup:{groupName:void 0,updateGroupType:void 0,updateItem:void 0}},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(Po,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.UPDATE_CONVERSATION_GROUP}`},body:{fromAccount:\"\",updateType:void 0,updateGroup:void 0},keyMap:{request:{},response:{}}}}(e)),this._configMap.set(bo,function(e){return{head:{...e,servcmd:`${m.NAME.RECENT_CONTACT}.${m.CMD.GET_CONVERSATION_GROUP_LIST}`},body:{fromAccount:\"\",startTime:void 0,startIndex:void 0},keyMap:{request:{},response:{GroupId:\"convGroupID\",ToGroupId:\"groupID\",OptType:\"operationType\",CustomMark:\"customData\",ContactGroupId:\"convGroupIDList\"}}}}(e)),this._configMap.set(Ys,function(e){return{head:{...e,servcmd:`${m.NAME.PROFILE}.${m.CMD.PORTRAIT_GET}`},body:{fromAccount:\"\",userItem:[]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(js,function(e){return{head:{...e,servcmd:`${m.NAME.PROFILE}.${m.CMD.PORTRAIT_SET}`},body:{fromAccount:\"\",profileItem:[{tag:Me.NICK,value:\"\"},{tag:Me.GENDER,value:\"\"},{tag:Me.ALLOWTYPE,value:\"\"},{tag:Me.AVATAR,value:\"\"}]},keyMap:{request:{toAccount:\"To_Account\",standardSequence:\"StandardSequence\",customSequence:\"CustomSequence\"}}}}(e)),this._configMap.set(zs,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.GET_BLACKLIST}`},body:{fromAccount:\"\",startIndex:0,maxLimited:30,lastSequence:0},keyMap:{response:{CurruentSequence:\"currentSequence\"}}}}(e)),this._configMap.set(Js,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.ADD_BLACKLIST}`},body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(Xs,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.DELETE_BLACKLIST}`},body:{fromAccount:\"\",toAccount:[]}}}(e)),this._configMap.set(zi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.SET_SELF_STATUS}`},body:{customStatus:\"\"},keyMap:{}}}(e)),this._configMap.set(Ji,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.GET_USER_STATUS}`},body:{userIDList:void 0},keyMap:{response:{UserStatusList:\"successUserList\",ErrorList:\"failureUserList\",To_Account:\"userID\",Invalid_Account:\"invalidUserID\",Status:\"statusType\"}}}}(e)),this._configMap.set(Xi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.SUBSCRIBE_USER_STATUS}`},body:{userIDList:void 0},keyMap:{response:{ErrorList:\"failureUserList\",To_Account:\"userID\",Invalid_Account:\"invalidUserID\"}}}}(e)),this._configMap.set(Zi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.UNSUBSCRIBE_USER_STATUS}`},body:{userIDList:void 0,unsubscribeAll:void 0},keyMap:{response:{ErrorList:\"failureUserList\",To_Account:\"userID\",Invalid_Account:\"invalidUserID\"}}}}(e)),this._configMap.set(Zs,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.GET_FRIEND_LIST}`},body:{fromAccount:\"\",startIndex:0,standardSequence:0,customSequence:0},keyMap:{response:{FriendNum:\"friendCount\",UserDataItem:\"resultList\",ValueItem:\"tagValueList\"}}}}(e)),this._configMap.set(so,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.ADD_FRIEND}`},body:{fromAccount:\"\",addFriendItem:[],type:\"\"},keyMap:{request:{source:\"AddSource\",wording:\"AddWording\",type:\"AddType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(oo,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.UPDATE_FRIEND}`},body:{fromAccount:\"\",updateItem:void 0},keyMap:{request:{snsItem:\"SnsItem\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(to,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.DELETE_FRIEND}`},body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"DeleteType\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(Qs,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.GET_FRIEND_PROFILE}`},body:{fromAccount:\"\",userIDList:void 0},keyMap:{response:{InfoItem:\"resultList\",SnsProfileItem:\"tagValueList\"}}}}(e)),this._configMap.set(eo,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.CHECK_FRIEND}`},body:{fromAccount:\"\",userIDList:[],type:\"\"},keyMap:{request:{type:\"CheckType\"},response:{InfoItem:\"resultList\"}}}}(e)),this._configMap.set(no,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.GET_FRIEND_APPLICATION_LIST}`},body:{fromAccount:\"\",applicationType:\"\",startTime:0,maxLimited:0,lastSequence:0},keyMap:{response:{PendencyItem:\"resultList\",AddSource:\"source\",AddTime:\"time\",AddWording:\"wording\",Image:\"avatar\",UnreadPendencyCount:\"unreadCount\",To_Account:\"userID\",PendencyType:\"type\"}}}}(e)),this._configMap.set(io,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.RESPOND_FRIEND_APPLICATION}`},body:{fromAccount:\"\",responseFriendItem:[]},keyMap:{request:{tag:\"TagName\",action:\"ResponseAction\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(ro,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.DELETE_FRIEND_APPLICATION}`},body:{fromAccount:\"\",type:\"\",userIDList:void 0},keyMap:{request:{type:\"PendencyType\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(ao,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.REPORT_FRIEND_APPLICATION}`},body:{fromAccount:\"\",latestTimeStamp:\"\"},keyMap:{request:{latestTimeStamp:\"LatestPendencyTimeStamp\"}}}}(e)),this._configMap.set(co,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.CREATE_FRIEND_GROUP}`},body:{fromAccount:\"\",groupName:void 0,userIDList:void 0},keyMap:{request:{groupName:\"GroupName\",userIDList:\"To_Account\"},response:{ResultItem:\"resultList\"}}}}(e)),this._configMap.set(lo,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.DELETE_FRIEND_GROUP}`},body:{fromAccount:\"\",nameList:void 0},keyMap:{request:{nameList:\"GroupName\"}}}}(e)),this._configMap.set(uo,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.GET_FRIEND_GROUP_LIST}`},body:{fromAccount:\"\",lastSequence:0,needFriend:\"Need_Friend_Type_Yes\"},keyMap:{response:{ResultItem:\"resultList\",GroupName:\"name\",FriendNumber:\"friendCount\",To_Account:\"userIDList\"}}}}(e)),this._configMap.set(po,function(e){return{head:{...e,servcmd:`${m.NAME.FRIEND}.${m.CMD.UPDATE_FRIEND_GROUP}`},body:{fromAccount:\"\",oldName:\"\",newName:void 0,updateGroupItem:void 0},keyMap:{request:{oldName:\"GroupOldName\",newName:\"GroupNewName\"},response:{UpdateType:\"type\",ResultItem:\"resultList\"}}}}(e)),this._configMap.set(wo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_JOINED_GROUPS}`},body:{memberAccount:\"\",limit:void 0,offset:void 0,groupType:void 0,responseFilter:{groupBaseInfoFilter:void 0,selfInfoFilter:void 0},isSupportTopic:0},keyMap:{request:{memberAccount:\"Member_Account\"},response:{GroupIdList:\"groups\",NoUnreadSeqList:\"excludedUnreadSequenceList\",MsgSeq:\"readedSequence\",LastRecallTime:\"_lastRevokedTime\"}}}}(e)),this._configMap.set(Fo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_INFO}`},body:{groupIDList:void 0,responseFilter:{groupBaseInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"Owner_Account\",\"CreateTime\",\"InfoSeq\",\"LastInfoTime\",\"LastMsgTime\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"NextMsgSeq\",\"ShutUpAllMember\"],groupCustomFieldFilter:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0}},keyMap:{request:{groupIDList:\"GroupIdList\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",groupCustomFieldFilter:\"AppDefinedDataFilter_Group\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{GroupIdList:\"groups\",AppDefinedData:\"groupCustomField\",AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_Group:\"groupCustomFieldFilter\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",InfoSeq:\"infoSequence\",MemberList:\"members\",GroupInfo:\"groups\",ShutUpUntil:\"muteUntil\",ShutUpAllMember:\"muteAllMembers\"}}}}(e)),this._configMap.set($o,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.CREATE_GROUP}`},body:{type:void 0,name:void 0,groupID:void 0,ownerID:void 0,introduction:void 0,notification:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0,memberCustomField:void 0,webPushFlag:1,avatar:\"\",isSupportTopic:void 0,inviteOption:void 0},keyMap:{request:{ownerID:\"Owner_Account\",userID:\"Member_Account\",avatar:\"FaceUrl\",maxMemberNum:\"MaxMemberCount\",joinOption:\"ApplyJoinOption\",groupCustomField:\"AppDefinedData\",memberCustomField:\"AppMemberDefinedData\",inviteOption:\"InviteJoinOption\"},response:{HugeGroupFlag:\"avChatRoomFlag\",OverJoinedGroupLimit_Account:\"overLimitUserIDList\"}}}}(e)),this._configMap.set(qo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.DESTROY_GROUP}`},body:{groupID:void 0}}}(e)),this._configMap.set(xo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.MODIFY_GROUP_INFO}`},body:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,joinOption:void 0,groupCustomField:void 0,muteAllMembers:void 0,inviteOption:void 0},keyMap:{request:{groupCustomField:\"AppDefinedData\",muteAllMembers:\"ShutUpAllMember\",joinOption:\"ApplyJoinOption\",avatar:\"FaceUrl\",inviteOption:\"InviteJoinOption\"},response:{AppDefinedData:\"groupCustomField\",ShutUpAllMember:\"muteAllMembers\"}}}}(e)),this._configMap.set(Vo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.APPLY_JOIN_GROUP}`},body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1,historyMessageFlag:void 0},keyMap:{request:{applyMessage:\"ApplyMsg\",historyMessageFlag:\"HugeGroupHistoryMsgFlag\"},response:{HugeGroupFlag:\"avChatRoomFlag\",AVChatRoomKey:\"avChatRoomKey\",RspMsgList:\"messageList\",ToGroupId:\"to\"}}}}(e)),this._configMap.set(Bo,function(e){const{a2:t,tinyid:s,...o}=e;return{head:{...o,servcmd:`${m.NAME.BIG_GROUP_NO_AUTH}.${m.CMD.APPLY_JOIN_GROUP}`},body:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0,webPushFlag:1},keyMap:{request:{applyMessage:\"ApplyMsg\"},response:{HugeGroupFlag:\"avChatRoomFlag\"}}}}(e)),this._configMap.set(Ho,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.QUIT_GROUP}`},body:{groupID:void 0}}}(e)),this._configMap.set(Ko,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.SEARCH_GROUP_BY_ID}`},body:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:[\"Type\",\"Name\",\"Introduction\",\"Notification\",\"FaceUrl\",\"CreateTime\",\"Owner_Account\",\"LastInfoTime\",\"LastMsgTime\",\"NextMsgSeq\",\"MemberNum\",\"MaxMemberNum\",\"ApplyJoinOption\",\"InviteJoinOption\"]}},keyMap:{response:{}}}}(e)),this._configMap.set(Wo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.CHANGE_GROUP_OWNER}`},body:{groupID:void 0,newOwnerID:void 0},keyMap:{request:{newOwnerID:\"NewOwner_Account\"}}}}(e)),this._configMap.set(Yo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.HANDLE_APPLY_JOIN_GROUP}`},body:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(jo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.HANDLE_INVITE_JOIN_GROUP}`},body:{groupID:void 0,applicant:void 0,invitee:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,userDefinedField:void 0},keyMap:{request:{applicant:\"Applicant_Account\",invitee:\"Invited_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\"}}}}(e)),this._configMap.set(zo,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.HANDLE_GROUP_INVITATION}`},body:{groupID:void 0,inviter:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMap:{request:{inviter:\"Inviter_Account\",handleAction:\"HandleMsg\",handleMessage:\"ApprovalMsg\",messageKey:\"MsgKey\"}}}}(e)),this._configMap.set(ii,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_APPLICATION}`},body:{startTime:void 0,limit:void 0,handleAccount:void 0},keyMap:{request:{handleAccount:\"Handle_Account\"},response:{To_Account:\"userID\"}}}}(e)),this._configMap.set(ni,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.DELETE_GROUP_SYSTEM_MESSAGE}`},body:{messageListToDelete:void 0},keyMap:{request:{messageListToDelete:\"DelMsgList\",messageSeq:\"MsgSeq\",messageRandom:\"MsgRandom\"}}}}(e)),this._configMap.set(ri,function(e){return{head:{...e,servcmd:`${m.NAME.BIG_GROUP_LONG_POLLING}.${m.CMD.AVCHATROOM_LONG_POLL}`},body:{USP:1,startSeq:1,startBroadcastSeq:void 0,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\",RspBroadcastMsgList:\"broadcastMessageList\",IsSystemMsg:\"isSystemMessage\"}}}}(e)),this._configMap.set(ai,function(e){const{a2:t,tinyid:s,...o}=e;return{head:{...o,servcmd:`${m.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH}.${m.CMD.AVCHATROOM_LONG_POLL}`},body:{USP:1,startSeq:1,holdTime:90,key:void 0,simplifiedMessage:void 0},keyMap:{request:{USP:\"USP\"},response:{ToGroupId:\"groupID\",RspBroadcastMsgList:\"broadcastMessageList\",IsSystemMsg:\"isSystemMessage\"}}}}(e)),this._configMap.set(ui,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_ONLINE_MEMBER_NUM}`},body:{groupID:void 0}}}(e)),this._configMap.set(di,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.SET_GROUP_ATTRIBUTES}`},body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(pi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.MODIFY_GROUP_ATTRIBUTES}`},body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\",value:\"value\"}}}}(e)),this._configMap.set(hi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.DELETE_GROUP_ATTRIBUTES}`},body:{groupID:void 0,groupAttributeList:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]},keyMap:{request:{key:\"key\"}}}}(e)),this._configMap.set(gi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.CLEAR_GROUP_ATTRIBUTES}`},body:{groupID:void 0,mainSequence:void 0,avChatRoomKey:void 0,attributeControl:[\"RaceConflict\"]}}}(e)),this._configMap.set(_i,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_ATTR}.${m.CMD.GET_GROUP_ATTRIBUTES}`},body:{groupID:void 0,avChatRoomKey:void 0,groupType:1},keyMap:{request:{avChatRoomKey:\"Key\",groupType:\"GroupType\"}}}}(e)),this._configMap.set(fi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_NOTIFY}`},body:{notifyType:1,groupID:\"\",beginTime:0,endTime:0,limit:20},keyMap:{request:{},response:{NextMsgTime:\"nextRevokedTime\",NotifyMsgList:\"notifyList\"}}}}(e)),this._configMap.set(Ii,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.UPDATE_GROUP_COUNTER}`},body:{groupID:void 0,counterList:void 0,avChatRoomKey:void 0,mode:void 0},keyMap:{request:{counterList:\"GroupCounter\"}}}}(e)),this._configMap.set(Ci,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_COUNTER}`},body:{groupID:void 0,keyList:[],avChatRoomKey:void 0},keyMap:{request:{keyList:\"GroupCounterKeys\"}}}}(e)),this._configMap.set(Ki,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_COMMUNITY}.${m.CMD.CREATE_TOPIC}`},body:{groupID:void 0,topicName:void 0,avatar:void 0,customData:void 0,topicID:void 0,notification:void 0,introduction:void 0},keyMap:{request:{avatar:\"FaceUrl\"}}}}(e)),this._configMap.set(Wi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_COMMUNITY}.${m.CMD.DELETE_TOPIC}`},body:{groupID:void 0,topicIDList:void 0},keyMap:{request:{topicIDList:\"TopicIdList\"},response:{DestroyResultItem:\"resultList\"}}}}(e)),this._configMap.set(Yi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_COMMUNITY}.${m.CMD.UPDATE_TOPIC_PROFILE}`},body:{groupID:void 0,topicID:void 0,avatar:void 0,customData:void 0,notification:void 0,introduction:void 0,muteAllMembers:void 0,topicName:void 0},keyMap:{request:{avatar:\"FaceUrl\",muteAllMembers:\"ShutUpAllMember\"}}}}(e)),this._configMap.set(ji,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_COMMUNITY}.${m.CMD.GET_TOPIC_LIST}`},body:{groupID:void 0,topicIDList:void 0,MemberInfoFilter:[\"NoUnreadSeqList\"]},keyMap:{request:{topicIDList:\"TopicIdList\"},response:{TopicAndSelfInfo:\"topicInfoList\",TopicInfo:\"topic\",GroupID:\"groupID\",ShutUpTime:\"muteTime\",ShutUpAllFlag:\"muteAllMembers\",LastMsgTime:\"lastMessageTime\",MsgSeq:\"readedSequence\",LastMsgSeq:\"sequence\",NoUnreadSeqList:\"excludedUnreadSequenceList\"}}}}(e)),this._configMap.set(Ti,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_MEMBER_LIST}`},body:{groupID:void 0,limit:0,offset:void 0,next:void 0,memberRoleFilter:void 0,memberInfoFilter:[\"Role\",\"NameCard\",\"ShutUpUntil\",\"JoinTime\"],memberCustomFieldFilter:void 0},keyMap:{request:{memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{AppMemberDefinedData:\"memberCustomField\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",MemberList:\"members\",ShutUpUntil:\"muteUntil\"}}}}(e)),this._configMap.set(yi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_AVCHATROOM}.${m.CMD.GET_AVCHATROOM_MEMBER_LIST}`},body:{groupID:void 0,offset:void 0,filter:void 0},keyMap:{request:{offset:\"Timestamp\",filter:\"Mark\"},response:{NextTimestamp:\"offset\"}}}}(e)),this._configMap.set(Di,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.GET_GROUP_MEMBER_INFO}`},body:{groupID:void 0,userIDList:void 0,memberInfoFilter:void 0,memberCustomFieldFilter:void 0},keyMap:{request:{userIDList:\"Member_List_Account\",memberCustomFieldFilter:\"AppDefinedDataFilter_GroupMember\"},response:{MemberList:\"members\",ShutUpUntil:\"muteUntil\",AppDefinedDataFilter_GroupMember:\"memberCustomFieldFilter\",AppMemberDefinedData:\"memberCustomField\"}}}}(e)),this._configMap.set(Ei,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.ADD_GROUP_MEMBER}`},body:{groupID:void 0,silence:void 0,userIDList:void 0},keyMap:{request:{userID:\"Member_Account\",userIDList:\"MemberList\"},response:{MemberList:\"members\"}}}}(e)),this._configMap.set(Si,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.DELETE_GROUP_MEMBER}`},body:{groupID:void 0,userIDList:void 0,reason:void 0},keyMap:{request:{userIDList:\"MemberToDel_Account\"}}}}(e)),this._configMap.set(Li,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.BAN_AVCHATROOM_MEMBER}`},body:{groupID:void 0,userIDList:void 0,duration:void 0,reason:\"\"},keyMap:{request:{userIDList:\"Members_Account\",duration:\"Duration\",reason:\"Description\"}}}}(e)),this._configMap.set(Ai,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP}.${m.CMD.MODIFY_GROUP_MEMBER_INFO}`},body:{groupID:void 0,topicID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMap:{request:{userID:\"Member_Account\",memberCustomField:\"AppMemberDefinedData\",muteTime:\"ShutUpTime\",messageRemindType:\"MsgFlag\"}}}}(e)),this._configMap.set(vi,function(e){return{head:{...e,servcmd:`${m.NAME.GROUP_AVCHATROOM}.${m.CMD.MARK_AVCHATROOM_MEMBER_INFO}`},body:{groupID:void 0,operationType:1,memberList:[]},keyMap:{request:{operationType:\"CommandType\",memberList:\"MemberList\",markType:\"Marks\",userID:\"Member_Account\"},response:{CommandType:\"operationType\",Marks:\"markType\",Member_Account:\"userID\"}}}}(e)),this._configMap.set(Gi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STAT}.${m.CMD.TIM_WEB_REPORT_V2}`},body:{header:{},event:[],quality:[]},keyMap:{request:{SDKType:\"sdk_type\",SDKVersion:\"sdk_version\",deviceType:\"device_type\",platform:\"platform\",instanceID:\"instance_id\",traceID:\"trace_id\",SDKAppID:\"sdk_app_id\",userID:\"user_id\",tinyID:\"tiny_id\",extension:\"extension\",timestamp:\"timestamp\",networkType:\"network_type\",eventType:\"event_type\",code:\"error_code\",message:\"error_message\",moreMessage:\"more_message\",duplicate:\"duplicate\",costTime:\"cost_time\",level:\"level\",qualityType:\"quality_type\",reportIndex:\"report_index\",wholePeriod:\"whole_period\",totalCount:\"total_count\",rttCount:\"success_count_business\",successRateOfRequest:\"percent_business\",countLessThan1Second:\"success_count_business\",percentOfCountLessThan1Second:\"percent_business\",countLessThan3Second:\"success_count_platform\",percentOfCountLessThan3Second:\"percent_platform\",successCountOfBusiness:\"success_count_business\",successRateOfBusiness:\"percent_business\",successCountOfPlatform:\"success_count_platform\",successRateOfPlatform:\"percent_platform\",successCountOfMessageReceived:\"success_count_business\",successRateOfMessageReceived:\"percent_business\",avgRTT:\"average_value\",avgDelay:\"average_value\",avgValue:\"average_value\",uiPlatform:\"ui_platform\"}}}}(s)),this._configMap.set(Ui,function(e){return{head:{...e,servcmd:`${m.NAME.HEARTBEAT}.${m.CMD.ALIVE}`},body:{}}}(e)),this._configMap.set(ki,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_PUSH}.${m.CMD.MESSAGE_PUSH}`},body:{},keyMap:{response:{C2cMsgArray:\"C2CMessageArray\",GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",C2cNotifyMsgArray:\"C2CNotifyMessageArray\",C2cMsgInfo:\"C2CReadReceiptArray\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyAdd_Account:\"userID\",ProfileImNick:\"nick\",PendencyType:\"applicationType\",C2CReadAllMsg:\"readAllC2CMessage\",IsNeedReadReceipt:\"needReadReceipt\",Status:\"statusType\"}}}}(e)),this._configMap.set(Pi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_PUSH}.${m.CMD.MULTI_MESSAGE_PUSH}`},body:{},keyMap:{response:{GroupMsgArray:\"groupMessageArray\",GroupTips:\"groupTips\",ClientSeq:\"clientSequence\",MsgPriority:\"priority\",NoticeSeq:\"noticeSequence\",MsgContent:\"content\",MsgType:\"type\",MsgBody:\"elements\",ToGroupId:\"to\",Desc:\"description\",Ext:\"extension\",IsSyncMsg:\"isSyncMessage\",Flag:\"needSync\",NeedAck:\"needAck\",PendencyType:\"applicationType\"}}}}(e)),this._configMap.set(bi,function(e){return{head:{...e,servcmd:`${m.NAME.OPEN_IM}.${m.CMD.MESSAGE_PUSH_ACK}`},body:{sessionData:void 0},keyMap:{request:{sessionData:\"SessionData\"}}}}(e)),this._configMap.set(wi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.STATUS_FORCE_OFFLINE}`},body:{},keyMap:{response:{C2cNotifyMsgArray:\"C2CNotifyMessageArray\",NoticeSeq:\"noticeSequence\",KickoutMsgNotify:\"kickoutMsgNotify\",NewInstInfo:\"newInstanceInfo\"}}}}(e)),this._configMap.set($i,function(e){return{head:{...e,servcmd:`${m.NAME.IM_LONG_MESSAGE}.${m.CMD.DOWNLOAD_MERGER_MESSAGE}`},body:{downloadKey:\"\"},keyMap:{response:{Data:\"data\",Desc:\"description\",Ext:\"extension\",Download_Flag:\"downloadFlag\",ThumbUUID:\"thumbUUID\",VideoUUID:\"videoUUID\"}}}}(e)),this._configMap.set(Fi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_LONG_MESSAGE}.${m.CMD.UPLOAD_MERGER_MESSAGE}`},body:{messageList:[]},keyMap:{request:{fromAccount:\"From_Account\",toAccount:\"To_Account\",msgTimeStamp:\"MsgTimeStamp\",msgSeq:\"MsgSeq\",msgRandom:\"MsgRandom\",msgBody:\"MsgBody\",type:\"MsgType\",content:\"MsgContent\",data:\"Data\",description:\"Desc\",extension:\"Ext\",sizeType:\"Type\",uuid:\"UUID\",url:\"\",imageUrl:\"URL\",fileUrl:\"Url\",remoteAudioUrl:\"Url\",remoteVideoUrl:\"VideoUrl\",thumbUUID:\"ThumbUUID\",videoUUID:\"VideoUUID\",videoUrl:\"\",downloadFlag:\"Download_Flag\",from:\"From_Account\",time:\"MsgTimeStamp\",messageRandom:\"MsgRandom\",messageSequence:\"MsgSeq\",elements:\"MsgBody\",clientSequence:\"ClientSeq\",payload:\"MsgContent\",messageList:\"MsgList\",messageNumber:\"MsgNum\",abstractList:\"AbstractList\",messageBody:\"MsgBody\"}}}}(e)),this._configMap.set(tn,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.SET_TOKEN}`},body:{tokenID:\"\",pushMsg:0,sdkAppID:0,businessID:\"\",deviceBrand:\"\",deviceToken:\"\",isTpns:0,isWebUniapp:0},keyMap:{request:{tokenID:\"TokenID\",pushMsg:\"PushMsg\",sdkAppID:\"EnterVersion\",businessID:\"BusiID\",deviceBrand:\"InstType\",deviceToken:\"VarToken\",isTpns:\"IsTpns\"}}}}(e)),this._configMap.set(en,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.STAT_FOREGROUND}`},body:{isWebUniapp:0}}}(e)),this._configMap.set(Qi,function(e){return{head:{...e,servcmd:`${m.NAME.IM_OPEN_STATUS}.${m.CMD.STAT_BACKGROUND}`},body:{C2CUnread:0,GroupUnread:0,isWebUniapp:0},keyMap:{request:{c2cUnreadCount:\"C2cUnread\",groupUnreadCount:\"GrpUnread\"}}}}(e))}has(e){return this._configMap.has(e)}get(e){return this._configMap.get(e)}update(){this._fillConfigMap()}getKeyMap(e){return this.has(e)?this.get(e).keyMap||{}:(_e.w(`${this._n}.getKeyMap unknown protocolName:${e}`),{})}getProtocolData(e){const{protocolName:t,requestData:s}=e,o=this.get(t);let i=null;if(s){const e=this._simpleDeepCopy(o),t=this._updateService(s,e),n=t.body,r=Object.create(null);for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){if(r[o]=n[o],void 0===s[o])continue;r[o]=s[o]}t.body=r,i=this._getUplinkData(t)}else i=this._getUplinkData(o);return i}_getUplinkData(e){const t=this._requestDataCleaner(e),s=gt(t.head),o=_a(t.body,this._getRequestKeyMap(s));return t.body=o,t}_updateService(e,t){const s=gt(t.head);if(this._isFromGroupRequest(t)){let{type:o,groupID:i,groupIDList:n=[]}=e;we(i)&&(i=n[0]||\"\"),st({type:o,groupID:i})&&(t.head.servcmd=`${m.NAME.GROUP_COMMUNITY}.${s}`)}return t}_isFromGroupRequest(e){return e.head.servcmd.includes(m.NAME.GROUP)||e.head.servcmd.includes(m.NAME.GROUP_ATTR)}_getRequestKeyMap(e){const t=this.getKeyMap(e);return{...pa.request,...t.request}}_requestDataCleaner(e){const t=Array.isArray(e)?[]:Object.create(null);for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&Ve(s)&&null!==e[s]&&void 0!==e[s]&&(\"object\"!=typeof e[s]?t[s]=e[s]:t[s]=this._requestDataCleaner.bind(this)(e[s]));return t}_simpleDeepCopy(e){const t=Object.keys(e),s={};let o;for(let i=0,n=t.length;i<n;i++)o=t[i],be(e[o])?s[o]=Array.from(e[o]):ke(e[o])?s[o]=this._simpleDeepCopy(e[o]):s[o]=e[o];return s}}const Na=[bi];class Ra{constructor(e){this._sessionModule=e,this._n=\"DownlinkHandler\",this._eventHandlerMap=new Map,this._eventHandlerMap.set(\"C2CMessageArray\",this._c2cMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageArray\",this._groupMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"groupTips\",this._groupTipsHandler.bind(this)),this._eventHandlerMap.set(\"C2CNotifyMessageArray\",this._C2CNotifyMessageArrayHandler.bind(this)),this._eventHandlerMap.set(\"C2CReadReceiptArray\",this._C2CReadReceiptArrayHandler.bind(this)),this._eventHandlerMap.set(\"profileModify\",this._profileHandler.bind(this)),this._eventHandlerMap.set(\"friendListMod\",this._relationChainHandler.bind(this)),this._eventHandlerMap.set(\"recentContactMod\",this._recentContactHandler.bind(this)),this._eventHandlerMap.set(\"readAllC2CMessage\",this._allMessageReadHandler.bind(this)),this._eventHandlerMap.set(\"c2cMessageModified\",this._c2cMessageModifiedHandler.bind(this)),this._eventHandlerMap.set(\"groupMessageModified\",this._groupMessageModifiedHandler.bind(this)),this._eventHandlerMap.set(\"userStatusList\",this._userStatusListHandler.bind(this)),this._eventHandlerMap.set(\"messageExtensionNotify\",this._messageExtensionNotifyHandler.bind(this)),this._keys=[...this._eventHandlerMap.keys()]}_c2cMessageArrayHandler(e){const t=this._sessionModule.getModule(ls);if(t){if(e.dataList.forEach(e=>{if(1===e.isSyncMessage){const t=e.from;e.from=e.to,e.to=t}}),1===e.needSync){this._sessionModule.getModule(Ds).startOnlineSync()}t.onNewC2CMessage({dataList:e.dataList,isInstantMessage:!0})}}_c2cMessageModifiedHandler(e){const t=this._sessionModule.getModule(ls);t&&t.onC2CMessageModified(e)}_groupMessageArrayHandler(e){const t=this._sessionModule.getModule(ds);t&&t.onNewGroupMessage({event:e.event,dataList:e.dataList,isInstantMessage:!0})}_groupMessageModifiedHandler(e){const t=this._sessionModule.getModule(ds);t&&t.onGroupMessageModified(e)}_groupTipsHandler(e){const t=this._sessionModule.getModule(ds);if(!t)return;const{event:s,dataList:o,isInstantMessage:i=!0,isSyncingEnded:n}=e;switch(s){case 4:case 6:t.onNewGroupTips({event:s,dataList:o});break;case 5:for(let e=0;e<o.length;e++)if(be(o[e].elements.revokedInfos))t.onGroupMessageRevoked({dataList:o});else if(be(o[e].elements.groupMessageReadNotice))t.onGroupMessageReadNotice({dataList:o});else{if(!be(o[e].elements.readReceiptList)){t.onNewGroupSystemNotice({dataList:o,isInstantMessage:i,isSyncingEnded:n});break}t.onReadReceiptList({dataList:o})}break;case 12:this._sessionModule.getModule(_s).onNewGroupAtTips({dataList:o});break;default:_e.l(`${this._n}._groupTipsHandler unknown event:${s} dataList:`,o)}}_C2CNotifyMessageArrayHandler(e){const{dataList:t}=e;if(!be(t))return;const s=this._sessionModule.getModule(ls);t.forEach(e=>{if(Pe(e))if(e.hasOwnProperty(\"kickoutMsgNotify\")){const{kickoutMsgNotify:{kickType:t,newInstanceInfo:s={}}}=e;1===t?this._sessionModule.onMultipleAccountKickedOut(s):2===t?this._sessionModule.onMultipleDeviceKickedOut(s):3===t&&this._sessionModule.onRestApiKickedOut(s)}else if(e.hasOwnProperty(\"c2cMessageRevokedNotify\"))s&&s.onC2CMessageRevoked({dataList:t});else if(e.hasOwnProperty(\"c2cMessageReadReceipt\"))s&&s.onC2CMessageReadReceipt({dataList:t});else if(e.hasOwnProperty(\"c2cMessageReadNotice\"))s&&s.onC2CMessageReadNotice({dataList:t});else if(e.hasOwnProperty(\"muteNotificationsSync\")){this._sessionModule.getModule(_s).onC2CMessageRemindTypeSynced({dataList:t})}})}_C2CReadReceiptArrayHandler(e){this._sessionModule.getModule(ls).onReadReceiptList(e)}_profileHandler(e){this._sessionModule.getModule(cs).onProfileModified({dataList:e.dataList});const t=this._sessionModule.getModule(ps);t&&t.onFriendProfileModified({dataList:e.dataList})}_relationChainHandler(e){this._sessionModule.getModule(cs).onRelationChainModified({dataList:e.dataList});const t=this._sessionModule.getModule(ps);t&&t.onRelationChainModified({dataList:e.dataList})}_recentContactHandler(e){const{dataList:t}=e;if(!be(t))return;const s=this._sessionModule.getModule(_s);s&&t.forEach(e=>{const{pushType:t}=e;if(1===t){const{recentContactDeleteItem:t}=e;s.onConversationDeleted(t.recentContactList)}else if(2===t){const{recentContactTopItem:t}=e;s.onConversationPinned(t.recentContactList)}else if(3===t){const{recentContactTopItem:t}=e;s.onConversationUnpinned(t.recentContactList)}else if(4===t){const{recentContactMarkContact:t}=e;s.onConversationMarkUpdated(t.recentContactMarkContactItem)}else if(5===t){const{recentContactCreateContactGroup:t}=e;s.onConversationGroupCreated(t.msgContactGroupContactItem)}else if(6===t){const{recentContactDelContactGroup:t}=e;s.onConversationGroupDeleted(t.msgGroupItem)}else if(7===t){const{recentContactUpdateContactGroup:t}=e,{updateType:o,msgUpdateGroup:i,msgUpdateContact:n}=t;if(1===o){const{updateGroupType:e}=i;1===e?s.onConversationGroupNameUpdated(i):2===e&&s.onConversationInGroupUpdated(i)}else 2===o&&s.onConversationAddedToOrDeletedFromGroup(n)}})}_allMessageReadHandler(e){const{dataList:t}=e,s=this._sessionModule.getModule(_s);s&&s.onPushedAllMessageRead(t)}_userStatusListHandler(e){this._sessionModule.getModule(cs).onUserStatusUpdated(e)}_messageExtensionNotifyHandler(e){this._sessionModule.getModule(us).onMessageExtensionNotify(e)}onMessage(e){const{body:t}=e;if(!this._filterMessageFromIMOpenPush(e))return;const{eventArray:s,isInstantMessage:o,isSyncingEnded:i,needSync:n}=t;if(!be(s))return;let r=null,a=null,u=0;for(let c=0,l=s.length;c<l;c++){r=s[c],u=r.event;const e=Object.keys(r).find(e=>-1!==this._keys.indexOf(e));e?(a=14===u?{readAllC2CMessage:r[e],groupMessageReadInfoList:r.groupMessageReadNotice||[]}:16===u?{userID:r.userID,readReceiptList:r[e]}:r[e],this._eventHandlerMap.get(e)({event:u,dataList:a,isInstantMessage:o,isSyncingEnded:i,needSync:n})):_e.l(`${this._n}.onMessage unknown eventItem:${r}`)}}_filterMessageFromIMOpenPush(e){const{head:t,body:s}=e,{servcmd:o}=t;let i=!1;if(we(o)||(i=o.includes(m.NAME.IM_CONFIG_MANAGER)||o.includes(m.NAME.OVERLOAD_PUSH)||o.includes(m.NAME.STAT_SERVICE)),!i)return!0;if(o.includes(m.CMD.PUSHED_CLOUD_CONTROL_CONFIG)){this._sessionModule.getModule(As).onPushedCloudControlConfig(s)}else if(o.includes(m.CMD.PUSHED_COMMERCIAL_CONFIG)){this._sessionModule.getModule(Os).onPushedConfig(s)}else if(o.includes(m.CMD.OVERLOAD_NOTIFY))this._sessionModule.onPushedServerOverload(s);else if(o.includes(m.CMD.KICK_OTHER)){const e=Date.now();this._sessionModule.reLoginOnKickOther();const t=new Cn(\"kickOther\"),s=this._sessionModule.getModule(rs).getLastWsHelloTs(),o=e-s;t.setMessage(`last wshello time:${s} diff:${o}ms`).setNetworkType(this._sessionModule.getNetworkType()).end()}return!1}}const Oa=[{cmd:m.CMD.GET_GROUP_INFO,interval:1,count:20},{cmd:m.CMD.GET_AVCHATROOM_MEMBER_LIST,interval:3,count:1},{cmd:m.CMD.GET_GROUP_APPLICATION,interval:1,count:15},{cmd:m.CMD.GET_TOPIC_LIST,interval:1,count:10},{cmd:m.CMD.SET_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:m.CMD.MODIFY_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:m.CMD.DELETE_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:m.CMD.CLEAR_GROUP_ATTRIBUTES,interval:5,count:10},{cmd:m.CMD.GET_GROUP_ATTRIBUTES,interval:5,count:20},{cmd:m.CMD.UPDATE_GROUP_COUNTER,interval:5,count:20},{cmd:m.CMD.GET_GROUP_COUNTER,interval:5,count:20},{cmd:m.CMD.SET_ALL_MESSAGE_READ,interval:1,count:1},{cmd:m.CMD.GET_USER_STATUS,interval:5,count:20},{cmd:m.CMD.SUBSCRIBE_USER_STATUS,interval:5,count:20},{cmd:m.CMD.UNSUBSCRIBE_USER_STATUS,interval:5,count:20}];class Ga extends Fs{constructor(e){super(e),this._n=\"SessionModule\",this._platform=this.getPlatform(),this._protocolHandler=new va(this),this._messageDispatcher=new Ra(this),this._commandFrequencyLimitMap=new Map,this._commandRequestInfoMap=new Map,this._serverOverloadInfoMap=new Map,this._init();this.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_init(){this._updateCommandFrequencyLimitMap(Oa)}_onCloudConfigUpdated(){let e=this.getCloudConfig(\"cmd_frequency_limit\");we(e)||(e=JSON.parse(e),this._updateCommandFrequencyLimitMap(e))}_updateCommandFrequencyLimitMap(e){e.forEach(e=>{this._commandFrequencyLimitMap.set(e.cmd,{interval:e.interval,count:e.count})})}updateProtocolConfig(){this._protocolHandler.update()}request(e){_e.d(this._n+\".request options:\",e);const{protocolName:t,tjgID:s}=e;if(!this._protocolHandler.has(t))return _e.w(`${this._n}.request unknown protocol:${t}`),Vn({code:nn.CANNOT_FIND_PROTOCOL});const o=this.getProtocolData(e),{servcmd:i}=o.head;if(this._isFrequencyOverLimit(i))return Vn({code:nn.OVER_FREQUENCY_LIMIT});if(this._isServerOverload(i))return Vn({code:nn.OPEN_SERVICE_OVERLOAD_ERROR});Lt(s)||(o.head.tjgID=s);const n=this.getModule(Ss);return Na.includes(t)?n.simplySend(o):n.send(o)}getKeyMap(e){return this._protocolHandler.getKeyMap(e)}genCommonHead(){const e=this.getModule(ms);return{ver:\"v4\",platform:this._platform,websdkappid:a,websdkversion:r,a2:e.getA2Key()||void 0,tinyid:e.getTinyID()||void 0,status_instid:e.getStatusInstanceID(),sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getA2Key()?void 0:e.getUserID(),usersig:e.getA2Key()?void 0:e.getUserSig(),sdkability:192371,tjgID:\"\"}}genCosSpecifiedHead(){const e=this.getModule(ms);return{ver:\"v4\",platform:this._platform,websdkappid:a,websdkversion:r,sdkappid:e.getSDKAppID(),contenttype:e.getContentType(),reqtime:0,identifier:e.getUserID(),usersig:e.getUserSig(),status_instid:e.getStatusInstanceID(),sdkability:192371}}genSSOReportHead(){const e=this.getModule(ms);return{ver:\"v4\",platform:this._platform,websdkappid:a,websdkversion:r,sdkappid:e.getSDKAppID(),contenttype:\"\",reqtime:0,identifier:\"\",usersig:\"\",status_instid:e.getStatusInstanceID(),sdkability:192371}}getProtocolData(e){return this._protocolHandler.getProtocolData(e)}trans(e){const{servcmd:t,data:s}=e,o={head:{...this.genCommonHead(),servcmd:t},body:s};return this.getModule(Ss).send(o)}sendComboMessage(e){const{servcmd:t,data:s}=e,o={head:{...this.genCommonHead(),servcmd:t},body:s};return this.getModule(Ss).send(o)}onErrorCodeNotZero(e){const{errorCode:t}=e;if(t===nn.HELLO_ANSWER_KICKED_OUT){const{kickType:t,newInstanceInfo:s={}}=e;1===t?this.onMultipleAccountKickedOut(s):2===t?this.onMultipleDeviceKickedOut(s):3===t&&this.onRestApiKickedOut(s)}if(t===nn.MESSAGE_A2KEY_EXPIRED||t===nn.ACCOUNT_A2KEY_EXPIRED){this._onUserSigExpired();this.getModule(Ss).reConnect()}}onMessage(e){const{body:t}=e,{needAck:s=0,sessionData:o}=t;1===s&&this._sendACK(o),this._messageDispatcher.onMessage(e)}onReconnected(){this._reLoginOnReconnected()}reLoginOnKickOther(){_e.l(this._n+\".reLoginOnKickOther\"),this._reLogin()}_reLoginOnReconnected(){_e.l(this._n+\"._reLoginOnReconnected\"),this._reLogin()}_reLogin(){if(this.isLoggedIn()){let e=0;const t=this.getModule(Gs);t.canIUseOfflinePush()&&(e=t.getUniAppPlatform()),this.request({protocolName:$s,requestData:{isWebUniapp:e}}).then(e=>{const{instanceID:t}=e.data;this.getModule(ms).setStatusInstanceID(t),_e.l(this._n+\"._reLogin ok.\");this.getModule(_s).syncConversationList().then(()=>{_e.l(this._n+\"._reLogin, sync conversation list ok.\");this.getModule(Ns).start()});this.getModule(ds).updateLocalMainSequenceOnReconnected();const s=this.getModule(gs);s.resetGetTopicTime(),s.getTopicListOnReconnected()})}}onMultipleAccountKickedOut(e){this.getModule(rs).onMultipleAccountKickedOut(e)}onMultipleDeviceKickedOut(e){this.getModule(rs).onMultipleDeviceKickedOut(e)}_onUserSigExpired(){this.getModule(rs).onUserSigExpired()}onRestApiKickedOut(e){this.getModule(rs).onRestApiKickedOut(e)}_sendACK(e){this.request({protocolName:bi,requestData:{sessionData:e}})}_isFrequencyOverLimit(e){const t=e.split(\".\")[1];if(!this._commandFrequencyLimitMap.has(t))return!1;if(!this._commandRequestInfoMap.has(t))return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;const{count:s,interval:o}=this._commandFrequencyLimitMap.get(t);let{startTime:i,requestCount:n}=this._commandRequestInfoMap.get(t);if(Date.now()-i>1e3*o)return this._commandRequestInfoMap.set(t,{startTime:Date.now(),requestCount:1}),!1;n+=1,this._commandRequestInfoMap.set(t,{startTime:i,requestCount:n});let r=!1;return n>s&&(r=!0),r}_isServerOverload(e){if(!this._serverOverloadInfoMap.has(e))return!1;const{overloadTime:t,waitingTime:s}=this._serverOverloadInfoMap.get(e);let o=!1;return Date.now()-t<=1e3*s?o=!0:(this._serverOverloadInfoMap.delete(e),o=!1),o}onPushedServerOverload(e){const{overloadCommand:t,waitingTime:s}=e;this._serverOverloadInfoMap.set(t,{overloadTime:Date.now(),waitingTime:s}),_e.w(`${this._n}.onPushedServerOverload waitingTime:${s}s`)}reset(){_e.l(this._n+\".reset\"),this._updateCommandFrequencyLimitMap(Oa),this._commandRequestInfoMap.clear(),this._serverOverloadInfoMap.clear()}}class Ua extends Fs{constructor(e){super(e),this._n=\"MessageLossDetectionModule\",this._maybeLostSequencesMap=new Map,this._firstRoundRet=[]}onMessageMaybeLost(e,t,s){this._maybeLostSequencesMap.has(e)||this._maybeLostSequencesMap.set(e,[]);const o=this._maybeLostSequencesMap.get(e);for(let i=0;i<s;i++)-1===o.indexOf(t+i)&&o.push(t+i)}detectFirstRound(e,t){const s=this._maybeLostSequencesMap.get(e);if(Lt(s)||Lt(t))return;const o=s.filter(e=>-1===t.indexOf(e));0===o.length?_e.i(`${this._n}.detectFirstRound no message loss. conversationID:${e}`):this._firstRoundRet=this._firstRoundRet.concat(o),s.length=0}detectSecondRound(e,t){if(Lt(this._firstRoundRet)||Lt(t))return;const s=this._firstRoundRet.filter(e=>-1===t.indexOf(e));this._firstRoundRet.length=0;const o=s.length;if(0===o)return;let i;o<=5?i=e+\"-\"+s.join(\"-\"):(s.sort((e,t)=>e-t),i=e+\" start:\"+s[0]+\" end:\"+s[o-1]+\" count:\"+o);new Cn(\"messageLoss\").setMessage(i).setNetworkType(this.getNetworkType()).setLevel(\"warning\").end(),_e.i(`${this._n}.detectSecondRound message loss detected. conversationID:${e} lostSequences:${s}`)}reset(){_e.l(this._n+\".reset\"),this._maybeLostSequencesMap.clear(),this._firstRoundRet.length=0}}class ka extends Fs{constructor(e){super(e),this._n=\"CloudControlModule\",this._cloudConfig=new Map,this._expiredTime=0,this._version=0,this._isFetching=!1}getCloudConfig(e){return we(e)?this._cloudConfig:this._cloudConfig.has(e)?this._cloudConfig.get(e):void 0}_canFetchConfig(){return this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime}fetchConfig(){const e=this._canFetchConfig();if(_e.l(`${this._n}.fetchConfig canFetchConfig:${e}`),!e)return;const t=new Cn(\"fetchCloudControlConfig\"),s=this.getModule(ms).getSDKAppID();this._isFetching=!0,this.request({protocolName:qi,requestData:{SDKAppID:s,version:this._version}}).then(e=>{this._isFetching=!1,t.setMessage(`version:${this._version} newVersion:${e.data.version} config:${e.data.cloudControlConfig}`).setNetworkType(this.getNetworkType()).end(),_e.l(this._n+\".fetchConfig ok\"),this._parseCloudControlConfig(e.data)}).catch(e=>{this._isFetching=!1,this.probeNetwork().then(([s,o])=>{t.setError(e,s,o).end()}),_e.l(this._n+\".fetchConfig failed. error:\",e),this._setExpiredTimeOnResponseError(12e4)})}onPushedCloudControlConfig(e){_e.l(this._n+\".onPushedCloudControlConfig\");new Cn(\"pushedCloudControlConfig\").setNetworkType(this.getNetworkType()).setMessage(`newVersion:${e.version} config:${e.cloudControlConfig}`).end(),this._parseCloudControlConfig(e)}onCheckTimer(e){this._canFetchConfig()&&this.fetchConfig()}_parseCloudControlConfig(e){const t=this._n+\"._parseCloudControlConfig\",{errorCode:s,errorMessage:o,cloudControlConfig:i,version:n,expiredTime:r}=e;if(0===s){if(this._version!==n){let e=null;try{e=JSON.parse(i)}catch(a){this.isPrivateNetWork()||_e.e(t+\" JSON parse error. cloudControlConfig:\",i)}e&&(this._cloudConfig.clear(),Object.keys(e).forEach(t=>{this._cloudConfig.set(t,e[t])}),this._version=n,this.emitInnerEvent(Wn))}this._expiredTime=Date.now()+1e3*r}else we(s)?(_e.l(t+\" failed. Invalid message format:\",e),this._setExpiredTimeOnResponseError(36e5)):(_e.e(`${t} errorCode:${s} errorMessage:${o}`),this._setExpiredTimeOnResponseError(12e4))}_setExpiredTimeOnResponseError(e){this._expiredTime=Date.now()+e}reset(){_e.l(this._n+\".reset\"),this._cloudConfig.clear(),this._expiredTime=0,this._version=0,this._isFetching=!1}}class Pa extends Fs{constructor(e){super(e),this._n=\"RecoverMessageModule\",this.PULL_LIMIT_COUNT=15}start(){this._recoverGroupChat(),this._recoverC2CChat()}_recoverGroupChat(){const e=this._getLocalConversationList().filter(e=>e.type===t.CONV_GROUP&&e.groupProfile.type!==t.GRP_AVCHATROOM),s=this.getModule(_s);let o,i,n=0,r=0,a=0;e.forEach(e=>{const{conversationID:u,lastMessage:c}=e;i=u.replace(t.CONV_GROUP,\"\"),o=s.getLocalLastMessage(u),c&&0!==c.lastSequence&&o?(r=c.lastSequence,n=o.sequence,a=r-n,n>0&&a>=1&&a<300?this._recoverGroupMessage({groupID:i,localLastMessageSequence:n,remoteLastMessageSequence:r}):this._getGroupNotify(i)):this._getGroupNotify(i)})}_recoverC2CChat(){const e=this._getLocalConversationList().filter(e=>e.type===t.CONV_C2C),s=this.getModule(_s);let o,i=0,n=0,r=0;const a=[Promise.resolve()];e.forEach(e=>{const{conversationID:t,lastMessage:u}=e;o=s.getLocalLastMessage(t),u&&0!==u.lastTime&&o&&(n=u.lastTime,i=o.time,r=n-i,i>0&&r>=1&&r<=600&&a.push(this._recoverC2CMessage({conversationID:t,localLastMessageTime:i,remoteLastMessageTime:n})))}),Promise.all(a).then(()=>{_e.l(this._n+\"._recoverC2CChat all promise fulfilled, start to sync unread messages\");this.getModule(Ds).startSyncOnReconnected()})}_getLocalConversationList(){return this.getModule(_s).getLocalConversationList()}_recoverGroupMessage(e){const s=this._n+\"._recoverGroupMessage\";_e.l(s+\" options:\",e);const{groupID:o,localLastMessageSequence:i,remoteLastMessageSequence:n}=e;this._getGroupRomaingMessage({groupID:o,sequence:i}).then(e=>{const{complete:i,messageList:r}=e.data;if(!we(r)){const e=r[0].sequence;_e.l(`${s} pkgLastMessageSequence:${e} complete:${i}`),e<n&&2!==i&&this._recoverGroupMessage({groupID:o,localLastMessageSequence:e,remoteLastMessageSequence:n});new Cn(\"recoverMessage\").setNetworkType(this.getNetworkType()).setMessage(`groupID:${o} complete:${i} messageList length:${r.length}`).end();const a=this.getModule(ds);r.length>1&&r.sort((e,t)=>e.sequence-t.sequence);for(let s=0;s<r.length;s++){const e=r[s];e.from!==t.CONV_SYSTEM?a.onNewGroupMessage({dataList:[e],isInstantMessage:!1,updateUnreadCount:!1}):a.onNewGroupTips({event:e.event,dataList:[e]})}this._getGroupNotify(o)}})}_getGroupNotify(e){this.getModule(ds).getGroupNotify(e)}_getGroupRomaingMessage(e){const{groupID:t,sequence:s}=e;return this.request({protocolName:Qo,requestData:{groupID:t,count:this.PULL_LIMIT_COUNT,sequence:s+this.PULL_LIMIT_COUNT-1}})}_recoverC2CMessage(e){const t=this._n+\"._recoverC2CMessage\";_e.l(this._n+\"._recoverC2CMessage options:\",e);const{conversationID:s,localLastMessageTime:o,remoteLastMessageTime:i}=e;return this._getC2CRoamingMessage({conversationID:s,time:o}).then(e=>{const{complete:o,messageList:n}=e.data;if(!we(n)){const e=n.length;new Cn(\"recoverMessage\").setNetworkType(this.getNetworkType()).setMessage(`${s} complete:${o} messageList length:${e}`).end();this.getModule(ls).onNewC2CMessage({dataList:n,isInstantMessage:!0});const r=n[e-1].time;if(_e.l(`${t} pkgLastMessageTime:${r} complete:${o}`),r<i&&1!==o)return this._recoverC2CMessage({conversationID:s,localLastMessageTime:r,remoteLastMessageTime:i})}})}_getC2CRoamingMessage(e){const{conversationID:s,time:o}=e;return this.request({protocolName:Mo,requestData:{peerAccount:s.replace(t.CONV_C2C,\"\"),count:this.PULL_LIMIT_COUNT+1,lastMessageTime:o,direction:1}})}reset(){_e.l(this._n+\".reset\")}}class ba{constructor(){this._n=\"AvgE2EDelay\",this._e2eDelayArray=[]}addMessageDelay(e){const t=de()-e;t>=0&&this._e2eDelayArray.push(t)}_calcAvg(e,t){if(0===t)return 0;let s=0;return e.forEach(e=>{s+=e}),_t(s/t,1)}_calcCountWithLimit(e){const{e2eDelayArray:t,min:s,max:o}=e;return t.filter(e=>s<=e&&e<o).length}_calcPercent(e,t){let s=_t(e/t*100,2);return s>100&&(s=100),s}_checkE2EDelayException(e,t){const s=e.filter(e=>e>t);if(s.length>0){const t=s.length,o=Math.min(...s),i=Math.max(...s),n=this._calcAvg(s,t),r=_t(t/e.length*100,2);if(r>50){new Cn(\"messageE2EDelayException\").setMessage(`count:${t} min:${o} max:${i} avg:${n} percent:${r}`).setLevel(\"warning\").end()}}}getStatResult(){const e=this._e2eDelayArray.length;if(0===e)return null;const t=[...this._e2eDelayArray],s=this._calcCountWithLimit({e2eDelayArray:t,min:0,max:1}),o=this._calcCountWithLimit({e2eDelayArray:t,min:1,max:3}),i=this._calcPercent(s,e),n=this._calcPercent(o,e),r=this._calcAvg(t,e);return this._checkE2EDelayException(t,3),t.length=0,this.reset(),{totalCount:e,countLessThan1Second:s,percentOfCountLessThan1Second:i,countLessThan3Second:o,percentOfCountLessThan3Second:n,avgDelay:r}}reset(){this._e2eDelayArray.length=0}}class wa{constructor(){this._n=\"AvgRTT\",this._requestCount=0,this._rttArray=[]}addRequestCount(){this._requestCount+=1}addRTT(e){this._rttArray.push(e)}_calcTotalCount(){return this._requestCount}_calcRTTCount(e){return e.length}_calcSuccessRateOfRequest(e,t){if(0===t)return 0;let s=_t(e/t*100,2);return s>100&&(s=100),s}_calcAvg(e,t){if(0===t)return 0;let s=0;return e.forEach(e=>{s+=e}),parseInt(s/t)}_calcMax(){return Math.max(...this._rttArray)}_calcMin(){return Math.min(...this._rttArray)}getStatResult(){const e=this._calcTotalCount(),t=[...this._rttArray];if(0===e)return null;const s=this._calcRTTCount(t),o=this._calcSuccessRateOfRequest(s,e),i=this._calcAvg(t,s);return _e.l(`${this._n}.getStatResult max:${this._calcMax()} min:${this._calcMin()} avg:${i}`),this.reset(),{totalCount:e,rttCount:s,successRateOfRequest:o,avgRTT:i}}reset(){this._requestCount=0,this._rttArray.length=0}}class Fa{constructor(){this._map=new Map}initMap(e){e.forEach(e=>{this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})})}addTotalCount(e){return!(we(e)||!this._map.has(e))&&(this._map.get(e).totalCount+=1,!0)}addSuccessCount(e){return!(we(e)||!this._map.has(e))&&(this._map.get(e).successCount+=1,!0)}addFailedCountOfUserSide(e){return!(we(e)||!this._map.has(e))&&(this._map.get(e).failedCountOfUserSide+=1,!0)}addCost(e,t){return!(we(e)||!this._map.has(e))&&(this._map.get(e).costArray.push(t),!0)}addFileSize(e,t){return!(we(e)||!this._map.has(e))&&(this._map.get(e).fileSizeArray.push(t),!0)}_calcSuccessRateOfBusiness(e){if(we(e)||!this._map.has(e))return-1;const t=this._map.get(e);let s=_t(t.successCount/t.totalCount*100,2);return s>100&&(s=100),s}_calcSuccessRateOfPlatform(e){if(we(e)||!this._map.has(e))return-1;const t=this._map.get(e);let s=this._calcSuccessCountOfPlatform(e)/t.totalCount*100;return s=_t(s,2),s>100&&(s=100),s}_calcTotalCount(e){return we(e)||!this._map.has(e)?-1:this._map.get(e).totalCount}_calcSuccessCountOfBusiness(e){return we(e)||!this._map.has(e)?-1:this._map.get(e).successCount}_calcSuccessCountOfPlatform(e){if(we(e)||!this._map.has(e))return-1;const t=this._map.get(e);return t.successCount+t.failedCountOfUserSide}_calcAvg(e){return we(e)||!this._map.has(e)?-1:e===pn?this._calcAvgSpeed(e):this._calcAvgCost(e)}_calcAvgCost(e){const t=this._map.get(e).costArray.length;if(0===t)return 0;let s=0;return this._map.get(e).costArray.forEach(e=>{s+=e}),parseInt(s/t)}_calcAvgSpeed(e){let t=0,s=0;return this._map.get(e).costArray.forEach(e=>{t+=e}),this._map.get(e).fileSizeArray.forEach(e=>{s+=e}),parseInt(1e3*s/t)}getStatResult(e){const t=this._calcTotalCount(e);if(0===t)return null;const s=this._calcSuccessCountOfBusiness(e),o=this._calcSuccessRateOfBusiness(e),i=this._calcSuccessCountOfPlatform(e),n=this._calcSuccessRateOfPlatform(e),r=this._calcAvg(e);return this.reset(e),{totalCount:t,successCountOfBusiness:s,successRateOfBusiness:o,successCountOfPlatform:i,successRateOfPlatform:n,avgValue:r}}reset(e){we(e)?this._map.clear():this._map.set(e,{totalCount:0,successCount:0,failedCountOfUserSide:0,costArray:[],fileSizeArray:[]})}}class $a{constructor(){this._lastMap=new Map,this._currentMap=new Map}initMap(e){e.forEach(e=>{this._lastMap.set(e,new Map),this._currentMap.set(e,new Map)})}addMessageSequence(e){const{key:s,message:o}=e;if(we(s)||!this._lastMap.has(s)||!this._currentMap.has(s))return!1;const{conversationID:i,sequence:n}=o,r=i.replace(t.CONV_GROUP,\"\");if(0===this._lastMap.get(s).size)this._addCurrentMap(e);else if(this._lastMap.get(s).has(r)){const t=this._lastMap.get(s).get(r),o=t.length-1;n>t[0]&&n<t[o]?(t.push(n),t.sort(),this._lastMap.get(s).set(r,t)):this._addCurrentMap(e)}else this._addCurrentMap(e);return!0}_addCurrentMap(e){const{key:s,message:o}=e,{conversationID:i,sequence:n}=o,r=i.replace(t.CONV_GROUP,\"\");this._currentMap.get(s).has(r)||this._currentMap.get(s).set(r,[]),this._currentMap.get(s).get(r).push(n)}_copyData(e){if(!we(e)){this._lastMap.set(e,new Map);let t=this._lastMap.get(e);for(const[s,o]of this._currentMap.get(e))t.set(s,o);t=null,this._currentMap.set(e,new Map)}}getStatResult(e){if(we(this._currentMap.get(e))||we(this._lastMap.get(e)))return null;if(0===this._lastMap.get(e).size)return this._copyData(e),null;let t=0,s=0;if(this._lastMap.get(e).forEach((e,o)=>{const i=[...e.values()],n=i.length;t+=i[n-1]-i[0]+1,s+=n}),0===t)return null;let o=_t(s/t*100,2);return o>100&&(o=100),this._copyData(e),{totalCount:t,successCountOfMessageReceived:s,successRateOfMessageReceived:o}}reset(){this._currentMap.clear(),this._lastMap.clear()}}class qa extends Fs{constructor(e){super(e),this._n=\"QualityStatModule\",this.TAG=\"im-ssolog-quality-stat\",this.reportIndex=0,this.wholePeriod=!1,this._qualityItems=[rn,an,un,cn,ln,dn,pn,hn,gn,_n],this._messageSentItems=[un,cn,ln,dn,pn],this._messageReceivedItems=[hn,gn,_n],this.REPORT_INTERVAL=120,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._statInfoArr=[],this._avgRTT=new wa,this._avgE2EDelay=new ba,this._rateMessageSent=new Fa,this._rateMessageReceived=new $a;const t=this.getInnerEmitterInstance();t.on(Kn,this._onLoginSuccess,this),t.on(Wn,this._onCloudConfigUpdated,this)}_onLoginSuccess(){this._rateMessageSent.initMap(this._messageSentItems),this._rateMessageReceived.initMap(this._messageReceivedItems);const e=this.getModule(Ms),t=e.getItem(this.TAG,!1);!Lt(t)&&$e(t.forEach)&&(_e.l(`${this._n}._onLoginSuccess get quality stat logs from local storage, count:${t.length}`),t.forEach(e=>{this._statInfoArr.push(e)}),e.removeItem(this.TAG,!1))}_onCloudConfigUpdated(){const e=this.getCloudConfig(\"q_rpt_interval\"),t=this.getCloudConfig(\"q_rpt_sdkappid_bl\"),s=this.getCloudConfig(\"q_rpt_tinyid_wl\");we(e)||(this.REPORT_INTERVAL=Number(e)),we(t)||(this.REPORT_SDKAPPID_BLACKLIST=t.split(\",\").map(e=>Number(e))),we(s)||(this.REPORT_TINYID_WHITELIST=s.split(\",\"))}onCheckTimer(e){this.isLoggedIn()&&e%this.REPORT_INTERVAL==0&&(this.wholePeriod=!0,this._report())}addRequestCount(){this._avgRTT.addRequestCount()}addRTT(e){this._avgRTT.addRTT(e)}addMessageDelay(e){this._avgE2EDelay.addMessageDelay(e)}addTotalCount(e){this._rateMessageSent.addTotalCount(e)||_e.w(this._n+\".addTotalCount invalid key:\",e)}addSuccessCount(e){this._rateMessageSent.addSuccessCount(e)||_e.w(this._n+\".addSuccessCount invalid key:\",e)}addFailedCountOfUserSide(e){this._rateMessageSent.addFailedCountOfUserSide(e)||_e.w(this._n+\".addFailedCountOfUserSide invalid key:\",e)}addCost(e,t){this._rateMessageSent.addCost(e,t)||_e.w(this._n+\".addCost invalid key or cost:\",e,t)}addFileSize(e,t){this._rateMessageSent.addFileSize(e,t)||_e.w(this._n+\".addFileSize invalid key or size:\",e,t)}addMessageSequence(e){this._rateMessageReceived.addMessageSequence(e)||_e.w(this._n+\".addMessageSequence invalid key:\",e.key)}_getQualityItem(e){let t={},s=fn[this.getNetworkType()];we(s)&&(s=8);const o={qualityType:mn[e],timestamp:ce(),networkType:s,extension:\"\"};switch(e){case rn:t=this._avgRTT.getStatResult();break;case an:t=this._avgE2EDelay.getStatResult();break;case un:case cn:case ln:case dn:case pn:t=this._rateMessageSent.getStatResult(e);break;case hn:case gn:case _n:t=this._rateMessageReceived.getStatResult(e)}return null===t?null:{...o,...t}}_report(e){let t=[],s=null;we(e)?this._qualityItems.forEach(e=>{s=this._getQualityItem(e),null!==s&&(s.reportIndex=this.reportIndex,s.wholePeriod=this.wholePeriod,t.push(s))}):(s=this._getQualityItem(e),null!==s&&(s.reportIndex=this.reportIndex,s.wholePeriod=this.wholePeriod,t.push(s))),_e.d(this._n+\"._report\",t),this._statInfoArr.length>0&&(t=t.concat(this._statInfoArr),this._statInfoArr=[]);const o=this.getModule(ms),i=o.getSDKAppID(),n=o.getTinyID();mt(this.REPORT_SDKAPPID_BLACKLIST,i)&&!Mt(this.REPORT_TINYID_WHITELIST,n)&&(t=[]),t.length>0&&this._doReport(t)}_doReport(e){const t={header:Yr(this),quality:e};this.request({protocolName:Gi,requestData:{...t}}).then(()=>{this.reportIndex++,this.wholePeriod=!1}).catch(t=>{_e.w(`${this._n}._doReport, online:${this.getNetworkType()} error:`,t),this._statInfoArr=this._statInfoArr.concat(e),this._flushAtOnce()})}_flushAtOnce(){const e=this.getModule(Ms),t=e.getItem(this.TAG,!1),s=this._statInfoArr,o=this._n+\"._flushAtOnce\";if(Lt(t))_e.l(`${o} count:${s.length}`),e.setItem(this.TAG,s,!0,!1);else{let i=s.concat(t);i.length>10&&(i=i.slice(0,10)),_e.l(`${o} count:${i.length}`),e.setItem(this.TAG,i,!0,!1)}this._statInfoArr=[]}reset(){_e.l(this._n+\".reset\"),this._report(),this.reportIndex=0,this.wholePeriod=!1,this.REPORT_SDKAPPID_BLACKLIST=[],this.REPORT_TINYID_WHITELIST=[],this._avgRTT.reset(),this._avgE2EDelay.reset(),this._rateMessageSent.reset(),this._rateMessageReceived.reset()}}class xa{constructor(e){Lt(e)||(this.userID=e.userID||\"\",this.nick=e.nick||\"\",this.avatar=e.avatar||\"\",this.time=e.time||0,this.source=e.source||\"\",this.wording=e.wording||\"\",this.type=e.type||\"\")}}class Va{constructor(e){this._snsModule=e,this._n=\"FriendApplicationHandler\",this._startTime=0,this._maxLimited=100,this._currentSequence=0,this._friendApplicationMap=new Map,this._unreadCount=0}getLocalFriendApplicationList(){return{friendApplicationList:[...this._friendApplicationMap.values()],unreadCount:this._unreadCount}}_onFriendApplicationListUpdated(){this._snsModule.emitOuterEvent(e.FRIEND_APPLICATION_LIST_UPDATED,{friendApplicationList:[...this._friendApplicationMap.values()],unreadCount:this._unreadCount})}onFriendApplicationRead(){this._unreadCount=0,this._onFriendApplicationListUpdated()}onFriendApplicationAdded(e,s){if(Lt(e))return;let o=\"\";o=s===this._snsModule.getMyUserID()?t.SNS_APPLICATION_SENT_BY_ME:t.SNS_APPLICATION_SENT_TO_ME;let i=!1;e.forEach(e=>{const s=`${e.userID}_${o}`;o!==t.SNS_APPLICATION_SENT_TO_ME||this._friendApplicationMap.has(s)||(this._unreadCount+=1),this._friendApplicationMap.set(s,new xa({...e,type:o})),i=!0}),i&&this._onFriendApplicationListUpdated()}onFriendApplicationDeleted(e){Lt(e)||this.getFriendApplicationList()}getFriendApplicationList(){const e=this._n+\".getFriendApplicationList\",s=new Cn(\"getFriendApplicationList\");return this._snsModule.request({protocolName:no,requestData:{applicationType:t.SNS_APPLICATION_TYPE_BOTH,fromAccount:this._snsModule.getMyUserID(),maxLimited:this._maxLimited,startTime:this._startTime,lastSequence:this._currentSequence}}).then(t=>{const{resultList:o,unreadCount:i,startTime:n,currentSequence:r}=t.data;this._startTime=n,this._currentSequence=r,this._unreadCount=i;const a=be(o)?o.length:0;s.setNetworkType(this._snsModule.getNetworkType()).setMessage(`applicationCount:${a} unreadCount:${i}`).end(),_e.i(`${e} ok. applicationCount:${a} unreadCount:${i}`),this._friendApplicationMap.clear(),be(o)&&o.forEach(e=>{const{userID:t,type:s}=e,o=new xa(e);this._friendApplicationMap.set(`${t}_${s}`,o)}),this._onFriendApplicationListUpdated()}).catch(t=>(this._snsModule.probeNetwork().then(([e,o])=>{s.setError(t,e,o).end()}),_e.w(e+\" failed. error:\",t),Vn(t)))}deleteFriendApplication(e){const s=this._n+\".deleteFriendApplication\",{userID:o,type:i}=e;let n=i;if((!n||n!==t.SNS_APPLICATION_SENT_BY_ME&&n!==t.SNS_APPLICATION_SENT_TO_ME)&&(n=t.SNS_APPLICATION_SENT_TO_ME),!this._friendApplicationMap.has(`${o}_${n}`))return Vn({code:nn.FRIEND_APPLICATION_NOT_EXIST});const r=new Cn(\"deleteFriendApplication\");r.setMessage(`userID:${o} type:${n}`);return this._snsModule.request({protocolName:ro,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:[o],type:n}}).then(e=>{const{resultList:t}=e.data,{to:i,resultCode:a,resultInfo:u}=t[0];return r.setNetworkType(this._snsModule.getNetworkType()).setMoreMessage(\"resultList:\"+JSON.stringify(t)).end(),_e.i(`${s} ok. userID:${o} type:${n}`),0===a?wn():Vn({userID:i,code:a,message:u})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}acceptFriendApplication(e){const s=this._n+\".acceptFriendApplication\",{userID:o,remark:i,tag:n,type:r}=e;let a=r;(!a||a!==t.SNS_APPLICATION_AGREE&&a!==t.SNS_APPLICATION_AGREE_AND_ADD)&&(a=t.SNS_APPLICATION_AGREE_AND_ADD);const u=new Cn(\"acceptFriendApplication\");u.setMessage(`userID:${o} type:${a}`);return this._snsModule.request({protocolName:io,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:o,remark:i,tag:n,action:a}]}}).then(e=>{u.setNetworkType(this._snsModule.getNetworkType()).end();const{resultList:t}=e.data,{resultCode:i,resultInfo:n}=t[0];if(0!==i)return Vn({code:i,message:n});_e.i(`${s} ok. userID:${o} type:${a}`)}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{u.setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}refuseFriendApplication(e){const t=this._n+\".refuseFriendApplication\",{userID:s}=e,o=new Cn(\"refuseFriendApplication\");o.setMessage(\"userID:\"+s);return this._snsModule.request({protocolName:io,requestData:{fromAccount:this._snsModule.getMyUserID(),responseFriendItem:[{userID:s,action:\"Response_Action_Reject\"}]}}).then(e=>{o.setNetworkType(this._snsModule.getNetworkType()).end();const{resultList:i}=e.data,{resultCode:n,resultInfo:r}=i[0];if(0!==n)return Vn({code:n,message:r});_e.i(`${t} ok. userID:${s}`)}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}_onFriendApplicationProcessed(e){if(0===e.length)return;let s=!1;e.forEach(e=>{const o=`${e.to}_${t.SNS_APPLICATION_SENT_TO_ME}`;this._friendApplicationMap.has(o)&&(this._friendApplicationMap.delete(o),this._unreadCount-=1,s=!0)}),this._unreadCount<0&&(this._unreadCount=0),s&&this._onFriendApplicationListUpdated()}setFriendApplicationRead(){const e=this._n+\".setFriendApplicationRead\",t=new Cn(\"setFriendApplicationRead\");return this._snsModule.request({protocolName:ao,requestData:{fromAccount:this._snsModule.getMyUserID(),latestTimeStamp:_t(ce()/1e3,0)}}).then(s=>{t.setNetworkType(this._snsModule.getNetworkType()).end(),_e.i(e+\" ok\"),this._unreadCount=0}).catch(s=>(this._snsModule.probeNetwork().then(([e,o])=>{t.setError(s,e,o).end()}),_e.w(e+\" failed. error:\",s),Vn(s)))}reset(){this._startIndex=0,this._maxLimited=100,this._currentSequence=0,this._unreadCount=0,this._friendApplicationMap.clear()}}class Ba{constructor(e,t){this.userID=e,this.remark=\"\",this.groupList=[],this.source=\"\",this.addTime=0,this.friendCustomField=[],this.timestamp=0;const s={},o=[];if(s.userID=e,!Lt(t)){let e=\"\",i=\"\";for(let n=0,r=t.length;n<r;n++)if(e=t[n].tag,i=t[n].value,e.indexOf(\"Tag_SNS_Custom\")>-1)this.friendCustomField.push({key:e,value:i});else if(e.indexOf(\"Tag_Profile_Custom\")>-1)o.push({key:e,value:i});else switch(e){case Me.NICK:s.nick=i;break;case Me.GENDER:s.gender=i;break;case Me.BIRTHDAY:s.birthday=i;break;case Me.LOCATION:s.location=i;break;case Me.SELFSIGNATURE:s.selfSignature=i;break;case Me.ALLOWTYPE:s.allowType=i;break;case Me.LANGUAGE:s.language=i;break;case Me.AVATAR:s.avatar=i;break;case Me.MESSAGESETTINGS:s.messageSettings=i;break;case Me.ADMINFORBIDTYPE:s.adminForbidType=i;break;case Me.LEVEL:s.level=i;break;case Me.ROLE:s.role=i;break;case Ie:this.remark=i;break;case ye:this.addTime=i;break;case fe:this.groupList=JSON.parse(JSON.stringify(i));break;case Ce:this.source=i;break;case Te:break;default:_e.l(\"snsProfileItem unknown tag->\",t[n].tag)}}this.profile=new tr({...s,profileCustomField:o})}validate(e){let t=!0,s=\"\";if(Lt(e))return{valid:!1,tips:\"empty options\"};if(e.profileCustomField){const t=e.profileCustomField.length;let s=null;for(let o=0;o<t;o++){if(s=e.profileCustomField[o],!Ue(s.key)||-1===s.key.indexOf(\"Tag_Profile_Custom\"))return{valid:!1,tips:\"The prefix of keys of the custom profile key-value pairs (which is profileCustomField) must be Tag_Profile_Custom\"};if(!Ue(s.value))return{valid:!1,tips:\"The type of values of the custom profile key-value pairs (which is profileCustomField) must be String\"}}}for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(\"profileCustomField\"===o)continue;if(Lt(e[o])&&!Ue(e[o])&&!Ge(e[o])){s=\"key:\"+o+\", invalid value:\"+e[o],t=!1;continue}switch(o){case\"nick\":Ue(e[o])||(s=\"nick must be a string\",t=!1),Ke(e[o])>500&&(s=`nick name limited: must less than or equal to 500 bytes, current size: ${Ke(e[o])} bytes`,t=!1);break;case\"gender\":ze(De,e.gender)||(s=\"key:gender, invalid value:\"+e.gender,t=!1);break;case\"birthday\":Ge(e.birthday)||(s=\"birthday must be a number\",t=!1);break;case\"location\":Ue(e.location)||(s=\"location must be a string\",t=!1);break;case\"selfSignature\":Ue(e.selfSignature)||(s=\"selfSignature must be a string\",t=!1);break;case\"allowType\":ze(Se,e.allowType)||(s=\"key:allowType, invalid value:\"+e.allowType,t=!1);break;case\"language\":Ge(e.language)||(s=\"language must be a number\",t=!1);break;case\"avatar\":Ue(e.avatar)||(s=\"avatar must be a string\",t=!1);break;case\"messageSettings\":0!==e.messageSettings&&1!==e.messageSettings&&(s=\"messageSettings must be 0 or 1\",t=!1);break;case\"adminForbidType\":ze(Ee,e.adminForbidType)||(s=\"key:adminForbidType, invalid value:\"+e.adminForbidType,t=!1);break;case\"level\":Ge(e.level)||(s=\"level must be a number\",t=!1);break;case\"role\":Ge(e.role)||(s=\"role must be a number\",t=!1);break;default:s=\"unknown key:\"+o+\"  \"+e[o],t=!1}}return{valid:t,tips:s}}update(e){let t=\"\",s=\"\";const o=[];this.friendCustomField.forEach(e=>{o.push(e.key)});for(let i=0,n=e.length;i<n;i++)if(t=e[i].tag,s=e[i].value,t.indexOf(\"Tag_SNS_Custom\")>-1)o.indexOf(t)>-1?this.friendCustomField.forEach(e=>{e.key===t&&(e.value=s)}):this.friendCustomField.push({key:t,value:s});else if(t.indexOf(\"Tag_Profile_Custom\")>-1){let e=!1;this.profile.profileCustomField.forEach(o=>{o.key===t&&(o.value=s,e=!0)}),e||this.profile.profileCustomField.push({key:t,value:s})}else switch(t){case Me.NICK:this.profile.nick=s;break;case Me.GENDER:this.profile.gender=s;break;case Me.BIRTHDAY:this.profile.birthday=s;break;case Me.LOCATION:this.profile.location=s;break;case Me.SELFSIGNATURE:this.profile.selfSignature=s;break;case Me.ALLOWTYPE:this.profile.allowType=s;break;case Me.LANGUAGE:this.profile.language=s;break;case Me.AVATAR:this.profile.avatar=s;break;case Me.MESSAGESETTINGS:this.profile.messageSettings=s;break;case Me.ADMINFORBIDTYPE:this.profile.adminForbidType=s;break;case Me.LEVEL:this.profile.level=s;break;case Me.ROLE:this.profile.role=s;break;case Ie:this.remark=s;break;case ye:this.addTime=s;break;case fe:this.groupList=JSON.parse(JSON.stringify(s));break;case Ce:this.source=s;break;case Te:break;default:_e.d(\"snsProfileItem unkown tag->\",e[i].tag)}this.timestamp=Date.now(),o.length=0}updateProfile(e){this.profile=JSON.parse(JSON.stringify(e)),this.timestamp=Date.now()}addToGroupList(e){-1===this.groupList.indexOf(e)&&(this.groupList.push(e),this.count=this.groupList.length)}removeFromGroupList(e){const t=this.groupList.indexOf(e);t>-1&&(this.groupList.splice(t,1),this.count=this.groupList.length)}}class Ha{constructor(e){this._snsModule=e,this._n=\"FriendHandler\",this._friendMap=new Map,this._startIndex=0,this._standardSequence=0,this._customSequence=0,this._expirationTime=18e4}getLocalFriendList(){return[...this._friendMap.values()]}getFriendRemark(e){return this._friendMap.has(e)?this._friendMap.get(e).remark:\"\"}onFriendProfileModified(e){const{dataList:s}=e;if(Lt(s))return;const o=this._snsModule.getModule(_s);s.forEach(e=>{const{userID:s,profileList:i}=e;if(this.isMyFriend(s)){_e.l(`${this._n}.onFriendProfileModified. friend account:${s}, profileList:${JSON.stringify(i)}`);const e=this._friendMap.get(s);e.update(i),o.modifyMessageSentByPeer({conversationID:`${t.CONV_C2C}${s}`,latestNick:e.profile.nick,latestAvatar:e.profile.avatar})}}),this._onFriendListUpdated()}onFriendAdded(e){0!==e.length&&(_e.l(`${this._n}.onFriendAdded userIDList:${e}`),e.forEach(e=>{this._friendMap.set(e,new Ba(e))}),this.getFriendProfile({userIDList:e}).then(t=>{e.forEach(e=>{const t=this._friendMap.get(e);t.groupList.length>0&&this._snsModule.updateWhenFriendAdded({nameList:t.groupList,userID:e})}),this._onFriendListUpdated()}))}onFriendDeleted(e){0!==e.length&&(_e.l(`${this._n}.onFriendDeleted userIDList:${e}`),e.forEach(e=>{const t=this._friendMap.get(e);t.groupList.length>0&&this._snsModule.updateWhenFriendDeleted({nameList:t.groupList,userID:e}),this._friendMap.delete(e)}),this._onFriendListUpdated())}_onFriendListUpdated(){this._snsModule.emitOuterEvent(e.FRIEND_LIST_UPDATED);this._snsModule.getModule(_s).checkAndPatchRemark()}getFriendProfile(e){const t=this._n+\".getFriendProfile\",{userIDList:s}=e,o=[],i=[],n=[];if(s.forEach(e=>{if(this._friendMap.has(e)){const t=this._friendMap.get(e);Date.now()-t.timestamp<this._expirationTime?i.push(t):n.push(e)}else o.push({userID:e,code:nn.NOT_MY_FRIEND,message:this._snsModule.getErrorMessage(nn.NOT_MY_FRIEND)})}),0===n.length)return _e.i(t+\" newUserIDList is empty\"),xn({friendList:i,failureUserIDList:o});const r=new Cn(\"getFriendProfile\");r.setMessage(\"userIDList:\"+n),_e.i(`${t} userIDList:${n}`);return this._snsModule.request({protocolName:Qs,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:n}}).then(e=>{r.setNetworkType(this._snsModule.getNetworkType()).end(),_e.i(t+\" ok\");const{resultList:s}=e.data;return s.forEach(e=>{const{to:t,resultCode:s,resultInfo:n,tagValueList:r}=e;if(we(s)||0===s){let e;this._friendMap.has(t)?(e=this._friendMap.get(t),e.update(r)):(e=new Ba(t,r),this._friendMap.set(t,e)),i.push(e)}else o.push({userID:t,code:s,message:n})}),wn({friendList:i,failureUserIDList:o})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}isMyFriend(e){return this._friendMap.has(e)}pagingGetFriendList(){const t=this._n+\".getFriendList\",s=new Cn(\"getFriendList\"),o=Date.now();this._snsModule.request({protocolName:Zs,requestData:{fromAccount:this._snsModule.getMyUserID(),startIndex:this._startIndex,standardSequence:this._standardSequence,customSequence:this._customSequence}}).then(i=>{const{friendCount:n,resultList:r,nextStartIndex:a,standardSequence:u,customSequence:c,completeFlag:l}=i.data;this._startIndex=a,this._standardSequence=u,this._customSequence=c;const d=`friendCount:${n} nextStartIndex:${a} standardSequence:${u} customSequence:${c} completeFlag:${l} cost ${Date.now()-o} ms`;s.setNetworkType(this._snsModule.getNetworkType()).setMessage(d).end(),_e.i(t+\" ok.\",d),Lt(r)||r.forEach(e=>{const{to:t,tagValueList:s}=e;this._friendMap.set(t,new Ba(t,s))}),0===l?this.pagingGetFriendList():(this._snsModule.emitOuterEvent(e.FRIEND_LIST_UPDATED),this._pagingGetFriendProfile())}).catch(e=>(this._snsModule.probeNetwork().then(([t,o])=>{s.setError(e,t,o).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}_pagingGetFriendProfile(){const e=[...this._friendMap.keys()],t=this._snsModule.getModule(cs),s=e.length,o=s<=100?1:Math.ceil(s/100);_e.l(`${this._n}._pagingGetFriendProfile friendCount:${s} pageCount:${o}`);for(let i=0;i<o;i++)t.getUserProfile({userIDList:e.slice(100*i,100*(i+1))}).then(e=>{e.data.forEach(e=>{const t=this._friendMap.get(e.userID);t&&t.updateProfile(e)}),this._onFriendListUpdated()})}addFriend(e){const s=this._n+\".addFriend\";if(this._friendMap.has(e.to))return Vn({code:nn.ALREADY_MY_FRIEND});if(e.wording&&!1===this._snsModule.filterProfanity(\"wording\",e))return Vn({code:nn.PROFANITY_FOUND});const{to:o,source:i,type:n,wording:r,remark:a,groupName:u}=e;let c=n;(!c||c!==t.SNS_ADD_TYPE_SINGLE&&c!==t.SNS_ADD_TYPE_BOTH)&&(c=t.SNS_ADD_TYPE_BOTH);const l=new Cn(\"addFriend\");l.setMessage(`to:${o} source:${i} type:${c}`);return this._snsModule.request({protocolName:so,requestData:{fromAccount:this._snsModule.getMyUserID(),addFriendItem:[{to:o,source:i,wording:r,remark:a,groupName:u}],type:c}}).then(e=>{const{resultList:t}=e.data;l.setNetworkType(this._snsModule.getNetworkType()).setMoreMessage(\"resultList:\"+JSON.stringify(t)).end();const{to:o,resultCode:i,resultInfo:n}=t[0];return _e.i(`${s} ok. to:${o} type:${c} code:${i}`),we(i)||0===i?wn({userID:o,code:0}):30539===i?wn({userID:o,code:i,message:this._snsModule.getErrorMessage(i)}):Vn({userID:o,code:i,message:this._snsModule.getErrorMessage(i)||n})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{l.setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}deleteFriend(e){const s=this._n+\".deleteFriend\",{userIDList:o,type:i}=e;o.length>1e3&&(_e.w(`${s} ${Dt(1e3)}`),o.length=1e3);const n=[],r=[],a=[];if(o.forEach(e=>{this._friendMap.has(e)?a.push(e):n.push({userID:e,code:nn.NOT_MY_FRIEND,message:this._snsModule.getErrorMessage(nn.NOT_MY_FRIEND)})}),0===a.length)return xn({successUserIDList:r,failureUserIDList:n});let u=i;(!u||u!==t.SNS_DELETE_TYPE_SINGLE&&u!==t.SNS_DELETE_TYPE_BOTH)&&(u=t.SNS_DELETE_TYPE_BOTH);const c=new Cn(\"deleteFriend\");c.setMessage(`userIDList:${a} type:${u}`);return this._snsModule.request({protocolName:to,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:a,type:u}}).then(e=>{c.setNetworkType(this._snsModule.getNetworkType()).end(),_e.i(s+\" ok\");const{resultList:t}=e.data;return Lt(t)||t.forEach(e=>{const{to:t,resultCode:s,resultInfo:o}=e;we(s)||0===s?r.push({userID:t}):n.push({userID:t,code:s,message:o})}),wn({successUserIDList:r,failureUserIDList:n})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{c.setError(e,t,s).end()}),_e.w(s+\" error:\",e),Vn(e)))}updateFriend(e){const{userID:t,remark:s,friendCustomField:o}=e;if(!this._friendMap.has(t))return Vn({code:nn.NOT_MY_FRIEND});const i=this._n+\".updateFriend\",n=new Cn(\"updateFriend\");n.setMessage(`userID:${t} remark:${s} friendCustomField:${o}`);const r=[];we(s)||r.push({tag:Ie,value:s}),be(o)&&o.length>0&&o.forEach(e=>{r.push({tag:e.key,value:e.value})});return this._snsModule.request({protocolName:oo,requestData:{fromAccount:this._snsModule.getMyUserID(),updateItem:[{to:t,snsItem:r}]}}).then(e=>{n.setNetworkType(this._snsModule.getNetworkType()).end(),_e.i(i+\" ok\");const{resultList:t}=e.data,{to:r,resultCode:a,resultInfo:u}=t[0];if(we(a)||0===a){const e=this._friendMap.get(r);return e&&(we(s)||(e.remark=s),be(o)&&o.length>0&&Qe(e.friendCustomField,o),this._onFriendListUpdated()),wn(e)}return Vn({code:a,message:u})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{n.setError(e,t,s).end()}),_e.w(i+\" failed. error:\",e),Vn(e)))}checkFriend(e){const s=this._n+\".checkFriend\",{userIDList:o,type:i}=e;let n=i;(!n||n!==t.SNS_CHECK_TYPE_SINGLE&&n!==t.SNS_CHECK_TYPE_BOTH)&&(n=t.SNS_CHECK_TYPE_BOTH);const r=new Cn(\"checkFriend\");r.setMessage(`userIDList:${o} type:${n}`);return this._snsModule.request({protocolName:eo,requestData:{fromAccount:this._snsModule.getMyUserID(),userIDList:o,type:n}}).then(e=>{r.setNetworkType(this._snsModule.getNetworkType()).end(),_e.i(`${s} ok. userIDList:${o} type:${n}`);const t=[],i=[],{resultList:a}=e.data;return be(a)&&a.forEach(e=>{const{to:s,relation:o,resultCode:n,resultInfo:r}=e;we(n)||0===n?t.push({userID:s,code:0,relation:o}):i.push({userID:s,code:n,message:r})}),wn({successUserIDList:t,failureUserIDList:i})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{r.setError(e,t,s).end()}),_e.w(s+\" failed. error:\",e),Vn(e)))}updateWhenAddedToFriendGroup(e){const{name:t,userIDList:s}=e;_e.l(`${this._n}.updateWhenAddedToFriendGroup groupName:${t} userIDList:${s}`),t&&!Lt(s)&&s.forEach(e=>{if(this._friendMap.has(e)){this._friendMap.get(e).addToGroupList(t)}})}updateWhenRemovedFromFriendGroup(e){const{name:t,userIDList:s}=e;_e.l(`${this._n}.updateWhenRemovedFromFriendGroup groupName:${t} userIDList:${s}`),t&&!Lt(s)&&s.forEach(e=>{if(this._friendMap.has(e)){this._friendMap.get(e).removeFromGroupList(t)}})}reset(){this._friendMap.clear(),this._startIndex=0,this._standardSequence=0,this._customSequence=0}}class Ka{constructor(e){Lt(e)||(this.name=e.name||\"\",this.userIDList=e.userIDList||[],this.count=this.userIDList.length||0)}addToUserIDList(e){-1===this.userIDList.indexOf(e)&&(this.userIDList.push(e),this.count=this.userIDList.length)}removeFromUserIDList(e){const t=this.userIDList.indexOf(e);t>-1&&(this.userIDList.splice(t,1),this.count=this.userIDList.length)}}class Wa{constructor(e){this._snsModule=e,this._n=\"FriendGroupHandler\",this._friendGroupMap=new Map}getLocalFriendGroupList(){return[...this._friendGroupMap.values()]}_emitFriendGroupListUpdated(){const t=[...this._friendGroupMap.values()];this._snsModule.emitOuterEvent(e.FRIEND_GROUP_LIST_UPDATED,t)}getFriendGroupList(){const e=this._n+\".getFriendGroupList\",t=new Cn(\"getFriendGroupList\");return this._snsModule.request({protocolName:uo,requestData:{fromAccount:this._snsModule.getMyUserID()}}).then(s=>{t.setNetworkType(this._snsModule.getNetworkType()).end();const{resultList:o}=s.data;Lt(o)?_e.i(e+\" ok. friend group count:0\"):(_e.i(`${e} ok. friend group count:${o.length}`),this._friendGroupMap.clear(),o.forEach(e=>{const t=new Ka(e);this._friendGroupMap.set(e.name,t)}),this._emitFriendGroupListUpdated())}).catch(s=>(this._snsModule.probeNetwork().then(([e,o])=>{t.setError(s,e,o).end()}),_e.w(e+\" error:\",s),Vn(s)))}createFriendGroup(e){const t=this._n+\".createFriendGroup\",{name:s,userIDList:o}=e;if(this._friendGroupMap.has(s))return Vn({code:nn.FRIEND_GROUP_EXISTED});const i=new Cn(\"createFriendGroup\");return i.setMessage(`name:${s} userIDList:${o}`),this._snsModule.request({protocolName:co,requestData:{fromAccount:this._snsModule.getMyUserID(),groupName:[s],userIDList:be(o)?o:void 0}}).then(e=>{i.setNetworkType(this._snsModule.getNetworkType()).end(),_e.l(`${t} ok. name:${s} userIDList:${o}`);const{resultList:n}=e.data,r=[],a=[];n&&n.forEach(e=>{const{to:t,resultCode:s,resultInfo:o}=e;if(we(s)||0===s)r.push(t);else{const t={userID:e.to,code:s,message:o};a.push(t)}});const u=new Ka({name:s,userIDList:r});return this._friendGroupMap.set(s,u),this._snsModule.updateWhenAddedToFriendGroup({name:s,userIDList:r}),this._emitFriendGroupListUpdated(),wn({friendGroup:u,failureUserIDList:a})}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}deleteFriendGroup(e){const t=this._n+\".deleteFriendGroup\",{name:s}=e;if(!this._friendGroupMap.has(s))return Vn({code:nn.FRIEND_GROUP_NOT_EXIST});const o=new Cn(\"deleteFriendGroup\");o.setMessage(\"name:\"+s);return this._snsModule.request({protocolName:lo,requestData:{fromAccount:this._snsModule.getMyUserID(),nameList:[s]}}).then(e=>{o.setNetworkType(this._snsModule.getNetworkType()).end(),_e.l(`${t} ok. name:${s}`);const i=this._friendGroupMap.get(s);return i&&(this._snsModule.updateWhenRemovedFromFriendGroup({name:s,userIDList:i.userIDList}),this._friendGroupMap.delete(s),i.userIDList.length=0),this._emitFriendGroupListUpdated(),wn(i)}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{o.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}renameFriendGroup(e){const t=this._n+\".renameFriendGroup\",{oldName:s,newName:o}=e;if(!this._friendGroupMap.has(s))return Vn({code:nn.FRIEND_GROUP_NOT_EXIST});const i=new Cn(\"renameFriendGroup\");i.setMessage(`oldName:${s} newName:${o}`);return this._snsModule.request({protocolName:po,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:s,newName:o}}).then(()=>{if(i.setNetworkType(this._snsModule.getNetworkType()).end(),_e.l(`${t} ok. oldName:${s} newName:${o}`),this._friendGroupMap.has(s)){const e=this._friendGroupMap.get(s);return e.name=o,this._friendGroupMap.delete(s),this._friendGroupMap.set(o,e),this._snsModule.updateWhenRemovedFromFriendGroup({name:s,userIDList:e.userIDList}),this._snsModule.updateWhenAddedToFriendGroup({name:o,userIDList:e.userIDList}),this._emitFriendGroupListUpdated(),wn(e)}return wn()}).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}addToFriendGroup(e){const t=this._n+\".addToFriendGroup\",{name:s,userIDList:o}=e;if(!this._friendGroupMap.has(s))return this._onFriendGroupNotExist(s);const i=new Cn(\"addToFriendGroup\");i.setMessage(`name:${s} userIDList:${o}`),_e.l(`${t} name:${s} userIDList:${o}`);return this._snsModule.request({protocolName:po,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:s,updateGroupItem:o.filter(e=>this._snsModule.isMyFriend(e)).map(e=>({to:e,updateType:\"Update_Type_Add\"}))}}).then(e=>(i.setNetworkType(this._snsModule.getNetworkType()).end(),this._onFriendGroupUpdated(s,e))).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}removeFromFriendGroup(e){const t=this._n+\".removeFromFriendGroup\",{name:s,userIDList:o}=e;if(!this._friendGroupMap.has(s))return this._onFriendGroupNotExist(s);const i=new Cn(\"removeFromFriendGroup\");i.setMessage(`name:${s} userIDList:${o}`),_e.l(`${t} name:${s} userIDList:${o}`);return this._snsModule.request({protocolName:po,requestData:{fromAccount:this._snsModule.getMyUserID(),oldName:s,updateGroupItem:o.filter(e=>this._snsModule.isMyFriend(e)).map(e=>({to:e,updateType:\"Update_Type_Delete\"}))}}).then(e=>(i.setNetworkType(this._snsModule.getNetworkType()).end(),this._onFriendGroupUpdated(s,e))).catch(e=>(this._snsModule.probeNetwork().then(([t,s])=>{i.setError(e,t,s).end()}),_e.w(t+\" failed. error:\",e),Vn(e)))}_onFriendGroupUpdated(e,t){const{resultList:s}=t.data,o=this._friendGroupMap.get(e),i=[],n=[],r=[];return be(s)&&s.forEach(e=>{const{to:t,resultCode:s,resultInfo:a,type:u}=e;0===s?\"Update_Type_Add\"===u?o&&(o.addToUserIDList(t),n.push(t)):\"Update_Type_Delete\"===u&&o&&(o.removeFromUserIDList(t),r.push(t)):i.push({to:e.to,code:s,message:a})}),_e.l(`${this._n}._onFriendGroupUpdated name:${e} userIDList:${o.userIDList}`),n.length>0&&this._snsModule.updateWhenAddedToFriendGroup({name:e,userIDList:n}),r.length>0&&this._snsModule.updateWhenRemovedFromFriendGroup({name:e,userIDList:r}),wn({friendGroup:o,failureUserIDList:i})}updateWhenFriendAdded(e){const{nameList:t,userID:s}=e;_e.l(`${this._n}.updateWhenFriendAdded userID:${s} nameList:${t}`),Lt(t)||t.forEach(e=>{if(this._friendGroupMap.has(e)){this._friendGroupMap.get(e).addToUserIDList(s)}})}updateWhenFriendDeleted(e){const{nameList:t,userID:s}=e;_e.l(`${this._n}.updateWhenFriendDeleted userID:${s} nameList:${t}`),Lt(t)||t.forEach(e=>{if(this._friendGroupMap.has(e)){this._friendGroupMap.get(e).removeFromUserIDList(s)}})}reset(){this._friendGroupMap.clear()}}class Ya extends Fs{constructor(e){super(e),this._n=\"SnsModule\",this._friendHandler=new Ha(this),this._friendApplicationHandler=new Va(this),this._friendGroupHandler=new Wa(this);this.getInnerEmitterInstance().on(Kn,this.onContextUpdated,this)}onContextUpdated(e){this._friendHandler.pagingGetFriendList(),this._friendGroupHandler.getFriendGroupList(),this._friendApplicationHandler.getFriendApplicationList()}onRelationChainModified(e){const{dataList:t}=e;if(Lt(t))return;const s=[],o=[],i=[],n=[];let r=!1,a=\"\";t.forEach(e=>{if(3!==e.pushType&&4!==e.pushType||!e.from||(a=e.from),e.friendAddAccount&&(s.push(...e.friendAddAccount),n.push(...e.friendAddAccount)),e.friendDelAccount&&o.push(...e.friendDelAccount),e.friendApplicationAdded&&i.push(...e.friendApplicationAdded),e.friendApplicationDeletedUserIDList&&n.push(...e.friendApplicationDeletedUserIDList),e.reportTime&&7===e.pushType&&(r=!0),e.friendUpInfo){const t={dataList:[]};e.friendUpInfo.forEach(e=>{t.dataList.push({userID:e.friendAccount,profileList:[...e.sns]})}),this.onFriendProfileModified(t)}}),r&&this._friendApplicationHandler.onFriendApplicationRead(),this._friendApplicationHandler.onFriendApplicationAdded(i,a),this._friendApplicationHandler.onFriendApplicationDeleted(n),this._friendHandler.onFriendAdded(s),this._friendHandler.onFriendDeleted(o)}isMyFriend(e){return this._friendHandler.isMyFriend(e)}filterProfanity(e,t){const s=this.getModule(Us);if(!s)return!0;const{isAllowedToSend:o,modifiedText:i}=s.filterText(t[e],D);return!0===o&&(t[e]=i,!0)}onFriendProfileModified(e){this._friendHandler.onFriendProfileModified(e)}getLocalFriendList(e=!0){const t=this._friendHandler.getLocalFriendList();return e?xn(t):t}getFriendRemark(e){return this._friendHandler.getFriendRemark(e)}getFriendList(){return this._friendHandler.pagingGetFriendList()}addFriend(e){return this._friendHandler.addFriend(e)}deleteFriend(e){return this._friendHandler.deleteFriend(e)}checkFriend(e){return this._friendHandler.checkFriend(e)}getFriendProfile(e){return this._friendHandler.getFriendProfile(e)}updateFriend(e){return this._friendHandler.updateFriend(e)}updateWhenAddedToFriendGroup(e){this._friendHandler.updateWhenAddedToFriendGroup(e)}updateWhenRemovedFromFriendGroup(e){this._friendHandler.updateWhenRemovedFromFriendGroup(e)}getLocalFriendApplicationList(){const e=this._friendApplicationHandler.getLocalFriendApplicationList();return xn(e)}deleteFriendApplication(e){return this._friendApplicationHandler.deleteFriendApplication(e)}refuseFriendApplication(e){return this._friendApplicationHandler.refuseFriendApplication(e)}acceptFriendApplication(e){return this._friendApplicationHandler.acceptFriendApplication(e)}setFriendApplicationRead(e){return this._friendApplicationHandler.setFriendApplicationRead(e)}getLocalFriendGroupList(){const e=this._friendGroupHandler.getLocalFriendGroupList();return xn(e)}createFriendGroup(e){return this._friendGroupHandler.createFriendGroup(e)}deleteFriendGroup(e){return this._friendGroupHandler.deleteFriendGroup(e)}addToFriendGroup(e){return this._friendGroupHandler.addToFriendGroup(e)}removeFromFriendGroup(e){return this._friendGroupHandler.removeFromFriendGroup(e)}renameFriendGroup(e){return this._friendGroupHandler.renameFriendGroup(e)}onAddToFriendGroup(e){return this._friendGroupHandler.onAddToFriendGroup(e)}updateWhenFriendAdded(e){this._friendGroupHandler.updateWhenFriendAdded(e)}updateWhenFriendDeleted(e){this._friendGroupHandler.updateWhenFriendDeleted(e)}reset(){_e.l(this._n+\".reset\"),this._friendHandler.reset(),this._friendGroupHandler.reset(),this._friendApplicationHandler.reset()}}class ja extends Fs{constructor(e){super(e),this._n=\"WorkerTimerModule\",this._isWorkerEnabled=!0,this._workerTimer=null,this._timerID=-1,this._init();this.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}isWorkerEnabled(){return this._isWorkerEnabled&&Q}startWorkerTimer(){_e.l(this._n+\".startWorkerTimer\"),this._workerTimer&&this._workerTimer.postMessage(\"start\")}stopWorkerTimer(){_e.l(this._n+\".stopWorkerTimer\"),this._workerTimer&&this._workerTimer.postMessage(\"stop\")}_init(){if(Q){const e=URL.createObjectURL(new Blob(['let interval = -1;onmessage = function(event) {  if (event.data === \"start\") {    if (interval > 0) {      clearInterval(interval);    }    interval = setInterval(() => {      postMessage(\"\");    }, 1000);    postMessage(interval);  } else if (event.data === \"stop\") {    clearInterval(interval);    interval = -1;  }};'],{type:\"application/javascript; charset=utf-8\"}));this._workerTimer=new Worker(e);const t=this;this._workerTimer.onmessage=function(e){e.data?(t._timerID=e.data,_e.l(`${t._n}._init seed:${t._timerID}`)):t._m.onCheckTimer()}}}_onCloudConfigUpdated(){const e=this.getCloudConfig(\"enable_worker\");_e.l(`${this._n}._onCloudConfigUpdated enableWorker:${e}`),we(e)||\"1\"===e?!this._isWorkerEnabled&&Q&&(this._isWorkerEnabled=!0,this.startWorkerTimer(),this._m.onWorkerTimerEnabled()):this._isWorkerEnabled&&Q&&(this._isWorkerEnabled=!1,this.stopWorkerTimer(),this._m.onWorkerTimerDisabled())}terminate(){_e.l(this._n+\".terminate\"),this._workerTimer&&(this._workerTimer.terminate(),this._workerTimer=null,this._timerID=-1)}getTimerID(){return this._timerID}reset(){_e.l(this._n+\".reset\")}}class za{constructor(){this._n=\"PurchasedFeatureHandler\",this._purchasedFeatureMap=new Map}isValidPurchaseBits(e){return e&&\"string\"==typeof e&&e.length>=1&&e.length<=64&&/[01]{1,64}/.test(e)}parsePurchaseBits(e){if(this.isValidPurchaseBits(e)){this._purchasedFeatureMap.clear();let t=null;for(let s=e.length-1,i=0;s>=0;s--,i++)t=i<32?new o(0,Math.pow(2,i)).toString():new o(Math.pow(2,i-32),0).toString(),\"1\"===e[s]?this._purchasedFeatureMap.set(t,!0):this._purchasedFeatureMap.set(t,!1)}else _e.w(`${this._n}.parsePurchaseBits invalid purchasebits:${e}`)}hasPurchasedFeature(e){return!!this._purchasedFeatureMap.get(e)}isFeatureEnabled(e){const t=parseInt(e).toString(2);let s=void 0,i=!0;for(let n=t.length-1,r=0;n>=0;n--,r++)if(\"1\"===t.charAt(n)&&(s=r<32?new o(0,Math.pow(2,r)).toString():new o(Math.pow(2,r-32),0).toString(),!this._purchasedFeatureMap.get(s))){i=!1;break}return _e.l(`${this._n}.isFeatureEnabled decimalNumber:${e} binaryString:${t} ret:${i}`),xn({enabled:i})}clear(){this._purchasedFeatureMap.clear()}}class Ja{constructor(e){this._m=e,this._n=\"CommercialConfigModule\",this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler=new za}_canFetch(){return this._getModule(ms).isLoggedIn()?!this._isFetching&&Date.now()>=this._expiredTime:(this._expiredTime=Date.now()+2e3,!1)}onCheckTimer(e){this._canFetch()&&this.fetchConfig()}fetchConfig(){const e=this._canFetch(),t=this._n+\".fetchConfig\";if(_e.l(`${t} canFetch:${e}`),!e)return;const s=this._getModule(Is),o=new Cn(\"fetchCommercialConfig\");o.setNetworkType(s.getNetworkType());const i=this._getModule(ms).getSDKAppID(),n=this._getModule(Es);this._isFetching=!0,n.request({protocolName:Vi,requestData:{SDKAppID:i}}).then(e=>{o.setMessage(\"purchaseBits:\"+e.data.purchaseBits).end(),_e.l(t+\" ok.\"),this._parseConfig(e.data),this._isFetching=!1}).catch(e=>{s.probe().then(([t,s])=>{o.setError(e,t,s).end()}),this._isFetching=!1})}onPushedConfig(e){const t=`${this._n}.onPushedConfig data:${JSON.stringify(e)}`;_e.l(\"\"+t);new Cn(\"pushedCommercialConfig\").setNetworkType(this._getModule(Is).getNetworkType()).setMessage(\"purchaseBits:\"+e.purchaseBits).end(),this._parseConfig(e)}_parseConfig(e){const t=this._n+\"._parseConfig\",{errorCode:s,errorMessage:o,purchaseBits:i,expiredTime:n}=e;0===s?(this._purchasedFeatureHandler.parsePurchaseBits(i),this._expiredTime=Date.now()+1e3*n):we(s)?(_e.l(t+\" failed. Invalid message format:\",e),this._setExpiredTimeOnResponseError(36e5)):(_e.e(`${t} errorCode:${s} errorMessage:${o}`),this._setExpiredTimeOnResponseError(12e4))}_setExpiredTimeOnResponseError(e){this._expiredTime=Date.now()+e}canIUse(e){return this._purchasedFeatureHandler.hasPurchasedFeature(e)}isFeatureEnabled(e){return this._purchasedFeatureHandler.isFeatureEnabled(e)}_getModule(e){return this._m.getModule(e)}reset(){_e.l(this._n+\".reset\"),this._expiredTime=0,this._isFetching=!1,this._purchasedFeatureHandler.clear()}}class Xa extends Fs{constructor(e){super(e),this._m=e,this._n=\"OfflinePushModule\",this._offlinePushPlugin=void 0,this._androidPushConfig={huaweiPushBussinessId:\"\",xiaomiPushBussinessId:\"\",xiaomiPushAppId:\"\",xiaomiPushAppKey:\"\",meizuPushBussinessId:\"\",meizuPushAppId:\"\",meizuPushAppKey:\"\",vivoPushBussinessId:\"\",fcmPushBussinessId:\"\",oppoPushBussinessId:\"\",oppoPushAppKey:\"\",oppoPushAppSecret:\"\",honorPushBussinessId:\"\"},this._deviceToken=\"\",this._businessID=0,this._iosBusinessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0}registerPlugin(e){if(!U)return void this.outputWarning(\"OfflinePushInUniapp\");this._offlinePushPlugin=e[\"tim-offline-push-plugin\"];const{huaweiBusinessID:t,xiaomiBusinessID:s,xiaomiAppID:o,xiaomiAppKey:i,meizuBusinessID:n,meizuAppID:r,meizuAppKey:a,vivoBusinessID:u,oppoBusinessID:c,oppoAppKey:l,oppoAppSecret:d,honorBusinessID:p,iosBusinessID:h}=e.offlinePushConfig||{};this._androidPushConfig.huaweiPushBussinessId=t,this._androidPushConfig.xiaomiPushBussinessId=s,this._androidPushConfig.xiaomiPushAppId=o,this._androidPushConfig.xiaomiPushAppKey=i,this._androidPushConfig.meizuPushBussinessId=n,this._androidPushConfig.meizuPushAppId=r,this._androidPushConfig.meizuPushAppKey=a,this._androidPushConfig.vivoPushBussinessId=u,this._androidPushConfig.oppoPushBussinessId=c,this._androidPushConfig.oppoPushAppKey=l,this._androidPushConfig.oppoPushAppSecret=d,this._androidPushConfig.honorPushBussinessId=p;new Cn(\"registerPlugin\").setMessage(\"tim-offline-push-plugin\").setMoreMessage(\"isExist:\"+!we(this._offlinePushPlugin)).end(!0),_e.l(`${this._n}.registerPlugin ok. offlinePushConfig:${JSON.stringify(e.offlinePushConfig)}`),this._iosBusinessID=h,this._setAppShowListener()}init(){this._isWebUniapp=this.getUniAppPlatform(),this._getDeviceToken()}_getDeviceToken(){const e=this._n+\"._getDeviceToken\";if(!$e(this._offlinePushPlugin.getDeviceToken))return void _e.e(e+\" getDeviceToken is not a function\");let t=`androidPushConfig:${JSON.stringify(this._androidPushConfig)}, iosBusinessID:${this._iosBusinessID}`;_e.l(`${e} start. ${t}`);new Cn(\"_getDeviceToken\").setMessage(\"\"+t).end(!0),this._offlinePushPlugin.getDeviceToken(this._androidPushConfig,s=>{const o=new Cn(\"getDeviceTokenRes\"),{code:i,msg:n}=s;if(0===i){const{deviceToken:i,deviceBrand:n,deviceType:r,bussinessId:a}=s.data;this._deviceToken=i,this._businessID=a||this._iosBusinessID,t=`deviceToken:${i}, deviceBrand:${n||r}, businessID:${this._businessID}`,_e.l(`${e} ok. ${t}`),o.setMessage(t).end(!0),this._setToken()}else o.setMessage(`code:${i}, msg:${n}`).end(!0),_e.e(e+\" failed. error:\",s)})}canIUseOfflinePush(){return U&&!we(this._offlinePushPlugin)}_setAppShowListener(){const e=this._n+\"._setAppShowListener\";if(we(this._offlinePushPlugin))return void _e.e(e+\" offlinePushPlugin is undefined\");if(!$e(this._offlinePushPlugin.setAppShowListener))return void _e.e(e+\" setAppShowListener is not a function\");new Cn(\"_setAppShowListener\").end(!0),_e.l(e+\" start\"),this._offlinePushPlugin.setAppShowListener(t=>{const{appShow:s}=t||{};new Cn(\"setAppShowListenerRes\").setMessage(\"appShow:\"+s).end(!0),_e.l(`${e} ok. appShow:${s}`),this._m.isReady()&&(0===s?(this._getConvUnreadCount(),this._onBackground()):1===s&&this._onForeground())})}getDeviceBrand(){if(!we(this._offlinePushPlugin)&&$e(this._offlinePushPlugin.getDeviceType)){const{deviceType:e}=this._offlinePushPlugin.getDeviceType()||{};return _e.l(`${this._n}.getDeviceBrand ok. deviceType:${e}`),e}}_setToken(){const e=this._n+\"._setToken\",t=this.getModule(ms);let s=\"\",o=1,i=\"\",r=\"\";Lt(this._deviceToken)&&(o=0);const a=this.getUniAppPlatform(),u=this.getDeviceBrand();a===n.IOS||a===n.IPAD||a===n.MAC?r=this._deviceToken:a===n.ANDROID&&(i=this._deviceToken);const c=new Cn(\"offlinePushSetToken\");return s=`deviceToken:${r||i}, businessID:${this._businessID}, deviceBrand:${u}, isWebUniapp:${this._isWebUniapp}, pushMsg:${o}, platform:${a}`,c.setMessage(\"\"+s),_e.l(`${e} ${s}`),this.request({protocolName:tn,requestData:{tokenID:i,pushMsg:o,sdkAppID:t.getSDKAppID(),businessID:parseInt(this._businessID),deviceBrand:u,deviceToken:r,isWebUniapp:this._isWebUniapp}}).then(t=>(c.end(),_e.l(e+\" ok\"),t)).catch(t=>(this.probeNetwork().then(([e,s])=>{c.setError(t,e,s).end()}),_e.e(e+\" failed. error:\",t),Vn(t)))}_getConvUnreadCount(){this._c2cUnreadCount=0,this._groupUnreadCount=0;this.getModule(_s).getLocalConversationList().forEach(e=>{e.type===t.CONV_C2C&&(this._c2cUnreadCount+=e.unreadCount),e.type===t.CONV_GROUP&&(this._groupUnreadCount+=e.unreadCount)})}_onBackground(){const e=this._n+\"._onBackground\",t=new Cn(\"_onBackground\");this.request({protocolName:Qi,requestData:{c2cUnreadCount:this._c2cUnreadCount,groupUnreadCount:this._groupUnreadCount,isWebUniapp:this._isWebUniapp}}).then(s=>(t.setMessage(`c2cUnreadCount: ${this._c2cUnreadCount}, groupUnreadCount: ${this._groupUnreadCount}`).end(),_e.l(e+\" ok\"),s)).catch(s=>{this.probeNetwork().then(([e,o])=>{t.setError(s,e,o).end()}),_e.e(e+\" failed. error:\",s)})}_onForeground(){const e=this._n+\"._onForeground\",t=new Cn(\"_onForeground\");this.request({protocolName:en,requestData:{isWebUniapp:this._isWebUniapp}}).then(s=>(t.end(),_e.l(e+\" ok\"),s)).catch(s=>{this.probeNetwork().then(([e,o])=>{t.setError(s,e,o).end()}),_e.e(e+\" failed. error:\",s)})}getUniAppPlatform(){const e=uni.getSystemInfoSync().platform,t=this.getDeviceBrand();return\"ios\"===e?n.IOS:\"android\"===e?n.ANDROID:1002===t?n.IPAD:1001===t?n.MAC:void 0}reset(){this._deviceToken=\"\",this._businessID=0,this._c2cUnreadCount=0,this._groupUnreadCount=0,this._isWebUniapp=0,_e.l(this._n+\".reset\")}}class Za extends Fs{constructor(e){super(e),this._n=\"ProfanityFilterModule\",this._plugin=null,this._filterConfigMap=new Map,this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}init(){const e=this.getModule(ys).getPlugin(\"tim-profanity-filter-plugin\");e?(this._plugin=new e({logger:_e,isArray:be,isMap:Re,isDevMode:this.isDevMode()}),this._getLexicon()):this.outputWarning(\"ProfanityPluginNotFound\")}onCheckTimer(){this._plugin&&this._canIUseLexicon&&this.isLoggedIn()&&!this._isFetching&&Date.now()>=this._expiredTime&&this._getLexicon()}filterMessage(e,s){let o=!0;if(!this._plugin||!this._canIUseLexicon)return o;if(s&&s.messageControlInfo&&!0===s.messageControlInfo.excludedFromContentModeration)return o;const{type:i,conversationType:n}=e;if(i!==t.MSG_TEXT&&i!==t.MSG_CUSTOM)return o;const r=this._n+\".filterMessage\";let a;if(_e.l(\"\"+r),i===t.MSG_TEXT){if(n===t.CONV_C2C?a=f:n===t.CONV_GROUP&&(a=C),!this._isConfigOn(a))return o;const{type:s,modifiedText:i}=this._plugin.filter(e.payload.text);1===s?o=!1:2===s&&(e.payload.text=i)}else if(i===t.MSG_CUSTOM){if(n===t.CONV_C2C?a=I:n===t.CONV_GROUP&&(a=T),!this._isConfigOn(a))return o;const s=this._plugin.filter(e.payload.data),i=this._plugin.filter(e.payload.description),r=this._plugin.filter(e.payload.extension);1===s.type||1===i.type||1===r.type?o=!1:(2===s.type&&(e.payload.data=s.modifiedText),2===i.type&&(e.payload.description=i.modifiedText),2===r.type&&(e.payload.extension=r.modifiedText))}return _e.l(`${r} done. isAllowedToSend:${o}`),o}filterText(e,t){const s=this._n+\".filterText\",o={isAllowedToSend:!0,modifiedText:e};if(!this._plugin||!this._canIUseLexicon)return o;if(!this._isConfigOn(t))return o;_e.l(\"\"+s);const{type:i,modifiedText:n}=this._plugin.filter(e);return 1===i?o.isAllowedToSend=!1:2===i&&(o.modifiedText=n),_e.l(s+\" done. ret:\",o),o}_getLexicon(){const e=new Cn(\"profanityFilter\"),t=this._n+\"._getLexicon\";this._isFetching=!0,this.request({protocolName:sn,requestData:{startIndex:this._startIndex,version:this._version}}).then(s=>{const{errorInfo:o,filterConfig:i,lexicon:n,strToken:r,completeFlag:a,nextStartIndex:u,version:c,expiredTime:l}=s.data,{errorCode:d,errorMessage:p}=o;return 0!==d?(this._isFetching=!1,_e.w(t+\" failed. error:\",o),void e.setCode(d).setMessage(p).end()):(this._onFilterConfig(i),this._getToken(r),1===a?(_e.l(`${t} done. version:${c} expiredTime:${l}`),this._version=c,this._canIUseLexicon=!0,this._isFetching=!1,this._expiredTime=Date.now()+1e3*l,void this._plugin.onLexiconCompleted(n)):(this._startIndex=u,this._plugin.onLexiconSliced(n),void this._getLexicon()))}).catch(s=>{this.probeNetwork().then(([t,o])=>{e.setError(s,t,o).end()}),this._isFetching=!1,_e.l(t+\" failed. error:\",s)})}_onFilterConfig(e){Lt(e)||(this._filterConfigMap.clear(),Object.keys(e).forEach(t=>{this._filterConfigMap.set(t,e[t])}),_e.l(`${this._n}._onFilterConfig. keys:${Array.from(this._filterConfigMap.keys())} values:${Array.from(this._filterConfigMap.values())}`))}_isConfigOn(e){return 1===this._filterConfigMap.get(e)}_getToken(e){if(!Ue(e))return;const t=e.length;let s=\"\";if(t%2==0)for(let o=0;o<=t-1;o+=2)s+=e[o+1],s+=e[o];else{for(let o=0;o<t-1;o+=2)s+=e[o+1],s+=e[o];s+=e[t-1]}this._plugin.onToken(s)}reset(){_e.l(this._n+\".reset\"),this._plugin&&(this._plugin.reset(),this._plugin=null),this._filterConfigMap.clear(),this._startIndex=0,this._version=0,this._canIUseLexicon=!1,this._isFetching=!1,this._expiredTime=0}}class Qa{constructor(e){this._m=e,this._n=\"TransCmdModule\",this._TRTCCommandList=[\"tui_room_svr.*\"];this._m.getInnerEmitterInstance().on(Wn,this._onCloudConfigUpdated,this)}_onCloudConfigUpdated(){let e=this._m.getModule(As).getCloudConfig(\"rtc_cmd\");we(e)||(e=JSON.parse(e),e.forEach(e=>{this._TRTCCommandList.includes(e)||this._TRTCCommandList.push(e)}))}sendTRTCCustomData(e){const{serviceCommand:t,data:s}=e;let o=m.NAME.TUIROOM_SVR+\".*\";return we(t)||(o=t),this._TRTCCommandList.includes(o)?this._trans({servcmd:o,data:s}):Vn({code:nn.INVALID_TRTC_CMD})}_trans(e){_e.d(`${this._n}._trans. options:${JSON.stringify(e)}`);const{servcmd:t,data:s}=e;return this._m.getModule(Es).trans({servcmd:t,data:Ue(s)?JSON.parse(s):s})}getCommandList(){return this._TRTCCommandList}reset(){_e.l(this._n+\".reset\")}}class eu{constructor(e){this._m=e,this._n=\"ErrorMessageModule\",this.TIM_ERROR_ASSISTANCE=\"tim_error_assistance\",this.STORAGE_EXPIRES_TIME=6048e5,this._map=new Map,this._init()}_init(){const e=this._getStorageModule().getItem(this.TIM_ERROR_ASSISTANCE,!1);if(!e)return void this._fetch();let t;try{t=JSON.parse(e)}catch(s){this._getStorageModule().removeItem(this.TIM_ERROR_ASSISTANCE,!1),_e.w(this._n+\"._init error:\",s)}t&&(this._needToUpdate(t)?this._fetch():this._fillMap(t.message))}_needToUpdate(e){const{localSavedTime:t,localSavedVersion:s}=e,o=t&&(new Date).getTime()-t>=this.STORAGE_EXPIRES_TIME,i=!s||\"2.27.6\"!==s;return _e.l(`${this._n}._needToUpdate isTimeout:${o} isDifferentVersion:${i}`),o||i}_fetch(){if(this._m.getModule(ms).isPrivateNetWork())return;const e=\"https://web.sdk.qcloud.com/im/download/error-message/0.0.1/tim-error-message.txt\",t=\"application/x-www-form-urlencoded;charset=UTF-8\",s=this._n+\"._fetch ok in\",o=this;if(P)w.request({url:e,method:\"GET\",timeout:3e3,header:{\"content-type\":t},dataType:\"text\",success:e=>{o._fillAndSave(e.data),_e.l(s+\" mini program\")},fail:()=>{}});else{const i=new XMLHttpRequest,n=setTimeout(()=>{i.abort()},3e3);i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(n),200!==i.status&&304!==i.status||(_e.l(s+\" browser\"),o._fillAndSave(i.responseText)))},i.open(\"GET\",e,!0),i.setRequestHeader(\"Content-type\",t),i.send()}}_fillAndSave(e){this._fillMap(e),this._getStorageModule().setItem(this.TIM_ERROR_ASSISTANCE,JSON.stringify({message:e,localSavedTime:(new Date).getTime(),localSavedVersion:\"2.27.6\"}),!0,!1)}_getStorageModule(){return this._m.getModule(Ms)}_fillMap(e){this._map.clear();const t=e.split(\";\\n\"),s=t.length;let o,i,n;const r=new RegExp(/'/g);for(let a=0;a<s;a++)if(o=t[a].indexOf(\":\"),i=t[a].slice(0,o),n=t[a].slice(o+1,t[a].length),!i.startsWith(\"//\")){if(we(n))continue;this._map.set(i,n.replace(r,\"\"))}}get(e){const{isIntl:t,key:s,replacement1:o,replacement2:i}=e;let n=t?s+\"_en\":s+\"_cn\";!this._map.has(n)&&this._map.has(s)&&(n=s);let r=\"\";return this._map.has(n)?(r=this._map.get(n),we(o)||(r=r.replace(\"$replacement1\",o)),we(i)||(r=r.replace(\"$replacement2\",i)),r):r}reset(){_e.l(this._n+\".reset\")}}var tu=Qr((function(e,t){var s=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var s=t.shift();if(s){if(\"object\"!=typeof s)throw new TypeError(s+\"must be non-object\");for(var i in s)o(s,i)&&(e[i]=s[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,s,o,i){if(t.subarray&&e.subarray)e.set(t.subarray(s,s+o),i);else for(var n=0;n<o;n++)e[i+n]=t[s+n]},flattenChunks:function(e){var t,s,o,i,n,r;for(o=0,t=0,s=e.length;t<s;t++)o+=e[t].length;for(r=new Uint8Array(o),i=0,t=0,s=e.length;t<s;t++)n=e[t],r.set(n,i),i+=n.length;return r}},n={arraySet:function(e,t,s,o,i){for(var n=0;n<o;n++)e[i+n]=t[s+n]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,n))},t.setTyped(s)}));tu.assign,tu.shrinkBuf,tu.setTyped,tu.Buf8,tu.Buf16,tu.Buf32;var su=function(e,t,s,o){for(var i=65535&e|0,n=e>>>16&65535|0,r=0;0!==s;){s-=r=s>2e3?2e3:s;do{n=n+(i=i+t[o++]|0)|0}while(--r);i%=65521,n%=65521}return i|n<<16|0};var ou=function(){for(var e,t=[],s=0;s<256;s++){e=s;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t}();var iu=function(e,t,s,o){var i=ou,n=o+s;e^=-1;for(var r=o;r<n;r++)e=e>>>8^i[255&(e^t[r])];return-1^e},nu=function(e,t){var s,o,i,n,r,a,u,c,l,d,p,h,g,_,m,M,f,I,C,T,y,D,E,S,L;s=e.state,o=e.next_in,S=e.input,i=o+(e.avail_in-5),n=e.next_out,L=e.output,r=n-(t-e.avail_out),a=n+(e.avail_out-257),u=s.dmax,c=s.wsize,l=s.whave,d=s.wnext,p=s.window,h=s.hold,g=s.bits,_=s.lencode,m=s.distcode,M=(1<<s.lenbits)-1,f=(1<<s.distbits)-1;e:do{g<15&&(h+=S[o++]<<g,g+=8,h+=S[o++]<<g,g+=8),I=_[h&M];t:for(;;){if(h>>>=C=I>>>24,g-=C,0===(C=I>>>16&255))L[n++]=65535&I;else{if(!(16&C)){if(0==(64&C)){I=_[(65535&I)+(h&(1<<C)-1)];continue t}if(32&C){s.mode=12;break e}e.msg=\"invalid literal/length code\",s.mode=30;break e}T=65535&I,(C&=15)&&(g<C&&(h+=S[o++]<<g,g+=8),T+=h&(1<<C)-1,h>>>=C,g-=C),g<15&&(h+=S[o++]<<g,g+=8,h+=S[o++]<<g,g+=8),I=m[h&f];s:for(;;){if(h>>>=C=I>>>24,g-=C,!(16&(C=I>>>16&255))){if(0==(64&C)){I=m[(65535&I)+(h&(1<<C)-1)];continue s}e.msg=\"invalid distance code\",s.mode=30;break e}if(y=65535&I,g<(C&=15)&&(h+=S[o++]<<g,(g+=8)<C&&(h+=S[o++]<<g,g+=8)),(y+=h&(1<<C)-1)>u){e.msg=\"invalid distance too far back\",s.mode=30;break e}if(h>>>=C,g-=C,y>(C=n-r)){if((C=y-C)>l&&s.sane){e.msg=\"invalid distance too far back\",s.mode=30;break e}if(D=0,E=p,0===d){if(D+=c-C,C<T){T-=C;do{L[n++]=p[D++]}while(--C);D=n-y,E=L}}else if(d<C){if(D+=c+d-C,(C-=d)<T){T-=C;do{L[n++]=p[D++]}while(--C);if(D=0,d<T){T-=C=d;do{L[n++]=p[D++]}while(--C);D=n-y,E=L}}}else if(D+=d-C,C<T){T-=C;do{L[n++]=p[D++]}while(--C);D=n-y,E=L}for(;T>2;)L[n++]=E[D++],L[n++]=E[D++],L[n++]=E[D++],T-=3;T&&(L[n++]=E[D++],T>1&&(L[n++]=E[D++]))}else{D=n-y;do{L[n++]=L[D++],L[n++]=L[D++],L[n++]=L[D++],T-=3}while(T>2);T&&(L[n++]=L[D++],T>1&&(L[n++]=L[D++]))}break}}break}}while(o<i&&n<a);o-=T=g>>3,h&=(1<<(g-=T<<3))-1,e.next_in=o,e.next_out=n,e.avail_in=o<i?i-o+5:5-(o-i),e.avail_out=n<a?a-n+257:257-(n-a),s.hold=h,s.bits=g},ru=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],au=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],uu=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],cu=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],lu=function(e,t,s,o,i,n,r,a){var u,c,l,d,p,h,g,_,m,M=a.bits,f=0,I=0,C=0,T=0,y=0,D=0,E=0,S=0,L=0,A=0,v=null,N=0,R=new tu.Buf16(16),O=new tu.Buf16(16),G=null,U=0;for(f=0;f<=15;f++)R[f]=0;for(I=0;I<o;I++)R[t[s+I]]++;for(y=M,T=15;T>=1&&0===R[T];T--);if(y>T&&(y=T),0===T)return i[n++]=20971520,i[n++]=20971520,a.bits=1,0;for(C=1;C<T&&0===R[C];C++);for(y<C&&(y=C),S=1,f=1;f<=15;f++)if(S<<=1,(S-=R[f])<0)return-1;if(S>0&&(0===e||1!==T))return-1;for(O[1]=0,f=1;f<15;f++)O[f+1]=O[f]+R[f];for(I=0;I<o;I++)0!==t[s+I]&&(r[O[t[s+I]]++]=I);if(0===e?(v=G=r,h=19):1===e?(v=ru,N-=257,G=au,U-=257,h=256):(v=uu,G=cu,h=-1),A=0,I=0,f=C,p=n,D=y,E=0,l=-1,d=(L=1<<y)-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){g=f-E,r[I]<h?(_=0,m=r[I]):r[I]>h?(_=G[U+r[I]],m=v[N+r[I]]):(_=96,m=0),u=1<<f-E,C=c=1<<D;do{i[p+(A>>E)+(c-=u)]=g<<24|_<<16|m|0}while(0!==c);for(u=1<<f-1;A&u;)u>>=1;if(0!==u?(A&=u-1,A+=u):A=0,I++,0==--R[f]){if(f===T)break;f=t[s+r[I]]}if(f>y&&(A&d)!==l){for(0===E&&(E=y),p+=C,S=1<<(D=f-E);D+E<T&&!((S-=R[D+E])<=0);)D++,S<<=1;if(L+=1<<D,1===e&&L>852||2===e&&L>592)return 1;i[l=A&d]=y<<24|D<<16|p-n|0}}return 0!==A&&(i[p+A]=f-E<<24|64<<16|0),a.bits=y,0};function du(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function pu(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new tu.Buf16(320),this.work=new tu.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function hu(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new tu.Buf32(852),t.distcode=t.distdyn=new tu.Buf32(592),t.sane=1,t.back=-1,0):-2}function gu(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,hu(e)):-2}function _u(e,t){var s,o;return e&&e.state?(o=e.state,t<0?(s=0,t=-t):(s=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=s,o.wbits=t,gu(e))):-2}function mu(e,t){var s,o;return e?(o=new pu,e.state=o,o.window=null,0!==(s=_u(e,t))&&(e.state=null),s):-2}var Mu,fu,Iu=!0;function Cu(e){if(Iu){var t;for(Mu=new tu.Buf32(512),fu=new tu.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(lu(1,e.lens,0,288,Mu,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;lu(2,e.lens,0,32,fu,0,e.work,{bits:5}),Iu=!1}e.lencode=Mu,e.lenbits=9,e.distcode=fu,e.distbits=5}function Tu(e,t,s,o){var i,n=e.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new tu.Buf8(n.wsize)),o>=n.wsize?(tu.arraySet(n.window,t,s-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):((i=n.wsize-n.wnext)>o&&(i=o),tu.arraySet(n.window,t,s-o,i,n.wnext),(o-=i)?(tu.arraySet(n.window,t,s-o,o,0),n.wnext=o,n.whave=n.wsize):(n.wnext+=i,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=i))),0}var yu={inflateReset:gu,inflateReset2:_u,inflateResetKeep:hu,inflateInit:function(e){return mu(e,15)},inflateInit2:mu,inflate:function(e,t){var s,o,i,n,r,a,u,c,l,d,p,h,g,_,m,M,f,I,C,T,y,D,E,S,L=0,A=new tu.Buf8(4),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(s=e.state).mode&&(s.mode=13),r=e.next_out,i=e.output,u=e.avail_out,n=e.next_in,o=e.input,a=e.avail_in,c=s.hold,l=s.bits,d=a,p=u,D=0;e:for(;;)switch(s.mode){case 1:if(0===s.wrap){s.mode=13;break}for(;l<16;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(2&s.wrap&&35615===c){s.check=0,A[0]=255&c,A[1]=c>>>8&255,s.check=iu(s.check,A,2,0),c=0,l=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg=\"incorrect header check\",s.mode=30;break}if(8!=(15&c)){e.msg=\"unknown compression method\",s.mode=30;break}if(l-=4,y=8+(15&(c>>>=4)),0===s.wbits)s.wbits=y;else if(y>s.wbits){e.msg=\"invalid window size\",s.mode=30;break}s.dmax=1<<y,e.adler=s.check=1,s.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(s.flags=c,8!=(255&s.flags)){e.msg=\"unknown compression method\",s.mode=30;break}if(57344&s.flags){e.msg=\"unknown header flags set\",s.mode=30;break}s.head&&(s.head.text=c>>8&1),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=iu(s.check,A,2,0)),c=0,l=0,s.mode=3;case 3:for(;l<32;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.head&&(s.head.time=c),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,s.check=iu(s.check,A,4,0)),c=0,l=0,s.mode=4;case 4:for(;l<16;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.head&&(s.head.xflags=255&c,s.head.os=c>>8),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=iu(s.check,A,2,0)),c=0,l=0,s.mode=5;case 5:if(1024&s.flags){for(;l<16;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.length=c,s.head&&(s.head.extra_len=c),512&s.flags&&(A[0]=255&c,A[1]=c>>>8&255,s.check=iu(s.check,A,2,0)),c=0,l=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&((h=s.length)>a&&(h=a),h&&(s.head&&(y=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),tu.arraySet(s.head.extra,o,n,h,y)),512&s.flags&&(s.check=iu(s.check,o,h,n)),a-=h,n+=h,s.length-=h),s.length))break e;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(0===a)break e;h=0;do{y=o[n+h++],s.head&&y&&s.length<65536&&(s.head.name+=String.fromCharCode(y))}while(y&&h<a);if(512&s.flags&&(s.check=iu(s.check,o,h,n)),a-=h,n+=h,y)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(0===a)break e;h=0;do{y=o[n+h++],s.head&&y&&s.length<65536&&(s.head.comment+=String.fromCharCode(y))}while(y&&h<a);if(512&s.flags&&(s.check=iu(s.check,o,h,n)),a-=h,n+=h,y)break e}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;l<16;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(c!==(65535&s.check)){e.msg=\"header crc mismatch\",s.mode=30;break}c=0,l=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=12;break;case 10:for(;l<32;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}e.adler=s.check=du(c),c=0,l=0,s.mode=11;case 11:if(0===s.havedict)return e.next_out=r,e.avail_out=u,e.next_in=n,e.avail_in=a,s.hold=c,s.bits=l,2;e.adler=s.check=1,s.mode=12;case 12:if(5===t||6===t)break e;case 13:if(s.last){c>>>=7&l,l-=7&l,s.mode=27;break}for(;l<3;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}switch(s.last=1&c,l-=1,3&(c>>>=1)){case 0:s.mode=14;break;case 1:if(Cu(s),s.mode=20,6===t){c>>>=2,l-=2;break e}break;case 2:s.mode=17;break;case 3:e.msg=\"invalid block type\",s.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg=\"invalid stored block lengths\",s.mode=30;break}if(s.length=65535&c,c=0,l=0,s.mode=15,6===t)break e;case 15:s.mode=16;case 16:if(h=s.length){if(h>a&&(h=a),h>u&&(h=u),0===h)break e;tu.arraySet(i,o,n,h,r),a-=h,n+=h,u-=h,r+=h,s.length-=h;break}s.mode=12;break;case 17:for(;l<14;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(s.nlen=257+(31&c),c>>>=5,l-=5,s.ndist=1+(31&c),c>>>=5,l-=5,s.ncode=4+(15&c),c>>>=4,l-=4,s.nlen>286||s.ndist>30){e.msg=\"too many length or distance symbols\",s.mode=30;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;l<3;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.lens[v[s.have++]]=7&c,c>>>=3,l-=3}for(;s.have<19;)s.lens[v[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,E={bits:s.lenbits},D=lu(0,s.lens,0,19,s.lencode,0,s.work,E),s.lenbits=E.bits,D){e.msg=\"invalid code lengths set\",s.mode=30;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;M=(L=s.lencode[c&(1<<s.lenbits)-1])>>>16&255,f=65535&L,!((m=L>>>24)<=l);){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(f<16)c>>>=m,l-=m,s.lens[s.have++]=f;else{if(16===f){for(S=m+2;l<S;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(c>>>=m,l-=m,0===s.have){e.msg=\"invalid bit length repeat\",s.mode=30;break}y=s.lens[s.have-1],h=3+(3&c),c>>>=2,l-=2}else if(17===f){for(S=m+3;l<S;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}l-=m,y=0,h=3+(7&(c>>>=m)),c>>>=3,l-=3}else{for(S=m+7;l<S;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}l-=m,y=0,h=11+(127&(c>>>=m)),c>>>=7,l-=7}if(s.have+h>s.nlen+s.ndist){e.msg=\"invalid bit length repeat\",s.mode=30;break}for(;h--;)s.lens[s.have++]=y}}if(30===s.mode)break;if(0===s.lens[256]){e.msg=\"invalid code -- missing end-of-block\",s.mode=30;break}if(s.lenbits=9,E={bits:s.lenbits},D=lu(1,s.lens,0,s.nlen,s.lencode,0,s.work,E),s.lenbits=E.bits,D){e.msg=\"invalid literal/lengths set\",s.mode=30;break}if(s.distbits=6,s.distcode=s.distdyn,E={bits:s.distbits},D=lu(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,E),s.distbits=E.bits,D){e.msg=\"invalid distances set\",s.mode=30;break}if(s.mode=20,6===t)break e;case 20:s.mode=21;case 21:if(a>=6&&u>=258){e.next_out=r,e.avail_out=u,e.next_in=n,e.avail_in=a,s.hold=c,s.bits=l,nu(e,p),r=e.next_out,i=e.output,u=e.avail_out,n=e.next_in,o=e.input,a=e.avail_in,c=s.hold,l=s.bits,12===s.mode&&(s.back=-1);break}for(s.back=0;M=(L=s.lencode[c&(1<<s.lenbits)-1])>>>16&255,f=65535&L,!((m=L>>>24)<=l);){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(M&&0==(240&M)){for(I=m,C=M,T=f;M=(L=s.lencode[T+((c&(1<<I+C)-1)>>I)])>>>16&255,f=65535&L,!(I+(m=L>>>24)<=l);){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}c>>>=I,l-=I,s.back+=I}if(c>>>=m,l-=m,s.back+=m,s.length=f,0===M){s.mode=26;break}if(32&M){s.back=-1,s.mode=12;break}if(64&M){e.msg=\"invalid literal/length code\",s.mode=30;break}s.extra=15&M,s.mode=22;case 22:if(s.extra){for(S=s.extra;l<S;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.length+=c&(1<<s.extra)-1,c>>>=s.extra,l-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;M=(L=s.distcode[c&(1<<s.distbits)-1])>>>16&255,f=65535&L,!((m=L>>>24)<=l);){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(0==(240&M)){for(I=m,C=M,T=f;M=(L=s.distcode[T+((c&(1<<I+C)-1)>>I)])>>>16&255,f=65535&L,!(I+(m=L>>>24)<=l);){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}c>>>=I,l-=I,s.back+=I}if(c>>>=m,l-=m,s.back+=m,64&M){e.msg=\"invalid distance code\",s.mode=30;break}s.offset=f,s.extra=15&M,s.mode=24;case 24:if(s.extra){for(S=s.extra;l<S;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}s.offset+=c&(1<<s.extra)-1,c>>>=s.extra,l-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg=\"invalid distance too far back\",s.mode=30;break}s.mode=25;case 25:if(0===u)break e;if(h=p-u,s.offset>h){if((h=s.offset-h)>s.whave&&s.sane){e.msg=\"invalid distance too far back\",s.mode=30;break}h>s.wnext?(h-=s.wnext,g=s.wsize-h):g=s.wnext-h,h>s.length&&(h=s.length),_=s.window}else _=i,g=r-s.offset,h=s.length;h>u&&(h=u),u-=h,s.length-=h;do{i[r++]=_[g++]}while(--h);0===s.length&&(s.mode=21);break;case 26:if(0===u)break e;i[r++]=s.length,u--,s.mode=21;break;case 27:if(s.wrap){for(;l<32;){if(0===a)break e;a--,c|=o[n++]<<l,l+=8}if(p-=u,e.total_out+=p,s.total+=p,p&&(e.adler=s.check=s.flags?iu(s.check,i,p,r-p):su(s.check,i,p,r-p)),p=u,(s.flags?c:du(c))!==s.check){e.msg=\"incorrect data check\",s.mode=30;break}c=0,l=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;l<32;){if(0===a)break e;a--,c+=o[n++]<<l,l+=8}if(c!==(4294967295&s.total)){e.msg=\"incorrect length check\",s.mode=30;break}c=0,l=0}s.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=r,e.avail_out=u,e.next_in=n,e.avail_in=a,s.hold=c,s.bits=l,(s.wsize||p!==e.avail_out&&s.mode<30&&(s.mode<27||4!==t))&&Tu(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,s.total+=p,s.wrap&&p&&(e.adler=s.check=s.flags?iu(s.check,i,p,e.next_out-p):su(s.check,i,p,e.next_out-p)),e.data_type=s.bits+(s.last?64:0)+(12===s.mode?128:0)+(20===s.mode||15===s.mode?256:0),(0===d&&0===p||4===t)&&0===D&&(D=-5),D},inflateEnd:function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},inflateGetHeader:function(e,t){var s;return e&&e.state?0==(2&(s=e.state).wrap)?-2:(s.head=t,t.done=!1,0):-2},inflateSetDictionary:function(e,t){var s,o=t.length;return e&&e.state?0!==(s=e.state).wrap&&11!==s.mode?-2:11===s.mode&&su(1,t,o,0)!==s.check?-3:Tu(e,t,o,o)?(s.mode=31,-4):(s.havedict=1,0):-2},inflateInfo:\"pako inflate (from Nodeca project)\"},Du=!0,Eu=!0;try{String.fromCharCode.apply(null,[0])}catch(Ju){Du=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Ju){Eu=!1}for(var Su=new tu.Buf8(256),Lu=0;Lu<256;Lu++)Su[Lu]=Lu>=252?6:Lu>=248?5:Lu>=240?4:Lu>=224?3:Lu>=192?2:1;Su[254]=Su[254]=1;function Au(e,t){if(t<65534&&(e.subarray&&Eu||!e.subarray&&Du))return String.fromCharCode.apply(null,tu.shrinkBuf(e,t));for(var s=\"\",o=0;o<t;o++)s+=String.fromCharCode(e[o]);return s}var vu=function(e){var t,s,o,i,n,r=e.length,a=0;for(i=0;i<r;i++)55296==(64512&(s=e.charCodeAt(i)))&&i+1<r&&56320==(64512&(o=e.charCodeAt(i+1)))&&(s=65536+(s-55296<<10)+(o-56320),i++),a+=s<128?1:s<2048?2:s<65536?3:4;for(t=new tu.Buf8(a),n=0,i=0;n<a;i++)55296==(64512&(s=e.charCodeAt(i)))&&i+1<r&&56320==(64512&(o=e.charCodeAt(i+1)))&&(s=65536+(s-55296<<10)+(o-56320),i++),s<128?t[n++]=s:s<2048?(t[n++]=192|s>>>6,t[n++]=128|63&s):s<65536?(t[n++]=224|s>>>12,t[n++]=128|s>>>6&63,t[n++]=128|63&s):(t[n++]=240|s>>>18,t[n++]=128|s>>>12&63,t[n++]=128|s>>>6&63,t[n++]=128|63&s);return t},Nu=function(e){for(var t=new tu.Buf8(e.length),s=0,o=t.length;s<o;s++)t[s]=e.charCodeAt(s);return t},Ru=function(e,t){var s,o,i,n,r=t||e.length,a=new Array(2*r);for(o=0,s=0;s<r;)if((i=e[s++])<128)a[o++]=i;else if((n=Su[i])>4)a[o++]=65533,s+=n-1;else{for(i&=2===n?31:3===n?15:7;n>1&&s<r;)i=i<<6|63&e[s++],n--;n>1?a[o++]=65533:i<65536?a[o++]=i:(i-=65536,a[o++]=55296|i>>10&1023,a[o++]=56320|1023&i)}return Au(a,o)},Ou=function(e,t){var s;for((t=t||e.length)>e.length&&(t=e.length),s=t-1;s>=0&&128==(192&e[s]);)s--;return s<0||0===s?t:s+Su[e[s]]>t?s:t},Gu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Uu={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"};var ku=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0};var Pu=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1},bu=Object.prototype.toString;function wu(e){if(!(this instanceof wu))return new wu(e);this.options=tu.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new ku,this.strm.avail_out=0;var s=yu.inflateInit2(this.strm,t.windowBits);if(s!==Gu.Z_OK)throw new Error(Uu[s]);if(this.header=new Pu,yu.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=vu(t.dictionary):\"[object ArrayBuffer]\"===bu.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=yu.inflateSetDictionary(this.strm,t.dictionary))!==Gu.Z_OK))throw new Error(Uu[s])}function Fu(e,t){var s=new wu(t);if(s.push(e,!0),s.err)throw s.msg||Uu[s.err];return s.result}wu.prototype.push=function(e,t){var s,o,i,n,r,a=this.strm,u=this.options.chunkSize,c=this.options.dictionary,l=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?Gu.Z_FINISH:Gu.Z_NO_FLUSH,\"string\"==typeof e?a.input=Nu(e):\"[object ArrayBuffer]\"===bu.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new tu.Buf8(u),a.next_out=0,a.avail_out=u),(s=yu.inflate(a,Gu.Z_NO_FLUSH))===Gu.Z_NEED_DICT&&c&&(s=yu.inflateSetDictionary(this.strm,c)),s===Gu.Z_BUF_ERROR&&!0===l&&(s=Gu.Z_OK,l=!1),s!==Gu.Z_STREAM_END&&s!==Gu.Z_OK)return this.onEnd(s),this.ended=!0,!1;a.next_out&&(0!==a.avail_out&&s!==Gu.Z_STREAM_END&&(0!==a.avail_in||o!==Gu.Z_FINISH&&o!==Gu.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(i=Ou(a.output,a.next_out),n=a.next_out-i,r=Ru(a.output,i),a.next_out=n,a.avail_out=u-n,n&&tu.arraySet(a.output,a.output,i,n,0),this.onData(r)):this.onData(tu.shrinkBuf(a.output,a.next_out)))),0===a.avail_in&&0===a.avail_out&&(l=!0)}while((a.avail_in>0||0===a.avail_out)&&s!==Gu.Z_STREAM_END);return s===Gu.Z_STREAM_END&&(o=Gu.Z_FINISH),o===Gu.Z_FINISH?(s=yu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Gu.Z_OK):o!==Gu.Z_SYNC_FLUSH||(this.onEnd(Gu.Z_OK),a.avail_out=0,!0)},wu.prototype.onData=function(e){this.chunks.push(e)},wu.prototype.onEnd=function(e){e===Gu.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=tu.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var $u={Inflate:wu,inflate:Fu,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Fu(e,t)},ungzip:Fu},qu={};(0,tu.assign)(qu,$u,Gu);var xu=qu;class Vu{constructor(e){this._m=e,this._n=\"InflateModule\",this._bLogForInflateOK=!1,this._bLogForInflateError=!1}inflate(e){const t=new Uint8Array(e).slice(4),s=Date.now();let o;try{o=xu.inflate(t,{to:\"string\"}),this._bLogForInflateOK||(this._bLogForInflateOK=!0,new Cn(\"inflateOK\").end())}catch(r){if(this._bLogForInflateError)return;return this._bLogForInflateError=!0,void new Cn(\"inflateError\").setMessage(r).end()}const i=t.length+4,n=o.length;return _e.d(`inflate ok. zipped:${i} unzipped:${n} compression ratio:${Math.round(100*(n-i)/n)}% cost:${Date.now()-s}`),o}reset(){_e.l(this._n+\".reset\"),this._bLogForInflateOK=!1,this._bLogForInflateError=!1}}class Bu{constructor(e){const t=new Cn(\"sdkConstruct\");this._n=\"ModuleManager\",this._isReady=!1,this._reason=nn.USER_NOT_LOGGED_IN,this._startLoginTs=0,this._moduleMap=new Map,this._innerEmitter=null,this._outerEmitter=null,this._checkCount=0,this._checkTimer=-1,this._moduleMap.set(ms,new Vr(this,e)),this._moduleMap.set(ws,new Vu(this)),this._moduleMap.set(Os,new Ja(this)),this._moduleMap.set(As,new ka(this)),this._moduleMap.set(vs,new ja(this)),this._moduleMap.set(Rs,new qa(this)),this._moduleMap.set(Ss,new Aa(this)),this._moduleMap.set(Es,new Ga(this)),this._moduleMap.set(rs,new Br(this)),this._moduleMap.set(as,new aa(this)),this._moduleMap.set(us,new ua(this)),this._moduleMap.set(Ps,new ca(this)),this._moduleMap.set(cs,new xr(this)),this._moduleMap.set(ls,new Bn(this)),this._moduleMap.set(_s,new lr(this)),this._moduleMap.set(ds,new Nr(this)),this._moduleMap.set(hs,new Or(this)),this._moduleMap.set(gs,new Pr(this)),this._moduleMap.set(Ms,new Kr(this)),this._moduleMap.set(bs,new eu(this)),this._moduleMap.set(fs,new jr(this)),this._moduleMap.set(Is,new Zr(this)),this._moduleMap.set(Cs,new ta(this)),this._moduleMap.set(Ts,new sa(this)),this._moduleMap.set(ys,new la(this)),this._moduleMap.set(Ds,new da(this)),this._moduleMap.set(Ls,new Ua(this)),this._moduleMap.set(Ns,new Pa(this)),this._moduleMap.set(ps,new Ya(this)),this._moduleMap.set(Gs,new Xa(this)),this._moduleMap.set(Us,new Za(this)),this._moduleMap.set(ks,new Qa(this)),this._eventThrottleMap=new Map;const{instanceID:s,oversea:o,SDKAppID:i}=e,n=`instanceID:${s} SDKAppID:${i} host:${lt()} oversea:${o} inBrowser:${b} inMiniApp:${P} canIUseInflate:`+this.canIUseInflate()+` workerAvailable:${Q} UserAgent:${F}`;Cn.bindEventStatModule(this._moduleMap.get(fs)),t.setMessage(`${n} ${function(){let e=\"\";if(P)try{const{model:t,version:s,system:o,platform:i,SDKVersion:n}=w.getSystemInfoSync();e=`model:${t} version:${s} system:${o} platform:${i} SDKVersion:${n}`}catch(t){e=\"\"}return e}()}`).end(),_e.i(\"SDK \"+n),Fn.prototype._getErrorMessage=this.getErrorMessage.bind(this),this._readyList=void 0,this._ssoLogForReady=null,this._initReadyList()}_startTimer(){const e=this._moduleMap.get(vs),t=e.isWorkerEnabled();_e.l(`${this._n}.startTimer isWorkerEnabled:${t} seed:${this._checkTimer}`),t?e.startWorkerTimer():this._startMainThreadTimer()}_startMainThreadTimer(){this._checkTimer<0&&(this._checkTimer=setInterval(this.onCheckTimer.bind(this),1e3)),_e.l(`${this._n}._startMainThreadTimer seed:${this._checkTimer}`)}stopTimer(){const e=this._moduleMap.get(vs),t=e.isWorkerEnabled();_e.l(`${this._n}.stopTimer isWorkerEnabled:${t} seed:${this._checkTimer}`),t?e.stopWorkerTimer():this._stopMainThreadTimer()}_stopMainThreadTimer(){_e.l(this._n+\"._stopMainThreadTimer\"),this._checkTimer>0&&(clearInterval(this._checkTimer),this._checkTimer=-1,this._checkCount=0)}_stopMainThreadSocket(){_e.l(this._n+\"._stopMainThreadSocket\");const e=this._moduleMap.get(Ss);e.setIsWorkerEnabled(!0),e.reConnect()}_startMainThreadSocket(){_e.l(this._n+\"._startMainThreadSocket\");const e=this._moduleMap.get(Ss);e.setIsWorkerEnabled(!1),e.reConnect()}onWorkerTimerEnabled(){_e.l(this._n+\".onWorkerTimerEnabled, disable main thread timer and socket\"),this._stopMainThreadTimer(),this._stopMainThreadSocket()}onWorkerTimerDisabled(){_e.l(this._n+\".onWorkerTimerDisabled, enable main thread timer and socket\"),this._startMainThreadTimer(),this._startMainThreadSocket()}onCheckTimer(){this._checkCount+=1;for(const[,e]of this._moduleMap)e.onCheckTimer&&e.onCheckTimer(this._checkCount)}_initReadyList(){this._readyList=[this._moduleMap.get(rs),this._moduleMap.get(_s)],this._readyList.forEach(e=>{e.ready(()=>this._onModuleReady())})}_onModuleReady(){let t=!0;if(this._readyList.forEach(e=>{e.isReady()||(t=!1)}),t&&!this._isReady){this._isReady=!0,this._outerEmitter.emit(e.SDK_READY);const t=Date.now()-this._startLoginTs;_e.w(`SDK is ready. cost ${t} ms`),this._startLoginTs=Date.now();const s=this._moduleMap.get(Is).getNetworkType(),o=this._ssoLogForReady.getStartTs()+ue;this._ssoLogForReady.setNetworkType(s).setMessage(t).start(o).end()}}login(){0===this._startLoginTs&&(le(),this._startLoginTs=Date.now(),this._startTimer(),this._moduleMap.get(Is).start(),this._ssoLogForReady=new Cn(\"sdkReady\"),this._reason=nn.LOGGING_IN)}onLoginFailed(){this._startLoginTs=0}getOuterEmitterInstance(){return null===this._outerEmitter&&(this._outerEmitter=new ea,qn(this._outerEmitter),this._outerEmitter._emit=this._outerEmitter.emit,this._outerEmitter.emit=function(t,s){if(t===e.CONVERSATION_LIST_UPDATED||t===e.FRIEND_LIST_UPDATED||t===e.GROUP_LIST_UPDATED||t===e.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED)if(this._eventThrottleMap.has(t)){const e=Date.now(),s=this._eventThrottleMap.get(t);e-s.last<=1e3?(s.timeoutID&&clearTimeout(s.timeoutID),s.timeoutID=setTimeout(()=>{s.last=Date.now(),this._outerEmitter._emit.apply(this._outerEmitter,[t,{name:t,data:this._getEventData(t)}])},1e3)):(s.last=e,this._outerEmitter._emit.apply(this._outerEmitter,[t,{name:t,data:this._getEventData(t)}]))}else this._eventThrottleMap.set(t,{last:Date.now(),timeoutID:-1}),this._outerEmitter._emit.apply(this._outerEmitter,[t,{name:t,data:this._getEventData(t)}]);else this._outerEmitter._emit.apply(this._outerEmitter,[t,{name:t,data:arguments[1]}])}.bind(this)),this._outerEmitter}_getEventData(t){return t===e.CONVERSATION_LIST_UPDATED?this._moduleMap.get(_s).getLocalConversationList():t===e.FRIEND_LIST_UPDATED?this._moduleMap.get(ps).getLocalFriendList(!1):t===e.GROUP_LIST_UPDATED?this._moduleMap.get(ds).getLocalGroupList():t===e.TOTAL_UNREAD_MESSAGE_COUNT_UPDATED?this._moduleMap.get(_s).getTotalUnreadMessageCount():void 0}getInnerEmitterInstance(){return null===this._innerEmitter&&(this._innerEmitter=new ea,this._innerEmitter._emit=this._innerEmitter.emit,this._innerEmitter.emit=function(e,t){let s;s=Pe(arguments[1])&&arguments[1].data?[e,{name:arguments[0],data:arguments[1].data}]:[e,{name:arguments[0],data:arguments[1]}],this._innerEmitter._emit.apply(this._innerEmitter,s)}.bind(this)),this._innerEmitter}hasModule(e){return this._moduleMap.has(e)}getModule(e){return this._moduleMap.get(e)}canIUseInflate(){return!!this._moduleMap.get(ws)}isReady(){return this._isReady}isIntl(){return this.getModule(ms).isIntl()}getNotReadyReason(){return this._reason}setNotReadyReason(e){this._reason=e}getErrorMessage(e,t,s){return this._moduleMap.get(bs).get({key:e,replacement1:t,replacement2:s,isIntl:this.isIntl()})}outputWarning(e,t,s){const o=this.getErrorMessage(e,t,s);o&&_e.w(o)}onError(t){const s=`code:${t.code} message:${t.message}`;_e.w(\"Oops! \"+s);new Cn(\"error\").setMessage(s).setNetworkType(this.getModule(Is).getNetworkType()).setLevel(\"error\").end(),this.getOuterEmitterInstance().emit(e.ERROR,t)}restartTimer(){_e.l(this._n+\".restartTimer\"),this.stopTimer(),this._startTimer(),this.getModule(ds).restartPolling()}getTimerID(){const e=this._moduleMap.get(vs);return e.isWorkerEnabled()?e.getTimerID():this._checkTimer}getPollingTimerID(e){return this._moduleMap.get(ds).getPollingTimerID(e)}reset(){_e.l(this._n+\".reset\"),le();for(const[,e]of this._moduleMap)e.reset&&e.reset();this._startLoginTs=0,this._initReadyList(),this._isReady=!1,this.stopTimer(),this._outerEmitter.emit(e.SDK_NOT_READY);for(const[,e]of this._eventThrottleMap)e.timeoutID&&clearTimeout(e.timeoutID);this._eventThrottleMap.clear()}}class Hu{constructor(e){this._funcMap=new Map,this._m=e}defense(e,t,s){if(\"string\"!=typeof e)return null;if(0===e.length)return null;if(\"function\"!=typeof t)return null;if(this._funcMap.has(e)&&this._funcMap.get(e).has(t))return this._funcMap.get(e).get(t);this._funcMap.has(e)||this._funcMap.set(e,new Map);let o=null;return this._funcMap.get(e).has(t)?o=this._funcMap.get(e).get(t):(o=this._pack(e,t,s),this._funcMap.get(e).set(t,o)),o}defenseOnce(e,t,s){return\"function\"!=typeof t?null:this._pack(e,t,s)}find(e,t){return\"string\"!=typeof e||0===e.length||\"function\"!=typeof t?null:this._funcMap.has(e)&&this._funcMap.get(e).has(t)?this._funcMap.get(e).get(t):(this._m.outputWarning(\"ListenerFnNotFound\",e),null)}delete(e,t){return\"function\"==typeof t&&(!!this._funcMap.has(e)&&(!!this._funcMap.get(e).has(t)&&(this._funcMap.get(e).delete(t),0===this._funcMap.get(e).size&&this._funcMap.delete(e),!0)))}_pack(t,s,o){const i=this;return function(){try{s.apply(o,Array.from(arguments))}catch(n){const s=Object.values(e).indexOf(t),o=\"CallbackError\";if(-1!==s){const t=Object.keys(e)[s];i._m.outputWarning(o,t,n)}new Cn(o).setMessage(\"eventName:\"+t).setMoreMessage(n.message).end()}}}}class Ku{constructor(e){const t={SDKAppID:e.SDKAppID,unlimitedAVChatRoom:e.unlimitedAVChatRoom||!1,scene:e.scene||\"\",oversea:e.oversea||!1,instanceID:ct(),devMode:e.devMode||!1,proxyServer:e.proxyServer||void 0,fileUploadProxy:e.fileUploadProxy||void 0,fileDownloadProxy:e.fileDownloadProxy||e.fileUploadProxy||void 0};this._m=new Bu(t),this._safetyCallbackFactory=new Hu(this._m)}onError(e){this._m.onError(e)}login(e){this._m.login();return this._getModule(rs).login(e)}logout(){return this._getModule(rs).logout().then(e=>(this._m.reset(),e))}isReady(){return this._m.isReady()}isIntl(){return this._m.isIntl()}getNotReadyReason(){return this._m.getNotReadyReason()}getErrorMessage(e,t,s){return this._m.getErrorMessage(e,t,s)}_getModule(e){return this._m.getModule(e)}destroy(){return this.logout().finally(()=>{this._m.stopTimer();this._getModule(vs).terminate();this._getModule(Ss).dealloc();const t=this._m.getOuterEmitterInstance(),s=this._getModule(ms);t.emit(e.SDK_DESTROY,{SDKAppID:s.getSDKAppID()})})}on(e,t,s){_e.d(\"on\",\"eventName:\"+e);this._m.getOuterEmitterInstance().on(e,this._safetyCallbackFactory.defense(e,t,s),s)}once(e,t,s){_e.d(\"once\",\"eventName:\"+e);this._m.getOuterEmitterInstance().once(e,this._safetyCallbackFactory.defenseOnce(e,t,s),s||this)}off(e,t,s,o){_e.d(\"off\",\"eventName:\"+e);const i=this._safetyCallbackFactory.find(e,t);if(null!==i){this._m.getOuterEmitterInstance().off(e,i,s,o),this._safetyCallbackFactory.delete(e,t)}}registerPlugin(e){if(we(e[\"tim-offline-push-plugin\"])){this._getModule(ys).registerPlugin(e)}else{this._getModule(Gs).registerPlugin(e)}}setLogLevel(e){if(e<=0){const e=this.getErrorMessage(\"TIM_ASCII_ART\");e&&console.log(e);const t=this.getErrorMessage(\"API_REFER\");if(t){const e=\"IM SDK API ->\";yt()?console.log(`%c ${e} %c`,\"background:#ff9d00; padding:1px; border-radius:3px; color: #fff\",\"background:transparent\",t):console.log(e,t)}const s=this.getErrorMessage(\"DOCS_GUIDE\");s&&console.log(s)}_e.setLevel(e)}createTextMessage(e){return this._getModule(as).createTextMessage(e)}createTextAtMessage(e){return this._getModule(as).createTextMessage(e)}createImageMessage(e){return this._getModule(as).createImageMessage(e)}createAudioMessage(e){return this._getModule(as).createAudioMessage(e)}createVideoMessage(e){return this._getModule(as).createVideoMessage(e)}createCustomMessage(e){return this._getModule(as).createCustomMessage(e)}createFaceMessage(e){return this._getModule(as).createFaceMessage(e)}createFileMessage(e){return this._getModule(as).createFileMessage(e)}createLocationMessage(e){return this._getModule(as).createLocationMessage(e)}createMergerMessage(e){return this._getModule(as).createMergerMessage(e)}downloadMergerMessage(e){if(e.type!==t.MSG_MERGER)return Vn({code:nn.MESSAGE_MERGER_TYPE_INVALID});if(Lt(e.payload.downloadKey))return Vn({code:nn.MESSAGE_MERGER_KEY_INVALID});return this._getModule(as).downloadMergerMessage(e).catch(e=>Vn({code:nn.MESSAGE_MERGER_DOWNLOAD_FAIL}))}createForwardMessage(e){return this._getModule(as).createForwardMessage(e)}sendMessage(e,t){if(!(e instanceof bn))return Vn({code:nn.MESSAGE_SEND_NEED_MESSAGE_INSTANCE});return this._getModule(as).sendMessageInstance(e,t)}callExperimentalAPI(e,t){if(\"sendComboMessage\"===e){return this._getModule(Ps).sendMessage(t)}if(\"handleGroupInvitation\"===e){return this._getModule(ds).handleGroupInvitation(t)}if(\"isCommercialAbilityEnabled\"===e){return this._getModule(Os).isFeatureEnabled(t)}if(\"isIntl\"===e)return this.isIntl();if(\"sendTRTCCustomData\"===e){return this._getModule(ks).sendTRTCCustomData(t)}return\"getTimerID\"===e?this._m.getTimerID():\"getPollingTimerID\"===e?this._m.getPollingTimerID(t):Vn({code:nn.INVALID_OPERATION})}revokeMessage(e){return this._getModule(as).revokeMessage(e)}resendMessage(e){return this._getModule(as).resendMessage(e)}deleteMessage(e){return this._getModule(as).deleteMessage(e)}translateText(e){return this._getModule(as).translateText(e)}setMessageExtensions(e,t){return this._getModule(us).setMessageExtensions(e,t)}getMessageExtensions(e){return this._getModule(us).getMessageExtensions(e)}deleteMessageExtensions(e,t){return this._getModule(us).deleteMessageExtensions(e,t)}modifyMessage(e){return this._getModule(as).modifyRemoteMessage(e)}getMessageList(e){return this._getModule(_s).getMessageList(e)}getMessageListHopping(e){return this._getModule(_s).getMessageListHopping(e)}sendMessageReadReceipt(e){return this._getModule(_s).sendReadReceipt(e)}getMessageReadReceiptList(e){return this._getModule(_s).getReadReceiptList(e)}getGroupMessageReadMemberList(e){return this._getModule(ds).getReadReceiptDetail(e)}findMessage(e){return this._getModule(_s).findMessage(e)}setMessageRead(e){return this._getModule(_s).setMessageRead(e)}getConversationList(e){return this._getModule(_s).getConversationList(e)}getConversationProfile(e){return this._getModule(_s).getConversationProfile(e)}deleteConversation(e){return this._getModule(_s).deleteConversation(e)}clearHistoryMessage(e){return this._getModule(_s).clearHistoryMessage(e)}pinConversation(e){return this._getModule(_s).pinConversation(e)}setAllMessageRead(e){return this._getModule(_s).setAllMessageRead(e)}setMessageRemindType(e){return this._getModule(_s).setMessageRemindType(e)}getTotalUnreadMessageCount(){return this._getModule(_s).getTotalUnreadMessageCount()}setConversationCustomData(e){return this._getModule(_s).setConversationCustomData(e)}markConversation(e){return this._getModule(_s).markConversation(e)}getConversationGroupList(){return this._getModule(_s).getConversationGroupList()}createConversationGroup(e){return this._getModule(_s).createConversationGroup(e)}deleteConversationGroup(e){return this._getModule(_s).deleteConversationGroup(e)}renameConversationGroup(e){return this._getModule(_s).renameConversationGroup(e)}addConversationsToGroup(e){return this._getModule(_s).addConversationsToGroup(e)}deleteConversationsFromGroup(e){return this._getModule(_s).deleteConversationsFromGroup(e)}getMyProfile(){return this._getModule(cs).getMyProfile()}getUserProfile(e){return this._getModule(cs).getUserProfile(e)}updateMyProfile(e){return this._getModule(cs).updateMyProfile(e)}getBlacklist(){return this._getModule(cs).getLocalBlacklist()}addToBlacklist(e){return this._getModule(cs).addBlacklist(e)}removeFromBlacklist(e){return this._getModule(cs).deleteBlacklist(e)}setSelfStatus(e){return this._getModule(cs).setSelfStatus(e)}getUserStatus(e){return this._getModule(cs).getUserStatus(e)}subscribeUserStatus(e){return this._getModule(cs).subscribeUserStatus(e)}unsubscribeUserStatus(e){return this._getModule(cs).unsubscribeUserStatus(e)}getFriendList(){const e=this._getModule(ps);return e?e.getLocalFriendList():Vn({code:nn.CANNOT_FIND_MODULE})}addFriend(e){const t=this._getModule(ps);return t?t.addFriend(e):Vn({code:nn.CANNOT_FIND_MODULE})}deleteFriend(e){const t=this._getModule(ps);return t?t.deleteFriend(e):Vn({code:nn.CANNOT_FIND_MODULE})}checkFriend(e){const t=this._getModule(ps);return t?t.checkFriend(e):Vn({code:nn.CANNOT_FIND_MODULE})}getFriendProfile(e){const t=this._getModule(ps);return t?t.getFriendProfile(e):Vn({code:nn.CANNOT_FIND_MODULE})}updateFriend(e){const t=this._getModule(ps);return t?t.updateFriend(e):Vn({code:nn.CANNOT_FIND_MODULE})}getFriendApplicationList(){const e=this._getModule(ps);return e?e.getLocalFriendApplicationList():Vn({code:nn.CANNOT_FIND_MODULE})}acceptFriendApplication(e){const t=this._getModule(ps);return t?t.acceptFriendApplication(e):Vn({code:nn.CANNOT_FIND_MODULE})}refuseFriendApplication(e){const t=this._getModule(ps);return t?t.refuseFriendApplication(e):Vn({code:nn.CANNOT_FIND_MODULE})}deleteFriendApplication(e){const t=this._getModule(ps);return t?t.deleteFriendApplication(e):Vn({code:nn.CANNOT_FIND_MODULE})}setFriendApplicationRead(){const e=this._getModule(ps);return e?e.setFriendApplicationRead():Vn({code:nn.CANNOT_FIND_MODULE})}getFriendGroupList(){const e=this._getModule(ps);return e?e.getLocalFriendGroupList():Vn({code:nn.CANNOT_FIND_MODULE})}createFriendGroup(e){const t=this._getModule(ps);return t?t.createFriendGroup(e):Vn({code:nn.CANNOT_FIND_MODULE})}deleteFriendGroup(e){const t=this._getModule(ps);return t?t.deleteFriendGroup(e):Vn({code:nn.CANNOT_FIND_MODULE})}addToFriendGroup(e){const t=this._getModule(ps);return t?t.addToFriendGroup(e):Vn({code:nn.CANNOT_FIND_MODULE})}removeFromFriendGroup(e){const t=this._getModule(ps);return t?t.removeFromFriendGroup(e):Vn({code:nn.CANNOT_FIND_MODULE})}renameFriendGroup(e){const t=this._getModule(ps);return t?t.renameFriendGroup(e):Vn({code:nn.CANNOT_FIND_MODULE})}getGroupList(e){return this._getModule(ds).getGroupList(e)}getGroupProfile(e){return this._getModule(ds).getGroupProfile(e)}createGroup(e){return this._getModule(ds).createGroup(e)}dismissGroup(e){return this._getModule(ds).dismissGroup(e)}updateGroupProfile(e){return this._getModule(ds).updateGroupProfile(e)}joinGroup(e){return this._getModule(ds).joinGroup(e)}quitGroup(e){return this._getModule(ds).quitGroup(e)}searchGroupByID(e){return this._getModule(ds).searchGroupByID(e)}getGroupOnlineMemberCount(e){return this._getModule(ds).getGroupOnlineMemberCount(e)}changeGroupOwner(e){return this._getModule(ds).changeGroupOwner(e)}getGroupApplicationList(){return this._getModule(ds).getGroupApplicationList()}handleGroupApplication(e){return this._getModule(ds).handleGroupApplication(e)}initGroupAttributes(e){return this._getModule(ds).initGroupAttributes(e)}setGroupAttributes(e){return this._getModule(ds).setGroupAttributes(e)}deleteGroupAttributes(e){return this._getModule(ds).deleteGroupAttributes(e)}getGroupAttributes(e){return this._getModule(ds).getGroupAttributes(e)}setGroupCounters(e){return this._getModule(ds).setGroupCounters(e)}increaseGroupCounter(e){return this._getModule(ds).increaseGroupCounter(e)}decreaseGroupCounter(e){return this._getModule(ds).decreaseGroupCounter(e)}getGroupCounters(e){return this._getModule(ds).getGroupCounters(e)}getGroupMemberList(e){return this._getModule(hs).getGroupMemberList(e)}getGroupMemberProfile(e){return this._getModule(hs).getGroupMemberProfile(e)}addGroupMember(e){return this._getModule(hs).addGroupMember(e)}deleteGroupMember(e){return this._getModule(hs).deleteGroupMember(e)}setGroupMemberMuteTime(e){return this._getModule(hs).setGroupMemberMuteTime(e)}setGroupMemberRole(e){return this._getModule(hs).setGroupMemberRole(e)}setGroupMemberNameCard(e){return this._getModule(hs).setGroupMemberNameCard(e)}setGroupMemberCustomField(e){return this._getModule(hs).setGroupMemberCustomField(e)}markGroupMemberList(e){return this._getModule(hs).markGroupMemberList(e)}getJoinedCommunityList(){return this._getModule(gs).getJoinedCommunityList()}createTopicInCommunity(e){return this._getModule(gs).createTopicInCommunity(e)}deleteTopicFromCommunity(e){return this._getModule(gs).deleteTopicFromCommunity(e)}updateTopicProfile(e){return this._getModule(gs).updateTopicProfile(e)}getTopicList(e){return this._getModule(gs).getTopicList(e)}}const Wu={login:1,logout:1,destroy:1,on:1,off:1,ready:1,setLogLevel:1,joinGroup:1,quitGroup:1,registerPlugin:1,getGroupOnlineMemberCount:1};function Yu(e,t){if(e.isReady()||1===Wu[t])return!0;const s=e.getNotReadyReason(),o={code:s,message:`${e.getErrorMessage(s)} | ${t} | ${e.getErrorMessage(nn.SDK_IS_NOT_READY)}`};return e.onError(o),o}const ju={},zu={};zu.create=function(t){let o=0;const{SDKAppID:i}=t;if(Ge(i))o=i;else if(o=parseInt(i),isNaN(i))return _e.e(\"TIM.create failed. Failed to parse the SDKAppID, please check the arguments\"),null;if(o&&ju[o])return ju[o];_e.l(\"TIM.create\");const n=new Ku({...t,SDKAppID:o});n.on(e.SDK_DESTROY,e=>{ju[e.data.SDKAppID]=null,delete ju[e.data.SDKAppID]});const r=function(e){const t=Object.create(null);return Object.keys(ns).forEach(o=>{if(!e[o])return;const i=new s;t[o]=function(){const t=Array.from(arguments);return i.use((function(t,s){const i=Yu(e,o);return!0===i?s():Vn(i)})).use((function(e,t){if(!0===At(e,is[o],o))return t()})).use((function(t,s){return e[o].apply(e,t)})),i.run(t)}}),t}(n);return ju[o]=r,is.hookGetAPITips(n.getErrorMessage.bind(n)),_e.l(\"TIM.create ok\"),r},zu.TYPES=t,zu.EVENT=e,zu.VERSION=\"2.27.6\",_e.l(\"TIM.VERSION:\"+zu.VERSION);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMtZnJpZW5kc2hpcC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltLWpzLXNkay90aW0tanMtZnJpZW5kc2hpcC5lcy5qcz9kZmUwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztjb25zdCBlPXtTREtfUkVBRFk6XCJzZGtTdGF0ZVJlYWR5XCIsU0RLX05PVF9SRUFEWTpcInNka1N0YXRlTm90UmVhZHlcIixTREtfREVTVFJPWTpcInNka0Rlc3Ryb3lcIixNRVNTQUdFX1JFQ0VJVkVEOlwib25NZXNzYWdlUmVjZWl2ZWRcIixNRVNTQUdFX01PRElGSUVEOlwib25NZXNzYWdlTW9kaWZpZWRcIixNRVNTQUdFX1JFVk9LRUQ6XCJvbk1lc3NhZ2VSZXZva2VkXCIsTUVTU0FHRV9SRUFEX0JZX1BFRVI6XCJvbk1lc3NhZ2VSZWFkQnlQZWVyXCIsTUVTU0FHRV9SRUFEX1JFQ0VJUFRfUkVDRUlWRUQ6XCJvbk1lc3NhZ2VSZWFkUmVjZWlwdFJlY2VpdmVkXCIsTUVTU0FHRV9FWFRFTlNJT05TX1VQREFURUQ6XCJvbk1lc3NhZ2VFeHRlbnNpb25zVXBkYXRlZFwiLE1FU1NBR0VfRVhURU5TSU9OU19ERUxFVEVEOlwib25NZXNzYWdlRXh0ZW5zaW9uc0RlbGV0ZWRcIixDT05WRVJTQVRJT05fTElTVF9VUERBVEVEOlwib25Db252ZXJzYXRpb25MaXN0VXBkYXRlZFwiLFRPVEFMX1VOUkVBRF9NRVNTQUdFX0NPVU5UX1VQREFURUQ6XCJvblRvdGFsVW5yZWFkTWVzc2FnZUNvdW50VXBkYXRlZFwiLENPTlZFUlNBVElPTl9HUk9VUF9MSVNUX1VQREFURUQ6XCJvbkNvbnZlcnNhdGlvbkdyb3VwTGlzdFVwZGF0ZWRcIixDT05WRVJTQVRJT05fSU5fR1JPVVBfVVBEQVRFRDpcIm9uQ29udmVyc2F0aW9uSW5Hcm91cFVwZGF0ZWRcIixHUk9VUF9MSVNUX1VQREFURUQ6XCJvbkdyb3VwTGlzdFVwZGF0ZWRcIixHUk9VUF9TWVNURU1fTk9USUNFX1JFQ0VJVkVEOlwicmVjZWl2ZUdyb3VwU3lzdGVtTm90aWNlXCIsR1JPVVBfQVRUUklCVVRFU19VUERBVEVEOlwiZ3JvdXBBdHRyaWJ1dGVzVXBkYXRlZFwiLEdST1VQX0NPVU5URVJfVVBEQVRFRDpcIm9uR3JvdXBDb3VudGVyVXBkYXRlZFwiLFRPUElDX0NSRUFURUQ6XCJvblRvcGljQ3JlYXRlZFwiLFRPUElDX0RFTEVURUQ6XCJvblRvcGljRGVsZXRlZFwiLFRPUElDX1VQREFURUQ6XCJvblRvcGljVXBkYXRlZFwiLFBST0ZJTEVfVVBEQVRFRDpcIm9uUHJvZmlsZVVwZGF0ZWRcIixVU0VSX1NUQVRVU19VUERBVEVEOlwib25Vc2VyU3RhdHVzVXBkYXRlZFwiLEJMQUNLTElTVF9VUERBVEVEOlwiYmxhY2tsaXN0VXBkYXRlZFwiLEZSSUVORF9MSVNUX1VQREFURUQ6XCJvbkZyaWVuZExpc3RVcGRhdGVkXCIsRlJJRU5EX0dST1VQX0xJU1RfVVBEQVRFRDpcIm9uRnJpZW5kR3JvdXBMaXN0VXBkYXRlZFwiLEZSSUVORF9BUFBMSUNBVElPTl9MSVNUX1VQREFURUQ6XCJvbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWRcIixLSUNLRURfT1VUOlwia2lja2VkT3V0XCIsRVJST1I6XCJlcnJvclwiLE5FVF9TVEFURV9DSEFOR0U6XCJuZXRTdGF0ZUNoYW5nZVwiLFNES19SRUxPQUQ6XCJzZGtSZWxvYWRcIn0sdD17TVNHX1RFWFQ6XCJUSU1UZXh0RWxlbVwiLE1TR19JTUFHRTpcIlRJTUltYWdlRWxlbVwiLE1TR19TT1VORDpcIlRJTVNvdW5kRWxlbVwiLE1TR19BVURJTzpcIlRJTVNvdW5kRWxlbVwiLE1TR19GSUxFOlwiVElNRmlsZUVsZW1cIixNU0dfRkFDRTpcIlRJTUZhY2VFbGVtXCIsTVNHX1ZJREVPOlwiVElNVmlkZW9GaWxlRWxlbVwiLE1TR19HRU86XCJUSU1Mb2NhdGlvbkVsZW1cIixNU0dfTE9DQVRJT046XCJUSU1Mb2NhdGlvbkVsZW1cIixNU0dfR1JQX1RJUDpcIlRJTUdyb3VwVGlwRWxlbVwiLE1TR19HUlBfU1lTX05PVElDRTpcIlRJTUdyb3VwU3lzdGVtTm90aWNlRWxlbVwiLE1TR19DVVNUT006XCJUSU1DdXN0b21FbGVtXCIsTVNHX01FUkdFUjpcIlRJTVJlbGF5RWxlbVwiLE1TR19QUklPUklUWV9ISUdIOlwiSGlnaFwiLE1TR19QUklPUklUWV9OT1JNQUw6XCJOb3JtYWxcIixNU0dfUFJJT1JJVFlfTE9XOlwiTG93XCIsTVNHX1BSSU9SSVRZX0xPV0VTVDpcIkxvd2VzdFwiLENPTlZfQzJDOlwiQzJDXCIsQ09OVl9HUk9VUDpcIkdST1VQXCIsQ09OVl9UT1BJQzpcIlRPUElDXCIsQ09OVl9TWVNURU06XCJAVElNI1NZU1RFTVwiLENPTlZfQVRfTUU6MSxDT05WX0FUX0FMTDoyLENPTlZfQVRfQUxMX0FUX01FOjMsQ09OVl9NQVJLX1RZUEVfU1RBUjoxLENPTlZfTUFSS19UWVBFX1VOUkVBRDoyLENPTlZfTUFSS19UWVBFX0ZPTEQ6NCxDT05WX01BUktfVFlQRV9ISURFOjgsR1JQX1BSSVZBVEU6XCJQcml2YXRlXCIsR1JQX1dPUks6XCJQcml2YXRlXCIsR1JQX1BVQkxJQzpcIlB1YmxpY1wiLEdSUF9DSEFUUk9PTTpcIkNoYXRSb29tXCIsR1JQX01FRVRJTkc6XCJDaGF0Um9vbVwiLEdSUF9BVkNIQVRST09NOlwiQVZDaGF0Um9vbVwiLEdSUF9DT01NVU5JVFk6XCJDb21tdW5pdHlcIixHUlBfTUJSX1JPTEVfT1dORVI6XCJPd25lclwiLEdSUF9NQlJfUk9MRV9BRE1JTjpcIkFkbWluXCIsR1JQX01CUl9ST0xFX01FTUJFUjpcIk1lbWJlclwiLEdSUF9NQlJfUk9MRV9DVVNUT006XCJDdXN0b21cIixHUlBfVElQX01CUl9KT0lOOjEsR1JQX1RJUF9NQlJfUVVJVDoyLEdSUF9USVBfTUJSX0tJQ0tFRF9PVVQ6MyxHUlBfVElQX01CUl9TRVRfQURNSU46NCxHUlBfVElQX01CUl9DQU5DRUxFRF9BRE1JTjo1LEdSUF9USVBfR1JQX1BST0ZJTEVfVVBEQVRFRDo2LEdSUF9USVBfTUJSX1BST0ZJTEVfVVBEQVRFRDo3LEdSUF9USVBfQkFOX0FWQ0hBVFJPT01fTUVNQkVSOjEwLEdSUF9USVBfVU5CQU5fQVZDSEFUUk9PTV9NRU1CRVI6MTEsTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFOlwiQWNjZXB0QW5kTm90aWZ5XCIsTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFOlwiQWNjZXB0Tm90Tm90aWZ5XCIsTVNHX1JFTUlORF9ESVNDQVJEOlwiRGlzY2FyZFwiLEdFTkRFUl9VTktOT1dOOlwiR2VuZGVyX1R5cGVfVW5rbm93blwiLEdFTkRFUl9GRU1BTEU6XCJHZW5kZXJfVHlwZV9GZW1hbGVcIixHRU5ERVJfTUFMRTpcIkdlbmRlcl9UeXBlX01hbGVcIixLSUNLRURfT1VUX01VTFRfQUNDT1VOVDpcIm11bHRpcGxlQWNjb3VudFwiLEtJQ0tFRF9PVVRfTVVMVF9ERVZJQ0U6XCJtdWx0aXBsZURldmljZVwiLEtJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEOlwidXNlclNpZ0V4cGlyZWRcIixLSUNLRURfT1VUX1JFU1RfQVBJOlwiUkVTVF9BUElfS2lja1wiLEFMTE9XX1RZUEVfQUxMT1dfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfQWxsb3dBbnlcIixBTExPV19UWVBFX05FRURfQ09ORklSTTpcIkFsbG93VHlwZV9UeXBlX05lZWRDb25maXJtXCIsQUxMT1dfVFlQRV9ERU5ZX0FOWTpcIkFsbG93VHlwZV9UeXBlX0RlbnlBbnlcIixGT1JCSURfVFlQRV9OT05FOlwiQWRtaW5Gb3JiaWRfVHlwZV9Ob25lXCIsRk9SQklEX1RZUEVfU0VORF9PVVQ6XCJBZG1pbkZvcmJpZF9UeXBlX1NlbmRPdXRcIixKT0lOX09QVElPTlNfRlJFRV9BQ0NFU1M6XCJGcmVlQWNjZXNzXCIsSk9JTl9PUFRJT05TX05FRURfUEVSTUlTU0lPTjpcIk5lZWRQZXJtaXNzaW9uXCIsSk9JTl9PUFRJT05TX0RJU0FCTEVfQVBQTFk6XCJEaXNhYmxlQXBwbHlcIixKT0lOX1NUQVRVU19TVUNDRVNTOlwiSm9pbmVkU3VjY2Vzc1wiLEpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVA6XCJBbHJlYWR5SW5Hcm91cFwiLEpPSU5fU1RBVFVTX1dBSVRfQVBQUk9WQUw6XCJXYWl0QWRtaW5BcHByb3ZhbFwiLElOVklURV9PUFRJT05TX0RJU0FCTEVfSU5WSVRFOlwiRGlzYWJsZUludml0ZVwiLElOVklURV9PUFRJT05TX05FRURfUEVSTUlTU0lPTjpcIk5lZWRQZXJtaXNzaW9uXCIsSU5WSVRFX09QVElPTlNfRlJFRV9BQ0NFU1M6XCJGcmVlQWNjZXNzXCIsR1JQX1BST0ZJTEVfT1dORVJfSUQ6XCJvd25lcklEXCIsR1JQX1BST0ZJTEVfQ1JFQVRFX1RJTUU6XCJjcmVhdGVUaW1lXCIsR1JQX1BST0ZJTEVfTEFTVF9JTkZPX1RJTUU6XCJsYXN0SW5mb1RpbWVcIixHUlBfUFJPRklMRV9NRU1CRVJfTlVNOlwibWVtYmVyTnVtXCIsR1JQX1BST0ZJTEVfTUFYX01FTUJFUl9OVU06XCJtYXhNZW1iZXJOdW1cIixHUlBfUFJPRklMRV9KT0lOX09QVElPTjpcImpvaW5PcHRpb25cIixHUlBfUFJPRklMRV9JTlZJVEVfT1BUSU9OOlwiaW52aXRlT3B0aW9uXCIsR1JQX1BST0ZJTEVfSU5UUk9EVUNUSU9OOlwiaW50cm9kdWN0aW9uXCIsR1JQX1BST0ZJTEVfTk9USUZJQ0FUSU9OOlwibm90aWZpY2F0aW9uXCIsR1JQX1BST0ZJTEVfTVVURV9BTExfTUJSUzpcIm11dGVBbGxNZW1iZXJzXCIsU05TX0FERF9UWVBFX1NJTkdMRTpcIkFkZF9UeXBlX1NpbmdsZVwiLFNOU19BRERfVFlQRV9CT1RIOlwiQWRkX1R5cGVfQm90aFwiLFNOU19ERUxFVEVfVFlQRV9TSU5HTEU6XCJEZWxldGVfVHlwZV9TaW5nbGVcIixTTlNfREVMRVRFX1RZUEVfQk9USDpcIkRlbGV0ZV9UeXBlX0JvdGhcIixTTlNfQVBQTElDQVRJT05fVFlQRV9CT1RIOlwiUGVuZGVuY3lfVHlwZV9Cb3RoXCIsU05TX0FQUExJQ0FUSU9OX1NFTlRfVE9fTUU6XCJQZW5kZW5jeV9UeXBlX0NvbWVJblwiLFNOU19BUFBMSUNBVElPTl9TRU5UX0JZX01FOlwiUGVuZGVuY3lfVHlwZV9TZW5kT3V0XCIsU05TX0FQUExJQ0FUSU9OX0FHUkVFOlwiUmVzcG9uc2VfQWN0aW9uX0FncmVlXCIsU05TX0FQUExJQ0FUSU9OX0FHUkVFX0FORF9BREQ6XCJSZXNwb25zZV9BY3Rpb25fQWdyZWVBbmRBZGRcIixTTlNfQ0hFQ0tfVFlQRV9CT1RIOlwiQ2hlY2tSZXN1bHRfVHlwZV9Cb3RoXCIsU05TX0NIRUNLX1RZUEVfU0lOR0xFOlwiQ2hlY2tSZXN1bHRfVHlwZV9TaW5nbGVcIixTTlNfVFlQRV9OT19SRUxBVElPTjpcIkNoZWNrUmVzdWx0X1R5cGVfTm9SZWxhdGlvblwiLFNOU19UWVBFX0FfV0lUSF9COlwiQ2hlY2tSZXN1bHRfVHlwZV9BV2l0aEJcIixTTlNfVFlQRV9CX1dJVEhfQTpcIkNoZWNrUmVzdWx0X1R5cGVfQldpdGhBXCIsU05TX1RZUEVfQk9USF9XQVk6XCJDaGVja1Jlc3VsdF9UeXBlX0JvdGhXYXlcIixORVRfU1RBVEVfQ09OTkVDVEVEOlwiY29ubmVjdGVkXCIsTkVUX1NUQVRFX0NPTk5FQ1RJTkc6XCJjb25uZWN0aW5nXCIsTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRDpcImRpc2Nvbm5lY3RlZFwiLE1TR19BVF9BTEw6XCJfX2tJbVNES19NZXNzc2FnZUF0QUxMX19cIixSRUFEX0FMTF9DMkNfTVNHOlwicmVhZEFsbEMyQ01lc3NhZ2VcIixSRUFEX0FMTF9HUk9VUF9NU0c6XCJyZWFkQWxsR3JvdXBNZXNzYWdlXCIsUkVBRF9BTExfTVNHOlwicmVhZEFsbE1lc3NhZ2VcIixVU0VSX1NUQVRVU19VTktOT1dOOjAsVVNFUl9TVEFUVVNfT05MSU5FOjEsVVNFUl9TVEFUVVNfT0ZGTElORToyLFVTRVJfU1RBVFVTX1VOTE9HSU5FRDozfTtjbGFzcyBze2NvbnN0cnVjdG9yKCl7dGhpcy5jYWNoZT1bXSx0aGlzLm9wdGlvbnM9bnVsbH11c2UoZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvd1wibWlkZGxld2FyZSBtdXN0IGJlIGEgZnVuY3Rpb25cIjtyZXR1cm4gdGhpcy5jYWNoZS5wdXNoKGUpLHRoaXN9bmV4dChlKXtpZih0aGlzLm1pZGRsZXdhcmVzJiZ0aGlzLm1pZGRsZXdhcmVzLmxlbmd0aD4wKXtyZXR1cm4gdGhpcy5taWRkbGV3YXJlcy5zaGlmdCgpLmNhbGwodGhpcyx0aGlzLm9wdGlvbnMsdGhpcy5uZXh0LmJpbmQodGhpcykpfX1ydW4oZSl7cmV0dXJuIHRoaXMubWlkZGxld2FyZXM9dGhpcy5jYWNoZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlfSkpLHRoaXMub3B0aW9ucz1lLHRoaXMubmV4dCgpfX1jbGFzcyBve2NvbnN0cnVjdG9yKGU9MCx0PTApe3RoaXMuaGlnaD1lLHRoaXMubG93PXR9ZXF1YWwoZSl7cmV0dXJuIG51bGwhPT1lJiYodGhpcy5sb3c9PT1lLmxvdyYmdGhpcy5oaWdoPT09ZS5oaWdoKX10b1N0cmluZygpe2NvbnN0IGU9TnVtYmVyKHRoaXMuaGlnaCkudG9TdHJpbmcoMTYpO2xldCB0PU51bWJlcih0aGlzLmxvdykudG9TdHJpbmcoMTYpO2lmKHQubGVuZ3RoPDgpe2xldCBlPTgtdC5sZW5ndGg7Zm9yKDtlOyl0PVwiMFwiK3QsZS0tfXJldHVybiBlK3R9fWNvbnN0IGk9e1RFU1Q6e0NISU5BOntERUZBVUxUOlwid3NzOi8vd3NzLWRldi50aW0ucXEuY29tXCJ9LE9WRVJTRUE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MtZGV2LnRpbS5xcS5jb21cIn0sU0lOR0FQT1JFOntERUZBVUxUOlwid3NzOi8vd3Nzc2dwLWRldi5pbS5xY2xvdWQuY29tXCJ9LEtPUkVBOntERUZBVUxUOlwid3NzOi8vd3Nza3ItZGV2LmltLnFjbG91ZC5jb21cIn0sR0VSTUFOWTp7REVGQVVMVDpcIndzczovL3dzc2dlci1kZXYuaW0ucWNsb3VkLmNvbVwifSxJTkQ6e0RFRkFVTFQ6XCJ3c3M6Ly93c3NpbmQtZGV2LmltLnFjbG91ZC5jb21cIn0sSlBOOntERUZBVUxUOlwid3NzOi8vd3NzanBuLWRldi5pbS5xY2xvdWQuY29tXCJ9LFVTQTp7REVGQVVMVDpcIndzczovL3dzc3VzYS1kZXYuaW0ucWNsb3VkLmNvbVwifX0sUFJPRFVDVElPTjp7Q0hJTkE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwiLEJBQ0tVUDpcIndzczovL3dzcy50aW0ucXEuY29tXCIsU1RBVDpcImh0dHBzOi8vZXZlbnRzLmltLnFjbG91ZC5jb21cIixBTllDQVNUOlwid3NzOi8vMTYyLjE0LjEzLjIwM1wifSxPVkVSU0VBOntERUZBVUxUOlwid3NzOi8vd3NzLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3MubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGkubXktaW1jbG91ZC5jb21cIn0sU0lOR0FQT1JFOntERUZBVUxUOlwid3NzOi8vd3Nzc2dwLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NzZ3AubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlzZ3AubXktaW1jbG91ZC5jb21cIn0sS09SRUE6e0RFRkFVTFQ6XCJ3c3M6Ly93c3Nrci5pbS5xY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3Nza3IubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlrci5teS1pbWNsb3VkLmNvbVwifSxHRVJNQU5ZOntERUZBVUxUOlwid3NzOi8vd3NzZ2VyLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NnZXIubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlnZXIubXktaW1jbG91ZC5jb21cIn0sSU5EOntERUZBVUxUOlwid3NzOi8vd3NzaW5kLm15LWltY2xvdWQuY29tXCIsQkFDS1VQOlwid3NzOi8vd3NzaW5kLmltLnFjbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlpbmQubXktaW1jbG91ZC5jb21cIn0sSlBOOntERUZBVUxUOlwid3NzOi8vd3NzanBuLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3NqcG4ubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGlqcG4ubXktaW1jbG91ZC5jb21cIn0sVVNBOntERUZBVUxUOlwid3NzOi8vd3NzdXNhLmltLnFjbG91ZC5jb21cIixCQUNLVVA6XCJ3c3M6Ly93c3N1c2EubXktaW1jbG91ZC5jb21cIixTVEFUOlwiaHR0cHM6Ly9hcGl1c2EubXktaW1jbG91ZC5jb21cIn19fSxuPXtBTkRST0lEOjIsSU9TOjMsTUFDOjQsV0VCOjcsV1hfTVA6OCxRUV9NUDo5LFRUX01QOjEwLEJBSURVX01QOjExLEFMSV9NUDoxMixJUEFEOjEzLFVOSV9OQVRJVkVfQVBQOjE1fSxyPVwiMS43LjNcIixhPTUzNzA0ODE2OCx1PVwiQ0hJTkFcIixjPVwiT1ZFUlNFQVwiLGw9XCJTSU5HQVBPUkVcIixkPVwiS09SRUFcIixwPVwiR0VSTUFOWVwiLGg9XCJJTkRcIixnPVwiSlBOXCIsXz1cIlVTQVwiLG09e0hPU1Q6e0NVUlJFTlQ6e0RFRkFVTFQ6XCJ3c3M6Ly93c3MuaW0ucWNsb3VkLmNvbVwiLFNUQVQ6XCJodHRwczovL2V2ZW50cy5pbS5xY2xvdWQuY29tXCJ9LHNldEN1cnJlbnQoZT11KXt0aGlzLkNVUlJFTlQ9aS5QUk9EVUNUSU9OW2VdfX0sTkFNRTp7T1BFTl9JTTpcIm9wZW5pbVwiLE9QRU5fSU1fTVNHX0VYVDpcIm9wZW5pbV9tc2dfZXh0X2h0dHBfc3ZjXCIsR1JPVVA6XCJncm91cF9vcGVuX2h0dHBfc3ZjXCIsR1JPVVBfQVZDSEFUUk9PTTpcImdyb3VwX29wZW5fYXZjaGF0cm9vbV9odHRwX3N2Y1wiLEdST1VQX0NPTU1VTklUWTpcIm1pbGxpb25fZ3JvdXBfb3Blbl9odHRwX3N2Y1wiLEdST1VQX0FUVFI6XCJncm91cF9vcGVuX2F0dHJfaHR0cF9zdmNcIixGUklFTkQ6XCJzbnNcIixQUk9GSUxFOlwicHJvZmlsZVwiLFJFQ0VOVF9DT05UQUNUOlwicmVjZW50Y29udGFjdFwiLFBJQzpcIm9wZW5waWNcIixCSUdfR1JPVVBfTk9fQVVUSDpcImdyb3VwX29wZW5faHR0cF9ub2F1dGhfc3ZjXCIsQklHX0dST1VQX0xPTkdfUE9MTElORzpcImdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfc3ZjXCIsQklHX0dST1VQX0xPTkdfUE9MTElOR19OT19BVVRIOlwiZ3JvdXBfb3Blbl9sb25nX3BvbGxpbmdfaHR0cF9ub2F1dGhfc3ZjXCIsSU1fT1BFTl9TVEFUOlwiaW1vcGVuc3RhdFwiLFdFQl9JTTpcIndlYmltXCIsSU1fQ09TX1NJR046XCJpbV9jb3Nfc2lnbl9zdnJcIixDVVNUT01fVVBMT0FEOlwiaW1fY29zX21zZ1wiLEhFQVJUQkVBVDpcImhlYXJ0YmVhdFwiLElNX09QRU5fUFVTSDpcImltX29wZW5fcHVzaFwiLElNX09QRU5fU1RBVFVTOlwiaW1fb3Blbl9zdGF0dXNcIixJTV9MT05HX01FU1NBR0U6XCJpbV9sb25nX21zZ1wiLElNX0NPTkZJR19NQU5BR0VSOlwiaW1fc2RrX2NvbmZpZ19tZ3JcIixTVEFUX1NFUlZJQ0U6XCJTdGF0U3ZjXCIsT1ZFUkxPQURfUFVTSDpcIk92ZXJMb2FkUHVzaFwiLElNX01TR19BVURJVF9NR1I6XCJpbV9tc2dfYXVkaXRfbWdyXCIsVFVJUk9PTV9TVlI6XCJ0dWlfcm9vbV9zdnJcIixJTV9PUEVOX1RSQU5TTEFURTpcImltX29wZW5fdHJhbnNsYXRlXCJ9LENNRDp7TE9HSU46XCJ3c2xvZ2luXCIsTE9HT1VUX0xPTkdfUE9MTDpcImxvbmdwb2xsaW5nbG9nb3V0XCIsTE9HT1VUOlwid3Nsb2dvdXRcIixIRUxMTzpcIndzaGVsbG9cIixTVEFUX0JBQ0tHUk9VTkQ6XCJ3c19zdGF0X2JhY2tncm91bmRcIixTVEFUX0ZPUkVHUk9VTkQ6XCJ3c19zdGF0X2ZvcmVncm91bmRcIixTRVRfVE9LRU46XCJ3c19zdGF0X3NldHRva2VuXCIsUE9SVFJBSVRfR0VUOlwicG9ydHJhaXRfZ2V0X2FsbFwiLFBPUlRSQUlUX1NFVDpcInBvcnRyYWl0X3NldFwiLEdFVF9MT05HX1BPTExfSUQ6XCJnZXRsb25ncG9sbGluZ2lkXCIsTE9OR19QT0xMOlwibG9uZ3BvbGxpbmdcIixBVkNIQVRST09NX0xPTkdfUE9MTDpcImdldF9tc2dcIixBRERfRlJJRU5EOlwiZnJpZW5kX2FkZFwiLFVQREFURV9GUklFTkQ6XCJmcmllbmRfdXBkYXRlXCIsR0VUX0ZSSUVORF9MSVNUOlwiZnJpZW5kX2dldFwiLEdFVF9GUklFTkRfUFJPRklMRTpcImZyaWVuZF9nZXRfc3BlY2lmaWVkXCIsREVMRVRFX0ZSSUVORDpcImZyaWVuZF9kZWxldGVcIixDSEVDS19GUklFTkQ6XCJmcmllbmRfY2hlY2tcIixHRVRfRlJJRU5EX0dST1VQX0xJU1Q6XCJncm91cF9nZXRcIixSRVNQT05EX0ZSSUVORF9BUFBMSUNBVElPTjpcImZyaWVuZF9yZXNwb25zZVwiLEdFVF9GUklFTkRfQVBQTElDQVRJT05fTElTVDpcInBlbmRlbmN5X2dldFwiLERFTEVURV9GUklFTkRfQVBQTElDQVRJT046XCJwZW5kZW5jeV9kZWxldGVcIixSRVBPUlRfRlJJRU5EX0FQUExJQ0FUSU9OOlwicGVuZGVuY3lfcmVwb3J0XCIsR0VUX0dST1VQX0FQUExJQ0FUSU9OOlwiZ2V0X3BlbmRlbmN5XCIsQ1JFQVRFX0ZSSUVORF9HUk9VUDpcImdyb3VwX2FkZFwiLERFTEVURV9GUklFTkRfR1JPVVA6XCJncm91cF9kZWxldGVcIixVUERBVEVfRlJJRU5EX0dST1VQOlwiZ3JvdXBfdXBkYXRlXCIsR0VUX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfZ2V0XCIsQUREX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfYWRkXCIsREVMRVRFX0JMQUNLTElTVDpcImJsYWNrX2xpc3RfZGVsZXRlXCIsQ1JFQVRFX0dST1VQOlwiY3JlYXRlX2dyb3VwXCIsR0VUX0pPSU5FRF9HUk9VUFM6XCJnZXRfam9pbmVkX2dyb3VwX2xpc3RcIixTRVRfR1JPVVBfQVRUUklCVVRFUzpcInNldF9ncm91cF9hdHRyXCIsTU9ESUZZX0dST1VQX0FUVFJJQlVURVM6XCJtb2RpZnlfZ3JvdXBfYXR0clwiLERFTEVURV9HUk9VUF9BVFRSSUJVVEVTOlwiZGVsZXRlX2dyb3VwX2F0dHJcIixDTEVBUl9HUk9VUF9BVFRSSUJVVEVTOlwiY2xlYXJfZ3JvdXBfYXR0clwiLEdFVF9HUk9VUF9BVFRSSUJVVEVTOlwiZ2V0X2dyb3VwX2F0dHJcIixTRU5EX01FU1NBR0U6XCJzZW5kbXNnXCIsUkVWT0tFX0MyQ19NRVNTQUdFOlwibXNnd2l0aGRyYXdcIixERUxFVEVfQzJDX01FU1NBR0U6XCJkZWxldGVfYzJjX21zZ19yYW1ibGVcIixNT0RJRllfQzJDX01FU1NBR0U6XCJtb2RpZnlfYzJjX21zZ1wiLE1PRElGWV9DMkNfTUVTU0FHRV9FWFRFTlNJT05TOlwic2V0X2tleV92YWx1ZXNcIixHRVRfQzJDX01FU1NBR0VfRVhURU5TSU9OUzpcImdldF9rZXlfdmFsdWVzXCIsU0VORF9HUk9VUF9NRVNTQUdFOlwic2VuZF9ncm91cF9tc2dcIixSRVZPS0VfR1JPVVBfTUVTU0FHRTpcImdyb3VwX21zZ19yZWNhbGxcIixERUxFVEVfR1JPVVBfTUVTU0FHRTpcImRlbGV0ZV9ncm91cF9yYW1ibGVfbXNnX2J5X3NlcVwiLE1PRElGWV9HUk9VUF9NRVNTQUdFOlwibW9kaWZ5X2dyb3VwX21zZ1wiLE1PRElGWV9HUk9VUF9NRVNTQUdFX0VYVEVOU0lPTlM6XCJncm91cF9zZXRfa2V5X3ZhbHVlc1wiLEdFVF9HUk9VUF9NRVNTQUdFX0VYVEVOU0lPTlM6XCJncm91cF9nZXRfa2V5X3ZhbHVlc1wiLEdFVF9HUk9VUF9JTkZPOlwiZ2V0X2dyb3VwX3NlbGZfbWVtYmVyX2luZm9cIixHRVRfR1JPVVBfTUVNQkVSX0lORk86XCJnZXRfc3BlY2lmaWVkX2dyb3VwX21lbWJlcl9pbmZvXCIsR0VUX0dST1VQX01FTUJFUl9MSVNUOlwiZ2V0X2dyb3VwX21lbWJlcl9pbmZvXCIsR0VUX0FWQ0hBVFJPT01fTUVNQkVSX0xJU1Q6XCJnZXRfbWVtYmVyc1wiLE1BUktfQVZDSEFUUk9PTV9NRU1CRVJfSU5GTzpcIm1vZGlmeV91c2VyX2luZm9cIixRVUlUX0dST1VQOlwicXVpdF9ncm91cFwiLENIQU5HRV9HUk9VUF9PV05FUjpcImNoYW5nZV9ncm91cF9vd25lclwiLERFU1RST1lfR1JPVVA6XCJkZXN0cm95X2dyb3VwXCIsQUREX0dST1VQX01FTUJFUjpcImFkZF9ncm91cF9tZW1iZXJcIixERUxFVEVfR1JPVVBfTUVNQkVSOlwiZGVsZXRlX2dyb3VwX21lbWJlclwiLEJBTl9BVkNIQVRST09NX01FTUJFUjpcImJhbl9ncm91cF9tZW1iZXJcIixTRUFSQ0hfR1JPVVBfQllfSUQ6XCJnZXRfZ3JvdXBfcHVibGljX2luZm9cIixBUFBMWV9KT0lOX0dST1VQOlwiYXBwbHlfam9pbl9ncm91cFwiLEhBTkRMRV9BUFBMWV9KT0lOX0dST1VQOlwiaGFuZGxlX2FwcGx5X2pvaW5fZ3JvdXBcIixIQU5ETEVfSU5WSVRFX0pPSU5fR1JPVVA6XCJoYW5kbGVfaW52aXRlX2pvaW5fcGVybWlzc2lvbl9ncm91cFwiLEhBTkRMRV9HUk9VUF9JTlZJVEFUSU9OOlwiaGFuZGxlX2ludml0ZV9qb2luX2dyb3VwXCIsTU9ESUZZX0dST1VQX0lORk86XCJtb2RpZnlfZ3JvdXBfYmFzZV9pbmZvXCIsTU9ESUZZX0dST1VQX01FTUJFUl9JTkZPOlwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIsREVMRVRFX0dST1VQX1NZU1RFTV9NRVNTQUdFOlwiZGVsZXRlbXNnXCIsREVMRVRFX0dST1VQX0FUX1RJUFM6XCJkZWxldGVtc2dcIixHRVRfR1JPVVBfTk9USUZZOlwiZ2V0X2dyb3VwX25vdGlmeVwiLEdFVF9DT05WRVJTQVRJT05fTElTVDpcImdldFwiLFBBR0lOR19HRVRfQ09OVkVSU0FUSU9OX0xJU1Q6XCJwYWdlX2dldFwiLERFTEVURV9DT05WRVJTQVRJT046XCJiYXRjaF9kZWxldGVcIixDTEVBUl9ISVNUT1JZX01FU1NBR0U6XCJjbGVhcl9tc2dcIixQSU5fQ09OVkVSU0FUSU9OOlwidG9wXCIsU0VUX0NPTlZFUlNBVElPTl9DVVNUT01fREFUQTpcIm1hcmtfY29udGFjdFwiLE1BUktfQ09OVkVSU0FUSU9OOlwibWFya19jb250YWN0XCIsQ1JFQVRFX0NPTlZFUlNBVElPTl9HUk9VUDpcImNyZWF0ZV9jb250YWN0X2dyb3VwXCIsREVMRVRFX0NPTlZFUlNBVElPTl9HUk9VUDpcImRlbF9jb250YWN0X2dyb3VwXCIsVVBEQVRFX0NPTlZFUlNBVElPTl9HUk9VUDpcInVwZGF0ZV9jb250YWN0X2dyb3VwXCIsR0VUX0NPTlZFUlNBVElPTl9HUk9VUF9MSVNUOlwiZ2V0X2NvbnRhY3RfZ3JvdXBcIixHRVRfTUVTU0FHRVM6XCJnZXRtc2dcIixHRVRfQzJDX1JPQU1fTUVTU0FHRVM6XCJnZXRyb2FtbXNnXCIsU0VUX0MyQ19QRUVSX01VVEVfTk9USUZJQ0FUSU9OUzpcInNldF9jMmNfcGVlcl9tdXRlX25vdGlmaWNhdGlvbnNcIixHRVRfQzJDX1BFRVJfTVVURV9OT1RJRklDQVRJT05TOlwiZ2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLEdFVF9HUk9VUF9ST0FNX01FU1NBR0VTOlwiZ3JvdXBfbXNnX2dldFwiLEdFVF9SRUFEX1JFQ0VJUFQ6XCJnZXRfZ3JvdXBfbXNnX3JlY2VpcHRcIixHRVRfUkVBRF9SRUNFSVBUX0RFVEFJTDpcImdldF9ncm91cF9tc2dfcmVjZWlwdF9kZXRhaWxcIixTRU5EX1JFQURfUkVDRUlQVDpcImdyb3VwX21zZ19yZWNlaXB0XCIsU0VORF9DMkNfUkVBRF9SRUNFSVBUOlwiYzJjX21zZ19yZWFkX3JlY2VpcHRcIixTRVRfQzJDX01FU1NBR0VfUkVBRDpcIm1zZ3JlYWRlZFwiLEdFVF9QRUVSX1JFQURfVElNRTpcImdldF9wZWVyX3JlYWRfdGltZVwiLFNFVF9HUk9VUF9NRVNTQUdFX1JFQUQ6XCJtc2dfcmVhZF9yZXBvcnRcIixGSUxFX1JFQURfQU5EX1dSSVRFX0FVVEhLRVk6XCJhdXRoa2V5XCIsRklMRV9VUExPQUQ6XCJwaWNfdXBcIixDT1NfU0lHTjpcImNvc1wiLENPU19QUkVfU0lHOlwicHJlX3NpZ1wiLFZJREVPX0NPVkVSOlwidmlkZW9fY292ZXJcIixUSU1fV0VCX1JFUE9SVF9WMjpcInRpbV93ZWJfcmVwb3J0X3YyXCIsQklHX0RBVEFfSEFMTFdBWV9BVVRIX0tFWTpcImF1dGhrZXlcIixHRVRfT05MSU5FX01FTUJFUl9OVU06XCJnZXRfb25saW5lX21lbWJlcl9udW1cIixBTElWRTpcImFsaXZlXCIsTUVTU0FHRV9QVVNIOlwibXNnX3B1c2hcIixNVUxUSV9NRVNTQUdFX1BVU0g6XCJtdWx0aV9tc2dfcHVzaF93c1wiLE1FU1NBR0VfUFVTSF9BQ0s6XCJ3c19tc2dfcHVzaF9hY2tcIixTVEFUVVNfRk9SQ0VfT0ZGTElORTpcInN0YXRfZm9yY2VvZmZsaW5lXCIsRE9XTkxPQURfTUVSR0VSX01FU1NBR0U6XCJnZXRfcmVsYXlfanNvbl9tc2dcIixVUExPQURfTUVSR0VSX01FU1NBR0U6XCJzYXZlX3JlbGF5X2pzb25fbXNnXCIsRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJmZXRjaF9jb25maWdcIixQVVNIRURfQ0xPVURfQ09OVFJPTF9DT05GSUc6XCJwdXNoX2NvbmZpZ3YyXCIsRkVUQ0hfQ09NTUVSQ0lBTF9DT05GSUc6XCJmZXRjaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixQVVNIRURfQ09NTUVSQ0lBTF9DT05GSUc6XCJwdXNoX2ltc2RrX3B1cmNoYXNlX2JpdHN2MlwiLEtJQ0tfT1RIRVI6XCJLaWNrT3RoZXJcIixPVkVSTE9BRF9OT1RJRlk6XCJub3RpZnkyXCIsU0VUX0FMTF9NRVNTQUdFX1JFQUQ6XCJyZWFkX2FsbF91bnJlYWRfbXNnXCIsQ1JFQVRFX1RPUElDOlwiY3JlYXRlX3RvcGljXCIsREVMRVRFX1RPUElDOlwiZGVzdHJveV90b3BpY1wiLFVQREFURV9UT1BJQ19QUk9GSUxFOlwibW9kaWZ5X3RvcGljXCIsR0VUX1RPUElDX0xJU1Q6XCJnZXRfdG9waWNcIixTRVRfU0VMRl9TVEFUVVM6XCJ3c19zZXRfY3VzdG9tX3N0YXR1c1wiLEdFVF9VU0VSX1NUQVRVUzpcIndzX2dldF91c2VyX3N0YXR1c1wiLFNVQlNDUklCRV9VU0VSX1NUQVRVUzpcIndzX3N0YXR1c19zdWJzY3JpYmVcIixVTlNVQlNDUklCRV9VU0VSX1NUQVRVUzpcIndzX3N0YXR1c191bnN1YnNjcmliZVwiLEdFVF9SUE9GQU5JVFlfTElTVDpcImdldF9sb2NhbF93b3Jkc1wiLFRSQU5TTEFURV9URVhUOlwid3NfYmF0Y2hfdHJhbnNfdGV4dFwiLFVQREFURV9HUk9VUF9DT1VOVEVSOlwidXBkYXRlX2dyb3VwX2NvdW50ZXJcIixHRVRfR1JPVVBfQ09VTlRFUjpcImdldF9ncm91cF9jb3VudGVyXCJ9LENIQU5ORUw6e1NPQ0tFVDoxLFhIUjoyLEFVVE86MH0sTkFNRV9WRVJTSU9OOntvcGVuaW06XCJ2NFwiLGdyb3VwX29wZW5faHR0cF9zdmM6XCJ2NFwiLHNuczpcInY0XCIscHJvZmlsZTpcInY0XCIscmVjZW50Y29udGFjdDpcInY0XCIsb3BlbnBpYzpcInY0XCIsZ3JvdXBfb3Blbl9odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGdyb3VwX29wZW5fbG9uZ19wb2xsaW5nX2h0dHBfc3ZjOlwidjRcIixncm91cF9vcGVuX2xvbmdfcG9sbGluZ19odHRwX25vYXV0aF9zdmM6XCJ2NFwiLGltb3BlbnN0YXQ6XCJ2NFwiLGltX2Nvc19zaWduX3N2cjpcInY0XCIsaW1fY29zX21zZzpcInY0XCIsd2ViaW06XCJ2NFwiLGltX29wZW5fcHVzaDpcInY0XCIsaW1fb3Blbl9zdGF0dXM6XCJ2NFwifX0sTT17U0VBUkNIX01TRzpuZXcgbygwLE1hdGgucG93KDIsMCkpLnRvU3RyaW5nKCksU0VBUkNIX0dSUF9TTlM6bmV3IG8oMCxNYXRoLnBvdygyLDEpKS50b1N0cmluZygpLEFWQ0hBVFJPT01fSElTVE9SWV9NU0c6bmV3IG8oMCxNYXRoLnBvdygyLDIpKS50b1N0cmluZygpLEdSUF9DT01NVU5JVFk6bmV3IG8oMCxNYXRoLnBvdygyLDMpKS50b1N0cmluZygpLE1TR19UT19TUEVDSUZJRURfR1JQX01CUjpuZXcgbygwLE1hdGgucG93KDIsNCkpLnRvU3RyaW5nKCksQVZDSEFUUk9PTV9NQlJfTElTVDpuZXcgbygwLE1hdGgucG93KDIsNikpLnRvU3RyaW5nKCksVVNFUl9TVEFUVVM6bmV3IG8oMCxNYXRoLnBvdygyLDcpKS50b1N0cmluZygpLENPTlZfTUFSSzpuZXcgbygwLE1hdGgucG93KDIsOSkpLnRvU3RyaW5nKCksQ09OVl9HUk9VUDpuZXcgbygwLE1hdGgucG93KDIsMTApKS50b1N0cmluZygpLEFWQ0hBVFJPT01fQkFOX01CUjpuZXcgbygwLE1hdGgucG93KDIsMTEpKS50b1N0cmluZygpLE1TR19FWFQ6bmV3IG8oMCxNYXRoLnBvdygyLDEzKSkudG9TdHJpbmcoKSxHUlBfQ09VTlRFUjpuZXcgbygwLE1hdGgucG93KDIsMTUpKS50b1N0cmluZygpfSxmPVwiYzJjX3RleHRfbWVzc2FnZVwiLEk9XCJjMmNfY3VzdG9tX21lc3NhZ2VcIixDPVwiZ3JvdXBfdGV4dF9tZXNzYWdlXCIsVD1cImdyb3VwX2N1c3RvbV9tZXNzYWdlXCIseT1cInVzZXJfcHJvZmlsZVwiLEQ9XCJzbnNcIixFPVwiZ3JvdXBfcHJvZmlsZVwiLFM9XCJncm91cF9tZW1iZXJfcHJvZmlsZVwiO20uSE9TVC5zZXRDdXJyZW50KHUpO2NvbnN0IEw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHd4JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3eC5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbih3eC5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksQT1MJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3eC5jcmVhdGVHYW1lUG9ydGFsLHY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHFxJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBxcS5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihxcS5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksTj1cInVuZGVmaW5lZFwiIT10eXBlb2YgdHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR0LmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHR0LmdldFN5c3RlbUluZm9TeW5jKCkuZm9udFNpemVTZXR0aW5nKSxSPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzd2FuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzd2FuLmdldFN5c3RlbUluZm9TeW5jJiZCb29sZWFuKHN3YW4uZ2V0U3lzdGVtSW5mb1N5bmMoKS5mb250U2l6ZVNldHRpbmcpLE89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG15JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBteS5nZXRTeXN0ZW1JbmZvU3luYyYmQm9vbGVhbihteS5nZXRTeXN0ZW1JbmZvU3luYygpLmZvbnRTaXplU2V0dGluZyksRz1cInVuZGVmaW5lZFwiIT10eXBlb2YgamQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGpkLmdldFN5c3RlbUluZm9TeW5jLFU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyYmXCJmdW5jdGlvblwiPT10eXBlb2YgdW5pLnJlcXVpcmVOYXRpdmVQbHVnaW4saz1cInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pLFA9THx8dnx8Tnx8Unx8T3x8VXx8RyxiPShcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KSYmIVAsdz12P3FxOk4/dHQ6Uj9zd2FuOk8/bXk6TD93eDpVP3VuaTpHP2pkOnt9LEY9YiYmd2luZG93JiZ3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudHx8XCJcIiwkPS8obWljcm9tZXNzZW5nZXJ8d2ViYnJvd3NlcikvaS50ZXN0KEYpLHE9L0FwcGxlV2ViS2l0XFwvKFtcXGQuXSspL2kuZXhlYyhGKTtxJiZwYXJzZUZsb2F0KHEucG9wKCkpO2NvbnN0IHg9ZnVuY3Rpb24oKXtsZXQgZT1cIldFQlwiO3JldHVybiAkP2U9XCJXRUJcIjp2P2U9XCJRUV9NUFwiOk4/ZT1cIlRUX01QXCI6Uj9lPVwiQkFJRFVfTVBcIjpPP2U9XCJBTElfTVBcIjpMP2U9XCJXWF9NUFwiOlUmJihlPVwiVU5JX05BVElWRV9BUFBcIiksbltlXX0oKSxWPS9pUGFkL2kudGVzdChGKSxCPS9pUGhvbmUvaS50ZXN0KEYpJiYhVixIPS9pUG9kL2kudGVzdChGKSxLPUJ8fFZ8fEgsVz1mdW5jdGlvbigpe2NvbnN0IGU9Ri5tYXRjaCgvT1MgKFxcZCspXy9pKTtyZXR1cm4gZSYmZVsxXT9lWzFdOm51bGx9KCksWT0vQW5kcm9pZC9pLnRlc3QoRiksaj1mdW5jdGlvbigpe2NvbnN0IGU9Ri5tYXRjaCgvQW5kcm9pZCAoXFxkKykoPzpcXC4oXFxkKykpPyg/OlxcLihcXGQrKSkqL2kpO2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9ZVsxXSYmcGFyc2VGbG9hdChlWzFdKSxzPWVbMl0mJnBhcnNlRmxvYXQoZVsyXSk7cmV0dXJuIHQmJnM/cGFyc2VGbG9hdChlWzFdK1wiLlwiK2VbMl0pOnR8fG51bGx9KCk7IWZ1bmN0aW9uKCl7Y29uc3QgZT1GLm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtlJiZlWzFdJiZwYXJzZUZsb2F0KGVbMV0pfSgpO2NvbnN0IHo9L01TSUUvLnRlc3QoRil8fEYuaW5kZXhPZihcIlRyaWRlbnRcIik+LTEmJkYuaW5kZXhPZihcInJ2OjExLjBcIik+LTEsSj1mdW5jdGlvbigpe2NvbnN0IGU9L01TSUVcXHMoXFxkKylcXC5cXGQvLmV4ZWMoRik7bGV0IHQ9ZSYmcGFyc2VGbG9hdChlWzFdKTtyZXR1cm4hdCYmL1RyaWRlbnRcXC83LjAvaS50ZXN0KEYpJiYvcnY6MTEuMC8udGVzdChGKSYmKHQ9MTEpLHR9KCk7IWZ1bmN0aW9uKCl7Y29uc3QgZT1GLm1hdGNoKC9UQlNcXC8oXFxkKykvaSk7aWYoZSYmZVsxXSllWzFdfSgpO2NvbnN0IFg9L1dpbmRvd3MvaS50ZXN0KEYpLFo9L01BQyBPUyBYL2kudGVzdChGKSxRPWImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBXb3JrZXImJiF6LGVlPVl8fEssdGU9YiYmdm9pZCAwIT09d2luZG93LnRlbmNlbnRfY2xvdWRfaW1fY3NpZ19mbHV0dGVyX2Zvcl93ZWJfMjVGX2N5O2xldCBzZSxvZTtzZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZT9jb25zb2xlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWwmJmdsb2JhbC5jb25zb2xlP2dsb2JhbC5jb25zb2xlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlP3dpbmRvdy5jb25zb2xlOnt9O2NvbnN0IGllPWZ1bmN0aW9uKCl7fSxuZT1bXCJhc3NlcnRcIixcImNsZWFyXCIsXCJjb3VudFwiLFwiZGVidWdcIixcImRpclwiLFwiZGlyeG1sXCIsXCJlcnJvclwiLFwiZ3JvdXBcIixcImdyb3VwQ29sbGFwc2VkXCIsXCJncm91cEVuZFwiLFwiaW5mb1wiLFwibG9nXCIsXCJwcm9maWxlXCIsXCJwcm9maWxlRW5kXCIsXCJ0YWJsZVwiLFwidGltZVwiLFwidGltZUVuZFwiLFwidGltZVN0YW1wXCIsXCJ0cmFjZVwiLFwid2FyblwiXTtsZXQgcmU9bmUubGVuZ3RoO2Zvcig7cmUtLTspb2U9bmVbcmVdLGNvbnNvbGVbb2VdfHwoc2Vbb2VdPWllKTt2YXIgYWU9c2U7bGV0IHVlPTA7Y29uc3QgY2U9ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKSt1ZX0sbGU9ZnVuY3Rpb24oKXt1ZT0wfSxkZT1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKGNlKCkvMWUzKX07bGV0IHBlPTA7ZnVuY3Rpb24gaGUoKXtyZXR1cm4geXQoKT9cIiVjIFRJTSAlY1wiOlwiVElNXCJ9ZnVuY3Rpb24gZ2UoKXtjb25zdCBlPWZ1bmN0aW9uKCl7Y29uc3QgZT1uZXcgRGF0ZTtyZXR1cm4gZS5zZXRUaW1lKGNlKCkpLGV9KCk7cmV0dXJuIGUudG9Mb2NhbGVUaW1lU3RyaW5nKFwiZW4tVVNcIix7aG91cjEyOiExfSkrXCIuXCIrZnVuY3Rpb24oZSl7bGV0IHQ7c3dpdGNoKGUudG9TdHJpbmcoKS5sZW5ndGgpe2Nhc2UgMTp0PVwiMDBcIitlO2JyZWFrO2Nhc2UgMjp0PVwiMFwiK2U7YnJlYWs7ZGVmYXVsdDp0PWV9cmV0dXJuIHR9KGUuZ2V0TWlsbGlzZWNvbmRzKCkpfWNvbnN0IF9lPXthcmd1bWVudHMyU3RyaW5nKGUpe2xldCB0PVwiXCI7aWYoMT09PWUubGVuZ3RoKXQ9ZVswXTtlbHNlIGZvcihsZXQgcz0wLG89ZS5sZW5ndGg7czxvO3MrKylGZShlW3NdKT9xZShlW3NdKT90Kz1IZShlW3NdKTp0Kz1KU09OLnN0cmluZ2lmeShlW3NdKTp0Kz1lW3NdLHQrPVwiIFwiO3JldHVybiB0fSxfZXhlYyhlLHQpe3l0KCk/YWVbZV0oaGUoKSxcImJhY2tncm91bmQ6IzBhYmY1YjsgcGFkZGluZzoxcHg7IGJvcmRlci1yYWRpdXM6M3B4OyBjb2xvcjogI2ZmZlwiLFwiYmFja2dyb3VuZDp0cmFuc3BhcmVudFwiLGdlKCksdCk6YWVbZV0oYCR7aGUoKX0gJHtnZSgpfSAke3R9YCl9LGQ6ZnVuY3Rpb24oKXtpZihwZTw9LTEpe2NvbnN0IGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7dGhpcy5fZXhlYyhcImRlYnVnXCIsZSl9fSxsOmZ1bmN0aW9uKCl7aWYocGU8PTApe2NvbnN0IGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7dGhpcy5fZXhlYyhcImxvZ1wiLGUpfX0sbG9nOmZ1bmN0aW9uKCl7aWYocGU8PTApe2NvbnN0IGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7dGhpcy5fZXhlYyhcImxvZ1wiLGUpfX0saTpmdW5jdGlvbigpe2lmKHBlPD0xKXtjb25zdCBlPXRoaXMuYXJndW1lbnRzMlN0cmluZyhhcmd1bWVudHMpO3RoaXMuX2V4ZWMoXCJpbmZvXCIsZSl9fSx3OmZ1bmN0aW9uKCl7aWYocGU8PTIpe2NvbnN0IGU9dGhpcy5hcmd1bWVudHMyU3RyaW5nKGFyZ3VtZW50cyk7dGhpcy5fZXhlYyhcIndhcm5cIixlKX19LGU6ZnVuY3Rpb24oKXtpZihwZTw9Myl7Y29uc3QgZT10aGlzLmFyZ3VtZW50czJTdHJpbmcoYXJndW1lbnRzKTt0aGlzLl9leGVjKFwiZXJyb3JcIixlKX19LHNldExldmVsOmZ1bmN0aW9uKGUpe2U8NCYmdGhpcy5fZXhlYyhcImxvZ1wiLFwic2V0IGxldmVsIGZyb20gXCIrcGUrXCIgdG8gXCIrZSkscGU9ZX0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gcGV9fSxtZT17SlBHOjEsSlBFRzoxLEdJRjoyLFBORzozLEJNUDo0LFVOS05PV046MjU1fSxNZT17TklDSzpcIlRhZ19Qcm9maWxlX0lNX05pY2tcIixHRU5ERVI6XCJUYWdfUHJvZmlsZV9JTV9HZW5kZXJcIixCSVJUSERBWTpcIlRhZ19Qcm9maWxlX0lNX0JpcnRoRGF5XCIsTE9DQVRJT046XCJUYWdfUHJvZmlsZV9JTV9Mb2NhdGlvblwiLFNFTEZTSUdOQVRVUkU6XCJUYWdfUHJvZmlsZV9JTV9TZWxmU2lnbmF0dXJlXCIsQUxMT1dUWVBFOlwiVGFnX1Byb2ZpbGVfSU1fQWxsb3dUeXBlXCIsTEFOR1VBR0U6XCJUYWdfUHJvZmlsZV9JTV9MYW5ndWFnZVwiLEFWQVRBUjpcIlRhZ19Qcm9maWxlX0lNX0ltYWdlXCIsTUVTU0FHRVNFVFRJTkdTOlwiVGFnX1Byb2ZpbGVfSU1fTXNnU2V0dGluZ3NcIixBRE1JTkZPUkJJRFRZUEU6XCJUYWdfUHJvZmlsZV9JTV9BZG1pbkZvcmJpZFR5cGVcIixMRVZFTDpcIlRhZ19Qcm9maWxlX0lNX0xldmVsXCIsUk9MRTpcIlRhZ19Qcm9maWxlX0lNX1JvbGVcIn0sZmU9XCJUYWdfU05TX0lNX0dyb3VwXCIsSWU9XCJUYWdfU05TX0lNX1JlbWFya1wiLENlPVwiVGFnX1NOU19JTV9BZGRTb3VyY2VcIixUZT1cIlRhZ19TTlNfSU1fQWRkV29yZGluZ1wiLHllPVwiVGFnX1NOU19JTV9BZGRUaW1lXCIsRGU9e1VOS05PV046XCJHZW5kZXJfVHlwZV9Vbmtub3duXCIsRkVNQUxFOlwiR2VuZGVyX1R5cGVfRmVtYWxlXCIsTUFMRTpcIkdlbmRlcl9UeXBlX01hbGVcIn0sRWU9e05PTkU6XCJBZG1pbkZvcmJpZF9UeXBlX05vbmVcIixTRU5EX09VVDpcIkFkbWluRm9yYmlkX1R5cGVfU2VuZE91dFwifSxTZT17TkVFRF9DT05GSVJNOlwiQWxsb3dUeXBlX1R5cGVfTmVlZENvbmZpcm1cIixBTExPV19BTlk6XCJBbGxvd1R5cGVfVHlwZV9BbGxvd0FueVwiLERFTllfQU5ZOlwiQWxsb3dUeXBlX1R5cGVfRGVueUFueVwifSxMZT1cIkpvaW5lZFN1Y2Nlc3NcIixBZT1cIldhaXRBZG1pbkFwcHJvdmFsXCIsdmU9XCJAVEdTI19cIixOZT1cIkBUT1BJQyNfXCIsUmU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJtYXBcIj09PXhlKGUpfSxPZT1mdW5jdGlvbihlKXtyZXR1cm5cImZpbGVcIj09PXhlKGUpfSxHZT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUmJihcIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUtMCl8fFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yPT09TnVtYmVyKX0sVWU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LGtlPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT09ZSYmXCJvYmplY3RcIj09dHlwZW9mIGV9LFBlPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4hMTtjb25zdCB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihudWxsPT09dClyZXR1cm4hMDtsZXQgcz10O2Zvcig7bnVsbCE9PU9iamVjdC5nZXRQcm90b3R5cGVPZihzKTspcz1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7cmV0dXJuIHQ9PT1zfSxiZT1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBBcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXkoZSk6XCJhcnJheVwiPT09eGUoZSl9LHdlPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfSxGZT1mdW5jdGlvbihlKXtyZXR1cm4gYmUoZSl8fGtlKGUpfSwkZT1mdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfSxxZT1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yfSx4ZT1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLm1hdGNoKC9eXFxbb2JqZWN0ICguKilcXF0kLylbMV0udG9Mb3dlckNhc2UoKX0sVmU9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuITE7Y29uc3QgdD1lWzBdO3JldHVybiEvW15hLXpBLVowLTldLy50ZXN0KHQpfTtEYXRlLm5vd3x8KERhdGUubm93PWZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9KTtjb25zdCBCZT1mdW5jdGlvbihlLHQscyxvKXtpZighRmUoZSl8fCFGZSh0KSlyZXR1cm4gMDtsZXQgaT0wO2NvbnN0IG49T2JqZWN0LmtleXModCk7bGV0IHI7Zm9yKGxldCBhPTAsdT1uLmxlbmd0aDthPHU7YSsrKWlmKHI9blthXSwhKHdlKHRbcl0pfHxzJiZzLmluY2x1ZGVzKHIpKSlpZihGZShlW3JdKSYmRmUodFtyXSkpaSs9QmUoZVtyXSx0W3JdLHMsbyk7ZWxzZXtpZihvJiZvLmluY2x1ZGVzKHRbcl0pKWNvbnRpbnVlO2Vbcl0hPT10W3JdJiYoZVtyXT10W3JdLGkrPTEpfXJldHVybiBpfSxIZT1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSxbXCJtZXNzYWdlXCIsXCJjb2RlXCJdKX0sS2U9ZnVuY3Rpb24oZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiAwO2xldCB0PTAscz1cIlwiLG89MCxpPTE7Y29uc3Qgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJnZvaWQgMCE9PWRvY3VtZW50LmNoYXJhY3RlclNldD9kb2N1bWVudC5jaGFyYWN0ZXJTZXQ6XCJVVEYtOFwiO2Zvcig7dm9pZCAwIT09ZVt0XTspcz1lW3QrK10saT1zLmNoYXJDb2RlQXRbdF08PTI1NT8xOiExPT09bj8zOjIsbys9aTtyZXR1cm4gb30sV2U9ZnVuY3Rpb24oZSl7Y29uc3QgdD1lfHw5OTk5OTk5OTtyZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKnQpfSxZZT1cIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCIsamU9WWUubGVuZ3RoLHplPWZ1bmN0aW9uKGUsdCl7Zm9yKGNvbnN0IHMgaW4gZSlpZihlW3NdPT09dClyZXR1cm4hMDtyZXR1cm4hMX0sSmU9e30sWGU9ZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1lLmluZGV4T2YoXCJodHRwOi8vXCIpfHwtMT09PWUuaW5kZXhPZihcImh0dHBzOi8vXCIpP1wiaHR0cHM6Ly9cIitlOmUucmVwbGFjZSgvaHR0cHN8aHR0cC8sXCJodHRwc1wiKX0sWmU9ZnVuY3Rpb24oZSl7aWYoMD09PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aClyZXR1cm4gT2JqZWN0LmNyZWF0ZShudWxsKTtjb25zdCB0PUFycmF5LmlzQXJyYXkoZSk/W106T2JqZWN0LmNyZWF0ZShudWxsKTtsZXQgcz1cIlwiO2Zvcihjb25zdCBvIGluIGUpbnVsbCE9PWVbb10/dm9pZCAwIT09ZVtvXT8ocz10eXBlb2YgZVtvXSxbXCJzdHJpbmdcIixcIm51bWJlclwiLFwiZnVuY3Rpb25cIixcImJvb2xlYW5cIl0uaW5kZXhPZihzKT49MD90W29dPWVbb106dFtvXT1aZShlW29dKSk6dFtvXT12b2lkIDA6dFtvXT1udWxsO3JldHVybiB0fTtmdW5jdGlvbiBRZShlLHQpe2lmKCFiZShlKXx8IWJlKHQpKXJldHVybiExO2xldCBzPSExO3JldHVybiB0LmZvckVhY2goKHtrZXk6dCx2YWx1ZTpvfSk9Pntjb25zdCBpPWUuZmluZChlPT5lLmtleT09PXQpO2k/aS52YWx1ZSE9PW8mJihpLnZhbHVlPW8scz0hMCk6KGUucHVzaCh7a2V5OnQsdmFsdWU6b30pLHM9ITApfSksc31jb25zdCBldD1lPT5lPT09dC5HUlBfQVZDSEFUUk9PTSxzdD0oe3R5cGU6ZSxncm91cElEOnN9KT0+ZT09PXQuR1JQX0NPTU1VTklUWXx8KFwiXCIrcykuc3RhcnRzV2l0aCh2ZSkmJiEoXCJcIitzKS5pbmNsdWRlcyhOZSksb3Q9ZT0+KFwiXCIrZSkuc3RhcnRzV2l0aCh2ZSkmJihcIlwiK2UpLmluY2x1ZGVzKE5lKSxpdD1lPT5VZShlKSYmZS5zbGljZSgwLDMpPT09dC5DT05WX0MyQyxudD1lPT5VZShlKSYmZS5zbGljZSgwLDUpPT09dC5DT05WX0dST1VQLHJ0PWU9PlVlKGUpJiZlPT09dC5DT05WX1NZU1RFTTtmdW5jdGlvbiBhdChlLHQpe2NvbnN0IHM9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gobz0+e3Nbb109dChlW29dLG8pfSksc31mdW5jdGlvbiB1dChlKXtyZXR1cm4gUD9uZXcgUHJvbWlzZSgodCxzKT0+e3cuZ2V0SW1hZ2VJbmZvKHtzcmM6ZSxzdWNjZXNzKGUpe3Qoe3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0fSl9LGZhaWwoKXt0KHt3aWR0aDowLGhlaWdodDowfSl9fSl9KTp6JiY5PT09Sj9Qcm9taXNlLnJlc29sdmUoe3dpZHRoOjAsaGVpZ2h0OjB9KTpuZXcgUHJvbWlzZSgodCxzKT0+e2xldCBvPW5ldyBJbWFnZTtvLm9ubG9hZD1mdW5jdGlvbigpe3Qoe3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fSksbz1udWxsfSxvLm9uZXJyb3I9ZnVuY3Rpb24oKXt0KHt3aWR0aDowLGhlaWdodDowfSksbz1udWxsfSxvLnNyYz1lfSl9ZnVuY3Rpb24gY3QoKXtmdW5jdGlvbiBlKCl7cmV0dXJuKDY1NTM2KigxK01hdGgucmFuZG9tKCkpfDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9cmV0dXJuYCR7ZSgpK2UoKX0ke2UoKX0ke2UoKX0ke2UoKX0ke2UoKX0ke2UoKX0ke2UoKX1gfWZ1bmN0aW9uIGx0KCl7bGV0IGU9XCJ1bmtub3duXCI7aWYoWiYmKGU9XCJtYWNcIiksWCYmKGU9XCJ3aW5kb3dzXCIpLEsmJihlPVwiaW9zXCIpLFkmJihlPVwiYW5kcm9pZFwiKSxQKXRyeXtjb25zdCB0PXcuZ2V0U3lzdGVtSW5mb1N5bmMoKS5wbGF0Zm9ybTt2b2lkIDAhPT10JiYoZT10KX1jYXRjaCh0KXt9cmV0dXJuIGV9ZnVuY3Rpb24gZHQoZSx0KXtlPWUuc3BsaXQoXCIuXCIpLHQ9dC5zcGxpdChcIi5cIik7Y29uc3Qgcz1NYXRoLm1heChlLmxlbmd0aCx0Lmxlbmd0aCk7Zm9yKDtlLmxlbmd0aDxzOyllLnB1c2goXCIwXCIpO2Zvcig7dC5sZW5ndGg8czspdC5wdXNoKFwiMFwiKTtmb3IobGV0IG89MDtvPHM7bysrKXtjb25zdCBzPXBhcnNlSW50KGVbb10pLGk9cGFyc2VJbnQodFtvXSk7aWYocz5pKXJldHVybiAxO2lmKHM8aSlyZXR1cm4tMX1yZXR1cm4gMH1mdW5jdGlvbiBwdChlKXtjb25zdHtvcmlnaW5Vcmw6dCxvcmlnaW5XaWR0aDpzLG9yaWdpbkhlaWdodDpvLG1pbjppPTE5OH09ZSxuPXBhcnNlSW50KHMpLHI9cGFyc2VJbnQobyksYT17dXJsOnZvaWQgMCx3aWR0aDowLGhlaWdodDowfTtpZigobjw9cj9uOnIpPD1pKWEudXJsPXQsYS53aWR0aD1uLGEuaGVpZ2h0PXI7ZWxzZXtyPD1uPyhhLndpZHRoPU1hdGguY2VpbChuKmkvciksYS5oZWlnaHQ9aSk6KGEud2lkdGg9aSxhLmhlaWdodD1NYXRoLmNlaWwocippL24pKTtjb25zdCBlPXQmJnQuaW5kZXhPZihcIj9cIik+LTE/dCtcIiZcIjp0K1wiP1wiO2EudXJsPTE5OD09PWk/ZStcImltYWdlVmlldzIvMy93LzE5OC9oLzE5OFwiOmUrXCJpbWFnZVZpZXcyLzMvdy83MjAvaC83MjBcIn1pZih3ZSh0KSl7Y29uc3R7dXJsOmUsLi4udH09YTtyZXR1cm4gdH1yZXR1cm4gYX1mdW5jdGlvbiBodChlKXtjb25zdCB0PWVbMl07ZVsyXT1lWzFdLGVbMV09dDtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyllW3NdLnNldFR5cGUocyl9ZnVuY3Rpb24gZ3QoZSl7Y29uc3R7c2VydmNtZDp0fT1lO3JldHVybiB0LnNsaWNlKHQuaW5kZXhPZihcIi5cIikrMSl9ZnVuY3Rpb24gX3QoZSx0KXtyZXR1cm4gTWF0aC5yb3VuZChOdW1iZXIoZSkqTWF0aC5wb3coMTAsdCkpL01hdGgucG93KDEwLHQpfWZ1bmN0aW9uIG10KGUsdCl7cmV0dXJuIGUuaW5jbHVkZXModCl9ZnVuY3Rpb24gTXQoZSx0KXtyZXR1cm4gZS5pbmNsdWRlcyh0KX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZS5zcGxpdChOZSlbMF19Y29uc3QgSXQ9ZnVuY3Rpb24oZSxzLG8pe2lmKHdlKHMpKXJldHVyblwiXCI7c3dpdGNoKGUpe2Nhc2UgdC5NU0dfVEVYVDpyZXR1cm4gcy50ZXh0O2Nhc2UgdC5NU0dfSU1BR0U6cmV0dXJuIG8/XCJbSW1hZ2VdXCI6XCJb5Zu+54mHXVwiO2Nhc2UgdC5NU0dfTE9DQVRJT046cmV0dXJuIG8/XCJbTG9jYXRpb25dXCI6XCJb5L2N572uXVwiO2Nhc2UgdC5NU0dfQVVESU86cmV0dXJuIG8/XCJbVm9pY2VdXCI6XCJb6K+t6Z+zXVwiO2Nhc2UgdC5NU0dfVklERU86cmV0dXJuIG8/XCJbVmlkZW9dXCI6XCJb6KeG6aKRXVwiO2Nhc2UgdC5NU0dfRklMRTpyZXR1cm4gbz9cIltGaWxlXVwiOlwiW+aWh+S7tl1cIjtjYXNlIHQuTVNHX0NVU1RPTTpyZXR1cm4gbz9cIltDdXN0b20gTWVzc2FnZXNdXCI6XCJb6Ieq5a6a5LmJ5raI5oGvXVwiO2Nhc2UgdC5NU0dfR1JQX1RJUDpyZXR1cm4gbz9cIltHcm91cCBOb3RpZmljYXRpb25dXCI6XCJb576k5o+Q56S65raI5oGvXVwiO2Nhc2UgdC5NU0dfR1JQX1NZU19OT1RJQ0U6cmV0dXJuIG8/XCJbR3JvdXAgU3lzdGVtIE1lc3NhZ2VdXCI6XCJb576k57O757uf6YCa55+lXVwiO2Nhc2UgdC5NU0dfRkFDRTpyZXR1cm4gbz9cIltBbmltYXRlZCBTdGlja2VyXVwiOlwiW+WKqOeUu+ihqOaDhV1cIjtjYXNlIHQuTVNHX01FUkdFUjpyZXR1cm4gbz9cIltDaGF0IFJlY29yZF1cIjpcIlvogYrlpKnorrDlvZVdXCI7ZGVmYXVsdDpyZXR1cm5cIlwifX07ZnVuY3Rpb24gQ3QoZSl7cmV0dXJuIGU9PT10Lk1TR19URVhUfHxlPT09dC5NU0dfQ1VTVE9NfHxlPT09dC5NU0dfTE9DQVRJT058fGU9PT10Lk1TR19GQUNFfWZ1bmN0aW9uIFR0KGUpe2NvbnN0IHQ9W107aWYoIVVlKGUpKXJldHVybiB0O2NvbnN0IHM9ZS5sZW5ndGg7aWYoMD09PXMpcmV0dXJuIHQ7Zm9yKGxldCBvPXMtMTtvPj0wO28tLSlcIjFcIj09PWVbb10mJnQucHVzaChNYXRoLnBvdygyLHMtby0xKSk7cmV0dXJuIHR9ZnVuY3Rpb24geXQoKXtyZXR1cm4heiYmIVB9ZnVuY3Rpb24gRHQoZSl7cmV0dXJuXCJ0aGUgbGVuZ3RoIG9mIHVzZXJJRExpc3QgY2Fubm90IGV4Y2VlZCBcIitlfWZ1bmN0aW9uIEV0KGUsdCl7aWYoIWUpcmV0dXJuO2xldCBzPWU7cmV0dXJuIHQmJihlLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpP3M9ZS5yZXBsYWNlKC9eaHR0cDpcXC9cXC9bXi9dKy8sdCk6ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikmJihzPWUucmVwbGFjZSgvXmh0dHBzOlxcL1xcL1teL10rLyx0KSkpLHN9Y29uc3QgU3Q9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBMdChlKXtpZihudWxsPT1lKXJldHVybiEwO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgZSlyZXR1cm4hMTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gMD09PWU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZS5sZW5ndGg7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gMD09PWUubGVuZ3RoO2lmKGUgaW5zdGFuY2VvZiBFcnJvcilyZXR1cm5cIlwiPT09ZS5tZXNzYWdlO2lmKFBlKGUpKXtmb3IoY29uc3QgdCBpbiBlKWlmKFN0LmNhbGwoZSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4hKCFSZShlKSYmKHQ9ZSxcInNldFwiIT09eGUodCkpJiYhT2UoZSkpJiYwPT09ZS5zaXplO3ZhciB0fWZ1bmN0aW9uIEF0KGUsdCxzKXtpZih2b2lkIDA9PT10KXJldHVybiEwO2xldCBvPSEwO2lmKFBlKHQpKU9iamVjdC5rZXlzKHQpLmZvckVhY2goaT0+e2NvbnN0IG49MT09PWUubGVuZ3RoP2VbMF1baV06dm9pZCAwO289ISF2dChuLHRbaV0scyxpKSYmb30pO2Vsc2UgaWYoYmUodCkpZm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspbz0hIXZ0KGVbaV0sdFtpXSxzLHRbaV0ubmFtZSkmJm87aWYobylyZXR1cm4gbzt0aHJvdyBuZXcgRXJyb3IoXCJQYXJhbXMgdmFsaWRhdGUgZmFpbGVkLlwiKX1mdW5jdGlvbiB2dChlLHQscyxvKXtpZih2b2lkIDA9PT10KXJldHVybiEwO2xldCBpPSEwO2lmKHQucmVxdWlyZWQmJkx0KGUpJiYoX2UuZShgWyR7c31dIE1pc3NpbmcgcmVxdWlyZWQgcGFyYW1zOiBcIiR7b31cIi5gKSxpPSExKSwhTHQoZSkpe2NvbnN0IG49eGUoZSkscj10LnR5cGUudG9Mb3dlckNhc2UoKTtuIT09ciYmKFwiYXN5bmNmdW5jdGlvblwiPT09biYmXCJmdW5jdGlvblwiPT09cnx8KF9lLmUoYFske3N9XSBJbnZhbGlkIHBhcmFtczogdHlwZSBjaGVjayBmYWlsZWQgZm9yIFwiJHtvfVwiLkV4cGVjdGVkICR7dC50eXBlfS5gKSxpPSExKSl9cmV0dXJuIHQudmFsaWRhdG9yJiYhdC52YWxpZGF0b3IoZSkmJihfZS5lKGBbJHtzfV0gSW52YWxpZCBwYXJhbXM6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwYXJhbXMuYCksaT0hMSksaX1jb25zdCBOdD17VU5TRU5EOlwidW5TZW5kXCIsU1VDQ0VTUzpcInN1Y2Nlc3NcIixGQUlMOlwiZmFpbFwifSxSdD17Tk9UX1NUQVJUOlwibm90U3RhcnRcIixQRU5ESU5HOlwicGVuZGluZ1wiLFJFU09MVkVEOlwicmVzb2x2ZWRcIixSRUpFQ1RFRDpcInJlamVjdGVkXCJ9LE90PWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiExO2lmKGl0KGUpfHxudChlKXx8cnQoZSkpcmV0dXJuITA7Y29uc3QgdD1vcyhcIkludmFsaWRDb252ZXJzYXRpb25JRFwiLGUpO3JldHVybiB0JiZfZS53KHQpLCExfSxHdD1mdW5jdGlvbihlKXtcIlwiIT09ZS5kZXNjJiZcIlwiIT09b3MoXCJBUElfUkVGRVJcIikmJl9lLncoYFske2UuYXBpfV0gfCAke2UucGFyYW19IHwgJHtlLmRlc2N9LCAke29zKFwiQVBJX1JFRkVSXCIpfSR7ZS5hcGl9YCl9LFV0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiU3RyaW5nUmVxdWlyZWRMb2dcIil9LGt0PWZ1bmN0aW9uKGUpe3JldHVybiBvcyhcIk5vbkVtcHR5U3RyaW5nUmVxdWlyZWRMb2dcIixlKX0sUHQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJOdW1iZXJSZXF1aXJlZExvZ1wiKX0sYnQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJVbmRlZmluZWROb3RBbGxvd2VkTG9nXCIpfSx3dD1mdW5jdGlvbigpe3JldHVybiBvcyhcIkZpbGVSZXF1aXJlZExvZ1wiKX0sRnQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJGdW5jdGlvblJlcXVpcmVkTG9nXCIpfSwkdD1mdW5jdGlvbigpe3JldHVybiBvcyhcIkFycmF5UmVxdWlyZWRMb2dcIil9LHF0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiTm9uRW1wdHlBcnJheUxvZ1wiKX0seHQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJDYWxsYmFja01pc3NpbmdMb2dcIil9LFZ0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiUG9zaXRpdmVJbnRlZ2VyUmVxdWlyZWRMb2dcIil9LEJ0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG9zKFwiU3RyaW5nTm90TG9uZ2VyVGhhbkxvZ1wiLGUsdCl9LEh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG9zKFwiTnVtYmVyTGVzc1RoYW5Mb2dcIixlLHQpfSxLdD1mdW5jdGlvbihlKXtyZXR1cm4gb3MoXCJLZXlWYWx1ZVN0cmluZ1JlcXVpcmVkTG9nXCIsZSl9LFd0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiUGxhaW5PYmplY3RSZXF1aXJlZExvZ1wiKX0sWXQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJOb25FbXB0eUNvbnRlbnRSZXF1aXJlZExvZ1wiKX0sanQ9ZnVuY3Rpb24oKXtyZXR1cm4gb3MoXCJGaWxlTm90U2VsZWN0ZWRMb2dcIil9LHp0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiTWVzc2FnZUluc3RhbmNlUmVxdWlyZWRMb2dcIil9LEp0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiTm9uQW5vbnltb3VzRnVuY3Rpb25Mb2dcIil9LFh0PWZ1bmN0aW9uKCl7cmV0dXJuIG9zKFwiTWVzc2FnZUV4dGVuc2lvbk5vdEF2YWlsYWJsZUxvZ1wiKX0sWnQ9e3R5cGU6XCJTdHJpbmdcIixyZXF1aXJlZDohMH0sUXQ9e3R5cGU6XCJBcnJheVwiLHJlcXVpcmVkOiEwfSxlcz17dHlwZTpcIk9iamVjdFwiLHJlcXVpcmVkOiEwfSx0cz17dHlwZTpcIkJvb2xlYW5cIixyZXF1aXJlZDohMH0sc3M9e3R5cGU6XCJudW1iZXJcIixyZXF1aXJlZDohMH07bGV0IG9zPW51bGw7Y29uc3QgaXM9e2hvb2tHZXRBUElUaXBzOmZ1bmN0aW9uKGUpe29zPWV9LGxvZ2luOnt1c2VySUQ6WnQsdXNlclNpZzpadH0sYWRkVG9CbGFja2xpc3Q6e3VzZXJJRExpc3Q6UXR9LHJlbW92ZUZyb21CbGFja2xpc3Q6e3VzZXJJRExpc3Q6UXR9LG9uOlt7bmFtZTpcImV2ZW50TmFtZVwiLHR5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZT0+XCJzdHJpbmdcIj09dHlwZW9mIGUmJjAhPT1lLmxlbmd0aHx8KEd0KHthcGk6XCJvblwiLHBhcmFtOlwiZXZlbnROYW1lXCIsZGVzYzprdChcImV2ZW50TmFtZVwiKX0pLCExKX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmU9PlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KEd0KHthcGk6XCJvblwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6RnQoKX0pLCExKTooXCJcIj09PWUubmFtZSYmR3Qoe2FwaTpcIm9uXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpKdCgpfSksITApfV0sb25jZTpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmU9Plwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChHdCh7YXBpOlwib25jZVwiLHBhcmFtOlwiZXZlbnROYW1lXCIsZGVzYzprdChcImV2ZW50TmFtZVwiKX0pLCExKX0se25hbWU6XCJoYW5kbGVyXCIsdHlwZTpcIkZ1bmN0aW9uXCIsdmFsaWRhdG9yOmU9PlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/KEd0KHthcGk6XCJvbmNlXCIscGFyYW06XCJoYW5kbGVyXCIsZGVzYzpGdCgpfSksITEpOihcIlwiPT09ZS5uYW1lJiZHdCh7YXBpOlwib25jZVwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6SnQoKX0pLCEwKX1dLG9mZjpbe25hbWU6XCJldmVudE5hbWVcIix0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmU9Plwic3RyaW5nXCI9PXR5cGVvZiBlJiYwIT09ZS5sZW5ndGh8fChHdCh7YXBpOlwib2ZmXCIscGFyYW06XCJldmVudE5hbWVcIixkZXNjOmt0KFwiZXZlbnROYW1lXCIpfSksITEpfSx7bmFtZTpcImhhbmRsZXJcIix0eXBlOlwiRnVuY3Rpb25cIix2YWxpZGF0b3I6ZT0+XCJmdW5jdGlvblwiIT10eXBlb2YgZT8oR3Qoe2FwaTpcIm9mZlwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6RnQoKX0pLCExKTooXCJcIj09PWUubmFtZSYmR3Qoe2FwaTpcIm9mZlwiLHBhcmFtOlwiaGFuZGxlclwiLGRlc2M6SnQoKX0pLCEwKX1dLHNlbmRNZXNzYWdlOlt7bmFtZTpcIm1lc3NhZ2VcIiwuLi5lc31dLHNldE1lc3NhZ2VFeHRlbnNpb25zOlt7bmFtZTpcIm1lc3NhZ2VcIiwuLi5lcyx2YWxpZGF0b3I6ZT0+ZS5zdGF0dXM9PT1OdC5TVUNDRVNTJiYhMD09PWUuaXNTdXBwb3J0RXh0ZW5zaW9ufHwoR3Qoe2FwaTpcInNldE1lc3NhZ2VFeHRlbnNpb25zXCIscGFyYW06XCJtZXNzYWdlXCIsZGVzYzpYdCgpfSksITEpfSx7bmFtZTpcImV4dGVuc2lvbnNcIiwuLi5RdH1dLGdldE1lc3NhZ2VFeHRlbnNpb25zOlt7bmFtZTpcIm1lc3NhZ2VcIiwuLi5lcyx2YWxpZGF0b3I6ZT0+ZS5zdGF0dXM9PT1OdC5TVUNDRVNTJiYhMD09PWUuaXNTdXBwb3J0RXh0ZW5zaW9ufHwoR3Qoe2FwaTpcImdldE1lc3NhZ2VFeHRlbnNpb25zXCIscGFyYW06XCJtZXNzYWdlXCIsZGVzYzpYdCgpfSksITEpfV0sZGVsZXRlTWVzc2FnZUV4dGVuc2lvbnM6W3tuYW1lOlwibWVzc2FnZVwiLC4uLmVzLHZhbGlkYXRvcjplPT5lLnN0YXR1cz09PU50LlNVQ0NFU1MmJiEwPT09ZS5pc1N1cHBvcnRFeHRlbnNpb258fChHdCh7YXBpOlwiZGVsZXRlTWVzc2FnZUV4dGVuc2lvbnNcIixwYXJhbTpcIm1lc3NhZ2VcIixkZXNjOlh0KCl9KSwhMSl9XSxnZXRNZXNzYWdlTGlzdDp7Y29udmVyc2F0aW9uSUQ6ey4uLlp0LHZhbGlkYXRvcjplPT5PdChlKX0sbmV4dFJlcU1lc3NhZ2VJRDp7dHlwZTpcIlN0cmluZ1wifSxjb3VudDp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjplPT4hKCF3ZShlKSYmIS9eWzEtOV1bMC05XSokLy50ZXN0KGUpKXx8KEd0KHthcGk6XCJnZXRNZXNzYWdlTGlzdFwiLHBhcmFtOlwiY291bnRcIixkZXNjOlZ0KCl9KSwhMSl9fSxnZXRNZXNzYWdlTGlzdEhvcHBpbmc6e2NvbnZlcnNhdGlvbklEOnsuLi5adCx2YWxpZGF0b3I6ZT0+T3QoZSl9LHNlcXVlbmNlOnt0eXBlOlwiTnVtYmVyXCJ9LHRpbWU6e3R5cGU6XCJOdW1iZXJcIn0sZGlyZWN0aW9uOnt0eXBlOlwiTnVtYmVyXCIsdmFsaWRhdG9yOmU9PiEoIXdlKGUpJiYwIT09ZSYmMSE9PWUpfHwoR3Qoe2FwaTpcImdldE1lc3NhZ2VMaXN0SG9wcGluZ1wiLHBhcmFtOlwiZGlyZWN0aW9uXCIsZGVzYzpvcyhcIjBPcjFSZXF1aXJlZExvZ1wiKX0pLCExKX0sY291bnQ6e3R5cGU6XCJOdW1iZXJcIix2YWxpZGF0b3I6ZT0+ISghd2UoZSkmJiEvXlsxLTldWzAtOV0qJC8udGVzdChlKSl8fChHdCh7YXBpOlwiZ2V0TWVzc2FnZUxpc3RIb3BwaW5nXCIscGFyYW06XCJjb3VudFwiLGRlc2M6VnR9KSwhMSl9fSxzZXRNZXNzYWdlUmVhZDp7Y29udmVyc2F0aW9uSUQ6ey4uLlp0LHZhbGlkYXRvcjplPT5PdChlKX19LHNldEFsbE1lc3NhZ2VSZWFkOntzY29wZTp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjplPT4hZXx8LTEhPT1bdC5SRUFEX0FMTF9DMkNfTVNHLHQuUkVBRF9BTExfR1JPVVBfTVNHLHQuUkVBRF9BTExfTVNHXS5pbmRleE9mKGUpfHwoR3Qoe2FwaTpcInNldEFsbE1lc3NhZ2VSZWFkXCIscGFyYW06XCJzY29wZVwiLGRlc2M6XCJUSU0uVFlQRVMuUkVBRF9BTExfQzJDX01TRyBvciBUSU0uVFlQRVMuUkVBRF9BTExfR1JPVVBfTVNHIG9yIFRJTS5UWVBFUy5SRUFEX0FMTF9NU0cgcmVxdWlyZWRcIn0pLCExKX19LGdldENvbnZlcnNhdGlvblByb2ZpbGU6W3tuYW1lOlwiY29udmVyc2F0aW9uSURcIiwuLi5adCx2YWxpZGF0b3I6ZT0+T3QoZSl9XSxjbGVhckhpc3RvcnlNZXNzYWdlOlt7bmFtZTpcImNvbnZlcnNhdGlvbklEXCIsLi4uWnQsdmFsaWRhdG9yOmU9Pk90KGUpfV0scGluQ29udmVyc2F0aW9uOntjb252ZXJzYXRpb25JRDp7Li4uWnQsdmFsaWRhdG9yOmU9Pk90KGUpfSxpc1Bpbm5lZDp7Li4udHN9fSxzZXRDb252ZXJzYXRpb25DdXN0b21EYXRhOntjb252ZXJzYXRpb25JRExpc3Q6ey4uLlF0fSxjdXN0b21EYXRhOnt0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmU9PlVlKGUpPyEoZS5sZW5ndGg+MjU2KXx8KEd0KHthcGk6XCJzZXRDb252ZXJzYXRpb25DdXN0b21EYXRhXCIscGFyYW06XCJjdXN0b21EYXRhXCIsZGVzYzpCdChcImN1c3RvbURhdGFcIiwyNTYpfSksITEpOihHdCh7YXBpOlwic2V0Q29udmVyc2F0aW9uQ3VzdG9tRGF0YVwiLHBhcmFtOlwiY3VzdG9tRGF0YVwiLGRlc2M6VXQoKX0pLCExKX19LG1hcmtDb252ZXJzYXRpb246e2NvbnZlcnNhdGlvbklETGlzdDp7Li4uUXR9LG1hcmtUeXBlOnt0eXBlOlwibnVtYmVyXCIsdmFsaWRhdG9yOmU9PntyZXR1cm4gR2UoZSk/ZTw9MD8oR3Qoe2FwaTpcIm1hcmtDb252ZXJzYXRpb25cIixwYXJhbTpcIm1hcmtUeXBlXCIsZGVzYzoodD1cIm1hcmtUeXBlXCIscz0wLG9zKFwiTnVtYmVyR3JlYXRlclRoYW5Mb2dcIix0LHMpKX0pLCExKTohKGU+PU1hdGgucG93KDIsNjQpKXx8KEd0KHthcGk6XCJtYXJrQ29udmVyc2F0aW9uXCIscGFyYW06XCJtYXJrVHlwZVwiLGRlc2M6SHQoXCJtYXJrVHlwZVwiLFwiTWF0aC5wb3coMiw2NClcIil9KSwhMSk6KEd0KHthcGk6XCJtYXJrQ29udmVyc2F0aW9uXCIscGFyYW06XCJtYXJrVHlwZVwiLGRlc2M6UHQoKX0pLCExKTt2YXIgdCxzfX0sZW5hYmxlTWFyazp7Li4udHN9fSxjcmVhdGVDb252ZXJzYXRpb25Hcm91cDp7Y29udmVyc2F0aW9uSURMaXN0OnsuLi5RdH0sZ3JvdXBOYW1lOnsuLi5adCx2YWxpZGF0b3I6ZT0+ISFlJiYoIShlLmxlbmd0aD4zMil8fChHdCh7YXBpOlwiY3JlYXRlQ29udmVyc2F0aW9uR3JvdXBcIixwYXJhbTpcImdyb3VwTmFtZVwiLGRlc2M6QnQoXCJncm91cE5hbWVcIiwzMil9KSwhMSkpfX0sZGVsZXRlQ29udmVyc2F0aW9uR3JvdXA6W3tuYW1lOlwiZ3JvdXBOYW1lXCIsLi4uWnR9XSxyZW5hbWVDb252ZXJzYXRpb25Hcm91cDp7b2xkTmFtZTp7Li4uWnR9LG5ld05hbWU6ey4uLlp0LHZhbGlkYXRvcjplPT4hIWUmJighKGUubGVuZ3RoPjMyKXx8KEd0KHthcGk6XCJyZW5hbWVDb252ZXJzYXRpb25Hcm91cFwiLHBhcmFtOlwibmV3TmFtZVwiLGRlc2M6QnQoXCJuZXdOYW1lXCIsMzIpfSksITEpKX19LGFkZENvbnZlcnNhdGlvbnNUb0dyb3VwOntjb252ZXJzYXRpb25JRExpc3Q6ey4uLlF0fSxncm91cE5hbWU6ey4uLlp0fX0sZGVsZXRlQ29udmVyc2F0aW9uc0Zyb21Hcm91cDp7Y29udmVyc2F0aW9uSURMaXN0OnsuLi5RdH0sZ3JvdXBOYW1lOnsuLi5adH19LGdldEdyb3VwTGlzdDp7Z3JvdXBQcm9maWxlRmlsdGVyOnt0eXBlOlwiQXJyYXlcIn19LGdldEdyb3VwUHJvZmlsZTp7Z3JvdXBJRDpadCxncm91cEN1c3RvbUZpZWxkRmlsdGVyOnt0eXBlOlwiQXJyYXlcIn0sbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sZ2V0R3JvdXBQcm9maWxlQWR2YW5jZTp7Z3JvdXBJRExpc3Q6UXR9LGNyZWF0ZUdyb3VwOntuYW1lOlp0fSxqb2luR3JvdXA6e2dyb3VwSUQ6WnQsdHlwZTp7dHlwZTpcIlN0cmluZ1wifSxhcHBseU1lc3NhZ2U6e3R5cGU6XCJTdHJpbmdcIn19LHF1aXRHcm91cDpbe25hbWU6XCJncm91cElEXCIsLi4uWnR9XSxoYW5kbGVBcHBsaWNhdGlvbjp7bWVzc2FnZTplcyxoYW5kbGVBY3Rpb246WnQsaGFuZGxlTWVzc2FnZTp7dHlwZTpcIlN0cmluZ1wifX0sY2hhbmdlR3JvdXBPd25lcjp7Z3JvdXBJRDpadCxuZXdPd25lcklEOlp0fSx1cGRhdGVHcm91cFByb2ZpbGU6e2dyb3VwSUQ6WnQsbXV0ZUFsbE1lbWJlcnM6e3R5cGU6XCJCb29sZWFuXCJ9fSxkaXNtaXNzR3JvdXA6W3tuYW1lOlwiZ3JvdXBJRFwiLC4uLlp0fV0sc2VhcmNoR3JvdXBCeUlEOlt7bmFtZTpcImdyb3VwSURcIiwuLi5adH1dLGluaXRHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6WnQsZ3JvdXBBdHRyaWJ1dGVzOnsuLi5lcyx2YWxpZGF0b3I6ZT0+e2xldCB0PSEwO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHM9PntpZighVWUoZVtzXSkpcmV0dXJuIEd0KHthcGk6XCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIscGFyYW06XCJncm91cEF0dHJpYnV0ZXNcIixkZXNjOkt0KFwidmFsdWVcIil9KSx0PSExLHR9KSx0fX19LHNldEdyb3VwQXR0cmlidXRlczp7Z3JvdXBJRDpadCxncm91cEF0dHJpYnV0ZXM6ey4uLmVzLHZhbGlkYXRvcjplPT57bGV0IHQ9ITA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocz0+e2lmKCFVZShlW3NdKSlyZXR1cm4gR3Qoe2FwaTpcInNldEdyb3VwQXR0cmlidXRlc1wiLHBhcmFtOlwiZ3JvdXBBdHRyaWJ1dGVzXCIsZGVzYzpLdChcInZhbHVlXCIpfSksdD0hMSx0fSksdH19fSxkZWxldGVHcm91cEF0dHJpYnV0ZXM6e2dyb3VwSUQ6WnQsa2V5TGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmU9PntpZih3ZShlKXx8IWJlKGUpKXJldHVybiBHdCh7YXBpOlwiZGVsZXRlR3JvdXBBdHRyaWJ1dGVzXCIscGFyYW06XCJrZXlMaXN0XCIsZGVzYzokdCgpfSksITE7aWYoIUx0KGUpKXtsZXQgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKGU9PntpZighVWUoZSkpcmV0dXJuIEd0KHthcGk6XCJkZWxldGVHcm91cEF0dHJpYnV0ZXNcIixwYXJhbTpcImtleUxpc3RcIixkZXNjOm9zKFwiU3RyaW5nQXJyYXlSZXF1aXJlZExvZ1wiKX0pLHQ9ITEsdH0pLHR9cmV0dXJuITB9fX0sZ2V0R3JvdXBBdHRyaWJ1dGVzOntncm91cElEOlp0LGtleUxpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT57aWYod2UoZSl8fCFiZShlKSlyZXR1cm4gR3Qoe2FwaTpcImdldEdyb3VwQXR0cmlidXRlc1wiLHBhcmFtOlwia2V5TGlzdFwiLGRlc2M6JHQoKX0pLCExO2lmKCFMdChlKSl7bGV0IHQ9ITA7cmV0dXJuIGUuZm9yRWFjaChlPT57aWYoIVVlKGUpKXJldHVybiBHdCh7YXBpOlwiZ2V0R3JvdXBBdHRyaWJ1dGVzXCIscGFyYW06XCJrZXlMaXN0XCIsZGVzYzpLdChcImtleVwiKX0pLHQ9ITEsdH0pLHR9cmV0dXJuITB9fX0sc2V0R3JvdXBDb3VudGVyczp7Z3JvdXBJRDpadCxjb3VudGVyczplc30saW5jcmVhc2VHcm91cENvdW50ZXI6e2dyb3VwSUQ6WnQsa2V5Olp0LHZhbHVlOnNzfSxkZWNyZWFzZUdyb3VwQ291bnRlcjp7Z3JvdXBJRDpadCxrZXk6WnQsdmFsdWU6c3N9LGdldEdyb3VwQ291bnRlcnM6e2dyb3VwSUQ6WnR9LGdldEdyb3VwTWVtYmVyTGlzdDp7Z3JvdXBJRDpadCxjb3VudDp7dHlwZTpcIk51bWJlclwifX0sZ2V0R3JvdXBNZW1iZXJQcm9maWxlOntncm91cElEOlp0LHVzZXJJRExpc3Q6UXQsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6e3R5cGU6XCJBcnJheVwifX0sYWRkR3JvdXBNZW1iZXI6e2dyb3VwSUQ6WnQsdXNlcklETGlzdDpRdH0sc2V0R3JvdXBNZW1iZXJSb2xlOntncm91cElEOlp0LHVzZXJJRDpadCxyb2xlOlp0fSxzZXRHcm91cE1lbWJlck11dGVUaW1lOntncm91cElEOlp0LHVzZXJJRDpadCxtdXRlVGltZTp7dHlwZTpcIk51bWJlclwiLHZhbGlkYXRvcjplPT5lPj0wfX0sc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZDp7Z3JvdXBJRDpadCx1c2VySUQ6e3R5cGU6XCJTdHJpbmdcIn0sbmFtZUNhcmQ6e3R5cGU6XCJTdHJpbmdcIix2YWxpZGF0b3I6ZT0+VWUoZSk/KGUubGVuZ3RoLCEwKTooR3Qoe2FwaTpcInNldEdyb3VwTWVtYmVyTmFtZUNhcmRcIixwYXJhbTpcIm5hbWVDYXJkXCIsZGVzYzpVdCgpfSksITEpfX0sc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZDp7Z3JvdXBJRDpadCx1c2VySUQ6e3R5cGU6XCJTdHJpbmdcIn0sbWVtYmVyQ3VzdG9tRmllbGQ6UXR9LGRlbGV0ZUdyb3VwTWVtYmVyOntncm91cElEOlp0fSxtYXJrR3JvdXBNZW1iZXJMaXN0Ontncm91cElEOlp0LG1hcmtUeXBlOnt0eXBlOlwibnVtYmVyXCIsdmFsaWRhdG9yOmU9PntyZXR1cm4gR2UoZSk/IShlPDFlMyl8fChHdCh7YXBpOlwibWFya0dyb3VwTWVtYmVyTGlzdFwiLHBhcmFtOlwibWFya1R5cGVcIixkZXNjOih0PVwibWFya1R5cGVcIixzPTFlMyxvcyhcIk51bWJlckdyZWF0ZXJPckVxdWFsTG9nXCIsdCxzKSl9KSwhMSk6KEd0KHthcGk6XCJtYXJrR3JvdXBNZW1iZXJMaXN0XCIscGFyYW06XCJtYXJrVHlwZVwiLGRlc2M6UHQoKX0pLCExKTt2YXIgdCxzfX0sdXNlcklETGlzdDp7Li4uUXR9LGVuYWJsZU1hcms6ey4uLnRzfX0sY3JlYXRlVGV4dE1lc3NhZ2U6e3RvOlp0LGNvbnZlcnNhdGlvblR5cGU6WnQscGF5bG9hZDp7Li4uZXMsdmFsaWRhdG9yOmU9PlBlKGUpP1VlKGUudGV4dCk/MCE9PWUudGV4dC5sZW5ndGh8fChHdCh7YXBpOlwiY3JlYXRlVGV4dE1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQudGV4dFwiLGRlc2M6WXQoKX0pLCExKTooR3Qoe2FwaTpcImNyZWF0ZVRleHRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLnRleHRcIixkZXNjOlV0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVUZXh0TWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6V3QoKX0pLCExKX19LGNyZWF0ZVRleHRBdE1lc3NhZ2U6e3RvOlp0LGNvbnZlcnNhdGlvblR5cGU6WnQscGF5bG9hZDp7Li4uZXMsdmFsaWRhdG9yOmU9PlBlKGUpP1VlKGUudGV4dCk/MD09PWUudGV4dC5sZW5ndGg/KEd0KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLnRleHRcIixkZXNjOll0KCl9KSwhMSk6IShlLmF0VXNlckxpc3QmJiFiZShlLmF0VXNlckxpc3QpKXx8KEd0KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmF0VXNlckxpc3RcIixkZXNjOiR0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLnRleHRcIixkZXNjOlV0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVUZXh0QXRNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpXdCgpfSksITEpfX0sY3JlYXRlQ3VzdG9tTWVzc2FnZTp7dG86WnQsY29udmVyc2F0aW9uVHlwZTpadCxwYXlsb2FkOnsuLi5lcyx2YWxpZGF0b3I6ZT0+UGUoZSk/ZS5kYXRhJiYhVWUoZS5kYXRhKT8oR3Qoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGF0YVwiLGRlc2M6VXQoKX0pLCExKTplLmRlc2NyaXB0aW9uJiYhVWUoZS5kZXNjcmlwdGlvbik/KEd0KHthcGk6XCJjcmVhdGVDdXN0b21NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRlc2NyaXB0aW9uXCIsZGVzYzpVdCgpfSksITEpOiEoZS5leHRlbnNpb24mJiFVZShlLmV4dGVuc2lvbikpfHwoR3Qoe2FwaTpcImNyZWF0ZUN1c3RvbU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZXh0ZW5zaW9uXCIsZGVzYzpVdCgpfSksITEpOihHdCh7YXBpOlwiY3JlYXRlQ3VzdG9tTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6V3QoKX0pLCExKX19LGNyZWF0ZUltYWdlTWVzc2FnZTp7dG86WnQsY29udmVyc2F0aW9uVHlwZTpadCxwYXlsb2FkOnsuLi5lcyx2YWxpZGF0b3I6ZT0+e2lmKCFQZShlKSlyZXR1cm4gR3Qoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6V3QoKX0pLCExO2lmKHdlKGUuZmlsZSkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6YnQoKX0pLCExO2lmKGIpe2lmKCEoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudHx8T2UoZS5maWxlKSkpcmV0dXJuIFBlKGUuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmk/MCE9PWUuZmlsZS50ZW1wRmlsZVBhdGhzLmxlbmd0aCYmMCE9PWUuZmlsZS50ZW1wRmlsZXMubGVuZ3RofHwoR3Qoe2FwaTpcImNyZWF0ZUltYWdlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpqdCgpfSksITEpOihHdCh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOnd0KCl9KSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVJbWFnZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6anQoKX0pLCExfXJldHVybiEwfSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZT0+KHdlKGUpJiZHdCh7YXBpOlwiY3JlYXRlSW1hZ2VNZXNzYWdlXCIscGFyYW06XCJvblByb2dyZXNzXCIsZGVzYzp4dCgpfSksITApfX19LGNyZWF0ZUF1ZGlvTWVzc2FnZTp7dG86WnQsY29udmVyc2F0aW9uVHlwZTpadCxwYXlsb2FkOnsuLi5lcyx2YWxpZGF0b3I6ZT0+ISFQZShlKXx8KEd0KHthcGk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOld0KCl9KSwhMSl9LG9uUHJvZ3Jlc3M6e3R5cGU6XCJGdW5jdGlvblwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjplPT4od2UoZSkmJkd0KHthcGk6XCJjcmVhdGVBdWRpb01lc3NhZ2VcIixwYXJhbTpcIm9uUHJvZ3Jlc3NcIixkZXNjOnh0KCl9KSwhMCl9fSxjcmVhdGVWaWRlb01lc3NhZ2U6e3RvOlp0LGNvbnZlcnNhdGlvblR5cGU6WnQscGF5bG9hZDp7Li4uZXMsdmFsaWRhdG9yOmU9PntpZighUGUoZSkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOld0KCl9KSwhMTtpZih3ZShlLmZpbGUpKXJldHVybiBHdCh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOmJ0KCl9KSwhMTtpZihiKXtpZighKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnR8fE9lKGUuZmlsZSkpKXJldHVybiBQZShlLmZpbGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pPyEhT2UoZS5maWxlLnRlbXBGaWxlKXx8KEd0KHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6anQoKX0pLCExKTooR3Qoe2FwaTpcImNyZWF0ZVZpZGVvTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzp3dCgpfSksITEpO2lmKGUuZmlsZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJjA9PT1lLmZpbGUuZmlsZXMubGVuZ3RoKXJldHVybiBHdCh7YXBpOlwiY3JlYXRlVmlkZW9NZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOmp0KCl9KSwhMX1yZXR1cm4hMH19LG9uUHJvZ3Jlc3M6e3R5cGU6XCJGdW5jdGlvblwiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjplPT4od2UoZSkmJkd0KHthcGk6XCJjcmVhdGVWaWRlb01lc3NhZ2VcIixwYXJhbTpcIm9uUHJvZ3Jlc3NcIixkZXNjOnh0KCl9KSwhMCl9fSxjcmVhdGVGYWNlTWVzc2FnZTp7dG86WnQsY29udmVyc2F0aW9uVHlwZTpadCxwYXlsb2FkOnsuLi5lcyx2YWxpZGF0b3I6ZT0+UGUoZSk/R2UoZS5pbmRleCk/ISFVZShlLmRhdGEpfHwoR3Qoe2FwaTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmRhdGFcIixkZXNjOlV0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVGYWNlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5pbmRleFwiLGRlc2M6UHQoKX0pLCExKTooR3Qoe2FwaTpcImNyZWF0ZUZhY2VNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkXCIsZGVzYzpXdCgpfSksITEpfX0sY3JlYXRlRmlsZU1lc3NhZ2U6e3RvOlp0LGNvbnZlcnNhdGlvblR5cGU6WnQscGF5bG9hZDp7Li4uZXMsdmFsaWRhdG9yOmU9PntpZighUGUoZSkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZFwiLGRlc2M6V3QoKX0pLCExO2lmKHdlKGUuZmlsZSkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpidCgpfSksITE7aWYoYil7aWYoIShlLmZpbGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50fHxPZShlLmZpbGUpKSlyZXR1cm4gUGUoZS5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaT8wIT09ZS5maWxlLnRlbXBGaWxlUGF0aHMubGVuZ3RoJiYwIT09ZS5maWxlLnRlbXBGaWxlcy5sZW5ndGh8fChHdCh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZmlsZVwiLGRlc2M6anQoKX0pLCExKTooR3Qoe2FwaTpcImNyZWF0ZUZpbGVNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmZpbGVcIixkZXNjOnd0KCl9KSwhMSk7aWYoZS5maWxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmMD09PWUuZmlsZS5maWxlcy5sZW5ndGgpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVGaWxlTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5maWxlXCIsZGVzYzpqdCgpfSksITF9cmV0dXJuITB9fSxvblByb2dyZXNzOnt0eXBlOlwiRnVuY3Rpb25cIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZT0+KHdlKGUpJiZHdCh7YXBpOlwiY3JlYXRlRmlsZU1lc3NhZ2VcIixwYXJhbTpcIm9uUHJvZ3Jlc3NcIixkZXNjOnh0KCl9KSwhMCl9fSxjcmVhdGVMb2NhdGlvbk1lc3NhZ2U6e3RvOlp0LGNvbnZlcnNhdGlvblR5cGU6WnQscGF5bG9hZDp7Li4uZXMsdmFsaWRhdG9yOmU9PlBlKGUpP1VlKGUuZGVzY3JpcHRpb24pP0dlKGUubG9uZ2l0dWRlKT8hIUdlKGUubGF0aXR1ZGUpfHwoR3Qoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5sYXRpdHVkZVwiLGRlc2M6UHQoKX0pLCExKTooR3Qoe2FwaTpcImNyZWF0ZUxvY2F0aW9uTWVzc2FnZVwiLHBhcmFtOlwicGF5bG9hZC5sb25naXR1ZGVcIixkZXNjOlB0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVMb2NhdGlvbk1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWQuZGVzY3JpcHRpb25cIixkZXNjOlV0KCl9KSwhMSk6KEd0KHthcGk6XCJjcmVhdGVMb2NhdGlvbk1lc3NhZ2VcIixwYXJhbTpcInBheWxvYWRcIixkZXNjOld0KCl9KSwhMSl9fSxjcmVhdGVNZXJnZXJNZXNzYWdlOnt0bzpadCxjb252ZXJzYXRpb25UeXBlOlp0LHBheWxvYWQ6ey4uLmVzLHZhbGlkYXRvcjplPT57aWYoTHQoZS5tZXNzYWdlTGlzdCkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLm1lc3NhZ2VMaXN0XCIsZGVzYzpxdCgpfSksITE7aWYoTHQoZS5jb21wYXRpYmxlVGV4dCkpcmV0dXJuIEd0KHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLmNvbXBhdGlibGVUZXh0XCIsZGVzYzprdChcImNvbXBhdGlibGVUZXh0XCIpfSksITE7bGV0IHQ9ITE7cmV0dXJuIGUubWVzc2FnZUxpc3QuZm9yRWFjaChlPT57ZS5zdGF0dXM9PT1OdC5GQUlMJiYodD0hMCl9KSwhdHx8KEd0KHthcGk6XCJjcmVhdGVNZXJnZXJNZXNzYWdlXCIscGFyYW06XCJwYXlsb2FkLm1lc3NhZ2VMaXN0XCIsZGVzYzpvcyhcIk1lcmdlRmFpbGVkTWVzc2FnZUxvZ1wiKX0pLCExKX19fSxyZXZva2VNZXNzYWdlOlt7bmFtZTpcIm1lc3NhZ2VcIiwuLi5lcyx2YWxpZGF0b3I6ZT0+THQoZSk/KEd0KHthcGk6XCJyZXZva2VNZXNzYWdlXCIscGFyYW06XCJtZXNzYWdlXCIsZGVzYzp6dCgpfSksITEpOmUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9TWVNURU0/KEd0KHthcGk6XCJyZXZva2VNZXNzYWdlXCIscGFyYW06XCJtZXNzYWdlXCIsZGVzYzpvcyhcIk1lc3NhZ2VDYW5CZVJldm9rZWREZXNjXCIpfSksITEpOiEwIT09ZS5pc1Jldm9rZWR8fChHdCh7YXBpOlwicmV2b2tlTWVzc2FnZVwiLHBhcmFtOlwibWVzc2FnZVwiLGRlc2M6b3MoXCJNZXNzYWdlUmV2b2tlZExvZ1wiKX0pLCExKX1dLGRlbGV0ZU1lc3NhZ2U6W3tuYW1lOlwibWVzc2FnZUxpc3RcIiwuLi5RdCx2YWxpZGF0b3I6ZT0+IUx0KGUpfHwoR3Qoe2FwaTpcImRlbGV0ZU1lc3NhZ2VcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzpxdCgpfSksITEpfV0sdHJhbnNsYXRlVGV4dDp7c291cmNlVGV4dExpc3Q6UXQsc291cmNlTGFuZ3VhZ2U6WnQsdGFyZ2V0TGFuZ3VhZ2U6WnR9LG1vZGlmeU1lc3NhZ2U6W3tuYW1lOlwibWVzc2FnZVwiLC4uLmVzLHZhbGlkYXRvcjplPT5MdChlKT8oR3Qoe2FwaTpcIm1vZGlmeU1lc3NhZ2VcIixwYXJhbTpcIm1lc3NhZ2VcIixkZXNjOnp0KCl9KSwhMSk6ZS5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX1NZU1RFTT8oR3Qoe2FwaTpcIm1vZGlmeU1lc3NhZ2VcIixwYXJhbTpcIm1lc3NhZ2VcIixkZXNjOm9zKFwiTWVzc2FnZUNhbkJlTW9kaWZpZWRMb2dcIil9KSwhMSk6ITAhPT1lLl9vbmxpbmVPbmx5RmxhZ3x8KEd0KHthcGk6XCJtb2RpZnlNZXNzYWdlXCIscGFyYW06XCJtZXNzYWdlXCIsZGVzYzpvcyhcIk9ubGluZU1lc3NhZ2VOb3RTdXBwb3J0TG9nXCIpfSksITEpfV0sZ2V0VXNlclByb2ZpbGU6e3VzZXJJRExpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT5iZShlKT8oMD09PWUubGVuZ3RoJiZHdCh7YXBpOlwiZ2V0VXNlclByb2ZpbGVcIixwYXJhbTpcInVzZXJJRExpc3RcIixkZXNjOnF0KCl9KSwhMCk6KEd0KHthcGk6XCJnZXRVc2VyUHJvZmlsZVwiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6JHQoKX0pLCExKX19LHVwZGF0ZU15UHJvZmlsZTp7cHJvZmlsZUN1c3RvbUZpZWxkOnt0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZT0+ISF3ZShlKXx8KCEhYmUoZSl8fChHdCh7YXBpOlwidXBkYXRlTXlQcm9maWxlXCIscGFyYW06XCJwcm9maWxlQ3VzdG9tRmllbGRcIixkZXNjOiR0KCl9KSwhMSkpfX0sc2V0U2VsZlN0YXR1czp7Y3VzdG9tU3RhdHVzOnt0eXBlOlwiU3RyaW5nXCIsdmFsaWRhdG9yOmU9PiEhVWUoZSl8fChHdCh7YXBpOlwic2V0U2VsZlN0YXR1c1wiLHBhcmFtOlwiY3VzdG9tU3RhdHVzXCIsZGVzYzpVdCgpfSksITEpfX0sZ2V0VXNlclN0YXR1czp7dXNlcklETGlzdDp7dHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmU9PmJlKGUpPzAhPT1lLmxlbmd0aHx8KEd0KHthcGk6XCJnZXRVc2VyU3RhdHVzXCIscGFyYW06XCJ1c2VySURMaXN0XCIsZGVzYzpxdCgpfSksITEpOihHdCh7YXBpOlwiZ2V0VXNlclN0YXR1c1wiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6JHQoKX0pLCExKX19LHN1YnNjcmliZVVzZXJTdGF0dXM6e3VzZXJJRExpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT5iZShlKT8wIT09ZS5sZW5ndGh8fChHdCh7YXBpOlwic3Vic2NyaWJlVXNlclN0YXR1c1wiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6cXQoKX0pLCExKTooR3Qoe2FwaTpcInN1YnNjcmliZVVzZXJTdGF0dXNcIixwYXJhbTpcInVzZXJJRExpc3RcIixkZXNjOiR0KCl9KSwhMSl9fSx1bnN1YnNjcmliZVVzZXJTdGF0dXM6e3VzZXJJRExpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT4hZXx8KCEhYmUoZSl8fChHdCh7YXBpOlwic3Vic2NyaWJlVXNlclN0YXR1c1wiLHBhcmFtOlwidXNlcklETGlzdFwiLGRlc2M6JHQoKX0pLCExKSl9fSxhZGRGcmllbmQ6e3RvOlp0LHNvdXJjZTp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiEwLHZhbGlkYXRvcjplPT57aWYoIWUpcmV0dXJuITE7aWYoIWUuc3RhcnRzV2l0aChcIkFkZFNvdXJjZV9UeXBlX1wiKSlyZXR1cm4gR3Qoe2FwaTpcImFkZEZyaWVuZFwiLHBhcmFtOlwic291cmNlXCIsZGVzYzpvcyhcIlNvdXJjZVByZWZpeExvZ1wiKX0pLCExO3JldHVybiEoZS5yZXBsYWNlKFwiQWRkU291cmNlX1R5cGVfXCIsXCJcIikubGVuZ3RoPjgpfHwoR3Qoe2FwaTpcImFkZEZyaWVuZFwiLHBhcmFtOlwic291cmNlXCIsZGVzYzpCdChcImtleXdvcmRcIiw4KX0pLCExKX19LHJlbWFyazp7dHlwZTpcIlN0cmluZ1wiLHJlcXVpcmVkOiExLHZhbGlkYXRvcjplPT4hKFVlKGUpJiZlLmxlbmd0aD45Nil8fChHdCh7YXBpOlwiYWRkRnJpZW5kXCIscGFyYW06XCJyZW1hcmtcIixkZXNjOkJ0KFwicmVtYXJrXCIsOTYpfSksITEpfX0sZGVsZXRlRnJpZW5kOnt1c2VySURMaXN0OlF0fSxjaGVja0ZyaWVuZDp7dXNlcklETGlzdDpRdH0sZ2V0RnJpZW5kUHJvZmlsZTp7dXNlcklETGlzdDpRdH0sdXBkYXRlRnJpZW5kOnt1c2VySUQ6WnQscmVtYXJrOnt0eXBlOlwiU3RyaW5nXCIscmVxdWlyZWQ6ITEsdmFsaWRhdG9yOmU9PiEoVWUoZSkmJmUubGVuZ3RoPjk2KXx8KEd0KHthcGk6XCJ1cGRhdGVGcmllbmRcIixwYXJhbTpcInJlbWFya1wiLGRlc2M6QnQoXCJyZW1hcmtcIiw5Nil9KSwhMSl9LGZyaWVuZEN1c3RvbUZpZWxkOnt0eXBlOlwiQXJyYXlcIixyZXF1aXJlZDohMSx2YWxpZGF0b3I6ZT0+e2lmKGUpe2lmKCFiZShlKSlyZXR1cm4gR3Qoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLHBhcmFtOlwiZnJpZW5kQ3VzdG9tRmllbGRcIixkZXNjOiR0KCl9KSwhMTtsZXQgdD0hMDtyZXR1cm4gZS5mb3JFYWNoKGU9PntpZighVWUoZS5rZXkpfHwtMT09PWUua2V5LmluZGV4T2YoXCJUYWdfU05TX0N1c3RvbVwiKSlyZXR1cm4gR3Qoe2FwaTpcInVwZGF0ZUZyaWVuZFwiLHBhcmFtOlwiZnJpZW5kQ3VzdG9tRmllbGRcIixkZXNjOm9zKFwiRnJpZW5kQ3VzdG9tRmllbGRQcmVmaXhMb2dcIil9KSx0PSExLHQ7aWYoIVVlKGUudmFsdWUpKXJldHVybiBHdCh7YXBpOlwidXBkYXRlRnJpZW5kXCIscGFyYW06XCJmcmllbmRDdXN0b21GaWVsZFwiLGRlc2M6S3QoXCJ2YWx1ZVwiKX0pLHQ9ITEsdDtyZXR1cm4gZS5rZXkucmVwbGFjZShcIlRhZ19TTlNfQ3VzdG9tX1wiLFwiXCIpLmxlbmd0aD44PyhHdCh7YXBpOlwidXBkYXRlRnJpZW5kXCIscGFyYW06XCJmcmllbmRDdXN0b21GaWVsZFwiLGRlc2M6QnQoXCJrZXl3b3JkXCIsOCl9KSx0PSExLHQpOnZvaWQgMH0pLHR9cmV0dXJuITB9fX0sYWNjZXB0RnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpadH0scmVmdXNlRnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpadH0sZGVsZXRlRnJpZW5kQXBwbGljYXRpb246e3VzZXJJRDpadH0sY3JlYXRlRnJpZW5kR3JvdXA6e25hbWU6WnR9LGRlbGV0ZUZyaWVuZEdyb3VwOntuYW1lOlp0fSxhZGRUb0ZyaWVuZEdyb3VwOntuYW1lOlp0LHVzZXJJRExpc3Q6UXR9LHJlbW92ZUZyb21GcmllbmRHcm91cDp7bmFtZTpadCx1c2VySURMaXN0OlF0fSxyZW5hbWVGcmllbmRHcm91cDp7b2xkTmFtZTpadCxuZXdOYW1lOlp0fSxzZW5kTWVzc2FnZVJlYWRSZWNlaXB0Olt7bmFtZTpcIm1lc3NhZ2VMaXN0XCIsdHlwZTpcIkFycmF5XCIsdmFsaWRhdG9yOmU9PmJlKGUpPzAhPT1lLmxlbmd0aHx8KEd0KHthcGk6XCJzZW5kTWVzc2FnZVJlYWRSZWNlaXB0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6cXQoKX0pLCExKTooR3Qoe2FwaTpcInNlbmRNZXNzYWdlUmVhZFJlY2VpcHRcIixwYXJhbTpcIm1lc3NhZ2VMaXN0XCIsZGVzYzokdCgpfSksITEpfV0sZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdDpbe25hbWU6XCJtZXNzYWdlTGlzdFwiLHR5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT5iZShlKT8wIT09ZS5sZW5ndGh8fChHdCh7YXBpOlwiZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdFwiLHBhcmFtOlwibWVzc2FnZUxpc3RcIixkZXNjOnF0KCl9KSwhMSk6KEd0KHthcGk6XCJnZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0XCIscGFyYW06XCJtZXNzYWdlTGlzdFwiLGRlc2M6JHQoKX0pLCExKX1dLGNyZWF0ZVRvcGljSW5Db21tdW5pdHk6e2dyb3VwSUQ6WnQsdG9waWNOYW1lOlp0fSxkZWxldGVUb3BpY0Zyb21Db21tdW5pdHk6e2dyb3VwSUQ6WnQsdG9waWNJRExpc3Q6e3R5cGU6XCJBcnJheVwiLHZhbGlkYXRvcjplPT4hZXx8KCEhYmUoZSl8fChHdCh7YXBpOlwiZGVsZXRlVG9waWNGcm9tQ29tbXVuaXR5XCIscGFyYW06XCJ0b3BpY0lETGlzdFwiLGRlc2M6JHQoKX0pLCExKSl9fSx1cGRhdGVUb3BpY1Byb2ZpbGU6e2dyb3VwSUQ6WnQsdG9waWNJRDpadH0sZ2V0VG9waWNMaXN0Ontncm91cElEOlp0LHRvcGljSURMaXN0Ont0eXBlOlwiQXJyYXlcIix2YWxpZGF0b3I6ZT0+IWV8fCghIWJlKGUpfHwoR3Qoe2FwaTpcImdldFRvcGljTGlzdFwiLHBhcmFtOlwidG9waWNJRExpc3RcIixkZXNjOiR0KCl9KSwhMSkpfX19LG5zPXtsb2dpbjoxLGxvZ291dDoxLG9uOjEsb25jZToxLG9mZjoxLHNldExvZ0xldmVsOjEscmVnaXN0ZXJQbHVnaW46MSxkZXN0cm95OjEsY3JlYXRlVGV4dE1lc3NhZ2U6MSxjcmVhdGVUZXh0QXRNZXNzYWdlOjEsY3JlYXRlSW1hZ2VNZXNzYWdlOjEsY3JlYXRlQXVkaW9NZXNzYWdlOjEsY3JlYXRlVmlkZW9NZXNzYWdlOjEsY3JlYXRlQ3VzdG9tTWVzc2FnZToxLGNyZWF0ZUZhY2VNZXNzYWdlOjEsY3JlYXRlRmlsZU1lc3NhZ2U6MSxjcmVhdGVMb2NhdGlvbk1lc3NhZ2U6MSxjcmVhdGVNZXJnZXJNZXNzYWdlOjEsZG93bmxvYWRNZXJnZXJNZXNzYWdlOjEsY3JlYXRlRm9yd2FyZE1lc3NhZ2U6MSxzZW5kTWVzc2FnZToxLHJlc2VuZE1lc3NhZ2U6MSxyZXZva2VNZXNzYWdlOjEsZGVsZXRlTWVzc2FnZToxLHRyYW5zbGF0ZVRleHQ6MSxtb2RpZnlNZXNzYWdlOjEsc2VuZE1lc3NhZ2VSZWFkUmVjZWlwdDoxLGdldEdyb3VwTWVzc2FnZVJlYWRNZW1iZXJMaXN0OjEsZ2V0TWVzc2FnZVJlYWRSZWNlaXB0TGlzdDoxLHNldE1lc3NhZ2VFeHRlbnNpb25zOjEsZ2V0TWVzc2FnZUV4dGVuc2lvbnM6MSxkZWxldGVNZXNzYWdlRXh0ZW5zaW9uczoxLGdldE1lc3NhZ2VMaXN0OjEsZmluZE1lc3NhZ2U6MSxnZXRNZXNzYWdlTGlzdEhvcHBpbmc6MSxzZXRNZXNzYWdlUmVhZDoxLHNldEFsbE1lc3NhZ2VSZWFkOjEsZ2V0Q29udmVyc2F0aW9uTGlzdDoxLGdldENvbnZlcnNhdGlvblByb2ZpbGU6MSxkZWxldGVDb252ZXJzYXRpb246MSxwaW5Db252ZXJzYXRpb246MSxnZXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudDoxLHNldENvbnZlcnNhdGlvbkN1c3RvbURhdGE6MSxtYXJrQ29udmVyc2F0aW9uOjEsY3JlYXRlQ29udmVyc2F0aW9uR3JvdXA6MSxnZXRDb252ZXJzYXRpb25Hcm91cExpc3Q6MSxkZWxldGVDb252ZXJzYXRpb25Hcm91cDoxLHJlbmFtZUNvbnZlcnNhdGlvbkdyb3VwOjEsYWRkQ29udmVyc2F0aW9uc1RvR3JvdXA6MSxkZWxldGVDb252ZXJzYXRpb25zRnJvbUdyb3VwOjEsY2xlYXJIaXN0b3J5TWVzc2FnZToxLGdldEdyb3VwTGlzdDoxLGdldEdyb3VwUHJvZmlsZToxLGNyZWF0ZUdyb3VwOjEsam9pbkdyb3VwOjEsdXBkYXRlR3JvdXBQcm9maWxlOjEscXVpdEdyb3VwOjEsZGlzbWlzc0dyb3VwOjEsY2hhbmdlR3JvdXBPd25lcjoxLHNlYXJjaEdyb3VwQnlJRDoxLHNldE1lc3NhZ2VSZW1pbmRUeXBlOjEsZ2V0R3JvdXBBcHBsaWNhdGlvbkxpc3Q6MSxoYW5kbGVHcm91cEFwcGxpY2F0aW9uOjEsaW5pdEdyb3VwQXR0cmlidXRlczoxLHNldEdyb3VwQXR0cmlidXRlczoxLGRlbGV0ZUdyb3VwQXR0cmlidXRlczoxLGdldEdyb3VwQXR0cmlidXRlczoxLHNldEdyb3VwQ291bnRlcnM6MSxpbmNyZWFzZUdyb3VwQ291bnRlcjoxLGRlY3JlYXNlR3JvdXBDb3VudGVyOjEsZ2V0R3JvdXBDb3VudGVyczoxLGdldEpvaW5lZENvbW11bml0eUxpc3Q6MSxjcmVhdGVUb3BpY0luQ29tbXVuaXR5OjEsZGVsZXRlVG9waWNGcm9tQ29tbXVuaXR5OjEsdXBkYXRlVG9waWNQcm9maWxlOjEsZ2V0VG9waWNMaXN0OjEsZ2V0R3JvdXBNZW1iZXJQcm9maWxlOjEsZ2V0R3JvdXBNZW1iZXJMaXN0OjEsYWRkR3JvdXBNZW1iZXI6MSxkZWxldGVHcm91cE1lbWJlcjoxLHNldEdyb3VwTWVtYmVyTmFtZUNhcmQ6MSxzZXRHcm91cE1lbWJlck11dGVUaW1lOjEsc2V0R3JvdXBNZW1iZXJSb2xlOjEsc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZDoxLGdldEdyb3VwT25saW5lTWVtYmVyQ291bnQ6MSxtYXJrR3JvdXBNZW1iZXJMaXN0OjEsZ2V0TXlQcm9maWxlOjEsZ2V0VXNlclByb2ZpbGU6MSx1cGRhdGVNeVByb2ZpbGU6MSxzZXRTZWxmU3RhdHVzOjEsZ2V0VXNlclN0YXR1czoxLHN1YnNjcmliZVVzZXJTdGF0dXM6MSx1bnN1YnNjcmliZVVzZXJTdGF0dXM6MSxnZXRCbGFja2xpc3Q6MSxhZGRUb0JsYWNrbGlzdDoxLHJlbW92ZUZyb21CbGFja2xpc3Q6MSxnZXRGcmllbmRMaXN0OjEsYWRkRnJpZW5kOjEsZGVsZXRlRnJpZW5kOjEsY2hlY2tGcmllbmQ6MSx1cGRhdGVGcmllbmQ6MSxnZXRGcmllbmRQcm9maWxlOjEsZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0OjEscmVmdXNlRnJpZW5kQXBwbGljYXRpb246MSxkZWxldGVGcmllbmRBcHBsaWNhdGlvbjoxLGFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uOjEsc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkOjEsZ2V0RnJpZW5kR3JvdXBMaXN0OjEsY3JlYXRlRnJpZW5kR3JvdXA6MSxyZW5hbWVGcmllbmRHcm91cDoxLGRlbGV0ZUZyaWVuZEdyb3VwOjEsYWRkVG9GcmllbmRHcm91cDoxLHJlbW92ZUZyb21GcmllbmRHcm91cDoxLGNhbGxFeHBlcmltZW50YWxBUEk6MX0scnM9MSxhcz0yLHVzPTMsY3M9NCxscz02LGRzPTcscHM9OCxocz05LGdzPTEwLF9zPTExLG1zPTEyLE1zPTEzLGZzPTE0LElzPTE1LENzPTE2LFRzPTE3LHlzPTE4LERzPTE5LEVzPTIwLFNzPTIxLExzPTIyLEFzPTIzLHZzPTI0LE5zPTI1LFJzPTI2LE9zPTI3LEdzPTI4LFVzPTI5LGtzPTMwLFBzPTMxLGJzPTMyLHdzPTM3O2NsYXNzIEZze2NvbnN0cnVjdG9yKGUpe3RoaXMuX209ZSx0aGlzLl9uPVwiXCJ9aXNMb2dnZWRJbigpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShtcykuaXNMb2dnZWRJbigpfWlzT3ZlcnNlYSgpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShtcykuaXNPdmVyc2VhKCl9aXNQcml2YXRlTmV0V29yaygpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShtcykuaXNQcml2YXRlTmV0V29yaygpfWdldEZpbGVEb3dubG9hZFByb3h5KCl7cmV0dXJuIHRoaXMuX20uZ2V0TW9kdWxlKG1zKS5nZXRGaWxlRG93bmxvYWRQcm94eSgpfWdldE15VXNlcklEKCl7cmV0dXJuIHRoaXMuX20uZ2V0TW9kdWxlKG1zKS5nZXRVc2VySUQoKX1nZXRNeVRpbnlJRCgpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShtcykuZ2V0VGlueUlEKCl9Z2V0U0RLQXBwSUQoKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUobXMpLmdldFNES0FwcElEKCl9aXNJbnRsKCl7cmV0dXJuIHRoaXMuX20uZ2V0TW9kdWxlKG1zKS5pc0ludGwoKX1pc0Rldk1vZGUoKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUobXMpLmlzRGV2TW9kZSgpfWdldE1vZHVsZShlKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoZSl9Z2V0UGxhdGZvcm0oKXtyZXR1cm4geH1nZXROZXR3b3JrVHlwZSgpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShJcykuZ2V0TmV0d29ya1R5cGUoKX1wcm9iZU5ldHdvcmsoZSl7cmV0dXJuIHRoaXMuX20uZ2V0TW9kdWxlKElzKS5wcm9iZShlKX1nZXRDbG91ZENvbmZpZyhlKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoQXMpLmdldENsb3VkQ29uZmlnKGUpfWVtaXRPdXRlckV2ZW50KGUsdCl7dGhpcy5fbS5nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpLmVtaXQoZSx0KX1lbWl0SW5uZXJFdmVudChlLHQpe3RoaXMuX20uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5lbWl0KGUsdCl9Z2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKXtyZXR1cm4gdGhpcy5fbS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpfWdlbmVyYXRlVGpnSUQoZSl7cmV0dXJuIHRoaXMuX20uZ2V0TW9kdWxlKG1zKS5nZXRUaW55SUQoKStcIi1cIitlLnJhbmRvbX1maWx0ZXJNb2RpZmllZE1lc3NhZ2UodCl7aWYoTHQodCkpcmV0dXJuO2NvbnN0IHM9dC5maWx0ZXIoZT0+ITA9PT1lLmlzTW9kaWZpZWQpO3MubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQoZS5NRVNTQUdFX01PRElGSUVELHMpfWZpbHRlclVubW9kaWZpZWRNZXNzYWdlKGUpe2lmKEx0KGUpKXJldHVybltdO3JldHVybiBlLmZpbHRlcihlPT4hMT09PWUuaXNNb2RpZmllZCl9cmVxdWVzdChlKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoRXMpLnJlcXVlc3QoZSl9Y2FuSVVzZShlKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoT3MpLmNhbklVc2UoZSl9Z2V0RXJyb3JNZXNzYWdlKGUsdCxzKXtyZXR1cm4gdGhpcy5fbS5nZXRFcnJvck1lc3NhZ2UoZSx0LHMpfW91dHB1dFdhcm5pbmcoZSx0LHMpe2NvbnN0IG89dGhpcy5nZXRFcnJvck1lc3NhZ2UoZSx0LHMpO28mJl9lLncobyl9fWNvbnN0ICRzPVwid3Nsb2dpblwiLHFzPVwid3Nsb2dvdXRcIix4cz1cIndzaGVsbG9cIixWcz1cIktpY2tPdGhlclwiLEJzPVwiZ2V0bXNnXCIsSHM9XCJhdXRoa2V5XCIsS3M9XCJzZW5kbXNnXCIsV3M9XCJzZW5kX2dyb3VwX21zZ1wiLFlzPVwicG9ydHJhaXRfZ2V0X2FsbFwiLGpzPVwicG9ydHJhaXRfc2V0XCIsenM9XCJibGFja19saXN0X2dldFwiLEpzPVwiYmxhY2tfbGlzdF9hZGRcIixYcz1cImJsYWNrX2xpc3RfZGVsZXRlXCIsWnM9XCJmcmllbmRfZ2V0XCIsUXM9XCJmcmllbmRfZ2V0X3NwZWNpZmllZFwiLGVvPVwiZnJpZW5kX2NoZWNrXCIsdG89XCJmcmllbmRfZGVsZXRlXCIsc289XCJmcmllbmRfYWRkXCIsb289XCJmcmllbmRfdXBkYXRlXCIsaW89XCJmcmllbmRfcmVzcG9uc2VcIixubz1cInBlbmRlbmN5X2dldFwiLHJvPVwicGVuZGVuY3lfZGVsZXRlXCIsYW89XCJwZW5kZW5jeV9yZXBvcnRcIix1bz1cImdyb3VwX2dldFwiLGNvPVwiZ3JvdXBfYWRkXCIsbG89XCJncm91cF9kZWxldGVcIixwbz1cImdyb3VwX3VwZGF0ZVwiLGhvPVwibXNnd2l0aGRyYXdcIixnbz1cIm1zZ3JlYWRlZFwiLF9vPVwic2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLG1vPVwiZ2V0X2MyY19wZWVyX211dGVfbm90aWZpY2F0aW9uc1wiLE1vPVwiZ2V0cm9hbW1zZ1wiLGZvPVwiZ2V0X3BlZXJfcmVhZF90aW1lXCIsSW89XCJkZWxldGVfYzJjX21zZ19yYW1ibGVcIixDbz1cIm1vZGlmeV9jMmNfbXNnXCIsVG89XCJzZXRfa2V5X3ZhbHVlc1wiLHlvPVwiZ2V0X2tleV92YWx1ZXNcIixEbz1cInBhZ2VfZ2V0XCIsRW89XCJnZXRcIixTbz1cImJhdGNoX2RlbGV0ZVwiLExvPVwiY2xlYXJfbXNnXCIsQW89XCJ0b3BcIix2bz1cImRlbGV0ZW1zZ1wiLE5vPVwic2V0X2NvbnZfY3VzdG9tX2RhdGFcIixSbz1cIm1hcmtfY29udGFjdFwiLE9vPVwiY3JlYXRlX2NvbnRhY3RfZ3JvdXBcIixHbz1cImRlbF9jb250YWN0X2dyb3VwXCIsVW89XCJ1cGRhdGVfY29udGFjdF9ncm91cFwiLGtvPVwiYWRkX2NvbnZfdG9fZ3JvdXBcIixQbz1cImRlbF9jb252X2Zyb21fZ3JvdXBcIixibz1cImdldF9jb250YWN0X2dyb3VwXCIsd289XCJnZXRfam9pbmVkX2dyb3VwX2xpc3RcIixGbz1cImdldF9ncm91cF9zZWxmX21lbWJlcl9pbmZvXCIsJG89XCJjcmVhdGVfZ3JvdXBcIixxbz1cImRlc3Ryb3lfZ3JvdXBcIix4bz1cIm1vZGlmeV9ncm91cF9iYXNlX2luZm9cIixWbz1cImFwcGx5X2pvaW5fZ3JvdXBcIixCbz1cImFwcGx5X2pvaW5fZ3JvdXBfbm9hdXRoXCIsSG89XCJxdWl0X2dyb3VwXCIsS289XCJnZXRfZ3JvdXBfcHVibGljX2luZm9cIixXbz1cImNoYW5nZV9ncm91cF9vd25lclwiLFlvPVwiaGFuZGxlX2FwcGx5X2pvaW5fZ3JvdXBcIixqbz1cImhhbmRsZV9pbnZpdGVfam9pbl9wZXJtaXNzaW9uX2dyb3VwXCIsem89XCJoYW5kbGVfaW52aXRlX2pvaW5fZ3JvdXBcIixKbz1cImdyb3VwX21zZ19yZWNhbGxcIixYbz1cIm1zZ19yZWFkX3JlcG9ydFwiLFpvPVwicmVhZF9hbGxfdW5yZWFkX21zZ1wiLFFvPVwiZ3JvdXBfbXNnX2dldFwiLGVpPVwiZ2V0X2dyb3VwX21zZ19yZWNlaXB0XCIsdGk9XCJncm91cF9tc2dfcmVjZWlwdFwiLHNpPVwiYzJjX21zZ19yZWFkX3JlY2VpcHRcIixvaT1cImdldF9ncm91cF9tc2dfcmVjZWlwdF9kZXRhaWxcIixpaT1cImdldF9wZW5kZW5jeVwiLG5pPVwiZGVsZXRlbXNnXCIscmk9XCJnZXRfbXNnXCIsYWk9XCJnZXRfbXNnX25vYXV0aFwiLHVpPVwiZ2V0X29ubGluZV9tZW1iZXJfbnVtXCIsY2k9XCJkZWxldGVfZ3JvdXBfcmFtYmxlX21zZ19ieV9zZXFcIixsaT1cIm1vZGlmeV9ncm91cF9tc2dcIixkaT1cInNldF9ncm91cF9hdHRyXCIscGk9XCJtb2RpZnlfZ3JvdXBfYXR0clwiLGhpPVwiZGVsZXRlX2dyb3VwX2F0dHJcIixnaT1cImNsZWFyX2dyb3VwX2F0dHJcIixfaT1cImdldF9ncm91cF9hdHRyXCIsbWk9XCJncm91cF9zZXRfa2V5X3ZhbHVlc1wiLE1pPVwiZ3JvdXBfZ2V0X2tleV92YWx1ZXNcIixmaT1cImdldF9ncm91cF9ub3RpZnlcIixJaT1cInVwZGF0ZV9ncm91cF9jb3VudGVyXCIsQ2k9XCJnZXRfZ3JvdXBfY291bnRlclwiLFRpPVwiZ2V0X2dyb3VwX21lbWJlcl9pbmZvXCIseWk9XCJnZXRfbWVtYmVyc1wiLERpPVwiZ2V0X3NwZWNpZmllZF9ncm91cF9tZW1iZXJfaW5mb1wiLEVpPVwiYWRkX2dyb3VwX21lbWJlclwiLFNpPVwiZGVsZXRlX2dyb3VwX21lbWJlclwiLExpPVwiYmFuX2dyb3VwX21lbWJlclwiLEFpPVwibW9kaWZ5X2dyb3VwX21lbWJlcl9pbmZvXCIsdmk9XCJtb2RpZnlfdXNlcl9pbmZvXCIsTmk9XCJjb3NcIixSaT1cInByZV9zaWdcIixPaT1cInZpZGVvX2NvdmVyXCIsR2k9XCJ0aW1fd2ViX3JlcG9ydF92MlwiLFVpPVwiYWxpdmVcIixraT1cIm1zZ19wdXNoXCIsUGk9XCJtdWx0aV9tc2dfcHVzaF93c1wiLGJpPVwid3NfbXNnX3B1c2hfYWNrXCIsd2k9XCJzdGF0X2ZvcmNlb2ZmbGluZVwiLEZpPVwic2F2ZV9yZWxheV9qc29uX21zZ1wiLCRpPVwiZ2V0X3JlbGF5X2pzb25fbXNnXCIscWk9XCJmZXRjaF9jb25maWdcIix4aT1cInB1c2hfY29uZmlndjJcIixWaT1cImZldGNoX2ltc2RrX3B1cmNoYXNlX2JpdHN2MlwiLEJpPVwicHVzaF9pbXNka19wdXJjaGFzZV9iaXRzdjJcIixIaT1cIm5vdGlmeTJcIixLaT1cImNyZWF0ZV90b3BpY1wiLFdpPVwiZGVzdHJveV90b3BpY1wiLFlpPVwibW9kaWZ5X3RvcGljXCIsamk9XCJnZXRfdG9waWNcIix6aT1cIndzX3NldF9jdXN0b21fc3RhdHVzXCIsSmk9XCJ3c19nZXRfdXNlcl9zdGF0dXNcIixYaT1cIndzX3N0YXR1c19zdWJzY3JpYmVcIixaaT1cIndzX3N0YXR1c191bnN1YnNjcmliZVwiLFFpPVwid3Nfc3RhdF9iYWNrZ3JvdW5kXCIsZW49XCJ3c19zdGF0X2ZvcmVncm91bmRcIix0bj1cIndzX3N0YXRfc2V0dG9rZW5cIixzbj1cImdldF9sb2NhbF93b3Jkc1wiLG9uPVwid3NfYmF0Y2hfdHJhbnNfdGV4dFwiLG5uPXtOT19TREtBUFBJRDoyZTMsTk9fQUNDT1VOVF9UWVBFOjIwMDEsTk9fSURFTlRJRklFUjoyMDAyLE5PX1VTRVJTSUc6MjAwMyxOT19USU5ZSUQ6MjAyMixOT19BMktFWToyMDIzLFVTRVJfTk9UX0xPR0dFRF9JTjoyMDI0LFJFUEVBVF9MT0dJTjoyMDI1LENPU19VTkRFVEVDVEVEOjIwNDAsQ09TX0dFVF9TSUdfRkFJTDoyMDQxLE1FU1NBR0VfU0VORF9GQUlMOjIxMDAsTUVTU0FHRV9TRU5EX0ZBSUxfTk9UX0lOX0FWQ0hBVFJPT006MjEwMSxNRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFOjIxMDUsTUVTU0FHRV9TRU5EX0lOVkFMSURfQ09OVkVSU0FUSU9OX1RZUEU6MjEwNixNRVNTQUdFX0ZJTEVfSVNfRU1QVFk6MjEwOCxNRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1I6MjEwOSxNRVNTQUdFX1JFVk9LRV9GQUlMOjIxMTAsTUVTU0FHRV9ERUxFVEVfRkFJTDoyMTExLE1FU1NBR0VfVU5SRUFEX0FMTF9GQUlMOjIxMTIsUkVBRF9SRUNFSVBUX01FU1NBR0VfTElTVF9FTVBUWToyMTE0LE1FU1NBR0VfU0VORF9HUk9VUF9XSVRIX1RPUElDX0ZBSUw6MjExNSxDQU5OT1RfREVMRVRFX0dST1VQX1NZU1RFTV9OT1RJQ0U6MjExNixUUkFOU0xBVEVfVEVYVF9GQUlMOjIxMTcsTUVTU0FHRV9JTUFHRV9TRUxFQ1RfRklMRV9GSVJTVDoyMjUxLE1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVQ6MjI1MixNRVNTQUdFX0lNQUdFX1NJWkVfTElNSVQ6MjI1MyxNRVNTQUdFX0FVRElPX1VQTE9BRF9GQUlMOjIzMDAsTUVTU0FHRV9BVURJT19TSVpFX0xJTUlUOjIzMDEsTUVTU0FHRV9WSURFT19VUExPQURfRkFJTDoyMzUwLE1FU1NBR0VfVklERU9fU0laRV9MSU1JVDoyMzUxLE1FU1NBR0VfVklERU9fVFlQRVNfTElNSVQ6MjM1MixNRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUw6MjQwMCxNRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1Q6MjQwMSxNRVNTQUdFX0ZJTEVfU0laRV9MSU1JVDoyNDAyLE1FU1NBR0VfRklMRV9VUkxfSVNfRU1QVFk6MjQwMyxNRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUQ6MjQ1MCxNRVNTQUdFX01FUkdFUl9LRVlfSU5WQUxJRDoyNDUxLE1FU1NBR0VfTUVSR0VSX0RPV05MT0FEX0ZBSUw6MjQ1MixNRVNTQUdFX0ZPUldBUkRfVFlQRV9JTlZBTElEOjI0NTMsTUVTU0FHRV9NT0RJRllfQ09ORkxJQ1Q6MjQ4MCxNRVNTQUdFX01PRElGWV9ESVNBQkxFRF9JTl9BVkNIQVRST09NOjI0ODEsQ09OVkVSU0FUSU9OX05PVF9GT1VORDoyNTAwLFVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5EOjI1MDEsQ09OVkVSU0FUSU9OX1VOX1JFQ09SREVEX1RZUEU6MjUwMixJTlZBTElEX0NPTlZFUlNBVElPTl9JRDoyNTAzLElMTEVHQUxfR1JPVVBfVFlQRToyNjAwLENBTk5PVF9KT0lOX1dPUks6MjYwMSxJTExFR0FMX0dST1VQX0lEOjI2MDIsQ0FOTk9UX0ZJTkRfR1JPVVA6MjYwMyxDQU5OT1RfQ0hBTkdFX09XTkVSX0lOX0FWQ0hBVFJPT006MjYyMCxDQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEY6MjYyMSxDQU5OT1RfRElTTUlTU19XT1JLOjI2MjIsTUVNQkVSX05PVF9JTl9HUk9VUDoyNjIzLEpPSU5fR1JPVVBfRkFJTDoyNjYwLENBTk5PVF9BRERfTUVNQkVSX0lOX0FWQ0hBVFJPT006MjY2MSxDQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOOjI2NjIsTk9UX09XTkVSOjI2ODEsQ0FOTk9UX1NFVF9NRU1CRVJfUk9MRV9JTl9XT1JLX0FORF9BVkNIQVRST09NOjI2ODIsSU5WQUxJRF9NRU1CRVJfUk9MRToyNjgzLENBTk5PVF9TRVRfU0VMRl9NRU1CRVJfUk9MRToyNjg0LENBTk5PVF9NVVRFX1NFTEY6MjY4NSxCQU5fRFVSQVRJT05fSU5WQUxJRDoyNjg2LE5PVF9NWV9GUklFTkQ6MjcwMCxBTFJFQURZX01ZX0ZSSUVORDoyNzAxLEZSSUVORF9HUk9VUF9FWElTVEVEOjI3MTAsRlJJRU5EX0dST1VQX05PVF9FWElTVDoyNzExLEZSSUVORF9BUFBMSUNBVElPTl9OT1RfRVhJU1Q6MjcxNixVUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNOjI3MjEsVVBEQVRFX1BST0ZJTEVfTk9fS0VZOjI3MjIsQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVDoyNzQyLE5FVFdPUktfRVJST1I6MjgwMCxORVRXT1JLX1RJTUVPVVQ6MjgwMSxOT19ORVRXT1JLOjI4MDUsVU5DQVVHSFRfRVJST1I6MjkwMyxJTlZBTElEX09QRVJBVElPTjoyOTA1LElOVkFMSURfVFJUQ19DTUQ6Mjk5NSxPVkVSX0ZSRVFVRU5DWV9MSU1JVDoyOTk2LENBTk5PVF9GSU5EX1BST1RPQ09MOjI5OTcsQ0FOTk9UX0ZJTkRfTU9EVUxFOjI5OTgsU0RLX0lTX05PVF9SRUFEWToyOTk5LExPR0dJTkdfSU46M2UzLExPR0lOX0ZBSUxFRDozMDAxLEtJQ0tFRF9PVVRfTVVMVF9ERVZJQ0U6MzAwMixLSUNLRURfT1VUX01VTFRfQUNDT1VOVDozMDAzLEtJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEOjMwMDQsTE9HR0VEX09VVDozMDA1LEtJQ0tFRF9PVVRfUkVTVF9BUEk6MzAwNixJTExFR0FMX1RPUElDX0lEOjMwMjEsQ0FOTk9UX1VTRV9DT01NRVJDSUFMX0FCSUxJVFk6MzEyMixQUk9GQU5JVFlfRk9VTkQ6MzEyMyxNRVNTQUdFX0EyS0VZX0VYUElSRUQ6MjAwMDIsQUNDT1VOVF9BMktFWV9FWFBJUkVEOjcwMDAxLEhFTExPX0FOU1dFUl9LSUNLRURfT1VUOjEwMDIsT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SOjYwMDIyfSxybj1cIm5ldHdvcmtSVFRcIixhbj1cIm1lc3NhZ2VFMkVEZWxheVwiLHVuPVwic2VuZE1lc3NhZ2VDMkNcIixjbj1cInNlbmRNZXNzYWdlR3JvdXBcIixsbj1cInNlbmRNZXNzYWdlR3JvdXBBVlwiLGRuPVwic2VuZE1lc3NhZ2VSaWNoTWVkaWFcIixwbj1cImNvc1VwbG9hZFwiLGhuPVwibWVzc2FnZVJlY2VpdmVkR3JvdXBcIixnbj1cIm1lc3NhZ2VSZWNlaXZlZEdyb3VwQVZQdXNoXCIsX249XCJtZXNzYWdlUmVjZWl2ZWRHcm91cEFWUHVsbFwiLG1uPXtbcm5dOjIsW2FuXTozLFt1bl06NCxbY25dOjUsW2xuXTo2LFtkbl06NyxbaG5dOjgsW2duXTo5LFtfbl06MTAsW3BuXToxMX0sTW49e2luZm86NCx3YXJuaW5nOjUsZXJyb3I6Nn0sZm49e3dpZmk6MSxcIjJnXCI6MixcIjNnXCI6MyxcIjRnXCI6NCxcIjVnXCI6NSx1bmtub3duOjYsbm9uZTo3LG9ubGluZTo4fSxJbj17bG9naW46NH07Y2xhc3MgQ257Y29uc3RydWN0b3IoZSl7dGhpcy5fbj1cIlNTT0xvZ0RhdGFcIix0aGlzLmV2ZW50VHlwZT1JbltlXXx8MCx0aGlzLnRpbWVzdGFtcD0wLHRoaXMubmV0d29ya1R5cGU9OCx0aGlzLmNvZGU9MCx0aGlzLm1lc3NhZ2U9XCJcIix0aGlzLm1vcmVNZXNzYWdlPVwiXCIsdGhpcy5leHRlbnNpb249ZSx0aGlzLmNvc3RUaW1lPTAsdGhpcy5kdXBsaWNhdGU9ITEsdGhpcy5sZXZlbD00LHRoaXMudWlQbGF0Zm9ybT12b2lkIDAsdGhpcy5fc2VudEZsYWc9ITEsdGhpcy5fc3RhcnR0cz1jZSgpfXN0YXRpYyBiaW5kRXZlbnRTdGF0TW9kdWxlKGUpe0NuLnByb3RvdHlwZS5fZXZlbnRTdGF0TW9kdWxlPWV9dXBkYXRlVGltZVN0YW1wKCl7dGhpcy50aW1lc3RhbXA9Y2UoKX1zdGFydChlKXtyZXR1cm4gdGhpcy5fc3RhcnR0cz1lLHRoaXN9ZW5kKGU9ITEpe2lmKHRoaXMuX3NlbnRGbGFnKXJldHVybjtjb25zdCB0PWNlKCk7MD09PXRoaXMuY29zdFRpbWUmJih0aGlzLmNvc3RUaW1lPXQtdGhpcy5fc3RhcnR0cyksdGhpcy5zZXRNb3JlTWVzc2FnZShgc3RhcnR0czoke3RoaXMuX3N0YXJ0dHN9IGVuZHRzOiR7dH1gKSxlPyh0aGlzLl9zZW50RmxhZz0hMCx0aGlzLl9ldmVudFN0YXRNb2R1bGUmJnRoaXMuX2V2ZW50U3RhdE1vZHVsZS5wdXNoSW4odGhpcykpOnNldFRpbWVvdXQoKCk9Pnt0aGlzLl9zZW50RmxhZz0hMCx0aGlzLl9ldmVudFN0YXRNb2R1bGUmJnRoaXMuX2V2ZW50U3RhdE1vZHVsZS5wdXNoSW4odGhpcyl9LDApfXNldEVycm9yKGUsdCxzKXtpZighKGUgaW5zdGFuY2VvZiBFcnJvcikpcmV0dXJuIF9lLncodGhpcy5fbitcIi5zZXRFcnJvciB2YWx1ZSBub3QgaW5zdGFuY2VvZiBFcnJvciwgcGxlYXNlIGNoZWNrIVwiKSx0aGlzO2lmKHRoaXMuX3NlbnRGbGFnKXJldHVybiB0aGlzO2lmKHRoaXMuc2V0TmV0d29ya1R5cGUocyksdCllLmNvZGUmJnRoaXMuc2V0Q29kZShlLmNvZGUpLGUubWVzc2FnZSYmdGhpcy5zZXRNb3JlTWVzc2FnZShlLm1lc3NhZ2UpO2Vsc2V7Y29uc3QgZT1ubi5OT19ORVRXT1JLO3RoaXMuc2V0Q29kZShlKX1yZXR1cm4gdGhpcy5zZXRMZXZlbChcImVycm9yXCIpLHRoaXN9c2V0Q29kZShlKXtyZXR1cm4gd2UoZSl8fHRoaXMuX3NlbnRGbGFnfHwoXCJFQ09OTkFCT1JURURcIj09PWUmJih0aGlzLmNvZGU9MTAzKSxHZShlKT90aGlzLmNvZGU9ZTpfZS53KHRoaXMuX24rXCIuc2V0Q29kZSB2YWx1ZSBub3QgYSBudW1iZXIsIHBsZWFzZSBjaGVjayFcIixlLHR5cGVvZiBlKSksdGhpc31zZXRNZXNzYWdlKGUpe3JldHVybiB3ZShlKXx8dGhpcy5fc2VudEZsYWd8fChHZShlKSYmKHRoaXMubWVzc2FnZT1lLnRvU3RyaW5nKCkpLFVlKGUpJiYodGhpcy5tZXNzYWdlPWUpKSx0aGlzfXNldENvc3RUaW1lKGUpe3JldHVybiB0aGlzLmNvc3RUaW1lPWUsdGhpc31zZXRMZXZlbChlKXtyZXR1cm4gd2UoZSl8fHRoaXMuX3NlbnRGbGFnfHwodGhpcy5sZXZlbD1NbltlXSksdGhpc31zZXRNb3JlTWVzc2FnZShlKXtyZXR1cm4gTHQodGhpcy5tb3JlTWVzc2FnZSk/dGhpcy5tb3JlTWVzc2FnZT1cIlwiK2U6dGhpcy5tb3JlTWVzc2FnZSs9XCIgXCIrZSx0aGlzfXNldE5ldHdvcmtUeXBlKGUpe2lmKHdlKGUpKV9lLncodGhpcy5fbitcIi5zZXROZXR3b3JrVHlwZSB2YWx1ZSBpcyB1bmRlZmluZWQsIHBsZWFzZSBjaGVjayFcIik7ZWxzZXtjb25zdCB0PWZuW2UudG9Mb3dlckNhc2UoKV07d2UodCl8fCh0aGlzLm5ldHdvcmtUeXBlPXQpfXJldHVybiB0aGlzfWdldFN0YXJ0VHMoKXtyZXR1cm4gdGhpcy5fc3RhcnR0c31zZXRVSVBsYXRmb3JtKGUpe3RoaXMudWlQbGF0Zm9ybT1lfX1jbGFzcyBUbntjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5NU0dfVEVYVCx0aGlzLmNvbnRlbnQ9e3RleHQ6ZS50ZXh0fHxcIlwifX1zZXRUZXh0KGUpe3RoaXMuY29udGVudC50ZXh0PWV9c2VuZGFibGUoKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC50ZXh0Lmxlbmd0aH19Y2xhc3MgeW57Y29uc3RydWN0b3IoZSxzKXt0aGlzLl9pbWFnZU1lbW9yeVVSTD1cIlwiLHRoaXMuX2ZpbGVEb3dubG9hZFByb3h5PXMsUD90aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XWE1pbmlBcHAoZS5maWxlKTp0aGlzLmNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XZWIoZS5maWxlKSx0aGlzLl9pbml0SW1hZ2VJbmZvTW9kZWwoKSx0aGlzLnR5cGU9dC5NU0dfSU1BR0UsdGhpcy5fcGVyY2VudD0wLHRoaXMuY29udGVudD17aW1hZ2VGb3JtYXQ6ZS5pbWFnZUZvcm1hdHx8bWUuVU5LTk9XTix1dWlkOmUudXVpZCxpbWFnZUluZm9BcnJheTpbXX0sdGhpcy5pbml0SW1hZ2VJbmZvQXJyYXkoZS5pbWFnZUluZm9BcnJheSksdGhpcy5fYXV0b0ZpeFVybCgpfV9pbml0SW1hZ2VJbmZvTW9kZWwoKXtjb25zdCBlPXRoaXM7dGhpcy5fSW1hZ2VJbmZvTW9kZWw9ZnVuY3Rpb24odCl7dGhpcy5pbnN0YW5jZUlEPVdlKDk5OTk5OTkpLHRoaXMuc2l6ZVR5cGU9dC50eXBlfHwwLHRoaXMudHlwZT0wLHRoaXMuc2l6ZT10LnNpemV8fDAsdGhpcy53aWR0aD10LndpZHRofHwwLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0fHwwLHRoaXMuaW1hZ2VVcmw9dC51cmx8fFwiXCIsdGhpcy51cmw9RXQodC51cmx8fGUuX2ltYWdlTWVtb3J5VVJMLGUuX2ZpbGVEb3dubG9hZFByb3h5KX0sdGhpcy5fSW1hZ2VJbmZvTW9kZWwucHJvdG90eXBlPXtzZXRTaXplVHlwZShlKXt0aGlzLnNpemVUeXBlPWV9LHNldFR5cGUoZSl7dGhpcy50eXBlPWV9LHNldEltYWdlVXJsKGUpe2UmJih0aGlzLmltYWdlVXJsPWUpfSxnZXRJbWFnZVVybCgpe3JldHVybiB0aGlzLmltYWdlVXJsfX19aW5pdEltYWdlSW5mb0FycmF5KGUpe2xldCB0PTAscz1udWxsLG89bnVsbDtmb3IoO3Q8PTI7KW89d2UoZSl8fHdlKGVbdF0pP3t0eXBlOjAsc2l6ZTowLHdpZHRoOjAsaGVpZ2h0OjAsdXJsOlwiXCJ9OmVbdF0scz1uZXcgdGhpcy5fSW1hZ2VJbmZvTW9kZWwobykscy5zZXRTaXplVHlwZSh0KzEpLHMuc2V0VHlwZSh0KSx0aGlzLmFkZEltYWdlSW5mbyhzKSx0Kys7dGhpcy51cGRhdGVBY2Nlc3NTaWRlSW1hZ2VJbmZvQXJyYXkoKX11cGRhdGVJbWFnZUluZm9BcnJheShlKXtjb25zdCB0PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGg7bGV0IHM7Zm9yKGxldCBvPTA7bzx0O28rKylzPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVtvXSxlW29dLnNpemUmJihzLnNpemU9ZVtvXS5zaXplKSxlW29dLnVybCYmcy5zZXRJbWFnZVVybChlW29dLnVybCksZVtvXS53aWR0aCYmKHMud2lkdGg9ZVtvXS53aWR0aCksZVtvXS5oZWlnaHQmJihzLmhlaWdodD1lW29dLmhlaWdodCl9X2F1dG9GaXhVcmwoKXtjb25zdCBlPXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGg7bGV0IHQ9XCJcIixzPVwiXCI7Y29uc3Qgbz1bXCJodHRwXCIsXCJodHRwc1wiXTtsZXQgaT1udWxsO2ZvcihsZXQgbj0wO248ZTtuKyspdGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W25dLnVybCYmKGk9dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5W25dLFwiXCIhPT1pLmltYWdlVXJsJiYocz1pLmltYWdlVXJsLnNsaWNlKDAsaS5pbWFnZVVybC5pbmRleE9mKFwiOi8vXCIpKzEpLHQ9aS5pbWFnZVVybC5zbGljZShpLmltYWdlVXJsLmluZGV4T2YoXCI6Ly9cIikrMSksby5pbmRleE9mKHMpPDAmJihzPVwiaHR0cHM6XCIpLHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVtuXS5zZXRJbWFnZVVybChbcyx0XS5qb2luKFwiXCIpKSkpfXVwZGF0ZVBlcmNlbnQoZSl7dGhpcy5fcGVyY2VudD1lLHRoaXMuX3BlcmNlbnQ+MSYmKHRoaXMuX3BlcmNlbnQ9MSl9dXBkYXRlSW1hZ2VGb3JtYXQoZSl7dGhpcy5jb250ZW50LmltYWdlRm9ybWF0PW1lW2UudG9VcHBlckNhc2UoKV18fG1lLlVOS05PV059Y3JlYXRlSW1hZ2VEYXRhQVNVUkxJbldlYihlKXt2b2lkIDAhPT1lJiZlLmZpbGVzLmxlbmd0aD4wJiYodGhpcy5faW1hZ2VNZW1vcnlVUkw9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZS5maWxlc1swXSkpfWNyZWF0ZUltYWdlRGF0YUFTVVJMSW5XWE1pbmlBcHAoZSl7ZSYmZS51cmwmJih0aGlzLl9pbWFnZU1lbW9yeVVSTD1lLnVybCl9cmVwbGFjZUltYWdlSW5mbyhlLHQpe3RoaXMuY29udGVudC5pbWFnZUluZm9BcnJheVt0XWluc3RhbmNlb2YgdGhpcy5fSW1hZ2VJbmZvTW9kZWx8fCh0aGlzLmNvbnRlbnQuaW1hZ2VJbmZvQXJyYXlbdF09ZSl9YWRkSW1hZ2VJbmZvKGUpe3RoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGg+PTN8fHRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5wdXNoKGUpfXVwZGF0ZUFjY2Vzc1NpZGVJbWFnZUluZm9BcnJheSgpe2NvbnN0IGU9dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5LHt3aWR0aDp0PTAsaGVpZ2h0OnM9MH09ZVswXTswIT09dCYmMCE9PXMmJihodChlKSxPYmplY3QuYXNzaWduKGVbMl0scHQoe29yaWdpbldpZHRoOnQsb3JpZ2luSGVpZ2h0OnMsbWluOjcyMH0pKSl9c2VuZGFibGUoKXtyZXR1cm4gMCE9PXRoaXMuY29udGVudC5pbWFnZUluZm9BcnJheS5sZW5ndGgmJihcIlwiIT09dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5WzBdLmltYWdlVXJsJiYwIT09dGhpcy5jb250ZW50LmltYWdlSW5mb0FycmF5WzBdLnNpemUpfX1jbGFzcyBEbntjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5NU0dfRkFDRSx0aGlzLmNvbnRlbnQ9ZXx8bnVsbH1zZW5kYWJsZSgpe3JldHVybiBudWxsIT09dGhpcy5jb250ZW50fX1jbGFzcyBFbntjb25zdHJ1Y3RvcihlLHMpe3RoaXMudHlwZT10Lk1TR19BVURJTyx0aGlzLl9wZXJjZW50PTAsdGhpcy5jb250ZW50PXtkb3dubG9hZEZsYWc6MixzZWNvbmQ6ZS5zZWNvbmQsc2l6ZTplLnNpemUsdXJsOkV0KGUudXJsLHMpLHJlbW90ZUF1ZGlvVXJsOmUudXJsfHxcIlwiLHV1aWQ6ZS51dWlkfX11cGRhdGVQZXJjZW50KGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfXVwZGF0ZUF1ZGlvVXJsKGUpe3RoaXMuY29udGVudC5yZW1vdGVBdWRpb1VybD1lfXNlbmRhYmxlKCl7cmV0dXJuXCJcIiE9PXRoaXMuY29udGVudC5yZW1vdGVBdWRpb1VybH19Y29uc3QgU249e2Zyb206ITAsZ3JvdXBJRDohMCxncm91cE5hbWU6ITAsdG86ITB9O2NsYXNzIExue2NvbnN0cnVjdG9yKGUpe3RoaXMudHlwZT10Lk1TR19HUlBfVElQLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudChlKX1faW5pdENvbnRlbnQoZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57c3dpdGNoKHQpe2Nhc2VcInJlbWFya0luZm9cIjpicmVhaztjYXNlXCJncm91cFByb2ZpbGVcIjp0aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlPXt9LHRoaXMuX2luaXRHcm91cFByb2ZpbGUoZVt0XSk7YnJlYWs7Y2FzZVwib3BlcmF0b3JJbmZvXCI6YnJlYWs7Y2FzZVwibWVtYmVySW5mb0xpc3RcIjpjYXNlXCJtc2dNZW1iZXJJbmZvXCI6dGhpcy5fdXBkYXRlTWVtYmVyTGlzdChlW3RdKTticmVhaztjYXNlXCJtZW1iZXJFeHRyYUluZm9cIjpjYXNlXCJvbmxpbmVNZW1iZXJJbmZvXCI6YnJlYWs7Y2FzZVwibWVtYmVyTnVtXCI6dGhpcy5jb250ZW50W3RdPWVbdF0sdGhpcy5jb250ZW50Lm1lbWJlckNvdW50PWVbdF07YnJlYWs7Y2FzZVwibmV3R3JvdXBQcm9maWxlXCI6dGhpcy5jb250ZW50Lm5ld0dyb3VwUHJvZmlsZT17fSx0aGlzLl9pbml0TmV3R3JvdXBQcm9maWxlKGVbdF0pO2JyZWFrO2RlZmF1bHQ6dGhpcy5jb250ZW50W3RdPWVbdF19fSksdGhpcy5jb250ZW50LnVzZXJJRExpc3R8fCh0aGlzLmNvbnRlbnQudXNlcklETGlzdD1bdGhpcy5jb250ZW50Lm9wZXJhdG9ySURdKX1faW5pdEdyb3VwUHJvZmlsZShlKXtjb25zdCB0PU9iamVjdC5rZXlzKGUpO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cysrKXtjb25zdCBvPXRbc107U25bb10mJih0aGlzLmNvbnRlbnQuZ3JvdXBQcm9maWxlW29dPWVbb10pfX1fdXBkYXRlTWVtYmVyTGlzdChlKXtMdCh0aGlzLmNvbnRlbnQubWVtYmVyTGlzdCk/dGhpcy5jb250ZW50Lm1lbWJlckxpc3Q9ZTp0aGlzLmNvbnRlbnQubWVtYmVyTGlzdC5mb3JFYWNoKHQ9PntlLmZvckVhY2goZT0+e3QudXNlcklEPT09ZS51c2VySUQmJk9iamVjdC5hc3NpZ24odCxlKX0pfSl9X2luaXROZXdHcm91cFByb2ZpbGUoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyhlKTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoO3MrKyl7Y29uc3Qgbz10W3NdO1wibXV0ZUFsbE1lbWJlcnNcIiE9PW8/dGhpcy5jb250ZW50Lm5ld0dyb3VwUHJvZmlsZVtvXT1lW29dOnRoaXMuY29udGVudC5uZXdHcm91cFByb2ZpbGVbb109MT09PWVbb119fX1jb25zdCBBbj17ZnJvbTohMCxncm91cElEOiEwLGdyb3VwTmFtZTohMCx0bzohMH07Y2xhc3Mgdm57Y29uc3RydWN0b3IoZSl7dGhpcy50eXBlPXQuTVNHX0dSUF9TWVNfTk9USUNFLHRoaXMuY29udGVudD17fSx0aGlzLl9pbml0Q29udGVudChlKX1faW5pdENvbnRlbnQoZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57c3dpdGNoKHQpe2Nhc2VcIm1lbWJlckluZm9MaXN0XCI6YnJlYWs7Y2FzZVwicmVtYXJrSW5mb1wiOnRoaXMuY29udGVudC5oYW5kbGVNZXNzYWdlPWVbdF07YnJlYWs7Y2FzZVwiZ3JvdXBQcm9maWxlXCI6dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZT17fSx0aGlzLl9pbml0R3JvdXBQcm9maWxlKGVbdF0pO2JyZWFrO2RlZmF1bHQ6dGhpcy5jb250ZW50W3RdPWVbdF19fSl9X2luaXRHcm91cFByb2ZpbGUoZSl7Y29uc3QgdD1PYmplY3Qua2V5cyhlKTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoO3MrKyl7Y29uc3Qgbz10W3NdO0FuW29dJiYoXCJncm91cE5hbWVcIj09PW8/dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZS5uYW1lPWVbb106dGhpcy5jb250ZW50Lmdyb3VwUHJvZmlsZVtvXT1lW29dKX19fWNsYXNzIE5ue2NvbnN0cnVjdG9yKGUscyl7dGhpcy50eXBlPXQuTVNHX0ZJTEUsdGhpcy5fcGVyY2VudD0wO2NvbnN0IG89dGhpcy5fZ2V0RmlsZUluZm8oZSk7dGhpcy5jb250ZW50PXtkb3dubG9hZEZsYWc6MixmaWxlVXJsOkV0KGUudXJsLHMpfHxcIlwiLHV1aWQ6ZS51dWlkLGZpbGVOYW1lOm8ubmFtZXx8XCJcIixmaWxlU2l6ZTpvLnNpemV8fDB9fV9nZXRGaWxlSW5mbyhlKXtpZighd2UoZS5maWxlTmFtZSkmJiF3ZShlLmZpbGVTaXplKSlyZXR1cm57c2l6ZTplLmZpbGVTaXplLG5hbWU6ZS5maWxlTmFtZX07Y29uc3QgdD1lLmZpbGUuZmlsZXNbMF07aWYoVSl7aWYodC5wYXRoJiYtMSE9PXQucGF0aC5pbmRleE9mKFwiLlwiKSl7Y29uc3QgZT10LnBhdGguc2xpY2UodC5wYXRoLmxhc3RJbmRleE9mKFwiLlwiKSsxKS50b0xvd2VyQ2FzZSgpO3QudHlwZT1lLHQubmFtZXx8KHQubmFtZT1gJHtXZSg5OTk5OTkpfS4ke2V9YCl9dC5uYW1lfHwodC50eXBlPVwiXCIsdC5uYW1lPXQucGF0aC5zbGljZSh0LnBhdGgubGFzdEluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCkpLHQuc3VmZml4JiYodC50eXBlPXQuc3VmZml4KSx0LnVybHx8KHQudXJsPXQucGF0aCl9cmV0dXJue3NpemU6dC5zaXplLG5hbWU6dC5uYW1lfX11cGRhdGVQZXJjZW50KGUpe3RoaXMuX3BlcmNlbnQ9ZSx0aGlzLl9wZXJjZW50PjEmJih0aGlzLl9wZXJjZW50PTEpfXVwZGF0ZUZpbGVVcmwoZSl7dGhpcy5jb250ZW50LmZpbGVVcmw9ZX1zZW5kYWJsZSgpe3JldHVyblwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZVVybCYmKFwiXCIhPT10aGlzLmNvbnRlbnQuZmlsZU5hbWUmJjAhPT10aGlzLmNvbnRlbnQuZmlsZVNpemUpfX1jbGFzcyBSbntjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5NU0dfQ1VTVE9NLHRoaXMuY29udGVudD17ZGF0YTplLmRhdGF8fFwiXCIsZGVzY3JpcHRpb246ZS5kZXNjcmlwdGlvbnx8XCJcIixleHRlbnNpb246ZS5leHRlbnNpb258fFwiXCJ9fXNldERhdGEoZSl7cmV0dXJuIHRoaXMuY29udGVudC5kYXRhPWUsdGhpc31zZXREZXNjcmlwdGlvbihlKXtyZXR1cm4gdGhpcy5jb250ZW50LmRlc2NyaXB0aW9uPWUsdGhpc31zZXRFeHRlbnNpb24oZSl7cmV0dXJuIHRoaXMuY29udGVudC5leHRlbnNpb249ZSx0aGlzfXNlbmRhYmxlKCl7cmV0dXJuIDAhPT10aGlzLmNvbnRlbnQuZGF0YS5sZW5ndGh8fDAhPT10aGlzLmNvbnRlbnQuZGVzY3JpcHRpb24ubGVuZ3RofHwwIT09dGhpcy5jb250ZW50LmV4dGVuc2lvbi5sZW5ndGh9fWNsYXNzIE9ue2NvbnN0cnVjdG9yKGUscyl7dGhpcy50eXBlPXQuTVNHX1ZJREVPLHRoaXMuX3BlcmNlbnQ9MCx0aGlzLmNvbnRlbnQ9e3JlbW90ZVZpZGVvVXJsOmUucmVtb3RlVmlkZW9Vcmx8fGUudmlkZW9Vcmx8fFwiXCIsdmlkZW9Gb3JtYXQ6ZS52aWRlb0Zvcm1hdCx2aWRlb1NlY29uZDpwYXJzZUludChlLnZpZGVvU2Vjb25kLDEwKSx2aWRlb1NpemU6ZS52aWRlb1NpemUsdmlkZW9Vcmw6RXQoZS52aWRlb1VybCxzKSx2aWRlb0Rvd25sb2FkRmxhZzoyLHZpZGVvVVVJRDplLnZpZGVvVVVJRCx0aHVtYlVVSUQ6ZS50aHVtYlVVSUQsdGh1bWJGb3JtYXQ6ZS50aHVtYkZvcm1hdCx0aHVtYldpZHRoOmUudGh1bWJXaWR0aCxzbmFwc2hvdFdpZHRoOmUudGh1bWJXaWR0aCx0aHVtYkhlaWdodDplLnRodW1iSGVpZ2h0LHNuYXBzaG90SGVpZ2h0OmUudGh1bWJIZWlnaHQsdGh1bWJTaXplOmUudGh1bWJTaXplLHNuYXBzaG90U2l6ZTplLnRodW1iU2l6ZSx0aHVtYkRvd25sb2FkRmxhZzoyLHRodW1iVXJsOkV0KGUudGh1bWJVcmwscyksc25hcHNob3RVcmw6RXQoZS50aHVtYlVybCxzKX19dXBkYXRlUGVyY2VudChlKXt0aGlzLl9wZXJjZW50PWUsdGhpcy5fcGVyY2VudD4xJiYodGhpcy5fcGVyY2VudD0xKX11cGRhdGVWaWRlb1VybChlKXtlJiYodGhpcy5jb250ZW50LnJlbW90ZVZpZGVvVXJsPWUpfXVwZGF0ZVNuYXBzaG90SW5mbyhlKXtjb25zdHtzbmFwc2hvdFVybDp0LHNuYXBzaG90V2lkdGg6cyxzbmFwc2hvdEhlaWdodDpvfT1lO0x0KHQpfHwodGhpcy5jb250ZW50LnRodW1iVXJsPXRoaXMuY29udGVudC5zbmFwc2hvdFVybD10KSxMdChzKXx8KHRoaXMuY29udGVudC50aHVtYldpZHRoPXRoaXMuY29udGVudC5zbmFwc2hvdFdpZHRoPU51bWJlcihzKSksTHQobyl8fCh0aGlzLmNvbnRlbnQudGh1bWJIZWlnaHQ9dGhpcy5jb250ZW50LnNuYXBzaG90SGVpZ2h0PU51bWJlcihvKSl9c2VuZGFibGUoKXtyZXR1cm5cIlwiIT09dGhpcy5jb250ZW50LnJlbW90ZVZpZGVvVXJsfX1jbGFzcyBHbntjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5NU0dfTE9DQVRJT047Y29uc3R7ZGVzY3JpcHRpb246cyxsb25naXR1ZGU6byxsYXRpdHVkZTppfT1lO3RoaXMuY29udGVudD17ZGVzY3JpcHRpb246cyxsb25naXR1ZGU6byxsYXRpdHVkZTppfX1zZW5kYWJsZSgpe3JldHVybiEwfX1jbGFzcyBVbntjb25zdHJ1Y3RvcihlLHMpe2lmKHRoaXMuZnJvbT1lLmZyb20sdGhpcy5tZXNzYWdlU2VuZGVyPWUuZnJvbSx0aGlzLnRpbWU9ZS50aW1lLHRoaXMubWVzc2FnZVNlcXVlbmNlPWUuc2VxdWVuY2UsdGhpcy5jbGllbnRTZXF1ZW5jZT1lLmNsaWVudFNlcXVlbmNlfHxlLnNlcXVlbmNlLHRoaXMubWVzc2FnZVJhbmRvbT1lLnJhbmRvbSx0aGlzLmNsb3VkQ3VzdG9tRGF0YT1lLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIix0aGlzLmNsaWVudFRpbWU9ZS5jbGllbnRUaW1lfHx2b2lkIDAsZS5JRCl0aGlzLklEPWUuSUR8fFwiXCIsdGhpcy5uaWNrPWUubmlja3x8XCJcIix0aGlzLmF2YXRhcj1lLmF2YXRhcnx8XCJcIix0aGlzLm1lc3NhZ2VCb2R5PVt7dHlwZTplLnR5cGUscGF5bG9hZDplLnBheWxvYWR9XSxlLmNvbnZlcnNhdGlvblR5cGUuc3RhcnRzV2l0aCh0LkNPTlZfQzJDKT90aGlzLnJlY2VpdmVyVXNlcklEPWUudG86ZS5jb252ZXJzYXRpb25UeXBlLnN0YXJ0c1dpdGgodC5DT05WX0dST1VQKSYmKHRoaXMucmVjZWl2ZXJHcm91cElEPWUudG8pLHRoaXMubWVzc2FnZVJlY2VpdmVyPWUudG87ZWxzZXt0aGlzLm5pY2s9ZS5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPWUuYXZhdGFyfHxcIlwiLHRoaXMubWVzc2FnZUJvZHk9W107Y29uc3Qgbz1lLmVsZW1lbnRzWzBdLnR5cGUsaT1lLmVsZW1lbnRzWzBdLmNvbnRlbnQ7dGhpcy5fcGF0Y2hSaWNoTWVkaWFQYXlsb2FkKG8saSksdGhpcy5fdXBkYXRlUmljaE1lZGlhRG93bmxvYWRVcmwobyxpLHMpLG89PT10Lk1TR19NRVJHRVI/dGhpcy5tZXNzYWdlQm9keS5wdXNoKHt0eXBlOm8scGF5bG9hZDpuZXcga24oaSkuY29udGVudH0pOnRoaXMubWVzc2FnZUJvZHkucHVzaCh7dHlwZTpvLHBheWxvYWQ6aX0pLGUuZ3JvdXBJRCYmKHRoaXMucmVjZWl2ZXJHcm91cElEPWUuZ3JvdXBJRCx0aGlzLm1lc3NhZ2VSZWNlaXZlcj1lLmdyb3VwSUQpLGUudG8mJih0aGlzLnJlY2VpdmVyVXNlcklEPWUudG8sdGhpcy5tZXNzYWdlUmVjZWl2ZXI9ZS50byksdGhpcy5JRD1gJHtlLnRpbnlJRH0tJHtlLmNsaWVudFRpbWV9LSR7ZS5yYW5kb219YH19X3BhdGNoUmljaE1lZGlhUGF5bG9hZChlLHMpe2U9PT10Lk1TR19JTUFHRT9zLmltYWdlSW5mb0FycmF5LmZvckVhY2goZT0+eyFlLmltYWdlVXJsJiZlLnVybCYmKGUuaW1hZ2VVcmw9ZS51cmwsZS5zaXplVHlwZT1lLnR5cGUsMT09PWUudHlwZT9lLnR5cGU9MDozPT09ZS50eXBlJiYoZS50eXBlPTEpKX0pOmU9PT10Lk1TR19WSURFTz8hcy5yZW1vdGVWaWRlb1VybCYmcy52aWRlb1VybCYmKHMucmVtb3RlVmlkZW9Vcmw9cy52aWRlb1VybCk6ZT09PXQuTVNHX0FVRElPPyFzLnJlbW90ZUF1ZGlvVXJsJiZzLnVybCYmKHMucmVtb3RlQXVkaW9Vcmw9cy51cmwpOmU9PT10Lk1TR19GSUxFJiYhcy5maWxlVXJsJiZzLnVybCYmKHMuZmlsZVVybD1zLnVybCxzLnVybD12b2lkIDApfV91cGRhdGVSaWNoTWVkaWFEb3dubG9hZFVybChlLHMsbyl7byYmKGU9PT10Lk1TR19JTUFHRT9zLmltYWdlSW5mb0FycmF5LmZvckVhY2goZT0+e2UudXJsPUV0KGUudXJsLG8pfSk6ZT09PXQuTVNHX1ZJREVPPyhzLnZpZGVvVXJsPUV0KHMudmlkZW9Vcmwsbykscy5zbmFwc2hvdFVybD1FdChzLnRodW1iVXJsLG8pLHMuc25hcHNob3RIZWlnaHQ9cy50aHVtYkhlaWdodCxzLnNuYXBzaG90V2lkdGg9cy50aHVtYldpZHRoKTplPT09dC5NU0dfQVVESU8/cy51cmw9RXQocy51cmwsbyk6ZT09PXQuTVNHX0ZJTEUmJihzLmZpbGVVcmw9RXQocy5maWxlVXJsLG8pKSl9fXZhciBrbj1jbGFzc3tjb25zdHJ1Y3RvcihlLHMpe2lmKHRoaXMudHlwZT10Lk1TR19NRVJHRVIsdGhpcy5jb250ZW50PXtkb3dubG9hZEtleTpcIlwiLHBiRG93bmxvYWRLZXk6XCJcIixtZXNzYWdlTGlzdDpbXSx0aXRsZTpcIlwiLGFic3RyYWN0TGlzdDpbXSxjb21wYXRpYmxlVGV4dDpcIlwiLHZlcnNpb246MCxsYXllcnNPdmVyTGltaXQ6ITF9LGUuZG93bmxvYWRLZXkpe2NvbnN0e2Rvd25sb2FkS2V5OnQscGJEb3dubG9hZEtleTpzLHRpdGxlOm8sYWJzdHJhY3RMaXN0OmksY29tcGF0aWJsZVRleHQ6bix2ZXJzaW9uOnJ9PWU7dGhpcy5jb250ZW50LmRvd25sb2FkS2V5PXQsdGhpcy5jb250ZW50LnBiRG93bmxvYWRLZXk9cyx0aGlzLmNvbnRlbnQudGl0bGU9byx0aGlzLmNvbnRlbnQuYWJzdHJhY3RMaXN0PWksdGhpcy5jb250ZW50LmNvbXBhdGlibGVUZXh0PW4sdGhpcy5jb250ZW50LnZlcnNpb249cnx8MH1lbHNlIGlmKEx0KGUubWVzc2FnZUxpc3QpKTE9PT1lLmxheWVyc092ZXJMaW1pdCYmKHRoaXMuY29udGVudC5sYXllcnNPdmVyTGltaXQ9ITApO2Vsc2V7Y29uc3R7bWVzc2FnZUxpc3Q6dCx0aXRsZTpvLGFic3RyYWN0TGlzdDppLGNvbXBhdGlibGVUZXh0Om4sdmVyc2lvbjpyfT1lLGE9W107dC5mb3JFYWNoKGU9PntpZighTHQoZSkpe2NvbnN0IHQ9bmV3IFVuKGUscyk7YS5wdXNoKHQpfX0pLHRoaXMuY29udGVudC5tZXNzYWdlTGlzdD1hLHRoaXMuY29udGVudC50aXRsZT1vLHRoaXMuY29udGVudC5hYnN0cmFjdExpc3Q9aSx0aGlzLmNvbnRlbnQuY29tcGF0aWJsZVRleHQ9bix0aGlzLmNvbnRlbnQudmVyc2lvbj1yfHwwfX1zZW5kYWJsZSgpe3JldHVybiFMdCh0aGlzLmNvbnRlbnQubWVzc2FnZUxpc3QpfHwhTHQodGhpcy5jb250ZW50LmRvd25sb2FkS2V5KX19O2NvbnN0IFBuPXsxOnQuTVNHX1BSSU9SSVRZX0hJR0gsMjp0Lk1TR19QUklPUklUWV9OT1JNQUwsMzp0Lk1TR19QUklPUklUWV9MT1csNDp0Lk1TR19QUklPUklUWV9MT1dFU1R9O2NsYXNzIGJue2NvbnN0cnVjdG9yKGUpe3RoaXMuSUQ9XCJcIix0aGlzLmNvbnZlcnNhdGlvbklEPWUuY29udmVyc2F0aW9uSUR8fG51bGwsdGhpcy5jb252ZXJzYXRpb25UeXBlPWUuY29udmVyc2F0aW9uVHlwZXx8dC5DT05WX0MyQyx0aGlzLmNvbnZlcnNhdGlvblN1YlR5cGU9ZS5jb252ZXJzYXRpb25TdWJUeXBlLHRoaXMudGltZT1lLnRpbWV8fE1hdGguY2VpbChEYXRlLm5vdygpLzFlMyksdGhpcy5zZXF1ZW5jZT1lLnNlcXVlbmNlfHwwLHRoaXMuY2xpZW50U2VxdWVuY2U9ZS5jbGllbnRTZXF1ZW5jZXx8ZS5zZXF1ZW5jZXx8MCx0aGlzLnJhbmRvbT1lLnJhbmRvbXx8MD09PWUucmFuZG9tP2UucmFuZG9tOldlKCksdGhpcy5wcmlvcml0eT10aGlzLl9jb21wdXRlUHJpb3JpdHkoZS5wcmlvcml0eSksdGhpcy5uaWNrPWUubmlja3x8XCJcIix0aGlzLmF2YXRhcj1lLmF2YXRhcnx8XCJcIix0aGlzLmlzUGVlclJlYWQ9ITEsdGhpcy5uYW1lQ2FyZD1cIlwiLHRoaXMuX2VsZW1lbnRzPVtdLHRoaXMuaXNQbGFjZU1lc3NhZ2U9ZS5pc1BsYWNlTWVzc2FnZXx8MCx0aGlzLmlzUmV2b2tlZD0yPT09ZS5pc1BsYWNlTWVzc2FnZXx8OD09PWUubXNnRmxhZ0JpdHMsdGhpcy5mcm9tPWUuZnJvbXx8bnVsbCx0aGlzLnRvPWUudG98fG51bGwsdGhpcy5mbG93PVwiXCIsdGhpcy5pc1N5c3RlbU1lc3NhZ2U9ZS5pc1N5c3RlbU1lc3NhZ2V8fCExLHRoaXMucHJvdG9jb2w9ZS5wcm90b2NvbHx8XCJKU09OXCIsdGhpcy5pc1Jlc2VuZD0hMSx0aGlzLmlzUmVhZD0hMSx0aGlzLnN0YXR1cz1lLnN0YXR1c3x8TnQuU1VDQ0VTUyx0aGlzLl9vbmxpbmVPbmx5RmxhZz0hMSx0aGlzLl9ncm91cEF0SW5mb0xpc3Q9W10sdGhpcy5fcmVsYXlGbGFnPSExLHRoaXMuYXRVc2VyTGlzdD1bXSx0aGlzLmNsb3VkQ3VzdG9tRGF0YT1lLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIix0aGlzLmlzRGVsZXRlZD0hMSx0aGlzLmlzTW9kaWZpZWQ9ITEsdGhpcy5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudD0hKCFlLm1lc3NhZ2VDb250cm9sSW5mb3x8MSE9PWUubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbVVucmVhZENvdW50KSx0aGlzLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlPSEoIWUubWVzc2FnZUNvbnRyb2xJbmZvfHwxIT09ZS5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2UpLHRoaXMuY2xpZW50VGltZT1lLmNsaWVudFRpbWV8fGRlKCl8fDAsdGhpcy5zZW5kZXJUaW55SUQ9ZS5zZW5kZXJUaW55SUR8fGUudGlueUlEfHxcIlwiLHRoaXMucmVhZFJlY2VpcHRJbmZvPWUucmVhZFJlY2VpcHRJbmZvfHx7cmVhZENvdW50OnZvaWQgMCx1bnJlYWRDb3VudDp2b2lkIDAsaXNQZWVyUmVhZDp2b2lkIDB9LHRoaXMubmVlZFJlYWRSZWNlaXB0PSEwPT09ZS5uZWVkUmVhZFJlY2VpcHR8fDE9PT1lLm5lZWRSZWFkUmVjZWlwdCx0aGlzLnZlcnNpb249ZS5tZXNzYWdlVmVyc2lvbnx8MCx0aGlzLmlzQnJvYWRjYXN0TWVzc2FnZT1lLmlzQnJvYWRjYXN0TWVzc2FnZXx8ITEsdGhpcy5fcmVjZWl2ZXJMaXN0PWUucmVjZWl2ZXJMaXN0fHx2b2lkIDAsdGhpcy5pc1N1cHBvcnRFeHRlbnNpb249ITA9PT1lLmlzU3VwcG9ydEV4dGVuc2lvbnx8MT09PWUuaXNTdXBwb3J0RXh0ZW5zaW9uLHRoaXMucmV2b2tlcj1lLnJldm9rZXJJbmZvJiZlLnJldm9rZXJJbmZvLnJldm9rZXJ8fG51bGwsdGhpcy5yZUluaXRpYWxpemUoZS5jdXJyZW50VXNlciksdGhpcy5leHRyYWN0R3JvdXBJbmZvKGUuZ3JvdXBQcm9maWxlfHxudWxsKSx0aGlzLmhhbmRsZUdyb3VwQXRJbmZvKGUpLHRoaXMuaW5pdEMyQ1JlYWRSZWNlaXB0SW5mbyhlLnJlYWRSZWNlaXB0U2VudEJ5UGVlcil9Z2V0IGVsZW1lbnRzKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzfWdldEVsZW1lbnRzKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnRzfWV4dHJhY3RHcm91cEluZm8oZSl7aWYobnVsbD09PWUpcmV0dXJuO1VlKGUubmljaykmJih0aGlzLm5pY2s9ZS5uaWNrKSxVZShlLmF2YXRhcikmJih0aGlzLmF2YXRhcj1lLmF2YXRhcik7Y29uc3R7bWVzc2FnZUZyb21BY2NvdW50RXh0cmFJbmZvcm1hdGlvbjp0fT1lO1BlKHQpJiZVZSh0Lm5hbWVDYXJkKSYmKHRoaXMubmFtZUNhcmQ9dC5uYW1lQ2FyZCl9aGFuZGxlR3JvdXBBdEluZm8oZSl7ZS5wYXlsb2FkJiZlLnBheWxvYWQuYXRVc2VyTGlzdCYmZS5wYXlsb2FkLmF0VXNlckxpc3QuZm9yRWFjaChlPT57ZSE9PXQuTVNHX0FUX0FMTD8odGhpcy5fZ3JvdXBBdEluZm9MaXN0LnB1c2goe2dyb3VwQXRBbGxGbGFnOjAsZ3JvdXBBdFVzZXJJRDplfSksdGhpcy5hdFVzZXJMaXN0LnB1c2goZSkpOih0aGlzLl9ncm91cEF0SW5mb0xpc3QucHVzaCh7Z3JvdXBBdEFsbEZsYWc6MX0pLHRoaXMuYXRVc2VyTGlzdC5wdXNoKHQuTVNHX0FUX0FMTCkpfSksYmUoZS5ncm91cEF0SW5mbykmJmUuZ3JvdXBBdEluZm8uZm9yRWFjaChlPT57MD09PWUuZ3JvdXBBdEFsbEZsYWc/dGhpcy5hdFVzZXJMaXN0LnB1c2goZS5ncm91cEF0VXNlcklEKToxPT09ZS5ncm91cEF0QWxsRmxhZyYmdGhpcy5hdFVzZXJMaXN0LnB1c2godC5NU0dfQVRfQUxMKX0pfWdldEdyb3VwQXRJbmZvTGlzdCgpe3JldHVybiB0aGlzLl9ncm91cEF0SW5mb0xpc3R9X2luaXRQcm94eSgpe3RoaXMuX2VsZW1lbnRzWzBdJiYodGhpcy5wYXlsb2FkPXRoaXMuX2VsZW1lbnRzWzBdLmNvbnRlbnQsdGhpcy50eXBlPXRoaXMuX2VsZW1lbnRzWzBdLnR5cGUpfXJlSW5pdGlhbGl6ZShlKXtlJiYodGhpcy5zdGF0dXM9dGhpcy5mcm9tP050LlNVQ0NFU1M6TnQuVU5TRU5ELCF0aGlzLmZyb20mJih0aGlzLmZyb209ZSkpLHRoaXMuX2luaXRGbG93KGUpLHRoaXMuX2luaXRTZXF1ZW5jZShlKSx0aGlzLl9jb25jYXRDb252ZXJzYXRpb25JRChlKSx0aGlzLmdlbmVyYXRlTWVzc2FnZUlEKCl9aXNTZW5kYWJsZSgpe3JldHVybiAwIT09dGhpcy5fZWxlbWVudHMubGVuZ3RoJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fZWxlbWVudHNbMF0uc2VuZGFibGUmJnRoaXMuX2VsZW1lbnRzWzBdLnNlbmRhYmxlKCkpfV9pbml0VG8oZSl7dGhpcy5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0dST1VQJiYodGhpcy50bz1lLmdyb3VwSUQpfV9pbml0U2VxdWVuY2UoZSl7MD09PXRoaXMuY2xpZW50U2VxdWVuY2UmJmUmJih0aGlzLmNsaWVudFNlcXVlbmNlPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiExO2lmKHZvaWQgMD09PUplW2VdKXtjb25zdCB0PW5ldyBEYXRlO2xldCBzPShcIjNcIit0LmdldEhvdXJzKCkpLnNsaWNlKC0yKSxvPShcIjBcIit0LmdldE1pbnV0ZXMoKSkuc2xpY2UoLTIpLGk9KFwiMFwiK3QuZ2V0U2Vjb25kcygpKS5zbGljZSgtMik7SmVbZV09cGFyc2VJbnQoW3MsbyxpLFwiMDAwMVwiXS5qb2luKFwiXCIpKSxzPW51bGwsbz1udWxsLGk9bnVsbCxfZS5sKFwiYXV0b0luY3JlbWVudEluZGV4IHN0YXJ0IGluZGV4OlwiK0plW2VdKX1yZXR1cm4gSmVbZV0rK30oZSkpLDA9PT10aGlzLnNlcXVlbmNlJiZ0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDJiYodGhpcy5zZXF1ZW5jZT10aGlzLmNsaWVudFNlcXVlbmNlKX1nZW5lcmF0ZU1lc3NhZ2VJRCgpe3RoaXMuZnJvbT09PXQuQ09OVl9TWVNURU0mJih0aGlzLnNlbmRlclRpbnlJRD1cIjE0NDExNTE5ODI0NDQ3MTcwM1wiKSx0aGlzLklEPWAke3RoaXMuc2VuZGVyVGlueUlEfS0ke3RoaXMuY2xpZW50VGltZX0tJHt0aGlzLnJhbmRvbX1gfV9pbml0RmxvdyhlKXtcIlwiIT09ZSYmKGU9PT10aGlzLmZyb20/KHRoaXMuZmxvdz1cIm91dFwiLHRoaXMuaXNSZWFkPSEwKTp0aGlzLmZsb3c9XCJpblwiKX1fY29uY2F0Q29udmVyc2F0aW9uSUQoZSl7Y29uc3R7dG86c309dGhpcztsZXQgbz1cIlwiO2NvbnN0IGk9dGhpcy5jb252ZXJzYXRpb25UeXBlO2khPT10LkNPTlZfU1lTVEVNPyhvPWk9PT10LkNPTlZfQzJDP2U9PT10aGlzLmZyb20/czp0aGlzLmZyb206dGhpcy50byx0aGlzLmNvbnZlcnNhdGlvbklEPW8/YCR7aX0ke299YDpudWxsKTp0aGlzLmNvbnZlcnNhdGlvbklEPXQuQ09OVl9TWVNURU19aXNFbGVtZW50KGUpe3JldHVybiBlIGluc3RhbmNlb2YgVG58fGUgaW5zdGFuY2VvZiB5bnx8ZSBpbnN0YW5jZW9mIERufHxlIGluc3RhbmNlb2YgRW58fGUgaW5zdGFuY2VvZiBObnx8ZSBpbnN0YW5jZW9mIE9ufHxlIGluc3RhbmNlb2YgTG58fGUgaW5zdGFuY2VvZiB2bnx8ZSBpbnN0YW5jZW9mIFJufHxlIGluc3RhbmNlb2YgR258fGUgaW5zdGFuY2VvZiBrbn1zZXRFbGVtZW50KGUscyl7aWYodGhpcy5pc0VsZW1lbnQoZSkpcmV0dXJuIHRoaXMuX2VsZW1lbnRzPVtlXSx2b2lkIHRoaXMuX2luaXRQcm94eSgpO2NvbnN0IG89ZT0+e2lmKGUudHlwZSYmZS5jb250ZW50KXN3aXRjaChlLnR5cGUpe2Nhc2UgdC5NU0dfVEVYVDp0aGlzLnNldFRleHRFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSB0Lk1TR19JTUFHRTp0aGlzLnNldEltYWdlRWxlbWVudChlLmNvbnRlbnQscyk7YnJlYWs7Y2FzZSB0Lk1TR19BVURJTzp0aGlzLnNldEF1ZGlvRWxlbWVudChlLmNvbnRlbnQscyk7YnJlYWs7Y2FzZSB0Lk1TR19GSUxFOnRoaXMuc2V0RmlsZUVsZW1lbnQoZS5jb250ZW50LHMpO2JyZWFrO2Nhc2UgdC5NU0dfVklERU86dGhpcy5zZXRWaWRlb0VsZW1lbnQoZS5jb250ZW50LHMpO2JyZWFrO2Nhc2UgdC5NU0dfQ1VTVE9NOnRoaXMuc2V0Q3VzdG9tRWxlbWVudChlLmNvbnRlbnQpO2JyZWFrO2Nhc2UgdC5NU0dfTE9DQVRJT046dGhpcy5zZXRMb2NhdGlvbkVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHQuTVNHX0dSUF9USVA6dGhpcy5zZXRHcm91cFRpcEVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHQuTVNHX0dSUF9TWVNfTk9USUNFOnRoaXMuc2V0R3JvdXBTeXN0ZW1Ob3RpY2VFbGVtZW50KGUuY29udGVudCk7YnJlYWs7Y2FzZSB0Lk1TR19GQUNFOnRoaXMuc2V0RmFjZUVsZW1lbnQoZS5jb250ZW50KTticmVhaztjYXNlIHQuTVNHX01FUkdFUjp0aGlzLnNldE1lcmdlckVsZW1lbnQoZS5jb250ZW50LHMpfX07aWYoYmUoZSkpZm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspbyhlW3RdKTtlbHNlIG8oZSk7dGhpcy5faW5pdFByb3h5KCl9Y2xlYXJFbGVtZW50KCl7dGhpcy5fZWxlbWVudHMubGVuZ3RoPTB9c2V0VGV4dEVsZW1lbnQoZSl7Y29uc3QgdD1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmUudGV4dCxzPW5ldyBUbih7dGV4dDp0fSk7dGhpcy5fZWxlbWVudHMucHVzaChzKX1zZXRJbWFnZUVsZW1lbnQoZSx0KXtjb25zdCBzPW5ldyB5bihlLHQpO3RoaXMuX2VsZW1lbnRzLnB1c2gocyl9c2V0QXVkaW9FbGVtZW50KGUsdCl7Y29uc3Qgcz1uZXcgRW4oZSx0KTt0aGlzLl9lbGVtZW50cy5wdXNoKHMpfXNldEZpbGVFbGVtZW50KGUsdCl7Y29uc3Qgcz1uZXcgTm4oZSx0KTt0aGlzLl9lbGVtZW50cy5wdXNoKHMpfXNldFZpZGVvRWxlbWVudChlLHQpe2NvbnN0IHM9bmV3IE9uKGUsdCk7dGhpcy5fZWxlbWVudHMucHVzaChzKX1zZXRMb2NhdGlvbkVsZW1lbnQoZSl7Y29uc3QgdD1uZXcgR24oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX1zZXRDdXN0b21FbGVtZW50KGUpe2NvbnN0IHQ9bmV3IFJuKGUpO3RoaXMuX2VsZW1lbnRzLnB1c2godCl9c2V0R3JvdXBUaXBFbGVtZW50KGUpe2xldCBzPXt9O2NvbnN0IG89ZS5vcGVyYXRpb25UeXBlO2lmKEx0KGUubWVtYmVySW5mb0xpc3QpP2Uub3BlcmF0b3JJbmZvJiYocz1lLm9wZXJhdG9ySW5mbyk6byE9PXQuR1JQX1RJUF9NQlJfSk9JTiYmbyE9PXQuR1JQX1RJUF9NQlJfS0lDS0VEX09VVCYmbyE9PXQuR1JQX1RJUF9NQlJfU0VUX0FETUlOJiZvIT09dC5HUlBfVElQX01CUl9DQU5DRUxFRF9BRE1JTnx8KHM9ZS5tZW1iZXJJbmZvTGlzdFswXSksIUx0KGUubWVtYmVyRXh0cmFJbmZvKSl7Y29uc3R7cmVhc29uOnR9PWUubWVtYmVyRXh0cmFJbmZvO2UubXNnTWVtYmVySW5mby5mb3JFYWNoKGU9PntlLnJlYXNvbj10fSl9Y29uc3R7bmljazppLGF2YXRhcjpufT1zO1VlKGkpJiYodGhpcy5uaWNrPWkpLFVlKG4pJiYodGhpcy5hdmF0YXI9bik7Y29uc3Qgcj1uZXcgTG4oZSk7dGhpcy5fZWxlbWVudHMucHVzaChyKX1zZXRHcm91cFN5c3RlbU5vdGljZUVsZW1lbnQoZSl7Y29uc3QgdD1uZXcgdm4oZSk7dGhpcy5fZWxlbWVudHMucHVzaCh0KX1zZXRGYWNlRWxlbWVudChlKXtjb25zdCB0PW5ldyBEbihlKTt0aGlzLl9lbGVtZW50cy5wdXNoKHQpfXNldE1lcmdlckVsZW1lbnQoZSx0KXtjb25zdCBzPW5ldyBrbihlLHQpO3RoaXMuX2VsZW1lbnRzLnB1c2gocyl9c2V0SXNSZWFkKGUpe3RoaXMuaXNSZWFkPWV9c2V0UmVsYXlGbGFnKGUpe3RoaXMuX3JlbGF5RmxhZz1lfWdldFJlbGF5RmxhZygpe3JldHVybiB0aGlzLl9yZWxheUZsYWd9X2NvbXB1dGVQcmlvcml0eShlKXtpZih3ZShlKSlyZXR1cm4gdC5NU0dfUFJJT1JJVFlfTk9STUFMO2lmKFVlKGUpJiYtMSE9PU9iamVjdC52YWx1ZXMoUG4pLmluZGV4T2YoZSkpcmV0dXJuIGU7aWYoR2UoZSkpe2NvbnN0IHQ9XCJcIitlO2lmKC0xIT09T2JqZWN0LmtleXMoUG4pLmluZGV4T2YodCkpcmV0dXJuIFBuW3RdfXJldHVybiB0Lk1TR19QUklPUklUWV9OT1JNQUx9c2V0Tmlja0FuZEF2YXRhcihlKXtjb25zdHtuaWNrOnQsYXZhdGFyOnN9PWU7VWUodCkmJih0aGlzLm5pY2s9dCksVWUocykmJih0aGlzLmF2YXRhcj1zKX1zZXROYW1lQ2FyZChlKXtVZShlKSYmKHRoaXMubmFtZUNhcmQ9ZSl9aW5pdEMyQ1JlYWRSZWNlaXB0SW5mbyhlKXt0aGlzLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDJiYhMD09PXRoaXMubmVlZFJlYWRSZWNlaXB0JiYodGhpcy5yZWFkUmVjZWlwdEluZm8uaXNQZWVyUmVhZD0xPT09ZSl9fWNvbnN0IHduPWZ1bmN0aW9uKGUpe3JldHVybntjb2RlOjAsZGF0YTplfHx7fX19O2NsYXNzIEZuIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7c3VwZXIoKTtjb25zdHtjb2RlOnQsbWVzc2FnZTpzLGRhdGE6b309ZTt0aGlzLmNvZGU9dCx0aGlzLm1lc3NhZ2U9c3x8dGhpcy5fZ2V0RXJyb3JNZXNzYWdlKHRoaXMuY29kZSksdGhpcy5kYXRhPW98fHt9fX1sZXQgJG49bnVsbDtjb25zdCBxbj1mdW5jdGlvbihlKXskbj1lfSx4bj1mdW5jdGlvbihlKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHduKGUpKX0sVm49ZnVuY3Rpb24odCxzPSExKXtpZih0IGluc3RhbmNlb2YgRm4pcmV0dXJuIHMmJm51bGwhPT0kbiYmJG4uZW1pdChlLkVSUk9SLHQpLFByb21pc2UucmVqZWN0KHQpO2lmKHQgaW5zdGFuY2VvZiBFcnJvcil7Y29uc3QgdD1uZXcgRm4oe2NvZGU6bm4uVU5DQVVHSFRfRVJST1J9KTtyZXR1cm4gcyYmbnVsbCE9PSRuJiYkbi5lbWl0KGUuRVJST1IsdCksUHJvbWlzZS5yZWplY3QodCl9aWYod2UodCl8fHdlKHQuY29kZSkpcmV0dXJuO2NvbnN0IG89bmV3IEZuKHQpO3JldHVybiBzJiZudWxsIT09JG4mJiRuLmVtaXQoZS5FUlJPUixvKSxQcm9taXNlLnJlamVjdChvKX07Y2xhc3MgQm4gZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiQzJDTW9kdWxlXCIsdGhpcy5fbWVzc2FnZUZyb21VbnJlYWREQk1hcD1uZXcgTWFwLHRoaXMuX3NpZ25hbGluZ0Zyb21VbnJlYWREQkxpc3Q9W119b25OZXdDMkNNZXNzYWdlKHQpe2NvbnN0e2RhdGFMaXN0OnMsaXNJbnN0YW50TWVzc2FnZTpvLEMyQ1JlbWFpbmluZ1VucmVhZExpc3Q6aSxDMkNQYWlyVW5yZWFkTGlzdDpufT10O19lLmQoYCR7dGhpcy5fbn0ub25OZXdDMkNNZXNzYWdlIGNvdW50OiR7cy5sZW5ndGh9IGlzSW5zdGFudE1lc3NhZ2U6JHtvfWApO2NvbnN0e2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnIsbWVzc2FnZUxpc3Q6YSxpc1VucmVhZEMyQ01lc3NhZ2U6dX09dGhpcy5fbmV3QzJDTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkoe2RhdGFMaXN0OnMsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDppLEMyQ1BhaXJVbnJlYWRMaXN0Om4saXNJbnN0YW50TWVzc2FnZTpvfSk7aWYodGhpcy5maWx0ZXJNb2RpZmllZE1lc3NhZ2UoYSksci5sZW5ndGg+MCl7dGhpcy5nZXRNb2R1bGUoX3MpLm9uTmV3TWVzc2FnZSh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6cixpc0luc3RhbnRNZXNzYWdlOm8saXNVbnJlYWRDMkNNZXNzYWdlOnV9KX1jb25zdCBjPXRoaXMuZmlsdGVyVW5tb2RpZmllZE1lc3NhZ2UoYSk7byYmYy5sZW5ndGg+MCYmdGhpcy5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfUkVDRUlWRUQsYyksYS5sZW5ndGg9MH1fbmV3QzJDTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkoe2RhdGFMaXN0OmUsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDpzLEMyQ1BhaXJVbnJlYWRMaXN0Om8saXNJbnN0YW50TWVzc2FnZTppfSl7bGV0IG49bnVsbDtjb25zdCByPVtdLGE9W10sdT17fSxjPXRoaXMuZ2V0TW9kdWxlKENzKSxsPXRoaXMuZ2V0TW9kdWxlKFJzKTtsZXQgZD0hMTtjb25zdCBwPXRoaXMuZ2V0TW9kdWxlKF9zKSxoPXRoaXMuZ2V0RmlsZURvd25sb2FkUHJveHkoKTtmb3IobGV0IF89MCxtPWUubGVuZ3RoO188bTtfKyspe2lmKHRoaXMuX2lzU2lnbmFsaW5nKGVbX10pKXt0aGlzLl9zaWduYWxpbmdGcm9tVW5yZWFkREJMaXN0LnB1c2goZVtfXS5ldmVudEFycmF5WzBdLmMyQ05vdGlmeU1zZ0FycmF5WzBdKTtjb250aW51ZX1jb25zdCBzPWVbX107cy5jdXJyZW50VXNlcj10aGlzLmdldE15VXNlcklEKCkscy5jb252ZXJzYXRpb25UeXBlPXQuQ09OVl9DMkMscy5pc1N5c3RlbU1lc3NhZ2U9ISFzLmlzU3lzdGVtTWVzc2FnZSwod2Uocy5uaWNrKXx8d2Uocy5hdmF0YXIpKSYmKGQ9ITAsX2UuZCh0aGlzLl9uK1wiLl9uZXdDMkNNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeSBuaWNrIG9yIGF2YXRhciBtaXNzaW5nIVwiKSksbj1uZXcgYm4ocykscy5lbGVtZW50cz1jLnBhcnNlRWxlbWVudHMocy5lbGVtZW50cyxzLmZyb20pLG4uc2V0RWxlbWVudChzLmVsZW1lbnRzLGgpLG4uc2V0Tmlja0FuZEF2YXRhcih7bmljazpzLm5pY2ssYXZhdGFyOnMuYXZhdGFyfSk7Y29uc3R7Y29udmVyc2F0aW9uSUQ6b309bjtpZihpKXtpZigxPT09dGhpcy5fbWVzc2FnZUZyb21VbnJlYWREQk1hcC5nZXQobi5JRCkpY29udGludWU7bGV0IHQ9ITE7aWYobi5mcm9tIT09dGhpcy5nZXRNeVVzZXJJRCgpKXtjb25zdCBlPXAuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIobyk7aWYoZSl7Y29uc3R7bmljazpzLGF2YXRhcjpvfT1lO2Q/bi5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOnMsYXZhdGFyOm99KTpzPT09bi5uaWNrJiZvPT09bi5hdmF0YXJ8fCh0PSEwKX19ZWxzZXtjb25zdCBlPXAuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKG8pO2lmKGUpe2NvbnN0e25pY2s6dCxhdmF0YXI6c309ZTt0PT09bi5uaWNrJiZzPT09bi5hdmF0YXJ8fHAubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKHtjb252ZXJzYXRpb25JRDpvLGxhdGVzdE5pY2s6bi5uaWNrLGxhdGVzdEF2YXRhcjpuLmF2YXRhcn0pfX1sZXQgcj0xPT09ZVtfXS5pc01vZGlmaWVkO2lmKHAuaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKG4pP24uaXNNb2RpZmllZD1yOnI9ITEsMD09PXMubXNnTGlmZVRpbWUpbi5fb25saW5lT25seUZsYWc9ITAscC5pc01lc3NhZ2VTZW50QnlDdXJyZW50SW5zdGFuY2Uobil8fGEucHVzaChuKTtlbHNle2lmKCFwLnB1c2hJbnRvTWVzc2FnZUxpc3QoYSxuLHIpKWNvbnRpbnVlO3QmJihwLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKHtjb252ZXJzYXRpb25JRDpvLGxhdGVzdE5pY2s6bi5uaWNrLGxhdGVzdEF2YXRhcjpuLmF2YXRhcn0pLHAudXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXkoe2NvbnZlcnNhdGlvbklEOm8sbmljazpuLm5pY2ssYXZhdGFyOm4uYXZhdGFyfSkpfWkmJm4uY2xpZW50VGltZT4wJiZsLmFkZE1lc3NhZ2VEZWxheShuLmNsaWVudFRpbWUpfWVsc2UgdGhpcy5fbWVzc2FnZUZyb21VbnJlYWREQk1hcC5zZXQobi5JRCwxKTtpZigwIT09cy5tc2dMaWZlVGltZSl7aWYoITE9PT1uLl9vbmxpbmVPbmx5RmxhZyl7Y29uc3QgZT1wLmdldExhc3RNZXNzYWdlVGltZShvKTtpZihHZShlKSYmbi50aW1lPGUpY29udGludWU7aWYod2UodVtvXSkpe2xldCBlPTA7XCJpblwiPT09bi5mbG93JiYobi5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudHx8KGU9MSkpLHVbb109ci5wdXNoKHtjb252ZXJzYXRpb25JRDpvLHVucmVhZENvdW50OmUsdHlwZTpuLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpuLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6bi5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT9cIlwiOm59KS0xfWVsc2V7Y29uc3QgZT11W29dO3JbZV0udHlwZT1uLmNvbnZlcnNhdGlvblR5cGUscltlXS5zdWJUeXBlPW4uY29udmVyc2F0aW9uU3ViVHlwZSxyW2VdLmxhc3RNZXNzYWdlPW4uX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U/XCJcIjpuLFwiaW5cIj09PW4uZmxvdyYmKG4uX2lzRXhjbHVkZWRGcm9tVW5yZWFkQ291bnR8fHJbZV0udW5yZWFkQ291bnQrKyl9fX1lbHNlIG4uX29ubGluZU9ubHlGbGFnPSEwfXRoaXMuX2hhbmRsZVNpZ25hbGluZ0Zyb21VbnJlYWREQigpO2xldCBnPSExO2lmKGJlKG8pKWZvcihsZXQgXz0wLG09by5sZW5ndGg7XzxtO18rKylpZihvW19dLnVucmVhZENvdW50PjApe2c9ITA7Y29uc3QgZT1yLmZpbmQoKHtjb252ZXJzYXRpb25JRDplfSk9PmU9PT1cIkMyQ1wiK29bX10uZnJvbSk7ZT9lLnVucmVhZENvdW50PW9bX10udW5yZWFkQ291bnQ6ci5wdXNoKHtjb252ZXJzYXRpb25JRDpcIkMyQ1wiK29bX10uZnJvbSx1bnJlYWRDb3VudDpvW19dLnVucmVhZENvdW50LHR5cGU6dC5DT05WX0MyQ30pfWlmKGJlKHMpKWZvcihsZXQgXz0wLG09cy5sZW5ndGg7XzxtO18rKyl7ci5maW5kKCh7Y29udmVyc2F0aW9uSUQ6ZX0pPT5lPT09XCJDMkNcIitzW19dLmZyb20pfHxyLnB1c2goe2NvbnZlcnNhdGlvbklEOlwiQzJDXCIrc1tfXS5mcm9tLHR5cGU6dC5DT05WX0MyQyxsYXN0TXNnVGltZTpzW19dLmxhc3RNc2dUaW1lfSl9cmV0dXJue2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnIsbWVzc2FnZUxpc3Q6YSxpc1VucmVhZEMyQ01lc3NhZ2U6Z319X2lzU2lnbmFsaW5nKGUpe2NvbnN0e2V2ZW50QXJyYXk6dH09ZTtyZXR1cm4hKCFiZSh0KXx8MTAhPT10WzBdLmV2ZW50KX1faGFuZGxlU2lnbmFsaW5nRnJvbVVucmVhZERCKCl7Y29uc3QgZT10aGlzLl9zaWduYWxpbmdGcm9tVW5yZWFkREJMaXN0Lmxlbmd0aDtpZihfZS5sKGAke3RoaXMuX259Ll9oYW5kbGVTaWduYWxpbmdGcm9tVW5yZWFkREIgc2lnbmFsaW5nQ291bnQ6JHtlfWApLDA9PT1lKXJldHVybjtjb25zdCB0PVtdO3RoaXMuX3NpZ25hbGluZ0Zyb21VbnJlYWREQkxpc3QuZm9yRWFjaChlPT57ZS5oYXNPd25Qcm9wZXJ0eShcImMyY01lc3NhZ2VSZXZva2VkTm90aWZ5XCIpJiZ0LnB1c2goZSl9KSx0aGlzLm9uQzJDTWVzc2FnZVJldm9rZWQoe2RhdGFMaXN0OnR9KSx0aGlzLl9zaWduYWxpbmdGcm9tVW5yZWFkREJMaXN0Lmxlbmd0aD0wLHQubGVuZ3RoPTB9b25DMkNNZXNzYWdlUmV2b2tlZChzKXtjb25zdCBvPXRoaXMuZ2V0TW9kdWxlKF9zKSxpPVtdO2xldCBuPW51bGwscj0hMDtzLmRhdGFMaXN0LmZvckVhY2goZT0+e2lmKGUuYzJjTWVzc2FnZVJldm9rZWROb3RpZnkpe2NvbnN0e3Jldm9rZWRJbmZvczpzfT1lLmMyY01lc3NhZ2VSZXZva2VkTm90aWZ5O3dlKHMpfHxzLmZvckVhY2goZT0+e2NvbnN0IHM9dGhpcy5nZXRNeVVzZXJJRCgpPT09ZS5mcm9tP2Ake3QuQ09OVl9DMkN9JHtlLnRvfWA6YCR7dC5DT05WX0MyQ30ke2UuZnJvbX1gO249by5yZXZva2UocyxlLnNlcXVlbmNlLGUucmFuZG9tKTtjb25zdCBhPWUucmV2b2tlckluZm8mJmUucmV2b2tlckluZm8ucmV2b2tlcjtpZihuKW4ucmV2b2tlcnx8KG4ucmV2b2tlcj1hLGkucHVzaChuKSk7ZWxzZXtjb25zdCB0PXtjb252ZXJzYXRpb25JRDpzLHNlcXVlbmNlOmUuc2VxdWVuY2UsdGltZTplLnRpbWUscmV2b2tlcjphfTtvLmlzTGFzdE1lc3NhZ2VSZXZva2VkKHQpJiYoaS5wdXNoKHQpLHI9ITEpfX0pfX0pLDAhPT1pLmxlbmd0aCYmKG8ub25NZXNzYWdlUmV2b2tlZChpKSwhMD09PXImJihfZS5sKGAke3RoaXMuX259Lm9uQzJDTWVzc2FnZVJldm9rZWQgY291bnQ6JHtpLmxlbmd0aH1gKSx0aGlzLmVtaXRPdXRlckV2ZW50KGUuTUVTU0FHRV9SRVZPS0VELGkpKSl9b25DMkNNZXNzYWdlUmVhZFJlY2VpcHQoZSl7ZS5kYXRhTGlzdC5mb3JFYWNoKGU9PntpZighTHQoZS5jMmNNZXNzYWdlUmVhZFJlY2VpcHQpKXtjb25zdHt0bzpzfT1lLmMyY01lc3NhZ2VSZWFkUmVjZWlwdDtlLmMyY01lc3NhZ2VSZWFkUmVjZWlwdC51aW5QYWlyUmVhZEFycmF5LmZvckVhY2goZT0+e2NvbnN0e3BlZXJSZWFkVGltZTpvfT1lO19lLmQoYCR7dGhpcy5fbn0uX29uQzJDTWVzc2FnZVJlYWRSZWNlaXB0IHRvOiR7c30gcGVlclJlYWRUaW1lOiR7b31gKTtjb25zdCBpPWAke3QuQ09OVl9DMkN9JHtzfWAsbj10aGlzLmdldE1vZHVsZShfcyk7bi5yZWNvcmRQZWVyUmVhZFRpbWUoaSxvKSxuLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkoaSxvKX0pfX0pfW9uQzJDTWVzc2FnZVJlYWROb3RpY2UoZSl7ZS5kYXRhTGlzdC5mb3JFYWNoKGU9PntpZighTHQoZS5jMmNNZXNzYWdlUmVhZE5vdGljZSkpe2NvbnN0IHM9dGhpcy5nZXRNb2R1bGUoX3MpO2UuYzJjTWVzc2FnZVJlYWROb3RpY2UudWluUGFpclJlYWRBcnJheS5mb3JFYWNoKGU9Pntjb25zdHtmcm9tOm8scGVlclJlYWRUaW1lOml9PWU7X2UuZChgJHt0aGlzLl9ufS5vbkMyQ01lc3NhZ2VSZWFkTm90aWNlIGZyb206JHtvfSBsYXN0UmVhZFRpbWU6JHtpfWApO2NvbnN0IG49YCR7dC5DT05WX0MyQ30ke299YDtzLnVwZGF0ZUlzUmVhZEFmdGVyUmVhZFJlcG9ydCh7Y29udmVyc2F0aW9uSUQ6bixsYXN0TWVzc2FnZVRpbWU6aX0pLHMudXBkYXRlVW5yZWFkQ291bnQobil9KX19KX1vbkMyQ01lc3NhZ2VNb2RpZmllZChlKXtfZS5kKHRoaXMuX24rXCIub25DMkNNZXNzYWdlTW9kaWZpZWQgb3B0aW9uczpcIixKU09OLnN0cmluZ2lmeShlKSk7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShfcyk7ZS5kYXRhTGlzdC5mb3JFYWNoKGU9PntzLm9uTWVzc2FnZU1vZGlmaWVkKHsuLi5lLGNvbnZlcnNhdGlvblR5cGU6dC5DT05WX0MyQ30pfSl9b25SZWFkUmVjZWlwdExpc3QoZSl7X2UuZCh0aGlzLl9uK1wiLm9uUmVhZFJlY2VpcHRMaXN0IG9wdGlvbnM6XCIsSlNPTi5zdHJpbmdpZnkoZSkpO2NvbnN0e3VzZXJJRDp0LHJlYWRSZWNlaXB0TGlzdDpzfT1lLmRhdGFMaXN0O3RoaXMuZ2V0TW9kdWxlKF9zKS51cGRhdGVSZWFkUmVjZWlwdEluZm8oe3VzZXJJRDp0LHJlYWRSZWNlaXB0TGlzdDpzfSl9c2VuZE1lc3NhZ2UoZSx0KXtjb25zdCBzPXRoaXMuX2NyZWF0ZUMyQ01lc3NhZ2VQYWNrKGUsdCk7cmV0dXJuIHRoaXMucmVxdWVzdChzKX1fY3JlYXRlQzJDTWVzc2FnZVBhY2soZSx0KXtsZXQgcz1udWxsO3QmJih0Lm9mZmxpbmVQdXNoSW5mbyYmKHM9dC5vZmZsaW5lUHVzaEluZm8pLCEwPT09dC5vbmxpbmVVc2VyT25seSYmKHM/cy5kaXNhYmxlUHVzaD0hMDpzPXtkaXNhYmxlUHVzaDohMH0pKTtsZXQgbz1cIlwiO1VlKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihvPWUuY2xvdWRDdXN0b21EYXRhKTtjb25zdCBpPVtdO2lmKFBlKHQpJiZQZSh0Lm1lc3NhZ2VDb250cm9sSW5mbykpe2NvbnN0e2V4Y2x1ZGVkRnJvbVVucmVhZENvdW50OmUsZXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U6cyxleGNsdWRlZEZyb21Db250ZW50TW9kZXJhdGlvbjpvfT10Lm1lc3NhZ2VDb250cm9sSW5mbzshMD09PWUmJmkucHVzaChcIk5vVW5yZWFkXCIpLCEwPT09cyYmaS5wdXNoKFwiTm9MYXN0TXNnXCIpLCEwPT09byYmaS5wdXNoKFwiTm9Nc2dDaGVja1wiKX1jb25zdCBuPXRoaXMuaXNPbmxpbmVNZXNzYWdlKGUsdCk/MDp2b2lkIDA7cmV0dXJue3Byb3RvY29sTmFtZTpLcyx0amdJRDp0aGlzLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSx0b0FjY291bnQ6ZS50byxtc2dCb2R5OmUuZ2V0RWxlbWVudHMoKSxjbG91ZEN1c3RvbURhdGE6byxtc2dTZXE6ZS5zZXF1ZW5jZSxtc2dSYW5kb206ZS5yYW5kb20sbXNnTGlmZVRpbWU6bixuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXIsb2ZmbGluZVB1c2hJbmZvOnM/e3B1c2hGbGFnOiEwPT09cy5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6cy50aXRsZXx8XCJcIixkZXNjOnMuZGVzY3JpcHRpb258fFwiXCIsZXh0OnMuZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1zLmlnbm9yZUlPU0JhZGdlPzE6MCxpc1ZvaXBQdXNoOnRoaXMuX2lzVm9pcFB1c2gocyl9LGFuZHJvaWRJbmZvOntPUFBPQ2hhbm5lbElEOnMuYW5kcm9pZE9QUE9DaGFubmVsSUR8fFwiXCJ9fTp2b2lkIDAsbWVzc2FnZUNvbnRyb2xJbmZvOjAhPT1uP2k6dm9pZCAwLGNsaWVudFRpbWU6ZS5jbGllbnRUaW1lLG5lZWRSZWFkUmVjZWlwdDohMD09PWUubmVlZFJlYWRSZWNlaXB0PzE6MCxpc1N1cHBvcnRFeHRlbnNpb246ITA9PT1lLmlzU3VwcG9ydEV4dGVuc2lvbj8xOjB9fX1faXNWb2lwUHVzaChlKXtsZXQgdD12b2lkIDA7cmV0dXJuIHdlKGUuZGlzYWJsZVZvaXBQdXNoKXx8KHQ9ITE9PT1lLmRpc2FibGVWb2lwUHVzaD8xOjApLHR9aXNPbmxpbmVNZXNzYWdlKGUsdCl7cmV0dXJuISghdHx8ITAhPT10Lm9ubGluZVVzZXJPbmx5KX1yZXZva2VNZXNzYWdlKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpobyxyZXF1ZXN0RGF0YTp7bXNnSW5mbzp7ZnJvbUFjY291bnQ6ZS5mcm9tLHRvQWNjb3VudDplLnRvLG1zZ1NlcTplLnNlcXVlbmNlLG1zZ1JhbmRvbTplLnJhbmRvbSxtc2dUaW1lU3RhbXA6ZS50aW1lfX19KX1kZWxldGVNZXNzYWdlKGUpe2NvbnN0e3RvOnQsa2V5TGlzdDpzfT1lO3JldHVybiBfZS5sKGAke3RoaXMuX259LmRlbGV0ZU1lc3NhZ2UgdG9BY2NvdW50OiR7dH0gY291bnQ6JHtzLmxlbmd0aH1gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpJbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvOnQsa2V5TGlzdDpzfX0pfW1vZGlmeVJlbW90ZU1lc3NhZ2UoZSl7Y29uc3R7ZnJvbTp0LHRvOnMsdmVyc2lvbjpvPTAsc2VxdWVuY2U6aSxyYW5kb206bix0aW1lOnIscGF5bG9hZDphLHR5cGU6dSxjbG91ZEN1c3RvbURhdGE6Y309ZTtsZXQgbD12b2lkIDA7cmV0dXJuIEN0KHUpJiYobD1bXSxsLnB1c2goe3R5cGU6dSxjb250ZW50OmF9KSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Q28scmVxdWVzdERhdGE6e2Zyb206dCx0bzpzLHZlcnNpb246byxzZXF1ZW5jZTppLHJhbmRvbTpuLHRpbWU6cixlbGVtZW50czpsLGNsb3VkQ3VzdG9tRGF0YTpjfX0pfXNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDplLGxhc3RNZXNzYWdlVGltZTp0fSl7Y29uc3Qgcz10aGlzLl9uK1wiLnNldE1lc3NhZ2VSZWFkXCI7X2UubChgJHtzfSBjb252ZXJzYXRpb25JRDoke2V9IGxhc3RNZXNzYWdlVGltZToke3R9YCksR2UodCl8fHRoaXMub3V0cHV0V2FybmluZyhcIkRvTm90TW9kaWZ5TGFzdFRpbWVcIik7Y29uc3Qgbz1uZXcgQ24oXCJzZXRDMkNNZXNzYWdlUmVhZFwiKTtyZXR1cm4gby5zZXRNZXNzYWdlKGBjb252ZXJzYXRpb25JRDoke2V9IGxhc3RNZXNzYWdlVGltZToke3R9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Z28scmVxdWVzdERhdGE6e0MyQ01zZ1JlYWRlZDp7Y29va2llOlwiXCIsQzJDTXNnUmVhZGVkSXRlbTpbe3RvQWNjb3VudDplLnJlcGxhY2UoXCJDMkNcIixcIlwiKSxsYXN0TWVzc2FnZVRpbWU6dCxyZWNlaXB0OjF9XX19fSkudGhlbigoKT0+e28uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHMrXCIgb2tcIik7Y29uc3QgaT10aGlzLmdldE1vZHVsZShfcyk7cmV0dXJuIGkudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDplLGxhc3RNZXNzYWdlVGltZTp0fSksaS51cGRhdGVVbnJlYWRDb3VudChlKSx3bigpfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5sKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWdldFJvYW1pbmdNZXNzYWdlKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5nZXRSb2FtaW5nTWVzc2FnZVwiLHtwZWVyQWNjb3VudDpvLGNvbnZlcnNhdGlvbklEOmksY291bnQ6bixsYXN0TWVzc2FnZVRpbWU6cixtZXNzYWdlS2V5OmF9PWUsdT1gcGVlckFjY291bnQ6JHtvfSBjb3VudDoke258fDE1fSBsYXN0TWVzc2FnZVRpbWU6JHtyfHwwfSBtZXNzYWdlS2V5OiR7YX1gO19lLmwoYCR7c30gJHt1fWApO2NvbnN0IGM9bmV3IENuKFwiZ2V0QzJDUm9hbWluZ01lc3NhZ2VzXCIpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpNbyxyZXF1ZXN0RGF0YTp7cGVlckFjY291bnQ6byxjb3VudDpufHwxNSxsYXN0TWVzc2FnZVRpbWU6cnx8MCxtZXNzYWdlS2V5OmF9fSkudGhlbihlPT57Y29uc3R7Y29tcGxldGU6byxtZXNzYWdlTGlzdDpuLG1lc3NhZ2VLZXk6cixsYXN0TWVzc2FnZVRpbWU6YX09ZS5kYXRhO3dlKG4pP19lLmwoYCR7c30gb2suIGNvbXBsZXRlOiR7b30gYnV0IG1lc3NhZ2VMaXN0IGlzIHVuZGVmaW5lZCFgKTpfZS5sKGAke3N9IG9rLiBjb21wbGV0ZToke299IGNvdW50OiR7bi5sZW5ndGh9YCksYy5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYCR7dX0gY29tcGxldGU6JHtvfSBsZW5ndGg6JHtuLmxlbmd0aH1gKS5lbmQoKTtjb25zdCBsPXRoaXMuZ2V0TW9kdWxlKF9zKTsxPT09byYmbC5zZXRDb21wbGV0ZWQoaSk7Y29uc3QgZD1sLm9uUm9hbWluZ01lc3NhZ2UobixpKTtsLm1vZGlmeU1lc3NhZ2VMaXN0KGkpLGwudXBkYXRlSXNSZWFkKGkpLGwudXBkYXRlUm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lKGkscixhKTtjb25zdCBwPWwuZ2V0UGVlclJlYWRUaW1lKGkpO2lmKF9lLmwoYCR7c30gdXBkYXRlIGlzUGVlclJlYWQgcHJvcGVydHkuIGNvbnZlcnNhdGlvbklEOiR7aX0gcGVlclJlYWRUaW1lOiR7cH1gKSxwKWwudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShpLHApO2Vsc2V7Y29uc3QgZT1pLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKTt0aGlzLmdldFJlbW90ZVBlZXJSZWFkVGltZShbZV0pLnRoZW4oKCk9PntsLnVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkoaSxsLmdldFBlZXJSZWFkVGltZShpKSl9KX1sZXQgaD1cIlwiO2lmKGQubGVuZ3RoPjApaD1kWzBdLklEO2Vsc2V7Y29uc3QgZT1sLmdldExvY2FsT2xkZXN0TWVzc2FnZShpKTtlJiYoaD1lLklEKX1yZXR1cm4gX2UubChgJHtzfSBuZXh0UmVxSUQ6JHtofSBzdG9yZWQgbWVzc2FnZSBjb3VudDoke2QubGVuZ3RofWApLHtuZXh0UmVxSUQ6aCxzdG9yZWRNZXNzYWdlTGlzdDpkfX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Muc2V0TWVzc2FnZSh1KS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWdldFJvYW1pbmdNZXNzYWdlc0hvcHBpbmcoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLmdldFJvYW1pbmdNZXNzYWdlc0hvcHBpbmdcIix7cGVlckFjY291bnQ6byx0aW1lOmk9MCxjb3VudDpuLGRpcmVjdGlvbjpyfT1lLGE9YCR7dC5DT05WX0MyQ30ke299YCx1PWBwZWVyQWNjb3VudDoke299IGNvdW50OiR7bn0gdGltZToke2l9IGRpcmVjdGlvbjoke3J9YDtfZS5sKGAke3N9ICR7dX1gKTtjb25zdCBjPW5ldyBDbihcImdldEMyQ1JvYW1pbmdNZXNzYWdlc0hvcHBpbmdcIik7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk1vLHJlcXVlc3REYXRhOntwZWVyQWNjb3VudDpvLGNvdW50Om4rMSxsYXN0TWVzc2FnZVRpbWU6aSxkaXJlY3Rpb246cn19KS50aGVuKGU9Pntjb25zdHtjb21wbGV0ZTp0LG1lc3NhZ2VMaXN0Om89W10sbGFzdE1lc3NhZ2VUaW1lOml9PWUuZGF0YTtfZS5sKGAke3N9IG9rLiBjb21wbGV0ZToke3R9IGNvdW50OiR7by5sZW5ndGh9YCksYy5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYCR7dX0gY29tcGxldGU6JHt0fSBsZW5ndGg6JHtvLmxlbmd0aH1gKS5lbmQoKSwxIT09dCYmKDE9PT1yP28ucG9wKCk6by5zaGlmdCgpKTtjb25zdCBuPXRoaXMuZ2V0TW9kdWxlKF9zKS5vblJvYW1pbmdNZXNzYWdlKG8sYSwhMSk7dGhpcy5fbW9kaWZ5TWVzc2FnZUxpc3QoYSxuKTtjb25zdCBsPXRoaXMuX2NvbXB1dGVSZXN1bHQoe2NvbXBsZXRlOnQsbGFzdE1lc3NhZ2VUaW1lOmkscmVzdWx0TGlzdDpufSk7cmV0dXJuIHduKGwpfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57Yy5zZXRNZXNzYWdlKHUpLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9X2NvbXB1dGVSZXN1bHQoZSl7Y29uc3R7Y29tcGxldGU6dD0wLGxhc3RNZXNzYWdlVGltZTpzLHJlc3VsdExpc3Q6bz1bXX09ZSxpPXttZXNzYWdlTGlzdDpbLi4ub10saXNDb21wbGV0ZWQ6ITEsbmV4dE1lc3NhZ2VUaW1lOlwiXCJ9O3JldHVybiAxPT09dD8oaS5pc0NvbXBsZXRlZD0hMCxpKTooaS5uZXh0TWVzc2FnZVRpbWU9cyxpKX1fbW9kaWZ5TWVzc2FnZUxpc3QoZSx0KXtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKF9zKS5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtpZighcylyZXR1cm47Y29uc3Qgbz1zLnVzZXJQcm9maWxlLm5pY2ssaT1zLnVzZXJQcm9maWxlLmF2YXRhcixuPXRoaXMuZ2V0TW9kdWxlKGNzKS5nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodGhpcy5nZXRNeVVzZXJJRCgpKSxyPW4ubmljayxhPW4uYXZhdGFyO2ZvcihsZXQgdT10Lmxlbmd0aC0xO3U+PTA7dS0tKXtjb25zdCBlPXRbdV07XCJpblwiPT09ZS5mbG93JiYoZS5uaWNrIT09byYmZS5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOm99KSxlLmF2YXRhciE9PWkmJmUuc2V0Tmlja0FuZEF2YXRhcih7YXZhdGFyOml9KSksXCJvdXRcIj09PWUuZmxvdyYmKGUubmljayE9PXImJmUuc2V0Tmlja0FuZEF2YXRhcih7bmljazpyfSksZS5hdmF0YXIhPT1hJiZlLnNldE5pY2tBbmRBdmF0YXIoe2F2YXRhcjphfSkpfX1nZXRSZW1vdGVQZWVyUmVhZFRpbWUoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldFJlbW90ZVBlZXJSZWFkVGltZVwiO2lmKEx0KGUpKXJldHVybiBfZS53KHQrXCIgdXNlcklETGlzdCBpcyBlbXB0eSFcIiksUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3Qgcz1uZXcgQ24oXCJnZXRQZWVyUmVhZFRpbWVcIik7cmV0dXJuIF9lLmwoYCR7dH0gdXNlcklETGlzdDoke2V9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Zm8scmVxdWVzdERhdGE6e3VzZXJJRExpc3Q6ZX19KS50aGVuKG89Pntjb25zdHtwZWVyUmVhZFRpbWVMaXN0Oml9PW8uZGF0YTtfZS5sKGAke3R9IG9rLiBwZWVyUmVhZFRpbWVMaXN0OiR7aX1gKTtsZXQgbj1cIlwiO2NvbnN0IHI9dGhpcy5nZXRNb2R1bGUoX3MpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKW4rPWAke2VbdF19LSR7aVt0XX0gYCxpW3RdPjAmJnIucmVjb3JkUGVlclJlYWRUaW1lKFwiQzJDXCIrZVt0XSxpW3RdKTtzLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShuKS5lbmQoKX0pLmNhdGNoKGU9Pnt0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LG9dKT0+e3Muc2V0RXJyb3IoZSx0LG8pLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSl9KX1zZW5kUmVhZFJlY2VpcHQoZSl7Y29uc3Qgcz1lWzBdLmNvbnZlcnNhdGlvbklELnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKSxvPW5ldyBDbihcInNlbmRDMkNSZWFkUmVjZWlwdFwiKTtvLnNldE1lc3NhZ2UoXCJwZWVyQWNjb3VudDpcIitzKTtjb25zdCBpPXRoaXMuZ2V0TXlVc2VySUQoKSxuPWUuZmlsdGVyKGU9PmUuZnJvbSE9PWkmJiEwPT09ZS5uZWVkUmVhZFJlY2VpcHQpLm1hcChlPT57Y29uc3R7ZnJvbTp0LHRvOnMsc2VxdWVuY2U6byxyYW5kb206aSx0aW1lOm4sY2xpZW50VGltZTpyfT1lO3JldHVybntmcm9tQWNjb3VudDp0LHRvQWNjb3VudDpzLHNlcXVlbmNlOm8scmFuZG9tOmksdGltZTpuLGNsaWVudFRpbWU6cn19KTtpZigwPT09bi5sZW5ndGgpcmV0dXJuIFZuKHtjb2RlOm5uLlJFQURfUkVDRUlQVF9NRVNTQUdFX0xJU1RfRU1QVFl9KTtjb25zdCByPXRoaXMuX24rXCIuc2VuZFJlYWRSZWNlaXB0XCI7cmV0dXJuIF9lLmwoYCR7cn0uIHBlZXJBY2NvdW50OiR7c30gbWVzc2FnZUluZm9MaXN0IGxlbmd0aDoke24ubGVuZ3RofWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnNpLHJlcXVlc3REYXRhOntwZWVyQWNjb3VudDpzLG1lc3NhZ2VJbmZvTGlzdDpufX0pLnRoZW4oZT0+KG8uZW5kKCksX2UubChyK1wiIG9rXCIpLHduKCkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncocitcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9Z2V0UmVhZFJlY2VpcHRMaXN0KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5nZXRSZWFkUmVjZWlwdExpc3RcIixzPXRoaXMuZ2V0TXlVc2VySUQoKSxvPWUuZmlsdGVyKGU9PmUuZnJvbT09PXMmJiEwPT09ZS5uZWVkUmVhZFJlY2VpcHQpO3JldHVybiBfZS5sKGAke3R9IHVzZXJJRDoke3N9IG1lc3NhZ2VMaXN0IGxlbmd0aDoke28ubGVuZ3RofWApLHhuKHttZXNzYWdlTGlzdDpvfSl9Z2V0TWVzc2FnZUV4dGVuc2lvbnMoZSx0KXtyZXR1cm4gX2UubChgJHt0aGlzLl9ufS5nZXRNZXNzYWdlRXh0ZW5zaW9ucyBzdGFydFNlcXVlbmNlOiR7dH1gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp5byxyZXF1ZXN0RGF0YTp7ZnJvbTplLmZyb20sdG86ZS50byxtZXNzYWdlS2V5OnRoaXMuX2dldE1lc3NhZ2VLZXkoZSksc3RhcnRTZXF1ZW5jZTp0fX0pfW1vZGlmeU1lc3NhZ2VFeHRlbnNpb25zKGUsdCxzPTEpe3JldHVybiBfZS5sKGAke3RoaXMuX259Lm1vZGlmeU1lc3NhZ2VFeHRlbnNpb25zIG9wZXJhdGVUeXBlOiR7c31gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpUbyxyZXF1ZXN0RGF0YTp7ZnJvbTplLmZyb20sdG86ZS50byxtZXNzYWdlS2V5OnRoaXMuX2dldE1lc3NhZ2VLZXkoZSksZXh0ZW5zaW9uTGlzdDp0LG9wZXJhdGVUeXBlOnN9fSl9X2dldE1lc3NhZ2VLZXkoZSl7Y29uc3R7Y2xpZW50U2VxdWVuY2U6dCxyYW5kb206cyx0aW1lOm99PWU7cmV0dXJuYCR7dH1fJHtzfV8ke299YH1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl9tZXNzYWdlRnJvbVVucmVhZERCTWFwLmNsZWFyKCksdGhpcy5fc2lnbmFsaW5nRnJvbVVucmVhZERCTGlzdC5sZW5ndGg9MH19Y2xhc3MgSG57Y29uc3RydWN0b3IoKXt0aGlzLmxpc3Q9bmV3IE1hcCx0aGlzLl9uPVwiTWVzc2FnZUxpc3RIYW5kbGVyXCIsdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXA9bmV3IE1hcCx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXA9bmV3IE1hcH1nZXRMb2NhbE9sZGVzdE1lc3NhZ2VCeUNvbnZlcnNhdGlvbklEKGUpe2lmKCFlKXJldHVybiBudWxsO2lmKCF0aGlzLmxpc3QuaGFzKGUpKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5saXN0LmdldChlKS52YWx1ZXMoKTtyZXR1cm4gdD90Lm5leHQoKS52YWx1ZTpudWxsfXB1c2hJbihlLHQ9ITEpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnN9PWU7bGV0IG89ITA7dGhpcy5saXN0LmhhcyhzKXx8dGhpcy5saXN0LnNldChzLG5ldyBNYXApO2NvbnN0IGk9dGhpcy5fZ2V0VW5pcXVlSURPZk1lc3NhZ2UoZSk7aWYodGhpcy5saXN0LmdldChzKS5oYXMoaSkpe2NvbnN0IGU9dGhpcy5saXN0LmdldChzKS5nZXQoaSk7aWYoIXR8fCEwPT09ZS5pc01vZGlmaWVkKXJldHVybiBvPSExLG99cmV0dXJuIHRoaXMubGlzdC5nZXQocykuc2V0KGksZSksdGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIocyxlKSx0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUocyxlKSxvfXVuc2hpZnQoZSxzKXtsZXQgbztpZihiZShlKT9lLmxlbmd0aD4wJiYobz1lWzBdLmNvbnZlcnNhdGlvbklELHRoaXMuX3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzKGUscykpOihvPWUuY29udmVyc2F0aW9uSUQsdGhpcy5fdW5zaGlmdFNpbmdsZU1lc3NhZ2UoZSxzKSksbyYmby5zdGFydHNXaXRoKHQuQ09OVl9DMkMpKXtjb25zdCBlPUFycmF5LmZyb20odGhpcy5saXN0LmdldChvKS52YWx1ZXMoKSksdD1lLmxlbmd0aDtpZigwPT09dClyZXR1cm47Zm9yKGxldCBzPXQtMTtzPj0wO3MtLSlpZihcIm91dFwiPT09ZVtzXS5mbG93KXt0aGlzLl9zZXRMYXRlc3RNZXNzYWdlU2VudEJ5TWUobyxlW3NdKTticmVha31mb3IobGV0IHM9dC0xO3M+PTA7cy0tKWlmKFwiaW5cIj09PWVbc10uZmxvdyl7dGhpcy5fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIobyxlW3NdKTticmVha319fV91bnNoaWZ0U2luZ2xlTWVzc2FnZShlLHQpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnN9PWUsbz10aGlzLl9nZXRVbmlxdWVJRE9mTWVzc2FnZShlKTtpZighdGhpcy5saXN0LmhhcyhzKSlyZXR1cm4gdGhpcy5saXN0LnNldChzLG5ldyBNYXApLHRoaXMubGlzdC5nZXQocykuc2V0KG8sZSksdm9pZCB0LnB1c2goZSk7Y29uc3QgaT10aGlzLmxpc3QuZ2V0KHMpLG49QXJyYXkuZnJvbShpKTtpLmhhcyhvKXx8KG4udW5zaGlmdChbbyxlXSksdGhpcy5saXN0LnNldChzLG5ldyBNYXAobikpLHQucHVzaChlKSl9X3Vuc2hpZnRNdWx0aXBsZU1lc3NhZ2VzKGUsdCl7Y29uc3Qgcz1lLmxlbmd0aCxvPVtdLGk9ZVswXS5jb252ZXJzYXRpb25JRCxuPXRoaXMubGlzdC5nZXQoaSkscj10aGlzLmxpc3QuaGFzKGkpP0FycmF5LmZyb20obik6W107Zm9yKGxldCBhPTA7YTxzO2ErKyl7Y29uc3Qgcz10aGlzLl9nZXRVbmlxdWVJRE9mTWVzc2FnZShlW2FdKTtuJiZuLmhhcyhzKXx8KG8ucHVzaChbcyxlW2FdXSksdC5wdXNoKGVbYV0pKX10aGlzLmxpc3Quc2V0KGksbmV3IE1hcChvLmNvbmNhdChyKSkpfXJlbW92ZShlKXtjb25zdHtjb252ZXJzYXRpb25JRDp0fT1lLHM9dGhpcy5fZ2V0VW5pcXVlSURPZk1lc3NhZ2UoZSk7dGhpcy5saXN0Lmhhcyh0KSYmdGhpcy5saXN0LmdldCh0KS5kZWxldGUocyl9cmV2b2tlKGUsdCxzKXtpZihfZS5kKFwicmV2b2tlIG1lc3NhZ2VcIixlLHQscyksdGhpcy5saXN0LmhhcyhlKSl7Y29uc3Qgbz10aGlzLmxpc3QuZ2V0KGUpO2Zvcihjb25zdFssZV1vZiBvKWlmKGUuc2VxdWVuY2U9PT10JiYod2Uocyl8fGUucmFuZG9tPT09cykpcmV0dXJuIGUuaXNSZXZva2VkfHwoZS5pc1Jldm9rZWQ9ITApLGV9cmV0dXJuIG51bGx9cmVtb3ZlQnlDb252ZXJzYXRpb25JRChlKXt0aGlzLmxpc3QuaGFzKGUpJiYodGhpcy5saXN0LmRlbGV0ZShlKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5kZWxldGUoZSksdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLmRlbGV0ZShlKSl9ZmluZE1lc3NhZ2UoZSl7bGV0IHQ9bnVsbDtmb3IoY29uc3RbLHNdb2YgdGhpcy5saXN0KXtjb25zdCBvPVsuLi5zLnZhbHVlcygpXSxpPW8ubGVuZ3RoO2ZvcihsZXQgcz0wO3M8aTtzKyspaWYob1tzXS5JRD09PWUpe3Q9b1tzXTticmVha319cmV0dXJuIHR9dXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShlLHQpe2NvbnN0IHM9W107aWYodGhpcy5saXN0LmhhcyhlKSl7Y29uc3Qgbz10aGlzLmxpc3QuZ2V0KGUpO2Zvcihjb25zdFssZV1vZiBvKWUudGltZTw9dCYmIWUuaXNQZWVyUmVhZCYmXCJvdXRcIj09PWUuZmxvdyYmKGUuaXNQZWVyUmVhZD0hMCxzLnB1c2goZSkpO19lLmwoYCR7dGhpcy5fbn0udXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eSBjb252ZXJzYXRpb25JRDoke2V9IHBlZXJSZWFkVGltZToke3R9IGNvdW50OiR7cy5sZW5ndGh9YCl9cmV0dXJuIHN9dXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eShlKXtjb25zdHtjb252ZXJzYXRpb25JRDp0fT1lO2lmKCF0aGlzLmxpc3QuaGFzKHQpKXJldHVybjtjb25zdCBzPXRoaXMuX2dldFVuaXF1ZUlET2ZNZXNzYWdlKGUpLG89dGhpcy5saXN0LmdldCh0KS5nZXQocyk7byYmKG8uaXNNb2RpZmllZD0hMCl9aGFzTG9jYWxNZXNzYWdlTGlzdChlKXtyZXR1cm4gdGhpcy5saXN0LmhhcyhlKX1nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpe3JldHVybiB0aGlzLmhhc0xvY2FsTWVzc2FnZUxpc3QoZSk/Wy4uLnRoaXMubGlzdC5nZXQoZSkudmFsdWVzKCldOltdfWhhc0xvY2FsTWVzc2FnZShlLHQpe2xldCBzPSExO2NvbnN0IG89dGhpcy5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpLGk9by5sZW5ndGg7Zm9yKGxldCBuPTA7bjxpO24rKylvW25dLklEPT09dCYmKHM9ITApO3JldHVybiBzfWdldExvY2FsTWVzc2FnZShlLHQpe2xldCBzPW51bGw7Y29uc3Qgbz10aGlzLmdldExvY2FsTWVzc2FnZUxpc3QoZSksaT1vLmxlbmd0aDtmb3IobGV0IG49MDtuPGk7bisrKWlmKG9bbl0uSUQ9PT10KXtzPW9bbl07YnJlYWt9cmV0dXJuIHN9Z2V0TG9jYWxMYXN0TWVzc2FnZShlKXtjb25zdCB0PXRoaXMuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKTtyZXR1cm4gdFt0Lmxlbmd0aC0xXX1nZXRMb2NhbE9sZGVzdE1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKVswXX1fc2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIoZSxzKXtlLnN0YXJ0c1dpdGgodC5DT05WX0MyQykmJlwiaW5cIj09PXMuZmxvdyYmdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXJNYXAuc2V0KGUscyl9X3NldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlLHMpe2Uuc3RhcnRzV2l0aCh0LkNPTlZfQzJDKSYmXCJvdXRcIj09PXMuZmxvdyYmdGhpcy5fbGF0ZXN0TWVzc2FnZVNlbnRCeU1lTWFwLnNldChlLHMpfWdldExhdGVzdE1lc3NhZ2VTZW50QnlQZWVyKGUpe3JldHVybiB0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5nZXQoZSl9Z2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGUpe3JldHVybiB0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5TWVNYXAuZ2V0KGUpfW1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKGUpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnQsbGF0ZXN0TmljazpzLGxhdGVzdEF2YXRhcjpvfT1lLGk9dGhpcy5saXN0LmdldCh0KTtpZihMdChpKSlyZXR1cm47Y29uc3Qgbj1BcnJheS5mcm9tKGkudmFsdWVzKCkpLHI9bi5sZW5ndGg7aWYoMD09PXIpcmV0dXJuO2xldCBhPW51bGwsdT0wLGM9ITE7Zm9yKGxldCBsPXItMTtsPj0wO2wtLSlcImluXCI9PT1uW2xdLmZsb3cmJihhPW5bbF0sYS5uaWNrIT09cyYmKGEuc2V0Tmlja0FuZEF2YXRhcih7bmljazpzfSksYz0hMCksYS5hdmF0YXIhPT1vJiYoYS5zZXROaWNrQW5kQXZhdGFyKHthdmF0YXI6b30pLGM9ITApLGMmJih1Kz0xKSk7X2UubChgJHt0aGlzLl9ufS5tb2RpZnlNZXNzYWdlU2VudEJ5UGVlciBjb252ZXJzYXRpb25JRDoke3R9IGNvdW50OiR7dX1gKX1tb2RpZnlNZXNzYWdlU2VudEJ5TWUoZSl7Y29uc3R7Y29udmVyc2F0aW9uSUQ6dCxsYXRlc3ROaWNrOnMsbGF0ZXN0QXZhdGFyOm99PWUsaT10aGlzLmxpc3QuZ2V0KHQpO2lmKEx0KGkpKXJldHVybjtjb25zdCBuPUFycmF5LmZyb20oaS52YWx1ZXMoKSkscj1uLmxlbmd0aDtpZigwPT09cilyZXR1cm47bGV0IGE9bnVsbCx1PTAsYz0hMTtmb3IobGV0IGw9ci0xO2w+PTA7bC0tKVwib3V0XCI9PT1uW2xdLmZsb3cmJihhPW5bbF0sYS5uaWNrIT09cyYmKGEuc2V0Tmlja0FuZEF2YXRhcih7bmljazpzfSksYz0hMCksYS5hdmF0YXIhPT1vJiYoYS5zZXROaWNrQW5kQXZhdGFyKHthdmF0YXI6b30pLGM9ITApLGMmJih1Kz0xKSk7X2UubChgJHt0aGlzLl9ufS5tb2RpZnlNZXNzYWdlU2VudEJ5TWUgY29udmVyc2F0aW9uSUQ6JHt0fSBjb3VudDoke3V9YCl9Z2V0VG9waWNDb252ZXJzYXRpb25JRExpc3QoZSl7cmV0dXJuWy4uLnRoaXMubGlzdC5rZXlzKCldLmZpbHRlcihzPT5zLnN0YXJ0c1dpdGgoYCR7dC5DT05WX0dST1VQfSR7ZX1gKSl9dHJhdmVyc2FsKCl7aWYoMCE9PXRoaXMubGlzdC5zaXplJiYtMT09PV9lLmdldExldmVsKCkpe2NvbnNvbGUuZ3JvdXAoXCJjb252ZXJzYXRpb25JRC1tZXNzYWdlQ291bnRcIik7Zm9yKGNvbnN0W2UsdF1vZiB0aGlzLmxpc3QpY29uc29sZS5sb2coYCR7ZX0tJHt0LnNpemV9YCk7Y29uc29sZS5ncm91cEVuZCgpfX1vbk1lc3NhZ2VNb2RpZmllZChlLHQpe2lmKCF0aGlzLmxpc3QuaGFzKGUpKXJldHVybntpc1VwZGF0ZWQ6ITEsbWVzc2FnZTpudWxsfTtjb25zdCBzPXRoaXMuX2dldFVuaXF1ZUlET2ZNZXNzYWdlKHQpLG89dGhpcy5saXN0LmdldChlKS5oYXMocyk7aWYoX2UuZChgJHt0aGlzLl9ufS5vbk1lc3NhZ2VNb2RpZmllZCBjb252ZXJzYXRpb25JRDoke2V9IHVuaXF1ZUlEOiR7c30gaGFzOiR7b31gKSxvKXtjb25zdCBvPXRoaXMubGlzdC5nZXQoZSkuZ2V0KHMpLHttZXNzYWdlVmVyc2lvbjppLGVsZW1lbnRzOm4sY2xvdWRDdXN0b21EYXRhOnJ9PXQ7cmV0dXJuIG8udmVyc2lvbjxpPyhvLnZlcnNpb249aSxvLl9lbGVtZW50cz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKSxvLnBheWxvYWQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuWzBdLmNvbnRlbnQpKSxvLnR5cGU9blswXS50eXBlLG8uY2xvdWRDdXN0b21EYXRhPXIsby5pc01vZGlmaWVkPSEwLHtpc1VwZGF0ZWQ6ITAsbWVzc2FnZTpvfSk6e2lzVXBkYXRlZDohMSxtZXNzYWdlOm99fXJldHVybntpc1VwZGF0ZWQ6ITEsbWVzc2FnZTpudWxsfX1fZ2V0VW5pcXVlSURPZk1lc3NhZ2UoZSl7Y29uc3R7ZnJvbTp0LHRvOnMscmFuZG9tOm8sc2VxdWVuY2U6aSx0aW1lOm59PWU7cmV0dXJuYCR7dH0tJHtzfS0ke299LSR7aX0tJHtufWB9cmVzZXQoKXt0aGlzLmxpc3QuY2xlYXIoKSx0aGlzLl9sYXRlc3RNZXNzYWdlU2VudEJ5UGVlck1hcC5jbGVhcigpLHRoaXMuX2xhdGVzdE1lc3NhZ2VTZW50QnlNZU1hcC5jbGVhcigpfX1jb25zdCBLbj1cIl9hMktleUFuZFRpbnlJRFVwZGF0ZWRcIixXbj1cIl9jbG91ZENvbmZpZ1VwZGF0ZWRcIixZbj1cIl9wcm9maWxlVXBkYXRlZFwiO2Z1bmN0aW9uIGpuKGUpe3RoaXMubWl4aW4oZSl9am4ubWl4aW49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLnByb3RvdHlwZXx8ZTt0Ll9pc1JlYWR5PSExLHQucmVhZHk9ZnVuY3Rpb24oZSx0PSExKXtpZihlKXJldHVybiB0aGlzLl9pc1JlYWR5P3ZvaWQodD9lLmNhbGwodGhpcyk6c2V0VGltZW91dChlLDEpKToodGhpcy5fcmVhZHlRdWV1ZT10aGlzLl9yZWFkeVF1ZXVlfHxbXSx2b2lkIHRoaXMuX3JlYWR5UXVldWUucHVzaChlKSl9LHQudHJpZ2dlclJlYWR5PWZ1bmN0aW9uKCl7dGhpcy5faXNSZWFkeT0hMCxzZXRUaW1lb3V0KCgpPT57Y29uc3QgZT10aGlzLl9yZWFkeVF1ZXVlO3RoaXMuX3JlYWR5UXVldWU9W10sZSYmZS5sZW5ndGg+MCYmZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNhbGwodGhpcyl9KSx0aGlzKX0sMSl9LHQucmVzZXRSZWFkeT1mdW5jdGlvbigpe3RoaXMuX2lzUmVhZHk9ITEsdGhpcy5fcmVhZHlRdWV1ZT1bXX0sdC5pc1JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUmVhZHl9fTtjb25zdCB6bj1bXCJqcGdcIixcImpwZWdcIixcImdpZlwiLFwicG5nXCIsXCJibXBcIixcImltYWdlXCIsXCJ3ZWJwXCJdLEpuPVtcIm1wNFwiLFwicXVpY2t0aW1lXCIsXCJtb3ZcIl0sWG49MSxabj0yLFFuPTMsZXI9MjU1O2NsYXNzIHRye2NvbnN0cnVjdG9yKGUpe0x0KGUpfHwodGhpcy51c2VySUQ9ZS51c2VySUR8fFwiXCIsdGhpcy5uaWNrPWUubmlja3x8XCJcIix0aGlzLmdlbmRlcj1lLmdlbmRlcnx8XCJcIix0aGlzLmJpcnRoZGF5PWUuYmlydGhkYXl8fDAsdGhpcy5sb2NhdGlvbj1lLmxvY2F0aW9ufHxcIlwiLHRoaXMuc2VsZlNpZ25hdHVyZT1lLnNlbGZTaWduYXR1cmV8fFwiXCIsdGhpcy5hbGxvd1R5cGU9ZS5hbGxvd1R5cGV8fHQuQUxMT1dfVFlQRV9BTExPV19BTlksdGhpcy5sYW5ndWFnZT1lLmxhbmd1YWdlfHwwLHRoaXMuYXZhdGFyPWUuYXZhdGFyfHxcIlwiLHRoaXMubWVzc2FnZVNldHRpbmdzPWUubWVzc2FnZVNldHRpbmdzfHwwLHRoaXMuYWRtaW5Gb3JiaWRUeXBlPWUuYWRtaW5Gb3JiaWRUeXBlfHx0LkZPUkJJRF9UWVBFX05PTkUsdGhpcy5sZXZlbD1lLmxldmVsfHwwLHRoaXMucm9sZT1lLnJvbGV8fDAsdGhpcy5sYXN0VXBkYXRlZFRpbWU9MCx0aGlzLnByb2ZpbGVDdXN0b21GaWVsZD1bXSxMdChlLnByb2ZpbGVDdXN0b21GaWVsZCl8fGUucHJvZmlsZUN1c3RvbUZpZWxkLmZvckVhY2goZT0+e3RoaXMucHJvZmlsZUN1c3RvbUZpZWxkLnB1c2goe2tleTplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSl9dmFsaWRhdGUoZSl7bGV0IHQ9ITAscz1cIlwiO2lmKEx0KGUpKXJldHVybnt2YWxpZDohMSx0aXBzOlwiZW1wdHkgb3B0aW9uc1wifTtpZihlLnByb2ZpbGVDdXN0b21GaWVsZCl7Y29uc3QgdD1lLnByb2ZpbGVDdXN0b21GaWVsZC5sZW5ndGg7bGV0IHM9bnVsbDtmb3IobGV0IG89MDtvPHQ7bysrKXtpZihzPWUucHJvZmlsZUN1c3RvbUZpZWxkW29dLCFVZShzLmtleSl8fC0xPT09cy5rZXkuaW5kZXhPZihcIlRhZ19Qcm9maWxlX0N1c3RvbVwiKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcIlRoZSBwcmVmaXggb2Yga2V5cyBvZiB0aGUgY3VzdG9tIHByb2ZpbGUga2V5LXZhbHVlIHBhaXJzICh3aGljaCBpcyBwcm9maWxlQ3VzdG9tRmllbGQpIG11c3QgYmUgVGFnX1Byb2ZpbGVfQ3VzdG9tXCJ9O2lmKCFVZShzLnZhbHVlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcIlRoZSB0eXBlIG9mIHZhbHVlcyBvZiB0aGUgY3VzdG9tIHByb2ZpbGUga2V5LXZhbHVlIHBhaXJzICh3aGljaCBpcyBwcm9maWxlQ3VzdG9tRmllbGQpIG11c3QgYmUgU3RyaW5nXCJ9fX1mb3IoY29uc3QgbyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pKXtpZihcInByb2ZpbGVDdXN0b21GaWVsZFwiPT09byljb250aW51ZTtpZihMdChlW29dKSYmIVVlKGVbb10pJiYhR2UoZVtvXSkpe3M9XCJrZXk6XCIrbytcIiwgaW52YWxpZCB2YWx1ZTpcIitlW29dLHQ9ITE7Y29udGludWV9c3dpdGNoKG8pe2Nhc2VcIm5pY2tcIjpVZShlW29dKXx8KHM9XCJuaWNrIG11c3QgYmUgYSBzdHJpbmdcIix0PSExKSxLZShlW29dKT41MDAmJihzPWBuaWNrIG5hbWUgbGltaXRlZDogbXVzdCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gNTAwIGJ5dGVzLCBjdXJyZW50IHNpemU6ICR7S2UoZVtvXSl9IGJ5dGVzYCx0PSExKTticmVhaztjYXNlXCJnZW5kZXJcIjp6ZShEZSxlLmdlbmRlcil8fChzPVwia2V5OmdlbmRlciwgaW52YWxpZCB2YWx1ZTpcIitlLmdlbmRlcix0PSExKTticmVhaztjYXNlXCJiaXJ0aGRheVwiOkdlKGUuYmlydGhkYXkpfHwocz1cImJpcnRoZGF5IG11c3QgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJsb2NhdGlvblwiOlVlKGUubG9jYXRpb24pfHwocz1cImxvY2F0aW9uIG11c3QgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJzZWxmU2lnbmF0dXJlXCI6VWUoZS5zZWxmU2lnbmF0dXJlKXx8KHM9XCJzZWxmU2lnbmF0dXJlIG11c3QgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJhbGxvd1R5cGVcIjp6ZShTZSxlLmFsbG93VHlwZSl8fChzPVwia2V5OmFsbG93VHlwZSwgaW52YWxpZCB2YWx1ZTpcIitlLmFsbG93VHlwZSx0PSExKTticmVhaztjYXNlXCJsYW5ndWFnZVwiOkdlKGUubGFuZ3VhZ2UpfHwocz1cImxhbmd1YWdlIG11c3QgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJhdmF0YXJcIjpVZShlLmF2YXRhcil8fChzPVwiYXZhdGFyIG11c3QgYmUgYSBzdHJpbmdcIix0PSExKTticmVhaztjYXNlXCJtZXNzYWdlU2V0dGluZ3NcIjowIT09ZS5tZXNzYWdlU2V0dGluZ3MmJjEhPT1lLm1lc3NhZ2VTZXR0aW5ncyYmKHM9XCJtZXNzYWdlU2V0dGluZ3MgbXVzdCBiZSAwIG9yIDFcIix0PSExKTticmVhaztjYXNlXCJhZG1pbkZvcmJpZFR5cGVcIjp6ZShFZSxlLmFkbWluRm9yYmlkVHlwZSl8fChzPVwia2V5OmFkbWluRm9yYmlkVHlwZSwgaW52YWxpZCB2YWx1ZTpcIitlLmFkbWluRm9yYmlkVHlwZSx0PSExKTticmVhaztjYXNlXCJsZXZlbFwiOkdlKGUubGV2ZWwpfHwocz1cImxldmVsIG11c3QgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztjYXNlXCJyb2xlXCI6R2UoZS5yb2xlKXx8KHM9XCJyb2xlIG11c3QgYmUgYSBudW1iZXJcIix0PSExKTticmVhaztkZWZhdWx0OnM9XCJ1bmtub3duIGtleTpcIitvK1wiICBcIitlW29dLHQ9ITF9fXJldHVybnt2YWxpZDp0LHRpcHM6c319fWNsYXNzIHNye2NvbnN0cnVjdG9yKGUpe3RoaXMudmFsdWU9ZSx0aGlzLm5leHQ9bnVsbH19Y2xhc3Mgb3J7Y29uc3RydWN0b3IoZSl7dGhpcy5NQVhfTEVOR1RIPWUsdGhpcy5wVGFpbD1udWxsLHRoaXMucE5vZGVUb0RlbD1udWxsLHRoaXMubWFwPW5ldyBNYXB9c2V0KGUpe2NvbnN0IHQ9bmV3IHNyKGUpO2lmKHRoaXMubWFwLnNpemU8dGhpcy5NQVhfTEVOR1RIKW51bGw9PT10aGlzLnBUYWlsPyh0aGlzLnBUYWlsPXQsdGhpcy5wTm9kZVRvRGVsPXQpOih0aGlzLnBUYWlsLm5leHQ9dCx0aGlzLnBUYWlsPXQpLHRoaXMubWFwLnNldChlLDEpO2Vsc2V7bGV0IHM9dGhpcy5wTm9kZVRvRGVsO3RoaXMucE5vZGVUb0RlbD10aGlzLnBOb2RlVG9EZWwubmV4dCx0aGlzLm1hcC5kZWxldGUocy52YWx1ZSkscy5uZXh0PW51bGwscz1udWxsLHRoaXMucFRhaWwubmV4dD10LHRoaXMucFRhaWw9dCx0aGlzLm1hcC5zZXQoZSwxKX19aGFzKGUpe3JldHVybiB0aGlzLm1hcC5oYXMoZSl9ZGVsZXRlKGUpe3RoaXMuaGFzKGUpJiZ0aGlzLm1hcC5kZWxldGUoZSl9dGFpbCgpe3JldHVybiB0aGlzLnBUYWlsfXNpemUoKXtyZXR1cm4gdGhpcy5tYXAuc2l6ZX1kYXRhKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5tYXAua2V5cygpKX1yZXNldCgpe2xldCBlO2Zvcig7bnVsbCE9PXRoaXMucE5vZGVUb0RlbDspZT10aGlzLnBOb2RlVG9EZWwsdGhpcy5wTm9kZVRvRGVsPXRoaXMucE5vZGVUb0RlbC5uZXh0LGUubmV4dD1udWxsLGU9bnVsbDt0aGlzLnBUYWlsPW51bGwsdGhpcy5tYXAuY2xlYXIoKX19Y29uc3QgaXI9W1wiZ3JvdXBJRFwiLFwibmFtZVwiLFwiYXZhdGFyXCIsXCJ0eXBlXCIsXCJpbnRyb2R1Y3Rpb25cIixcIm5vdGlmaWNhdGlvblwiLFwib3duZXJJRFwiLFwic2VsZkluZm9cIixcImNyZWF0ZVRpbWVcIixcImluZm9TZXF1ZW5jZVwiLFwibGFzdEluZm9UaW1lXCIsXCJsYXN0TWVzc2FnZVwiLFwibmV4dE1lc3NhZ2VTZXFcIixcIm1lbWJlck51bVwiLFwibWF4TWVtYmVyTnVtXCIsXCJtZW1iZXJMaXN0XCIsXCJqb2luT3B0aW9uXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtdXRlQWxsTWVtYmVyc1wiLFwiaXNTdXBwb3J0VG9waWNcIixcImludml0ZU9wdGlvblwiLFwiX2xhc3RSZXZva2VkVGltZVwiXTtjbGFzcyBucntjb25zdHJ1Y3RvcihlKXt0aGlzLmdyb3VwSUQ9XCJcIix0aGlzLm5hbWU9XCJcIix0aGlzLmF2YXRhcj1cIlwiLHRoaXMudHlwZT1cIlwiLHRoaXMuaW50cm9kdWN0aW9uPVwiXCIsdGhpcy5ub3RpZmljYXRpb249XCJcIix0aGlzLm93bmVySUQ9XCJcIix0aGlzLmNyZWF0ZVRpbWU9XCJcIix0aGlzLmluZm9TZXF1ZW5jZT1cIlwiLHRoaXMubGFzdEluZm9UaW1lPVwiXCIsdGhpcy5zZWxmSW5mbz17bWVzc2FnZVJlbWluZFR5cGU6XCJcIixqb2luVGltZTpcIlwiLG5hbWVDYXJkOlwiXCIscm9sZTpcIlwiLHVzZXJJRDpcIlwiLG1lbWJlckN1c3RvbUZpZWxkOnZvaWQgMCxyZWFkZWRTZXF1ZW5jZTowLGV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0OnZvaWQgMH0sdGhpcy5sYXN0TWVzc2FnZT17bGFzdFRpbWU6XCJcIixsYXN0U2VxdWVuY2U6XCJcIixmcm9tQWNjb3VudDpcIlwiLG1lc3NhZ2VGb3JTaG93OlwiXCJ9LHRoaXMubmV4dE1lc3NhZ2VTZXE9XCJcIix0aGlzLm1lbWJlck51bT1cIlwiLHRoaXMubWVtYmVyQ291bnQ9XCJcIix0aGlzLm1heE1lbWJlck51bT1cIlwiLHRoaXMubWF4TWVtYmVyQ291bnQ9XCJcIix0aGlzLmpvaW5PcHRpb249XCJcIix0aGlzLmludml0ZU9wdGlvbj1cIlwiLHRoaXMuZ3JvdXBDdXN0b21GaWVsZD1bXSx0aGlzLm11dGVBbGxNZW1iZXJzPSExLHRoaXMuaXNTdXBwb3J0VG9waWM9ITEsdGhpcy5fbGFzdFJldm9rZWRUaW1lPTAsdGhpcy5faW5pdEdyb3VwKGUpfXNldCBtZW1iZXJOdW0oZSl7fXNldCBtYXhNZW1iZXJOdW0oZSl7fWdldCBtZW1iZXJOdW0oKXtyZXR1cm4gdGhpcy5tZW1iZXJDb3VudH1nZXQgbWF4TWVtYmVyTnVtKCl7cmV0dXJuIHRoaXMubWF4TWVtYmVyQ291bnR9X2luaXRHcm91cChlKXtmb3IoY29uc3QgdCBpbiBlKWlyLmluZGV4T2YodCk8MHx8KFwic2VsZkluZm9cIiE9PXQ/KFwibWVtYmVyTnVtXCI9PT10JiYodGhpcy5tZW1iZXJDb3VudD1lW3RdKSxcIm1heE1lbWJlck51bVwiPT09dCYmKHRoaXMubWF4TWVtYmVyQ291bnQ9ZVt0XSksXCJpc1N1cHBvcnRUb3BpY1wiIT09dD90aGlzW3RdPWVbdF06dGhpcy5pc1N1cHBvcnRUb3BpYz0xPT09ZVt0XSk6dGhpcy51cGRhdGVTZWxmSW5mbyhlW3RdKSl9dXBkYXRlR3JvdXAoZSl7ZS5hcHBpZD12b2lkIDAsZS5ncm9zc1RvcGljTmV4dE1zZ1NlcT12b2lkIDAsZS5zZWxmSW5mbyYmKGUuc2VsZkluZm8uZ3Jvc3NUb3BpY1JlYWRTZXE9dm9pZCAwKTtjb25zdCB0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpO3QubGFzdE1zZ1RpbWUmJih0aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lPXQubGFzdE1zZ1RpbWUpLHdlKHQubXV0ZUFsbE1lbWJlcnMpfHwoXCJPblwiPT09dC5tdXRlQWxsTWVtYmVycz90Lm11dGVBbGxNZW1iZXJzPSEwOnQubXV0ZUFsbE1lbWJlcnM9ITEpLHQuZ3JvdXBDdXN0b21GaWVsZCYmUWUodGhpcy5ncm91cEN1c3RvbUZpZWxkLHQuZ3JvdXBDdXN0b21GaWVsZCksd2UodC5tZW1iZXJOdW0pfHwodGhpcy5tZW1iZXJDb3VudD10Lm1lbWJlck51bSksd2UodC5tYXhNZW1iZXJOdW0pfHwodGhpcy5tYXhNZW1iZXJDb3VudD10Lm1heE1lbWJlck51bSksd2UodC5pc1N1cHBvcnRUb3BpYyl8fCh0aGlzLmlzU3VwcG9ydFRvcGljPUdlKHQuaXNTdXBwb3J0VG9waWMpPzE9PT10LmlzU3VwcG9ydFRvcGljOnQuaXNTdXBwb3J0VG9waWMpLEJlKHRoaXMsdCxbXCJtZW1iZXJzXCIsXCJlcnJvckNvZGVcIixcImxhc3RNc2dUaW1lXCIsXCJncm91cEN1c3RvbUZpZWxkXCIsXCJtZW1iZXJOdW1cIixcIm1heE1lbWJlck51bVwiLFwiaXNTdXBwb3J0VG9waWNcIl0pLGJlKHQubWVtYmVycykmJnQubWVtYmVycy5sZW5ndGg+MCYmdC5tZW1iZXJzLmZvckVhY2goZT0+e2UudXNlcklEPT09dGhpcy5zZWxmSW5mby51c2VySUQmJkJlKHRoaXMuc2VsZkluZm8sZSxbXCJzZXF1ZW5jZVwiXSl9KX11cGRhdGVTZWxmSW5mbyh7bmFtZUNhcmQ6ZSxqb2luVGltZTp0LHJvbGU6cyxtZXNzYWdlUmVtaW5kVHlwZTpvLHJlYWRlZFNlcXVlbmNlOmksZXhjbHVkZWRVbnJlYWRTZXF1ZW5jZUxpc3Q6bn0pe2NvbnN0IHI9e25hbWVDYXJkOmUsam9pblRpbWU6dCxyb2xlOnMsbWVzc2FnZVJlbWluZFR5cGU6byxyZWFkZWRTZXF1ZW5jZTppLGV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0Om59O0JlKHRoaXMuc2VsZkluZm8sey4uLnJ9LFtdLFtcIlwiLG51bGwsdm9pZCAwLDAsTmFOXSl9c2V0U2VsZk5hbWVDYXJkKGUpe3RoaXMuc2VsZkluZm8ubmFtZUNhcmQ9ZX19Y29uc3QgcnI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gd2UoZSk/e2xhc3RUaW1lOjAsbGFzdFNlcXVlbmNlOjAsZnJvbUFjY291bnQ6MCxtZXNzYWdlRm9yU2hvdzpcIlwiLHBheWxvYWQ6bnVsbCx0eXBlOlwiXCIsaXNSZXZva2VkOiExLGNsb3VkQ3VzdG9tRGF0YTpcIlwiLG9ubGluZU9ubHlGbGFnOiExLG5pY2s6XCJcIixuYW1lQ2FyZDpcIlwiLHZlcnNpb246MCxpc1BlZXJSZWFkOiExLHJldm9rZXI6bnVsbH06ZSBpbnN0YW5jZW9mIGJuP3tsYXN0VGltZTplLnRpbWV8fDAsbGFzdFNlcXVlbmNlOmUuc2VxdWVuY2V8fDAsZnJvbUFjY291bnQ6ZS5mcm9tfHxcIlwiLG1lc3NhZ2VGb3JTaG93Okl0KGUudHlwZSxlLnBheWxvYWQsdCkscGF5bG9hZDplLnBheWxvYWR8fG51bGwsdHlwZTplLnR5cGV8fG51bGwsaXNSZXZva2VkOmUuaXNSZXZva2VkfHwhMSxjbG91ZEN1c3RvbURhdGE6ZS5jbG91ZEN1c3RvbURhdGF8fFwiXCIsb25saW5lT25seUZsYWc6ZS5fb25saW5lT25seUZsYWd8fCExLG5pY2s6ZS5uaWNrfHxcIlwiLG5hbWVDYXJkOmUubmFtZUNhcmR8fFwiXCIsdmVyc2lvbjplLnZlcnNpb258fDAsaXNQZWVyUmVhZDplLmlzUGVlclJlYWR8fCExLHJldm9rZXI6ZS5yZXZva2VyfHxudWxsfTp7Li4uZSxtZXNzYWdlRm9yU2hvdzpJdChlLnR5cGUsZS5wYXlsb2FkLHQpfX07Y2xhc3MgYXJ7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmNvbnZlcnNhdGlvbklEPWUuY29udmVyc2F0aW9uSUR8fFwiXCIsdGhpcy51bnJlYWRDb3VudD1lLnVucmVhZENvdW50fHwwLHRoaXMudHlwZT1lLnR5cGV8fFwiXCIsdGhpcy5sYXN0TWVzc2FnZT1ycihlLmxhc3RNZXNzYWdlLHQpLGUubGFzdE1zZ1RpbWUmJih0aGlzLmxhc3RNZXNzYWdlLmxhc3RUaW1lPWUubGFzdE1zZ1RpbWUpLHRoaXMuX2lzSW5mb0NvbXBsZXRlZD0hMSx0aGlzLnBlZXJSZWFkVGltZT1lLnBlZXJSZWFkVGltZXx8MCx0aGlzLmdyb3VwQXRJbmZvTGlzdD1bXSx0aGlzLnJlbWFyaz1cIlwiLHRoaXMuaXNQaW5uZWQ9ZS5pc1Bpbm5lZHx8ITEsdGhpcy5tZXNzYWdlUmVtaW5kVHlwZT1cIlwiLHRoaXMubWFya0xpc3Q9ZS5tYXJrTGlzdHx8W10sdGhpcy5jdXN0b21EYXRhPWUuY3VzdG9tRGF0YXx8XCJcIix0aGlzLmNvbnZlcnNhdGlvbkdyb3VwTGlzdD1lLmNvbnZlcnNhdGlvbkdyb3VwTGlzdHx8W10sdGhpcy5faW5pdFByb2ZpbGUoZSl9Z2V0IHRvQWNjb3VudCgpe3JldHVybiB0aGlzLmNvbnZlcnNhdGlvbklELnN0YXJ0c1dpdGgodC5DT05WX0MyQyk/dGhpcy5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIik6dGhpcy5jb252ZXJzYXRpb25JRC5zdGFydHNXaXRoKHQuQ09OVl9HUk9VUCk/dGhpcy5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKTpcIlwifWdldCBzdWJUeXBlKCl7cmV0dXJuIHRoaXMuZ3JvdXBQcm9maWxlP3RoaXMuZ3JvdXBQcm9maWxlLnR5cGU6XCJcIn1faW5pdFByb2ZpbGUoZSl7T2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57c3dpdGNoKHQpe2Nhc2VcInVzZXJQcm9maWxlXCI6dGhpcy51c2VyUHJvZmlsZT1lLnVzZXJQcm9maWxlO2JyZWFrO2Nhc2VcImdyb3VwUHJvZmlsZVwiOnRoaXMuZ3JvdXBQcm9maWxlPWUuZ3JvdXBQcm9maWxlfX0pLHdlKHRoaXMudXNlclByb2ZpbGUpJiZ0aGlzLnR5cGU9PT10LkNPTlZfQzJDP3RoaXMudXNlclByb2ZpbGU9bmV3IHRyKHt1c2VySUQ6ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKFwiQzJDXCIsXCJcIil9KTp3ZSh0aGlzLmdyb3VwUHJvZmlsZSkmJnRoaXMudHlwZT09PXQuQ09OVl9HUk9VUCYmKHRoaXMuZ3JvdXBQcm9maWxlPW5ldyBucih7Z3JvdXBJRDplLmNvbnZlcnNhdGlvbklELnJlcGxhY2UoXCJHUk9VUFwiLFwiXCIpfSkpfXVwZGF0ZVVucmVhZENvdW50KGUpe2NvbnN0e25leHRVbnJlYWRDb3VudDpzLGlzRnJvbUdldENvbnZlcnNhdGlvbnM6byxpc1VucmVhZEMyQ01lc3NhZ2U6aX09ZTt3ZShzKXx8KGV0KHRoaXMuc3ViVHlwZSk/dGhpcy51bnJlYWRDb3VudD0wOm8mJnRoaXMudHlwZT09PXQuQ09OVl9HUk9VUHx8byYmdGhpcy50eXBlPT09dC5DT05WX1RPUElDfHxpJiZ0aGlzLnR5cGU9PT10LkNPTlZfQzJDP3RoaXMudW5yZWFkQ291bnQ9czp0aGlzLnVucmVhZENvdW50PXRoaXMudW5yZWFkQ291bnQrcyl9dXBkYXRlTGFzdE1lc3NhZ2UoZSl7dGhpcy5sYXN0TWVzc2FnZT1ycihlKX11cGRhdGVHcm91cEF0SW5mb0xpc3QoZSl7aWYodGhpcy5faXNOZWVkTWVyZ2VHcm91cEF0SW5mbyhlKSlyZXR1cm47bGV0Wy4uLnNdPWUuZ3JvdXBBdFR5cGU7LTEhPT1zLmluZGV4T2YodC5DT05WX0FUX01FKSYmLTEhPT1zLmluZGV4T2YodC5DT05WX0FUX0FMTCkmJihzPVt0LkNPTlZfQVRfQUxMX0FUX01FXSk7Y29uc3Qgbz17ZnJvbTplLmZyb20sZ3JvdXBJRDplLmdyb3VwSUQsdG9waWNJRDplLnRvcGljSUQsbWVzc2FnZVNlcXVlbmNlOmUuc2VxdWVuY2UsYXRUeXBlQXJyYXk6cyxfX3JhbmRvbTplLl9fcmFuZG9tLF9fc2VxdWVuY2U6ZS5fX3NlcXVlbmNlfTt0aGlzLmdyb3VwQXRJbmZvTGlzdC5wdXNoKG8pfV9pc05lZWRNZXJnZUdyb3VwQXRJbmZvKGUpe2NvbnN0e2dyb3VwSUQ6cyxzZXF1ZW5jZTpvfT1lO2lmKCFzdCh7Z3JvdXBJRDpzfSkpcmV0dXJuITE7bGV0IGk9ITE7cmV0dXJuIHRoaXMuZ3JvdXBBdEluZm9MaXN0LmZvckVhY2gocz0+e3MubWVzc2FnZVNlcXVlbmNlPT09byYmKHMuYXRUeXBlQXJyYXkuaW5kZXhPZih0LkNPTlZfQVRfTUUpPi0xJiZlLmdyb3VwQXRUeXBlLmluZGV4T2YodC5DT05WX0FUX0FMTCk+LTEmJihzLmF0VHlwZUFycmF5PVt0LkNPTlZfQVRfQUxMX0FUX01FXSkscy5hdFR5cGVBcnJheS5pbmRleE9mKHQuQ09OVl9BVF9BTEwpPi0xJiZlLmdyb3VwQXRUeXBlLmluZGV4T2YodC5DT05WX0FUX01FKT4tMSYmKHMuYXRUeXBlQXJyYXk9W3QuQ09OVl9BVF9BTExfQVRfTUVdLHMuX19yYW5kb209ZS5fX3JhbmRvbSxzLl9fc2VxdWVuY2U9ZS5fX3NlcXVlbmNlKSxpPSEwKX0pLGl9Y2xlYXJHcm91cEF0SW5mb0xpc3QoKXt0aGlzLmdyb3VwQXRJbmZvTGlzdC5sZW5ndGg9MH1yZWR1Y2VVbnJlYWRDb3VudCgpe3JldHVybiB0aGlzLnVucmVhZENvdW50Pj0xJiYodGhpcy51bnJlYWRDb3VudC09MSwhMCl9aXNMYXN0TWVzc2FnZVJldm9rZWQoe3NlcXVlbmNlOmUsdGltZTpzfSl7cmV0dXJuIHRoaXMudHlwZT09PXQuQ09OVl9DMkMmJmU9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSYmcz09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFRpbWV8fHRoaXMudHlwZT09PXQuQ09OVl9HUk9VUCYmZT09PXRoaXMubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlfXNldExhc3RNZXNzYWdlUmV2b2tlZChlKXt0aGlzLmxhc3RNZXNzYWdlLmlzUmV2b2tlZD1lfXNldExhc3RNZXNzYWdlUmV2b2tlcihlKXt0aGlzLmxhc3RNZXNzYWdlLnJldm9rZXI9ZX19Y2xhc3MgdXJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlPWUsdGhpcy5fbj1cIk1lc3NhZ2VSZW1pbmRIYW5kbGVyXCIsdGhpcy5fdXBkYXRlU2VxdWVuY2U9MH1nZXRDMkNNZXNzYWdlUmVtaW5kVHlwZSgpe2NvbnN0IGU9dGhpcy5fbitcIi5nZXRDMkNNZXNzYWdlUmVtaW5kVHlwZVwiO3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm1vLHVwZGF0ZVNlcXVlbmNlOnRoaXMuX3VwZGF0ZVNlcXVlbmNlfSkudGhlbih0PT57X2UubChlK1wiIG9rXCIpO2NvbnN0e3VwZGF0ZVNlcXVlbmNlOnMsbXV0ZUZsYWdMaXN0Om99PXQuZGF0YTt0aGlzLl91cGRhdGVTZXF1ZW5jZT1zLHRoaXMuX3BhdGNoQzJDTWVzc2FnZVJlbWluZFR5cGUobyl9KS5jYXRjaCh0PT57X2UuZShlK1wiIGZhaWxlZC4gZXJyb3I6XCIsdCl9KX1fcGF0Y2hDMkNNZXNzYWdlUmVtaW5kVHlwZShlKXtsZXQgcz0wLG89XCJcIjtiZShlKSYmZS5sZW5ndGg+MCYmZS5mb3JFYWNoKGU9Pntjb25zdHt1c2VySUQ6aSxtdXRlRmxhZzpufT1lOzA9PT1uP289dC5NU0dfUkVNSU5EX0FDUFRfQU5EX05PVEU6MT09PW4/bz10Lk1TR19SRU1JTkRfRElTQ0FSRDoyPT09biYmKG89dC5NU0dfUkVNSU5EX0FDUFRfTk9UX05PVEUpLCEwPT09dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnBhdGNoTWVzc2FnZVJlbWluZFR5cGUoe0lEOmksaXNDMkNDb252ZXJzYXRpb246ITAsbWVzc2FnZVJlbWluZFR5cGU6b30pJiYocys9MSl9KSxfZS5sKGAke3RoaXMuX259Ll9wYXRjaEMyQ01lc3NhZ2VSZW1pbmRUeXBlIGNvdW50OiR7c31gKX1zZXQoZSl7cmV0dXJuIGUuZ3JvdXBJRD90aGlzLl9zZXRHcm91cE1lc3NhZ2VSZW1pbmRUeXBlKGUpOmJlKGUudXNlcklETGlzdCk/dGhpcy5fc2V0QzJDTWVzc2FnZVJlbWluZFR5cGUoZSk6dm9pZCAwfV9zZXRHcm91cE1lc3NhZ2VSZW1pbmRUeXBlKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5fc2V0R3JvdXBNZXNzYWdlUmVtaW5kVHlwZVwiLHtncm91cElEOnMsbWVzc2FnZVJlbWluZFR5cGU6b309ZSxpPWBncm91cElEOiR7c30gbWVzc2FnZVJlbWluZFR5cGU6JHtvfWAsbj1uZXcgQ24oXCJzZXRNZXNzYWdlUmVtaW5kVHlwZVwiKTtuLnNldE1lc3NhZ2UoaSk7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShocykubW9kaWZ5R3JvdXBNZW1iZXJJbmZvKHtncm91cElEOnMsbWVzc2FnZVJlbWluZFR5cGU6byx1c2VySUQ6dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE15VXNlcklEKCl9KS50aGVuKCgpPT57bi5zZXROZXR3b3JrVHlwZSh0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubChgJHt0fSBvay4gJHtpfWApO2NvbnN0IHM9dGhpcy5vbkdyb3VwTWVzc2FnZVJlbWluZFR5cGVVcGRhdGVkKGUpO3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZW1pdFRvdGFsVW5yZWFkTWVzc2FnZUNvdW50VXBkYXRlKCksd24ocyl9KS5jYXRjaChlPT4odGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1vbkdyb3VwTWVzc2FnZVJlbWluZFR5cGVVcGRhdGVkKHQpe2NvbnN0e2dyb3VwSUQ6cyxtZXNzYWdlUmVtaW5kVHlwZTpvfT10LGk9dGhpcy5fZ2V0TW9kdWxlKGRzKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShzKTtpZihpJiYoaS5zZWxmSW5mby5tZXNzYWdlUmVtaW5kVHlwZT1vKSxvdChzKSl7Y29uc3QgdD1zLGk9ZnQodCksbj10aGlzLl9nZXRNb2R1bGUoZ3MpLmdldExvY2FsVG9waWMoaSx0KTtyZXR1cm4gbiYmKG4udXBkYXRlU2VsZkluZm8oe21lc3NhZ2VSZW1pbmRUeXBlOm99KSx0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZW1pdE91dGVyRXZlbnQoZS5UT1BJQ19VUERBVEVELHtncm91cElEOmksdG9waWM6bn0pKSx7dG9waWM6bn19cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDpzLGlzQzJDQ29udmVyc2F0aW9uOiExLG1lc3NhZ2VSZW1pbmRUeXBlOm99KSYmdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpLHtncm91cDppfX1fc2V0QzJDTWVzc2FnZVJlbWluZFR5cGUoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLl9zZXRDMkNNZXNzYWdlUmVtaW5kVHlwZVwiLHt1c2VySURMaXN0Om8sbWVzc2FnZVJlbWluZFR5cGU6aX09ZSxuPW8uc2xpY2UoMCwzMCk7bGV0IHI9MDtpPT09dC5NU0dfUkVNSU5EX0RJU0NBUkQ/cj0xOmk9PT10Lk1TR19SRU1JTkRfQUNQVF9OT1RfTk9URSYmKHI9Mik7Y29uc3QgYT1gdXNlcklETGlzdDoke259IG1lc3NhZ2VSZW1pbmRUeXBlOiR7aX1gLHU9bmV3IENuKFwic2V0TWVzc2FnZVJlbWluZFR5cGVcIik7cmV0dXJuIHUuc2V0TWVzc2FnZShhKSx0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOl9vLHJlcXVlc3REYXRhOnt1c2VySURMaXN0Om4sbXV0ZUZsYWc6cn19KS50aGVuKGU9Pnt1LnNldE5ldHdvcmtUeXBlKHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTtjb25zdHt1cGRhdGVTZXF1ZW5jZTp0LGVycm9yTGlzdDpvfT1lLmRhdGE7dGhpcy5fdXBkYXRlU2VxdWVuY2U9dDtjb25zdCByPVtdLGE9W107YmUobykmJm8uZm9yRWFjaChlPT57ci5wdXNoKGUudXNlcklEKSxhLnB1c2goe3VzZXJJRDplLnVzZXJJRCxjb2RlOmUuZXJyb3JDb2RlfSl9KTtjb25zdCBjPW4uZmlsdGVyKGU9Pi0xPT09ci5pbmRleE9mKGUpKTtfZS5sKGAke3N9IG9rLiBzdWNjZXNzVXNlcklETGlzdDoke2N9IGZhaWx1cmVVc2VySURMaXN0OiR7SlNPTi5zdHJpbmdpZnkoYSl9YCk7bGV0IGw9MDtyZXR1cm4gYy5mb3JFYWNoKGU9Pnt0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucGF0Y2hNZXNzYWdlUmVtaW5kVHlwZSh7SUQ6ZSxpc0MyQ0NvbnZlcnNhdGlvbjohMCxtZXNzYWdlUmVtaW5kVHlwZTppfSkmJihsKz0xKX0pLGw+PTEmJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKSxuLmxlbmd0aD1yLmxlbmd0aD0wLHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5lbWl0VG90YWxVbnJlYWRNZXNzYWdlQ291bnRVcGRhdGUoKSx4bih7c3VjY2Vzc1VzZXJJRExpc3Q6Yy5tYXAoZT0+KHt1c2VySUQ6ZX0pKSxmYWlsdXJlVXNlcklETGlzdDphfSl9KS5jYXRjaChlPT4odGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Uuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fZ2V0TW9kdWxlKGUpe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TW9kdWxlKGUpfV9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCl7dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfXNldFVwZGF0ZVNlcXVlbmNlKGUpe3RoaXMuX3VwZGF0ZVNlcXVlbmNlPWV9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fdXBkYXRlU2VxdWVuY2U9MH19Y2xhc3MgY3J7Y29uc3RydWN0b3IoZSl7dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlPWUsdGhpcy5fbj1cIkNvbnZHcm91cEhhbmRsZXJcIix0aGlzLl9jb252R3JvdXBNYXA9bmV3IE1hcCx0aGlzLl9zdGFydEluZGV4PTAsdGhpcy5fcGFnaW5nU3RhdHVzPVJ0Lk5PVF9TVEFSVH1zZXRDb252Q3VzdG9tRGF0YShlKXtjb25zdCBzPXRoaXMuX24rXCIuc2V0Q29udkN1c3RvbURhdGFcIix7Y29udmVyc2F0aW9uSURMaXN0Om8sY3VzdG9tRGF0YTppfT1lO19lLmwocytcIiBvcHRpb25zOlwiLGUpO2NvbnN0IG49bmV3IENuKFwic2V0Q29udkN1c3RvbURhdGFcIik7bi5zZXRNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpKTtjb25zdCByPXtmcm9tQWNjb3VudDp0aGlzLl9nZXRNeVVzZXJJRCgpLGl0ZW1MaXN0OltdfSxhPVtdLHU9W107cmV0dXJuIG8uZm9yRWFjaChlPT57aWYoIXRoaXMuX2hhc0xvY2FsQ29udmVyc2F0aW9uKGUpKXJldHVybiB0aGlzLl9vbkNvbnZlcnNhdGlvbk5vdEZvdW5kKHUsZSksITA7aWYoIWl0KGUpJiYhbnQoZSkpcmV0dXJuIHRoaXMuX29uQ29udmVyc2F0aW9uSURJbnZhbGlkKHUsZSksITA7Y29uc3Qgcz17b3BlcmF0aW9uVHlwZToyLGNvbnRhY3RJdGVtOnZvaWQgMCxjdXN0b21NYXJrOml9O2l0KGUpP3MuY29udGFjdEl0ZW09e3R5cGU6MSx0b0FjY291bnQ6ZS5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIil9Om50KGUpJiYocy5jb250YWN0SXRlbT17dHlwZToyLGdyb3VwSUQ6ZS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKX0pLHIuaXRlbUxpc3QucHVzaChzKX0pLHUubGVuZ3RoPT09by5sZW5ndGg/eG4oe3N1Y2Nlc3NDb252ZXJzYXRpb25JRExpc3Q6YSxmYWlsdXJlQ29udmVyc2F0aW9uSURMaXN0OnV9KTp0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk5vLHJlcXVlc3REYXRhOnJ9KS50aGVuKGU9PntuLnNldE5ldHdvcmtUeXBlKHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHMrXCIgb2tcIik7Y29uc3R7cmVzdWx0SXRlbTp0fT1lLmRhdGE7aWYoYmUodCkpe2xldCBlLHMsbz0hMTt0LmZvckVhY2godD0+e2U9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQodC5jb250YWN0SXRlbSksMD09PXQucmVzdWx0Q29kZT8oYS5wdXNoKGUpLHM9dGhpcy5fZ2V0TG9jYWxDb252ZXJzYXRpb24oZSkscyYmcy5jdXN0b21EYXRhIT09aSYmKHMuY3VzdG9tRGF0YT1pLG89ITApKTp1LnB1c2goe2NvbnZlcnNhdGlvbklEOmUsY29kZTp0LnJlc3VsdENvZGUsbWVzc2FnZTp0LnJlc3VsdEluZm99KX0pLCEwPT09byYmdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpfXJldHVybiB3bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDphLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6dX0pfSkuY2F0Y2goZT0+KHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntuLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9bWFya0NvbnZlcnNhdGlvbihlKXtpZighdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmNhbklVc2UoTS5DT05WX01BUkspKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHM9dGhpcy5fbitcIi5tYXJrQ29udmVyc2F0aW9uXCIse2NvbnZlcnNhdGlvbklETGlzdDpvLG1hcmtUeXBlOmksZW5hYmxlTWFyazpufT1lO19lLmwocytcIiBvcHRpb25zOlwiLGUpO2NvbnN0IHI9bmV3IENuKFwibWFya0NvbnZlcnNhdGlvblwiKTtyLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpO2xldCBhPXZvaWQgMCx1PXZvaWQgMDtjb25zdCBjPXRoaXMuX2dldEZsYWdCaXQoaSk7ITA9PT1uP3U9W2NdOmE9W2NdO2NvbnN0IGw9e2Zyb21BY2NvdW50OnRoaXMuX2dldE15VXNlcklEKCksaXRlbUxpc3Q6W119LGQ9W10scD1bXTtyZXR1cm4gby5mb3JFYWNoKGU9PntpZighdGhpcy5faGFzTG9jYWxDb252ZXJzYXRpb24oZSkpcmV0dXJuIHRoaXMuX29uQ29udmVyc2F0aW9uTm90Rm91bmQocCxlKSwhMDtpZighaXQoZSkmJiFudChlKSlyZXR1cm4gdGhpcy5fb25Db252ZXJzYXRpb25JREludmFsaWQocCxlKSwhMDtjb25zdCBzPXtvcGVyYXRpb25UeXBlOjEsY29udGFjdEl0ZW06dm9pZCAwLGNsZWFyTWFyazphLHNldE1hcms6dX07aXQoZSk/cy5jb250YWN0SXRlbT17dHlwZToxLHRvQWNjb3VudDplLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKX06bnQoZSkmJihzLmNvbnRhY3RJdGVtPXt0eXBlOjIsZ3JvdXBJRDplLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpfSksbC5pdGVtTGlzdC5wdXNoKHMpfSkscC5sZW5ndGg9PT1vLmxlbmd0aD94bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDpkLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6cH0pOnRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Um8scmVxdWVzdERhdGE6bH0pLnRoZW4oZT0+e3Iuc2V0TmV0d29ya1R5cGUodGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwocytcIiBva1wiKTtjb25zdHtyZXN1bHRJdGVtOnR9PWUuZGF0YTtpZihiZSh0KSl7bGV0IGUscyxvPSExO3QuZm9yRWFjaCh0PT57aWYoZT10aGlzLl9jb25jYXRDb252ZXJzYXRpb25JRCh0LmNvbnRhY3RJdGVtKSwwPT09dC5yZXN1bHRDb2RlKXtpZihkLnB1c2goZSkscz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxzKXtjb25zdCBlPXMubWFya0xpc3QuaW5kZXhPZihpKTshMD09PW4/LTE9PT1lJiYocy5tYXJrTGlzdC5wdXNoKGkpLG89ITApOi0xIT09ZSYmKHMubWFya0xpc3Quc3BsaWNlKGUsMSksbz0hMCl9fWVsc2UgcC5wdXNoKHtjb252ZXJzYXRpb25JRDplLGNvZGU6dC5yZXN1bHRDb2RlLG1lc3NhZ2U6dC5yZXN1bHRJbmZvfSl9KSwhMD09PW8mJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKX1yZXR1cm4gd24oe3N1Y2Nlc3NDb252ZXJzYXRpb25JRExpc3Q6ZCxmYWlsdXJlQ29udmVyc2F0aW9uSURMaXN0OnB9KX0pLmNhdGNoKGU9Pih0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57ci5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWdldExvY2FsQ29udkdyb3VwTGlzdCgpe3JldHVybiBfZS5sKGAke3RoaXMuX259LmdldExvY2FsQ29udkdyb3VwTGlzdCBwYWdpbmdTdGF0dXM6JHt0aGlzLl9wYWdpbmdTdGF0dXN9YCksdGhpcy5fcGFnaW5nU3RhdHVzPT09UnQuUkVKRUNURUQ/dGhpcy5nZXRSZW1vdGVDb252R3JvdXBMaXN0KCkudGhlbigoKT0+d24oWy4uLnRoaXMuX2NvbnZHcm91cE1hcC52YWx1ZXMoKV0pKTp4bihbLi4udGhpcy5fY29udkdyb3VwTWFwLnZhbHVlcygpXSl9Z2V0UmVtb3RlQ29udkdyb3VwTGlzdCgpe2NvbnN0IGU9dGhpcy5fbitcIi5nZXRSZW1vdGVDb252R3JvdXBMaXN0XCI7cmV0dXJuIHRoaXMuX3BhZ2luZ1N0YXR1cz1SdC5QRU5ESU5HLHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Ym8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX2dldE15VXNlcklEKCksc3RhcnRJbmRleDp0aGlzLl9zdGFydEluZGV4LHN0YXJ0VGltZTpkZSgpfX0pLnRoZW4odD0+e2NvbnN0e2NvbXBsZXRlRmxhZzpzLGNvbnRhY3RJdGVtOm8sbmV4dFN0YXJ0SW5kZXg6aT0wLGdyb3VwSXRlbTpufT10LmRhdGE7aWYodGhpcy5fc3RhcnRJbmRleD1pLF9lLmwoYCR7ZX0gY29tcGxldGVGbGFnOiR7c30gbmV4dFN0YXJ0SW5kZXg6JHtpfWApLGJlKG4pJiZuLmZvckVhY2goZT0+e2NvbnN0e2NvbnZHcm91cElEOnQsZ3JvdXBOYW1lOnN9PWU7dGhpcy5fY29udkdyb3VwTWFwLnNldCh0LHMpfSksYmUobykpe2xldCBlLHQ7by5mb3JFYWNoKHM9Pntjb25zdHtzdGFuZGFyZE1hcms6byxjdXN0b21EYXRhOmksY29udkdyb3VwSURMaXN0Om59PXM7aWYoZT10aGlzLl9jb25jYXRDb252ZXJzYXRpb25JRChzKSx0PXRoaXMuX2dldExvY2FsQ29udmVyc2F0aW9uKGUpLHQmJih0Lm1hcmtMaXN0PVR0KG8pLHQuY3VzdG9tRGF0YT1pfHxcIlwiLGJlKG4pKSl7Y29uc3QgZT1bXTtuLmZvckVhY2godD0+e3RoaXMuX2NvbnZHcm91cE1hcC5oYXModCkmJmUucHVzaCh0aGlzLl9jb252R3JvdXBNYXAuZ2V0KHQpKX0pLHQuY29udmVyc2F0aW9uR3JvdXBMaXN0PVsuLi5lXSxlLmxlbmd0aD0wfX0pfWlmKDA9PT1zKXJldHVybiB0aGlzLmdldFJlbW90ZUNvbnZHcm91cExpc3QoKTsxPT09cyYmKHRoaXMuX3BhZ2luZ1N0YXR1cz1SdC5SRVNPTFZFRCx0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCksdGhpcy5fZW1pdENvbnZHcm91cExpc3RVcGRhdGUoKSl9KS5jYXRjaCh0PT57dGhpcy5fcGFnaW5nU3RhdHVzPVJ0LlJFSkVDVEVELF9lLncoZStcIiBmYWlsZWQuIGVycm9yOlwiLHQpfSl9Y3JlYXRlQ29udkdyb3VwKGUpe2lmKCF0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuY2FuSVVzZShNLkNPTlZfR1JPVVApKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHM9dGhpcy5fbitcIi5jcmVhdGVDb252R3JvdXBcIjtfZS5sKHMrXCIgb3B0aW9uczpcIixlKTtjb25zdCBvPW5ldyBDbihcImNyZWF0ZUNvbnZHcm91cFwiKTtvLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpO2NvbnN0e2dyb3VwTmFtZTppLGNvbnZlcnNhdGlvbklETGlzdDpufT1lLHI9e2Zyb21BY2NvdW50OnRoaXMuX2dldE15VXNlcklEKCksaXRlbUxpc3Q6W3tncm91cE5hbWU6aSxjb250YWN0SXRlbTpbXX1dfSxhPVtdLHU9W107cmV0dXJuIG4uZm9yRWFjaChlPT50aGlzLl9oYXNMb2NhbENvbnZlcnNhdGlvbihlKT9pdChlKXx8bnQoZSk/dm9pZChpdChlKT9yLml0ZW1MaXN0WzBdLmNvbnRhY3RJdGVtLnB1c2goe3R5cGU6MSx0b0FjY291bnQ6ZS5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIil9KTpudChlKSYmci5pdGVtTGlzdFswXS5jb250YWN0SXRlbS5wdXNoKHt0eXBlOjIsZ3JvdXBJRDplLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpfSkpOih0aGlzLl9vbkNvbnZlcnNhdGlvbklESW52YWxpZCh1LGUpLCEwKToodGhpcy5fb25Db252ZXJzYXRpb25Ob3RGb3VuZCh1LGUpLCEwKSksdS5sZW5ndGg9PT1uLmxlbmd0aD94bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDphLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6dX0pOnRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6T28scmVxdWVzdERhdGE6cn0pLnRoZW4oZT0+e28uc2V0TmV0d29ya1R5cGUodGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwocytcIiBva1wiKTtjb25zdHtncm91cFJlc3VsdEl0ZW06dH09ZS5kYXRhLHtncm91cEl0ZW06bixyZXN1bHRJdGVtOnJ9PXRbMF07aWYoUGUobikmJih0aGlzLl9jb252R3JvdXBNYXAuc2V0KG4uY29udkdyb3VwSUQsbi5ncm91cE5hbWUpLHRoaXMuX2VtaXRDb252R3JvdXBMaXN0VXBkYXRlKCkpLGJlKHIpKXtsZXQgZSx0LHM9ITE7ci5mb3JFYWNoKG89PntlPXRoaXMuX2NvbmNhdENvbnZlcnNhdGlvbklEKG8uY29udGFjdEl0ZW0pLDA9PT1vLnJlc3VsdENvZGU/KGEucHVzaChlKSx0PXRoaXMuX2dldExvY2FsQ29udmVyc2F0aW9uKGUpLHQmJi0xPT09dC5jb252ZXJzYXRpb25Hcm91cExpc3QuaW5kZXhPZihpKSYmKHQuY29udmVyc2F0aW9uR3JvdXBMaXN0LnB1c2goaSkscz0hMCkpOnUucHVzaCh7Y29udmVyc2F0aW9uSUQ6ZSxjb2RlOm8ucmVzdWx0Q29kZSxtZXNzYWdlOm8ucmVzdWx0SW5mb30pfSksITA9PT1zJiYodGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpLHRoaXMuX2VtaXRDb252R3JvdXBMaXN0VXBkYXRlKCkpfXJldHVybiB3bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDphLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6dX0pfSkuY2F0Y2goZT0+KHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9ZGVsZXRlQ29udkdyb3VwKGUpe2lmKCF0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuY2FuSVVzZShNLkNPTlZfR1JPVVApKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHQ9dGhpcy5fbitcIi5kZWxldGVDb252R3JvdXBcIjtfZS5sKGAke3R9IGdyb3VwTmFtZToke2V9YCk7Y29uc3Qgcz1uZXcgQ24oXCJkZWxldGVDb252R3JvdXBcIik7cmV0dXJuIHMuc2V0TWVzc2FnZShlKSx0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkdvLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9nZXRNeVVzZXJJRCgpLGdyb3VwTmFtZTpbZV19fSkudGhlbihvPT57cy5zZXROZXR3b3JrVHlwZSh0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubCh0K1wiIG9rXCIpO2NvbnN0e2dyb3VwSXRlbTppfT1vLmRhdGE7aWYoYmUoaSkpe2xldCBlPSExO2kuZm9yRWFjaCh0PT57dGhpcy5fY29udkdyb3VwTWFwLmhhcyh0LmNvbnZHcm91cElEKSYmKHRoaXMuX2NvbnZHcm91cE1hcC5kZWxldGUodC5jb252R3JvdXBJRCksZT0hMCl9KSwhMD09PWUmJnRoaXMuX2VtaXRDb252R3JvdXBMaXN0VXBkYXRlKCl9dGhpcy5fZXJhc2VGcm9tQ29udmVyc2F0aW9uR3JvdXBMaXN0KFtlXSl9KS5jYXRjaChlPT4odGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LG9dKT0+e3Muc2V0RXJyb3IoZSx0LG8pLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1yZW5hbWVDb252R3JvdXAoZSl7aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5jYW5JVXNlKE0uQ09OVl9HUk9VUCkpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9VU0VfQ09NTUVSQ0lBTF9BQklMSVRZfSk7Y29uc3QgdD10aGlzLl9uK1wiLnJlbmFtZUNvbnZHcm91cFwiO19lLmwodCtcIiBvcHRpb25zOlwiLGUpO2NvbnN0IHM9bmV3IENuKFwicmVuYW1lQ29udkdyb3VwXCIpO3Muc2V0TWVzc2FnZShKU09OLnN0cmluZ2lmeShlKSk7Y29uc3R7b2xkTmFtZTpvLG5ld05hbWU6aX09ZTtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpVbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fZ2V0TXlVc2VySUQoKSx1cGRhdGVUeXBlOjEsdXBkYXRlR3JvdXA6e3VwZGF0ZUdyb3VwVHlwZToxLG9sZE5hbWU6byxuZXdOYW1lOml9fX0pLnRoZW4oZT0+e3Muc2V0TmV0d29ya1R5cGUodGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwodCtcIiBva1wiKTtjb25zdHt1cGRhdGVHcm91cFJlc3VsdDpufT1lLmRhdGEse2NvbnZHcm91cElEOnJ9PW47dGhpcy5fY29udkdyb3VwTWFwLnNldChyLGkpLHRoaXMuX2VtaXRDb252R3JvdXBMaXN0VXBkYXRlKCk7Y29uc3QgYT10aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCk7bGV0IHUsYyxsPSExO2EuZm9yRWFjaChlPT57dT1lLmNvbnZlcnNhdGlvbkdyb3VwTGlzdCxjPXUuaW5kZXhPZihvKSwtMSE9PWMmJih1LnNwbGljZShjLDEsaSksbD0hMCl9KSwhMD09PWwmJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKX0pLmNhdGNoKGU9Pih0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsb10pPT57cy5zZXRFcnJvcihlLHQsbykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWFkZENvbnZzVG9Hcm91cChlKXtpZighdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmNhbklVc2UoTS5DT05WX0dST1VQKSlyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX1VTRV9DT01NRVJDSUFMX0FCSUxJVFl9KTtjb25zdCBzPXRoaXMuX24rXCIuYWRkQ29udnNUb0dyb3VwXCI7X2UubChzK1wiIG9wdGlvbnM6XCIsZSk7Y29uc3Qgbz1uZXcgQ24oXCJhZGRDb252c1RvR3JvdXBcIik7by5zZXRNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpKTtjb25zdHtjb252ZXJzYXRpb25JRExpc3Q6aSxncm91cE5hbWU6bn09ZSxyPXtmcm9tQWNjb3VudDp0aGlzLl9nZXRNeVVzZXJJRCgpLHVwZGF0ZVR5cGU6MSx1cGRhdGVHcm91cDp7dXBkYXRlR3JvdXBUeXBlOjIsZ3JvdXBOYW1lOm4sdXBkYXRlSXRlbTpbXX19LGE9W10sdT1bXTtyZXR1cm4gaS5mb3JFYWNoKGU9PnRoaXMuX2hhc0xvY2FsQ29udmVyc2F0aW9uKGUpP2l0KGUpfHxudChlKT92b2lkKGl0KGUpP3IudXBkYXRlR3JvdXAudXBkYXRlSXRlbS5wdXNoKHtvcGVyYXRpb25UeXBlOjEsY29udGFjdEl0ZW06e3R5cGU6MSx0b0FjY291bnQ6ZS5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIil9fSk6bnQoZSkmJnIudXBkYXRlR3JvdXAudXBkYXRlSXRlbS5wdXNoKHtvcGVyYXRpb25UeXBlOjEsY29udGFjdEl0ZW06e3R5cGU6Mixncm91cElEOmUucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIil9fSkpOih0aGlzLl9vbkNvbnZlcnNhdGlvbklESW52YWxpZCh1LGUpLCEwKToodGhpcy5fb25Db252ZXJzYXRpb25Ob3RGb3VuZCh1LGUpLCEwKSksdS5sZW5ndGg9PT1pLmxlbmd0aD94bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDphLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6dX0pOnRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6a28scmVxdWVzdERhdGE6cn0pLnRoZW4oZT0+e28uc2V0TmV0d29ya1R5cGUodGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwocytcIiBva1wiKTtjb25zdHtjb250YWN0UmVzdWx0SXRlbTp0fT1lLmRhdGEudXBkYXRlR3JvdXBSZXN1bHQ7aWYoYmUodCkpe2xldCBlLHMsbz0hMTt0LmZvckVhY2godD0+e2U9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQodC5jb250YWN0SXRlbSksMD09PXQucmVzdWx0Q29kZT8ocz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxzJiYtMT09PXMuY29udmVyc2F0aW9uR3JvdXBMaXN0LmluZGV4T2YobikmJihzLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5wdXNoKG4pLGEucHVzaChlKSxvPSEwKSk6dS5wdXNoKHtjb252ZXJzYXRpb25JRDplLGNvZGU6dC5yZXN1bHRDb2RlLG1lc3NhZ2U6dC5yZXN1bHRJbmZvfSl9KSwhMD09PW8mJih0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCksdGhpcy5fZW1pdENvbnZJbkdyb3VwVXBkYXRlKG4pKX1yZXR1cm4gd24oe3N1Y2Nlc3NDb252ZXJzYXRpb25JRExpc3Q6YSxmYWlsdXJlQ29udmVyc2F0aW9uSURMaXN0OnV9KX0pLmNhdGNoKGU9Pih0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWRlbGV0ZUNvbnZzRnJvbUdyb3VwKGUpe2lmKCF0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuY2FuSVVzZShNLkNPTlZfR1JPVVApKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHM9dGhpcy5fbitcIi5kZWxldGVDb252c0Zyb21Hcm91cFwiO19lLmwocytcIiBvcHRpb25zOlwiLGUpO2NvbnN0IG89bmV3IENuKFwiZGVsZXRlQ29udnNGcm9tR3JvdXBcIik7by5zZXRNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGUpKTtjb25zdHtjb252ZXJzYXRpb25JRExpc3Q6aSxncm91cE5hbWU6bn09ZSxyPXtmcm9tQWNjb3VudDp0aGlzLl9nZXRNeVVzZXJJRCgpLHVwZGF0ZVR5cGU6MSx1cGRhdGVHcm91cDp7dXBkYXRlR3JvdXBUeXBlOjIsZ3JvdXBOYW1lOm4sdXBkYXRlSXRlbTpbXX19LGE9W10sdT1bXTtyZXR1cm4gaS5mb3JFYWNoKGU9PnRoaXMuX2hhc0xvY2FsQ29udmVyc2F0aW9uKGUpP2l0KGUpfHxudChlKT92b2lkKGl0KGUpP3IudXBkYXRlR3JvdXAudXBkYXRlSXRlbS5wdXNoKHtvcGVyYXRpb25UeXBlOjIsY29udGFjdEl0ZW06e3R5cGU6MSx0b0FjY291bnQ6ZS5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIil9fSk6bnQoZSkmJnIudXBkYXRlR3JvdXAudXBkYXRlSXRlbS5wdXNoKHtvcGVyYXRpb25UeXBlOjIsY29udGFjdEl0ZW06e3R5cGU6Mixncm91cElEOmUucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIil9fSkpOih0aGlzLl9vbkNvbnZlcnNhdGlvbklESW52YWxpZCh1LGUpLCEwKToodGhpcy5fb25Db252ZXJzYXRpb25Ob3RGb3VuZCh1LGUpLCEwKSksdS5sZW5ndGg9PT1pLmxlbmd0aD94bih7c3VjY2Vzc0NvbnZlcnNhdGlvbklETGlzdDphLGZhaWx1cmVDb252ZXJzYXRpb25JRExpc3Q6dX0pOnRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UG8scmVxdWVzdERhdGE6cn0pLnRoZW4oZT0+e28uc2V0TmV0d29ya1R5cGUodGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwocytcIiBva1wiKTtjb25zdHtjb250YWN0UmVzdWx0SXRlbTp0fT1lLmRhdGEudXBkYXRlR3JvdXBSZXN1bHQ7aWYoYmUodCkpe2xldCBlLHMsbz0hMTt0LmZvckVhY2godD0+e2lmKGU9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQodC5jb250YWN0SXRlbSksMD09PXQucmVzdWx0Q29kZSl7aWYocz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxzKXtjb25zdCB0PXMuY29udmVyc2F0aW9uR3JvdXBMaXN0LmluZGV4T2Yobik7LTEhPT10JiYocy5jb252ZXJzYXRpb25Hcm91cExpc3Quc3BsaWNlKHQsMSksYS5wdXNoKGUpLG89ITApfX1lbHNlIHUucHVzaCh7Y29udmVyc2F0aW9uSUQ6ZSxjb2RlOnQucmVzdWx0Q29kZSxtZXNzYWdlOnQucmVzdWx0SW5mb30pfSksITA9PT1vJiYodGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpLHRoaXMuX2VtaXRDb252SW5Hcm91cFVwZGF0ZShuKSl9cmV0dXJuIHduKHtzdWNjZXNzQ29udmVyc2F0aW9uSURMaXN0OmEsZmFpbHVyZUNvbnZlcnNhdGlvbklETGlzdDp1fSl9KS5jYXRjaChlPT4odGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e28uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1vbkNvbnZNYXJrVXBkYXRlZChlKXtpZihMdChlKSlyZXR1cm47bGV0IHQscztfZS5kKHRoaXMuX24rXCIub25Db252TWFya1VwZGF0ZWQgbWFya0l0ZW1MaXN0OlwiLGUpO2xldCBvPSExO2UuZm9yRWFjaChlPT57Y29uc3R7cmVjZW50Q29udGFjdEl0ZW06aSxvcHRUeXBlOm4sc3RhbmRhcmRNYXJrOnIsY3VzdG9tTWFyazphfT1lO2lmKHQ9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQoaSkscz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbih0KSxzKWlmKDE9PT1uKXtjb25zdCBlPVR0KHIpOyEwIT09ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4hMDtpZighZXx8IXQpcmV0dXJuITE7aWYoZS5sZW5ndGghPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IobGV0IHM9MCxvPWUubGVuZ3RoO3M8bztzKyspaWYoZVtzXSE9PXRbc10pcmV0dXJuITE7cmV0dXJuITB9KHMubWFya0xpc3QsZSkmJihzLm1hcmtMaXN0PWUsbz0hMCl9ZWxzZSAyPT09biYmcy5jdXN0b21EYXRhIT09YSYmdm9pZCAwIT09YSYmKHMuY3VzdG9tRGF0YT1hLG89ITApfSksITA9PT1vJiZ0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCl9b25Db252R3JvdXBDcmVhdGVkKGUpe19lLmQodGhpcy5fbitcIi5vbkNvbnZHcm91cENyZWF0ZWQgcmVzdWx0TGlzdDpcIixlKTtsZXQgdD0hMSxzPSExO2JlKGUpJiYoZS5mb3JFYWNoKGU9Pntjb25zdHtncm91cElEOm8sZ3JvdXBOYW1lOml9PWUubXNnR3JvdXBJdGVtO3RoaXMuX2NvbnZHcm91cE1hcC5nZXQobykhPT1pJiYodGhpcy5fY29udkdyb3VwTWFwLnNldChvLGkpLHM9ITApO2NvbnN0IG49ZS5tc2dSZWNlbnRDb250YWN0SXRlbTtpZihiZShuKSl7bGV0IGUscztuLmZvckVhY2gobz0+e2U9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQobykscz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxzJiYtMT09PXMuY29udmVyc2F0aW9uR3JvdXBMaXN0LmluZGV4T2YoaSkmJihzLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5wdXNoKGkpLHQ9ITApfSl9fSksITA9PT10JiZ0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCksITA9PT1zJiZ0aGlzLl9lbWl0Q29udkdyb3VwTGlzdFVwZGF0ZSgpKX1vbkNvbnZHcm91cERlbGV0ZWQoZSl7X2UuZCh0aGlzLl9uK1wiLm9uQ29udkdyb3VwRGVsZXRlZCBncm91cEl0ZW1MaXN0OlwiLGUpO2NvbnN0IHQ9W107aWYoYmUoZSkpe2xldCBzPSExO2UuZm9yRWFjaChlPT57Y29uc3R7Z3JvdXBJRDpvLGdyb3VwTmFtZTppfT1lO3RoaXMuX2NvbnZHcm91cE1hcC5oYXMobykmJih0aGlzLl9jb252R3JvdXBNYXAuZGVsZXRlKG8pLHM9ITAsdC5wdXNoKGkpKX0pLCEwPT09cyYmdGhpcy5fZW1pdENvbnZHcm91cExpc3RVcGRhdGUoKX10aGlzLl9lcmFzZUZyb21Db252ZXJzYXRpb25Hcm91cExpc3QodCl9X2VyYXNlRnJvbUNvbnZlcnNhdGlvbkdyb3VwTGlzdChlKXtpZihMdChlKSlyZXR1cm47dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLmZvckVhY2godD0+e3QuY29udmVyc2F0aW9uR3JvdXBMaXN0PXQuY29udmVyc2F0aW9uR3JvdXBMaXN0LmZpbHRlcih0PT4hZS5pbmNsdWRlcyh0KSl9KSx0aGlzLl9lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCl9b25Db252R3JvdXBOYW1lVXBkYXRlZChlKXtfZS5kKHRoaXMuX24rXCIub25Db252R3JvdXBOYW1lVXBkYXRlZCBvcHRpb25zOlwiLGUpO2NvbnN0e2dyb3VwSUQ6dCxncm91cE5hbWU6cyxvbGRHcm91cE5hbWU6b309ZTtpZih0aGlzLl9jb252R3JvdXBNYXAuZ2V0KHQpPT09cylyZXR1cm47dGhpcy5fY29udkdyb3VwTWFwLnNldCh0LHMpLHRoaXMuX2VtaXRDb252R3JvdXBMaXN0VXBkYXRlKCk7Y29uc3QgaT10aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCk7bGV0IG4scixhPSExO2kuZm9yRWFjaChlPT57bj1lLmNvbnZlcnNhdGlvbkdyb3VwTGlzdCxyPW4uaW5kZXhPZihvKSwtMSE9PXImJihuLnNwbGljZShyLDEscyksYT0hMCl9KSwhMD09PWEmJnRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKX1vbkNvbnZJbkdyb3VwVXBkYXRlZChlKXtfZS5kKHRoaXMuX24rXCIub25Db252SW5Hcm91cFVwZGF0ZWQgb3B0aW9uczpcIixlKTtjb25zdHtvbGRHcm91cE5hbWU6dCxyZWNlbnRDb250YWN0VXBkYXRlR3JvdXBJdGVtOnN9PWU7aWYoYmUocykpe2xldCBlLG8saSxuPSExO3MuZm9yRWFjaChzPT57Y29uc3R7Y29udGFjdE9wdFR5cGU6cixyZWNlbnRDb250YWN0SXRlbTphfT1zO2U9dGhpcy5fY29uY2F0Q29udmVyc2F0aW9uSUQoYSksbz10aGlzLl9nZXRMb2NhbENvbnZlcnNhdGlvbihlKSxvJiYoaT1vLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5pbmRleE9mKHQpLDE9PT1yPy0xPT09aSYmKG8uY29udmVyc2F0aW9uR3JvdXBMaXN0LnB1c2godCksbj0hMCk6Mj09PXImJi0xIT09aSYmKG8uY29udmVyc2F0aW9uR3JvdXBMaXN0LnNwbGljZShpLDEpLG49ITApKX0pLCEwPT09biYmKHRoaXMuX2VtaXRDb252ZXJzYXRpb25VcGRhdGUoKSx0aGlzLl9lbWl0Q29udkluR3JvdXBVcGRhdGUodCkpfX1vbkNvbnZBZGRlZFRvT3JEZWxldGVkRnJvbUdyb3VwKGUpe19lLmQodGhpcy5fbitcIi5vbkNvbnZBZGRlZFRvT3JEZWxldGVkRnJvbUdyb3VwIG9wdGlvbnM6XCIsZSk7Y29uc3R7bXNnUmVjZW50Q29udGFjdEl0ZW06dCxtc2dSZWNlbnRDb250YWN0VXBkYXRlQ29udGFjdEl0ZW06c309ZSxvPXRoaXMuX2NvbmNhdENvbnZlcnNhdGlvbklEKHQpLGk9dGhpcy5fZ2V0TG9jYWxDb252ZXJzYXRpb24obyk7aWYoaSYmYmUocykpe2xldCBlLHQ9ITE7cy5mb3JFYWNoKHM9Pntjb25zdHtncm91cE9wdFR5cGU6byxyZWNlbnRDb250YWN0R3JvdXBJdGVtOm59PXMse2dyb3VwTmFtZTpyfT1uO2U9aS5jb252ZXJzYXRpb25Hcm91cExpc3QuaW5kZXhPZihyKSwxPT09bz8tMT09PWUmJihpLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5wdXNoKHIpLHQ9ITApOjI9PT1vJiYtMSE9PWUmJihpLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5zcGxpY2UoZSwxKSx0PSEwKSwhMD09PXQmJnRoaXMuX2VtaXRDb252SW5Hcm91cFVwZGF0ZShyKX0pLCEwPT09dCYmdGhpcy5fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpfX1vbkNvbnZHcm91cExpc3RTeW5jZWQoZSl7YmUoZSkmJjAhPT1lLmxlbmd0aCYmKF9lLmwodGhpcy5fbitcIi5vbkNvbnZHcm91cExpc3RTeW5jZWQgZ3JvdXBJdGVtTGlzdDpcIixlKSxlLmZvckVhY2goZT0+e3RoaXMuX2NvbnZHcm91cE1hcC5zZXQoZS5jb252R3JvdXBJRCxlLmdyb3VwTmFtZSl9KSl9Z2V0Q29udkdyb3VwTGlzdEJ5SUQoZSl7aWYoTHQoZSkpcmV0dXJuO2NvbnN0IHQ9W107cmV0dXJuIGUuZm9yRWFjaChlPT57dGhpcy5fY29udkdyb3VwTWFwLmhhcyhlKSYmdC5wdXNoKHRoaXMuX2NvbnZHcm91cE1hcC5nZXQoZSkpfSksdH1fb25Db252ZXJzYXRpb25Ob3RGb3VuZChlLHQpe2UucHVzaCh7Y29udmVyc2F0aW9uSUQ6dCxjb2RlOm5uLkNPTlZFUlNBVElPTl9OT1RfRk9VTkQsbWVzc2FnZTp0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0RXJyb3JNZXNzYWdlKG5uLkNPTlZFUlNBVElPTl9OT1RfRk9VTkQpfSl9X29uQ29udmVyc2F0aW9uSURJbnZhbGlkKGUsdCl7ZS5wdXNoKHtjb252ZXJzYXRpb25JRDp0LGNvZGU6bm4uSU5WQUxJRF9DT05WRVJTQVRJT05fSUQsbWVzc2FnZTp0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZ2V0RXJyb3JNZXNzYWdlKG5uLklOVkFMSURfQ09OVkVSU0FUSU9OX0lEKX0pfV9nZXRGbGFnQml0KGUpe2NvbnN0IHQ9ZS50b1N0cmluZygyKSxzPXQubGVuZ3RoO2ZvcihsZXQgbz1zLTE7bz49MDtvLS0paWYoXCIxXCI9PT10W29dKXJldHVybiBzLW8tMX1fY29uY2F0Q29udmVyc2F0aW9uSUQoZSl7Y29uc3R7dHlwZTpzLHRvOm8sZ3JvdXBJRDppLHVzZXJJRDpufT1lO2xldCByO3JldHVybiAxPT09cz93ZShuKT93ZShvKXx8KHI9YCR7dC5DT05WX0MyQ30ke299YCk6cj1gJHt0LkNPTlZfQzJDfSR7bn1gOjI9PT1zJiYocj1gJHt0LkNPTlZfR1JPVVB9JHtpfWApLHJ9X2dldE15VXNlcklEKCl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXRNeVVzZXJJRCgpfV9pbnNlcnRDb252ZXJzYXRpb25Hcm91cChlLHQpe2NvbnN0IHM9dGhpcy5fZ2V0TG9jYWxDb252ZXJzYXRpb24oZSk7aWYocyl7Y29uc3QgZT1zLmNvbnZlcnNhdGlvbkdyb3VwTGlzdDstMT09PWUuaW5kZXhPZih0KSYmZS5wdXNoKHQpfX1fZ2V0TG9jYWxDb252ZXJzYXRpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5nZXRMb2NhbENvbnZlcnNhdGlvbihlKX1faGFzTG9jYWxDb252ZXJzYXRpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5oYXNMb2NhbENvbnZlcnNhdGlvbihlKX1fZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpe3RoaXMuX2NvbnZlcnNhdGlvbk1vZHVsZS5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX1fZW1pdENvbnZHcm91cExpc3RVcGRhdGUoKXt0aGlzLl9jb252ZXJzYXRpb25Nb2R1bGUuZW1pdE91dGVyRXZlbnQoZS5DT05WRVJTQVRJT05fR1JPVVBfTElTVF9VUERBVEVELFsuLi50aGlzLl9jb252R3JvdXBNYXAudmFsdWVzKCldKX1fZW1pdENvbnZJbkdyb3VwVXBkYXRlKHQpe2NvbnN0IHM9e2dyb3VwTmFtZTp0LGNvbnZlcnNhdGlvbkxpc3Q6W119LG89dGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpO3MuY29udmVyc2F0aW9uTGlzdD1vLmZpbHRlcihlPT5lLmNvbnZlcnNhdGlvbkdyb3VwTGlzdC5pbmNsdWRlcyh0KSksdGhpcy5fY29udmVyc2F0aW9uTW9kdWxlLmVtaXRPdXRlckV2ZW50KGUuQ09OVkVSU0FUSU9OX0lOX0dST1VQX1VQREFURUQscyl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fY29udkdyb3VwTWFwLmNsZWFyKCksdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3BhZ2luZ1N0YXR1cz1SdC5OT1RfU1RBUlR9fWNsYXNzIGxyIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIkNvbnZlcnNhdGlvbk1vZHVsZVwiLGpuLm1peGluKHRoaXMpLHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlcj1uZXcgSG4sdGhpcy5fbWVzc2FnZVJlbWluZEhhbmRsZXI9bmV3IHVyKHRoaXMpLHRoaXMuX2NvbnZHcm91cEhhbmRsZXI9bmV3IGNyKHRoaXMpLHRoaXMuc2luZ2x5TGlua2VkTGlzdD1uZXcgb3IoMTAwKSx0aGlzLl9wYWdpbmdTdGF0dXM9UnQuTk9UX1NUQVJULHRoaXMuX3BhZ2luZ1RpbWVTdGFtcD0wLHRoaXMuX3BhZ2luZ1N0YXJ0SW5kZXg9MCx0aGlzLl9wYWdpbmdQaW5uZWRUaW1lU3RhbXA9MCx0aGlzLl9wYWdpbmdQaW5uZWRTdGFydEluZGV4PTAsdGhpcy5fcGFnaW5nQ29udklETWFwPW5ldyBNYXAsdGhpcy5fY29udklERnJvbVVucmVhZERCTWFwPW5ldyBNYXAsdGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAsdGhpcy5fdG1wR3JvdXBMaXN0PVtdLHRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdD1bXSx0aGlzLl9wZWVyUmVhZFRpbWVNYXA9bmV3IE1hcCx0aGlzLl9jb21wbGV0ZWRNYXA9bmV3IE1hcCx0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXA9bmV3IE1hcCx0aGlzLl9yb2FtaW5nTWVzc2FnZVNlcXVlbmNlTWFwPW5ldyBNYXAsdGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXA9bmV3IE1hcCx0aGlzLl9jb252VG90YWxVbnJlYWRDb3VudD0wLHRoaXMuX3BhZ2luZ0dldENvc3RMaXN0PVtdLHRoaXMuX2luaXRMaXN0ZW5lcnMoKX1faW5pdExpc3RlbmVycygpe2NvbnN0IGU9dGhpcy5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpO2Uub24oS24sdGhpcy5faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdCx0aGlzKSxlLm9uKFluLHRoaXMuX29uUHJvZmlsZVVwZGF0ZWQsdGhpcyl9b25DaGVja1RpbWVyKGUpe2UlNjA9PTAmJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci50cmF2ZXJzYWwoKX1faW5pdExvY2FsQ29udmVyc2F0aW9uTGlzdCgpe2NvbnN0IGU9bmV3IENuKFwiX2luaXRMb2NhbENvbnZlcnNhdGlvbkxpc3RcIik7X2UubCh0aGlzLl9uK1wiLl9pbml0TG9jYWxDb252ZXJzYXRpb25MaXN0XCIpO2xldCBzPVwiXCI7Y29uc3Qgbz10aGlzLl9nZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLGk9dGhpcy5pc0ludGwoKTtpZihvKXtjb25zdCBlPW8ubGVuZ3RoO2ZvcihsZXQgcz0wO3M8ZTtzKyspe2NvbnN0IGU9b1tzXTtpZihlKXtpZihlLmNvbnZlcnNhdGlvbklEPT09dC5DT05WX0MyQytcIkBUTFMjRVJST1JcInx8ZS5jb252ZXJzYXRpb25JRD09PXQuQ09OVl9DMkMrXCJAVExTI05PVF9GT1VORFwiKWNvbnRpbnVlO2lmKGUuZ3JvdXBQcm9maWxlKXtjb25zdCB0PWUuZ3JvdXBQcm9maWxlLnR5cGU7aWYoZXQodCkpY29udGludWV9fXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zZXQob1tzXS5jb252ZXJzYXRpb25JRCxuZXcgYXIob1tzXSxpKSl9dGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSxzPVwiY291bnQ6XCIrZX1lbHNlIHM9XCJjb3VudDowXCI7ZS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UocykuZW5kKCksdGhpcy5nZXRNb2R1bGUobHMpfHx0aGlzLnRyaWdnZXJSZWFkeSgpLHRoaXMucmVhZHkoKCk9Pnt0aGlzLl90bXBHcm91cExpc3QubGVuZ3RoPjAmJih0aGlzLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZSh0aGlzLl90bXBHcm91cExpc3QpLHRoaXMuX3RtcEdyb3VwTGlzdC5sZW5ndGg9MCl9KSx0aGlzLnN5bmNDb252ZXJzYXRpb25MaXN0KCl9b25NZXNzYWdlU2VudChlKXt0aGlzLl9vblNlbmRPclJlY2VpdmVNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDplLmNvbnZlcnNhdGlvbk9wdGlvbnNMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX1vbk5ld01lc3NhZ2UoZSl7dGhpcy5fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlKX1fb25TZW5kT3JSZWNlaXZlTWVzc2FnZShlKXtjb25zdHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6bz0hMCxpc1VucmVhZEMyQ01lc3NhZ2U6aT0hMSx1cGRhdGVVbnJlYWRDb3VudDpuPSEwfT1lO2lmKCF0aGlzLl9pc1JlYWR5KXJldHVybiB2b2lkIHRoaXMucmVhZHkoKCk9Pnt0aGlzLl9vblNlbmRPclJlY2VpdmVNZXNzYWdlKGUpfSk7aWYoMD09PXMubGVuZ3RoKXJldHVybjt0aGlzLl9nZXRDMkNQZWVyUmVhZFRpbWUocyksdGhpcy5fdXBkYXRlTG9jYWxDb252ZXJzYXRpb25MaXN0KHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6byxpc1VucmVhZEMyQ01lc3NhZ2U6aSxpc0Zyb21HZXRDb252ZXJzYXRpb25zOiExLHVwZGF0ZVVucmVhZENvdW50Om59KSxvfHwodGhpcy5fY29udklERnJvbVVucmVhZERCTWFwPW5ldyBNYXAoWy4uLnRoaXMuX2NvbnZJREZyb21VbnJlYWREQk1hcCwuLi5zLm1hcChlPT5bZS5jb252ZXJzYXRpb25JRCwxXSldKSx0aGlzLl9kaWZmQW5kRGVsZXRlQ29udmVyc2F0aW9uKCkpLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCk7cy5maWx0ZXIoZT0+ZS50eXBlPT09dC5DT05WX1RPUElDKS5sZW5ndGg+MHx8dGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCl9dXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKGUpe2lmKGJlKGUpJiYwPT09ZS5sZW5ndGgpcmV0dXJuO2lmKDA9PT10aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSlyZXR1cm4gdm9pZCh0aGlzLl90bXBHcm91cExpc3Q9ZSk7bGV0IHQ9ITE7ZS5mb3JFYWNoKGU9Pntjb25zdCBzPVwiR1JPVVBcIitlLmdyb3VwSUQ7aWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhzKSl7dD0hMDtjb25zdCBvPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQocyk7by5ncm91cFByb2ZpbGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSksby5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U8ZS5uZXh0TWVzc2FnZVNlcSYmKG8ubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlPWUubmV4dE1lc3NhZ2VTZXEtMSksby5zdWJUeXBlfHwoby5zdWJUeXBlPWUudHlwZSl9fSksdCYmdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX1fdXBkYXRlQ29udmVyc2F0aW9uVXNlclByb2ZpbGUoe2RhdGE6ZX0pe2UuZm9yRWFjaChlPT57Y29uc3QgdD1cIkMyQ1wiK2UudXNlcklEO3RoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXModCkmJih0aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHQpLnVzZXJQcm9maWxlPWUpfSksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX1vbk1lc3NhZ2VSZXZva2VkKGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm47bGV0IHM9bnVsbCxvPSExO2NvbnN0IGk9W107ZS5mb3JFYWNoKGU9PntzPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZS5jb252ZXJzYXRpb25JRCkscyYmKHMudHlwZT09PXQuQ09OVl9UT1BJQz9pLnB1c2goZSk6KHMucmVkdWNlVW5yZWFkQ291bnQoKSYmKG89ITApLHMuaXNMYXN0TWVzc2FnZVJldm9rZWQoe3NlcXVlbmNlOmUuc2VxdWVuY2UsdGltZTplLnRpbWV9KSYmKHMuc2V0TGFzdE1lc3NhZ2VSZXZva2VkKCEwKSxzLnNldExhc3RNZXNzYWdlUmV2b2tlcihlLnJldm9rZXIpLG89ITApKSl9KTt0aGlzLmdldE1vZHVsZShncykub25NZXNzYWdlUmV2b2tlZChpKSxvJiYodGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSx0aGlzLmVtaXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudFVwZGF0ZSgpKX1pc0xhc3RNZXNzYWdlUmV2b2tlZChlKXtsZXQgcz0hMTtjb25zdHtjb252ZXJzYXRpb25JRDpvLHNlcXVlbmNlOmksdGltZTpufT1lLHI9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChvKTtpZihyKWlmKHIudHlwZT09PXQuQ09OVl9UT1BJQyl7cz10aGlzLmdldE1vZHVsZShncykuaXNMYXN0TWVzc2FnZVJldm9rZWQoe3RvcGljSUQ6by5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKSxzZXF1ZW5jZTppfSl9ZWxzZSBzPXIuaXNMYXN0TWVzc2FnZVJldm9rZWQoe3NlcXVlbmNlOmksdGltZTpufSk7cmV0dXJuIF9lLmwoYCR7dGhpcy5fbn0uaXNMYXN0TWVzc2FnZVJldm9rZWQgb3B0aW9uczoke0pTT04uc3RyaW5naWZ5KGUpfSByZXQ6JHtzfWApLHN9b25NZXNzYWdlRGVsZXRlZChlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuO2xldCBzPW51bGw7ZS5mb3JFYWNoKGU9PntzPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2UoZS5jb252ZXJzYXRpb25JRCxlLklEKSxzJiYocy5pc0RlbGV0ZWQ9ITApLGUhPT1zJiYoZS5pc0RlbGV0ZWQ9ITApfSk7Y29uc3Qgbz1lWzBdLmNvbnZlcnNhdGlvbklELGk9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3Qobyk7bGV0IG49e307Zm9yKGxldCB0PWkubGVuZ3RoLTE7dD49MDt0LS0paWYoIWlbdF0uaXNEZWxldGVkKXtuPWlbdF07YnJlYWt9Y29uc3Qgcj10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KG8pO2lmKCFyKXJldHVybjtsZXQgYT0hMTtyLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZT09PW4uc2VxdWVuY2UmJnIubGFzdE1lc3NhZ2UubGFzdFRpbWU9PT1uLnRpbWV8fChMdChuKSYmKG49dm9pZCAwKSxyLnVwZGF0ZUxhc3RNZXNzYWdlKG4pLHIudHlwZSE9PXQuQ09OVl9UT1BJQyYmKGE9ITApLF9lLmwoYCR7dGhpcy5fbn0ub25NZXNzYWdlRGVsZXRlZC4gdXBkYXRlIGNvbnZlcnNhdGlvbklEOiR7b30gd2l0aCBsYXN0TWVzc2FnZTpgLHIubGFzdE1lc3NhZ2UpKSxvLnN0YXJ0c1dpdGgodC5DT05WX0MyQykmJnRoaXMudXBkYXRlVW5yZWFkQ291bnQobyksYSYmdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKX1vbk1lc3NhZ2VNb2RpZmllZChzKXtjb25zdHtjb252ZXJzYXRpb25UeXBlOm8sZnJvbTppLHRvOm4sdGltZTpyLHNlcXVlbmNlOmEsZWxlbWVudHM6dSxjbG91ZEN1c3RvbURhdGE6YyxtZXNzYWdlVmVyc2lvbjpsfT1zO2xldCBkPWAke299JHtufWA7bj09PXRoaXMuZ2V0TXlVc2VySUQoKSYmbz09PXQuQ09OVl9DMkMmJihkPWAke299JHtpfWApO2NvbnN0e2lzVXBkYXRlZDpwLG1lc3NhZ2U6aH09dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm9uTWVzc2FnZU1vZGlmaWVkKGQscyk7ITA9PT1wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KGUuTUVTU0FHRV9NT0RJRklFRCxbaF0pO2NvbnN0IGc9dGhpcy5faXNUb3BpY0NvbnZlcnNhdGlvbihkKTtpZihfZS5sKGAke3RoaXMuX259Lm9uTWVzc2FnZU1vZGlmaWVkIGlzVXBkYXRlZDoke3B9IGlzVG9waWNNZXNzYWdlOiR7Z30gZnJvbToke2l9IHRvOiR7bn1gKSxnKXt0aGlzLmdldE1vZHVsZShncykub25NZXNzYWdlTW9kaWZpZWQocyl9ZWxzZXtjb25zdCBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZCk7aWYoZSl7Y29uc3QgdD1lLmxhc3RNZXNzYWdlO19lLmQodGhpcy5fbi5vbk1lc3NhZ2VNb2RpZmllZCtcIiBsYXN0TWVzc2FnZTpcIixKU09OLnN0cmluZ2lmeSh0KSxcIm9wdGlvbnM6XCIsSlNPTi5zdHJpbmdpZnkocykpLHQmJnQubGFzdFRpbWU9PT1yJiZ0Lmxhc3RTZXF1ZW5jZT09PWEmJnQudmVyc2lvbiE9PWwmJih0LnR5cGU9dVswXS50eXBlLHQucGF5bG9hZD11WzBdLmNvbnRlbnQsdC5tZXNzYWdlRm9yU2hvdz1JdCh0LnR5cGUsdC5wYXlsb2FkLHRoaXMuaXNJbnRsKCkpLHQuY2xvdWRDdXN0b21EYXRhPWMsdC52ZXJzaW9uPWwsdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSl9fXJldHVybiBofW9uTmV3R3JvdXBBdFRpcHMoZSl7Y29uc3QgdD1lLmRhdGFMaXN0O2xldCBzPW51bGw7dC5mb3JFYWNoKGU9PntlLmdyb3VwQXRUaXBzP3M9ZS5ncm91cEF0VGlwczplLmVsZW1lbnRzP3M9ey4uLmUuZWxlbWVudHMsc3luYzohMH06ZS5ncm91cEF0VHlwZSYmKHM9ey4uLmUsc3luYzohMH0pLHMuX19yYW5kb209ZS5yYW5kb20scy5fX3NlcXVlbmNlPWUuY2xpZW50U2VxdWVuY2UsdGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0LnB1c2gocyl9KSxfZS5kKGAke3RoaXMuX259Lm9uTmV3R3JvdXBBdFRpcHMgaXNSZWFkeToke3RoaXMuX2lzUmVhZHl9YCx0aGlzLl90bXBHcm91cEF0VGlwc0xpc3QpLHRoaXMuX2lzUmVhZHkmJnRoaXMuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpfV9oYW5kbGVHcm91cEF0VGlwc0xpc3QoKXtpZigwPT09dGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0Lmxlbmd0aClyZXR1cm47bGV0IGU9ITE7dGhpcy5fdG1wR3JvdXBBdFRpcHNMaXN0LmZvckVhY2gocz0+e2NvbnN0e2dyb3VwSUQ6byxmcm9tOmksdG9waWNJRDpuLHN5bmM6cj0hMX09cztpZihpIT09dGhpcy5nZXRNeVVzZXJJRCgpKWlmKHdlKG4pKXtjb25zdCBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoYCR7dC5DT05WX0dST1VQfSR7b31gKTtpJiYoaS51cGRhdGVHcm91cEF0SW5mb0xpc3QocyksZT0hMCl9ZWxzZXtjb25zdCBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoYCR7dC5DT05WX0dST1VQfSR7bn1gKTtpZihlKXtlLnVwZGF0ZUdyb3VwQXRJbmZvTGlzdChzKTtjb25zdCB0PXRoaXMuZ2V0TW9kdWxlKGdzKSx7Z3JvdXBBdEluZm9MaXN0Om99PWU7dC5vbkNvbnZlcnNhdGlvblByb3h5KHt0b3BpY0lEOm4sZ3JvdXBBdEluZm9MaXN0Om99KX1pZihMdChlKSYmcil7dGhpcy51cGRhdGVUb3BpY0NvbnZlcnNhdGlvbihbe2NvbnZlcnNhdGlvbklEOmAke3QuQ09OVl9HUk9VUH0ke259YCx0eXBlOnQuQ09OVl9UT1BJQ31dKTt0aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGAke3QuQ09OVl9HUk9VUH0ke259YCkudXBkYXRlR3JvdXBBdEluZm9MaXN0KHMpfX19KSxlJiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHRoaXMuX3RtcEdyb3VwQXRUaXBzTGlzdC5sZW5ndGg9MH1fZ2V0QzJDUGVlclJlYWRUaW1lKGUpe2NvbnN0IHM9W107aWYoZS5mb3JFYWNoKGU9Pnt0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUuY29udmVyc2F0aW9uSUQpfHxlLnR5cGUhPT10LkNPTlZfQzJDfHxzLnB1c2goZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIikpfSkscy5sZW5ndGg+MCl7X2UuZChgJHt0aGlzLl9ufS5fZ2V0QzJDUGVlclJlYWRUaW1lIHVzZXJJRExpc3Q6JHtzfWApO2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUobHMpO2UmJmUuZ2V0UmVtb3RlUGVlclJlYWRUaW1lKHMpfX1fZ2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoTXMpLmdldEl0ZW0oXCJjb252ZXJzYXRpb25NYXBcIil9X3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCl7Y29uc3QgZT10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLmZpbHRlcihlPT5lLnR5cGU9PT10LkNPTlZfQzJDfHxlLnR5cGU9PT10LkNPTlZfR1JPVVAmJmUubGFzdE1lc3NhZ2UudHlwZSE9PXQuTVNHX0dSUF9USVApLnNsaWNlKDAsMjApLm1hcChlPT4oe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsdHlwZTplLnR5cGUsc3ViVHlwZTplLnN1YlR5cGUsbGFzdE1lc3NhZ2U6ZS5sYXN0TWVzc2FnZSxncm91cFByb2ZpbGU6ZS5ncm91cFByb2ZpbGUsdXNlclByb2ZpbGU6ZS51c2VyUHJvZmlsZX0pKTt0aGlzLmdldE1vZHVsZShNcykuc2V0SXRlbShcImNvbnZlcnNhdGlvbk1hcFwiLGUpfWVtaXRDb252ZXJzYXRpb25VcGRhdGUodD0hMCxzPSEwKXtjb25zdCBvPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCk7aWYocyl7Y29uc3QgZT10aGlzLmdldE1vZHVsZShkcyk7ZSYmZS51cGRhdGVHcm91cExhc3RNZXNzYWdlKG8pfXQmJnRoaXMuZW1pdE91dGVyRXZlbnQoZS5DT05WRVJTQVRJT05fTElTVF9VUERBVEVEKX1nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKXtyZXR1cm5bLi4udGhpcy5fY29udmVyc2F0aW9uTWFwLnZhbHVlcygpXS5maWx0ZXIoZT0+ZS50eXBlIT09dC5DT05WX1RPUElDKX1nZXRMb2NhbENvbnZlcnNhdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChlKX1oYXNMb2NhbENvbnZlcnNhdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKX1nZXRMb2NhbE9sZGVzdE1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE9sZGVzdE1lc3NhZ2UoZSl9c3luY0NvbnZlcnNhdGlvbkxpc3QoKXtjb25zdCBlPW5ldyBDbihcInN5bmNDb252ZXJzYXRpb25MaXN0XCIpO3JldHVybiB0aGlzLl9wYWdpbmdTdGF0dXM9PT1SdC5OT1RfU1RBUlQmJnRoaXMuX2NvbnZlcnNhdGlvbk1hcC5jbGVhcigpLHRoaXMuX3BhZ2luZ0dldENvbnZlcnNhdGlvbkxpc3QoKS50aGVuKHQ9Pntjb25zdCBzPWZ1bmN0aW9uKGUpe2lmKCFiZShlKXx8MD09PWUubGVuZ3RoKXJldHVybjtsZXQgdD0wO3JldHVybiBlLmZvckVhY2goZT0+e3QrPWV9KSwodC9lLmxlbmd0aCkudG9GaXhlZCgwKX0odGhpcy5fcGFnaW5nR2V0Q29zdExpc3QpO3JldHVybiBfZS5sKGAke3RoaXMuX259LnN5bmNDb252ZXJzYXRpb25MaXN0LiBzdW0gJHtmdW5jdGlvbihlKXtpZighYmUoZSl8fDA9PT1lLmxlbmd0aClyZXR1cm47bGV0IHQ9MDtyZXR1cm4gZS5mb3JFYWNoKGU9Pnt0Kz1lfSksdC50b0ZpeGVkKDApfSh0aGlzLl9wYWdpbmdHZXRDb3N0TGlzdCl9IG1zLCBhdmVyYWdlICR7c30gbXNgKSx0aGlzLl9wYWdpbmdHZXRDb3N0TGlzdC5sZW5ndGg9MCx0aGlzLl9wYWdpbmdTdGF0dXM9UnQuUkVTT0xWRUQsdGhpcy5fZGlmZkFuZERlbGV0ZUNvbnZlcnNhdGlvbigpLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSksdGhpcy5fc2V0U3RvcmFnZUNvbnZlcnNhdGlvbkxpc3QoKSx0aGlzLl9oYW5kbGVDMkNQZWVyUmVhZFRpbWUoKSx0aGlzLl9wYXRjaENvbnZlcnNhdGlvblByb3BlcnRpZXMoKSxlLnNldE1lc3NhZ2UodGhpcy5fY29udmVyc2F0aW9uTWFwLnNpemUpLnNldE1vcmVNZXNzYWdlKHMpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksdH0pLmNhdGNoKHQ9Pih0aGlzLl9wYWdpbmdTdGF0dXM9UnQuUkVKRUNURUQsZS5zZXRNZXNzYWdlKHRoaXMuX3BhZ2luZ1RpbWVTdGFtcCksdGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbcyxvXSk9PntlLnNldEVycm9yKHQscyxvKS5lbmQoKX0pLFZuKHQpKSl9X2RpZmZBbmREZWxldGVDb252ZXJzYXRpb24oKXtpZih0aGlzLl9pc1N5bmNDb21wbGV0ZWQoKSl7Y29uc3QgZT1bXTt0aGlzLl9jb252ZXJzYXRpb25NYXAuZm9yRWFjaCgodCxzKT0+eyF0aGlzLl9wYWdpbmdDb252SURNYXAuaGFzKHMpJiZ0aGlzLl9jb252SURGcm9tVW5yZWFkREJNYXAuaGFzKHMpJiYodGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShzKSxlLnB1c2gocykpfSksX2UubChgJHt0aGlzLl9ufS5fZGlmZkFuZERlbGV0ZUNvbnZlcnNhdGlvbiBsaXN0OiR7ZX1gKX19X3BhdGNoQ29udmVyc2F0aW9uUHJvcGVydGllcygpe2NvbnN0IGU9RGF0ZS5ub3coKSx0PXRoaXMuY2hlY2tBbmRQYXRjaFJlbWFyaygpLHM9dGhpcy5fbWVzc2FnZVJlbWluZEhhbmRsZXIuZ2V0QzJDTWVzc2FnZVJlbWluZFR5cGUoKSxvPXRoaXMuZ2V0TW9kdWxlKGRzKS5nZXRHcm91cExpc3QoKTtQcm9taXNlLmFsbChbdCxzLG9dKS50aGVuKCgpPT57Y29uc3QgdD1EYXRlLm5vdygpLWU7X2UubChgJHt0aGlzLl9ufS5fcGF0Y2hDb252ZXJzYXRpb25Qcm9wZXJ0aWVzIG9rLiBjb3N0ICR7dH0gbXNgKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHRoaXMuZW1pdFRvdGFsVW5yZWFkTWVzc2FnZUNvdW50VXBkYXRlKCl9KX1fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdCgpe2NvbnN0IGU9dGhpcy5fbitcIi5fcGFnaW5nR2V0Q29udmVyc2F0aW9uTGlzdFwiO19lLmwoYCR7ZX0gdGltZVN0YW1wOiR7dGhpcy5fcGFnaW5nVGltZVN0YW1wfSBzdGFydEluZGV4OiR7dGhpcy5fcGFnaW5nU3RhcnRJbmRleH0gcGlubmVkVGltZVN0YW1wOiR7dGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wfSBwaW5uZWRTdGFydEluZGV4OiR7dGhpcy5fcGFnaW5nUGlubmVkU3RhcnRJbmRleH1gKTtjb25zdCB0PURhdGUubm93KCk7cmV0dXJuIHRoaXMuX3BhZ2luZ1N0YXR1cz1SdC5QRU5ESU5HLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkRvLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLmdldE15VXNlcklEKCksdGltZVN0YW1wOnRoaXMuX3BhZ2luZ1RpbWVTdGFtcCxzdGFydEluZGV4OnRoaXMuX3BhZ2luZ1N0YXJ0SW5kZXgscGlubmVkVGltZVN0YW1wOnRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcCxwaW5uZWRTdGFydEluZGV4OnRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXgsb3JkZXJUeXBlOjF9fSkudGhlbihzPT57Y29uc3R7Y29tcGxldGVGbGFnOm8sY29udmVyc2F0aW9uczppPVtdLHRpbWVTdGFtcDpuLHN0YXJ0SW5kZXg6cixwaW5uZWRUaW1lU3RhbXA6YSxwaW5uZWRTdGFydEluZGV4OnUsZ3JvdXBJdGVtOmN9PXMuZGF0YSxsPURhdGUubm93KCktdDtpZih0aGlzLl9wYWdpbmdHZXRDb3N0TGlzdC5wdXNoKGwpLF9lLmwoYCR7ZX0gb2suIGNvbXBsZXRlRmxhZzoke299IGNvdW50OiR7aS5sZW5ndGh9IGNvc3QgJHtsfSBtc2ApLHRoaXMuX2NvbnZHcm91cEhhbmRsZXIub25Db252R3JvdXBMaXN0U3luY2VkKGMpLGkubGVuZ3RoPjApe2NvbnN0IGU9dGhpcy5fZ2V0Q29udmVyc2F0aW9uT3B0aW9ucyhpKTt0aGlzLl9wYWdpbmdDb252SURNYXA9bmV3IE1hcChbLi4udGhpcy5fcGFnaW5nQ29udklETWFwLC4uLmUubWFwKGU9PltlLmNvbnZlcnNhdGlvbklELDFdKV0pLHRoaXMuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6ZSxpc0Zyb21HZXRDb252ZXJzYXRpb25zOiEwfSksdGhpcy5pc0xvZ2dlZEluKCkmJnRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSgpfWlmKCF0aGlzLl9pc1JlYWR5KXtpZighdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIHhuKCk7dGhpcy50cmlnZ2VyUmVhZHkoKX1yZXR1cm4gdGhpcy5fcGFnaW5nVGltZVN0YW1wPW4sdGhpcy5fcGFnaW5nU3RhcnRJbmRleD1yLHRoaXMuX3BhZ2luZ1Bpbm5lZFRpbWVTdGFtcD1hLHRoaXMuX3BhZ2luZ1Bpbm5lZFN0YXJ0SW5kZXg9dSwxIT09bz90aGlzLl9wYWdpbmdHZXRDb252ZXJzYXRpb25MaXN0KCk6KHRoaXMuX2hhbmRsZUdyb3VwQXRUaXBzTGlzdCgpLHRoaXMuX2NvbnZHcm91cEhhbmRsZXIuZ2V0UmVtb3RlQ29udkdyb3VwTGlzdCgpLHhuKCkpfSkuY2F0Y2godD0+e3Rocm93IHRoaXMuaXNMb2dnZWRJbigpJiYodGhpcy5faXNSZWFkeXx8KF9lLncoZStcIiBmYWlsZWQuIGVycm9yOlwiLHQpLHRoaXMudHJpZ2dlclJlYWR5KCkpKSx0fSl9X3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdChlKXtjb25zdHtpc0Zyb21HZXRDb252ZXJzYXRpb25zOnQsaXNJbnN0YW50TWVzc2FnZTpzfT1lLG89RGF0ZS5ub3coKTtsZXQgaT17dG9CZVVwZGF0ZWRDb252ZXJzYXRpb25MaXN0OltdLG5ld0NvbnZlcnNhdGlvbkxpc3Q6W119O2k9dGhpcy5fZ2V0VG1wQ29udmVyc2F0aW9uTGlzdE1hcHBpbmcoZSksdGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAodGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3QoWy4uLmkudG9CZVVwZGF0ZWRDb252ZXJzYXRpb25MaXN0LC4uLnRoaXMuX2NvbnZlcnNhdGlvbk1hcF0pKSx0fHwodGhpcy5fdXBkYXRlVXNlck9yR3JvdXBQcm9maWxlKGkubmV3Q29udmVyc2F0aW9uTGlzdCkscyYmdGhpcy5lbWl0VG90YWxVbnJlYWRNZXNzYWdlQ291bnRVcGRhdGUoKSksX2UuZChgJHt0aGlzLl9ufS5fdXBkYXRlTG9jYWxDb252ZXJzYXRpb25MaXN0IGNvc3QgJHtEYXRlLm5vdygpLW99IG1zYCl9X2dldFRtcENvbnZlcnNhdGlvbkxpc3RNYXBwaW5nKGUpe2NvbnN0e2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnMsaXNGcm9tR2V0Q29udmVyc2F0aW9uczpvLGlzSW5zdGFudE1lc3NhZ2U6aSxpc1VucmVhZEMyQ01lc3NhZ2U6bj0hMSx1cGRhdGVVbnJlYWRDb3VudDpyfT1lLGE9W10sdT1bXSxjPXRoaXMuZ2V0TW9kdWxlKGRzKSxsPXRoaXMuZ2V0TW9kdWxlKHBzKSxkPXRoaXMuaXNJbnRsKCk7Zm9yKGxldCBoPTAsZz1zLmxlbmd0aDtoPGc7aCsrKXtjb25zdCBlPW5ldyBhcihzW2hdLGQpLHtjb252ZXJzYXRpb25JRDpwfT1lO2lmKHAhPT10LkNPTlZfQzJDK1wiQFRMUyNFUlJPUlwiJiZwIT09dC5DT05WX0MyQytcIkBUTFMjTk9UX0ZPVU5EXCIpaWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhwKSl7Y29uc3QgdT10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHApLGM9W1widW5yZWFkQ291bnRcIixcImFsbG93VHlwZVwiLFwiYWRtaW5Gb3JiaWRUeXBlXCIsXCJwYXlsb2FkXCIsXCJpc1Bpbm5lZFwiXTshMT09PWkmJmMucHVzaChcImxhc3RNZXNzYWdlXCIpO2NvbnN0IGw9c1toXS5sYXN0TWVzc2FnZSxkPSF3ZShsKTtkfHxzW2hdLnR5cGU9PT10LkNPTlZfVE9QSUN8fHRoaXMuX29uTGFzdE1lc3NhZ2VOb3RFeGlzdChzW2hdKSx3ZShpKSYmZCYmbnVsbD09PXUubGFzdE1lc3NhZ2UucGF5bG9hZCYmKHUubGFzdE1lc3NhZ2UucGF5bG9hZD1sLnBheWxvYWQpLEx0KHUubGFzdE1lc3NhZ2UucmV2b2tlcil8fCh1Lmxhc3RNZXNzYWdlLnJldm9rZXI9bnVsbCk7QmUodSxlLGMsW251bGwsdm9pZCAwLFwiXCIsMCxOYU5dKSwhMD09PXImJnUudXBkYXRlVW5yZWFkQ291bnQoe25leHRVbnJlYWRDb3VudDplLnVucmVhZENvdW50LGlzRnJvbUdldENvbnZlcnNhdGlvbnM6byxpc1VucmVhZEMyQ01lc3NhZ2U6bn0pLGkmJmQmJihsLnBheWxvYWQmJih1Lmxhc3RNZXNzYWdlLnBheWxvYWQ9bC5wYXlsb2FkKSx1LnR5cGU9PT10LkNPTlZfR1JPVVAmJih1Lmxhc3RNZXNzYWdlLm5hbWVDYXJkPWwubmFtZUNhcmQsdS5sYXN0TWVzc2FnZS5uaWNrPWwubmljaykpLGQmJnUubGFzdE1lc3NhZ2UuY2xvdWRDdXN0b21EYXRhIT09bC5jbG91ZEN1c3RvbURhdGEmJih1Lmxhc3RNZXNzYWdlLmNsb3VkQ3VzdG9tRGF0YT1sLmNsb3VkQ3VzdG9tRGF0YXx8XCJcIiksdGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShwKSxhLnB1c2goW3AsdV0pfWVsc2V7aWYoZS50eXBlPT09dC5DT05WX0dST1VQJiZjKXtjb25zdHtncm91cElEOnR9PWUuZ3JvdXBQcm9maWxlLHM9Yy5nZXRMb2NhbEdyb3VwUHJvZmlsZSh0KTtzJiYoZS5ncm91cFByb2ZpbGU9cywhMD09PXImJmUudXBkYXRlVW5yZWFkQ291bnQoe25leHRVbnJlYWRDb3VudDowfSkpfWVsc2UgaWYoZS50eXBlPT09dC5DT05WX0MyQyl7Y29uc3Qgcz1wLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKTtsJiZsLmlzTXlGcmllbmQocykmJihlLnJlbWFyaz1sLmdldEZyaWVuZFJlbWFyayhzKSl9dS5wdXNoKGUpLGEucHVzaChbcCxlXSl9fWNvbnN0IHA9dGhpcy5nZXRNb2R1bGUoZ3MpO3JldHVybiBhLmZvckVhY2goZT0+e2lmKGVbMV0udHlwZT09PXQuQ09OVl9UT1BJQyl7Y29uc3R7Y29udmVyc2F0aW9uSUQ6cyx1bnJlYWRDb3VudDpvLGdyb3VwQXRJbmZvTGlzdDppfT1lWzFdO3Aub25Db252ZXJzYXRpb25Qcm94eSh7dG9waWNJRDpzLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpLHVucmVhZENvdW50Om8sZ3JvdXBBdEluZm9MaXN0Okx0KGkpP3ZvaWQgMDppfSl9fSkse3RvQmVVcGRhdGVkQ29udmVyc2F0aW9uTGlzdDphLG5ld0NvbnZlcnNhdGlvbkxpc3Q6dX19X29uTGFzdE1lc3NhZ2VOb3RFeGlzdChlKXtuZXcgQ24oXCJsYXN0TWVzc2FnZU5vdEV4aXN0XCIpLnNldE1lc3NhZ2UoXCJcIitKU09OLnN0cmluZ2lmeShlKSkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKX1fc29ydENvbnZlcnNhdGlvbkxpc3QoZSl7Y29uc3QgdD1bXSxzPVtdLG89W10saT1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9PnshMD09PWVbMV0uaXNQaW5uZWQ/THQoZVsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZSk/cy5wdXNoKGUpOnQucHVzaChlKTpMdChlWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lKT9pLnB1c2goZSk6by5wdXNoKGUpfSksdC5zb3J0KChlLHQpPT50WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUpLmNvbmNhdChzKS5jb25jYXQoby5zb3J0KChlLHQpPT50WzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lLWVbMV0ubGFzdE1lc3NhZ2UubGFzdFRpbWUpKS5jb25jYXQoaSl9X3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl7dGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAodGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3QoWy4uLnRoaXMuX2NvbnZlcnNhdGlvbk1hcF0pKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfV91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGUoZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybjtjb25zdCBzPVtdLG89W10saT10aGlzLmdldE1vZHVsZShjcyksbj10aGlzLmdldE1vZHVsZShkcyk7ZS5mb3JFYWNoKGU9PntpZihlLnR5cGU9PT10LkNPTlZfQzJDKXMucHVzaChlLnRvQWNjb3VudCk7ZWxzZSBpZihlLnR5cGU9PT10LkNPTlZfR1JPVVApe2NvbnN0IHQ9ZS50b0FjY291bnQ7bi5oYXNMb2NhbEdyb3VwKHQpP2UuZ3JvdXBQcm9maWxlPW4uZ2V0TG9jYWxHcm91cFByb2ZpbGUodCk6by5wdXNoKHQpfX0pLF9lLmwoYCR7dGhpcy5fbn0uX3VwZGF0ZVVzZXJPckdyb3VwUHJvZmlsZSBjMmNVc2VySURMaXN0OiR7c30gZ3JvdXBJRExpc3Q6JHtvfWApLHMubGVuZ3RoPjAmJmkuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6c30pLnRoZW4oKHtkYXRhOmV9KT0+e2JlKGUpP2UuZm9yRWFjaChlPT57dGhpcy5fZG9VcGRhdGVVc2VyUHJvZmlsZShcIkMyQ1wiK2UudXNlcklELGUpfSk6dGhpcy5fZG9VcGRhdGVVc2VyUHJvZmlsZShcIkMyQ1wiK2UudXNlcklELGUpfSksby5sZW5ndGg+MCYmbi5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHtncm91cElETGlzdDpvLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIl19fSkudGhlbigoe2RhdGE6e3N1Y2Nlc3NHcm91cExpc3Q6ZX19KT0+e2UuZm9yRWFjaChlPT57Y29uc3QgdD1cIkdST1VQXCIrZS5ncm91cElEO2lmKHRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXModCkpe2NvbnN0IHM9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldCh0KTtCZShzLmdyb3VwUHJvZmlsZSxlLFtdLFtudWxsLHZvaWQgMCxcIlwiLDAsTmFOXSksIXMuc3ViVHlwZSYmZS50eXBlJiYocy5zdWJUeXBlPWUudHlwZSl9fSl9KX1fZG9VcGRhdGVVc2VyUHJvZmlsZShlLHQpe3RoaXMuaGFzTG9jYWxDb252ZXJzYXRpb24oZSkmJih0aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLnVzZXJQcm9maWxlPXQpfV9nZXRDb252ZXJzYXRpb25PcHRpb25zKGUpe2NvbnN0IHQ9W10scz1lLmZpbHRlcigoe3R5cGU6ZSx1c2VySUQ6dH0pPT4xPT09ZSYmXCJAVExTI05PVF9GT1VORFwiIT09dCYmXCJAVExTI0VSUk9SXCIhPT10fHwyPT09ZSksbz10aGlzLmdldE15VXNlcklEKCksaT1zLm1hcChlPT57aWYod2UoZS5sYXN0TXNnKSYmKGUubGFzdE1zZz17ZWxlbWVudHM6W119KSwxPT09ZS50eXBlKXtjb25zdCBzPXt1c2VySUQ6ZS51c2VySUQsbmljazplLnBlZXJOaWNrLGF2YXRhcjplLnBlZXJBdmF0YXJ9O3JldHVybiB0LnB1c2gocykse2NvbnZlcnNhdGlvbklEOlwiQzJDXCIrZS51c2VySUQsdHlwZTpcIkMyQ1wiLGxhc3RNZXNzYWdlOntsYXN0VGltZTplLnRpbWUsbGFzdFNlcXVlbmNlOmUuc2VxdWVuY2UsZnJvbUFjY291bnQ6ZS5sYXN0QzJDTXNnRnJvbUFjY291bnQsbWVzc2FnZUZvclNob3c6ZS5tZXNzYWdlU2hvdyx0eXBlOmUubGFzdE1zZy5lbGVtZW50c1swXT9lLmxhc3RNc2cuZWxlbWVudHNbMF0udHlwZTpudWxsLHBheWxvYWQ6ZS5sYXN0TXNnLmVsZW1lbnRzWzBdP3RoaXMuX2FtZW5kTGF5ZXJzT3ZlckxpbWl0UHJvcGVydHkoZS5sYXN0TXNnLmVsZW1lbnRzWzBdLmNvbnRlbnQpOm51bGwsY2xvdWRDdXN0b21EYXRhOmUubGFzdE1zZy5jbG91ZEN1c3RvbURhdGF8fFwiXCIsaXNSZXZva2VkOjg9PT1lLmxhc3RNZXNzYWdlRmxhZyxvbmxpbmVPbmx5RmxhZzohMSxuaWNrOlwiXCIsbmFtZUNhcmQ6XCJcIix2ZXJzaW9uOjAsaXNQZWVyUmVhZDplLmxhc3RDMkNNc2dGcm9tQWNjb3VudD09PW8mJmUudGltZTw9ZS5jMmNQZWVyUmVhZFRpbWUscmV2b2tlcjplLmxhc3RNc2cucmV2b2tlckluZm8/ZS5sYXN0TXNnLnJldm9rZXJJbmZvLnJldm9rZXI6bnVsbH0sdXNlclByb2ZpbGU6bmV3IHRyKHMpLHBlZXJSZWFkVGltZTplLmMyY1BlZXJSZWFkVGltZSxpc1Bpbm5lZDoxPT09ZS5pc1Bpbm5lZCxtZXNzYWdlUmVtaW5kVHlwZTpcIlwiLGN1c3RvbURhdGE6ZS5jdXN0b21NYXJrfHxcIlwiLG1hcmtMaXN0OlR0KGUuc3RhbmRhcmRNYXJrKSxjb252ZXJzYXRpb25Hcm91cExpc3Q6dGhpcy5fY29udkdyb3VwSGFuZGxlci5nZXRDb252R3JvdXBMaXN0QnlJRChlLmNvbnRhY3RHcm91cElkKX19cmV0dXJue2NvbnZlcnNhdGlvbklEOlwiR1JPVVBcIitlLmdyb3VwSUQsdHlwZTpcIkdST1VQXCIsbGFzdE1lc3NhZ2U6e2xhc3RUaW1lOmUudGltZSxsYXN0U2VxdWVuY2U6ZS5zZXF1ZW5jZSxmcm9tQWNjb3VudDplLm1zZ0dyb3VwRnJvbUFjY291bnQsbWVzc2FnZUZvclNob3c6ZS5tZXNzYWdlU2hvdywuLi50aGlzLl9wYXRjaFR5cGVBbmRQYXlsb2FkKGUpLGNsb3VkQ3VzdG9tRGF0YTplLmxhc3RNc2cuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGlzUmV2b2tlZDoyPT09ZS5sYXN0TWVzc2FnZUZsYWcsb25saW5lT25seUZsYWc6ITEsbmljazplLnNlbmRlck5pY2t8fFwiXCIsbmFtZUNhcmQ6ZS5zZW5kZXJOYW1lQ2FyZHx8XCJcIixyZXZva2VyOmUubGFzdE1zZy5yZXZva2VySW5mbz9lLmxhc3RNc2cucmV2b2tlckluZm8ucmV2b2tlcjpudWxsfSxncm91cFByb2ZpbGU6bmV3IG5yKHtncm91cElEOmUuZ3JvdXBJRCxuYW1lOmUuZ3JvdXBOaWNrLGF2YXRhcjplLmdyb3VwSW1hZ2V9KSx1bnJlYWRDb3VudDplLnVucmVhZENvdW50LHBlZXJSZWFkVGltZTowLGlzUGlubmVkOjE9PT1lLmlzUGlubmVkLG1lc3NhZ2VSZW1pbmRUeXBlOlwiXCIsdmVyc2lvbjowLGN1c3RvbURhdGE6ZS5jdXN0b21NYXJrfHxcIlwiLG1hcmtMaXN0OlR0KGUuc3RhbmRhcmRNYXJrKSxjb252ZXJzYXRpb25Hcm91cExpc3Q6dGhpcy5fY29udkdyb3VwSGFuZGxlci5nZXRDb252R3JvdXBMaXN0QnlJRChlLmNvbnRhY3RHcm91cElkKX19KTtpZih0Lmxlbmd0aD4wKXt0aGlzLmdldE1vZHVsZShjcykub25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQodCl9cmV0dXJuIGl9X3BhdGNoVHlwZUFuZFBheWxvYWQoZSl7Y29uc3R7ZXZlbnQ6cyxlbGVtZW50czpvPVtdLGdyb3VwVGlwczppPXt9fT1lLmxhc3RNc2c7aWYoIXdlKHMpJiYhTHQoaSkpe2xldCBlPW5ldyBibihpKTtlLnNldEVsZW1lbnQoe3R5cGU6dC5NU0dfR1JQX1RJUCxjb250ZW50OnsuLi5pLmVsZW1lbnRzLGdyb3VwUHJvZmlsZTppLmdyb3VwUHJvZmlsZX19KTtjb25zdCBzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZS5wYXlsb2FkKSk7cmV0dXJuIGU9bnVsbCx7dHlwZTp0Lk1TR19HUlBfVElQLHBheWxvYWQ6c319cmV0dXJue3R5cGU6b1swXT9vWzBdLnR5cGU6bnVsbCxwYXlsb2FkOm9bMF0/dGhpcy5fYW1lbmRMYXllcnNPdmVyTGltaXRQcm9wZXJ0eShvWzBdLmNvbnRlbnQpOm51bGx9fV9hbWVuZExheWVyc092ZXJMaW1pdFByb3BlcnR5KGUpe2NvbnN0e2xheWVyc092ZXJMaW1pdDp0fT1lO3JldHVybiAwPT09dD9lLmxheWVyc092ZXJMaW1pdD0hMToxPT09dCYmKGUubGF5ZXJzT3ZlckxpbWl0PSEwKSxlfWdldExvY2FsTWVzc2FnZUxpc3QoZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfWRlbGV0ZUxvY2FsTWVzc2FnZShlKXtlIGluc3RhbmNlb2YgYm4mJnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmUoZSl9b25Db252ZXJzYXRpb25EZWxldGVkKGUpe2lmKCFiZShlKSlyZXR1cm47Y29uc3Qgcz1lLm1hcChlPT57Y29uc3R7dHlwZTpzLHVzZXJJRDpvLGdyb3VwSUQ6aX09ZTtyZXR1cm4gMT09PXM/YCR7dC5DT05WX0MyQ30ke299YDoyPT09cz9gJHt0LkNPTlZfR1JPVVB9JHtpfWA6dm9pZCAwfSk7X2UubChgJHt0aGlzLl9ufS5vbkNvbnZlcnNhdGlvbkRlbGV0ZWQgY29udmVyc2F0aW9uSURMaXN0OiR7c31gKSx0aGlzLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdChzKX1vbkNvbnZlcnNhdGlvblBpbm5lZChlKXtpZighYmUoZSkpcmV0dXJuO2xldCBzPSExO2UuZm9yRWFjaChlPT57Y29uc3R7dHlwZTpvLHVzZXJJRDppLGdyb3VwSUQ6bn09ZTtsZXQgcjsxPT09bz9yPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oYCR7dC5DT05WX0MyQ30ke2l9YCk6Mj09PW8mJihyPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oYCR7dC5DT05WX0dST1VQfSR7bn1gKSksciYmKF9lLmwoYCR7dGhpcy5fbn0ub25Db252ZXJzYXRpb25QaW5uZWQgY29udmVyc2F0aW9uSUQ6JHtyLmNvbnZlcnNhdGlvbklEfSBpc1Bpbm5lZDoke3IuaXNQaW5uZWR9YCksci5pc1Bpbm5lZHx8KHIuaXNQaW5uZWQ9ITAscz0hMCkpfSkscyYmdGhpcy5fc29ydENvbnZlcnNhdGlvbkxpc3RBbmRFbWl0RXZlbnQoKX1vbkNvbnZlcnNhdGlvblVucGlubmVkKGUpe2lmKCFiZShlKSlyZXR1cm47bGV0IHM9ITE7ZS5mb3JFYWNoKGU9Pntjb25zdHt0eXBlOm8sdXNlcklEOmksZ3JvdXBJRDpufT1lO2xldCByOzE9PT1vP3I9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihgJHt0LkNPTlZfQzJDfSR7aX1gKToyPT09byYmKHI9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihgJHt0LkNPTlZfR1JPVVB9JHtufWApKSxyJiYoX2UubChgJHt0aGlzLl9ufS5vbkNvbnZlcnNhdGlvblVucGlubmVkIGNvbnZlcnNhdGlvbklEOiR7ci5jb252ZXJzYXRpb25JRH0gaXNQaW5uZWQ6JHtyLmlzUGlubmVkfWApLHIuaXNQaW5uZWQmJihyLmlzUGlubmVkPSExLHM9ITApKX0pLHMmJnRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCl9Z2V0TWVzc2FnZUxpc3Qoe2NvbnZlcnNhdGlvbklEOmUsbmV4dFJlcU1lc3NhZ2VJRDp0LGNvdW50OnN9KXtjb25zdCBvPXRoaXMuX24rXCIuZ2V0TWVzc2FnZUxpc3RcIixpPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oZSk7bGV0IG49XCJcIjtpZihpJiZpLmdyb3VwUHJvZmlsZSYmKG49aS5ncm91cFByb2ZpbGUudHlwZSksZXQobikpcmV0dXJuIF9lLmwoYCR7b30gbm90IGF2YWlsYWJsZSBpbiBhdmNoYXRyb29tLiBjb252ZXJzYXRpb25JRDoke2V9YCkseG4oe21lc3NhZ2VMaXN0OltdLG5leHRSZXFNZXNzYWdlSUQ6XCJcIixpc0NvbXBsZXRlZDohMH0pOyh3ZShzKXx8cz4xNSkmJihzPTE1KSwhdCYmdGhpcy5faXNOb3RJbkNvbW11bml0eShlKSYmKHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmVCeUNvbnZlcnNhdGlvbklEKGUpLHRoaXMuX2NvbXBsZXRlZE1hcC5kZWxldGUoZSksdGhpcy5fcm9hbWluZ01lc3NhZ2VTZXF1ZW5jZU1hcC5kZWxldGUoZSkpO2NvbnN0IHI9dGhpcy5fY29tcHV0ZVJlbWFpbmluZ0NvdW50KHtjb252ZXJzYXRpb25JRDplLG5leHRSZXFNZXNzYWdlSUQ6dH0pLGE9dGhpcy5fY29tcGxldGVkTWFwLmhhcyhlKTtpZihfZS5sKGAke299IGNvbnZlcnNhdGlvbklEOiR7ZX0gbmV4dFJlcU1lc3NhZ2VJRDoke3R9IHJlbWFpbmluZ0NvdW50OiR7cn0gY291bnQ6JHtzfSBpc0NvbXBsZXRlZDoke2F9YCksdGhpcy5fbmVlZEdldEhpc3Rvcnkoe2NvbnZlcnNhdGlvbklEOmUscmVtYWluaW5nQ291bnQ6cixjb3VudDpzfSkpcmV0dXJuIHRoaXMuZ2V0SGlzdG9yeU1lc3NhZ2VzKHtjb252ZXJzYXRpb25JRDplLG5leHRSZXFNZXNzYWdlSUQ6dCxjb3VudDoyMH0pLnRoZW4odD0+e2NvbnN0e25leHRSZXFJRDpzLHN0b3JlZE1lc3NhZ2VMaXN0Oml9PXQsbj10aGlzLl9jb21wbGV0ZWRNYXAuaGFzKGUpO2xldCBhPWk7aWYocj4wKXthPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpLnNsaWNlKDAsaS5sZW5ndGgrcil9Y29uc3QgdT17bmV4dFJlcU1lc3NhZ2VJRDpuP1wiXCI6cyxtZXNzYWdlTGlzdDphLGlzQ29tcGxldGVkOm59O3JldHVybiBfZS5sKGAke299IHJldC5uZXh0UmVxTWVzc2FnZUlEOiR7dS5uZXh0UmVxTWVzc2FnZUlEfSByZXQuaXNDb21wbGV0ZWQ6JHt1LmlzQ29tcGxldGVkfSByZXQubGVuZ3RoOiR7YS5sZW5ndGh9YCksd24odSl9KTt0aGlzLm1vZGlmeU1lc3NhZ2VMaXN0KGUpO2NvbnN0IHU9dGhpcy5fZ2V0TWVzc2FnZUxpc3RGcm9tTWVtb3J5KHtjb252ZXJzYXRpb25JRDplLG5leHRSZXFNZXNzYWdlSUQ6dCxjb3VudDpzfSk7cmV0dXJuIHhuKHUpfV9nZXRNZXNzYWdlTGlzdEZyb21NZW1vcnkoe2NvbnZlcnNhdGlvbklEOmUsbmV4dFJlcU1lc3NhZ2VJRDp0LGNvdW50OnN9KXtjb25zdCBvPXRoaXMuX24rXCIuX2dldE1lc3NhZ2VMaXN0RnJvbU1lbW9yeVwiLGk9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSksbj1pLmxlbmd0aDtsZXQgcj0wO2NvbnN0IGE9e2lzQ29tcGxldGVkOiExLG5leHRSZXFNZXNzYWdlSUQ6XCJcIixtZXNzYWdlTGlzdDpbXX07cmV0dXJuIHQ/KHI9aS5maW5kSW5kZXgoZT0+ZS5JRD09PXQpLHI+cz8oYS5tZXNzYWdlTGlzdD1pLnNsaWNlKHItcyxyKSxhLm5leHRSZXFNZXNzYWdlSUQ9aVtyLXNdLklEKTooYS5tZXNzYWdlTGlzdD1pLnNsaWNlKDAsciksYS5pc0NvbXBsZXRlZD0hMCkpOm4+cz8ocj1uLXMsYS5tZXNzYWdlTGlzdD1pLnNsaWNlKHIsbiksYS5uZXh0UmVxTWVzc2FnZUlEPWlbcl0uSUQpOihhLm1lc3NhZ2VMaXN0PWkuc2xpY2UoMCxuKSxhLmlzQ29tcGxldGVkPSEwKSxfZS5sKGAke299IGNvbnZlcnNhdGlvbklEOiR7ZX0gcmV0Lm5leHRSZXFNZXNzYWdlSUQ6JHthLm5leHRSZXFNZXNzYWdlSUR9IHJldC5pc0NvbXBsZXRlZDoke2EuaXNDb21wbGV0ZWR9IHJldC5sZW5ndGg6JHthLm1lc3NhZ2VMaXN0Lmxlbmd0aH1gKSxhfWdldE1lc3NhZ2VMaXN0SG9wcGluZyhlKXtsZXR7Y29udmVyc2F0aW9uSUQ6cyxzZXF1ZW5jZTpvLHRpbWU6aSxjb3VudDpuLGRpcmVjdGlvbjpyPTB9PWU7aWYoKHdlKG4pfHxuPjE1KSYmKG49MTUpLHMuc3RhcnRzV2l0aCh0LkNPTlZfQzJDKSl7Y29uc3QgZT10aGlzLmdldE1vZHVsZShscyksbz1zLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKTtyZXR1cm4gZS5nZXRSb2FtaW5nTWVzc2FnZXNIb3BwaW5nKHtwZWVyQWNjb3VudDpvLHRpbWU6aSxjb3VudDpuLGRpcmVjdGlvbjpyfSl9aWYocy5zdGFydHNXaXRoKHQuQ09OVl9HUk9VUCkpe2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUoZHMpLGk9cy5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKTtyZXR1cm4gZS5nZXRSb2FtaW5nTWVzc2FnZXNIb3BwaW5nKHtncm91cElEOmksc2VxdWVuY2U6byxjb3VudDpuLGRpcmVjdGlvbjpyfSl9fV9jb21wdXRlUmVtYWluaW5nQ291bnQoe2NvbnZlcnNhdGlvbklEOmUsbmV4dFJlcU1lc3NhZ2VJRDp0fSl7Y29uc3Qgcz10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKSxvPXMubGVuZ3RoO2lmKCF0KXJldHVybiBvO2xldCBpPTA7cmV0dXJuIGl0KGUpP2k9cy5maW5kSW5kZXgoZT0+ZS5JRD09PXQpOm50KGUpJiYoaT0tMSE9PXQuaW5kZXhPZihcIi1cIik/cy5maW5kSW5kZXgoZT0+ZS5JRD09PXQpOnMuZmluZEluZGV4KGU9PmUuc2VxdWVuY2U9PT10KSksLTE9PT1pJiYoaT0wKSxpfV9nZXRNZXNzYWdlTGlzdFNpemUoZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpLmxlbmd0aH1fbmVlZEdldEhpc3Rvcnkoe2NvbnZlcnNhdGlvbklEOmUscmVtYWluaW5nQ291bnQ6dCxjb3VudDpzfSl7Y29uc3Qgbz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpO2xldCBpPVwiXCI7cmV0dXJuIG8mJm8uZ3JvdXBQcm9maWxlJiYoaT1vLmdyb3VwUHJvZmlsZS50eXBlKSwhcnQoZSkmJiFldChpKSYmKCEobnQoZSkmJnRoaXMuX2lzUGFnaW5nR2V0R3JvdXBMaXN0Q29tcGxldGVkKCkmJnRoaXMuX2dldExvY2FsR3JvdXBDb3VudCgpPD00ZTMmJiF0aGlzLl9oYXNMb2NhbEdyb3VwKGUpJiYhdGhpcy5faXNUb3BpY0NvbnZlcnNhdGlvbihlKSkmJih0PD1zJiYhdGhpcy5fY29tcGxldGVkTWFwLmhhcyhlKSkpfV9pc1RvcGljQ29udmVyc2F0aW9uKGUpe2NvbnN0IHM9ZS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKTtyZXR1cm4gb3Qocyl9Z2V0SGlzdG9yeU1lc3NhZ2VzKGUpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnMsY291bnQ6b309ZTtpZihzPT09dC5DT05WX1NZU1RFTSlyZXR1cm4geG4oKTtsZXQgaT0xNTtvPjIwJiYoaT0yMCk7bGV0IG49bnVsbDtpZihpdChzKSl7Y29uc3QgZT10aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuaGFzKHMpO3JldHVybiBuPXRoaXMuZ2V0TW9kdWxlKGxzKSxuP24uZ2V0Um9hbWluZ01lc3NhZ2Uoe2NvbnZlcnNhdGlvbklEOnMscGVlckFjY291bnQ6cy5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIiksY291bnQ6aSxsYXN0TWVzc2FnZVRpbWU6ZT90aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZ2V0KHMpLmxhc3RNZXNzYWdlVGltZTowLG1lc3NhZ2VLZXk6ZT90aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZ2V0KHMpLm1lc3NhZ2VLZXk6XCJcIn0pOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pfWlmKG50KHMpKXtpZihuPXRoaXMuZ2V0TW9kdWxlKGRzKSwhbilyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSk7bGV0IGU9bnVsbDt0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKHMpJiYoZT10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHMpLmxhc3RNZXNzYWdlKTtsZXQgbz0wO2UmJihvPWUubGFzdFNlcXVlbmNlKTtjb25zdCByPXRoaXMuX3JvYW1pbmdNZXNzYWdlU2VxdWVuY2VNYXAuZ2V0KHMpO3JldHVybiBuLmdldFJvYW1pbmdNZXNzYWdlKHtjb252ZXJzYXRpb25JRDpzLGdyb3VwSUQ6cy5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKSxjb3VudDppLHNlcXVlbmNlOnJ8fG99KX1yZXR1cm4geG4oKX1wYXRjaENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlKGUpe2NvbnN0IHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtpZighdClyZXR1cm47Y29uc3R7bWVzc2FnZUZvclNob3c6cyxwYXlsb2FkOm99PXQubGFzdE1lc3NhZ2U7aWYoTHQocyl8fEx0KG8pKXtjb25zdCBzPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpO2lmKDA9PT1zLmxlbmd0aClyZXR1cm47Y29uc3Qgbz1zW3MubGVuZ3RoLTFdO19lLmwoYCR7dGhpcy5fbn0ucGF0Y2hDb252ZXJzYXRpb25MYXN0TWVzc2FnZSBjb252ZXJzYXRpb25JRDoke2V9IHBheWxvYWQ6YCxvLnBheWxvYWQpLHQudXBkYXRlTGFzdE1lc3NhZ2Uobyl9fW9uUm9hbWluZ01lc3NhZ2UoZT1bXSxzLG89ITApe2NvbnN0IGk9cy5zdGFydHNXaXRoKHQuQ09OVl9DMkMpP3QuQ09OVl9DMkM6dC5DT05WX0dST1VQO2xldCBuPW51bGwscj1bXSxhPVtdLHU9MCxjPWUubGVuZ3RoLGw9bnVsbDtjb25zdCBkPWk9PT10LkNPTlZfR1JPVVAscD10aGlzLmdldE1vZHVsZShDcyksaD10aGlzLmdldEZpbGVEb3dubG9hZFByb3h5KCk7bGV0IGc9KCk9Pnt1PWQ/ZS5sZW5ndGgtMTowLGM9ZD8wOmUubGVuZ3RofSxfPSgpPT57ZD8tLXU6Kyt1fSxtPSgpPT5kP3U+PWM6dTxjO2ZvcihnKCk7bSgpO18oKSlpZihkJiYxPT09ZVt1XS5zZXF1ZW5jZSYmbyYmdGhpcy5zZXRDb21wbGV0ZWQocyksMSE9PWVbdV0uaXNQbGFjZU1lc3NhZ2UpaWYobj1uZXcgYm4oZVt1XSksbi50bz1lW3VdLnRvLGkhPT10LkNPTlZfR1JPVVB8fHdlKGVbdV0udG9waWNJRCl8fChuLnRvPWVbdV0udG9waWNJRCksbi5pc1N5c3RlbU1lc3NhZ2U9ISFlW3VdLmlzU3lzdGVtTWVzc2FnZSxuLmNvbnZlcnNhdGlvblR5cGU9aSw0PT09ZVt1XS5ldmVudD9sPXt0eXBlOnQuTVNHX0dSUF9USVAsY29udGVudDp7Li4uZVt1XS5lbGVtZW50cyxncm91cFByb2ZpbGU6ZVt1XS5ncm91cFByb2ZpbGV9fTooZVt1XS5lbGVtZW50cz1wLnBhcnNlRWxlbWVudHMoZVt1XS5lbGVtZW50cyxlW3VdLmZyb20pLGw9ZVt1XS5lbGVtZW50cyksZHx8bi5zZXROaWNrQW5kQXZhdGFyKHtuaWNrOmVbdV0ubmljayxhdmF0YXI6ZVt1XS5hdmF0YXJ9KSxMdChsKSl7Y29uc3QgdD1uZXcgQ24oXCJlbXB0eU1lc3NhZ2VCb2R5XCIpO3Quc2V0TWVzc2FnZShgZnJvbToke24uZnJvbX0gdG86JHtuLnRvfSBzZXF1ZW5jZToke24uc2VxdWVuY2V9IGV2ZW50OiR7ZVt1XS5ldmVudH1gKSx0LnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpfWVsc2Ugbi5zZXRFbGVtZW50KGwsaCksbi5yZUluaXRpYWxpemUodGhpcy5nZXRNeVVzZXJJRCgpKSxyLnB1c2gobik7cmV0dXJuIGc9Xz1tPW51bGwsbz8odGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnVuc2hpZnQocixhKSxyPW51bGwsYSk6KGE9bnVsbCxyKX1maW5kTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmZpbmRNZXNzYWdlKGUpfV9pc05vdEluQ29tbXVuaXR5KGUpe2xldCBzPSExO2lmKGUuc3RhcnRzV2l0aCh0LkNPTlZfR1JPVVApJiZ0aGlzLl9pc1RvcGljQ29udmVyc2F0aW9uKGUpKXtjb25zdCBvPWZ0KGUucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIikpO3RoaXMuZ2V0TW9kdWxlKGRzKS5oYXNMb2NhbEdyb3VwKG8pfHwocz0hMCl9cmV0dXJuIHN9ZGVsZXRlVG9waWNSb2FtaW5nTWVzc2FnZUluZm8oZSl7aWYoIXN0KHtncm91cElEOmV9KSlyZXR1cm47dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldFRvcGljQ29udmVyc2F0aW9uSURMaXN0KGUpLmZvckVhY2goZT0+e3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmVCeUNvbnZlcnNhdGlvbklEKGUpLHRoaXMuX2NvbXBsZXRlZE1hcC5kZWxldGUoZSksdGhpcy5fcm9hbWluZ01lc3NhZ2VTZXF1ZW5jZU1hcC5kZWxldGUoZSl9KX1kZWxldGVHcm91cFJvbWFpbmdNZXNzYWdlSW5mbyhlKXtjb25zdCBzPWAke3QuQ09OVl9HUk9VUH0ke2V9YDt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmVtb3ZlQnlDb252ZXJzYXRpb25JRChzKSx0aGlzLl9jb21wbGV0ZWRNYXAuZGVsZXRlKHMpLHRoaXMuX3JvYW1pbmdNZXNzYWdlU2VxdWVuY2VNYXAuZGVsZXRlKHMpfXNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDplfSl7Y29uc3Qgcz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpO2lmKF9lLmwoYCR7dGhpcy5fbn0uc2V0TWVzc2FnZVJlYWQgY29udmVyc2F0aW9uSUQ6JHtlfSB1bnJlYWRDb3VudDoke3M/cy51bnJlYWRDb3VudDowfWApLCFzKXJldHVybiB4bigpO2lmKHMudHlwZSE9PXQuQ09OVl9HUk9VUCYmcy50eXBlIT09dC5DT05WX1RPUElDfHxMdChzLmdyb3VwQXRJbmZvTGlzdCl8fHRoaXMuZGVsZXRlR3JvdXBBdFRpcHMoZSksMD09PXMudW5yZWFkQ291bnQpcmV0dXJuIHhuKCk7aWYocy50eXBlPT09dC5DT05WX0dST1VQJiYhdGhpcy5faGFzTG9jYWxHcm91cChlKSlyZXR1cm4gMCE9PXMudW5yZWFkQ291bnQmJihzLnVucmVhZENvdW50PTAsdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSkseG4oKTtjb25zdCBvPXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKGUpO2xldCBpPXMubGFzdE1lc3NhZ2UubGFzdFRpbWU7byYmaTxvLnRpbWUmJihpPW8udGltZSk7bGV0IG49cy5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2U7aWYobyYmbjxvLnNlcXVlbmNlJiYobj1vLnNlcXVlbmNlKSxzLnR5cGU9PT10LkNPTlZfVE9QSUMmJndlKG8pKXtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKGdzKSxvPWUucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIiksaT1mdChvKSxyPXMuZ2V0TG9jYWxUb3BpYyhpLG8pO3ImJihuPXIubmV4dE1lc3NhZ2VTZXEtMSl9bGV0IHI9bnVsbDtzd2l0Y2gocy50eXBlKXtjYXNlIHQuQ09OVl9DMkM6cmV0dXJuIHI9dGhpcy5nZXRNb2R1bGUobHMpLHI/ci5zZXRNZXNzYWdlUmVhZCh7Y29udmVyc2F0aW9uSUQ6ZSxsYXN0TWVzc2FnZVRpbWU6aX0pOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pO2Nhc2UgdC5DT05WX0dST1VQOmNhc2UgdC5DT05WX1RPUElDOnJldHVybiByPXRoaXMuZ2V0TW9kdWxlKGRzKSxyP3Iuc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOmUsbGFzdE1lc3NhZ2VTZXE6bn0pOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pO2Nhc2UgdC5DT05WX1NZU1RFTTpyZXR1cm4gcy51bnJlYWRDb3VudD0wLHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSkseG4oKTtkZWZhdWx0OnJldHVybiB4bigpfX1zZXRBbGxNZXNzYWdlUmVhZChlPXt9KXtjb25zdCBzPXRoaXMuX24rXCIuc2V0QWxsTWVzc2FnZVJlYWRcIjtlLnNjb3BlfHwoZS5zY29wZT10LlJFQURfQUxMX01TRyksX2UubChzK1wiIG9wdGlvbnM6XCIsZSk7Y29uc3Qgbz10aGlzLl9jcmVhdGVTZXRBbGxNZXNzYWdlUmVhZFBhY2soZSk7aWYoMD09PW8ucmVhZEFsbEMyQ01lc3NhZ2UmJjA9PT1vLmdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdC5sZW5ndGgpcmV0dXJuIHhuKCk7Y29uc3QgaT1uZXcgQ24oXCJzZXRBbGxNZXNzYWdlUmVhZFwiKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Wm8scmVxdWVzdERhdGE6b30pLnRoZW4odD0+e2NvbnN0e2RhdGE6c309dCxvPXRoaXMuX2hhbmRsZUFsbE1lc3NhZ2VSZWFkKHMpO3JldHVybiBpLnNldE1lc3NhZ2UoYHNjb3BlOiR7ZS5zY29wZX0gZmFpbHVyZUdyb3Vwczoke0pTT04uc3RyaW5naWZ5KG8pfWApLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCkseG4oKX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oe2NvZGU6ZSYmZS5jb2RlP2UuY29kZTpubi5NRVNTQUdFX1VOUkVBRF9BTExfRkFJTCxtZXNzYWdlOmUmJmUubWVzc2FnZT9lLm1lc3NhZ2U6dm9pZCAwfSkpKX1zZXRDb252ZXJzYXRpb25DdXN0b21EYXRhKGUpe3JldHVybiB0aGlzLl9jb252R3JvdXBIYW5kbGVyLnNldENvbnZDdXN0b21EYXRhKGUpfW1hcmtDb252ZXJzYXRpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnZHcm91cEhhbmRsZXIubWFya0NvbnZlcnNhdGlvbihlKX1nZXRDb252ZXJzYXRpb25Hcm91cExpc3QoKXtyZXR1cm4gdGhpcy5fY29udkdyb3VwSGFuZGxlci5nZXRMb2NhbENvbnZHcm91cExpc3QoKX1jcmVhdGVDb252ZXJzYXRpb25Hcm91cChlKXtyZXR1cm4gdGhpcy5fY29udkdyb3VwSGFuZGxlci5jcmVhdGVDb252R3JvdXAoZSl9ZGVsZXRlQ29udmVyc2F0aW9uR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2NvbnZHcm91cEhhbmRsZXIuZGVsZXRlQ29udkdyb3VwKGUpfXJlbmFtZUNvbnZlcnNhdGlvbkdyb3VwKGUpe3JldHVybiB0aGlzLl9jb252R3JvdXBIYW5kbGVyLnJlbmFtZUNvbnZHcm91cChlKX1hZGRDb252ZXJzYXRpb25zVG9Hcm91cChlKXtyZXR1cm4gdGhpcy5fY29udkdyb3VwSGFuZGxlci5hZGRDb252c1RvR3JvdXAoZSl9ZGVsZXRlQ29udmVyc2F0aW9uc0Zyb21Hcm91cChlKXtyZXR1cm4gdGhpcy5fY29udkdyb3VwSGFuZGxlci5kZWxldGVDb252c0Zyb21Hcm91cChlKX1vbkNvbnZlcnNhdGlvbk1hcmtVcGRhdGVkKGUpe3RoaXMuX2NvbnZHcm91cEhhbmRsZXIub25Db252TWFya1VwZGF0ZWQoZSl9b25Db252ZXJzYXRpb25Hcm91cENyZWF0ZWQoZSl7dGhpcy5fY29udkdyb3VwSGFuZGxlci5vbkNvbnZHcm91cENyZWF0ZWQoZSl9b25Db252ZXJzYXRpb25Hcm91cERlbGV0ZWQoZSl7dGhpcy5fY29udkdyb3VwSGFuZGxlci5vbkNvbnZHcm91cERlbGV0ZWQoZSl9b25Db252ZXJzYXRpb25Hcm91cE5hbWVVcGRhdGVkKGUpe3RoaXMuX2NvbnZHcm91cEhhbmRsZXIub25Db252R3JvdXBOYW1lVXBkYXRlZChlKX1vbkNvbnZlcnNhdGlvbkluR3JvdXBVcGRhdGVkKGUpe3RoaXMuX2NvbnZHcm91cEhhbmRsZXIub25Db252SW5Hcm91cFVwZGF0ZWQoZSl9b25Db252ZXJzYXRpb25BZGRlZFRvT3JEZWxldGVkRnJvbUdyb3VwKGUpe3RoaXMuX2NvbnZHcm91cEhhbmRsZXIub25Db252QWRkZWRUb09yRGVsZXRlZEZyb21Hcm91cChlKX1fZ2V0Q29udmVyc2F0aW9uTGFzdE1lc3NhZ2VTZXF1ZW5jZShlKXtjb25zdCB0PXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQpO2xldCBzPWUubGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlO3JldHVybiB0JiZzPHQuc2VxdWVuY2UmJihzPXQuc2VxdWVuY2UpLHN9X2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlVGltZShlKXtjb25zdCB0PXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbExhc3RNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQpO2xldCBzPWUubGFzdE1lc3NhZ2UubGFzdFRpbWU7cmV0dXJuIHQmJnM8dC50aW1lJiYocz10LnRpbWUpLHN9X2NyZWF0ZVNldEFsbE1lc3NhZ2VSZWFkUGFjayhlKXtjb25zdCBzPXtyZWFkQWxsQzJDTWVzc2FnZTowLGdyb3VwTWVzc2FnZVJlYWRJbmZvTGlzdDpbXX0se3Njb3BlOm99PWU7Zm9yKGNvbnN0WyxpXW9mIHRoaXMuX2NvbnZlcnNhdGlvbk1hcClpZihpLnVucmVhZENvdW50PjApaWYoaS50eXBlPT09dC5DT05WX0MyQyYmMD09PXMucmVhZEFsbEMyQ01lc3NhZ2Upe2lmKG89PT10LlJFQURfQUxMX01TRylzLnJlYWRBbGxDMkNNZXNzYWdlPTE7ZWxzZSBpZihvPT09dC5SRUFEX0FMTF9DMkNfTVNHKXtzLnJlYWRBbGxDMkNNZXNzYWdlPTE7YnJlYWt9fWVsc2UgaWYoaS50eXBlPT09dC5DT05WX0dST1VQJiYobz09PXQuUkVBRF9BTExfR1JPVVBfTVNHfHxvPT09dC5SRUFEX0FMTF9NU0cpKXtjb25zdCBlPXRoaXMuX2dldENvbnZlcnNhdGlvbkxhc3RNZXNzYWdlU2VxdWVuY2UoaSk7cy5ncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3QucHVzaCh7Z3JvdXBJRDppLmdyb3VwUHJvZmlsZS5ncm91cElELG1lc3NhZ2VTZXF1ZW5jZTplfSl9cmV0dXJuIHN9b25QdXNoZWRBbGxNZXNzYWdlUmVhZChlKXt0aGlzLl9oYW5kbGVBbGxNZXNzYWdlUmVhZChlKX1faGFuZGxlQWxsTWVzc2FnZVJlYWQoZSl7Y29uc3R7Z3JvdXBNZXNzYWdlUmVhZEluZm9MaXN0OnQscmVhZEFsbEMyQ01lc3NhZ2U6c309ZSxvPXRoaXMuX3BhcnNlR3JvdXBSZWFkSW5mbyh0KTtyZXR1cm4gdGhpcy5fdXBkYXRlQWxsQ29udmVyc2F0aW9uVW5yZWFkQ291bnQoe3JlYWRBbGxDMkNNZXNzYWdlOnN9KT49MSYmKHRoaXMuZW1pdENvbnZlcnNhdGlvblVwZGF0ZSghMCwhMSksdGhpcy5lbWl0VG90YWxVbnJlYWRNZXNzYWdlQ291bnRVcGRhdGUoKSksb31fcGFyc2VHcm91cFJlYWRJbmZvKGUpe2NvbnN0IHQ9W107aWYoZSYmZS5sZW5ndGgpZm9yKGxldCBzPTAsbz1lLmxlbmd0aDtzPG87cysrKXtjb25zdHtncm91cElEOm8sc2VxdWVuY2U6aSxyZXRDb2RlOm4sbGFzdE1lc3NhZ2VTZXE6cn09ZVtzXTt3ZShuKT90aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5zZXQobyxyKToodGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuc2V0KG8saSksMCE9PW4mJnQucHVzaChgJHtvfS0ke2l9LSR7bn1gKSl9cmV0dXJuIHR9X3VwZGF0ZUFsbENvbnZlcnNhdGlvblVucmVhZENvdW50KGUpe2NvbnN0e3JlYWRBbGxDMkNNZXNzYWdlOnN9PWU7bGV0IG89MDtmb3IoY29uc3RbaSxuXW9mIHRoaXMuX2NvbnZlcnNhdGlvbk1hcClpZihuLnVucmVhZENvdW50Pj0xKXtpZigxPT09cyYmbi50eXBlPT09dC5DT05WX0MyQyl7Y29uc3QgZT10aGlzLl9nZXRDb252ZXJzYXRpb25MYXN0TWVzc2FnZVRpbWUobik7dGhpcy51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmksbGFzdE1lc3NhZ2VUaW1lOmV9KX1lbHNlIGlmKG4udHlwZT09PXQuQ09OVl9HUk9VUCl7Y29uc3QgZT1pLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpO2lmKHRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmhhcyhlKSl7Y29uc3QgdD10aGlzLl9yZW1vdGVHcm91cFJlYWRTZXF1ZW5jZU1hcC5nZXQoZSkscz10aGlzLl9nZXRDb252ZXJzYXRpb25MYXN0TWVzc2FnZVNlcXVlbmNlKG4pO3RoaXMudXBkYXRlSXNSZWFkQWZ0ZXJSZWFkUmVwb3J0KHtjb252ZXJzYXRpb25JRDppLHJlbW90ZVJlYWRTZXF1ZW5jZTp0fSkscz49dCYmdGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuZGVsZXRlKGUpfX10aGlzLnVwZGF0ZVVucmVhZENvdW50KGksITEpJiYobys9MSl9cmV0dXJuIG99aXNSZW1vdGVSZWFkKGUpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnMsc2VxdWVuY2U6b309ZSxpPXMucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIik7bGV0IG49ITE7aWYodGhpcy5fcmVtb3RlR3JvdXBSZWFkU2VxdWVuY2VNYXAuaGFzKGkpKXtjb25zdCBlPXRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmdldChpKTtvPD1lJiYobj0hMCxfZS5sKGAke3RoaXMuX259LmlzUmVtb3RlUmVhZCBjb252ZXJzYXRpb25JRDoke3N9IG1lc3NhZ2VTZXF1ZW5jZToke299IHJlbW90ZVJlYWRTZXF1ZW5jZToke2V9YCkpLG8+PWUrMTAmJnRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmRlbGV0ZShpKX1yZXR1cm4gbn11cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmUsbGFzdE1lc3NhZ2VTZXE6dCxsYXN0TWVzc2FnZVRpbWU6c30pe2NvbnN0IG89dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYoMD09PW8ubGVuZ3RoKXJldHVybjtsZXQgaTtmb3IobGV0IG49by5sZW5ndGgtMTtuPj0wO24tLSlpZihpPW9bbl0sIShzJiZpLnRpbWU+c3x8dCYmaS5zZXF1ZW5jZT50KSl7aWYoXCJpblwiPT09aS5mbG93JiZpLmlzUmVhZClicmVhaztpLnNldElzUmVhZCghMCl9fXVwZGF0ZVVucmVhZENvdW50KGUscz0hMCl7bGV0IG89ITE7Y29uc3QgaT10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLG49dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYoIWkpcmV0dXJuO2NvbnN0IHI9aS51bnJlYWRDb3VudCxhPW4uZmlsdGVyKGU9PiFlLmlzUmVhZCYmIWUuX29ubGluZU9ubHlGbGFnJiYhZS5pc0RlbGV0ZWQpLmxlbmd0aDtpZihyIT09YSYmKGkudW5yZWFkQ291bnQ9YSxvPSEwLF9lLmwoYCR7dGhpcy5fbn0udXBkYXRlVW5yZWFkQ291bnQgZnJvbSAke3J9IHRvICR7YX0sIGNvbnZlcnNhdGlvbklEOiR7ZX1gKSwhMD09PXMmJih0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpLHRoaXMuZW1pdFRvdGFsVW5yZWFkTWVzc2FnZUNvdW50VXBkYXRlKCkpKSxvJiZpLnR5cGU9PT10LkNPTlZfVE9QSUMpe2NvbnN0e3VucmVhZENvdW50OnN9PWksbz10aGlzLmdldE1vZHVsZShncyksbj1lLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpO28ub25Db252ZXJzYXRpb25Qcm94eSh7dG9waWNJRDpuLHVucmVhZENvdW50OnN9KX1yZXR1cm4gb31jbGVhckdyb3VwQXRJbmZvTGlzdChlLHM9ITApe2NvbnN0IG89dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtpZihvJiZvLmdyb3VwQXRJbmZvTGlzdC5sZW5ndGg+MCl7aWYoby5jbGVhckdyb3VwQXRJbmZvTGlzdCgpLF9lLmwoYCR7dGhpcy5fbn0uY2xlYXJHcm91cEF0SW5mb0xpc3QgY29udmVyc2F0aW9uSUQ6JHtlfWApLG8udHlwZT09PXQuQ09OVl9UT1BJQyl7Y29uc3R7Z3JvdXBBdEluZm9MaXN0OnN9PW8saT10aGlzLmdldE1vZHVsZShncyksbj1lLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpO2kub25Db252ZXJzYXRpb25Qcm94eSh7dG9waWNJRDpuLGdyb3VwQXRJbmZvTGlzdDpzfSl9ITA9PT1zJiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX11cGRhdGVSZWFkUmVjZWlwdEluZm8ocyl7Y29uc3R7dXNlcklEOm8sZ3JvdXBJRDppLHJlYWRSZWNlaXB0TGlzdDpufT1zO2lmKEx0KG4pKXJldHVybjtjb25zdCByPVtdO2lmKHdlKG8pKXtpZighd2UoaSkpe2NvbnN0IGU9YCR7dC5DT05WX0dST1VQfSR7aX1gO24uZm9yRWFjaCh0PT57Y29uc3R7dGlueUlEOnMsY2xpZW50VGltZTpvLHJhbmRvbTpuLHJlYWRDb3VudDphLHVucmVhZENvdW50OnV9PXQsYz1gJHtzfS0ke299LSR7bn1gLGw9dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTWVzc2FnZShlLGMpLGQ9e2dyb3VwSUQ6aSxtZXNzYWdlSUQ6YyxyZWFkQ291bnQ6MCx1bnJlYWRDb3VudDowfTtsJiYoR2UoYSkmJihsLnJlYWRSZWNlaXB0SW5mby5yZWFkQ291bnQ9YSxkLnJlYWRDb3VudD1hKSxHZSh1KSYmKGwucmVhZFJlY2VpcHRJbmZvLnVucmVhZENvdW50PXUsZC51bnJlYWRDb3VudD11KSxyLnB1c2goZCkpfSl9fWVsc2V7Y29uc3QgZT1gJHt0LkNPTlZfQzJDfSR7b31gO24uZm9yRWFjaCh0PT57Y29uc3R7dGlueUlEOnMsY2xpZW50VGltZTppLHJhbmRvbTpufT10LGE9YCR7c30tJHtpfS0ke259YCx1PXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2UoZSxhKTtpZih1KXt1LnJlYWRSZWNlaXB0SW5mby5pc1BlZXJSZWFkPSEwO2NvbnN0IGU9e3VzZXJJRDpvLG1lc3NhZ2VJRDphLGlzUGVlclJlYWQ6ITB9O3IucHVzaChlKX19KX1yLmxlbmd0aD4wJiZ0aGlzLmVtaXRPdXRlckV2ZW50KGUuTUVTU0FHRV9SRUFEX1JFQ0VJUFRfUkVDRUlWRUQscil9cmVjb21wdXRlR3JvdXBVbnJlYWRDb3VudChlKXtjb25zdHtjb252ZXJzYXRpb25JRDp0LGNvdW50OnN9PWUsbz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKHQpO2lmKG8pe2NvbnN0IGU9by51bnJlYWRDb3VudDtsZXQgaT1lLXM7aTwwJiYoaT0wKSxvLnVucmVhZENvdW50PWksX2UubChgJHt0aGlzLl9ufS5yZWNvbXB1dGVHcm91cFVucmVhZENvdW50IGZyb20gJHtlfSB0byAke2l9LCBjb252ZXJzYXRpb25JRDoke3R9YCl9fXVwZGF0ZUlzUmVhZChlKXtjb25zdCBzPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24oZSksbz10aGlzLmdldExvY2FsTWVzc2FnZUxpc3QoZSk7aWYoIXN8fDA9PT1vLmxlbmd0aHx8cnQocy50eXBlKSlyZXR1cm47Y29uc3QgaT1bXTtmb3IobGV0IHQ9MCxyPW8ubGVuZ3RoO3Q8cjt0KyspXCJpblwiIT09b1t0XS5mbG93P1wib3V0XCIhPT1vW3RdLmZsb3d8fG9bdF0uaXNSZWFkfHxvW3RdLnNldElzUmVhZCghMCk6aS5wdXNoKG9bdF0pO2xldCBuPTA7aWYocy50eXBlPT09dC5DT05WX0MyQyl7Y29uc3QgZT1pLnNsaWNlKC1zLnVucmVhZENvdW50KS5maWx0ZXIoZT0+ZS5pc1Jldm9rZWQpLmxlbmd0aDtuPWkubGVuZ3RoLXMudW5yZWFkQ291bnQtZX1lbHNlIG49aS5sZW5ndGgtcy51bnJlYWRDb3VudDtmb3IobGV0IHQ9MDt0PG4mJiFpW3RdLmlzUmVhZDt0KyspaVt0XS5zZXRJc1JlYWQoITApfWRlbGV0ZUdyb3VwQXRUaXBzKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5kZWxldGVHcm91cEF0VGlwc1wiO19lLmwoXCJcIitzKTtjb25zdCBvPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSk7aWYoIW8pcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IGk9by5ncm91cEF0SW5mb0xpc3Q7aWYoMD09PWkubGVuZ3RoKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtsZXQgbj12b2lkIDA7ZS5zdGFydHNXaXRoKHQuQ09OVl9HUk9VUCkmJihuPWUucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIikpO2xldCByPVsuLi5pXTtpZigoc3Qoe2dyb3VwSUQ6bn0pfHxvdChuKSkmJihyPWkuZmlsdGVyKGU9PiFlLmF0VHlwZUFycmF5LmluY2x1ZGVzKHQuQ09OVl9BVF9BTEwpKSwwPT09ci5sZW5ndGgpKXJldHVybiB0aGlzLmNsZWFyR3JvdXBBdEluZm9MaXN0KGUsITEpLFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IGE9dGhpcy5nZXRNeVVzZXJJRCgpO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp2byxyZXF1ZXN0RGF0YTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTpyLm1hcChlPT4oe2Zyb206ZS5mcm9tLHRvOmEsbWVzc2FnZVNlcTplLl9fc2VxdWVuY2UsbWVzc2FnZVJhbmRvbTplLl9fcmFuZG9tLGdyb3VwSUQ6d2UoZS50b3BpY0lEKT9lLmdyb3VwSUQ6ZS50b3BpY0lEfSkpfX0pLnRoZW4oKCk9PihfZS5sKGAke3N9IG9rLiBjb3VudDoke2kubGVuZ3RofWApLHRoaXMuY2xlYXJHcm91cEF0SW5mb0xpc3QoZSwhMSksUHJvbWlzZS5yZXNvbHZlKCkpKS5jYXRjaChlPT4oX2UuZShzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1hcHBlbmRUb01lc3NhZ2VMaXN0KGUpe3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5wdXNoSW4oZSl9c2V0TWVzc2FnZVJhbmRvbShlKXt0aGlzLnNpbmdseUxpbmtlZExpc3Quc2V0KGUucmFuZG9tKX1kZWxldGVNZXNzYWdlUmFuZG9tKGUpe3RoaXMuc2luZ2x5TGlua2VkTGlzdC5kZWxldGUoZS5yYW5kb20pfXB1c2hJbnRvTWVzc2FnZUxpc3QoZSx0LHMpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5wdXNoSW4odCxzKXx8dGhpcy5faXNNZXNzYWdlRnJvbUN1cnJlbnRJbnN0YW5jZSh0KSYmIXMpJiYoZS5wdXNoKHQpLCEwKX1faXNNZXNzYWdlRnJvbUN1cnJlbnRJbnN0YW5jZShlKXtyZXR1cm4gdGhpcy5zaW5nbHlMaW5rZWRMaXN0LmhhcyhlLnJhbmRvbSl9cmV2b2tlKGUsdCxzKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLnJldm9rZShlLHQscyl9Z2V0UGVlclJlYWRUaW1lKGUpe3JldHVybiB0aGlzLl9wZWVyUmVhZFRpbWVNYXAuZ2V0KGUpfXJlY29yZFBlZXJSZWFkVGltZShlLHQpe2lmKHRoaXMuX3BlZXJSZWFkVGltZU1hcC5oYXMoZSkpe3RoaXMuX3BlZXJSZWFkVGltZU1hcC5nZXQoZSk8dCYmdGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpfWVsc2UgdGhpcy5fcGVlclJlYWRUaW1lTWFwLnNldChlLHQpfXVwZGF0ZU1lc3NhZ2VJc1BlZXJSZWFkUHJvcGVydHkocyxvKXtpZihzLnN0YXJ0c1dpdGgodC5DT05WX0MyQykmJm8+MCl7Y29uc3QgdD10aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIudXBkYXRlTWVzc2FnZUlzUGVlclJlYWRQcm9wZXJ0eShzLG8pO2lmKHQubGVuZ3RoPjAmJnRoaXMuZW1pdE91dGVyRXZlbnQoZS5NRVNTQUdFX1JFQURfQllfUEVFUix0KSx0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKHMpKXtjb25zdCBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQocykubGFzdE1lc3NhZ2U7THQoZSl8fGUuZnJvbUFjY291bnQ9PT10aGlzLmdldE15VXNlcklEKCkmJmUubGFzdFRpbWU8PW8mJiFlLmlzUGVlclJlYWQmJihlLmlzUGVlclJlYWQ9ITAsdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSl9fX11cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5KGUpe3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci51cGRhdGVNZXNzYWdlSXNNb2RpZmllZFByb3BlcnR5KGUpfXNldENvbXBsZXRlZChlKXtfZS5sKGAke3RoaXMuX259LnNldENvbXBsZXRlZC4gY29udmVyc2F0aW9uSUQ6JHtlfWApLHRoaXMuX2NvbXBsZXRlZE1hcC5zZXQoZSwhMCl9dXBkYXRlUm9hbWluZ01lc3NhZ2VLZXlBbmRUaW1lKGUsdCxzKXt0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuc2V0KGUse21lc3NhZ2VLZXk6dCxsYXN0TWVzc2FnZVRpbWU6c30pfXVwZGF0ZVJvYW1pbmdNZXNzYWdlU2VxdWVuY2UoZSx0KXt0aGlzLl9yb2FtaW5nTWVzc2FnZVNlcXVlbmNlTWFwLnNldChlLHQpfWdldENvbnZlcnNhdGlvbkxpc3QoZSl7Y29uc3QgdD1cImdldENvbnZlcnNhdGlvbkxpc3RcIixzPWAke3RoaXMuX259LiR7dH1gLG89YHBhZ2luZ1N0YXR1czoke3RoaXMuX3BhZ2luZ1N0YXR1c30sIGxvY2FsIGNvbnZlcnNhdGlvbiBjb3VudDoke3RoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplfSwgb3B0aW9uczoke2V9YDtpZihfZS5sKGAke3N9LiAke299YCksdGhpcy5fcGFnaW5nU3RhdHVzPT09UnQuUkVKRUNURUQpe2NvbnN0IGk9bmV3IENuKHQpO3JldHVybiBpLnNldE1lc3NhZ2UobyksdGhpcy5zeW5jQ29udmVyc2F0aW9uTGlzdCgpLnRoZW4oKCk9PntpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7Y29uc3QgdD10aGlzLl9nZXRDb252ZXJzYXRpb25MaXN0KGUpO3JldHVybiB3bih7Y29udmVyc2F0aW9uTGlzdDp0LGlzU3luY0NvbXBsZXRlZDp0aGlzLl9pc1N5bmNDb21wbGV0ZWQoKX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57aS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWlmKDA9PT10aGlzLl9jb252ZXJzYXRpb25NYXAuc2l6ZSl7Y29uc3QgaT1uZXcgQ24odCk7cmV0dXJuIGkuc2V0TWVzc2FnZShvKSx0aGlzLnN5bmNDb252ZXJzYXRpb25MaXN0KCkudGhlbigoKT0+e2kuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTtjb25zdCB0PXRoaXMuX2dldENvbnZlcnNhdGlvbkxpc3QoZSk7cmV0dXJuIHduKHtjb252ZXJzYXRpb25MaXN0OnQsaXNTeW5jQ29tcGxldGVkOnRoaXMuX2lzU3luY0NvbXBsZXRlZCgpfSl9KS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntpLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9Y29uc3QgaT10aGlzLl9nZXRDb252ZXJzYXRpb25MaXN0KGUpO3JldHVybiBfZS5sKGAke3N9LiByZXR1cm5lZCBjb252ZXJzYXRpb24gY291bnQ6JHtpLmxlbmd0aH1gKSx4bih7Y29udmVyc2F0aW9uTGlzdDppLGlzU3luY0NvbXBsZXRlZDp0aGlzLl9pc1N5bmNDb21wbGV0ZWQoKX0pfV9nZXRDb252ZXJzYXRpb25MaXN0KGUpe2lmKHdlKGUpKXJldHVybiB0aGlzLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpO2lmKGJlKGUpKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuW107cmV0dXJuIHRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkuZmlsdGVyKHQ9PmUuaW5jbHVkZXModC5jb252ZXJzYXRpb25JRCkpfWlmKFBlKGUpKXtjb25zdHt0eXBlOnMsbWFya1R5cGU6byxncm91cE5hbWU6aX09ZTtyZXR1cm4gdGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKS5maWx0ZXIoZT0+KHMhPT10LkNPTlZfQzJDJiZzIT09dC5DT05WX0dST1VQfHxlLnR5cGU9PT1zKSYmKCFVZShpKXx8ZS5jb252ZXJzYXRpb25Hcm91cExpc3QuaW5jbHVkZXMoaSkpJiYoIUdlKG8pfHxlLm1hcmtMaXN0LmluY2x1ZGVzKG8pKSl9cmV0dXJuW119X2hhbmRsZUMyQ1BlZXJSZWFkVGltZSgpe2Zvcihjb25zdFtlLHNdb2YgdGhpcy5fY29udmVyc2F0aW9uTWFwKXMudHlwZT09PXQuQ09OVl9DMkMmJihfZS5kKGAke3RoaXMuX259Ll9oYW5kbGVDMkNQZWVyUmVhZFRpbWUgY29udmVyc2F0aW9uSUQ6JHtlfSBwZWVyUmVhZFRpbWU6JHtzLnBlZXJSZWFkVGltZX1gKSx0aGlzLnJlY29yZFBlZXJSZWFkVGltZShlLHMucGVlclJlYWRUaW1lKSl9X2lzUGFnaW5nR2V0R3JvdXBMaXN0Q29tcGxldGVkKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGRzKS5pc1BhZ2luZ0dldENvbXBsZXRlZCgpfV9nZXRMb2NhbEdyb3VwQ291bnQoKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoZHMpLmdldExvY2FsR3JvdXBMaXN0KCkubGVuZ3RofV9oYXNMb2NhbEdyb3VwKGUpe3JldHVybiB0aGlzLmdldE1vZHVsZShkcykuaGFzTG9jYWxHcm91cChlLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpKX1nZXRDb252ZXJzYXRpb25Qcm9maWxlKGUpe2xldCBzO2lmKHM9dGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKT90aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KGUpOm5ldyBhcih7Y29udmVyc2F0aW9uSUQ6ZSx0eXBlOmUuc2xpY2UoMCwzKT09PXQuQ09OVl9DMkM/dC5DT05WX0MyQzp0LkNPTlZfR1JPVVB9LHRoaXMuaXNJbnRsKCkpLHMuX2lzSW5mb0NvbXBsZXRlZHx8cy50eXBlPT09dC5DT05WX1NZU1RFTSlyZXR1cm4geG4oe2NvbnZlcnNhdGlvbjpzfSk7aWYobnQoZSkmJiF0aGlzLl9oYXNMb2NhbEdyb3VwKGUpKXJldHVybiB4bih7Y29udmVyc2F0aW9uOnN9KTtjb25zdCBvPXRoaXMuX24rXCIuZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiLGk9bmV3IENuKFwiZ2V0Q29udmVyc2F0aW9uUHJvZmlsZVwiKTtyZXR1cm4gX2UubChgJHtvfS4gY29udmVyc2F0aW9uSUQ6JHtlfSByZW1hcms6JHtzLnJlbWFya30gbGFzdE1lc3NhZ2U6YCxzLmxhc3RNZXNzYWdlKSx0aGlzLl91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVDb21wbGV0ZWx5KHMpLnRoZW4obj0+e2kuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBjb252ZXJzYXRpb25JRDoke2V9IHVucmVhZENvdW50OiR7bi5kYXRhLmNvbnZlcnNhdGlvbi51bnJlYWRDb3VudH1gKS5lbmQoKTtjb25zdCByPXRoaXMuZ2V0TW9kdWxlKHBzKTtpZihyJiZzLnR5cGU9PT10LkNPTlZfQzJDKXtjb25zdCBpPWUucmVwbGFjZSh0LkNPTlZfQzJDLFwiXCIpO2lmKHIuaXNNeUZyaWVuZChpKSl7Y29uc3QgdD1yLmdldEZyaWVuZFJlbWFyayhpKTtzLnJlbWFyayE9PXQmJihzLnJlbWFyaz10LF9lLmwoYCR7b30uIGNvbnZlcnNhdGlvbklEOiR7ZX0gcGF0Y2ggcmVtYXJrOiR7cy5yZW1hcmt9YCkpfX1yZXR1cm4gX2UubChgJHtvfSBvay4gY29udmVyc2F0aW9uSUQ6JHtlfWApLG59KS5jYXRjaCh0PT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbcyxvXSk9PntpLnNldEVycm9yKHQscyxvKS5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIrZSkuZW5kKCl9KSxfZS5lKG8rXCIgZmFpbGVkLiBlcnJvcjpcIix0KSxWbih0KSkpfV91cGRhdGVVc2VyT3JHcm91cFByb2ZpbGVDb21wbGV0ZWx5KGUpe2lmKGUudHlwZT09PXQuQ09OVl9DMkMpe3JldHVybiB0aGlzLmdldE1vZHVsZShjcykuZ2V0VXNlclByb2ZpbGUoe3VzZXJJRExpc3Q6W2UudG9BY2NvdW50XX0pLnRoZW4odD0+e2NvbnN0IHM9dC5kYXRhO3JldHVybiAwPT09cy5sZW5ndGg/Vm4obmV3IEZuKHtjb2RlOm5uLlVTRVJfT1JfR1JPVVBfTk9UX0ZPVU5EfSkpOihlLnVzZXJQcm9maWxlPXNbMF0sZS5faXNJbmZvQ29tcGxldGVkPSEwLHRoaXMuX3Vuc2hpZnRDb252ZXJzYXRpb24oZSkseG4oe2NvbnZlcnNhdGlvbjplfSkpfSl9cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGRzKS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6ZS50b0FjY291bnR9KS50aGVuKHQ9PihlLmdyb3VwUHJvZmlsZT10LmRhdGEuZ3JvdXAsZS5faXNJbmZvQ29tcGxldGVkPSEwLHRoaXMuX3Vuc2hpZnRDb252ZXJzYXRpb24oZSkseG4oe2NvbnZlcnNhdGlvbjplfSkpKX1fdW5zaGlmdENvbnZlcnNhdGlvbihlKXtlIGluc3RhbmNlb2YgYXImJiF0aGlzLl9jb252ZXJzYXRpb25NYXAuaGFzKGUuY29udmVyc2F0aW9uSUQpJiYodGhpcy5fY29udmVyc2F0aW9uTWFwPW5ldyBNYXAoW1tlLmNvbnZlcnNhdGlvbklELGVdLC4uLnRoaXMuX2NvbnZlcnNhdGlvbk1hcF0pLHRoaXMuX3NldFN0b3JhZ2VDb252ZXJzYXRpb25MaXN0KCksdGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSl9X29uUHJvZmlsZVVwZGF0ZWQoZSl7ZS5kYXRhLmZvckVhY2goZT0+e2NvbnN0e3VzZXJJRDpzfT1lO2lmKHM9PT10aGlzLmdldE15VXNlcklEKCkpdGhpcy5fb25NeVByb2ZpbGVNb2RpZmllZCh7bGF0ZXN0TmljazplLm5pY2ssbGF0ZXN0QXZhdGFyOmUuYXZhdGFyfSk7ZWxzZXtjb25zdCBvPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoYCR7dC5DT05WX0MyQ30ke3N9YCk7byYmKG8udXNlclByb2ZpbGU9ZSl9fSl9X2lzU3luY0NvbXBsZXRlZCgpe3JldHVybiB0aGlzLl9wYWdpbmdTdGF0dXM9PT1SdC5SRVNPTFZFRH1fZXJyb3JMb2coZSx0LHMsbyl7Y29uc3QgaT1uZXcgRXJyb3IoXCJQYXJhbXMgdmFsaWRhdGUgZmFpbGVkLlwiKSxuPWAke3RoaXMuZ2V0RXJyb3JNZXNzYWdlKFwiQVBJX1JFRkVSXCIpfSR7ZX1gO3Rocm93IF9lLncoYFske2V9XSB8ICR7dH0gfCAke3RoaXMuZ2V0RXJyb3JNZXNzYWdlKHMsbyl9LCAke259YCksX2UuZShgWyR7ZX1dIEludmFsaWQgJHt0fTogdHlwZSBjaGVjayBmYWlsZWQgZm9yICR7dH0uYCksaX1faXNWYWxpZENvbnZlcnNhdGlvbklEKGUpe3JldHVybiBpdChlKXx8bnQoZSl8fHJ0KGUpfWRlbGV0ZUNvbnZlcnNhdGlvbihlKXtjb25zdCB0PVwiZGVsZXRlQ29udmVyc2F0aW9uXCI7cmV0dXJuIFVlKGUpfHxrZShlKXx8dGhpcy5fZXJyb3JMb2codCxcIm9wdGlvbnNcIixcIlN0cmluZ09yT2JqZWN0UmVxdWlyZWRMb2dcIiksVWUoZSk/KHRoaXMuX2lzVmFsaWRDb252ZXJzYXRpb25JRChlKXx8dGhpcy5fZXJyb3JMb2codCxcIm9wdGlvbnNcIixcIkludmFsaWRDb252ZXJzYXRpb25JRFwiLGUpLF9lLmwoYCR7dGhpcy5fbn0uJHt0fSBjb252ZXJzYXRpb25JRDoke2V9YCksdGhpcy5kZWxldGVDb252ZXJzYXRpb25MaXN0KHtjb252ZXJzYXRpb25JRExpc3Q6W2VdLGZsYWc6MX0pKTooYmUoZS5jb252ZXJzYXRpb25JRExpc3QpfHx0aGlzLl9lcnJvckxvZyh0LFwiY29udmVyc2F0aW9uSURMaXN0XCIsXCJBcnJheVJlcXVpcmVkTG9nXCIpLDA9PT1lLmNvbnZlcnNhdGlvbklETGlzdC5sZW5ndGgmJnRoaXMuX2Vycm9yTG9nKHQsXCJjb252ZXJzYXRpb25JRExpc3RcIixcIk5vbkVtcHR5QXJyYXlMb2dcIiksZS5jb252ZXJzYXRpb25JRExpc3QuZm9yRWFjaChlPT57dGhpcy5faXNWYWxpZENvbnZlcnNhdGlvbklEKGUpfHx0aGlzLl9lcnJvckxvZyh0LFwiY29udmVyc2F0aW9uSURMaXN0XCIsXCJJbnZhbGlkQ29udmVyc2F0aW9uSURcIixlKX0pLFwiY2xlYXJIaXN0b3J5TWVzc2FnZVwiaW4gZSYmXCJib29sZWFuXCIhPXR5cGVvZiBlLmNsZWFySGlzdG9yeU1lc3NhZ2UmJnRoaXMuX2Vycm9yTG9nKHQsXCJjbGVhckhpc3RvcnlNZXNzYWdlXCIsXCJCb29sZWFuUmVxdWlyZWRMb2dcIiksZS5jb252ZXJzYXRpb25JRExpc3QubGVuZ3RoPjEwMCYmKGUuY29udmVyc2F0aW9uSURMaXN0PWUuY29udmVyc2F0aW9uSURMaXN0LnNsaWNlKDAsMTAwKSksdGhpcy5kZWxldGVDb252ZXJzYXRpb25MaXN0KGUpKX1kZWxldGVDb252ZXJzYXRpb25MaXN0KGUpe2NvbnN0e2NvbnZlcnNhdGlvbklETGlzdDp0PVtdLGNsZWFySGlzdG9yeU1lc3NhZ2U6cz0hMCxmbGFnOm89MH09ZSxpPXRoaXMuX24rXCIuZGVsZXRlQ29udmVyc2F0aW9uTGlzdFwiO19lLmwoYCR7aX0gY29udmVyc2F0aW9uSURMaXN0Lmxlbmd0aDoke3QubGVuZ3RofSBjbGVhckhpc3RvcnlNZXNzYWdlOiR7c31gKTtjb25zdCBuPW5ldyBDbihcImRlbGV0ZUNvbnZlcnNhdGlvbkxpc3RcIik7cmV0dXJuIG4uc2V0TWVzc2FnZShcImNvbnZlcnNhdGlvbklETGlzdDpcIit0KSxQcm9taXNlLmFsbChbdGhpcy5ybUxvY2FsT25seUNvbnZlcnNhdGlvbkxpc3QodCksdGhpcy5ybUxvY2FsQW5kUmVtb3RlQ29udmVyc2F0aW9uTGlzdCh0LHMpXSkudGhlbihlPT57bi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO2NvbnN0IHQ9Wy4uLmVbMF0sLi4uZVsxXV07cmV0dXJuIDA9PT10Lmxlbmd0aD9WbihuZXcgRm4oe2NvZGU6bm4uQ09OVkVSU0FUSU9OX05PVF9GT1VORH0pKTooX2UubChpK1wiIG9rXCIpLHhuKDE9PT1vP3tjb252ZXJzYXRpb25JRDp0WzBdfTp7Y29udmVyc2F0aW9uSURMaXN0OnR9KSl9KS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntuLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUoaStcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9cm1Mb2NhbE9ubHlDb252ZXJzYXRpb25MaXN0KGUpe3JldHVybiBlLmZpbHRlcihlPT57aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSkpcmV0dXJuITE7Y29uc3Qgcz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLnR5cGU7aWYocz09PXQuQ09OVl9HUk9VUCYmIXRoaXMuX2hhc0xvY2FsR3JvdXAoZSkpcmV0dXJuIHRoaXMuZGVsZXRlTG9jYWxDb252ZXJzYXRpb24oZSksITA7aWYocz09PXQuQ09OVl9TWVNURU0pe3JldHVybiB0aGlzLmdldE1vZHVsZShkcykuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2Uoe21lc3NhZ2VMaXN0OnRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMb2NhbE1lc3NhZ2VMaXN0KGUpfSksdGhpcy5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlKSwhMH1yZXR1cm4hMX0pfXJtTG9jYWxBbmRSZW1vdGVDb252ZXJzYXRpb25MaXN0KGUscyl7Y29uc3Qgbz17ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLGNvbnZlcnNhdGlvbkxpc3Q6W10sY2xlYXJIaXN0b3J5TWVzc2FnZTpzPzE6MH07cmV0dXJuIGUuZm9yRWFjaChlPT57aWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKSl7Y29uc3Qgcz10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpLnR5cGU7cz09PXQuQ09OVl9DMkM/by5jb252ZXJzYXRpb25MaXN0LnB1c2goe3RvQWNjb3VudDplLnJlcGxhY2UocyxcIlwiKSx0eXBlOjF9KTpzPT09dC5DT05WX0dST1VQJiZ0aGlzLl9oYXNMb2NhbEdyb3VwKGUpJiZvLmNvbnZlcnNhdGlvbkxpc3QucHVzaCh7dG9Hcm91cElEOmUucmVwbGFjZShzLFwiXCIpLHR5cGU6Mn0pfX0pLDA9PT1vLmNvbnZlcnNhdGlvbkxpc3QubGVuZ3RoP1tdOnRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlNvLHJlcXVlc3REYXRhOm99KS50aGVuKGU9Pntjb25zdCBzPVtdO3JldHVybiBlLmRhdGEucmVzdWx0TGlzdC5sZW5ndGg+MCYmZS5kYXRhLnJlc3VsdExpc3QubWFwKGU9PntpZigwPT09ZS5jb2RlKXtjb25zdCBvPTE9PT1lLnR5cGU/YCR7dC5DT05WX0MyQ30ke2UudG99YDpgJHt0LkNPTlZfR1JPVVB9JHtlLmdyb3VwSUR9YDtzLnB1c2gobyl9fSksdGhpcy5kZWxldGVMb2NhbENvbnZlcnNhdGlvbkxpc3Qocyksc30pfWNsZWFySGlzdG9yeU1lc3NhZ2UoZSl7Y29uc3Qgcz17ZnJvbUFjY291bnQ6dGhpcy5nZXRNeVVzZXJJRCgpLHRvQWNjb3VudDp2b2lkIDAsdHlwZTp2b2lkIDAsdG9Hcm91cElEOnZvaWQgMH07aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSkpcmV0dXJuIFZuKHtjb2RlOm5uLkNPTlZFUlNBVElPTl9OT1RfRk9VTkR9KTtjb25zdCBvPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSkudHlwZTtpZihvPT09dC5DT05WX0MyQylzLnR5cGU9MSxzLnRvQWNjb3VudD1lLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKTtlbHNle2lmKG8hPT10LkNPTlZfR1JPVVApe2lmKG89PT10LkNPTlZfU1lTVEVNKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoZHMpLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDp0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuZ2V0TG9jYWxNZXNzYWdlTGlzdChlKX0pLHhuKHtjb252ZXJzYXRpb25JRDplfSl9cmV0dXJuIFZuKHtjb2RlOm5uLkNPTlZFUlNBVElPTl9VTl9SRUNPUkRFRF9UWVBFfSl9cy50eXBlPTIscy50b0dyb3VwSUQ9ZS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKX1jb25zdCBpPXRoaXMuX24rXCIuY2xlYXJIaXN0b3J5TWVzc2FnZVwiLG49bmV3IENuKFwiY2xlYXJIaXN0b3J5TWVzc2FnZVwiKTtyZXR1cm4gbi5zZXRNZXNzYWdlKFwiY29udmVyc2F0aW9uSUQ6XCIrZSksX2UubChgJHtpfS4gY29udmVyc2F0aW9uSUQ6JHtlfWApLHRoaXMuc2V0TWVzc2FnZVJlYWQoe2NvbnZlcnNhdGlvbklEOmV9KS50aGVuKCgpPT50aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpMbyxyZXF1ZXN0RGF0YTpzfSkpLnRoZW4oKCk9PntuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubChpK1wiIG9rXCIpLHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmVCeUNvbnZlcnNhdGlvbklEKGUpLHRoaXMuc2V0Q29tcGxldGVkKGUpO2NvbnN0IHQ9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihlKTtyZXR1cm4gdCYmKHQudXBkYXRlTGFzdE1lc3NhZ2UoKSx0aGlzLl9zb3J0Q29udmVyc2F0aW9uTGlzdEFuZEVtaXRFdmVudCgpKSx4bih7Y29udmVyc2F0aW9uSUQ6ZX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bi5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKGkrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfXBpbkNvbnZlcnNhdGlvbihlKXtjb25zdHtjb252ZXJzYXRpb25JRDpzLGlzUGlubmVkOm99PWU7aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMocykpcmV0dXJuIFZuKHtjb2RlOm5uLkNPTlZFUlNBVElPTl9OT1RfRk9VTkR9KTtjb25zdCBpPXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb24ocyk7aWYoaS5pc1Bpbm5lZD09PW8pcmV0dXJuIHhuKHtjb252ZXJzYXRpb25JRDpzfSk7Y29uc3Qgbj10aGlzLl9uK1wiLnBpbkNvbnZlcnNhdGlvblwiLHI9bmV3IENuKFwicGluQ29udmVyc2F0aW9uXCIpO3Iuc2V0TWVzc2FnZShgY29udmVyc2F0aW9uSUQ6JHtzfSBpc1Bpbm5lZDoke299YCksX2UubChgJHtufS4gY29udmVyc2F0aW9uSUQ6JHtzfSBpc1Bpbm5lZDoke299YCk7bGV0IGE9bnVsbDtyZXR1cm4gaXQocyk/YT17dHlwZToxLHRvQWNjb3VudDpzLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKX06bnQocykmJihhPXt0eXBlOjIsZ3JvdXBJRDpzLnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpfSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QW8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSxvcGVyYXRpb25UeXBlOiEwPT09bz8xOjIsaXRlbUxpc3Q6W2FdfX0pLnRoZW4oKCk9PihyLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubChuK1wiIG9rXCIpLGkuaXNQaW5uZWQhPT1vJiYoaS5pc1Bpbm5lZD1vLHRoaXMuX3NvcnRDb252ZXJzYXRpb25MaXN0QW5kRW1pdEV2ZW50KCkpLHduKHtjb252ZXJzYXRpb25JRDpzfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntyLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUobitcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9c2V0TWVzc2FnZVJlbWluZFR5cGUoZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VSZW1pbmRIYW5kbGVyLnNldChlKX1wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKGUpe2NvbnN0e0lEOnMsaXNDMkNDb252ZXJzYXRpb246byxtZXNzYWdlUmVtaW5kVHlwZTppfT1lO2xldCBuPSExO2NvbnN0IHI9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbihvP2Ake3QuQ09OVl9DMkN9JHtzfWA6YCR7dC5DT05WX0dST1VQfSR7c31gKTtyZXR1cm4gciYmci5tZXNzYWdlUmVtaW5kVHlwZSE9PWkmJihyLm1lc3NhZ2VSZW1pbmRUeXBlPWksbj0hMCksX2UuZCh0aGlzLl9uK1wiLnBhdGNoTWVzc2FnZVJlbWluZFR5cGUgb3B0aW9uczpcIixlLFwicmV0OlwiK24pLG59b25DMkNNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZChlKXtjb25zdCBzPXRoaXMuX24rXCIub25DMkNNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZFwiO19lLmQocyxlKSxlLmRhdGFMaXN0LmZvckVhY2goZT0+e2lmKCFMdChlLm11dGVOb3RpZmljYXRpb25zU3luYykpe2NvbnN0e3RvOm8sdXBkYXRlU2VxdWVuY2U6aSxtdXRlRmxhZzpufT1lLm11dGVOb3RpZmljYXRpb25zU3luYztsZXQgcjt0aGlzLl9tZXNzYWdlUmVtaW5kSGFuZGxlci5zZXRVcGRhdGVTZXF1ZW5jZShpKSwwPT09bj9yPXQuTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFOjE9PT1uP3I9dC5NU0dfUkVNSU5EX0RJU0NBUkQ6Mj09PW4mJihyPXQuTVNHX1JFTUlORF9BQ1BUX05PVF9OT1RFKTtsZXQgYT0wO3RoaXMucGF0Y2hNZXNzYWdlUmVtaW5kVHlwZSh7SUQ6byxpc0MyQ0NvbnZlcnNhdGlvbjohMCxtZXNzYWdlUmVtaW5kVHlwZTpyfSkmJihhKz0xKSxfZS5sKGAke3N9IHVwZGF0ZUNvdW50OiR7YX1gKSxhPj0xJiZ0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX0pfW9uR3JvdXBNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZChlKXtfZS5kKHRoaXMuX24rXCIub25Hcm91cE1lc3NhZ2VSZW1pbmRUeXBlU3luY2VkIG9wdGlvbnM6XCIsZSksdGhpcy5fbWVzc2FnZVJlbWluZEhhbmRsZXIub25Hcm91cE1lc3NhZ2VSZW1pbmRUeXBlVXBkYXRlZChlKX1kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlLHQ9ITApe2NvbnN0IHM9dGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKTtpZihfZS5kKGAke3RoaXMuX259LmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uIGNvbnZlcnNhdGlvbklEOiR7ZX0gaGFzOiR7c31gKSxzJiYodGhpcy5fY29udmVyc2F0aW9uTWFwLmRlbGV0ZShlKSx0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuaGFzKGUpJiZ0aGlzLl9yb2FtaW5nTWVzc2FnZUtleUFuZFRpbWVNYXAuZGVsZXRlKGUpLHRoaXMuX3JvYW1pbmdNZXNzYWdlU2VxdWVuY2VNYXAuaGFzKGUpJiZ0aGlzLl9yb2FtaW5nTWVzc2FnZVNlcXVlbmNlTWFwLmRlbGV0ZShlKSx0aGlzLl9zZXRTdG9yYWdlQ29udmVyc2F0aW9uTGlzdCgpLHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5yZW1vdmVCeUNvbnZlcnNhdGlvbklEKGUpLHRoaXMuX2NvbXBsZXRlZE1hcC5kZWxldGUoZSksdCkpe2NvbnN0IHQ9IXRoaXMuX2lzVG9waWNDb252ZXJzYXRpb24oZSk7dGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKHQsITEpfX1kZWxldGVMb2NhbENvbnZlcnNhdGlvbkxpc3QoZSl7bGV0IHQ9MCxzPSExO2UuZm9yRWFjaChlPT57dGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyhlKSYmKHQrPXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5nZXQoZSkudW5yZWFkQ291bnR8fDAsdGhpcy5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihlLCExKSxzPSEwKX0pLF9lLmwoYCR7dGhpcy5fbn0uZGVsZXRlTG9jYWxDb252ZXJzYXRpb25MaXN0IGNvbnZlcnNhdGlvbklETGlzdC5sZW5ndGg6JHtlLmxlbmd0aH0gaXNDb252SURFeGlzdGVkOiR7c31gKSxzJiYodGhpcy5lbWl0Q29udmVyc2F0aW9uVXBkYXRlKCEwLCExKSx0PjAmJnRoaXMuZW1pdFRvdGFsVW5yZWFkTWVzc2FnZUNvdW50VXBkYXRlKCkpfWlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShlKXtyZXR1cm4hKCF0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIuaGFzTG9jYWxNZXNzYWdlKGUuY29udmVyc2F0aW9uSUQsZS5JRCkmJiF0aGlzLnNpbmdseUxpbmtlZExpc3QuaGFzKGUucmFuZG9tKSl9bW9kaWZ5TWVzc2FnZUxpc3QoZSl7aWYoIWUuc3RhcnRzV2l0aCh0LkNPTlZfQzJDKSlyZXR1cm47aWYoIXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5oYXMoZSkpcmV0dXJuO2NvbnN0IHM9dGhpcy5fY29udmVyc2F0aW9uTWFwLmdldChlKSxvPURhdGUubm93KCk7dGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKHtjb252ZXJzYXRpb25JRDplLGxhdGVzdE5pY2s6cy51c2VyUHJvZmlsZS5uaWNrLGxhdGVzdEF2YXRhcjpzLnVzZXJQcm9maWxlLmF2YXRhcn0pO2NvbnN0IGk9dGhpcy5nZXRNb2R1bGUoY3MpLmdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0aGlzLmdldE15VXNlcklEKCkpO3RoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOmUsbGF0ZXN0TmljazppLm5pY2ssbGF0ZXN0QXZhdGFyOmkuYXZhdGFyfSksX2UubChgJHt0aGlzLl9ufS5tb2RpZnlNZXNzYWdlTGlzdCBjb252ZXJzYXRpb25JRDoke2V9IGNvc3QgJHtEYXRlLm5vdygpLW99IG1zYCl9dXBkYXRlVXNlclByb2ZpbGVTcGVjaWZpZWRLZXkoZSl7X2UubCh0aGlzLl9uK1wiLnVwZGF0ZVVzZXJQcm9maWxlU3BlY2lmaWVkS2V5IG9wdGlvbnM6XCIsZSk7Y29uc3R7Y29udmVyc2F0aW9uSUQ6dCxuaWNrOnMsYXZhdGFyOm99PWU7aWYodGhpcy5fY29udmVyc2F0aW9uTWFwLmhhcyh0KSl7Y29uc3QgZT10aGlzLl9jb252ZXJzYXRpb25NYXAuZ2V0KHQpLnVzZXJQcm9maWxlO1VlKHMpJiZlLm5pY2shPT1zJiYoZS5uaWNrPXMpLFVlKG8pJiZlLmF2YXRhciE9PW8mJihlLmF2YXRhcj1vKSx0aGlzLmVtaXRDb252ZXJzYXRpb25VcGRhdGUoITAsITEpfX1fb25NeVByb2ZpbGVNb2RpZmllZChlKXtjb25zdCB0PXRoaXMuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkscz1EYXRlLm5vdygpO3QuZm9yRWFjaCh0PT57dGhpcy5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOnQuY29udmVyc2F0aW9uSUQsLi4uZX0pfSksX2UubChgJHt0aGlzLl9ufS5fb25NeVByb2ZpbGVNb2RpZmllZC4gbW9kaWZ5IGFsbCBtZXNzYWdlcyBzZW50IGJ5IG1lLCBjb3N0ICR7RGF0ZS5ub3coKS1zfSBtc2ApfW1vZGlmeU1lc3NhZ2VTZW50QnlNZShlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeU1lKGUpfWdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExhdGVzdE1lc3NhZ2VTZW50QnlNZShlKX1tb2RpZnlNZXNzYWdlU2VudEJ5UGVlcihlKXt0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIubW9kaWZ5TWVzc2FnZVNlbnRCeVBlZXIoZSl9Z2V0TGF0ZXN0TWVzc2FnZVNlbnRCeVBlZXIoZSl7cmV0dXJuIHRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5nZXRMYXRlc3RNZXNzYWdlU2VudEJ5UGVlcihlKX1wdXNoSW50b05vdGljZVJlc3VsdChlLHQpe3JldHVybiEoIXRoaXMuX21lc3NhZ2VMaXN0SGFuZGxlci5wdXNoSW4odCl8fHRoaXMuc2luZ2x5TGlua2VkTGlzdC5oYXModC5yYW5kb20pKSYmKGUucHVzaCh0KSwhMCl9Z2V0TG9jYWxMYXN0TWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUxpc3RIYW5kbGVyLmdldExvY2FsTGFzdE1lc3NhZ2UoZSl9Y2hlY2tBbmRQYXRjaFJlbWFyaygpe2NvbnN0IGU9UHJvbWlzZS5yZXNvbHZlKCk7aWYoMD09PXRoaXMuX2NvbnZlcnNhdGlvbk1hcC5zaXplKXJldHVybiBlO2NvbnN0IHM9dGhpcy5nZXRNb2R1bGUocHMpO2lmKCFzKXJldHVybiBlO2NvbnN0IG89Wy4uLnRoaXMuX2NvbnZlcnNhdGlvbk1hcC52YWx1ZXMoKV0uZmlsdGVyKGU9PmUudHlwZT09PXQuQ09OVl9DMkMpO2lmKDA9PT1vLmxlbmd0aClyZXR1cm4gZTtsZXQgaT0wO3JldHVybiBvLmZvckVhY2goZT0+e2NvbnN0IG89ZS5jb252ZXJzYXRpb25JRC5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIik7aWYocy5pc015RnJpZW5kKG8pKXtjb25zdCB0PXMuZ2V0RnJpZW5kUmVtYXJrKG8pO2UucmVtYXJrIT09dCYmKGUucmVtYXJrPXQsaSs9MSl9fSksX2UubChgJHt0aGlzLl9ufS5jaGVja0FuZFBhdGNoUmVtYXJrLiBjMmMgY29udmVyc2F0aW9uIGNvdW50OiR7by5sZW5ndGh9LCBwYXRjaGVkIGNvdW50OiR7aX1gKSxlfXVwZGF0ZVRvcGljQ29udmVyc2F0aW9uKGUpe3RoaXMuX3VwZGF0ZUxvY2FsQ29udmVyc2F0aW9uTGlzdCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6ZSxpc0Zyb21HZXRDb252ZXJzYXRpb25zOiEwfSl9c2VuZFJlYWRSZWNlaXB0KGUpe2NvbnN0IHM9ZVswXTtsZXQgbz1udWxsO3JldHVybiBzLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDP289dGhpcy5fbS5nZXRNb2R1bGUobHMpOnMuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUCYmKG89dGhpcy5fbS5nZXRNb2R1bGUoZHMpKSxvP28uc2VuZFJlYWRSZWNlaXB0KGUpOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pfWdldFJlYWRSZWNlaXB0TGlzdChlKXtjb25zdCBzPWVbMF07bGV0IG89bnVsbDtyZXR1cm4gcy5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0MyQz9vPXRoaXMuX20uZ2V0TW9kdWxlKGxzKTpzLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfR1JPVVAmJihvPXRoaXMuX20uZ2V0TW9kdWxlKGRzKSksbz9vLmdldFJlYWRSZWNlaXB0TGlzdChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1nZXRMYXN0TWVzc2FnZVRpbWUoZSl7Y29uc3QgdD10aGlzLmdldExvY2FsQ29udmVyc2F0aW9uKGUpO3JldHVybiB0P3QubGFzdE1lc3NhZ2UubGFzdFRpbWU6MH1nZXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudCgpe2NvbnN0IGU9dGhpcy5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKTtsZXQgcz0wO3JldHVybiBlLmZvckVhY2goZT0+e2UudHlwZSE9PXQuQ09OVl9TWVNURU0mJihcIlwiIT09ZS5tZXNzYWdlUmVtaW5kVHlwZSYmZS5tZXNzYWdlUmVtaW5kVHlwZSE9PXQuTVNHX1JFTUlORF9BQ1BUX0FORF9OT1RFfHwocys9ZS51bnJlYWRDb3VudCkpfSksc31lbWl0VG90YWxVbnJlYWRNZXNzYWdlQ291bnRVcGRhdGUoKXtjb25zdCB0PXRoaXMuZ2V0VG90YWxVbnJlYWRNZXNzYWdlQ291bnQoKTt0aGlzLl9jb252VG90YWxVbnJlYWRDb3VudCE9PXQmJihfZS5sKGAke3RoaXMuX259LmVtaXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudFVwZGF0ZSBmcm9tICR7dGhpcy5fY29udlRvdGFsVW5yZWFkQ291bnR9IHRvICR7dH1gKSx0aGlzLl9jb252VG90YWxVbnJlYWRDb3VudD10LHRoaXMuZW1pdE91dGVyRXZlbnQoZS5UT1RBTF9VTlJFQURfTUVTU0FHRV9DT1VOVF9VUERBVEVEKSl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fcGFnaW5nU3RhdHVzPVJ0Lk5PVF9TVEFSVCx0aGlzLl9tZXNzYWdlTGlzdEhhbmRsZXIucmVzZXQoKSx0aGlzLl9tZXNzYWdlUmVtaW5kSGFuZGxlci5yZXNldCgpLHRoaXMuX3JvYW1pbmdNZXNzYWdlS2V5QW5kVGltZU1hcC5jbGVhcigpLHRoaXMuX3JvYW1pbmdNZXNzYWdlU2VxdWVuY2VNYXAuY2xlYXIoKSx0aGlzLnNpbmdseUxpbmtlZExpc3QucmVzZXQoKSx0aGlzLl9wZWVyUmVhZFRpbWVNYXAuY2xlYXIoKSx0aGlzLl9jb21wbGV0ZWRNYXAuY2xlYXIoKSx0aGlzLl9jb252ZXJzYXRpb25NYXAuY2xlYXIoKSx0aGlzLl9wYWdpbmdUaW1lU3RhbXA9MCx0aGlzLl9wYWdpbmdTdGFydEluZGV4PTAsdGhpcy5fcGFnaW5nUGlubmVkVGltZVN0YW1wPTAsdGhpcy5fcGFnaW5nUGlubmVkU3RhcnRJbmRleD0wLHRoaXMuX3JlbW90ZUdyb3VwUmVhZFNlcXVlbmNlTWFwLmNsZWFyKCksdGhpcy5fY29udlRvdGFsVW5yZWFkQ291bnQ9MCx0aGlzLl9wYWdpbmdHZXRDb3N0TGlzdC5sZW5ndGg9MCx0aGlzLnJlc2V0UmVhZHkoKX19Y2xhc3MgZHJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fZ3JvdXBNb2R1bGU9ZSx0aGlzLl9uPVwiR3JvdXBUaXBzSGFuZGxlclwiLHRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcD1uZXcgTWFwLHRoaXMuX2NoZWNrQ291bnRNYXA9bmV3IE1hcCx0aGlzLk1BWF9DSEVDS19DT1VOVD00LHRoaXMuX2dldFRvcGljUGVuZGluZ01hcD1uZXcgTWFwfW9uQ2hlY2tUaW1lcihlKXtlJTE9PTAmJnRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5zaXplPjAmJnRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBUaXBzKCl9X2NoZWNrQ2FjaGVkR3JvdXBUaXBzKCl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmZvckVhY2goKGUsdCk9PntsZXQgcz10aGlzLl9jaGVja0NvdW50TWFwLmdldCh0KTtjb25zdCBvPXRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCk7X2UubChgJHt0aGlzLl9ufS5fY2hlY2tDYWNoZWRHcm91cFRpcHMgZ3JvdXBJRDoke3R9IGhhc0xvY2FsR3JvdXA6JHtvfSBjaGVja0NvdW50OiR7c31gKSxvPyh0aGlzLl9ub3RpZnlDYWNoZWRHcm91cFRpcHModCksdGhpcy5fY2hlY2tDb3VudE1hcC5kZWxldGUodCksdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKHQpKTpzPj10aGlzLk1BWF9DSEVDS19DT1VOVD8odGhpcy5fZGVsZXRlQ2FjaGVkR3JvdXBUaXBzKHQpLHRoaXMuX2NoZWNrQ291bnRNYXAuZGVsZXRlKHQpKToocysrLHRoaXMuX2NoZWNrQ291bnRNYXAuc2V0KHQscykpfSl9b25OZXdHcm91cFRpcHModCl7X2UuZChgJHt0aGlzLl9ufS5vblJlY2VpdmVHcm91cFRpcHMgY291bnQ6JHt0LmRhdGFMaXN0Lmxlbmd0aH1gKTtjb25zdHtldmVudERhdGFMaXN0OnMscmVzdWx0Om8sQVZDaGF0Um9vbU1lc3NhZ2VMaXN0Oml9PXRoaXMubmV3R3JvdXBUaXBzU3RvcmVkQW5kU3VtbWFyeSh0KTtpZihpLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5vbkFWQ2hhdFJvb21NZXNzYWdlKGkpLHMubGVuZ3RoPjApe3RoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZU5leHRNZXNzYWdlU2VxKHMpO3RoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShfcykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6ITB9KX1vLmxlbmd0aD4wJiYodGhpcy5fZ3JvdXBNb2R1bGUuZW1pdE91dGVyRXZlbnQoZS5NRVNTQUdFX1JFQ0VJVkVELG8pLHRoaXMuaGFuZGxlTWVzc2FnZUxpc3QobykpfW5ld0dyb3VwVGlwc1N0b3JlZEFuZFN1bW1hcnkoZSl7Y29uc3R7ZXZlbnQ6cyxkYXRhTGlzdDpvfT1lO2xldCBpPW51bGw7Y29uc3Qgbj1bXSxyPVtdLGE9e30sdT1bXTtmb3IobGV0IGM9MCxsPW8ubGVuZ3RoO2M8bDtjKyspe2NvbnN0IGU9WmUob1tjXSk7aWYoNj09PXMpe2lmKHRoaXMuX2dyb3VwTW9kdWxlLmlzR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZE5vdGljZShlKSljb250aW51ZTtpZih0aGlzLl9ncm91cE1vZHVsZS5pc0dyb3VwQ291bnRlcnNOb3RpY2UoZSkpY29udGludWV9Y29uc3R7Z3JvdXBQcm9maWxlOntncm91cElEOmwsY29tbXVuaXR5VHlwZTpkPTAsdG9waWNJRDpwLGludmlzaWJsZTpofX09ZTtsZXQgZz12b2lkIDA7Y29uc3QgXz10aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tVG9waWMoZCxwKTtpZihfKXtnPXQuQ09OVl9UT1BJQyxlLnRvPXA7Y29uc3Qgcz10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZ3MpO3MuaGFzTG9jYWxUb3BpYyhsLHApfHx0aGlzLl9nZXRUb3BpY1BlbmRpbmdNYXAuaGFzKHApfHwodGhpcy5fZ2V0VG9waWNQZW5kaW5nTWFwLnNldChwLDEpLHMuZ2V0VG9waWNMaXN0KHtncm91cElEOmwsdG9waWNJRExpc3Q6W3BdfSkuZmluYWxseSgoKT0+e3RoaXMuX2dldFRvcGljUGVuZGluZ01hcC5kZWxldGUocCl9KSl9Y29uc3QgbT10aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKGwpO2lmKCFtJiZ0aGlzLl9ncm91cE1vZHVsZS5pc1Vuam9pbmVkQVZDaGF0Um9vbShsKSljb250aW51ZTtpZighbSYmIV8pe3RoaXMuX2NhY2hlR3JvdXBUaXBzQW5kUHJvYmUoe2dyb3VwSUQ6bCxldmVudDpzLGl0ZW06ZX0pO2NvbnRpbnVlfWlmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShsKSl7ZS5ldmVudD1zLHUucHVzaChlKTtjb250aW51ZX1pZihlLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksZS5jb252ZXJzYXRpb25UeXBlPXQuQ09OVl9HUk9VUCxpPW5ldyBibihlKSxpLnNldEVsZW1lbnQoe3R5cGU6dC5NU0dfR1JQX1RJUCxjb250ZW50OnsuLi5lLmVsZW1lbnRzLGdyb3VwUHJvZmlsZTplLmdyb3VwUHJvZmlsZX19KSxpLmlzU3lzdGVtTWVzc2FnZT0hMSwxPT09aCl7dGhpcy5fcXVhbGl0eVN0YXQoaSk7Y29udGludWV9Y29uc3QgTT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoX3MpLHtjb252ZXJzYXRpb25JRDpmLHNlcXVlbmNlOkl9PWk7aWYoNj09PXMpaS5fb25saW5lT25seUZsYWc9ITAsci5wdXNoKGkpO2Vsc2V7aWYoIU0ucHVzaEludG9Ob3RpY2VSZXN1bHQocixpKSljb250aW51ZX1pZih0aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tQ29tbXVuaXR5T2ZUb3BpYyhkLHApKWNvbnRpbnVlO2lmKDY9PT1zJiZNLmdldExvY2FsQ29udmVyc2F0aW9uKGYpKWNvbnRpbnVlOzYhPT1zJiZ0aGlzLl9xdWFsaXR5U3RhdChpKTtjb25zdCBDPU0uaXNSZW1vdGVSZWFkKHtjb252ZXJzYXRpb25JRDpmLHNlcXVlbmNlOkl9KTtpZih3ZShhW2ZdKSl7bGV0IGU9MDtcImluXCI9PT1pLmZsb3cmJihpLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50fHxpLl9vbmxpbmVPbmx5RmxhZ3x8Q3x8KGU9MSkpLGFbZl09bi5wdXNoKHtjb252ZXJzYXRpb25JRDpmLHVucmVhZENvdW50OmUsdHlwZTp3ZShnKT9pLmNvbnZlcnNhdGlvblR5cGU6ZyxzdWJUeXBlOmkuY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTppLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6aX0pLTF9ZWxzZXtjb25zdCBlPWFbZl07bltlXS50eXBlPWkuY29udmVyc2F0aW9uVHlwZSxuW2VdLnN1YlR5cGU9aS5jb252ZXJzYXRpb25TdWJUeXBlLG5bZV0ubGFzdE1lc3NhZ2U9aS5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT9cIlwiOmksXCJpblwiPT09aS5mbG93JiYoaS5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudHx8aS5fb25saW5lT25seUZsYWd8fEN8fG5bZV0udW5yZWFkQ291bnQrKyl9fXJldHVybntldmVudERhdGFMaXN0Om4scmVzdWx0OnIsQVZDaGF0Um9vbU1lc3NhZ2VMaXN0OnV9fV9xdWFsaXR5U3RhdChlKXt0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoUnMpLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OmhuLG1lc3NhZ2U6ZX0pfWhhbmRsZU1lc3NhZ2VMaXN0KGUpe2UuZm9yRWFjaChlPT57c3dpdGNoKGUucGF5bG9hZC5vcGVyYXRpb25UeXBlKXtjYXNlIDE6dGhpcy5fb25OZXdNZW1iZXJDb21lSW4oZSk7YnJlYWs7Y2FzZSAyOnRoaXMuX29uTWVtYmVyUXVpdChlKTticmVhaztjYXNlIDM6dGhpcy5fb25NZW1iZXJLaWNrZWRPdXQoZSk7YnJlYWs7Y2FzZSA0OnRoaXMuX29uTWVtYmVyU2V0QWRtaW4oZSk7YnJlYWs7Y2FzZSA1OnRoaXMuX29uTWVtYmVyQ2FuY2VsbGVkQWRtaW4oZSk7YnJlYWs7Y2FzZSA2OnRoaXMuX29uR3JvdXBQcm9maWxlTW9kaWZpZWQoZSk7YnJlYWs7Y2FzZSA3OnRoaXMuX29uTWVtYmVySW5mb01vZGlmaWVkKGUpO2JyZWFrO2Nhc2UgODp0aGlzLl9vblRvcGljUHJvZmlsZVVwZGF0ZWQoZSk7YnJlYWs7ZGVmYXVsdDpfZS53KGAke3RoaXMuX259LmhhbmRsZU1lc3NhZ2VMaXN0IHVua25vd24gb3BlcmF0aW9uVHlwZToke2UucGF5bG9hZC5vcGVyYXRpb25UeXBlfWApfX0pfV9vbk5ld01lbWJlckNvbWVJbihlKXtjb25zdHttZW1iZXJOdW06dCxncm91cFByb2ZpbGU6e2dyb3VwSUQ6c319PWUucGF5bG9hZCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHMpO28mJkdlKHQpJiZvLm1lbWJlckNvdW50IT09dCYmKG8ubWVtYmVyQ291bnQ9dCx0aGlzLl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUobykpfV9vbk1lbWJlclF1aXQoZSl7Y29uc3R7bWVtYmVyTnVtOnQsZ3JvdXBQcm9maWxlOntncm91cElEOnN9fT1lLnBheWxvYWQsbz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShzKTtvJiZHZSh0KSYmby5tZW1iZXJDb3VudCE9PXQmJihvLm1lbWJlckNvdW50PXQsdGhpcy5fdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKG8pKTt0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoaHMpLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKHMsZS5wYXlsb2FkLnVzZXJJRExpc3QpfV9vbk1lbWJlcktpY2tlZE91dChlKXtjb25zdHttZW1iZXJOdW06dCxncm91cFByb2ZpbGU6e2dyb3VwSUQ6c319PWUucGF5bG9hZCxvPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKHMpO28mJkdlKHQpJiZvLm1lbWJlckNvdW50IT09dCYmKG8ubWVtYmVyQ291bnQ9dCx0aGlzLl91cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUobykpO3RoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShocykuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMocyxlLnBheWxvYWQudXNlcklETGlzdCl9X3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShlKXt0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoX3MpLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShbZV0pfV9vbk1lbWJlclNldEFkbWluKGUpe2NvbnN0IHM9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElELG89ZS5wYXlsb2FkLnVzZXJJRExpc3QsaT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoaHMpO28uZm9yRWFjaChlPT57Y29uc3Qgbz1pLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHMsZSk7byYmby51cGRhdGVSb2xlKHQuR1JQX01CUl9ST0xFX0FETUlOKX0pfV9vbk1lbWJlckNhbmNlbGxlZEFkbWluKGUpe2NvbnN0IHM9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElELG89ZS5wYXlsb2FkLnVzZXJJRExpc3QsaT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoaHMpO28uZm9yRWFjaChlPT57Y29uc3Qgbz1pLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHMsZSk7byYmby51cGRhdGVSb2xlKHQuR1JQX01CUl9ST0xFX01FTUJFUil9KX1fb25Hcm91cFByb2ZpbGVNb2RpZmllZChlKXtjb25zdHtuZXdHcm91cFByb2ZpbGU6dCxncm91cFByb2ZpbGU6c309ZS5wYXlsb2FkLHtncm91cElEOm99PXMsaT10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwUHJvZmlsZShvKTtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGU9Pntzd2l0Y2goZSl7Y2FzZVwib3duZXJJRFwiOnRoaXMuX293bmVyQ2hhbmdlZChpLHQpO2JyZWFrO2Nhc2VcImdyb3VwTmFtZVwiOmkubmFtZT10W2VdO2JyZWFrO2RlZmF1bHQ6aVtlXT10W2VdfX0pO2NvbnN0IG49IWkuaXNTdXBwb3J0VG9waWM7dGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCxuKX1fb3duZXJDaGFuZ2VkKHtncm91cElEOmV9LHMpe2NvbnN0IG89dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSksaT10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpO2lmKGk9PT1zLm93bmVySUQpe28udXBkYXRlR3JvdXAoe3NlbGZJbmZvOntyb2xlOnQuR1JQX01CUl9ST0xFX09XTkVSfX0pO2NvbnN0IHM9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGhzKSxuPXMuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oZSxpKSxyPXRoaXMuX2dyb3VwTW9kdWxlLmdldExvY2FsR3JvdXBQcm9maWxlKGUpLm93bmVySUQsYT1zLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGUscik7biYmbi51cGRhdGVSb2xlKHQuR1JQX01CUl9ST0xFX09XTkVSKSxhJiZhLnVwZGF0ZVJvbGUodC5HUlBfTUJSX1JPTEVfTUVNQkVSKX19X29uTWVtYmVySW5mb01vZGlmaWVkKGUpe2NvbnN0e3RvOnQscGF5bG9hZDp7Z3JvdXBQcm9maWxlOnMsbWVtYmVyTGlzdDpvfX09ZSxpPXMuZ3JvdXBJRDtvdCh0KSYmdGhpcy5fdXBkYXRlVG9waWNNdXRlVGltZShlKTtjb25zdCBuPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShocyk7by5mb3JFYWNoKGU9Pntjb25zdCB0PW4uZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oaSxlLnVzZXJJRCk7dCYmR2UoZS5tdXRlVGltZSkmJnQudXBkYXRlTXV0ZVVudGlsKGUubXV0ZVRpbWUpfSl9X3VwZGF0ZVRvcGljTXV0ZVRpbWUodCl7Y29uc3R7dG86cyxwYXlsb2FkOntncm91cFByb2ZpbGU6byxtZW1iZXJMaXN0Omk9W119fT10LG49dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGdzKSx7Z3JvdXBJRDpyfT1vLGE9bi5nZXRMb2NhbFRvcGljKHIscyk7aWYoYSl7bGV0IHQ9ITE7Zm9yKGxldCBlPTA7ZTxpLmxlbmd0aDtlKyspe2NvbnN0IHM9aVtlXTtpZihzLnVzZXJJRD09PXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCkmJnMubXV0ZVRpbWU+PTApe2EudXBkYXRlU2VsZkluZm8oe211dGVUaW1lOnMubXV0ZVRpbWV9KSx0PSEwO2JyZWFrfX10JiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLlRPUElDX1VQREFURUQse2dyb3VwSUQ6cix0b3BpYzphfSl9fV9vblRvcGljUHJvZmlsZVVwZGF0ZWQoZSl7Y29uc3R7Z3JvdXBQcm9maWxlOntncm91cElEOnR9LG5ld1RvcGljSW5mbzpzfT1lLnBheWxvYWQ7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGdzKS5vblRvcGljUHJvZmlsZVVwZGF0ZWQoe2dyb3VwSUQ6dCx0b3BpY0lEOmUudG8sLi4uc30pfV9jYWNoZUdyb3VwVGlwcyhlLHQpe3RoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5oYXMoZSl8fHRoaXMuX2NhY2hlZEdyb3VwVGlwc01hcC5zZXQoZSxbXSksdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmdldChlKS5wdXNoKHQpfV9kZWxldGVDYWNoZWRHcm91cFRpcHMoZSl7dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmhhcyhlKSYmdGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmRlbGV0ZShlKX1fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKGUpe2NvbnN0IHQ9dGhpcy5fY2FjaGVkR3JvdXBUaXBzTWFwLmdldChlKXx8W107dC5mb3JFYWNoKGU9Pnt0aGlzLm9uTmV3R3JvdXBUaXBzKGUpfSksdGhpcy5fZGVsZXRlQ2FjaGVkR3JvdXBUaXBzKGUpLF9lLmwoYCR7dGhpcy5fbn0uX25vdGlmeUNhY2hlZEdyb3VwVGlwcyBncm91cElEOiR7ZX0gY291bnQ6JHt0Lmxlbmd0aH1gKX1fY2FjaGVHcm91cFRpcHNBbmRQcm9iZShlKXtjb25zdHtncm91cElEOnMsZXZlbnQ6byxpdGVtOml9PWU7dGhpcy5fY2FjaGVHcm91cFRpcHMocyx7ZXZlbnQ6byxkYXRhTGlzdDpbaV19KSx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFNpbXBsaWZpZWRJbmZvKHMpLnRoZW4oZT0+e2NvbnN0e3R5cGU6b309ZTtvPT09dC5HUlBfQVZDSEFUUk9PTT90aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHMpP3RoaXMuX25vdGlmeUNhY2hlZEdyb3VwVGlwcyhzKTp0aGlzLl9ncm91cE1vZHVsZS5zZXRVbmpvaW5lZEFWQ2hhdFJvb20ocyk6KHRoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdGhpcy5fbm90aWZ5Q2FjaGVkR3JvdXBUaXBzKHMpKX0pLHRoaXMuX2NoZWNrQ291bnRNYXAuaGFzKHMpfHx0aGlzLl9jaGVja0NvdW50TWFwLnNldChzLDApLF9lLmwoYCR7dGhpcy5fbn0uX2NhY2hlR3JvdXBUaXBzQW5kUHJvYmUgZ3JvdXBJRDoke3N9YCl9cmVzZXQoKXt0aGlzLl9jYWNoZWRHcm91cFRpcHNNYXAuY2xlYXIoKSx0aGlzLl9jaGVja0NvdW50TWFwLmNsZWFyKCksdGhpcy5fZ2V0VG9waWNQZW5kaW5nTWFwLmNsZWFyKCl9fWNsYXNzIHBye2NvbnN0cnVjdG9yKGUpe3RoaXMuX2dyb3VwTW9kdWxlPWUsdGhpcy5fbj1cIkNvbW1vbkdyb3VwSGFuZGxlclwiLHRoaXMudGVtcENvbnZlcnNhdGlvbkxpc3Q9bnVsbCx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXA9bmV3IE1hcCx0aGlzLl9jaGVja0NvdW50TWFwPW5ldyBNYXAsdGhpcy5NQVhfQ0hFQ0tfQ09VTlQ9NCx0aGlzLl9nZXRUb3BpY1BlbmRpbmdNYXA9bmV3IE1hcCx0aGlzLl9pc1BhZ2luZ0dldENvbXBsZXRlZD0hMTtlLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub25jZShLbix0aGlzLl9pbml0R3JvdXBMaXN0LHRoaXMpfW9uQ2hlY2tUaW1lcihlKXtlJTE9PTAmJnRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5zaXplPjAmJnRoaXMuX2NoZWNrQ2FjaGVkR3JvdXBNZXNzYWdlKCl9X2NoZWNrQ2FjaGVkR3JvdXBNZXNzYWdlKCl7dGhpcy5fY2FjaGVkR3JvdXBNZXNzYWdlTWFwLmZvckVhY2goKGUsdCk9PntsZXQgcz10aGlzLl9jaGVja0NvdW50TWFwLmdldCh0KTtjb25zdCBvPXRoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCk7X2UubChgJHt0aGlzLl9ufS5fY2hlY2tDYWNoZWRHcm91cE1lc3NhZ2UgZ3JvdXBJRDoke3R9IGhhc0xvY2FsR3JvdXA6JHtvfSBjaGVja0NvdW50OiR7c31gKSxvPyh0aGlzLl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UodCksdGhpcy5fY2hlY2tDb3VudE1hcC5kZWxldGUodCksdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlVW5qb2luZWRBVkNoYXRSb29tKHQpKTpzPj10aGlzLk1BWF9DSEVDS19DT1VOVD8odGhpcy5fZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlKHQpLHRoaXMuX2NoZWNrQ291bnRNYXAuZGVsZXRlKHQpKToocysrLHRoaXMuX2NoZWNrQ291bnRNYXAuc2V0KHQscykpfSl9X2luaXRHcm91cExpc3QoKXtfZS5sKHRoaXMuX24rXCIuX2luaXRHcm91cExpc3RcIik7Y29uc3QgZT1uZXcgQ24oXCJnZXRHcm91cExpc3RJblN0b3JhZ2VcIiksdD10aGlzLl9ncm91cE1vZHVsZS5nZXRTdG9yYWdlR3JvdXBMaXN0KCk7aWYoYmUodCkmJnQubGVuZ3RoPjApe3QuZm9yRWFjaChlPT57dGhpcy5fZ3JvdXBNb2R1bGUuaW5pdEdyb3VwTWFwKGUpfSksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSk7Y29uc3Qgcz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aDtlLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJncm91cCBjb3VudDpcIitzKS5lbmQoKX1lbHNlIGUuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImdyb3VwIGNvdW50OjBcIikuZW5kKCk7X2UubCh0aGlzLl9uK1wiLl9pbml0R3JvdXBMaXN0IG9rXCIpfWhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2UoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLmhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2VcIjtpZihfZS5sKGAke3N9IGNvbnZlcnNhdGlvbiBjb3VudDoke2UubGVuZ3RofSwgbG9jYWwgZ3JvdXAgY291bnQ6JHt0aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aH1gKSwwPT09dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBNYXAoKS5zaXplKXJldHVybiB2b2lkKHRoaXMudGVtcENvbnZlcnNhdGlvbkxpc3Q9ZSk7bGV0IG8saSxuLHI9ITE7Zm9yKGxldCBhPTAsdT1lLmxlbmd0aDthPHU7YSsrKW89ZVthXSxvLnR5cGU9PT10LkNPTlZfR1JPVVAmJihpPW8uY29udmVyc2F0aW9uSUQuc3BsaXQoL15HUk9VUC8pWzFdLG49dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TG9jYWxHcm91cFByb2ZpbGUoaSksbiYmKG4ubGFzdE1lc3NhZ2U9ey4uLm8ubGFzdE1lc3NhZ2V9LHI9ITApKTtyJiYodGhpcy5fZ3JvdXBNb2R1bGUuc29ydExvY2FsR3JvdXBMaXN0KCksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhMSkpfW9uTmV3R3JvdXBNZXNzYWdlKHQpe19lLmQoYCR7dGhpcy5fbn0ub25OZXdHcm91cE1lc3NhZ2UgY291bnQ6JHt0LmRhdGFMaXN0Lmxlbmd0aH1gKTtjb25zdHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpzLG1lc3NhZ2VMaXN0Om8sQVZDaGF0Um9vbU1lc3NhZ2VMaXN0Oml9PXRoaXMuX25ld0dyb3VwTWVzc2FnZVN0b3JlZEFuZFN1bW1hcnkodCk7aWYoaS5sZW5ndGg+MCYmdGhpcy5fZ3JvdXBNb2R1bGUub25BVkNoYXRSb29tTWVzc2FnZShpKSx0aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJNb2RpZmllZE1lc3NhZ2Uobykscy5sZW5ndGg+MCl7dGhpcy5fZ3JvdXBNb2R1bGUudXBkYXRlTmV4dE1lc3NhZ2VTZXEocyk7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKS5vbk5ld01lc3NhZ2Uoe2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnMsaXNJbnN0YW50TWVzc2FnZTp0LmlzSW5zdGFudE1lc3NhZ2V8fCEwLHVwZGF0ZVVucmVhZENvdW50OnQudXBkYXRlVW5yZWFkQ291bnR8fCEwfSl9Y29uc3Qgbj10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShvKTtuLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfUkVDRUlWRUQsbiksby5sZW5ndGg9MH1fbmV3R3JvdXBNZXNzYWdlU3RvcmVkQW5kU3VtbWFyeShlKXtjb25zdHtkYXRhTGlzdDpzLGV2ZW50Om8saXNJbnN0YW50TWVzc2FnZTppfT1lO2xldCBuPW51bGw7Y29uc3Qgcj1bXSxhPVtdLHU9W10sYz17fSxsPXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShDcyksZD10aGlzLl9ncm91cE1vZHVsZS5nZXRGaWxlRG93bmxvYWRQcm94eSgpLHA9cy5sZW5ndGg7cD4xJiZzLnNvcnQoKGUsdCk9PmUuc2VxdWVuY2UtdC5zZXF1ZW5jZSk7Zm9yKGxldCBoPTA7aDxwO2grKyl7Y29uc3QgZT1aZShzW2hdKSx7Z3JvdXBQcm9maWxlOntncm91cElEOnAsY29tbXVuaXR5VHlwZTpnPTAsdG9waWNJRDpfLGludmlzaWJsZTptfX09ZTtsZXQgTT12b2lkIDA7Y29uc3QgZj10aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tVG9waWMoZyxfKTtpZihmKXtNPXQuQ09OVl9UT1BJQyxlLnRvPV87Y29uc3Qgcz10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZ3MpO3MuaGFzTG9jYWxUb3BpYyhwLF8pfHx0aGlzLl9nZXRUb3BpY1BlbmRpbmdNYXAuaGFzKF8pfHwodGhpcy5fZ2V0VG9waWNQZW5kaW5nTWFwLnNldChfLDEpLHMuZ2V0VG9waWNMaXN0KHtncm91cElEOnAsdG9waWNJRExpc3Q6W19dfSkuZmluYWxseSgoKT0+e3RoaXMuX2dldFRvcGljUGVuZGluZ01hcC5kZWxldGUoXyl9KSl9Y29uc3QgST10aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHApO2lmKCFJJiZ0aGlzLl9ncm91cE1vZHVsZS5pc1Vuam9pbmVkQVZDaGF0Um9vbShwKSljb250aW51ZTtpZighSSYmIWYpe3RoaXMuX2NhY2hlR3JvdXBNZXNzYWdlQW5kUHJvYmUoe2dyb3VwSUQ6cCxldmVudDpvLGl0ZW06ZX0pO2NvbnRpbnVlfWlmKHRoaXMuX2dyb3VwTW9kdWxlLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShwKSl7ZS5ldmVudD1vLHUucHVzaChlKTtjb250aW51ZX1pZihlLmN1cnJlbnRVc2VyPXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCksZS5jb252ZXJzYXRpb25UeXBlPXQuQ09OVl9HUk9VUCxlLmlzU3lzdGVtTWVzc2FnZT0hIWUuaXNTeXN0ZW1NZXNzYWdlLG49bmV3IGJuKGUpLGUuZWxlbWVudHM9bC5wYXJzZUVsZW1lbnRzKGUuZWxlbWVudHMsZS5mcm9tKSxuLnNldEVsZW1lbnQoZS5lbGVtZW50cyxkKSwxPT09bSl7dGhpcy5fcXVhbGl0eVN0YXQoaSxuKTtjb250aW51ZX1sZXQgQz0xPT09c1toXS5pc01vZGlmaWVkO2NvbnN0IFQ9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKTtpZihULmlzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShuKT9uLmlzTW9kaWZpZWQ9QzpDPSExLDE9PT1lLm9ubGluZU9ubHlGbGFnKW4uX29ubGluZU9ubHlGbGFnPSEwLFQuaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKG4pfHxhLnB1c2gobik7ZWxzZXtpZih0aGlzLl9ncm91cE1vZHVsZS5pc01lc3NhZ2VGcm9tQ29tbXVuaXR5T2ZUb3BpYyhnLF8pKXthLnB1c2gobik7Y29udGludWV9aWYoIVQucHVzaEludG9NZXNzYWdlTGlzdChhLG4sQykpY29udGludWU7dGhpcy5fcXVhbGl0eVN0YXQoaSxuKTtjb25zdHtjb252ZXJzYXRpb25JRDplLHNlcXVlbmNlOnR9PW4scz1ULmlzUmVtb3RlUmVhZCh7Y29udmVyc2F0aW9uSUQ6ZSxzZXF1ZW5jZTp0fSk7aWYod2UoY1tlXSkpe2xldCB0PTA7XCJpblwiPT09bi5mbG93JiYobi5faXNFeGNsdWRlZEZyb21VbnJlYWRDb3VudHx8c3x8KHQ9MSkpLGNbZV09ci5wdXNoKHtjb252ZXJzYXRpb25JRDplLHVucmVhZENvdW50OnQsdHlwZTp3ZShNKT9uLmNvbnZlcnNhdGlvblR5cGU6TSxzdWJUeXBlOm4uY29udmVyc2F0aW9uU3ViVHlwZSxsYXN0TWVzc2FnZTpuLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6bn0pLTF9ZWxzZXtjb25zdCB0PWNbZV07clt0XS50eXBlPXdlKE0pP24uY29udmVyc2F0aW9uVHlwZTpNLHJbdF0uc3ViVHlwZT1uLmNvbnZlcnNhdGlvblN1YlR5cGUsclt0XS5sYXN0TWVzc2FnZT1uLl9pc0V4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlP1wiXCI6bixcImluXCI9PT1uLmZsb3cmJihuLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50fHxzfHxyW3RdLnVucmVhZENvdW50KyspfX19cmV0dXJue2NvbnZlcnNhdGlvbk9wdGlvbnNMaXN0OnIsbWVzc2FnZUxpc3Q6YSxBVkNoYXRSb29tTWVzc2FnZUxpc3Q6dX19X3F1YWxpdHlTdGF0KGUsdCl7Y29uc3Qgcz10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoUnMpO3MuYWRkTWVzc2FnZVNlcXVlbmNlKHtrZXk6aG4sbWVzc2FnZTp0fSksZSYmdC5jbGllbnRUaW1lPjAmJnMuYWRkTWVzc2FnZURlbGF5KHQuY2xpZW50VGltZSl9b25Hcm91cE1lc3NhZ2VSZXZva2VkKHQpe2NvbnN0IHM9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKSxvPVtdO2xldCBpPW51bGwsbj0hMDt0LmRhdGFMaXN0LmZvckVhY2goZT0+e2NvbnN0e3Jldm9rZWRJbmZvczp0fT1lLmVsZW1lbnRzO3dlKHQpfHx0LmZvckVhY2goZT0+e2NvbnN0IHQ9THQoZS50b3BpY0lEKT9cIkdST1VQXCIrZS5ncm91cElEOlwiR1JPVVBcIitlLnRvcGljSUQ7aT1zLnJldm9rZSh0LGUuc2VxdWVuY2UsZS5yYW5kb20pO2NvbnN0IHI9ZS5yZXZva2VySW5mbyYmZS5yZXZva2VySW5mby5yZXZva2VyO2lmKGkpaS5yZXZva2VyPXIsby5wdXNoKGkpO2Vsc2V7Y29uc3QgaT17Y29udmVyc2F0aW9uSUQ6dCx0bzplLnRvcGljSUR8fFwiXCIsc2VxdWVuY2U6ZS5zZXF1ZW5jZSx0aW1lOmUudGltZSxyZXZva2VyOnJ9O3MuaXNMYXN0TWVzc2FnZVJldm9rZWQoaSkmJihvLnB1c2goaSksbj0hMSl9fSl9KSwwIT09by5sZW5ndGgmJihzLm9uTWVzc2FnZVJldm9rZWQobyksITA9PT1uJiYoX2UubChgJHt0aGlzLl9ufS5vbkdyb3VwTWVzc2FnZVJldm9rZWQgY291bnQ6JHtvLmxlbmd0aH1gKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfUkVWT0tFRCxvKSkpfV9ncm91cExpc3RUcmVlU2hha2luZyhlKXtjb25zdCB0PW5ldyBNYXAoWy4uLnRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwTWFwKCldKTtmb3IobGV0IG89MCxpPWUubGVuZ3RoO288aTtvKyspdC5kZWxldGUoZVtvXS5ncm91cElEKTtpZih0aGlzLl9ncm91cE1vZHVsZS5oYXNKb2luZWRBVkNoYXRSb29tKCkpe3RoaXMuX2dyb3VwTW9kdWxlLmdldEpvaW5lZEFWQ2hhdFJvb20oKS5mb3JFYWNoKGU9Pnt0LmRlbGV0ZShlKX0pfXRoaXMuX2dyb3VwTW9kdWxlLmdldEdyb3VwTWFwKCkuZm9yRWFjaCgoZSxzKT0+e2UuaXNTdXBwb3J0VG9waWMmJnQuZGVsZXRlKHMpfSk7Y29uc3Qgcz1bLi4udC5rZXlzKCldO2ZvcihsZXQgbz0wLGk9cy5sZW5ndGg7bzxpO28rKyl0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVHcm91cChzW29dKX1nZXRHcm91cExpc3QoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldEdyb3VwTGlzdFwiLHM9bmV3IENuKFwiZ2V0R3JvdXBMaXN0XCIpO19lLmwoXCJcIit0KTtjb25zdCBvPXtpbnRyb2R1Y3Rpb246XCJJbnRyb2R1Y3Rpb25cIixub3RpZmljYXRpb246XCJOb3RpZmljYXRpb25cIixjcmVhdGVUaW1lOlwiQ3JlYXRlVGltZVwiLG93bmVySUQ6XCJPd25lcl9BY2NvdW50XCIsbGFzdEluZm9UaW1lOlwiTGFzdEluZm9UaW1lXCIsbWVtYmVyTnVtOlwiTWVtYmVyTnVtXCIsbWF4TWVtYmVyTnVtOlwiTWF4TWVtYmVyTnVtXCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGludml0ZU9wdGlvbjpcIkludml0ZUpvaW5PcHRpb25cIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwifSxpPVtcIlR5cGVcIixcIk5hbWVcIixcIkZhY2VVcmxcIixcIk5leHRNc2dTZXFcIixcIkxhc3RNc2dUaW1lXCIsXCJBdEluZm9MaXN0XCIsXCJMYXN0UmVjYWxsVGltZVwiXSxuPVtdO2UmJmUuZ3JvdXBQcm9maWxlRmlsdGVyJiZlLmdyb3VwUHJvZmlsZUZpbHRlci5mb3JFYWNoKGU9PntvW2VdJiZpLnB1c2gob1tlXSl9KTtjb25zdHtpc0dyb3VwV2l0aFRvcGljT25seTpyPSExfT1lfHx7fTtyZXR1cm4gdGhpcy5fcGFnaW5nR2V0R3JvdXBMaXN0KHtsaW1pdDo1MCxvZmZzZXQ6MCxncm91cEJhc2VJbmZvRmlsdGVyOmksZ3JvdXBMaXN0Om4saXNHcm91cFdpdGhUb3BpY09ubHk6cn0pLnRoZW4oKCk9PntfZS5sKGAke3R9IG9rLiBjb3VudDoke24ubGVuZ3RofSBpc0dyb3VwV2l0aFRvcGljT25seToke3J9YCkscnx8dGhpcy5fZ3JvdXBMaXN0VHJlZVNoYWtpbmcobiksdGhpcy5fZ3JvdXBNb2R1bGUudXBkYXRlR3JvdXBNYXAobik7Y29uc3QgZT10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpLmxlbmd0aDtzLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYHJlbW90ZSBjb3VudDoke24ubGVuZ3RofSwgYWZ0ZXIgdHJlZSBzaGFraW5nLCBsb2NhbCBjb3VudDoke2V9LCBpc0dyb3VwV2l0aFRvcGljT25seToke3J9YCkuZW5kKCksdGhpcy50ZW1wQ29udmVyc2F0aW9uTGlzdCYmKHRoaXMuaGFuZGxlVXBkYXRlR3JvdXBMYXN0TWVzc2FnZSh0aGlzLnRlbXBDb252ZXJzYXRpb25MaXN0KSx0aGlzLnRlbXBDb252ZXJzYXRpb25MaXN0PW51bGwpLHRoaXMuX2dyb3VwTW9kdWxlLnBhdGNoR3JvdXBNZXNzYWdlUmVtaW5kVHlwZSgpLHRoaXMuX2dyb3VwTW9kdWxlLnJlY29tcHV0ZVVucmVhZENvdW50KCksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSghMCwhcik7Y29uc3Qgbz10aGlzLl9ncm91cE1vZHVsZS5nZXRMb2NhbEdyb3VwTGlzdCgpO2lmKHIpe2NvbnN0IGU9by5maWx0ZXIoZT0+ITA9PT1lLmlzU3VwcG9ydFRvcGljKTtyZXR1cm4gd24oe2dyb3VwTGlzdDplfSl9cmV0dXJuIHRoaXMuX2lzUGFnaW5nR2V0Q29tcGxldGVkPSEwLHduKHtncm91cExpc3Q6b30pfSkuY2F0Y2goZT0+KHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LG9dKT0+e3Muc2V0RXJyb3IoZSx0LG8pLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1pc1BhZ2luZ0dldENvbXBsZXRlZCgpe3JldHVybiB0aGlzLl9pc1BhZ2luZ0dldENvbXBsZXRlZH1fcGFnaW5nR2V0R3JvdXBMaXN0KGUpe2NvbnN0IHM9dGhpcy5fbitcIi5fcGFnaW5nR2V0R3JvdXBMaXN0XCI7bGV0e2lzQ29tbXVuaXR5UmVsYXk6bz0hMSxpc0dyb3VwV2l0aFRvcGljT25seTppPSExLGxpbWl0Om4sb2Zmc2V0OnIsZ3JvdXBCYXNlSW5mb0ZpbHRlcjphLGdyb3VwTGlzdDp1fT1lO2lmKGkpcmV0dXJuIHRoaXMuX3BhZ2luZ0dldEdyb3VwTGlzdFdpdGhUb3BpYyh7bGltaXQ6bixvZmZzZXQ6cixncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnV9KTtsZXQgYz1uZXcgQ24oXCJfcGFnaW5nR2V0R3JvdXBMaXN0XCIpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6d28scmVxdWVzdERhdGE6e3R5cGU6bz90LkdSUF9DT01NVU5JVFk6dm9pZCAwLG1lbWJlckFjY291bnQ6dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxsaW1pdDpuLG9mZnNldDpyLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOmEsc2VsZkluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk1zZ0ZsYWdcIixcIk1zZ1NlcVwiXX19fSkudGhlbihlPT57Y29uc3R7Z3JvdXBzOnQ9W10sdG90YWxDb3VudDppfT1lLmRhdGE7dS5wdXNoKC4uLnQpLHRoaXMuX2hhbmRsZUdyb3VwQXRJbmZvV2l0aG91dFRvcGljKG8sdCk7Y29uc3QgbD1yK24sZD0hKGk+bCkscD1gb2Zmc2V0OiR7cn0gdG90YWxDb3VudDoke2l9IGlzQ29tcGxldGVkOiR7ZH0gY3VycmVudENvdW50OiR7dS5sZW5ndGh9IGlzQ29tbXVuaXR5UmVsYXk6JHtvfWA7cmV0dXJuIGMuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiK3ApLmVuZCgpLG98fGQ/IW8mJmQ/KF9lLmwocytcIiBzdGFydCB0byBnZXQgY29tbXVuaXR5IGxpc3RcIikscj0wLHRoaXMuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6bixvZmZzZXQ6cixncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnUsaXNDb21tdW5pdHlSZWxheTohMH0pKTpvJiYhZD8ocj1sLHRoaXMuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6bixvZmZzZXQ6cixncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnUsaXNDb21tdW5pdHlSZWxheTohMH0pKTooX2UubChgJHtzfSBvay4gdG90YWxDb3VudDoke3UubGVuZ3RofWApLHduKHtncm91cExpc3Q6dX0pKToocj1sLHRoaXMuX3BhZ2luZ0dldEdyb3VwTGlzdCh7bGltaXQ6bixvZmZzZXQ6cixncm91cEJhc2VJbmZvRmlsdGVyOmEsZ3JvdXBMaXN0OnV9KSl9KS5jYXRjaChlPT4oMTFlMyE9PWUuY29kZSYmdGhpcy5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57Yy5zZXRNZXNzYWdlKFwiaXNDb21tdW5pdHlSZWxheTpcIitvKS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxvPygxMWUzPT09ZS5jb2RlJiYoYz1udWxsLF9lLmwocytcIiBvay4gY29tbXVuaXR5IHVuYXZhaWxhYmxlXCIpKSx4bih7Z3JvdXBMaXN0OnV9KSk6Vm4oZSkpKX1fcGFnaW5nR2V0R3JvdXBMaXN0V2l0aFRvcGljKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5fcGFnaW5nR2V0R3JvdXBMaXN0V2l0aFRvcGljXCI7bGV0e2xpbWl0Om8sb2Zmc2V0OmksZ3JvdXBCYXNlSW5mb0ZpbHRlcjpuLGdyb3VwTGlzdDpyfT1lO2NvbnN0IGE9bmV3IENuKFwicGFnaW5nR2V0R3JvdXBMaXN0V2l0aFRvcGljXCIpO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6d28scmVxdWVzdERhdGE6e3R5cGU6dC5HUlBfQ09NTVVOSVRZLG1lbWJlckFjY291bnQ6dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxsaW1pdDpvLG9mZnNldDppLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOm4sc2VsZkluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk1zZ0ZsYWdcIixcIk1zZ1NlcVwiXX0saXNTdXBwb3J0VG9waWM6MX19KS50aGVuKGU9Pntjb25zdHtncm91cHM6dD1bXSx0b3RhbENvdW50OnV9PWUuZGF0YTtyLnB1c2goLi4udCk7Y29uc3QgYz1pK28sbD0hKHU+YyksZD1gb2Zmc2V0OiR7aX0gdG90YWxDb3VudDoke3V9IGlzQ29tcGxldGVkOiR7bH0gY3VycmVudENvdW50OmArci5sZW5ndGg7cmV0dXJuIGEuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiK2QpLmVuZCgpLGw/KF9lLmwoYCR7c30gb2suIHRvdGFsQ291bnQ6JHtyLmxlbmd0aH1gKSx3bih7Z3JvdXBMaXN0OnJ9KSk6KGk9Yyx0aGlzLl9wYWdpbmdHZXRHcm91cExpc3RXaXRoVG9waWMoe2xpbWl0Om8sb2Zmc2V0OmksZ3JvdXBCYXNlSW5mb0ZpbHRlcjpuLGdyb3VwTGlzdDpyfSkpfSkuY2F0Y2goZT0+KHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Euc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksVm4oZSkpKX1fY2FjaGVHcm91cE1lc3NhZ2UoZSx0KXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuaGFzKGUpfHx0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuc2V0KGUsW10pLHRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSkucHVzaCh0KX1fZGVsZXRlQ2FjaGVkR3JvdXBNZXNzYWdlKGUpe3RoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5oYXMoZSkmJnRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5kZWxldGUoZSl9X25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZShlKXtjb25zdCB0PXRoaXMuX2NhY2hlZEdyb3VwTWVzc2FnZU1hcC5nZXQoZSl8fFtdO3QuZm9yRWFjaChlPT57dGhpcy5vbk5ld0dyb3VwTWVzc2FnZShlKX0pLHRoaXMuX2RlbGV0ZUNhY2hlZEdyb3VwTWVzc2FnZShlKSxfZS5sKGAke3RoaXMuX259Ll9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2UgZ3JvdXBJRDoke2V9IGNvdW50OiR7dC5sZW5ndGh9YCl9X2NhY2hlR3JvdXBNZXNzYWdlQW5kUHJvYmUoZSl7Y29uc3R7Z3JvdXBJRDpzLGV2ZW50Om8saXRlbTppfT1lO3RoaXMuX2NhY2hlR3JvdXBNZXNzYWdlKHMse2V2ZW50Om8sZGF0YUxpc3Q6W2ldfSksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhzKS50aGVuKGU9Pntjb25zdHt0eXBlOm99PWU7bz09PXQuR1JQX0FWQ0hBVFJPT00/dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cChzKT90aGlzLl9ub3RpZnlDYWNoZWRHcm91cE1lc3NhZ2Uocyk6dGhpcy5fZ3JvdXBNb2R1bGUuc2V0VW5qb2luZWRBVkNoYXRSb29tKHMpOih0aGlzLl9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbZV0pLHRoaXMuX25vdGlmeUNhY2hlZEdyb3VwTWVzc2FnZShzKSl9KSx0aGlzLl9jaGVja0NvdW50TWFwLmhhcyhzKXx8dGhpcy5fY2hlY2tDb3VudE1hcC5zZXQocywwKSxfZS5sKGAke3RoaXMuX259Ll9jYWNoZUdyb3VwTWVzc2FnZUFuZFByb2JlIGdyb3VwSUQ6JHtzfWApfV9oYW5kbGVHcm91cEF0SW5mb1dpdGhvdXRUb3BpYyhlLHQpe2UmJjAhPT10Lmxlbmd0aCYmdC5mb3JFYWNoKGU9Pntjb25zdHtncm91cElEOnQsZ3JvdXBBdEluZm9MaXN0OnN9PWUsbz1bXTtpZighd2Uocykpe3MuZm9yRWFjaChlPT57by5wdXNoKHsuLi5lLGdyb3VwSUQ6dH0pfSk7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKS5vbk5ld0dyb3VwQXRUaXBzKHtkYXRhTGlzdDpvfSl9fSl9cmVzZXQoKXt0aGlzLl9jYWNoZWRHcm91cE1lc3NhZ2VNYXAuY2xlYXIoKSx0aGlzLl9jaGVja0NvdW50TWFwLmNsZWFyKCksdGhpcy5fZ2V0VG9waWNQZW5kaW5nTWFwLmNsZWFyKCksdGhpcy5faXNQYWdpbmdHZXRDb21wbGV0ZWQ9ITE7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbmNlKEtuLHRoaXMuX2luaXRHcm91cExpc3QsdGhpcyl9fWNvbnN0IGhyPTEsZ3I9Mixfcj0zLG1yPTQsTXI9NTtjbGFzcyBmcntjb25zdHJ1Y3RvcihlKXt0aGlzLl9ncm91cE1vZHVsZT1lLHRoaXMuX249XCJHcm91cEF0dHJpYnV0ZXNIYW5kbGVyXCIsdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwPW5ldyBNYXAsdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzQ29weT17fSx0aGlzLkNBQ0hFX0VYUElSRV9USU1FPTNlNDt0aGlzLl9ncm91cE1vZHVsZS5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKFduLHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfV9vbkNsb3VkQ29uZmlnVXBkYXRlZCgpe2NvbnN0IGU9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0Q2xvdWRDb25maWcoXCJncnBfYXR0cl9jYWNoZV90aW1lXCIpO3dlKGUpfHwodGhpcy5DQUNIRV9FWFBJUkVfVElNRT1OdW1iZXIoZSkpfXVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpe3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5mb3JFYWNoKGU9PntlLmxvY2FsTWFpblNlcXVlbmNlPTB9KX1pc0dyb3VwQXR0cmlidXRlc1VwZGF0ZWROb3RpY2UoZSl7Y29uc3R7dG86dCxlbGVtZW50czp7bmV3R3JvdXBQcm9maWxlOnN9fT1lLG89IXdlKHMpJiYhTHQocy5ncm91cEF0dHJpYnV0ZU9wdGlvbik7cmV0dXJuIG8mJnRoaXMuX29uR3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCh7Z3JvdXBJRDp0LGdyb3VwQXR0cmlidXRlT3B0aW9uOnMuZ3JvdXBBdHRyaWJ1dGVPcHRpb259KSxvfV9vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQoZSl7Y29uc3R7Z3JvdXBJRDp0LGdyb3VwQXR0cmlidXRlT3B0aW9uOnN9PWUse21haW5TZXF1ZW5jZTpvLGlzV2l0aENoYW5nZWRBdHRyaWJ1dGVJbmZvOmksZ3JvdXBBdHRyaWJ1dGVMaXN0Om49W10sb3BlcmF0aW9uVHlwZTpyfT1zO2lmKF9lLmwodGhpcy5fbitcIi5vbkdyb3VwQXR0cmlidXRlc1VwZGF0ZWQuIFwiK2Bncm91cElEOiR7dH0gaXNXaXRoQ2hhbmdlZEF0dHJpYnV0ZUluZm86JHtpfSBvcGVyYXRpb25UeXBlOiR7cn1gKSx3ZShyKSlyZXR1cm47dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzQ29weT10aGlzLl9nZXRDYWNoZWRBdHRyaWJ1dGVzKHtncm91cElEOnR9KTtjb25zdHtsb2NhbE1haW5TZXF1ZW5jZTphfT10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyh0KSx1PW8tYTtpZigwIT09dSl7aWYoMT09PWkmJjE9PT11KXJldHVybiB0aGlzLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOnQscmVtb3RlTWFpblNlcXVlbmNlOm8sZ3JvdXBBdHRyaWJ1dGVMaXN0Om4sb3BlcmF0aW9uVHlwZTpyfSksdm9pZCB0aGlzLl9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCh0KTtpZih0aGlzLl9oYXNMb2NhbEdyb3VwQXR0cmlidXRlcyh0KSl7Y29uc3R7YXZDaGF0Um9vbUtleTplfT10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyh0KTt0aGlzLl9nZXRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6dCxhdkNoYXRSb29tS2V5OmV9KS50aGVuKCgpPT57dGhpcy5fZW1pdEdyb3VwQXR0cmlidXRlc1VwZGF0ZWQodCl9KX19fWluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZShlKXtjb25zdHtncm91cElEOnQsYXZDaGF0Um9vbUtleTpzfT1lO3RoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5zZXQodCx7bGFzdFVwZGF0ZVRpbWU6MCxsb2NhbE1haW5TZXF1ZW5jZTowLHJlbW90ZU1haW5TZXF1ZW5jZTowLGF0dHJpYnV0ZXM6bmV3IE1hcCxhdkNoYXRSb29tS2V5OnN9KSxfZS5sKGAke3RoaXMuX259LmluaXRHcm91cEF0dHJpYnV0ZXNDYWNoZSBncm91cElEOiR7dH0gYXZDaGF0Um9vbUtleToke3N9YCl9aW5pdEdyb3VwQXR0cmlidXRlcyhlKXtjb25zdHtncm91cElEOnQsZ3JvdXBBdHRyaWJ1dGVzOnN9PWUse3JlbW90ZU1haW5TZXF1ZW5jZTpvLGF2Q2hhdFJvb21LZXk6aX09dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXModCksbj1uZXcgQ24oXCJpbml0R3JvdXBBdHRyaWJ1dGVzXCIpO3JldHVybiBuLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHt0fSBhdkNoYXRSb29tS2V5OiR7aX0gbWFpblNlcXVlbmNlOiR7b31gKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZGkscmVxdWVzdERhdGE6e2dyb3VwSUQ6dCxhdkNoYXRSb29tS2V5OmksbWFpblNlcXVlbmNlOm8sZ3JvdXBBdHRyaWJ1dGVMaXN0OnRoaXMuX3RyYW5zZm9ybUdyb3VwQXR0cmlidXRlcyhzKX19KS50aGVuKGU9PntfZS5sKGAke3RoaXMuX259LmluaXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6JHt0fWApO2NvbnN0e21haW5TZXF1ZW5jZTpvLGdyb3VwQXR0cmlidXRlTGlzdDppfT1lLmRhdGEscj1bLi4uaV07cmV0dXJuIHIuZm9yRWFjaChlPT57ZS52YWx1ZT1zW2Uua2V5XX0pLHRoaXMuX2dyb3VwQXR0cmlidXRlc0NvcHk9dGhpcy5fZ2V0Q2FjaGVkQXR0cmlidXRlcyh7Z3JvdXBJRDp0fSksdGhpcy5fcmVmcmVzaENhY2hlZEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDp0LHJlbW90ZU1haW5TZXF1ZW5jZTpvLGdyb3VwQXR0cmlidXRlTGlzdDpyLG9wZXJhdGlvblR5cGU6aHJ9KSx0aGlzLl9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCh0KSxuLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHduKHtncm91cEF0dHJpYnV0ZXM6c30pfSkuY2F0Y2goZT0+KHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksVm4oZSkpKX1zZXRHcm91cEF0dHJpYnV0ZXMoZSl7Y29uc3QgdD10aGlzLl9uK1wiLnNldEdyb3VwQXR0cmlidXRlc1wiLHtncm91cElEOnMsZ3JvdXBBdHRyaWJ1dGVzOm99PWUse3JlbW90ZU1haW5TZXF1ZW5jZTppLGF2Q2hhdFJvb21LZXk6bixhdHRyaWJ1dGVzOnJ9PXRoaXMuX2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKHMpLGE9dGhpcy5fdHJhbnNmb3JtR3JvdXBBdHRyaWJ1dGVzKG8pO2EuZm9yRWFjaChlPT57Y29uc3R7a2V5OnR9PWU7ZS5zZXF1ZW5jZT0wLHIuaGFzKHQpJiYoZS5zZXF1ZW5jZT1yLmdldCh0KS5zZXF1ZW5jZSl9KTtjb25zdCB1PW5ldyBDbihcInNldEdyb3VwQXR0cmlidXRlc1wiKTtyZXR1cm4gdS5zZXRNZXNzYWdlKGBncm91cElEOiR7c30gZ3JvdXBBdHRyaWJ1dGVzOiR7SlNPTi5zdHJpbmdpZnkobyl9YCksX2UubChgJHt0fS4gZ3JvdXBJRDoke3N9IG1haW5TZXF1ZW5jZToke2l9YCksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBpLHJlcXVlc3REYXRhOntncm91cElEOnMsYXZDaGF0Um9vbUtleTpuLG1haW5TZXF1ZW5jZTppLGdyb3VwQXR0cmlidXRlTGlzdDphfX0pLnRoZW4oZT0+e19lLmwodCtcIiBvay5cIik7Y29uc3R7bWFpblNlcXVlbmNlOmksZ3JvdXBBdHRyaWJ1dGVMaXN0Om59PWUuZGF0YSxyPVsuLi5uXTtyZXR1cm4gci5mb3JFYWNoKGU9PntlLnZhbHVlPW9bZS5rZXldfSksdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzQ29weT10aGlzLl9nZXRDYWNoZWRBdHRyaWJ1dGVzKHtncm91cElEOnN9KSx0aGlzLl9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKHtncm91cElEOnMscmVtb3RlTWFpblNlcXVlbmNlOmksZ3JvdXBBdHRyaWJ1dGVMaXN0OnIsb3BlcmF0aW9uVHlwZTpncn0pLHRoaXMuX2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKHMpLHUuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksd24oe2dyb3VwQXR0cmlidXRlczpvfSl9KS5jYXRjaChlPT4odGhpcy5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57dS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxWbihlKSkpfWRlbGV0ZUdyb3VwQXR0cmlidXRlcyhlKXtjb25zdHtncm91cElEOnQsa2V5TGlzdDpzPVtdfT1lLHtyZW1vdGVNYWluU2VxdWVuY2U6byxhdkNoYXRSb29tS2V5OmksYXR0cmlidXRlczpufT10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyh0KTtsZXQgcj1bLi4ubi5rZXlzKCldLGE9Z2ksdT1fcjtjb25zdCBjPXtncm91cElEOnQsYXZDaGF0Um9vbUtleTppLG1haW5TZXF1ZW5jZTpvfSxsPVtdO3MubGVuZ3RoPjAmJihyPVtdLGE9aGksdT1tcixzLmZvckVhY2goZT0+e2xldCB0PTA7bi5oYXMoZSkmJih0PW4uZ2V0KGUpLnNlcXVlbmNlLHIucHVzaChlKSksbC5wdXNoKHtrZXk6ZSxzZXF1ZW5jZTp0fSl9KSxjLmdyb3VwQXR0cmlidXRlTGlzdD1sKTtjb25zdCBkPW5ldyBDbihcImRlbGV0ZUdyb3VwQXR0cmlidXRlc1wiKTtyZXR1cm4gZC5zZXRNZXNzYWdlKGBncm91cElEOiR7dH0gbWFpblNlcXVlbmNlOiR7b30ga2V5TGlzdDoke3N9IHByb3RvY29sTmFtZToke2F9YCksdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmEscmVxdWVzdERhdGE6Y30pLnRoZW4oZT0+e19lLmwoYCR7dGhpcy5fbn0uZGVsZXRlR3JvdXBBdHRyaWJ1dGVzIG9rLiBncm91cElEOiR7dH1gKTtjb25zdHttYWluU2VxdWVuY2U6c309ZS5kYXRhO3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNDb3B5PXRoaXMuX2dldENhY2hlZEF0dHJpYnV0ZXMoe2dyb3VwSUQ6dH0pLHRoaXMuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6dCxyZW1vdGVNYWluU2VxdWVuY2U6cyxncm91cEF0dHJpYnV0ZUxpc3Q6bCxvcGVyYXRpb25UeXBlOnV9KSx0aGlzLl9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCh0KSxkLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHduKHtrZXlMaXN0OnJ9KX0pLmNhdGNoKGU9Pih0aGlzLl9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntkLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLFZuKGUpKSl9Z2V0R3JvdXBBdHRyaWJ1dGVzKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5nZXRHcm91cEF0dHJpYnV0ZXNcIix7Z3JvdXBJRDpzfT1lLHthdkNoYXRSb29tS2V5Om8sbGFzdFVwZGF0ZVRpbWU6aSxsb2NhbE1haW5TZXF1ZW5jZTpuLHJlbW90ZU1haW5TZXF1ZW5jZTpyfT10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyhzKSxhPW5ldyBDbihcImdldEdyb3VwQXR0cmlidXRlc1wiKTtpZihhLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtzfSBsb2NhbE1haW5TZXF1ZW5jZToke259IHJlbW90ZU1haW5TZXF1ZW5jZToke3J9IGtleUxpc3Q6JHtlLmtleUxpc3R9YCksRGF0ZS5ub3coKS1pPj10aGlzLkNBQ0hFX0VYUElSRV9USU1FfHxuPHIpcmV0dXJuIHRoaXMuX2dldEdyb3VwQXR0cmlidXRlcyh7Z3JvdXBJRDpzLGF2Q2hhdFJvb21LZXk6b30pLnRoZW4obz0+e2Euc2V0TW9yZU1lc3NhZ2UoXCJnZXQgYXR0cmlidXRlcyBmcm9tIHJlbW90ZS4gY291bnQ6XCIrby5sZW5ndGgpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoYCR7dH0gZnJvbSByZW1vdGUuIGdyb3VwSUQ6JHtzfWApO2NvbnN0IGk9dGhpcy5fZ2V0Q2FjaGVkQXR0cmlidXRlcyhlKTtyZXR1cm4gd24oe2dyb3VwQXR0cmlidXRlczppfSl9KS5jYXRjaChlPT4odGhpcy5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57YS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxWbihlKSkpO2Euc2V0TW9yZU1lc3NhZ2UoXCJnZXQgYXR0cmlidXRlcyBmcm9tIGNhY2hlXCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuX2dyb3VwTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoYCR7dH0gZnJvbSBjYWNoZS4gZ3JvdXBJRDoke3N9YCk7Y29uc3QgdT10aGlzLl9nZXRDYWNoZWRBdHRyaWJ1dGVzKGUpO3JldHVybiB4bih7Z3JvdXBBdHRyaWJ1dGVzOnV9KX1fZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpe2xldCB0PTA7cmV0dXJuIHdlKGUuYXZDaGF0Um9vbUtleSl8fCh0PTEpLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpfaSxyZXF1ZXN0RGF0YTp7Li4uZSxncm91cFR5cGU6dH19KS50aGVuKHQ9PntfZS5sKGAke3RoaXMuX259Ll9nZXRHcm91cEF0dHJpYnV0ZXMgb2suIGdyb3VwSUQ6JHtlLmdyb3VwSUR9YCk7Y29uc3R7bWFpblNlcXVlbmNlOnMsZ3JvdXBBdHRyaWJ1dGVMaXN0Om99PXQuZGF0YSxpPVsuLi5vXTtyZXR1cm4gd2Uocyl8fHRoaXMuX3JlZnJlc2hDYWNoZWRHcm91cEF0dHJpYnV0ZXMoe2dyb3VwSUQ6ZS5ncm91cElELHJlbW90ZU1haW5TZXF1ZW5jZTpzLGdyb3VwQXR0cmlidXRlTGlzdDppLG9wZXJhdGlvblR5cGU6TXJ9KSxvfSkuY2F0Y2goZT0+Vm4oZSkpfV9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzKGUpe2NvbnN0e2dyb3VwSUQ6dCxyZW1vdGVNYWluU2VxdWVuY2U6cyxncm91cEF0dHJpYnV0ZUxpc3Q6byxvcGVyYXRpb25UeXBlOml9PWU7aWYodGhpcy5faGFzTG9jYWxHcm91cEF0dHJpYnV0ZXModCkpe2NvbnN0IGU9dGhpcy5fZ2V0TG9jYWxHcm91cEF0dHJpYnV0ZXModCkse2xvY2FsTWFpblNlcXVlbmNlOm59PWU7aWYoaT09PU1yfHxzLW49PTEpZS5yZW1vdGVNYWluU2VxdWVuY2U9cyxlLmxvY2FsTWFpblNlcXVlbmNlPXMsZS5sYXN0VXBkYXRlVGltZT1EYXRlLm5vdygpLHRoaXMuX3VwZGF0ZUNhY2hlZEF0dHJpYnV0ZXMoe2dyb3VwQXR0cmlidXRlczplLGdyb3VwQXR0cmlidXRlTGlzdDpvLG9wZXJhdGlvblR5cGU6aX0pO2Vsc2V7aWYobj09PXMpcmV0dXJuO2UucmVtb3RlTWFpblNlcXVlbmNlPXN9dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLnNldCh0LGUpO2NvbnN0IHI9YG9wZXJhdGlvblR5cGU6JHtpfSBsb2NhbE1haW5TZXF1ZW5jZToke259IHJlbW90ZU1haW5TZXF1ZW5jZToke3N9YDtfZS5sKGAke3RoaXMuX259Ll9yZWZyZXNoQ2FjaGVkR3JvdXBBdHRyaWJ1dGVzLiAke3J9YCl9fV9nZXRDYWNoZWRBdHRyaWJ1dGVzKGUpe2NvbnN0e2dyb3VwSUQ6dCxrZXlMaXN0OnM9W119PWUsbz17fTtpZih0aGlzLl9oYXNMb2NhbEdyb3VwQXR0cmlidXRlcyh0KSl7Y29uc3R7YXR0cmlidXRlczplfT10aGlzLl9nZXRMb2NhbEdyb3VwQXR0cmlidXRlcyh0KTtpZihzLmxlbmd0aD4wKXMuZm9yRWFjaCh0PT57ZS5oYXModCkmJihvW3RdPWUuZ2V0KHQpLnZhbHVlKX0pO2Vsc2UgZm9yKGNvbnN0IHQgb2YgZS5rZXlzKCkpb1t0XT1lLmdldCh0KS52YWx1ZX1yZXR1cm4gb31fdXBkYXRlQ2FjaGVkQXR0cmlidXRlcyhlKXtjb25zdHtncm91cEF0dHJpYnV0ZXM6dCxncm91cEF0dHJpYnV0ZUxpc3Q6cyxvcGVyYXRpb25UeXBlOm99PWU7byE9PV9yP28hPT1tcj8obz09PWhyJiZ0LmF0dHJpYnV0ZXMuY2xlYXIoKSxzLmZvckVhY2goZT0+e2NvbnN0e2tleTpzLHZhbHVlOm8sc2VxdWVuY2U6aX09ZTt0LmF0dHJpYnV0ZXMuc2V0KHMse3ZhbHVlOm8sc2VxdWVuY2U6aX0pfSkpOnMuZm9yRWFjaChlPT57dC5hdHRyaWJ1dGVzLmRlbGV0ZShlLmtleSl9KTp0LmF0dHJpYnV0ZXMuY2xlYXIoKX1faGFzTG9jYWxHcm91cEF0dHJpYnV0ZXMoZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5oYXMoZSl9X2dldExvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpe3JldHVybiB0aGlzLl9oYXNMb2NhbEdyb3VwQXR0cmlidXRlcyhlKXx8dGhpcy5pbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGUoe2dyb3VwSUQ6ZX0pLHRoaXMuX2dyb3VwQXR0cmlidXRlc01hcC5nZXQoZSl9X3RyYW5zZm9ybUdyb3VwQXR0cmlidXRlcyhlKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHM9Pnt0LnB1c2goe2tleTpzLHZhbHVlOmVbc119KX0pLHR9X2VtaXRHcm91cEF0dHJpYnV0ZXNVcGRhdGVkKHQpe2NvbnN0IHM9dGhpcy5fZ2V0Q2FjaGVkQXR0cmlidXRlcyh7Z3JvdXBJRDp0fSkse3VwZGF0ZWRLZXlMaXN0Om8sZGVsZXRlZEtleUxpc3Q6aX09dGhpcy5fY29tcHV0ZUF0dHJDaGFuZ2VkSW5mbyhzKTtfZS5sKGAke3RoaXMuX259Ll9lbWl0R3JvdXBBdHRyaWJ1dGVzVXBkYXRlZCB1cGRhdGU6JHtvLmxlbmd0aH0sIGRlbGV0ZToke2kubGVuZ3RofWApLDA9PT1vLmxlbmd0aCYmMD09PWkubGVuZ3RofHx0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkdST1VQX0FUVFJJQlVURVNfVVBEQVRFRCx7Z3JvdXBJRDp0LGdyb3VwQXR0cmlidXRlczpzLHVwZGF0ZWRLZXlMaXN0Om8sZGVsZXRlZEtleUxpc3Q6aX0pfV9jb21wdXRlQXR0ckNoYW5nZWRJbmZvKGUpe2NvbnN0IHQ9W10scz1bXTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChzPT57ZVtzXSE9PXRoaXMuX2dyb3VwQXR0cmlidXRlc0NvcHlbc10mJnQucHVzaChzKX0pLE9iamVjdC5rZXlzKHRoaXMuX2dyb3VwQXR0cmlidXRlc0NvcHkpLmZvckVhY2godD0+e3dlKGVbdF0pJiZzLnB1c2godCl9KSx0aGlzLl9ncm91cEF0dHJpYnV0ZXNDb3B5PXt9LHt1cGRhdGVkS2V5TGlzdDp0LGRlbGV0ZWRLZXlMaXN0OnN9fWRlbGV0ZUxvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpe3RoaXMuX2hhc0xvY2FsR3JvdXBBdHRyaWJ1dGVzKGUpJiZ0aGlzLl9ncm91cEF0dHJpYnV0ZXNNYXAuZGVsZXRlKGUpfXJlc2V0KCl7dGhpcy5fZ3JvdXBBdHRyaWJ1dGVzTWFwLmNsZWFyKCksdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzQ29weT17fSx0aGlzLkNBQ0hFX0VYUElSRV9USU1FPTNlNH19Y29uc3QgSXI9XCJTZXRcIixDcj1cIkluY3JlYXNlXCIsVHI9XCJEZWNyZWFzZVwiO2NsYXNzIHlye2NvbnN0cnVjdG9yKGUpe3RoaXMuX2dyb3VwTW9kdWxlPWUsdGhpcy5fbj1cIkdyb3VwQ291bnRlcnNIYW5kbGVyXCIsdGhpcy5fZ3JvdXBDb3VudGVyc01hcD1uZXcgTWFwLHRoaXMuRVhQSVJFX1RJTUU9M2U0O3RoaXMuX2dyb3VwTW9kdWxlLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oV24sdGhpcy5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsdGhpcyl9X29uQ2xvdWRDb25maWdVcGRhdGVkKCl7Y29uc3QgZT10aGlzLl9ncm91cE1vZHVsZS5nZXRDbG91ZENvbmZpZyhcImdycF9jb3VudGVyX2V4cGlyZV90aW1lXCIpO3dlKGUpfHwodGhpcy5FWFBJUkVfVElNRT1OdW1iZXIoZSkpfWlzR3JvdXBDb3VudGVyc05vdGljZShlKXtjb25zdHt0bzp0LGVsZW1lbnRzOntncm91cENvdW50ZXJJbmZvOnN9fT1lO2xldCBvPSExO3JldHVybiBMdChzKXx8KHRoaXMuX29uR3JvdXBDb3VudGVyc1VwZGF0ZWQoe2dyb3VwSUQ6dCxncm91cENvdW50ZXJJbmZvOnN9KSxvPSEwKSxvfV9vbkdyb3VwQ291bnRlcnNVcGRhdGVkKHQpe2NvbnN0e2dyb3VwSUQ6cyxncm91cENvdW50ZXJJbmZvOm99PXQ7by5mb3JFYWNoKHQ9Pntjb25zdHt0eXBlOm8sZ3JvdXBDb3VudGVyU2VxOmksY291bnRlckxpc3Q6bj1bXX09dDswIT09byYmMiE9PW98fCh0aGlzLl91cGRhdGVMb2NhbEdyb3VwQ291bnRlcnMoe2dyb3VwSUQ6cyxncm91cENvdW50ZXJTZXE6aSxjb3VudGVyTGlzdDpufSksbi5mb3JFYWNoKHQ9Pnt0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkdST1VQX0NPVU5URVJfVVBEQVRFRCx7Z3JvdXBJRDpzLGtleTp0LmtleSx2YWx1ZTp0LnZhbHVlfSl9KSksMT09PW8mJnRoaXMuX2RlbGV0ZUxvY2FsR3JvdXBDb3VudGVycyh7Z3JvdXBJRDpzLGdyb3VwQ291bnRlclNlcTppLGNvdW50ZXJMaXN0Om59KX0pLF9lLmwoYCR7dGhpcy5fbn0uX29uR3JvdXBDb3VudGVyc1VwZGF0ZWQgZ3JvdXBJRDoke3N9YCl9aW5pdEdyb3VwQ291bnRlcnNDYWNoZShlKXtjb25zdHtncm91cElEOnQsYXZDaGF0Um9vbUtleTpzfT1lO3RoaXMuX2dyb3VwQ291bnRlcnNNYXAuc2V0KHQse2xhc3RVcGRhdGVUaW1lOjAsZ3JvdXBDb3VudGVyU2VxOjAsY291bnRlcnM6bmV3IE1hcCxhdkNoYXRSb29tS2V5OnN9KSxfZS5sKGAke3RoaXMuX259LmluaXRHcm91cENvdW50ZXJzQ2FjaGUgZ3JvdXBJRDoke3R9IGF2Q2hhdFJvb21LZXk6JHtzfWApfXNldEdyb3VwQ291bnRlcnMoZSl7aWYoIXRoaXMuX2dyb3VwTW9kdWxlLmNhbklVc2UoTS5HUlBfQ09VTlRFUikpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9VU0VfQ09NTUVSQ0lBTF9BQklMSVRZfSk7Y29uc3QgdD10aGlzLl9uK1wiLnNldEdyb3VwQ291bnRlcnNcIix7Z3JvdXBJRDpzLGNvdW50ZXJzOm99PWUsaT10aGlzLl9jb252ZXJ0T2JqZWN0VG9MaXN0KG8pLHthdkNoYXRSb29tS2V5Om59PXRoaXMuX2dldExvY2FsR3JvdXBDb3VudGVycyhzKSxyPWBncm91cElEOiR7c30gY291bnQ6JHtpLmxlbmd0aH1gLGE9bmV3IENuKFwic2V0R3JvdXBDb3VudGVyc1wiKTtyZXR1cm4gYS5zZXRNZXNzYWdlKFwiXCIrciksX2UubChgJHt0fS4gJHtyfWApLHRoaXMuX3VwZGF0ZUdyb3VwQ291bnRlcnMoe2dyb3VwSUQ6cyxjb3VudGVyTGlzdDppLGF2Q2hhdFJvb21LZXk6bixtb2RlOklyfSkudGhlbihlPT4oYS5lbmQoKSxfZS5sKHQrXCIgb2suXCIpLHduKHtjb3VudGVyczplfSkpKS5jYXRjaChlPT4odGhpcy5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57YS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWluY3JlYXNlR3JvdXBDb3VudGVyKGUpe2lmKCF0aGlzLl9ncm91cE1vZHVsZS5jYW5JVXNlKE0uR1JQX0NPVU5URVIpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHQ9dGhpcy5fbitcIi5pbmNyZWFzZUdyb3VwQ291bnRlcnNcIix7Z3JvdXBJRDpzLGtleTpvLHZhbHVlOml9PWUse2F2Q2hhdFJvb21LZXk6bn09dGhpcy5fZ2V0TG9jYWxHcm91cENvdW50ZXJzKHMpLHI9YGdyb3VwSUQ6JHtzfSBrZXk6JHtvfSB2YWx1ZToke2l9YCxhPW5ldyBDbihcImluY3JlYXNlR3JvdXBDb3VudGVyXCIpO2Euc2V0TWVzc2FnZShcIlwiK3IpLF9lLmwoYCR7dH0uICR7cn1gKTtjb25zdCB1PVt7a2V5Om8sdmFsdWU6aX1dO3JldHVybiB0aGlzLl91cGRhdGVHcm91cENvdW50ZXJzKHtncm91cElEOnMsY291bnRlckxpc3Q6dSxhdkNoYXRSb29tS2V5Om4sbW9kZTpDcn0pLnRoZW4oZT0+KGEuZW5kKCksX2UubCh0K1wiIG9rLlwiKSx3bih7Y291bnRlcnM6ZX0pKSkuY2F0Y2goZT0+KHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Euc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1kZWNyZWFzZUdyb3VwQ291bnRlcihlKXtpZighdGhpcy5fZ3JvdXBNb2R1bGUuY2FuSVVzZShNLkdSUF9DT1VOVEVSKSlyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX1VTRV9DT01NRVJDSUFMX0FCSUxJVFl9KTtjb25zdCB0PXRoaXMuX24rXCIuZGVjcmVhc2VHcm91cENvdW50ZXJcIix7Z3JvdXBJRDpzLGtleTpvLHZhbHVlOml9PWUse2F2Q2hhdFJvb21LZXk6bn09dGhpcy5fZ2V0TG9jYWxHcm91cENvdW50ZXJzKHMpLHI9YGdyb3VwSUQ6JHtzfSBrZXk6JHtvfSB2YWx1ZToke2l9YCxhPW5ldyBDbihcImRlY3JlYXNlR3JvdXBDb3VudGVyXCIpO2Euc2V0TWVzc2FnZShcIlwiK3IpLF9lLmwoYCR7dH0uICR7cn1gKTtjb25zdCB1PVt7a2V5Om8sdmFsdWU6aX1dO3JldHVybiB0aGlzLl91cGRhdGVHcm91cENvdW50ZXJzKHtncm91cElEOnMsY291bnRlckxpc3Q6dSxhdkNoYXRSb29tS2V5Om4sbW9kZTpUcn0pLnRoZW4oZT0+KGEuZW5kKCksX2UubCh0K1wiIG9rLlwiKSx3bih7Y291bnRlcnM6ZX0pKSkuY2F0Y2goZT0+KHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Euc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1nZXRHcm91cENvdW50ZXJzKGUpe2lmKCF0aGlzLl9ncm91cE1vZHVsZS5jYW5JVXNlKE0uR1JQX0NPVU5URVIpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHQ9dGhpcy5fbitcIi5nZXRHcm91cENvdW50ZXJzXCIse2dyb3VwSUQ6cyxrZXlMaXN0Om89W119PWUse2F2Q2hhdFJvb21LZXk6aSxsYXN0VXBkYXRlVGltZTpufT10aGlzLl9nZXRMb2NhbEdyb3VwQ291bnRlcnMocykscj1uZXcgQ24oXCJnZXRHcm91cENvdW50ZXJzXCIpO2lmKHIuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIrcyksRGF0ZS5ub3coKS1uPj10aGlzLkVYUElSRV9USU1FKXJldHVybiB0aGlzLl9nZXRSZW1vdGVHcm91cENvdW50ZXJzKHtncm91cElEOnMsYXZDaGF0Um9vbUtleTppfSkudGhlbihlPT57ci5zZXRNb3JlTWVzc2FnZShcImZyb20gcmVtb3RlLiBjb3VudDpcIitlLmxlbmd0aCkuZW5kKCksX2UubChgJHt0fSBmcm9tIHJlbW90ZS4gZ3JvdXBJRDoke3N9YCk7Y29uc3QgaT10aGlzLl9nZXRMb2NhbENvdW50ZXJzKHMsbyk7cmV0dXJuIHduKHtjb3VudGVyczppfSl9KS5jYXRjaChlPT4odGhpcy5fZ3JvdXBNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57ci5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxWbihlKSkpO3Iuc2V0TW9yZU1lc3NhZ2UoXCJmcm9tIGNhY2hlXCIpLmVuZCgpLF9lLmwoYCR7dH0gZnJvbSBjYWNoZS4gZ3JvdXBJRDoke3N9YCk7Y29uc3QgYT10aGlzLl9nZXRMb2NhbENvdW50ZXJzKHMsbyk7cmV0dXJuIHhuKHtjb3VudGVyczphfSl9X2dldFJlbW90ZUdyb3VwQ291bnRlcnMoZSl7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpDaSxyZXF1ZXN0RGF0YTp7Li4uZX19KS50aGVuKHQ9Pntjb25zdHtjb3VudGVyTGlzdDpzPVtdLGdyb3VwQ291bnRlclNlcTpvfT10LmRhdGE7cmV0dXJuIHRoaXMuX3VwZGF0ZUxvY2FsR3JvdXBDb3VudGVycyh7Z3JvdXBJRDplLmdyb3VwSUQsY291bnRlckxpc3Q6cyxncm91cENvdW50ZXJTZXE6b30pLF9lLmwoYCR7dGhpcy5fbn0uX2dldFJlbW90ZUdyb3VwQ291bnRlcnMgb2suIGdyb3VwSUQ6JHtlLmdyb3VwSUR9YCksc30pLmNhdGNoKGU9PlZuKGUpKX1fY29udmVydE9iamVjdFRvTGlzdChlKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHM9Pnt0LnB1c2goe2tleTpzLHZhbHVlOmVbc119KX0pLHR9X3VwZGF0ZUdyb3VwQ291bnRlcnMoZSl7Y29uc3QgdD10aGlzLl9uK1wiLl91cGRhdGVHcm91cENvdW50ZXJzXCIse2dyb3VwSUQ6cyxhdkNoYXRSb29tS2V5Om8sbW9kZTppfT1lO3JldHVybiBfZS5sKGAke3R9LiBncm91cElEOiR7c30gYXZDaGF0Um9vbUtleToke299IG1vZGU6JHtpfWApLHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpJaSxyZXF1ZXN0RGF0YTp7Li4uZX19KS50aGVuKGU9PntfZS5sKHQrXCIgb2suXCIpO2NvbnN0e2NvdW50ZXJMaXN0OnM9W119PWUuZGF0YSxvPXt9O3JldHVybiBzLmZvckVhY2goZT0+e2NvbnN0e2tleTp0LHZhbHVlOnN9PWU7b1t0XT1zfSksb30pLmNhdGNoKGU9PlZuKGUpKX1faGFzTG9jYWxHcm91cENvdW50ZXJzKGUpe3JldHVybiB0aGlzLl9ncm91cENvdW50ZXJzTWFwLmhhcyhlKX1fZ2V0TG9jYWxHcm91cENvdW50ZXJzKGUpe3JldHVybiB0aGlzLl9oYXNMb2NhbEdyb3VwQ291bnRlcnMoZSl8fHRoaXMuaW5pdEdyb3VwQ291bnRlcnNDYWNoZSh7Z3JvdXBJRDplfSksdGhpcy5fZ3JvdXBDb3VudGVyc01hcC5nZXQoZSl9X3VwZGF0ZUxvY2FsR3JvdXBDb3VudGVycyhlKXtjb25zdHtncm91cElEOnQsY291bnRlckxpc3Q6cz1bXSxncm91cENvdW50ZXJTZXE6b309ZTtpZih0aGlzLl9oYXNMb2NhbEdyb3VwQ291bnRlcnModCkpe2NvbnN0e2NvdW50ZXJzOmUsYXZDaGF0Um9vbUtleTppLGdyb3VwQ291bnRlclNlcTpufT10aGlzLl9nZXRMb2NhbEdyb3VwQ291bnRlcnModCk7aWYobz4wJiZvPG4pcmV0dXJuO3MuZm9yRWFjaCh0PT57Y29uc3R7a2V5OnMsdmFsdWU6b309dDtlLnNldChzLG8pfSksdGhpcy5fZ3JvdXBDb3VudGVyc01hcC5zZXQodCx7bGFzdFVwZGF0ZVRpbWU6RGF0ZS5ub3coKSxncm91cENvdW50ZXJTZXE6byxjb3VudGVyczplLGF2Q2hhdFJvb21LZXk6aX0pfX1fZGVsZXRlTG9jYWxHcm91cENvdW50ZXJzKGUpe2NvbnN0e2dyb3VwSUQ6dCxjb3VudGVyTGlzdDpzPVtdLGdyb3VwQ291bnRlclNlcTpvfT1lO2lmKHRoaXMuX2hhc0xvY2FsR3JvdXBDb3VudGVycyh0KSl7Y29uc3R7Y291bnRlcnM6ZSxhdkNoYXRSb29tS2V5Oml9PXRoaXMuX2dldExvY2FsR3JvdXBDb3VudGVycyh0KTtzLmZvckVhY2godD0+e2UuZGVsZXRlKHQua2V5KX0pLHRoaXMuX2dyb3VwQ291bnRlcnNNYXAuc2V0KHQse2xhc3RVcGRhdGVUaW1lOkRhdGUubm93KCksZ3JvdXBDb3VudGVyU2VxOm8sY291bnRlcnM6ZSxhdkNoYXRSb29tS2V5Oml9KX19X2dldExvY2FsQ291bnRlcnMoZSx0KXtjb25zdCBzPXt9O2lmKCF0aGlzLl9oYXNMb2NhbEdyb3VwQ291bnRlcnMoZSkpcmV0dXJuIHM7Y29uc3R7Y291bnRlcnM6b309dGhpcy5fZ2V0TG9jYWxHcm91cENvdW50ZXJzKGUpO2lmKHQubGVuZ3RoPjApdC5mb3JFYWNoKGU9PntvLmhhcyhlKSYmKHNbZV09by5nZXQoZSkpfSk7ZWxzZSBmb3IoY29uc3QgaSBvZiBvLmtleXMoKSlzW2ldPW8uZ2V0KGkpO3JldHVybiBzfXJlc2V0KCl7dGhpcy5fZ3JvdXBDb3VudGVyc01hcC5jbGVhcigpLHRoaXMuRVhQSVJFX1RJTUU9M2U0fX1jbGFzcyBEcntjb25zdHJ1Y3RvcihlKXtjb25zdHttYW5hZ2VyOnQsZ3JvdXBJRDpzLG9uSW5pdDpvLG9uU3VjY2VzczppLG9uRmFpbDpufT1lO3RoaXMuX249XCJQb2xsaW5nXCIsdGhpcy5fbWFuYWdlcj10LHRoaXMuX2dyb3VwTW9kdWxlPXQuX2dyb3VwTW9kdWxlLHRoaXMuX29uSW5pdD1vLHRoaXMuX29uU3VjY2Vzcz1pLHRoaXMuX29uRmFpbD1uLHRoaXMuX2dyb3VwSUQ9cyx0aGlzLl90aW1lb3V0SUQ9LTEsdGhpcy5faXNSdW5uaW5nPSExLHRoaXMuX3Byb3RvY29sTmFtZT1yaX1zdGFydCgpe2NvbnN0IGU9dGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpO2V8fCh0aGlzLl9wcm90b2NvbE5hbWU9YWkpLF9lLmwoYCR7dGhpcy5fbn0uc3RhcnQgcG9sbGluZ0ludGVydmFsOiR7dGhpcy5fbWFuYWdlci5nZXRQb2xsaW5nSW50ZXJ2YWwoKX0gaXNMb2dnZWRJbjoke2V9YCksdGhpcy5faXNSdW5uaW5nPSEwLHRoaXMuX3JlcXVlc3QoKX1pc1J1bm5pbmcoKXtyZXR1cm4gdGhpcy5faXNSdW5uaW5nfV9yZXF1ZXN0KCl7Y29uc3QgZT10aGlzLl9vbkluaXQodGhpcy5fZ3JvdXBJRCk7dGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnRoaXMuX3Byb3RvY29sTmFtZSxyZXF1ZXN0RGF0YTplfSkudGhlbihlPT57dGhpcy5fb25TdWNjZXNzKHRoaXMuX2dyb3VwSUQsZSksdGhpcy5pc1J1bm5pbmcoKSYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SUQpLHRoaXMuX3RpbWVvdXRJRD1zZXRUaW1lb3V0KHRoaXMuX3JlcXVlc3QuYmluZCh0aGlzKSx0aGlzLl9tYW5hZ2VyLmdldFBvbGxpbmdJbnRlcnZhbCgpKSl9KS5jYXRjaChlPT57dGhpcy5fb25GYWlsKHRoaXMuX2dyb3VwSUQsZSksdGhpcy5pc1J1bm5pbmcoKSYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SUQpLHRoaXMuX3RpbWVvdXRJRD1zZXRUaW1lb3V0KHRoaXMuX3JlcXVlc3QuYmluZCh0aGlzKSx0aGlzLl9tYW5hZ2VyLk1BWF9QT0xMSU5HX0lOVEVSVkFMKSl9KX1zdG9wKCl7X2UubCh0aGlzLl9uK1wiLnN0b3BcIiksdGhpcy5fdGltZW91dElEPjAmJihjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElEKSx0aGlzLl90aW1lb3V0SUQ9LTEpLHRoaXMuX2lzUnVubmluZz0hMX1nZXRQb2xsaW5nVGltZXJJRCgpe3JldHVybiB0aGlzLl90aW1lb3V0SUR9fWNvbnN0IEVyPXszOiEwLDQ6ITAsNTohMCw2OiEwLDE3OiEwfTtjbGFzcyBTcntjb25zdHJ1Y3RvcihlKXt0aGlzLl9ncm91cE1vZHVsZT1lLHRoaXMuX249XCJBVkNoYXRSb29tSGFuZGxlclwiLHRoaXMuX2pvaW5lZEdyb3VwTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwPW5ldyBNYXAsdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwPW5ldyBNYXAsdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0PW5ldyBvcigyMDApLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdD1uZXcgb3IoMTAwKSx0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50PTAsdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudD0wLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwPW5ldyBNYXAsdGhpcy5ERUZBVUxUX0VYUElSRV9USU1FPTYwLHRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMPTMwMCx0aGlzLk1BWF9QT0xMSU5HX0lOVEVSVkFMPTJlMyx0aGlzLl9wb2xsaW5nSW50ZXJ2YWw9dGhpcy5ERUZBVUxUX1BPTExJTkdfSU5URVJWQUwsdGhpcy5ERUZBVUxUX1BPTExJTkdfTk9fTUVTU0FHRV9DT1VOVD0yMCx0aGlzLkRFRkFVTFRfUE9MTElOR19JTlRFUlZBTF9QTFVTPTJlMyx0aGlzLl9wb2xsaW5nTm9NZXNzYWdlQ291bnQ9MCx0aGlzLl9zdGFydEJyb2FkY2FzdFNlcT0xLHRoaXMuX2Jyb2FkY2FzdE1lc3NhZ2VJRE1hcD1uZXcgTWFwLHRoaXMuREVGQVVMVF9QT0xMSU5HX1NJTVBMSUZJRURfTVNHPTB9aGFzSm9pbmVkQVZDaGF0Um9vbSgpe3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5zaXplPjB9Y2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuaGFzKGUpfWdldEpvaW5lZEFWQ2hhdFJvb20oKXtyZXR1cm4gdGhpcy5fam9pbmVkR3JvdXBNYXAuc2l6ZT4wP1suLi50aGlzLl9qb2luZWRHcm91cE1hcC5rZXlzKCldOm51bGx9X3VwZGF0ZVJlcXVlc3REYXRhKGUpe2NvbnN0IHQ9dGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmdldChlKTtyZXR1cm4gZT09PVsuLi50aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAua2V5cygpXVswXT97Li4udCxzdGFydEJyb2FkY2FzdFNlcTp0aGlzLl9zdGFydEJyb2FkY2FzdFNlcSxzaW1wbGlmaWVkTWVzc2FnZTp0aGlzLkRFRkFVTFRfUE9MTElOR19TSU1QTElGSUVEX01TR306ey4uLnQsc2ltcGxpZmllZE1lc3NhZ2U6dGhpcy5ERUZBVUxUX1BPTExJTkdfU0lNUExJRklFRF9NU0d9fV9oYW5kbGVTdWNjZXNzKGUsdCl7Y29uc3R7a2V5OnMsbmV4dFNlcTpvLHJzcE1zZ0xpc3Q6aSxlcnJvckNvZGU6bixuZXh0QnJvYWRjYXN0U2VxOnIsYnJvYWRjYXN0TWVzc2FnZUxpc3Q6YX09dC5kYXRhO2lmKDAhPT1uKXtjb25zdCBzPXRoaXMuX3BvbGxpbmdSZXF1ZXN0SW5mb01hcC5nZXQoZSksbz1uZXcgQ24oXCJsb25nUG9sbGluZ0FWRXJyb3JcIiksaT1zP2Ake3Mua2V5fS0ke3Muc3RhcnRTZXF9YDpcInJlcXVlc3RJbmZvIGlzIHVuZGVmaW5lZFwiO28uc2V0TWVzc2FnZShgJHtlfS0ke2l9LSR7dC5lcnJvckluZm99YCkuc2V0Q29kZSh0LmVycm9yQ29kZSkuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCEwKX1lbHNle2lmKCF0aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSkpcmV0dXJuO1VlKHMpJiZHZShvKSYmdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLnNldChlLHtrZXk6cyxzdGFydFNlcTpvfSksR2UocikmJnI+dGhpcy5fc3RhcnRCcm9hZGNhc3RTZXEmJih0aGlzLl9zdGFydEJyb2FkY2FzdFNlcT1yKSxiZShpKSYmaS5sZW5ndGg+MD8oaS5mb3JFYWNoKGU9PntlLnRvPWUuZ3JvdXBJRH0pLHRoaXMub25NZXNzYWdlKGkpKToodGhpcy5fcG9sbGluZ05vTWVzc2FnZUNvdW50Kz0xLHRoaXMuX3BvbGxpbmdOb01lc3NhZ2VDb3VudD09PXRoaXMuREVGQVVMVF9QT0xMSU5HX05PX01FU1NBR0VfQ09VTlQmJih0aGlzLl9wb2xsaW5nSW50ZXJ2YWw9dGhpcy5ERUZBVUxUX1BPTExJTkdfSU5URVJWQUwrdGhpcy5ERUZBVUxUX1BPTExJTkdfSU5URVJWQUxfUExVUykpLHRoaXMuX29uQnJvYWRjYXN0TWVzc2FnZShhKX19X2hhbmRsZUZhaWx1cmUoZSx0KXt9b25NZXNzYWdlKHMpe2lmKCFiZShzKXx8MD09PXMubGVuZ3RoKXJldHVybjswIT09dGhpcy5fcG9sbGluZ05vTWVzc2FnZUNvdW50JiYodGhpcy5fcG9sbGluZ05vTWVzc2FnZUNvdW50PTAsdGhpcy5fcG9sbGluZ0ludGVydmFsPXRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMKTtsZXQgbz1udWxsO2NvbnN0IGk9W10sbj10aGlzLl9nZXRNb2R1bGUoX3MpLHI9dGhpcy5fZ2V0TW9kdWxlKFJzKSxhPXMubGVuZ3RoO2E+MSYmcy5zb3J0KChlLHQpPT5lLnNlcXVlbmNlLXQuc2VxdWVuY2UpO2NvbnN0IHU9dGhpcy5fZ2V0TW9kdWxlKG1zKTtmb3IobGV0IGU9MDtlPGE7ZSsrKXtjb25zdCBhPXRoaXMucmVzdG9yZU1lc3NhZ2VGcm9tU2ltcGxpZmllZChzW2VdKTtpZighRXJbYS5ldmVudF0pe19lLncoYCR7dGhpcy5fbn0ub25NZXNzYWdlIHVua25vd24gZXZlbnQ6JHthLmV2ZW50fWApO2NvbnRpbnVlfWlmKDY9PT1hLmV2ZW50KXtpZih0aGlzLl9ncm91cE1vZHVsZS5pc0dyb3VwQXR0cmlidXRlc1VwZGF0ZWROb3RpY2UoYSkpY29udGludWU7aWYodGhpcy5fZ3JvdXBNb2R1bGUuaXNHcm91cENvdW50ZXJzTm90aWNlKGEpKWNvbnRpbnVlfXRoaXMucmVjZWl2ZWRNZXNzYWdlQ291bnQrPTEsbz10aGlzLnBhY2tNZXNzYWdlKGEsYS5ldmVudCk7Y29uc3QgYz0xPT09YS5pc01vZGlmaWVkLGw9MT09PWEuaXNIaXN0b3J5TWVzc2FnZTtpZighdS5pc1VubGltaXRlZEFWQ2hhdFJvb20oKSYmdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LmhhcyhvLnNlcXVlbmNlKSljb250aW51ZTtpZih0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3QuaGFzKG8uSUQpKWNvbnRpbnVlO2NvbnN0e2NvbnZlcnNhdGlvbklEOmR9PW87aWYodGhpcy5yZWNlaXZlZE1lc3NhZ2VDb3VudCU1MD09MD90aGlzLl9nZXRNb2R1bGUoTHMpLmRldGVjdEZpcnN0Um91bmQoZCx0aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QuZGF0YSgpKTp0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50JTgwPT0wJiZ0aGlzLl9nZXRNb2R1bGUoTHMpLmRldGVjdFNlY29uZFJvdW5kKGQsdGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LmRhdGEoKSksbnVsbCE9PXRoaXMuc2VxdWVuY2VzTGlua2VkTGlzdC50YWlsKCkpe2NvbnN0IGU9dGhpcy5zZXF1ZW5jZXNMaW5rZWRMaXN0LnRhaWwoKS52YWx1ZSx0PW8uc2VxdWVuY2UtZTt0PjEmJnQ8PTIwP3RoaXMuX2dldE1vZHVsZShMcykub25NZXNzYWdlTWF5YmVMb3N0KGQsZSsxLHQtMSk6dDwtMSYmdD49LTIwJiZ0aGlzLl9nZXRNb2R1bGUoTHMpLm9uTWVzc2FnZU1heWJlTG9zdChkLG8uc2VxdWVuY2UrMSxNYXRoLmFicyh0KS0xKX10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3Quc2V0KG8uc2VxdWVuY2UpLHRoaXMubWVzc2FnZUlETGlua2VkTGlzdC5zZXQoby5JRCk7bGV0IHA9ITE7aWYodGhpcy5faXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKG8pP2MmJihwPSEwLG8uaXNNb2RpZmllZD1jLG4udXBkYXRlTWVzc2FnZUlzTW9kaWZpZWRQcm9wZXJ0eShvKSk6cD0hMCxwKXtpZihvLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfU1lTVEVNJiY1PT09by5wYXlsb2FkLm9wZXJhdGlvblR5cGUmJnRoaXMuX29uR3JvdXBEaXNtaXNzZWQoby5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEKSwhbCYmby5jb252ZXJzYXRpb25UeXBlIT09dC5DT05WX1NZU1RFTSl7Y29uc3QgZT1vLmNvbnZlcnNhdGlvbklELnJlcGxhY2UodC5DT05WX0dST1VQLFwiXCIpO3RoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5oYXMoZSk/dGhpcy5fZ3JvdXBNb2R1bGUuaXNMb2dnZWRJbigpJiZyLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5Ol9uLG1lc3NhZ2U6b30pOihvLnR5cGUhPT10Lk1TR19HUlBfVElQJiZvLmNsaWVudFRpbWU+MCYmci5hZGRNZXNzYWdlRGVsYXkoby5jbGllbnRUaW1lKSxyLmFkZE1lc3NhZ2VTZXF1ZW5jZSh7a2V5OmduLG1lc3NhZ2U6b30pKX1pLnB1c2gobyl9fWlmKDA9PT1pLmxlbmd0aClyZXR1cm47dGhpcy5fZ3JvdXBNb2R1bGUuZmlsdGVyTW9kaWZpZWRNZXNzYWdlKGkpO2NvbnN0IGM9dGhpcy5wYWNrQ29udmVyc2F0aW9uT3B0aW9uKGkpO2lmKGMubGVuZ3RoPjApe3RoaXMuX2dldE1vZHVsZShfcykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpjLGlzSW5zdGFudE1lc3NhZ2U6ITB9KX1fZS5kKGAke3RoaXMuX259Lm9uTWVzc2FnZSBjb3VudDoke2kubGVuZ3RofWApLHRoaXMuX2NoZWNrTWVzc2FnZVN0YWNrZWQoaSk7Y29uc3QgbD10aGlzLl9ncm91cE1vZHVsZS5maWx0ZXJVbm1vZGlmaWVkTWVzc2FnZShpKTtsLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfUkVDRUlWRUQsbCksaS5sZW5ndGg9MH1pc0Jyb2FkY2FzdE9yTm9ybWFsKGUpe3JldHVybiAzPT09ZXx8MTc9PT1lfWlzR3JvdXBUaXAoZSl7cmV0dXJuIDQ9PT1lfHw2PT09ZX1pc0dyb3VwU3lzdGVtTm90aWNlKGUpe3JldHVybiA1PT09ZX1yZXN0b3JlR3JvdXBUaXBFbGVtZW50cyhlPXt9KXtlLmdyb3VwSm9pblR5cGV8fChlLmdyb3VwSm9pblR5cGU9MSk7Y29uc3R7b3BlcmF0b3JJbmZvOnQ9e30sb3BlcmF0b3JJRDpzLHVzZXJJRExpc3Q6bz1bXX09ZSx7dXNlcklEOmk9cyxhdmF0YXI6bj1cIlwiLG5pY2s6cj1cIlwifT10O2Uub3BlcmF0b3JJbmZvPXt1c2VySUQ6aSxhdmF0YXI6bixuaWNrOnJ9O2NvbnN0IGE9by5tYXAoZT0+KHt1c2VySUQ6ZX0pKTtyZXR1cm4gZS5tZW1iZXJJbmZvTGlzdD1lLm1lbWJlckluZm9MaXN0fHxhLGV9cmVzdG9yZU1lc3NhZ2VGcm9tU2ltcGxpZmllZChlKXtjb25zdHtldmVudDpzfT1lO2lmKHRoaXMuaXNCcm9hZGNhc3RPck5vcm1hbChzKSYmKGUuY2xvdWRDdXN0b21EYXRhPWUuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGUuZWxlbWVudHM9ZS5lbGVtZW50cy5tYXAoZT0+e2lmKGUudHlwZT09PXQuTVNHX0NVU1RPTSl7Y29uc3R7Y29udGVudDp0PXt9fT1lO2UuY29udGVudD17ZGF0YTpcIlwiLGRlc2NyaXB0aW9uOlwiXCIsZXh0ZW5zaW9uOlwiXCIsLi4udH19cmV0dXJuIGV9KSksKHRoaXMuaXNHcm91cFRpcChzKXx8dGhpcy5pc0dyb3VwU3lzdGVtTm90aWNlKHMpKSYmKGUuZnJvbT1lLmZyb218fFwiQFRJTSNTWVNURU1cIiksdGhpcy5pc0dyb3VwVGlwKHMpKXtlLmVsZW1lbnRzPXRoaXMucmVzdG9yZUdyb3VwVGlwRWxlbWVudHMoZS5lbGVtZW50cyk7Y29uc3R7ZWxlbWVudHM6dD17fX09ZSx7b3BlcmF0aW9uVHlwZTpzLG9wZXJhdG9ySW5mbzpvPXt9fT10O2lmKDE9PT1zKXtjb25zdCBlPVt7dXNlcklEOm8udXNlcklEfV07dC5tZW1iZXJJbmZvTGlzdD10Lm1lbWJlckluZm9MaXN0fHxlfX1pZih0aGlzLmlzR3JvdXBTeXN0ZW1Ob3RpY2Uocykpe2xldHttZW1iZXJJbmZvTGlzdDp0LG9wZXJhdG9ySW5mbzpzPXt9fT1lLmVsZW1lbnRzO3R8fCh0PXMpLGUuZWxlbWVudHMubWVtYmVySW5mb0xpc3Q9e3VzZXJJRDplLmVsZW1lbnRzLm9wZXJhdG9ySUQsYXZhdGFyOlwiXCIsbmljazpcIlwiLC4uLnR9LGUuZWxlbWVudHM9e2F1dGhlbnRpY2F0aW9uOlwiXCIscmVtYXJrSW5mbzpcIlwiLG1lc3NhZ2VLZXk6MWUzKmUudGltZSwuLi5lLmVsZW1lbnRzfTtjb25zdCBvPU9iamVjdC5rZXlzKGUuZWxlbWVudHMpLmZpbHRlcihlPT5cIm9wZXJhdG9ySW5mb1wiIT09ZSkucmVkdWNlKCh0LHMpPT4oey4uLnQsW3NdOmUuZWxlbWVudHNbc119KSx7fSk7ZS5lbGVtZW50cz1vfXJldHVybiBlfV9vbkdyb3VwRGlzbWlzc2VkKGUpe19lLmwoYCR7dGhpcy5fbn0uX29uR3JvdXBEaXNtaXNzZWQgZ3JvdXBJRDoke2V9YCksdGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx0aGlzLnJlc2V0KGUpfV9jaGVja01lc3NhZ2VTdGFja2VkKGUpe2NvbnN0IHQ9XCJNZXNzYWdlU3RhY2tlZFwiLHM9ZS5sZW5ndGg7aWYocz49MTAwJiYodGhpcy5fZ3JvdXBNb2R1bGUub3V0cHV0V2FybmluZyh0LHMpLHRoaXMuX3JlcG9ydE1lc3NhZ2VTdGFja2VkQ291bnQ8NSkpe25ldyBDbih0KS5zZXROZXR3b3JrVHlwZSh0aGlzLl9ncm91cE1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBjb3VudDoke3N9IGdyb3VwSUQ6JHtbLi4udGhpcy5fam9pbmVkR3JvdXBNYXAua2V5cygpXX1gKS5zZXRMZXZlbChcIndhcm5pbmdcIikuZW5kKCksdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudCs9MX19X2lzTWVzc2FnZVNlbnRCeUN1cnJlbnRJbnN0YW5jZShlKXtyZXR1cm4hIXRoaXMuX2dldE1vZHVsZShfcykuaXNNZXNzYWdlU2VudEJ5Q3VycmVudEluc3RhbmNlKGUpfXBhY2tNZXNzYWdlKGUscyl7ZS5jdXJyZW50VXNlcj10aGlzLl9ncm91cE1vZHVsZS5nZXRNeVVzZXJJRCgpLGUuY29udmVyc2F0aW9uVHlwZT01PT09cz90LkNPTlZfU1lTVEVNOnQuQ09OVl9HUk9VUCxlLmlzU3lzdGVtTWVzc2FnZT0hIWUuaXNTeXN0ZW1NZXNzYWdlO2NvbnN0IG89bmV3IGJuKGUpLGk9dGhpcy5wYWNrRWxlbWVudHMoZSxzKTtyZXR1cm4gby5zZXRFbGVtZW50KGksdGhpcy5fZ3JvdXBNb2R1bGUuZ2V0RmlsZURvd25sb2FkUHJveHkoKSksb31wYWNrRWxlbWVudHMoZSxzKXtpZig0PT09c3x8Nj09PXMpcmV0dXJuIHRoaXMuX3VwZGF0ZU1lbWJlckNvdW50QnlHcm91cFRpcHMoZSkse3R5cGU6dC5NU0dfR1JQX1RJUCxjb250ZW50OnsuLi5lLmVsZW1lbnRzLGdyb3VwUHJvZmlsZTplLmdyb3VwUHJvZmlsZX19O2lmKDU9PT1zKXJldHVybnt0eXBlOnQuTVNHX0dSUF9TWVNfTk9USUNFLGNvbnRlbnQ6ey4uLmUuZWxlbWVudHMsZ3JvdXBQcm9maWxlOnsuLi5lLmdyb3VwUHJvZmlsZSxncm91cElEOmUuZ3JvdXBJRH19fTtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKENzKS5wYXJzZUVsZW1lbnRzKGUuZWxlbWVudHMsZS5mcm9tKX1wYWNrQ29udmVyc2F0aW9uT3B0aW9uKGUpe2NvbnN0IHQ9bmV3IE1hcDtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyl7Y29uc3Qgbz1lW3NdLGk9by5jb252ZXJzYXRpb25JRDtpZih0LmhhcyhpKSl7Y29uc3QgZT10LmdldChpKTtlLmxhc3RNZXNzYWdlPW8sXCJpblwiPT09by5mbG93JiZlLnVucmVhZENvdW50Kyt9ZWxzZSB0LnNldChpLHtjb252ZXJzYXRpb25JRDpvLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50Olwib3V0XCI9PT1vLmZsb3c/MDoxLHR5cGU6by5jb252ZXJzYXRpb25UeXBlLHN1YlR5cGU6by5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOm99KX1yZXR1cm5bLi4udC52YWx1ZXMoKV19X3VwZGF0ZU1lbWJlckNvdW50QnlHcm91cFRpcHMoZSl7Y29uc3R7Z3JvdXBQcm9maWxlOntncm91cElEOnR9LGVsZW1lbnRzOntvbmxpbmVNZW1iZXJJbmZvOnN9fT1lO2lmKEx0KHMpKXJldHVybjtjb25zdHtvbmxpbmVNZW1iZXJOdW06bz0wLGV4cGlyZVRpbWU6aT10aGlzLkRFRkFVTFRfRVhQSVJFX1RJTUV9PXMsbj10aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5nZXQodCl8fHt9LHI9RGF0ZS5ub3coKTtMdChuKT9PYmplY3QuYXNzaWduKG4se2xhc3RSZXFUaW1lOjAsbGFzdFN5bmNUaW1lOjAsbGF0ZXN0VXBkYXRlVGltZTpyLG1lbWJlckNvdW50Om8sZXhwaXJlVGltZTppfSk6KG4ubGF0ZXN0VXBkYXRlVGltZT1yLG4ubWVtYmVyQ291bnQ9byksX2UuZCh0aGlzLl9uK1wiLl91cGRhdGVNZW1iZXJDb3VudEJ5R3JvdXBUaXBzIGluZm86XCIsbiksdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KHQsbil9X29uQnJvYWRjYXN0TWVzc2FnZSh0KXtpZihMdCh0KSlyZXR1cm47Y29uc3Qgcz1bXSxvPXQubGVuZ3RoO2xldCBpPW51bGw7Zm9yKGxldCBlPTA7ZTxvO2UrKyl7Y29uc3Qgbz10aGlzLnJlc3RvcmVNZXNzYWdlRnJvbVNpbXBsaWZpZWQodFtlXSk7RXJbby5ldmVudF0/KGk9dGhpcy5wYWNrTWVzc2FnZShvLG8uZXZlbnQpLGkuaXNCcm9hZGNhc3RNZXNzYWdlPSEwLHRoaXMuX2Jyb2FkY2FzdE1lc3NhZ2VJRE1hcC5oYXMoaS5JRCl8fChzLnB1c2goaSksdGhpcy5fYnJvYWRjYXN0TWVzc2FnZUlETWFwLnNldChpLklELDEpKSk6X2UudyhgJHt0aGlzLl9ufS5fb25Ccm9hZGNhc3RNZXNzYWdlIHVua25vd24gZXZlbnQ6JHtvLmV2ZW50fWApfXMubGVuZ3RoPjAmJnRoaXMuX2dyb3VwTW9kdWxlLmVtaXRPdXRlckV2ZW50KGUuTUVTU0FHRV9SRUNFSVZFRCxzKX1zdGFydChlKXtpZih0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuaGFzKGUpKXtjb25zdCB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSk7cmV0dXJuIHZvaWQodC5pc1J1bm5pbmcoKXx8dC5zdGFydCgpKX1jb25zdCB0PW5ldyBEcih7bWFuYWdlcjp0aGlzLGdyb3VwSUQ6ZSxvbkluaXQ6dGhpcy5fdXBkYXRlUmVxdWVzdERhdGEuYmluZCh0aGlzKSxvblN1Y2Nlc3M6dGhpcy5faGFuZGxlU3VjY2Vzcy5iaW5kKHRoaXMpLG9uRmFpbDp0aGlzLl9oYW5kbGVGYWlsdXJlLmJpbmQodGhpcyl9KTt0LnN0YXJ0KCksdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnNldChlLHQpLF9lLmwoYCR7dGhpcy5fbn0uc3RhcnQgZ3JvdXBJRDoke2V9YCl9aGFuZGxlSm9pblJlc3VsdChlKXtyZXR1cm4gdGhpcy5fcHJlQ2hlY2soKS50aGVuKCgpPT57Y29uc3R7bG9uZ1BvbGxpbmdLZXk6dCxncm91cDpzfT1lLG89cy5ncm91cElEO3JldHVybiB0aGlzLl9qb2luZWRHcm91cE1hcC5zZXQobyxzKSx0aGlzLl9ncm91cE1vZHVsZS51cGRhdGVHcm91cE1hcChbc10pLHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShvKSx0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSx3ZSh0KT94bih7c3RhdHVzOkxlLGdyb3VwOnN9KTpQcm9taXNlLnJlc29sdmUoKX0pfXN0YXJ0UnVuTG9vcChlKXtyZXR1cm4gdGhpcy5oYW5kbGVKb2luUmVzdWx0KGUpLnRoZW4oKCk9Pntjb25zdHtsb25nUG9sbGluZ0tleTp0LGdyb3VwOnMsc3RhcnRTZXE6bz0wfT1lLGk9cy5ncm91cElEO3JldHVybiB0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuc2V0KGkse2tleTp0LHN0YXJ0U2VxOm99KSx0aGlzLnN0YXJ0KGkpLHRoaXMuX2dyb3VwTW9kdWxlLmlzTG9nZ2VkSW4oKT94bih7c3RhdHVzOkxlLGdyb3VwOnN9KTp4bih7c3RhdHVzOkxlfSl9KX1fcHJlQ2hlY2soKXtpZih0aGlzLl9nZXRNb2R1bGUobXMpLmlzVW5saW1pdGVkQVZDaGF0Um9vbSgpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtpZighdGhpcy5oYXNKb2luZWRBVkNoYXRSb29tKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0W2Usc109dGhpcy5fam9pbmVkR3JvdXBNYXAuZW50cmllcygpLm5leHQoKS52YWx1ZTtpZih0aGlzLl9ncm91cE1vZHVsZS5pc0xvZ2dlZEluKCkpe2lmKCEocy5zZWxmSW5mby5yb2xlPT09dC5HUlBfTUJSX1JPTEVfT1dORVJ8fHMub3duZXJJRD09PXRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCkpKXJldHVybiB0aGlzLl9ncm91cE1vZHVsZS5xdWl0R3JvdXAoZSk7dGhpcy5fZ3JvdXBNb2R1bGUuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKX1lbHNlIHRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSk7cmV0dXJuIHRoaXMucmVzZXQoZSksUHJvbWlzZS5yZXNvbHZlKCl9am9pbldpdGhvdXRBdXRoKGUpe2NvbnN0e2dyb3VwSUQ6c309ZSxvPXRoaXMuX24rXCIuam9pbldpdGhvdXRBdXRoXCIsaT1uZXcgQ24oXCJqb2luV2l0aG91dEF1dGhcIik7cmV0dXJuIHRoaXMuX2dyb3VwTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpCbyxyZXF1ZXN0RGF0YTplfSkudGhlbigoe2RhdGE6e2xvbmdQb2xsaW5nS2V5OmV9fSk9PntpZih0aGlzLl9ncm91cE1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxvXSk9PntpLnNldE5ldHdvcmtUeXBlKG8pLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtzfSBsb25nUG9sbGluZ0tleToke2V9YCkuZW5kKCEwKX0pLHdlKGUpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfSk9JTl9OT05fQVZDSEFUUk9PTV9XSVRIT1VUX0xPR0lOfSk7X2UubChgJHtvfSBvay4gZ3JvdXBJRDoke3N9YCk7dGhpcy5fZ2V0TW9kdWxlKF9zKS5zZXRDb21wbGV0ZWQoYCR7dC5DT05WX0dST1VQfSR7c31gKTtjb25zdCBuPW5ldyBucih7Z3JvdXBJRDpzfSk7cmV0dXJuIHRoaXMuc3RhcnRSdW5Mb29wKHtncm91cDpuLGxvbmdQb2xsaW5nS2V5OmV9KSx3bih7c3RhdHVzOkxlfSl9KS5jYXRjaChlPT4oX2UuZShgJHtvfSBmYWlsZWQuIGdyb3VwSUQ6JHtzfSBlcnJvcjpgLGUpLHRoaXMuX2dyb3VwTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LG9dKT0+e2kuc2V0RXJyb3IoZSx0LG8pLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK3MpLmVuZCghMCl9KSxWbihlKSkpLmZpbmFsbHkoKCk9Pnt0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZnMpLnJlcG9ydEF0T25jZSgpfSl9Z2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKXtjb25zdCB0PXRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmdldChlKXx8e30scz1EYXRlLm5vdygpO3JldHVybiBMdCh0KXx8cy10Lmxhc3RTeW5jVGltZT4xZTMqdC5leHBpcmVUaW1lJiZzLXQubGF0ZXN0VXBkYXRlVGltZT4xZTQmJnMtdC5sYXN0UmVxVGltZT4zZTM/KHQubGFzdFJlcVRpbWU9cyx0aGlzLl9vbmxpbmVNZW1iZXJDb3VudE1hcC5zZXQoZSx0KSx0aGlzLl9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpLnRoZW4oZT0+d24oe21lbWJlckNvdW50OmUubWVtYmVyQ291bnR9KSkuY2F0Y2goZT0+Vm4oZSkpKTp4bih7bWVtYmVyQ291bnQ6dC5tZW1iZXJDb3VudH0pfV9nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5fZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiO3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6dWkscmVxdWVzdERhdGE6e2dyb3VwSUQ6ZX19KS50aGVuKHM9Pntjb25zdCBvPXRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmdldChlKXx8e30se2RhdGE6e29ubGluZU1lbWJlck51bTppPTAsZXhwaXJlVGltZTpuPXRoaXMuREVGQVVMVF9FWFBJUkVfVElNRX19PXM7X2UubChgJHt0fSBvay4gZ3JvdXBJRDoke2V9IG1lbWJlckNvdW50OiR7aX0gZXhwaXJlVGltZToke259YCk7Y29uc3Qgcj1EYXRlLm5vdygpO3JldHVybiBMdChvKSYmKG8ubGFzdFJlcVRpbWU9ciksdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuc2V0KGUsT2JqZWN0LmFzc2lnbihvLHtsYXN0U3luY1RpbWU6cixsYXRlc3RVcGRhdGVUaW1lOnIsbWVtYmVyQ291bnQ6aSxleHBpcmVUaW1lOm59KSkse21lbWJlckNvdW50Oml9fSkuY2F0Y2gocz0+e19lLncodCtcIiBmYWlsZWQuIGVycm9yOlwiLHMpO3JldHVybiBuZXcgQ24oXCJfZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudFwiKS5zZXRDb2RlKHMuY29kZSkuc2V0TWVzc2FnZShgZ3JvdXBJRDoke2V9IGVycm9yOiR7SlNPTi5zdHJpbmdpZnkocyl9YCkuc2V0TmV0d29ya1R5cGUodGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksUHJvbWlzZS5yZWplY3Qocyl9KX1fZ2V0TW9kdWxlKGUpe3JldHVybiB0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZSl9c2V0UG9sbGluZ0ludGVydmFsKGUpe3dlKGUpfHwoR2UoZSk/dGhpcy5fcG9sbGluZ0ludGVydmFsPXRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMPWU6dGhpcy5fcG9sbGluZ0ludGVydmFsPXRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMPXBhcnNlSW50KGUsMTApKX1zZXRQb2xsaW5nSW50ZXJ2YWxQbHVzKGUpe3dlKGUpfHwoR2UoZSk/dGhpcy5ERUZBVUxUX1BPTExJTkdfSU5URVJWQUxfUExVUz1lOnRoaXMuREVGQVVMVF9QT0xMSU5HX0lOVEVSVkFMX1BMVVM9cGFyc2VJbnQoZSwxMCkpfXNldFBvbGxpbmdOb01lc3NhZ2VDb3VudChlKXt3ZShlKXx8KEdlKGUpP3RoaXMuREVGQVVMVF9QT0xMSU5HX05PX01FU1NBR0VfQ09VTlQ9ZTp0aGlzLkRFRkFVTFRfUE9MTElOR19OT19NRVNTQUdFX0NPVU5UPXBhcnNlSW50KGUsMTApKX1zZXRQb2xsaW5nU2ltcGxpZmllZE1lc3NhZ2UoZSl7d2UoZSl8fFwiMFwiIT09ZSYmXCIxXCIhPT1lfHwodGhpcy5ERUZBVUxUX1BPTExJTkdfU0lNUExJRklFRF9NU0c9cGFyc2VJbnQoZSwxMCkpfWdldFBvbGxpbmdJbnRlcnZhbCgpe3JldHVybiB0aGlzLl9wb2xsaW5nSW50ZXJ2YWx9b25BVkNoYXRSb29tTWVtYmVyQmFubmVkKGUpe2NvbnN0e2dyb3VwSUQ6dH09ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZTtfZS5sKGAke3RoaXMuX259Lm9uQVZDaGF0Um9vbU1lbWJlckJhbm5lZCBncm91cElEOiR7dH1gKSx0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpLHRoaXMucmVzZXQodCl9cmVzdGFydFBvbGxpbmcoKXtfZS5sKGAke3RoaXMuX259LnJlc3RhcnRQb2xsaW5nIGNvdW50OiR7dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnNpemV9YCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnZhbHVlcygpKWUuc3RvcCgpLGUuc3RhcnQoKX1nZXRQb2xsaW5nVGltZXJJRChlKXtpZighdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmhhcyhlKSlyZXR1cm4tMTtjb25zdCB0PXRoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5nZXQoZSkuZ2V0UG9sbGluZ1RpbWVySUQoKTtyZXR1cm4gX2UubChgJHt0aGlzLl9ufS5nZXRQb2xsaW5nVGltZXJJRCBncm91cElEOiR7ZX0gdGltZXJJRDoke3R9YCksdH1yZXNldChlKXtpZihlKXtfZS5sKGAke3RoaXMuX259LnJlc2V0IGdyb3VwSUQ6JHtlfWApO2NvbnN0IHQ9dGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLmdldChlKTt0JiZ0LnN0b3AoKSx0aGlzLl9wb2xsaW5nSW5zdGFuY2VNYXAuZGVsZXRlKGUpLHRoaXMuX2pvaW5lZEdyb3VwTWFwLmRlbGV0ZShlKSx0aGlzLl9wb2xsaW5nUmVxdWVzdEluZm9NYXAuZGVsZXRlKGUpLHRoaXMuX29ubGluZU1lbWJlckNvdW50TWFwLmRlbGV0ZShlKX1lbHNle19lLmwodGhpcy5fbitcIi5yZXNldCBhbGxcIik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcG9sbGluZ0luc3RhbmNlTWFwLnZhbHVlcygpKWUuc3RvcCgpO3RoaXMuX3BvbGxpbmdJbnN0YW5jZU1hcC5jbGVhcigpLHRoaXMuX2pvaW5lZEdyb3VwTWFwLmNsZWFyKCksdGhpcy5fcG9sbGluZ1JlcXVlc3RJbmZvTWFwLmNsZWFyKCksdGhpcy5fb25saW5lTWVtYmVyQ291bnRNYXAuY2xlYXIoKSx0aGlzLl9icm9hZGNhc3RNZXNzYWdlSURNYXAuY2xlYXIoKX10aGlzLnNlcXVlbmNlc0xpbmtlZExpc3QucmVzZXQoKSx0aGlzLm1lc3NhZ2VJRExpbmtlZExpc3QucmVzZXQoKSx0aGlzLnJlY2VpdmVkTWVzc2FnZUNvdW50PTAsdGhpcy5fcmVwb3J0TWVzc2FnZVN0YWNrZWRDb3VudD0wLHRoaXMuX3BvbGxpbmdJbnRlcnZhbD10aGlzLkRFRkFVTFRfUE9MTElOR19JTlRFUlZBTD0zMDAsdGhpcy5ERUZBVUxUX1BPTExJTkdfTk9fTUVTU0FHRV9DT1VOVD0yMCx0aGlzLkRFRkFVTFRfUE9MTElOR19JTlRFUlZBTF9QTFVTPTJlMyx0aGlzLl9wb2xsaW5nTm9NZXNzYWdlQ291bnQ9MH19Y29uc3QgTHI9MSxBcj0xNTtjbGFzcyB2cntjb25zdHJ1Y3RvcihlKXt0aGlzLl9ncm91cE1vZHVsZT1lLHRoaXMuX249XCJHcm91cFN5c3RlbU5vdGljZUhhbmRsZXJcIix0aGlzLnBlbmRlbmN5TWFwPW5ldyBNYXB9b25OZXdHcm91cFN5c3RlbU5vdGljZSh0KXtjb25zdHtkYXRhTGlzdDpzLGlzU3luY2luZ0VuZGVkOm8saXNJbnN0YW50TWVzc2FnZTppfT10O19lLmQoYCR7dGhpcy5fbn0ub25SZWNlaXZlU3lzdGVtTm90aWNlIGNvdW50OiR7cy5sZW5ndGh9YCk7Y29uc3R7ZXZlbnREYXRhTGlzdDpuLHJlc3VsdDpyfT10aGlzLm5ld1N5c3RlbU5vdGljZVN0b3JlZEFuZFN1bW1hcnkoe25vdGlmaWVzTGlzdDpzLGlzSW5zdGFudE1lc3NhZ2U6aX0pO2lmKG4ubGVuZ3RoPjApe3RoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShfcykub25OZXdNZXNzYWdlKHtjb252ZXJzYXRpb25PcHRpb25zTGlzdDpuLGlzSW5zdGFudE1lc3NhZ2U6aX0pLHRoaXMuX29uUmVjZWl2ZWRHcm91cFN5c3RlbU5vdGljZSh7cmVzdWx0OnIsaXNJbnN0YW50TWVzc2FnZTppfSl9aT9yLmxlbmd0aD4wJiZ0aGlzLl9ncm91cE1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfUkVDRUlWRUQscik6ITA9PT1vJiZ0aGlzLl9jbGVhckdyb3VwU3lzdGVtTm90aWNlKCl9bmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeSh7bm90aWZpZXNMaXN0OmUsaXNJbnN0YW50TWVzc2FnZTpzfSl7bGV0IG89bnVsbDtjb25zdCBpPWUubGVuZ3RoO2xldCBuPTA7Y29uc3Qgcj1bXSxhPXtjb252ZXJzYXRpb25JRDp0LkNPTlZfU1lTVEVNLHVucmVhZENvdW50OjAsdHlwZTp0LkNPTlZfU1lTVEVNLHN1YlR5cGU6bnVsbCxsYXN0TWVzc2FnZTpudWxsfTtmb3Iobj0wO248aTtuKyspe2NvbnN0IGk9ZVtuXSx7Z3JvdXBQcm9maWxlOntjb21tdW5pdHlUeXBlOnU9MCx0b3BpY0lEOmN9LGVsZW1lbnRzOnt0b3BpY0lETGlzdDpsLG9wZXJhdGlvblR5cGU6ZH19PWk7aWYoISgyIT09dXx8THQoYykmJkx0KGwpKSl7aWYoWzE3LDE4LDIwXS5pbmNsdWRlcyhkKSl7dGhpcy5faGFuZGxlVG9waWNTeXN0ZW1Ob3RpY2UoaSk7Y29udGludWV9THQoYyl8fChpLnRvPWMpfWlmKGkuZWxlbWVudHMub3BlcmF0aW9uVHlwZT09PUFyKWNvbnRpbnVlO2kuY3VycmVudFVzZXI9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TXlVc2VySUQoKSxpLmNvbnZlcnNhdGlvblR5cGU9dC5DT05WX1NZU1RFTSxpLmNvbnZlcnNhdGlvbklEPXQuQ09OVl9TWVNURU0sbz1uZXcgYm4oaSksby5zZXRFbGVtZW50KHt0eXBlOnQuTVNHX0dSUF9TWVNfTk9USUNFLGNvbnRlbnQ6ey4uLmkuZWxlbWVudHMsZ3JvdXBQcm9maWxlOnsuLi5pLmdyb3VwUHJvZmlsZX19fSksby5pc1N5c3RlbU1lc3NhZ2U9ITAsKDE9PT1vLnNlcXVlbmNlJiYxPT09by5yYW5kb218fDI9PT1vLnNlcXVlbmNlJiYyPT09by5yYW5kb20pJiYoby5zZXF1ZW5jZT1XZSgpLG8ucmFuZG9tPVdlKCksby5nZW5lcmF0ZU1lc3NhZ2VJRCgpLF9lLmwoYCR7dGhpcy5fbn0ubmV3U3lzdGVtTm90aWNlU3RvcmVkQW5kU3VtbWFyeSBzZXF1ZW5jZSBhbmQgcmFuZG9tIG1heWJlIGR1cGxpY2F0ZWQsIHJlZ2VuZXJhdGUuIElEOiR7by5JRH1gKSk7dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKS5wdXNoSW50b05vdGljZVJlc3VsdChyLG8pJiYocz9hLnVucmVhZENvdW50Kys6by5zZXRJc1JlYWQoITApLGEuc3ViVHlwZT1vLmNvbnZlcnNhdGlvblN1YlR5cGUpfXJldHVybiBhLmxhc3RNZXNzYWdlPXJbci5sZW5ndGgtMV0se2V2ZW50RGF0YUxpc3Q6ci5sZW5ndGg+MD9bYV06W10scmVzdWx0OnJ9fV9jbGVhckdyb3VwU3lzdGVtTm90aWNlKCl7dGhpcy5fZ2V0UGVuZGVuY3lMaXN0KCkudGhlbihlPT57ZS5mb3JFYWNoKGU9Pnt0aGlzLnBlbmRlbmN5TWFwLnNldChgJHtlLmZyb219XyR7ZS5ncm91cElEfV8ke2UudG99YCxlKX0pO2NvbnN0IHM9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKF9zKS5nZXRMb2NhbE1lc3NhZ2VMaXN0KHQuQ09OVl9TWVNURU0pLG89W107cy5mb3JFYWNoKGU9Pntjb25zdHtvcGVyYXRvcklEOnQsb3BlcmF0aW9uVHlwZTpzLGdyb3VwUHJvZmlsZTppfT1lLnBheWxvYWQ7aWYocz09PUxyKXtjb25zdCBzPWAke3R9XyR7aS5ncm91cElEfV8ke2kudG99YCxuPXRoaXMucGVuZGVuY3lNYXAuZ2V0KHMpO24mJkdlKG4uaGFuZGxlZCkmJjAhPT1uLmhhbmRsZWQmJm8ucHVzaChlKX19KSx0aGlzLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpvfSl9KX1kZWxldGVHcm91cFN5c3RlbU5vdGljZShlKXtjb25zdCBzPXRoaXMuX24rXCIuZGVsZXRlR3JvdXBTeXN0ZW1Ob3RpY2VcIjtyZXR1cm4gYmUoZS5tZXNzYWdlTGlzdCkmJjAhPT1lLm1lc3NhZ2VMaXN0Lmxlbmd0aD8oX2UubChzK1wiIFwiK2UubWVzc2FnZUxpc3QubWFwKGU9PmUuSUQpKSx0aGlzLl9ncm91cE1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bmkscmVxdWVzdERhdGE6e21lc3NhZ2VMaXN0VG9EZWxldGU6ZS5tZXNzYWdlTGlzdC5tYXAoZT0+KHtmcm9tOnQuQ09OVl9TWVNURU0sbWVzc2FnZVNlcTplLmNsaWVudFNlcXVlbmNlLG1lc3NhZ2VSYW5kb206ZS5yYW5kb219KSl9fSkudGhlbigoKT0+e19lLmwocytcIiBva1wiKTtjb25zdCB0PXRoaXMuX2dyb3VwTW9kdWxlLmdldE1vZHVsZShfcyk7cmV0dXJuIGUubWVzc2FnZUxpc3QuZm9yRWFjaChlPT57dC5kZWxldGVMb2NhbE1lc3NhZ2UoZSl9KSx3bigpfSkuY2F0Y2goZT0+KF9lLmUocytcIiBlcnJvcjpcIixlKSxWbihlKSkpKTp4bigpfV9nZXRQZW5kZW5jeUxpc3QoZT17fSl7Y29uc3R7dHlwZTp0LHN0YXJ0VGltZTpzPTAsbGltaXQ6bz0yMH09ZTtyZXR1cm4gdGhpcy5fZ3JvdXBNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmlpLHJlcXVlc3REYXRhOnt0eXBlOnQsc3RhcnRUaW1lOnMsbGltaXQ6byxoYW5kbGVBY2NvdW50OnRoaXMuX2dyb3VwTW9kdWxlLmdldE15VXNlcklEKCl9fSkudGhlbihlPT57Y29uc3QgdD1lLmRhdGEucGVuZGVuY3lMaXN0O3JldHVybiAwIT09ZS5kYXRhLm5leHRTdGFydFRpbWU/dGhpcy5fZ2V0UGVuZGVuY3lMaXN0KHtzdGFydFRpbWU6ZS5kYXRhLm5leHRTdGFydFRpbWV9KS50aGVuKGU9PlsuLi50LC4uLmVdKTp0fSl9Z2V0R3JvdXBBcHBsaWNhdGlvbkxpc3QoKXtyZXR1cm4gdGhpcy5fZ2V0UGVuZGVuY3lMaXN0KCkudGhlbihlPT50aGlzLl9nZXRQZW5kZW5jeUxpc3Qoe3R5cGU6dC5HUlBfQ09NTVVOSVRZfSkudGhlbih0PT4oZS5wdXNoKC4uLnQpLHRoaXMuX2hhbmRsZVBlbmRlbmN5UmVzdWx0KGUpKSkuY2F0Y2godD0+dGhpcy5faGFuZGxlUGVuZGVuY3lSZXN1bHQoZSkpKX1faGFuZGxlUGVuZGVuY3lSZXN1bHQoZSl7Y29uc3QgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9Pnt0aGlzLnBlbmRlbmN5TWFwLnNldChgJHtlLmZyb219XyR7ZS5ncm91cElEfV8ke2UudG99YCxlKSwwPT09ZS5oYW5kbGVkJiZ0LnB1c2goe2FwcGxpY2FudDplLmZyb20sYXBwbGljYW50TmljazplLmZyb21Vc2VyTmlja05hbWUsZ3JvdXBOYW1lOmUuZ3JvdXBOYW1lLGdyb3VwSUQ6ZS5ncm91cElELGF1dGhlbnRpY2F0aW9uOmUuYXV0aGVudGljYXRpb24sbWVzc2FnZUtleTplLnRpbWUsYXBwbGljYXRpb25UeXBlOmUuYXBwbGljYXRpb25UeXBlLHVzZXJJRDplLnVzZXJJRH0pfSkseG4oe2FwcGxpY2F0aW9uTGlzdDp0fSl9X29uUmVjZWl2ZWRHcm91cFN5c3RlbU5vdGljZSh7cmVzdWx0OmUsaXNJbnN0YW50TWVzc2FnZTp0fSl7dCYmZS5mb3JFYWNoKGU9Pntzd2l0Y2goZS5wYXlsb2FkLm9wZXJhdGlvblR5cGUpe2Nhc2UgMTpicmVhaztjYXNlIDI6dGhpcy5fb25BcHBseUdyb3VwUmVxdWVzdEFncmVlZChlKTticmVhaztjYXNlIDM6YnJlYWs7Y2FzZSA0OnRoaXMuX29uTWVtYmVyS2lja2VkKGUpO2JyZWFrO2Nhc2UgNTp0aGlzLl9vbkdyb3VwRGlzbWlzc2VkKGUpO2JyZWFrO2Nhc2UgNjpicmVhaztjYXNlIDc6dGhpcy5fb25JbnZpdGVHcm91cChlKTticmVhaztjYXNlIDg6dGhpcy5fb25RdWl0R3JvdXAoZSk7YnJlYWs7Y2FzZSA5OnRoaXMuX29uU2V0TWFuYWdlcihlKTticmVhaztjYXNlIDEwOnRoaXMuX29uRGVsZXRlTWFuYWdlcihlKTticmVhaztjYXNlIDExOmNhc2UgMTI6Y2FzZSAxNTpicmVhaztjYXNlIDIwOnRoaXMuX29uTWVzc2FnZVJlbWluZFR5cGVTeW5jZWQoZSk7YnJlYWs7Y2FzZSAyMTp0aGlzLl9ncm91cE1vZHVsZS5vbkFWQ2hhdFJvb21NZW1iZXJCYW5uZWQoZSl9fSl9X29uQXBwbHlHcm91cFJlcXVlc3RBZ3JlZWQoZSl7Y29uc3QgdD1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLmdyb3VwSUQ7dGhpcy5fZ3JvdXBNb2R1bGUuaGFzTG9jYWxHcm91cCh0KXx8dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOnR9KS50aGVuKCh7ZGF0YTp7Z3JvdXA6ZX19KT0+e2lmKGUpe3RoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSk7Y29uc3QgdD0hZS5pc1N1cHBvcnRUb3BpYzt0aGlzLl9ncm91cE1vZHVsZS5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLHQpfX0pfV9vbk1lbWJlcktpY2tlZChlKXtjb25zdCB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfV9vbkdyb3VwRGlzbWlzc2VkKGUpe2NvbnN0IHQ9ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZS5ncm91cElEO3RoaXMuX2dyb3VwTW9kdWxlLmhhc0xvY2FsR3JvdXAodCkmJnRoaXMuX2dyb3VwTW9kdWxlLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24odCk7Y29uc3R7X0FWQ2hhdFJvb21IYW5kbGVyOnN9PXRoaXMuX2dyb3VwTW9kdWxlO3MmJnMuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRCh0KSYmcy5yZXNldCh0KX1fb25JbnZpdGVHcm91cChlKXtjb25zdCB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpfHx0aGlzLl9ncm91cE1vZHVsZS5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6dH0pLnRoZW4oKHtkYXRhOntncm91cDplfX0pPT57ZSYmKHRoaXMuX2dyb3VwTW9kdWxlLnVwZGF0ZUdyb3VwTWFwKFtlXSksdGhpcy5fZ3JvdXBNb2R1bGUuZW1pdEdyb3VwTGlzdFVwZGF0ZSgpKX0pfV9vblF1aXRHcm91cChlKXtjb25zdCB0PWUucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRDt0aGlzLl9ncm91cE1vZHVsZS5oYXNMb2NhbEdyb3VwKHQpJiZ0aGlzLl9ncm91cE1vZHVsZS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKHQpfV9vblNldE1hbmFnZXIoZSl7Y29uc3R7dG86cyxncm91cElEOm99PWUucGF5bG9hZC5ncm91cFByb2ZpbGUsaT10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoaHMpLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8scyk7aSYmaS51cGRhdGVSb2xlKHQuR1JQX01CUl9ST0xFX0FETUlOKX1fb25EZWxldGVNYW5hZ2VyKGUpe2NvbnN0e3RvOnMsZ3JvdXBJRDpvfT1lLnBheWxvYWQuZ3JvdXBQcm9maWxlLGk9dGhpcy5fZ3JvdXBNb2R1bGUuZ2V0TW9kdWxlKGhzKS5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhvLHMpO2kmJmkudXBkYXRlUm9sZSh0LkdSUF9NQlJfUk9MRV9NRU1CRVIpfV9vbk1lc3NhZ2VSZW1pbmRUeXBlU3luY2VkKGUpe2NvbnN0e2dyb3VwSUQ6dH09ZS5wYXlsb2FkLmdyb3VwUHJvZmlsZSxzPWUucGF5bG9hZC5tZXNzYWdlUmVtaW5kVHlwZTt0aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoX3MpLm9uR3JvdXBNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZCh7Z3JvdXBJRDp0LG1lc3NhZ2VSZW1pbmRUeXBlOnN9KX1faGFuZGxlVG9waWNTeXN0ZW1Ob3RpY2UoZSl7Y29uc3R7Z3JvdXBQcm9maWxlOntncm91cElEOnQsdG9waWNJRDpzfSxlbGVtZW50czp7b3BlcmF0aW9uVHlwZTpvLHRvcGljSURMaXN0OmksbWVzc2FnZVJlbWluZFR5cGU6bn19PWUscj10aGlzLl9ncm91cE1vZHVsZS5nZXRNb2R1bGUoZ3MpOzE3PT09bz9yLm9uVG9waWNDcmVhdGVkKHtncm91cElEOnQsdG9waWNJRDpzfSk6MTg9PT1vP3Iub25Ub3BpY0RlbGV0ZWQoe2dyb3VwSUQ6dCx0b3BpY0lETGlzdDppfSk6MjA9PT1vJiZyLm9uVG9waWNNZXNzYWdlUmVtaW5kVHlwZVVwZGF0ZWQoe2dyb3VwSUQ6dCx0b3BpY0lEOnMsbWVzc2FnZVJlbWluZFR5cGU6bn0pfXJlc2V0KCl7dGhpcy5wZW5kZW5jeU1hcC5jbGVhcigpfX1jbGFzcyBOciBleHRlbmRzIEZze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX249XCJHcm91cE1vZHVsZVwiLHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlcj1udWxsLHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyPW51bGwsdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyPW51bGwsdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyPW5ldyBwcih0aGlzKSx0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyPW5ldyBmcih0aGlzKSx0aGlzLl9ncm91cENvdW50ZXJzSGFuZGxlcj1uZXcgeXIodGhpcyksdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXI9bmV3IFNyKHRoaXMpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXI9bmV3IGRyKHRoaXMpLHRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlcj1uZXcgdnIodGhpcyksdGhpcy5ncm91cE1hcD1uZXcgTWFwLHRoaXMuX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3Q9bmV3IE1hcCx0aGlzLl9yZWNlaXB0RGV0YWlsQ29tcGxldGVNYXA9bmV3IE1hcDt0aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oV24sdGhpcy5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsdGhpcyl9X29uQ2xvdWRDb25maWdVcGRhdGVkKCl7Y29uc3QgZT10aGlzLmdldENsb3VkQ29uZmlnKFwicG9sbGluZ19pbnRlcnZhbFwiKSx0PXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJwb2xsaW5nX2ludGVydmFsX3BsdXNcIikscz10aGlzLmdldENsb3VkQ29uZmlnKFwicG9sbGluZ19ub19tc2dfY291bnRcIiksbz10aGlzLmdldENsb3VkQ29uZmlnKFwicG9sbGluZ19zaW1wbGlmaWVkX21zZ1wiKTt0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmKF9lLmwoYCR7dGhpcy5fbn0uX29uQ2xvdWRDb25maWdVcGRhdGVkIHBvbGxpbmdJbnRlcnZhbDoke2V9IHBvbGxpbmdJbnRlcnZhbFBsdXM6JHt0fSBwb2xsaW5nTm9NZXNzYWdlQ291bnQ6JHtzfSBwb2xsaW5nU2ltcGxpZmllZE1lc3NhZ2U6YCtvKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5zZXRQb2xsaW5nSW50ZXJ2YWwoZSksdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuc2V0UG9sbGluZ0ludGVydmFsUGx1cyh0KSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5zZXRQb2xsaW5nTm9NZXNzYWdlQ291bnQocyksdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuc2V0UG9sbGluZ1NpbXBsaWZpZWRNZXNzYWdlKG8pKX1vbkNoZWNrVGltZXIoZSl7dGhpcy5pc0xvZ2dlZEluKCkmJih0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIub25DaGVja1RpbWVyKGUpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIub25DaGVja1RpbWVyKGUpKX1ndWFyZEZvckFWQ2hhdFJvb20oZSl7aWYoZS5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0dST1VQKXtjb25zdCBzPW90KGUudG8pP2Z0KGUudG8pOmUudG87cmV0dXJuIHRoaXMuaGFzTG9jYWxHcm91cChzKT94bigpOnRoaXMuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOnN9KS50aGVuKG89Pntjb25zdCBpPW8uZGF0YS5ncm91cC50eXBlO2lmKF9lLmwoYCR7dGhpcy5fbn0uZ3VhcmRGb3JBVkNoYXRSb29tLiBncm91cElEOiR7c30gdHlwZToke2l9YCksaT09PXQuR1JQX0FWQ0hBVFJPT00pe2NvbnN0IHQ9bm4uTUVTU0FHRV9TRU5EX0ZBSUxfTk9UX0lOX0FWQ0hBVFJPT007cmV0dXJuIFZuKG5ldyBGbih7Y29kZTp0LG1lc3NhZ2U6dGhpcy5nZXRFcnJvck1lc3NhZ2UodCxlLmZyb20scyksZGF0YTp7bWVzc2FnZTplfX0pKX1yZXR1cm4geG4oKX0pfXJldHVybiB4bigpfWNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSl7cmV0dXJuISF0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKX1vbk5ld0dyb3VwTWVzc2FnZShlKXt0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5vbk5ld0dyb3VwTWVzc2FnZShlKX11cGRhdGVOZXh0TWVzc2FnZVNlcShlKXtpZihiZShlKSl7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShncyk7ZS5mb3JFYWNoKGU9Pntjb25zdCBvPWUuY29udmVyc2F0aW9uSUQucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIik7b3QobykmJnMudXBkYXRlTGFzdE1lc3NhZ2UobyxlLmxhc3RNZXNzYWdlKSx0aGlzLmdyb3VwTWFwLmhhcyhvKSYmKHRoaXMuZ3JvdXBNYXAuZ2V0KG8pLm5leHRNZXNzYWdlU2VxPWUubGFzdE1lc3NhZ2Uuc2VxdWVuY2UrMSl9KX19b25OZXdHcm91cFRpcHMoZSl7dGhpcy5fZ3JvdXBUaXBzSGFuZGxlciYmdGhpcy5fZ3JvdXBUaXBzSGFuZGxlci5vbk5ld0dyb3VwVGlwcyhlKX1vbkdyb3VwTWVzc2FnZVJldm9rZWQoZSl7dGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyJiZ0aGlzLl9jb21tb25Hcm91cEhhbmRsZXIub25Hcm91cE1lc3NhZ2VSZXZva2VkKGUpfW9uTmV3R3JvdXBTeXN0ZW1Ob3RpY2UoZSl7dGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyJiZ0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXIub25OZXdHcm91cFN5c3RlbU5vdGljZShlKX1vbkdyb3VwTWVzc2FnZVJlYWROb3RpY2UoZSl7ZS5kYXRhTGlzdC5mb3JFYWNoKGU9Pntjb25zdHtncm91cE1lc3NhZ2VSZWFkTm90aWNlOnN9PWUuZWxlbWVudHM7aWYoIXdlKHMpKXtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKF9zKTtzLmZvckVhY2gocz0+e2NvbnN0e2dyb3VwSUQ6byx0b3BpY0lEOmksbGFzdE1lc3NhZ2VTZXE6bn09cztfZS5kKGAke3RoaXMuX259Lm9uR3JvdXBNZXNzYWdlUmVhZE5vdGljZSBncm91cElEOiR7b30gbGFzdE1lc3NhZ2VTZXE6JHtufWApO2xldCByPWAke3QuQ09OVl9HUk9VUH0ke299YCxhPSEwO0x0KGkpfHwocj1gJHt0LkNPTlZfR1JPVVB9JHtpfWAsYT0hMSksZS51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOnIsbGFzdE1lc3NhZ2VTZXE6bn0pLGUudXBkYXRlVW5yZWFkQ291bnQocixhKSxlLmNsZWFyR3JvdXBBdEluZm9MaXN0KHIsYSl9KX19KX1vblJlYWRSZWNlaXB0TGlzdChlKXtfZS5kKHRoaXMuX24rXCIub25SZWFkUmVjZWlwdExpc3Qgb3B0aW9uczpcIixKU09OLnN0cmluZ2lmeShlKSksZS5kYXRhTGlzdC5mb3JFYWNoKGU9Pntjb25zdHtncm91cFByb2ZpbGU6dCxlbGVtZW50czpzfT1lLHtncm91cElEOm99PXQsaT10aGlzLmdldE1vZHVsZShfcykse3JlYWRSZWNlaXB0TGlzdDpufT1zO2kudXBkYXRlUmVhZFJlY2VpcHRJbmZvKHtncm91cElEOm8scmVhZFJlY2VpcHRMaXN0Om59KX0pfW9uR3JvdXBNZXNzYWdlTW9kaWZpZWQoZSl7X2UuZCh0aGlzLl9uK1wiLm9uR3JvdXBNZXNzYWdlTW9kaWZpZWQgb3B0aW9uczpcIixKU09OLnN0cmluZ2lmeShlKSk7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShfcyk7ZS5kYXRhTGlzdC5mb3JFYWNoKGU9PntzLm9uTWVzc2FnZU1vZGlmaWVkKHsuLi5lLGNvbnZlcnNhdGlvblR5cGU6dC5DT05WX0dST1VQLHRvOmUudG9waWNJRD9lLnRvcGljSUQ6ZS5ncm91cElEfSl9KX1kZWxldGVHcm91cFN5c3RlbU5vdGljZShlKXt0aGlzLl9ncm91cFN5c3RlbU5vdGljZUhhbmRsZXImJnRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5kZWxldGVHcm91cFN5c3RlbU5vdGljZShlKX1pbml0R3JvdXBNYXAoZSl7dGhpcy5ncm91cE1hcC5zZXQoZS5ncm91cElELG5ldyBucihlKSl9ZGVsZXRlR3JvdXAoZSl7dGhpcy5ncm91cE1hcC5kZWxldGUoZSl9dXBkYXRlR3JvdXBNYXAoZSl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShfcyk7bGV0IHM7ZS5mb3JFYWNoKGU9PntzPWUuZ3JvdXBJRCx0aGlzLmdyb3VwTWFwLmhhcyhzKT90aGlzLmdyb3VwTWFwLmdldChzKS51cGRhdGVHcm91cChlKToodGhpcy5ncm91cE1hcC5zZXQocyxuZXcgbnIoZSkpLHQuZGVsZXRlR3JvdXBSb21haW5nTWVzc2FnZUluZm8ocykpfSk7Y29uc3Qgbz10aGlzLmdldE15VXNlcklEKCk7Zm9yKGNvbnN0WyxpXW9mIHRoaXMuZ3JvdXBNYXApaS5zZWxmSW5mby51c2VySUQ9byxcIk93bmVyXCI9PT1pLnNlbGZJbmZvLnJvbGUmJihpLm93bmVySUQ9byk7dGhpcy5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpfWdldFN0b3JhZ2VHcm91cExpc3QoKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoTXMpLmdldEl0ZW0oXCJncm91cE1hcFwiKX1fc2V0U3RvcmFnZUdyb3VwTGlzdCgpe2NvbnN0IGU9dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpLmZpbHRlcigoe3R5cGU6ZX0pPT4hZXQoZSkpLmZpbHRlcigoe2lzU3VwcG9ydFRvcGljOmV9KT0+IWUpLnNsaWNlKDAsMjApLm1hcCgoe2dyb3VwSUQ6ZSxuYW1lOnQsYXZhdGFyOnMsdHlwZTpvfSk9Pih7Z3JvdXBJRDplLG5hbWU6dCxhdmF0YXI6cyx0eXBlOm99KSk7dGhpcy5nZXRNb2R1bGUoTXMpLnNldEl0ZW0oXCJncm91cE1hcFwiLGUpfWdldEdyb3VwTWFwKCl7cmV0dXJuIHRoaXMuZ3JvdXBNYXB9Z2V0TG9jYWxHcm91cExpc3QoKXtyZXR1cm5bLi4udGhpcy5ncm91cE1hcC52YWx1ZXMoKV19Z2V0TG9jYWxHcm91cFByb2ZpbGUoZSl7cmV0dXJuIHRoaXMuZ3JvdXBNYXAuZ2V0KGUpfXNvcnRMb2NhbEdyb3VwTGlzdCgpe2NvbnN0IGU9Wy4uLnRoaXMuZ3JvdXBNYXBdLmZpbHRlcigoW2UsdF0pPT4hTHQodC5sYXN0TWVzc2FnZSkpO2Uuc29ydCgoZSx0KT0+dFsxXS5sYXN0TWVzc2FnZS5sYXN0VGltZS1lWzFdLmxhc3RNZXNzYWdlLmxhc3RUaW1lKSx0aGlzLmdyb3VwTWFwPW5ldyBNYXAoWy4uLmVdKX11cGRhdGVHcm91cExhc3RNZXNzYWdlKGUpe3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlciYmdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyLmhhbmRsZVVwZGF0ZUdyb3VwTGFzdE1lc3NhZ2UoZSl9ZW1pdEdyb3VwTGlzdFVwZGF0ZSh0PSEwLHM9ITApe2NvbnN0IG89dGhpcy5nZXRMb2NhbEdyb3VwTGlzdCgpO2lmKHQmJnRoaXMuZW1pdE91dGVyRXZlbnQoZS5HUk9VUF9MSVNUX1VQREFURUQpLHMpe2NvbnN0IGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvKSk7dGhpcy5nZXRNb2R1bGUoX3MpLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShlKX19cGF0Y2hHcm91cE1lc3NhZ2VSZW1pbmRUeXBlKCl7Y29uc3QgZT10aGlzLmdldExvY2FsR3JvdXBMaXN0KCksdD10aGlzLmdldE1vZHVsZShfcyk7bGV0IHM9MDtlLmZvckVhY2goZT0+eyEwPT09dC5wYXRjaE1lc3NhZ2VSZW1pbmRUeXBlKHtJRDplLmdyb3VwSUQsaXNDMkNDb252ZXJzYXRpb246ITEsbWVzc2FnZVJlbWluZFR5cGU6ZS5zZWxmSW5mby5tZXNzYWdlUmVtaW5kVHlwZX0pJiYocys9MSl9KSxfZS5sKGAke3RoaXMuX259LnBhdGNoR3JvdXBNZXNzYWdlUmVtaW5kVHlwZSBjb3VudDoke3N9YCl9cmVjb21wdXRlVW5yZWFkQ291bnQoKXtjb25zdCBlPXRoaXMuZ2V0TG9jYWxHcm91cExpc3QoKSxzPXRoaXMuZ2V0TW9kdWxlKF9zKTtlLmZvckVhY2goZT0+e2NvbnN0e2dyb3VwSUQ6b309ZSx7ZXhjbHVkZWRVbnJlYWRTZXF1ZW5jZUxpc3Q6aSxyZWFkZWRTZXF1ZW5jZTpufT1lLnNlbGZJbmZvO2lmKGJlKGkpKXtsZXQgcj0wO2kuZm9yRWFjaCh0PT57dD49biYmdDw9ZS5uZXh0TWVzc2FnZVNlcS0xJiYocis9MSl9KSxyPj0xJiZzLnJlY29tcHV0ZUdyb3VwVW5yZWFkQ291bnQoe2NvbnZlcnNhdGlvbklEOmAke3QuQ09OVl9HUk9VUH0ke299YCxjb3VudDpyfSl9fSl9Z2V0TXlOYW1lQ2FyZEJ5R3JvdXBJRChlKXtjb25zdCB0PXRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSk7cmV0dXJuIHQ/dC5zZWxmSW5mby5uYW1lQ2FyZDpcIlwifWlzUGFnaW5nR2V0Q29tcGxldGVkKCl7cmV0dXJuISF0aGlzLl9jb21tb25Hcm91cEhhbmRsZXImJnRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5pc1BhZ2luZ0dldENvbXBsZXRlZCgpfWdldEdyb3VwTGlzdChlKXtyZXR1cm4gdGhpcy5fY29tbW9uR3JvdXBIYW5kbGVyP3RoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5nZXRHcm91cExpc3QoZSk6eG4oKX1nZXRHcm91cFByb2ZpbGUoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldEdyb3VwUHJvZmlsZVwiLHM9bmV3IENuKFwiZ2V0R3JvdXBQcm9maWxlXCIpLHtncm91cElEOm8sZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjppfT1lO19lLmwoYCR7dH0gZ3JvdXBJRDoke299YCk7Y29uc3Qgbj17Z3JvdXBJRExpc3Q6W29dLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJPd25lcl9BY2NvdW50XCIsXCJDcmVhdGVUaW1lXCIsXCJJbmZvU2VxXCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCIsXCJOZXh0TXNnU2VxXCIsXCJTaHV0VXBBbGxNZW1iZXJcIixcIkludml0ZUpvaW5PcHRpb25cIl0sZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjppLG1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk1zZ1NlcVwiLFwiTXNnRmxhZ1wiLFwiTmFtZUNhcmRcIl19fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKG4pLnRoZW4oKHtkYXRhOntzdWNjZXNzR3JvdXBMaXN0OmUsZmFpbHVyZUdyb3VwTGlzdDppfX0pPT57aWYoX2UubCh0K1wiIG9rXCIpLGkubGVuZ3RoPjApcmV0dXJuIFZuKGlbMF0pO2xldCBuO2lmKGV0KGVbMF0udHlwZSkmJiF0aGlzLmhhc0xvY2FsR3JvdXAobyk/bj1uZXcgbnIoZVswXSk6KHRoaXMudXBkYXRlR3JvdXBNYXAoZSksbj10aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKG8pKSwhbi5pc1N1cHBvcnRUb3BpYyl7dGhpcy5nZXRNb2R1bGUoX3MpLnVwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShbbl0pfXJldHVybiBzLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgZ3JvdXBJRDoke299IHR5cGU6JHtuLnR5cGV9IG11dGVBbGxNZW1iZXJzOiR7bi5tdXRlQWxsTWVtYmVyc30gb3duZXJJRDoke24ub3duZXJJRH1gKS5lbmQoKSx3bih7Z3JvdXA6bn0pfSkuY2F0Y2gobz0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3QsaV0pPT57cy5zZXRFcnJvcihvLHQsaSkuc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIrZS5ncm91cElEKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLG8pLFZuKG8pKSl9Z2V0R3JvdXBQcm9maWxlQWR2YW5jZShlKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZVwiLHtncm91cElETGlzdDpzfT1lO2JlKHMpJiZzLmxlbmd0aD41MCYmKHRoaXMub3V0cHV0V2FybmluZyhcIkdldEdyb3VwUHJvZmlsZUxpbWl0XCIpLHMubGVuZ3RoPTUwKTtjb25zdCBvPVtdLGk9W107cy5mb3JFYWNoKGU9PntzdCh7Z3JvdXBJRDplfSk/aS5wdXNoKGUpOm8ucHVzaChlKX0pO2NvbnN0IG49W107aWYoby5sZW5ndGg+MCl7Y29uc3QgdD10aGlzLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHsuLi5lLGdyb3VwSURMaXN0Om99KTtuLnB1c2godCl9aWYoaS5sZW5ndGg+MCl7Y29uc3QgdD10aGlzLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHsuLi5lLGdyb3VwSURMaXN0OmkscmVsYXlGbGFnOm8ubGVuZ3RoPjB9KTtuLnB1c2godCl9cmV0dXJuIFByb21pc2UuYWxsKG4pLnRoZW4oZT0+e2NvbnN0IHQ9W10scz1bXTtyZXR1cm4gZS5mb3JFYWNoKGU9Pnt0LnB1c2goLi4uZS5zdWNjZXNzR3JvdXBMaXN0KSxzLnB1c2goLi4uZS5mYWlsdXJlR3JvdXBMaXN0KX0pLHduKHtzdWNjZXNzR3JvdXBMaXN0OnQsZmFpbHVyZUdyb3VwTGlzdDpzfSl9KS5jYXRjaChlPT4oX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShlKXtjb25zdHtyZWxheUZsYWc6dD0hMSwuLi5zfT1lO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpGbyxyZXF1ZXN0RGF0YTpzfSkudGhlbihlPT57X2UubCh0aGlzLl9uK1wiLl9nZXRHcm91cFByb2ZpbGVBZHZhbmNlIG9rLlwiKTtjb25zdHtncm91cHM6dH09ZS5kYXRhO3JldHVybntzdWNjZXNzR3JvdXBMaXN0OnQuZmlsdGVyKGU9PndlKGUuZXJyb3JDb2RlKXx8MD09PWUuZXJyb3JDb2RlKSxmYWlsdXJlR3JvdXBMaXN0OnQuZmlsdGVyKGU9PmUuZXJyb3JDb2RlJiYwIT09ZS5lcnJvckNvZGUpLm1hcChlPT5uZXcgRm4oe2NvZGU6ZS5lcnJvckNvZGUsbWVzc2FnZTplLmVycm9ySW5mbyxkYXRhOntncm91cElEOmUuZ3JvdXBJRH19KSl9fSkuY2F0Y2gocz0+dCYmc3Qoe2dyb3VwSUQ6ZS5ncm91cElETGlzdFswXX0pP3tzdWNjZXNzR3JvdXBMaXN0OltdLGZhaWx1cmVHcm91cExpc3Q6W119OlZuKHMpKX1jcmVhdGVHcm91cChlKXtjb25zdCBzPXRoaXMuX24rXCIuY3JlYXRlR3JvdXBcIix7dHlwZTpvLGdyb3VwSUQ6aX09ZTtpZihlLm5hbWUmJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibmFtZVwiLGUpKXJldHVybiBWbih7Y29kZTpubi5QUk9GQU5JVFlfRk9VTkR9KTtpZihlLmludHJvZHVjdGlvbiYmITE9PT10aGlzLl9maWx0ZXJQcm9mYW5pdHkoXCJpbnRyb2R1Y3Rpb25cIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7aWYoZS5ub3RpZmljYXRpb24mJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibm90aWZpY2F0aW9uXCIsZSkpcmV0dXJuIFZuKHtjb2RlOm5uLlBST0ZBTklUWV9GT1VORH0pO2lmKCFbXCJQdWJsaWNcIixcIlByaXZhdGVcIixcIkNoYXRSb29tXCIsXCJBVkNoYXRSb29tXCIsXCJDb21tdW5pdHlcIl0uaW5jbHVkZXMobykpcmV0dXJuIFZuKHtjb2RlOm5uLklMTEVHQUxfR1JPVVBfVFlQRX0pO2lmKCFzdCh7dHlwZTpvfSkpe2lmKCFMdChpKSYmc3Qoe2dyb3VwSUQ6aX0pKXJldHVybiBWbih7Y29kZTpubi5JTExFR0FMX0dST1VQX0lEfSk7ZS5pc1N1cHBvcnRUb3BpYz12b2lkIDB9aWYoZXQobykmJiF3ZShlLm1lbWJlckxpc3QpJiZlLm1lbWJlckxpc3QubGVuZ3RoPjAmJihlLm1lbWJlckxpc3Q9dm9pZCAwKSx0aGlzLl9jYW5JVXNlSm9pbk9wdGlvbihvKXx8d2UoZS5qb2luT3B0aW9uKXx8KGUuam9pbk9wdGlvbj12b2lkIDApLHN0KHt0eXBlOm99KSl7aWYoIUx0KGkpJiYhc3Qoe2dyb3VwSUQ6aX0pKXJldHVybiBWbih7Y29kZTpubi5JTExFR0FMX0dST1VQX0lEfSk7ZS5pc1N1cHBvcnRUb3BpYz0hMD09PWUuaXNTdXBwb3J0VG9waWM/MTowfWNvbnN0IG49bmV3IENuKFwiY3JlYXRlR3JvdXBcIik7X2UubChzK1wiIG9wdGlvbnM6XCIsZSk7bGV0IHI9bnVsbCxhPVtdO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokbyxyZXF1ZXN0RGF0YTp7Li4uZSxvd25lcklEOnRoaXMuZ2V0TXlVc2VySUQoKSx3ZWJQdXNoRmxhZzoxfX0pLnRoZW4obz0+e2NvbnN0e2dyb3VwSUQ6aSxvdmVyTGltaXRVc2VySURMaXN0OnU9W119PW8uZGF0YTtpZihyPWksYT11LG4uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBncm91cFR5cGU6JHtlLnR5cGV9IGdyb3VwSUQ6JHtpfSBvdmVyTGltaXRVc2VySURMaXN0PSR7dX1gKS5lbmQoKSxfZS5sKGAke3N9IG9rIGdyb3VwSUQ6JHtpfSBvdmVyTGltaXRVc2VySURMaXN0OmAsdSksZS50eXBlPT09dC5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6aX0pO2lmKGUudHlwZT09PXQuR1JQX0NPTU1VTklUWSYmMT09PWUuaXNTdXBwb3J0VG9waWMpcmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOml9KTtMdChlLm1lbWJlckxpc3QpfHxMdCh1KXx8KGUubWVtYmVyTGlzdD1lLm1lbWJlckxpc3QuZmlsdGVyKGU9Pi0xPT09dS5pbmRleE9mKGUudXNlcklEKSkpLHRoaXMudXBkYXRlR3JvdXBNYXAoW3suLi5lLGdyb3VwSUQ6aX1dKTtjb25zdCBjPXRoaXMuZ2V0TW9kdWxlKGFzKSxsPWMuY3JlYXRlQ3VzdG9tTWVzc2FnZSh7dG86aSxjb252ZXJzYXRpb25UeXBlOnQuQ09OVl9HUk9VUCxwYXlsb2FkOntkYXRhOlwiZ3JvdXBfY3JlYXRlXCIsZXh0ZW5zaW9uOnRoaXMuaXNJbnRsKCk/dGhpcy5nZXRNeVVzZXJJRCgpK1wiIGNyZWF0ZWQgYSBncm91cFwiOnRoaXMuZ2V0TXlVc2VySUQoKStcIuWIm+W7uue+pOe7hFwifX0pO3JldHVybiBjLnNlbmRNZXNzYWdlSW5zdGFuY2UobCksdGhpcy5lbWl0R3JvdXBMaXN0VXBkYXRlKCksdGhpcy5nZXRHcm91cFByb2ZpbGUoe2dyb3VwSUQ6aX0pfSkudGhlbihlPT57Y29uc3R7Z3JvdXA6c309ZS5kYXRhLHtuYW1lQ2FyZDpvLGpvaW5UaW1lOml9PXMuc2VsZkluZm87cmV0dXJuIHMudXBkYXRlU2VsZkluZm8oe25hbWVDYXJkOm8sam9pblRpbWU6aSxtZXNzYWdlUmVtaW5kVHlwZTp0Lk1TR19SRU1JTkRfQUNQVF9BTkRfTk9URSxyb2xlOnQuR1JQX01CUl9ST0xFX09XTkVSfSksd24oe2dyb3VwOnMsb3ZlckxpbWl0VXNlcklETGlzdDphfSl9KS5jYXRjaCh0PT57aWYobi5zZXRNZXNzYWdlKFwiZ3JvdXBUeXBlOlwiK2UudHlwZSksdGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbZSxzXSk9PntuLnNldEVycm9yKHQsZSxzKS5lbmQoKX0pLDEwMDEwPT09dC5jb2RlfHwxMDAwNz09PXQuY29kZSl7dGhpcy51cGRhdGVHcm91cE1hcChbey4uLmUsZ3JvdXBJRDpyfV0pO2NvbnN0IHQ9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShyKTtyZXR1cm4gX2UubChzK1wiIHN1Y2Nlc3MsIGJ1dCBmYWlsZWQgdG8gZ2V0IGdyb3VwIHByb2ZpbGUuXCIpLHduKHtncm91cDp0LG92ZXJMaW1pdFVzZXJJRExpc3Q6YX0pfXJldHVybiBfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIix0KSxWbih0KX0pfWRpc21pc3NHcm91cChlKXtjb25zdCBzPXRoaXMuX24rXCIuZGlzbWlzc0dyb3VwXCI7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUpJiZ0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUpLnR5cGU9PT10LkdSUF9XT1JLKXJldHVybiBWbihuZXcgRm4oe2NvZGU6bm4uQ0FOTk9UX0RJU01JU1NfV09SS30pKTtjb25zdCBvPW5ldyBDbihcImRpc21pc3NHcm91cFwiKTtyZXR1cm4gby5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIitlKSxfZS5sKGAke3N9IGdyb3VwSUQ6JHtlfWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnFvLHJlcXVlc3REYXRhOntncm91cElEOmV9fSkudGhlbigoKT0+KG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHMrXCIgb2tcIiksdGhpcy5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uKGUpLHRoaXMuY2hlY2tKb2luZWRBVkNoYXRSb29tQnlJRChlKSYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSksdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5kZWxldGVMb2NhbEdyb3VwQXR0cmlidXRlcyhlKSx3bih7Z3JvdXBJRDplfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9dXBkYXRlR3JvdXBQcm9maWxlKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi51cGRhdGVHcm91cFByb2ZpbGVcIjtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZS5ncm91cElEKSl7Y29uc3Qgcz10aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGUuZ3JvdXBJRCkudHlwZTt0aGlzLl9jYW5JVXNlSm9pbk9wdGlvbihzKXx8d2UoZS5qb2luT3B0aW9uKXx8KF9lLncodCtcIiBqb2luT3B0aW9uIGlzIHVuYXZhaWxhYmxlIGZvciBXb3JrL01lZXRpbmcvQVZDaGF0Um9vbVwiKSxlLmpvaW5PcHRpb249dm9pZCAwKX1pZih3ZShlLm11dGVBbGxNZW1iZXJzKXx8KGUubXV0ZUFsbE1lbWJlcnM/ZS5tdXRlQWxsTWVtYmVycz1cIk9uXCI6ZS5tdXRlQWxsTWVtYmVycz1cIk9mZlwiKSxlLm5hbWUmJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibmFtZVwiLGUpKXJldHVybiBWbih7Y29kZTpubi5QUk9GQU5JVFlfRk9VTkR9KTtpZihlLmludHJvZHVjdGlvbiYmITE9PT10aGlzLl9maWx0ZXJQcm9mYW5pdHkoXCJpbnRyb2R1Y3Rpb25cIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7aWYoZS5ub3RpZmljYXRpb24mJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibm90aWZpY2F0aW9uXCIsZSkpcmV0dXJuIFZuKHtjb2RlOm5uLlBST0ZBTklUWV9GT1VORH0pO2NvbnN0IHM9bmV3IENuKFwidXBkYXRlR3JvdXBQcm9maWxlXCIpO3JldHVybiBzLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoZSkpLF9lLmwoYCR7dH0gZ3JvdXBJRDoke2UuZ3JvdXBJRH1gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp4byxyZXF1ZXN0RGF0YTplfSkudGhlbigoKT0+e2lmKHMuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHQrXCIgb2tcIiksdGhpcy5oYXNMb2NhbEdyb3VwKGUuZ3JvdXBJRCkpe3RoaXMuZ3JvdXBNYXAuZ2V0KGUuZ3JvdXBJRCkudXBkYXRlR3JvdXAoZSksdGhpcy5fc2V0U3RvcmFnZUdyb3VwTGlzdCgpfXJldHVybiB3bih7Z3JvdXA6dGhpcy5ncm91cE1hcC5nZXQoZS5ncm91cElEKX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsb10pPT57cy5zZXRFcnJvcihlLHQsbykuZW5kKCl9KSxfZS5sKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfV9maWx0ZXJQcm9mYW5pdHkoZSx0KXtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKFVzKTtpZighcylyZXR1cm4hMDtjb25zdHtpc0FsbG93ZWRUb1NlbmQ6byxtb2RpZmllZFRleHQ6aX09cy5maWx0ZXJUZXh0KHRbZV0sRSk7cmV0dXJuITA9PT1vJiYodFtlXT1pLCEwKX1qb2luR3JvdXAoZSl7Y29uc3R7Z3JvdXBJRDpzLHR5cGU6b309ZSxpPXRoaXMuX24rXCIuam9pbkdyb3VwXCI7aWYobz09PXQuR1JQX1dPUkspcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9KT0lOX1dPUkt9KTtpZih0aGlzLmRlbGV0ZVVuam9pbmVkQVZDaGF0Um9vbShzKSx0aGlzLmhhc0xvY2FsR3JvdXAocykpe2lmKCF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4geG4oe3N0YXR1czp0LkpPSU5fU1RBVFVTX0FMUkVBRFlfSU5fR1JPVVB9KTtjb25zdCBvPW5ldyBDbihcImFwcGx5Sm9pbkdyb3VwXCIpO3JldHVybiB0aGlzLmdldEdyb3VwUHJvZmlsZSh7Z3JvdXBJRDpzfSkudGhlbigoKT0+KG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBncm91cElEOiR7c30gam9pbmVkU3RhdHVzOiR7dC5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfWApLmVuZCgpLHhuKHtzdGF0dXM6dC5KT0lOX1NUQVRVU19BTFJFQURZX0lOX0dST1VQfSkpKS5jYXRjaCh0PT4oby5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtzfSB1bmpvaW5lZGApLmVuZCgpLF9lLncoYCR7aX0gJHtzfSB3YXMgdW5qb2luZWQsIG5vdyBqb2luIWApLHRoaXMuZ3JvdXBNYXAuZGVsZXRlKHMpLHRoaXMuYXBwbHlKb2luR3JvdXAoZSkpKX1yZXR1cm4gX2UubChgJHtpfSBncm91cElEOiR7c31gKSx0aGlzLmlzTG9nZ2VkSW4oKT90aGlzLmFwcGx5Sm9pbkdyb3VwKGUpOnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmpvaW5XaXRob3V0QXV0aChlKX1hcHBseUpvaW5Hcm91cChlKXtjb25zdCB0PXRoaXMuX24rXCIuYXBwbHlKb2luR3JvdXBcIix7Z3JvdXBJRDpzLGFwcGx5TWVzc2FnZTpvfT1lO2lmKCFMdChvKSYmITE9PT10aGlzLl9maWx0ZXJQcm9mYW5pdHkoXCJhcHBseU1lc3NhZ2VcIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7Y29uc3QgaT1uZXcgQ24oXCJhcHBseUpvaW5Hcm91cFwiKSxuPXsuLi5lfSxyPXRoaXMuY2FuSVVzZShNLkFWQ0hBVFJPT01fSElTVE9SWV9NU0cpO3ImJihuLmhpc3RvcnlNZXNzYWdlRmxhZz0xKTtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoX3MpLmRlbGV0ZVRvcGljUm9hbWluZ01lc3NhZ2VJbmZvKHMpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlZvLHJlcXVlc3REYXRhOm59KS50aGVuKCh7ZGF0YTp7am9pbmVkU3RhdHVzOmUsbG9uZ1BvbGxpbmdLZXk6byxzdGFydFNlcTpuLGF2Q2hhdFJvb21GbGFnOmEsYXZDaGF0Um9vbUtleTp1LG1lc3NhZ2VMaXN0OmN9fSk9Pntjb25zdCBsPWBncm91cElEOiR7c30gam9pbmVkU3RhdHVzOiR7ZX0gbG9uZ1BvbGxpbmdLZXk6JHtvfSBzdGFydFNlcToke259IGF2Q2hhdFJvb21GbGFnOiR7YX0gY2FuR2V0QVZDaGF0Um9vbUhpc3RvcnlNZXNzYWdlOiR7cn0sIGhpc3RvcnkgbWVzc2FnZSBjb3VudDpgKyhMdChjKT8wOmMubGVuZ3RoKTtzd2l0Y2goaS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIitsKS5lbmQoKSxfZS5sKGAke3R9IG9rLiAke2x9YCksZSl7Y2FzZSBBZTpyZXR1cm4gd24oe3N0YXR1czpBZX0pO2Nhc2UgTGU6cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlKHtncm91cElEOnN9KS50aGVuKCh7ZGF0YTp7Z3JvdXA6ZX19KT0+dGhpcy5faGFuZGxlSm9pblJlc3VsdCh7Z3JvdXA6ZSxhdkNoYXRSb29tRmxhZzphLGxvbmdQb2xsaW5nS2V5Om8sc3RhcnRTZXE6bixhdkNoYXRSb29tS2V5OnUsbWVzc2FnZUxpc3Q6Y30pKS5jYXRjaCgoKT0+e2NvbnN0IGU9bmV3IG5yKHtncm91cElEOnN9KTtyZXR1cm4gdGhpcy5faGFuZGxlSm9pblJlc3VsdCh7Z3JvdXA6ZSxhdkNoYXRSb29tRmxhZzphLGxvbmdQb2xsaW5nS2V5Om8sc3RhcnRTZXE6bixhdkNoYXRSb29tS2V5OnUsbWVzc2FnZUxpc3Q6Y30pfSk7ZGVmYXVsdDp7Y29uc3QgZT1uZXcgRm4oe2NvZGU6bm4uSk9JTl9HUk9VUF9GQUlMfSk7cmV0dXJuIF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpfX19KS5jYXRjaChlPT4oaS5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIitzKSx0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1faGFuZGxlSm9pblJlc3VsdChlKXtjb25zdHtncm91cDpzLGF2Q2hhdFJvb21GbGFnOm8sbG9uZ1BvbGxpbmdLZXk6aSxzdGFydFNlcTpuLGF2Q2hhdFJvb21LZXk6cixtZXNzYWdlTGlzdDphfT1lLHtncm91cElEOnV9PXM7aWYoMT09PW8pe2xldCBlO3JldHVybiB0aGlzLmdldE1vZHVsZShfcykuc2V0Q29tcGxldGVkKGAke3QuQ09OVl9HUk9VUH0ke3V9YCksdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5pbml0R3JvdXBBdHRyaWJ1dGVzQ2FjaGUoe2dyb3VwSUQ6dSxhdkNoYXRSb29tS2V5OnJ9KSx0aGlzLl9ncm91cENvdW50ZXJzSGFuZGxlci5pbml0R3JvdXBDb3VudGVyc0NhY2hlKHtncm91cElEOnUsYXZDaGF0Um9vbUtleTpyfSksZT13ZShpKT90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5oYW5kbGVKb2luUmVzdWx0KHtncm91cDpzfSk6dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuc3RhcnRSdW5Mb29wKHtncm91cDpzLGxvbmdQb2xsaW5nS2V5Omksc3RhcnRTZXE6bn0pLGUudGhlbigoKT0+e3RoaXMuX29uQVZDaGF0Um9vbUhpc3RvcnlNZXNzYWdlKGEpfSksZX1yZXR1cm4gdGhpcy5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKSx3bih7c3RhdHVzOkxlLGdyb3VwOnN9KX1xdWl0R3JvdXAoZSl7Y29uc3QgdD10aGlzLl9uK1wiLnF1aXRHcm91cFwiO19lLmwoYCR7dH0gZ3JvdXBJRDoke2V9YCk7Y29uc3Qgcz10aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk7aWYoIXMmJiF0aGlzLmhhc0xvY2FsR3JvdXAoZSkpcmV0dXJuIFZuKHtjb2RlOm5uLk1FTUJFUl9OT1RfSU5fR1JPVVB9KTtpZihzJiYhdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuIF9lLmwoYCR7dH0gYW5vbnltb3VzbHkgb2suIGdyb3VwSUQ6JHtlfWApLHRoaXMuZGVsZXRlTG9jYWxHcm91cEFuZENvbnZlcnNhdGlvbihlKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXNldChlKSx4bih7Z3JvdXBJRDplfSk7Y29uc3Qgbz1uZXcgQ24oXCJxdWl0R3JvdXBcIik7cmV0dXJuIG8uc2V0TWVzc2FnZShcImdyb3VwSUQ6XCIrZSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SG8scmVxdWVzdERhdGE6e2dyb3VwSUQ6ZX19KS50aGVuKCgpPT4oby5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwodCtcIiBva1wiKSx0aGlzLmRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSkscyYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoZSksdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5kZWxldGVMb2NhbEdyb3VwQXR0cmlidXRlcyhlKSx3bih7Z3JvdXBJRDplfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9c2VhcmNoR3JvdXBCeUlEKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5zZWFyY2hHcm91cEJ5SURcIixzPXtncm91cElETGlzdDpbZV19LG89bmV3IENuKFwic2VhcmNoR3JvdXBCeUlEXCIpO3JldHVybiBvLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK2UpLF9lLmwoYCR7dH0gZ3JvdXBJRDoke2V9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6S28scmVxdWVzdERhdGE6c30pLnRoZW4oKHtkYXRhOntncm91cFByb2ZpbGU6ZX19KT0+e2lmKDAhPT1lWzBdLmVycm9yQ29kZSl0aHJvdyBuZXcgRm4oe2NvZGU6ZVswXS5lcnJvckNvZGUsbWVzc2FnZTplWzBdLmVycm9ySW5mb30pO3JldHVybiBvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubCh0K1wiIG9rXCIpLHduKHtncm91cDpuZXcgbnIoZVswXSl9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e28uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1jaGFuZ2VHcm91cE93bmVyKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5jaGFuZ2VHcm91cE93bmVyXCI7aWYodGhpcy5oYXNMb2NhbEdyb3VwKGUuZ3JvdXBJRCkmJnRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS5ncm91cElEKS50eXBlPT09dC5HUlBfQVZDSEFUUk9PTSlyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX0NIQU5HRV9PV05FUl9JTl9BVkNIQVRST09NfSk7aWYoZS5uZXdPd25lcklEPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfQ0hBTkdFX09XTkVSX1RPX1NFTEZ9KTtjb25zdCBvPW5ldyBDbihcImNoYW5nZUdyb3VwT3duZXJcIik7cmV0dXJuIG8uc2V0TWVzc2FnZShgZ3JvdXBJRDoke2UuZ3JvdXBJRH0gbmV3T3duZXJJRDoke2UubmV3T3duZXJJRH1gKSxfZS5sKGAke3N9IGdyb3VwSUQ6JHtlLmdyb3VwSUR9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6V28scmVxdWVzdERhdGE6ZX0pLnRoZW4oKCk9PntvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubChzK1wiIG9rXCIpO2NvbnN0e2dyb3VwSUQ6dCxuZXdPd25lcklEOml9PWU7dGhpcy5ncm91cE1hcC5nZXQodCkub3duZXJJRD1pO2NvbnN0IG49dGhpcy5nZXRNb2R1bGUoaHMpLmdldExvY2FsR3JvdXBNZW1iZXJMaXN0KHQpO2lmKG4gaW5zdGFuY2VvZiBNYXApe2NvbnN0IGU9bi5nZXQodGhpcy5nZXRNeVVzZXJJRCgpKTt3ZShlKXx8KGUudXBkYXRlUm9sZShcIk1lbWJlclwiKSx0aGlzLmdyb3VwTWFwLmdldCh0KS5zZWxmSW5mby5yb2xlPVwiTWVtYmVyXCIpO2NvbnN0IHM9bi5nZXQoaSk7d2Uocyl8fHMudXBkYXRlUm9sZShcIk93bmVyXCIpfXJldHVybiB0aGlzLmVtaXRHcm91cExpc3RVcGRhdGUoITAsITEpLHduKHtncm91cDp0aGlzLmdyb3VwTWFwLmdldCh0KX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWdldEdyb3VwQXBwbGljYXRpb25MaXN0KCl7cmV0dXJuIHRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5nZXRHcm91cEFwcGxpY2F0aW9uTGlzdCgpfWhhbmRsZUdyb3VwQXBwbGljYXRpb24oZSl7Y29uc3QgdD10aGlzLl9uK1wiLmhhbmRsZUdyb3VwQXBwbGljYXRpb25cIix7aGFuZGxlQWN0aW9uOnMsaGFuZGxlTWVzc2FnZTpvLG1lc3NhZ2U6aSxhcHBsaWNhdGlvbjpufT1lO2xldCByLGEsdSxjLGw7aT8ocj1pLnBheWxvYWQub3BlcmF0b3JJRCxhPWkucGF5bG9hZC5ncm91cFByb2ZpbGUuZ3JvdXBJRCx1PWkucGF5bG9hZC5hdXRoZW50aWNhdGlvbixjPWkucGF5bG9hZC5tZXNzYWdlS2V5KTpuJiYocj1uLmFwcGxpY2FudCxhPW4uZ3JvdXBJRCx1PW4uYXV0aGVudGljYXRpb24sYz1uLm1lc3NhZ2VLZXkpO2xldCBkPVlvO24mJjI9PT1uLmFwcGxpY2F0aW9uVHlwZSYmKGQ9am8sbD1uLnVzZXJJRCk7Y29uc3QgcD1uZXcgQ24oXCJoYW5kbGVHcm91cEFwcGxpY2F0aW9uXCIpO3JldHVybiBwLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK2EpLF9lLmwoYCR7dH0gZ3JvdXBJRDoke2F9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZCxyZXF1ZXN0RGF0YTp7aGFuZGxlQWN0aW9uOnMsaGFuZGxlTWVzc2FnZTpvLGFwcGxpY2FudDpyLGludml0ZWU6bCxncm91cElEOmEsYXV0aGVudGljYXRpb246dSxtZXNzYWdlS2V5OmN9fSkudGhlbigoKT0+KHAuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHQrXCIgb2tcIiksaSYmdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpbZS5tZXNzYWdlXX0pLHduKHtncm91cDp0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKGEpfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntwLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yXCIsZSksVm4oZSkpKX1oYW5kbGVHcm91cEludml0YXRpb24oZSl7Y29uc3QgdD10aGlzLl9uK1wiLmhhbmRsZUdyb3VwSW52aXRhdGlvblwiLHtncm91cFByb2ZpbGU6e2dyb3VwSUQ6c30sYXV0aGVudGljYXRpb246byxtZXNzYWdlS2V5Omksb3BlcmF0b3JJRDpufT1lLm1lc3NhZ2UucGF5bG9hZCx7aGFuZGxlQWN0aW9uOnJ9PWUsYT1uZXcgQ24oXCJoYW5kbGVHcm91cEludml0YXRpb25cIik7cmV0dXJuIGEuc2V0TWVzc2FnZShgZ3JvdXBJRDoke3N9IGludml0ZXI6JHtufSBoYW5kbGVBY3Rpb246JHtyfWApLF9lLmwoYCR7dH0gZ3JvdXBJRDoke3N9IGludml0ZXI6JHtufSBoYW5kbGVBY3Rpb246JHtyfWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnpvLHJlcXVlc3REYXRhOnsuLi5lLGludml0ZXI6bixncm91cElEOnMsYXV0aGVudGljYXRpb246byxtZXNzYWdlS2V5Oml9fSkudGhlbigoKT0+KGEuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHQrXCIgb2tcIiksdGhpcy5fZ3JvdXBTeXN0ZW1Ob3RpY2VIYW5kbGVyLmRlbGV0ZUdyb3VwU3lzdGVtTm90aWNlKHttZXNzYWdlTGlzdDpbZS5tZXNzYWdlXX0pLHduKHtncm91cDp0aGlzLmdldExvY2FsR3JvdXBQcm9maWxlKHMpfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PnthLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yXCIsZSksVm4oZSkpKX1nZXRHcm91cE9ubGluZU1lbWJlckNvdW50KGUpe2lmKCF0aGlzLl9BVkNoYXRSb29tSGFuZGxlcilyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSk7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk/dGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIuZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKTp4bih7bWVtYmVyQ291bnQ6MH0pfWhhc0xvY2FsR3JvdXAoZSl7cmV0dXJuIHRoaXMuZ3JvdXBNYXAuaGFzKGUpfWRlbGV0ZUxvY2FsR3JvdXBBbmRDb252ZXJzYXRpb24oZSl7Y29uc3Qgcz10aGlzLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSk7aWYoX2UubChgJHt0aGlzLl9ufS5kZWxldGVMb2NhbEdyb3VwQW5kQ29udmVyc2F0aW9uIGlzSm9pbmVkQVZDaGF0Um9vbToke3N9YCkscyl7dGhpcy5nZXRNb2R1bGUoX3MpLmRlbGV0ZUxvY2FsQ29udmVyc2F0aW9uKGAke3QuQ09OVl9HUk9VUH0ke2V9YCl9aWYoc3Qoe2dyb3VwSUQ6ZX0pKXtjb25zdCB0PXRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSk7aWYodCYmITA9PT10LmlzU3VwcG9ydFRvcGljKXt0aGlzLmdldE1vZHVsZShncykuZGVsZXRlVG9waWNMaXN0SW5Db21tdW5pdHkoZSl9fXRoaXMuX2RlbGV0ZUxvY2FsR3JvdXAoZSksdGhpcy5lbWl0R3JvdXBMaXN0VXBkYXRlKCEwLCExKX1fZGVsZXRlTG9jYWxHcm91cChlKXt0aGlzLmdyb3VwTWFwLmRlbGV0ZShlKTt0aGlzLmdldE1vZHVsZShocykuZGVsZXRlR3JvdXBNZW1iZXJMaXN0KGUpLHRoaXMuX3NldFN0b3JhZ2VHcm91cExpc3QoKX1zZW5kTWVzc2FnZShlLHQpe2lmKGJlKGUuX3JlY2VpdmVyTGlzdCkmJmUuX3JlY2VpdmVyTGlzdC5sZW5ndGg+MCl7aWYoIXRoaXMuY2FuSVVzZShNLk1TR19UT19TUEVDSUZJRURfR1JQX01CUikpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9VU0VfQ09NTUVSQ0lBTF9BQklMSVRZfSl9Y29uc3Qgcz10aGlzLmNyZWF0ZUdyb3VwTWVzc2FnZVBhY2soZSx0KTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHMpfWNyZWF0ZUdyb3VwTWVzc2FnZVBhY2soZSxzKXtsZXQgbz1udWxsO3MmJnMub2ZmbGluZVB1c2hJbmZvJiYobz1zLm9mZmxpbmVQdXNoSW5mbyk7bGV0IGk9XCJcIjtVZShlLmNsb3VkQ3VzdG9tRGF0YSkmJmUuY2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYoaT1lLmNsb3VkQ3VzdG9tRGF0YSk7Y29uc3Qgbj1bXTtpZihQZShzKSYmUGUocy5tZXNzYWdlQ29udHJvbEluZm8pKXtjb25zdHtleGNsdWRlZEZyb21VbnJlYWRDb3VudDplLGV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlOnQsZXhjbHVkZWRGcm9tQ29udGVudE1vZGVyYXRpb246b309cy5tZXNzYWdlQ29udHJvbEluZm87ITA9PT1lJiZuLnB1c2goXCJOb1VucmVhZFwiKSwhMD09PXQmJm4ucHVzaChcIk5vTGFzdE1zZ1wiKSwhMD09PW8mJm4ucHVzaChcIk5vTXNnQ2hlY2tcIil9bGV0IHI9dm9pZCAwO2JlKGUuX3JlY2VpdmVyTGlzdCkmJmUuX3JlY2VpdmVyTGlzdC5sZW5ndGg+MCYmKHI9ZS5fcmVjZWl2ZXJMaXN0LGUuX3JlY2VpdmVyTGlzdC5sZW5ndGg+NTAmJihyPWUuX3JlY2VpdmVyTGlzdC5zbGljZSgwLDUwKSx0aGlzLm91dHB1dFdhcm5pbmcoXCJSZWNlaXZlckxpc3RMaW1pdFwiKSkpO2NvbnN0IGE9dGhpcy5pc09ubGluZU1lc3NhZ2UoZSxzKT8xOjAsdT1lLmdldEdyb3VwQXRJbmZvTGlzdCgpLGM9e2Zyb21BY2NvdW50OnRoaXMuZ2V0TXlVc2VySUQoKSxncm91cElEOmUudG8sbXNnQm9keTplLmdldEVsZW1lbnRzKCksY2xvdWRDdXN0b21EYXRhOmkscmFuZG9tOmUucmFuZG9tLHByaW9yaXR5OmUucHJpb3JpdHksY2xpZW50U2VxdWVuY2U6ZS5jbGllbnRTZXF1ZW5jZSxncm91cEF0SW5mbzplLnR5cGUhPT10Lk1TR19URVhUfHxMdCh1KT92b2lkIDA6dSxvbmxpbmVPbmx5RmxhZzphLGNsaWVudFRpbWU6ZS5jbGllbnRUaW1lLG9mZmxpbmVQdXNoSW5mbzpvP3twdXNoRmxhZzohMD09PW8uZGlzYWJsZVB1c2g/MTowLHRpdGxlOm8udGl0bGV8fFwiXCIsZGVzYzpvLmRlc2NyaXB0aW9ufHxcIlwiLGV4dDpvLmV4dGVuc2lvbnx8XCJcIixhcG5zSW5mbzp7YmFkZ2VNb2RlOiEwPT09by5pZ25vcmVJT1NCYWRnZT8xOjAsaXNWb2lwUHVzaDp0aGlzLl9pc1ZvaXBQdXNoKG8pfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpvLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwLG1lc3NhZ2VDb250cm9sSW5mbzowPT09YT9uOnZvaWQgMCxuZWVkUmVhZFJlY2VpcHQ6ITAhPT1lLm5lZWRSZWFkUmVjZWlwdHx8dGhpcy5pc01lc3NhZ2VGcm9tT3JUb0FWQ2hhdHJvb20oZS50byk/MDoxLHJlY2VpdmVyTGlzdDpyLGlzU3VwcG9ydEV4dGVuc2lvbjohMD09PWUuaXNTdXBwb3J0RXh0ZW5zaW9uPzE6MH07cmV0dXJuIG90KGUudG8pJiYoYy5ncm91cElEPWZ0KGUudG8pLGMudG9waWNJRD1lLnRvKSx7cHJvdG9jb2xOYW1lOldzLHRqZ0lEOnRoaXMuZ2VuZXJhdGVUamdJRChlKSxyZXF1ZXN0RGF0YTpjfX1faXNWb2lwUHVzaChlKXtsZXQgdD12b2lkIDA7cmV0dXJuIHdlKGUuZGlzYWJsZVZvaXBQdXNoKXx8KHQ9ITE9PT1lLmRpc2FibGVWb2lwUHVzaD8xOjApLHR9cmV2b2tlTWVzc2FnZShlKXtjb25zdCB0PXtncm91cElEOmUudG8sbXNnU2VxTGlzdDpbe21zZ1NlcTplLnNlcXVlbmNlfV19O3JldHVybiBvdChlLnRvKSYmKHQuZ3JvdXBJRD1mdChlLnRvKSx0LnRvcGljSUQ9ZS50byksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Sm8scmVxdWVzdERhdGE6dH0pfWRlbGV0ZU1lc3NhZ2UoZSl7Y29uc3R7dG86dCxrZXlMaXN0OnN9PWU7X2UubChgJHt0aGlzLl9ufS5kZWxldGVNZXNzYWdlIGdyb3VwSUQ6JHt0fSBjb3VudDoke3MubGVuZ3RofWApO2NvbnN0IG89e2dyb3VwSUQ6dCxkZWxldGVyOnRoaXMuZ2V0TXlVc2VySUQoKSxrZXlMaXN0OnN9O3JldHVybiBvdCh0KSYmKG8uZ3JvdXBJRD1mdCh0KSxvLnRvcGljSUQ9dCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Y2kscmVxdWVzdERhdGE6b30pfW1vZGlmeVJlbW90ZU1lc3NhZ2UoZSl7Y29uc3R7dG86dCxzZXF1ZW5jZTpzLHBheWxvYWQ6byx0eXBlOmksdmVyc2lvbjpuPTAsY2xvdWRDdXN0b21EYXRhOnJ9PWU7bGV0IGE9dCx1PXZvaWQgMDtvdCh0KSYmKGE9ZnQodCksdT10KTtsZXQgYz12b2lkIDA7cmV0dXJuIEN0KGkpJiYoYz1bXSxjLnB1c2goe3R5cGU6aSxjb250ZW50Om99KSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6bGkscmVxdWVzdERhdGE6e2dyb3VwSUQ6YSx0b3BpY0lEOnUsc2VxdWVuY2U6cyx2ZXJzaW9uOm4sZWxlbWVudHM6YyxjbG91ZEN1c3RvbURhdGE6cn19KX1nZXRSb2FtaW5nTWVzc2FnZShlKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0Um9hbWluZ01lc3NhZ2VcIjtsZXR7Y29udmVyc2F0aW9uSUQ6cyxncm91cElEOm8sc2VxdWVuY2U6aX09ZTtjb25zdCBuPW5ldyBDbihcImdldEdyb3VwUm9hbWluZ01lc3NhZ2VzXCIpO2xldCByPTAsYT12b2lkIDA7cmV0dXJuIG90KG8pJiYoYT1vLG89ZnQoYSkpLHRoaXMuX2NvbXB1dGVMYXN0U2VxdWVuY2Uoe2dyb3VwSUQ6byx0b3BpY0lEOmEsc2VxdWVuY2U6aX0pLnRoZW4oZT0+KHI9ZSxfZS5sKGAke3R9IGdyb3VwSUQ6JHtvfSBzdGFydFNlcXVlbmNlOiR7cn1gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpRbyxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpvLGNvdW50OjIxLHNlcXVlbmNlOnIsdG9waWNJRDphfX0pKSkudGhlbihlPT57Y29uc3R7bWVzc2FnZUxpc3Q6aSxjb21wbGV0ZTp1LGludmlzaWJsZVNlcXVlbmNlTGlzdDpjPVtdfT1lLmRhdGE7d2UoaSk/X2UubChgJHt0fSBvay4gY29tcGxldGU6JHt1fSBidXQgbWVzc2FnZUxpc3QgaXMgdW5kZWZpbmVkIWApOl9lLmwoYCR7dH0gb2suIGNvbXBsZXRlOiR7dX0gY291bnQ6JHtpLmxlbmd0aH1gKTtsZXQgbD10aGlzLl9nZXRNaW5TZXF1ZW5jZShjLGkpLTE7bi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtvfSB0b3BpY0lEOiR7YX0gc3RhcnRTZXF1ZW5jZToke3J9IGNvbXBsZXRlOiR7dX0gbmV4dFNlcXVlbmNlOiR7bH1gKS5lbmQoKTtjb25zdCBkPXRoaXMuZ2V0TW9kdWxlKF9zKTtsZXQgcD1bXTtyZXR1cm4gTHQoaSl8fChkLnVwZGF0ZVJvYW1pbmdNZXNzYWdlU2VxdWVuY2UocyxsKSxwPWQub25Sb2FtaW5nTWVzc2FnZShpLHMpLGQudXBkYXRlSXNSZWFkKHMpLGQucGF0Y2hDb252ZXJzYXRpb25MYXN0TWVzc2FnZShzKSksKDI9PT11fHxsPD0xKSYmKGQuc2V0Q29tcGxldGVkKHMpLGw9XCJcIiksX2UubChgJHt0fSBuZXh0UmVxSUQ6JHtsfSwgc3RvcmVkIG1lc3NhZ2UgY291bnQ6JHtwLmxlbmd0aH0sIGludmlzaWJsZSBzZXF1ZW5jZSBjb3VudDoke2MubGVuZ3RofWApLHtuZXh0UmVxSUQ6bCtcIlwiLHN0b3JlZE1lc3NhZ2VMaXN0OnB9fSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bi5zZXRFcnJvcihlLHQscykuc2V0TWVzc2FnZShgZ3JvdXBJRDoke299IHRvcGljSUQ6JHthfSBzdGFydFNlcXVlbmNlOiR7cn1gKS5lbmQoKX0pLF9lLncodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9X2dldEdyb3VwSURPZk1lc3NhZ2UoZSl7cmV0dXJuIGUuY29udmVyc2F0aW9uSUQucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIil9X2dldE1pblNlcXVlbmNlKGUsdCl7bGV0IHM9MDtMdCh0KXx8KHM9dFt0Lmxlbmd0aC0xXS5zZXF1ZW5jZSk7bGV0IG89MDtpZighTHQoZSkpe289ZVtlLmxlbmd0aC0xXX1yZXR1cm4gX2UubChgJHt0aGlzLl9ufS5fZ2V0TWluU2VxdWVuY2UgbWluVmlzaWJsZVNlcXVlbmNlOiR7c30gbWluSW52aXNpYmxlU2VxdWVuY2U6JHtvfWApLG8+MCYmbzxzP286c31nZXRSZWFkUmVjZWlwdExpc3QoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldFJlYWRSZWNlaXB0TGlzdFwiLHM9dGhpcy5fZ2V0R3JvdXBJRE9mTWVzc2FnZShlWzBdKSxvPXRoaXMuZ2V0TXlVc2VySUQoKSxpPWUuZmlsdGVyKGU9PmUuZnJvbT09PW8mJiEwPT09ZS5uZWVkUmVhZFJlY2VpcHQpLm1hcChlPT4oe3NlcXVlbmNlOmUuc2VxdWVuY2V9KSk7aWYoX2UubChgJHt0fSBncm91cElEOiR7c30gc2VxdWVuY2VMaXN0OiR7SlNPTi5zdHJpbmdpZnkoaSl9YCksMD09PWkubGVuZ3RoKXJldHVybiB4bih7bWVzc2FnZUxpc3Q6ZX0pO2NvbnN0IG49bmV3IENuKFwiZ2V0UmVhZFJlY2VpcHRMaXN0XCIpO3JldHVybiBuLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK3MpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmVpLHJlcXVlc3REYXRhOntncm91cElEOnMsc2VxdWVuY2VMaXN0Oml9fSkudGhlbihzPT57bi5lbmQoKSxfZS5sKHQrXCIgb2tcIik7Y29uc3R7cmVhZFJlY2VpcHRMaXN0Om99PXMuZGF0YTtyZXR1cm4gYmUobykmJm8uZm9yRWFjaCh0PT57ZS5mb3JFYWNoKGU9PnswPT09dC5jb2RlJiZ0LnNlcXVlbmNlPT09ZS5zZXF1ZW5jZSYmKGUucmVhZFJlY2VpcHRJbmZvLnJlYWRDb3VudD10LnJlYWRDb3VudCxlLnJlYWRSZWNlaXB0SW5mby51bnJlYWRDb3VudD10LnVucmVhZENvdW50KX0pfSksd24oe21lc3NhZ2VMaXN0OmV9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1zZW5kUmVhZFJlY2VpcHQoZSl7Y29uc3QgdD10aGlzLl9uK1wiLnNlbmRSZWFkUmVjZWlwdFwiLHM9dGhpcy5fZ2V0R3JvdXBJRE9mTWVzc2FnZShlWzBdKSxvPW5ldyBDbihcInNlbmRSZWFkUmVjZWlwdFwiKTtvLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK3MpO2NvbnN0IGk9dGhpcy5nZXRNeVVzZXJJRCgpLG49ZS5maWx0ZXIoZT0+ZS5mcm9tIT09aSYmITA9PT1lLm5lZWRSZWFkUmVjZWlwdCkubWFwKGU9Pih7c2VxdWVuY2U6ZS5zZXF1ZW5jZX0pKTtyZXR1cm4gMD09PW4ubGVuZ3RoP1ZuKHtjb2RlOm5uLlJFQURfUkVDRUlQVF9NRVNTQUdFX0xJU1RfRU1QVFl9KTooX2UubChgJHt0fS4gc2VxdWVuY2VMaXN0OiR7SlNPTi5zdHJpbmdpZnkobil9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6dGkscmVxdWVzdERhdGE6e2dyb3VwSUQ6cyxzZXF1ZW5jZUxpc3Q6bn19KS50aGVuKGU9PihvLmVuZCgpLF9lLmwodCtcIiBva1wiKSx3bigpKSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpKX1nZXRSZWFkUmVjZWlwdERldGFpbChlKXtjb25zdHttZXNzYWdlOnQsZmlsdGVyOnMsY3Vyc29yOm8sY291bnQ6aX09ZSxuPXRoaXMuX2dldEdyb3VwSURPZk1lc3NhZ2UodCkscj10LklELGE9dC5zZXF1ZW5jZSx1PXRoaXMuX24rXCIuZ2V0UmVhZFJlY2VpcHREZXRhaWxcIixjPXRoaXMuX3JlY2VpcHREZXRhaWxDb21wbGV0ZU1hcC5nZXQocil8fCExLGw9MCE9PXMmJjEhPT1zPzA6cyxkPVVlKG8pP286XCJcIixwPSFHZShpKXx8aTw9MHx8aT49MTAwPzEwMDppLGg9YGdyb3VwSUQ6JHtufSBzZXF1ZW5jZToke2F9IGN1cnNvcjoke2R9IGZpbHRlcjoke2x9IGNvbXBsZXRlRmxhZzoke2N9YDtfZS5sKGAke3V9ICR7aH1gKTtjb25zdCBnPXtjdXJzb3I6XCJcIixpc0NvbXBsZXRlZDohMSxtZXNzYWdlSUQ6cix1bnJlYWRVc2VySURMaXN0OltdLHJlYWRVc2VySURMaXN0OltdfSxfPW5ldyBDbihcImdldFJlYWRSZWNlaXB0RGV0YWlsXCIpO3JldHVybiBfLnNldE1lc3NhZ2UoaCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6b2kscmVxdWVzdERhdGE6e2dyb3VwSUQ6bixzZXF1ZW5jZTphLGZsYWc6bCxjdXJzb3I6ZCxjb3VudDpwfX0pLnRoZW4oZT0+e18uZW5kKCk7Y29uc3R7Y3Vyc29yOnQsaXNDb21wbGV0ZWQ6cyx1bnJlYWRVc2VySURMaXN0Om8scmVhZFVzZXJJRExpc3Q6aX09ZS5kYXRhO3JldHVybiBnLmN1cnNvcj10LDE9PT1zJiYoZy5pc0NvbXBsZXRlZD0hMCx0aGlzLl9yZWNlaXB0RGV0YWlsQ29tcGxldGVNYXAuc2V0KHIsITApKSwwPT09bD9nLnJlYWRVc2VySURMaXN0PWkubWFwKGU9PmUudXNlcklEKToxPT09bCYmKGcudW5yZWFkVXNlcklETGlzdD1vLm1hcChlPT5lLnVzZXJJRCkpLF9lLmwodStcIiBva1wiKSx3bihnKX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e18uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2Uudyh1K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1nZXRSb2FtaW5nTWVzc2FnZXNIb3BwaW5nKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5nZXRSb2FtaW5nTWVzc2FnZXNIb3BwaW5nXCIsbz1uZXcgQ24oXCJnZXRHcm91cFJvYW1pbmdNZXNzYWdlc0hvcHBpbmdcIik7bGV0e2dyb3VwSUQ6aSxjb3VudDpuLHNlcXVlbmNlOnIsZGlyZWN0aW9uOmF9PWUsdT1yOzE9PT1hJiYodT1yK24tMSk7bGV0IGM9dm9pZCAwO290KGkpJiYoYz1pLGk9ZnQoYykpO2NvbnN0IGw9YCR7Yz9cInRvcGljSUQ6XCIrYzpcImdyb3VwSUQ6XCIraX0gc2VxdWVuY2U6JHtyfSBkaXJlY3Rpb246JHthfWA7cmV0dXJuIF9lLmwoYCR7c30gJHtsfWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlFvLHJlcXVlc3REYXRhOntncm91cElEOmksdG9waWNJRDpjLGNvdW50Om4sc2VxdWVuY2U6dX19KS50aGVuKGk9Pntjb25zdHttZXNzYWdlTGlzdDpuLGNvbXBsZXRlOnV9PWkuZGF0YSxjPWBjb21wbGV0ZToke3V9IGNvdW50OiR7bj9uLmxlbmd0aDowfWA7aWYoX2UubChgJHtzfSBvay4gJHtjfWApLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGAke2x9ICR7Y31gKS5lbmQoKSwyPT09dXx8THQobikpe2NvbnN0IGU9dGhpcy5fY29tcHV0ZVJlc3VsdCgpO3JldHVybiB3bihlKX1jb25zdCBkPWAke3QuQ09OVl9HUk9VUH0ke2UuZ3JvdXBJRH1gLHA9dGhpcy5nZXRNb2R1bGUoX3MpLm9uUm9hbWluZ01lc3NhZ2UobixkLCExKSxoPXRoaXMuX2NvbXB1dGVSZXN1bHQoe2RpcmVjdGlvbjphLHNlcXVlbmNlOnIscmVtb3RlTWVzc2FnZUxpc3Q6bixwcm9jZXNzZWRNZXNzYWdlTGlzdDpwfSk7cmV0dXJuIHduKGgpfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuc2V0TWVzc2FnZShgZ3JvdXBJRDoke2l9IHNlcXVlbmNlOiR7cn0gY291bnQ6JHtufWApLmVuZCgpfSksX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fY29tcHV0ZVJlc3VsdChlKXtjb25zdCB0PXttZXNzYWdlTGlzdDpbXSxpc0NvbXBsZXRlZDohMSxuZXh0TWVzc2FnZVNlcTpcIlwifTtpZih3ZShlKSlyZXR1cm4gdC5pc0NvbXBsZXRlZD0hMCx0O2NvbnN0e2RpcmVjdGlvbjpzLHNlcXVlbmNlOm8scmVtb3RlTWVzc2FnZUxpc3Q6aT1bXSxwcm9jZXNzZWRNZXNzYWdlTGlzdDpuPVtdfT1lLHI9aS5sZW5ndGg7cmV0dXJuIDE9PT1zPyh0Lm5leHRNZXNzYWdlU2VxPWlbMF0uc2VxdWVuY2UrMSxuLmZvckVhY2goZT0+e2Uuc2VxdWVuY2U+PW8mJnQubWVzc2FnZUxpc3QucHVzaChlKX0pLDA9PT10Lm1lc3NhZ2VMaXN0Lmxlbmd0aCYmaVswXS5zZXF1ZW5jZTxvJiYodC5pc0NvbXBsZXRlZD0hMCx0Lm5leHRNZXNzYWdlU2VxPVwiXCIpLHQpOih0Lm5leHRNZXNzYWdlU2VxPWlbci0xXS5zZXF1ZW5jZS0xLHQubWVzc2FnZUxpc3Q9Wy4uLm5dLDA9PT10Lm5leHRNZXNzYWdlU2VxJiYodC5pc0NvbXBsZXRlZD0hMCx0Lm5leHRNZXNzYWdlU2VxPVwiXCIpLHQpfXNldE1lc3NhZ2VSZWFkKHtjb252ZXJzYXRpb25JRDplLGxhc3RNZXNzYWdlU2VxOnN9KXtjb25zdCBvPXRoaXMuX24rXCIuc2V0TWVzc2FnZVJlYWRcIjtfZS5sKGAke299IGNvbnZlcnNhdGlvbklEOiR7ZX0gbGFzdE1lc3NhZ2VTZXE6JHtzfWApLEdlKHMpfHx0aGlzLm91dHB1dFdhcm5pbmcoXCJEb05vdE1vZGlmeUxhc3RTZXFcIik7Y29uc3QgaT1uZXcgQ24oXCJzZXRHcm91cE1lc3NhZ2VSZWFkXCIpO2kuc2V0TWVzc2FnZShgJHtlfS0ke3N9YCk7bGV0IG49ZS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKSxyPXZvaWQgMDtyZXR1cm4gb3QobikmJihyPW4sbj1mdChyKSksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WG8scmVxdWVzdERhdGE6e2dyb3VwSUQ6bix0b3BpY0lEOnIsbWVzc2FnZVJlYWRTZXE6c319KS50aGVuKCgpPT57aS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwobytcIiBvay5cIik7Y29uc3QgdD10aGlzLmdldE1vZHVsZShfcyk7dC51cGRhdGVJc1JlYWRBZnRlclJlYWRSZXBvcnQoe2NvbnZlcnNhdGlvbklEOmUsbGFzdE1lc3NhZ2VTZXE6c30pO2xldCBhPSEwO2lmKCF3ZShyKSl7YT0hMTtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKGdzKS5nZXRMb2NhbFRvcGljKG4scik7ZSYmZS51cGRhdGVTZWxmSW5mbyh7cmVhZGVkU2VxdWVuY2U6c30pfXJldHVybiB0LnVwZGF0ZVVucmVhZENvdW50KGUsYSksd24oKX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UubChvK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fY29tcHV0ZUxhc3RTZXF1ZW5jZShlKXtjb25zdHtncm91cElEOnQsdG9waWNJRDpzLHNlcXVlbmNlOm99PWU7cmV0dXJuIG8+MD9Qcm9taXNlLnJlc29sdmUobyk6d2Uocyl8fHRoaXMuaGFzTG9jYWxHcm91cCh0KT93ZShzKT90aGlzLmdldEdyb3VwTGFzdFNlcXVlbmNlKHQpOnRoaXMuZ2V0VG9waWNMYXN0U2VxdWVuY2Uoe2dyb3VwSUQ6dCx0b3BpY0lEOnN9KTpQcm9taXNlLnJlc29sdmUoMCl9Z2V0R3JvdXBMYXN0U2VxdWVuY2UoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldEdyb3VwTGFzdFNlcXVlbmNlXCIscz1uZXcgQ24oXCJnZXRHcm91cExhc3RTZXF1ZW5jZVwiKTtsZXQgbz0wLGk9XCJcIjtpZih0aGlzLmhhc0xvY2FsR3JvdXAoZSkpe2NvbnN0IG49dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKSxyPW4ubGFzdE1lc3NhZ2U7aWYoci5sYXN0U2VxdWVuY2U+MCYmITE9PT1yLm9ubGluZU9ubHlGbGFnKXJldHVybiBvPXIubGFzdFNlcXVlbmNlLGk9YGdvdCBsYXN0U2VxdWVuY2U6JHtvfSBmcm9tIGxvY2FsIGdyb3VwIHByb2ZpbGVbbGFzdE1lc3NhZ2UubGFzdFNlcXVlbmNlXS4gZ3JvdXBJRDoke2V9YCxfZS5sKGAke3R9ICR7aX1gKSxzLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcIlwiK2kpLmVuZCgpLFByb21pc2UucmVzb2x2ZShvKTtpZihuLm5leHRNZXNzYWdlU2VxPjEpcmV0dXJuIG89bi5uZXh0TWVzc2FnZVNlcS0xLGk9YGdvdCBsYXN0U2VxdWVuY2U6JHtvfSBmcm9tIGxvY2FsIGdyb3VwIHByb2ZpbGVbbmV4dE1lc3NhZ2VTZXFdLiBncm91cElEOiR7ZX1gLF9lLmwoYCR7dH0gJHtpfWApLHMuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIraSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKG8pfWNvbnN0IG49XCJHUk9VUFwiK2Uscj10aGlzLmdldE1vZHVsZShfcykuZ2V0TG9jYWxDb252ZXJzYXRpb24obik7aWYociYmci5sYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2UmJiExPT09ci5sYXN0TWVzc2FnZS5vbmxpbmVPbmx5RmxhZylyZXR1cm4gbz1yLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZSxpPWBnb3QgbGFzdFNlcXVlbmNlOiR7b30gZnJvbSBsb2NhbCBjb252ZXJzYXRpb24gcHJvZmlsZVtsYXN0TWVzc2FnZS5sYXN0U2VxdWVuY2VdLiBncm91cElEOiR7ZX1gLF9lLmwoYCR7dH0gJHtpfWApLHMuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIraSkuZW5kKCksUHJvbWlzZS5yZXNvbHZlKG8pO2NvbnN0IGE9e2dyb3VwSURMaXN0OltlXSxyZXNwb25zZUZpbHRlcjp7Z3JvdXBCYXNlSW5mb0ZpbHRlcjpbXCJOZXh0TXNnU2VxXCJdfX07cmV0dXJuIHRoaXMuZ2V0R3JvdXBQcm9maWxlQWR2YW5jZShhKS50aGVuKCh7ZGF0YTp7c3VjY2Vzc0dyb3VwTGlzdDpufX0pPT4oTHQobik/X2UubChgJHt0fSBzdWNjZXNzR3JvdXBMaXN0IGlzIGVtcHR5LiBncm91cElEOiR7ZX1gKToobz1uWzBdLm5leHRNZXNzYWdlU2VxLTEsaT1gZ290IGxhc3RTZXF1ZW5jZToke299IGZyb20gZ2V0R3JvdXBQcm9maWxlQWR2YW5jZS4gZ3JvdXBJRDoke2V9YCxfZS5sKGAke3R9ICR7aX1gKSkscy5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIitpKS5lbmQoKSxvKSkuY2F0Y2gobz0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3QsaV0pPT57cy5zZXRFcnJvcihvLHQsaSkuc2V0TWVzc2FnZShcImdldCBsYXN0U2VxdWVuY2UgZmFpbGVkIGZyb20gZ2V0R3JvdXBQcm9maWxlQWR2YW5jZS4gZ3JvdXBJRDpcIitlKS5lbmQoKX0pLF9lLncodCtcIiBmYWlsZWQuIGVycm9yOlwiLG8pLFZuKG8pKSl9Z2V0VG9waWNMYXN0U2VxdWVuY2Uoe2dyb3VwSUQ6ZSx0b3BpY0lEOnR9KXtjb25zdCBzPXRoaXMuX24rXCIuZ2V0VG9waWNMYXN0U2VxdWVuY2VcIixvPW5ldyBDbihcImdldFRvcGljTGFzdFNlcXVlbmNlXCIpO2xldCBpPTAsbj1cIlwiO2NvbnN0IHI9dGhpcy5nZXRNb2R1bGUoZ3MpO3JldHVybiByLmhhc0xvY2FsVG9waWMoZSx0KT8oaT1yLmdldExvY2FsVG9waWMoZSx0KS5uZXh0TWVzc2FnZVNlcS0xLG49YGdldCBsYXN0U2VxdWVuY2U6JHtpfSBmcm9tIGxvY2FsIHRvcGljIGluZm9bbmV4dE1lc3NhZ2VTZXFdLiB0b3BpY0lEOiR7dH1gLF9lLmwoYCR7c30gJHtufWApLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIrbikuZW5kKCksUHJvbWlzZS5yZXNvbHZlKGkpKTpyLmdldFRvcGljTGlzdCh7Z3JvdXBJRDplLHRvcGljSURMaXN0Olt0XX0pLnRoZW4oKHtkYXRhOntzdWNjZXNzVG9waWNMaXN0OmV9fSk9PihMdChlKT9fZS5sKGAke3N9IHN1Y2Nlc3NUb3BpY0xpc3QgaXMgZW1wdHkuIHRvcGljSUQ6JHt0fWApOihpPWVbMF0ubmV4dE1lc3NhZ2VTZXEtMSxuPWBnZXQgbGFzdFNlcXVlbmNlOiR7aX0gZnJvbSBnZXRUb3BpY0xpc3QuIHRvcGljSUQ6JHt0fWAsX2UubChgJHtzfSAke259YCkpLG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiXCIrbikuZW5kKCksaSkpLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtzLGldKT0+e28uc2V0RXJyb3IoZSxzLGkpLnNldE1lc3NhZ2UoXCJnZXQgbGFzdFNlcXVlbmNlIGZhaWxlZCBmcm9tIGdldFRvcGljTGlzdC4gdG9waWNJRDpcIit0KS5lbmQoKX0pLF9lLncocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9aXNNZXNzYWdlRnJvbU9yVG9BVkNoYXRyb29tKGUpe3JldHVybiEhdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXImJnRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmNoZWNrSm9pbmVkQVZDaGF0Um9vbUJ5SUQoZSl9aGFzSm9pbmVkQVZDaGF0Um9vbSgpe3JldHVybiB0aGlzLl9BVkNoYXRSb29tSGFuZGxlcj90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5oYXNKb2luZWRBVkNoYXRSb29tKCk6MH1nZXRKb2luZWRBVkNoYXRSb29tKCl7cmV0dXJuIHRoaXMuX0FWQ2hhdFJvb21IYW5kbGVyP3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyLmdldEpvaW5lZEFWQ2hhdFJvb20oKTpbXX1pc09ubGluZU1lc3NhZ2UoZSx0KXtyZXR1cm4hKCF0aGlzLl9jYW5JVXNlT25saW5lT25seUZsYWcoZSl8fCF0fHwhMCE9PXQub25saW5lVXNlck9ubHkpfV9jYW5JVXNlT25saW5lT25seUZsYWcoZSl7Y29uc3Qgcz10aGlzLmdldEpvaW5lZEFWQ2hhdFJvb20oKTtyZXR1cm4hc3x8IXMuaW5jbHVkZXMoZS50byl8fGUuY29udmVyc2F0aW9uVHlwZSE9PXQuQ09OVl9HUk9VUH1fb25BVkNoYXRSb29tSGlzdG9yeU1lc3NhZ2UoZSl7aWYoTHQoZSkpcmV0dXJuO19lLmwoYCR7dGhpcy5fbn0uX29uQVZDaGF0Um9vbUhpc3RvcnlNZXNzYWdlIGNvdW50OiR7ZS5sZW5ndGh9YCk7Y29uc3QgdD1bXTtlLmZvckVhY2goZT0+e3QucHVzaCh7Li4uZSxpc0hpc3RvcnlNZXNzYWdlOjF9KX0pLHRoaXMub25BVkNoYXRSb29tTWVzc2FnZSh0KX1vbkFWQ2hhdFJvb21NZXNzYWdlKGUpe3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5vbk1lc3NhZ2UoZSl9b25BVkNoYXRSb29tTWVtYmVyQmFubmVkKGUpe3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5vbkFWQ2hhdFJvb21NZW1iZXJCYW5uZWQoZSl9Z2V0R3JvdXBTaW1wbGlmaWVkSW5mbyhlKXtjb25zdCB0PW5ldyBDbihcImdldEdyb3VwU2ltcGxpZmllZEluZm9cIikscz17Z3JvdXBJRExpc3Q6W2VdLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIl19fTtyZXR1cm4gdGhpcy5nZXRHcm91cFByb2ZpbGVBZHZhbmNlKHMpLnRoZW4oKHtkYXRhOntzdWNjZXNzR3JvdXBMaXN0OnN9fSk9Pih0LnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgZ3JvdXBJRDoke2V9IHR5cGU6JHtzWzBdLnR5cGV9YCkuZW5kKCksc1swXSkpLmNhdGNoKHM9Pnt0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtvLGldKT0+e3Quc2V0RXJyb3IocyxvLGkpLnNldE1lc3NhZ2UoXCJncm91cElEOlwiK2UpLmVuZCgpfSl9KX1zZXRVbmpvaW5lZEFWQ2hhdFJvb20oZSl7dGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5zZXQoZSwxKX1kZWxldGVVbmpvaW5lZEFWQ2hhdFJvb20oZSl7dGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5oYXMoZSkmJnRoaXMuX3Vuam9pbmVkQVZDaGF0Um9vbUxpc3QuZGVsZXRlKGUpfWlzVW5qb2luZWRBVkNoYXRSb29tKGUpe3JldHVybiB0aGlzLl91bmpvaW5lZEFWQ2hhdFJvb21MaXN0LmhhcyhlKX1pc0dyb3VwQXR0cmlidXRlc1VwZGF0ZWROb3RpY2UoZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuaXNHcm91cEF0dHJpYnV0ZXNVcGRhdGVkTm90aWNlKGUpfXVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpe3RoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIudXBkYXRlTG9jYWxNYWluU2VxdWVuY2VPblJlY29ubmVjdGVkKCl9aW5pdEdyb3VwQXR0cmlidXRlcyhlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5pbml0R3JvdXBBdHRyaWJ1dGVzKGUpfXNldEdyb3VwQXR0cmlidXRlcyhlKXtyZXR1cm4gdGhpcy5fZ3JvdXBBdHRyaWJ1dGVzSGFuZGxlci5zZXRHcm91cEF0dHJpYnV0ZXMoZSl9ZGVsZXRlR3JvdXBBdHRyaWJ1dGVzKGUpe3JldHVybiB0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLmRlbGV0ZUdyb3VwQXR0cmlidXRlcyhlKX1nZXRHcm91cEF0dHJpYnV0ZXMoZSl7cmV0dXJuIHRoaXMuX2dyb3VwQXR0cmlidXRlc0hhbmRsZXIuZ2V0R3JvdXBBdHRyaWJ1dGVzKGUpfWlzTWVzc2FnZUZyb21Ub3BpYyhlLHQpe3JldHVybiAyPT09ZSYmIUx0KHQpfWlzTWVzc2FnZUZyb21Db21tdW5pdHlPZlRvcGljKGUsdCl7cmV0dXJuIDI9PT1lJiZMdCh0KX1nZXRNZXNzYWdlRXh0ZW5zaW9ucyhlLHQpe3JldHVybiBfZS5sKGAke3RoaXMuX259LmdldE1lc3NhZ2VFeHRlbnNpb25zIHN0YXJ0U2VxdWVuY2U6JHt0fWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk1pLHJlcXVlc3REYXRhOntncm91cElEOmUudG8sbWVzc2FnZVNlcXVlbmNlOmUuc2VxdWVuY2Usc3RhcnRTZXF1ZW5jZTp0fX0pfW1vZGlmeU1lc3NhZ2VFeHRlbnNpb25zKGUsdCxzPTEpe3JldHVybiBfZS5sKGAke3RoaXMuX259Lm1vZGlmeU1lc3NhZ2VFeHRlbnNpb25zIG9wZXJhdGVUeXBlOiR7c31gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTptaSxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLnRvLG1lc3NhZ2VTZXF1ZW5jZTplLnNlcXVlbmNlLGV4dGVuc2lvbkxpc3Q6dCxvcGVyYXRlVHlwZTpzfX0pfWdldEdyb3VwTm90aWZ5KGUpe2lmKCF0aGlzLmhhc0xvY2FsR3JvdXAoZSkpcmV0dXJuO2NvbnN0IHM9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKSx7dHlwZTpvLGlzU3VwcG9ydFRvcGljOml9PXM7aWYoZXQobyl8fGkpcmV0dXJuO2NvbnN0IG49dGhpcy5fbitcIi5nZXRHcm91cE5vdGlmeVwiLHI9dGhpcy5fZ2V0R3JvdXBMYXN0UmV2b2tlZFRpbWUoZSksYT0xZTMqY2UoKTtfZS5sKGAke259IGdyb3VwSUQ6JHtlfSB0eXBlOiR7b30gYmVnaW5UaW1lOiR7cn0gZW5kVGltZToke2F9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZmkscmVxdWVzdERhdGE6e3R5cGU6c3Qoe3R5cGU6byxncm91cElEOmV9KT90LkdSUF9DT01NVU5JVFk6dm9pZCAwLGdyb3VwSUQ6ZSxiZWdpblRpbWU6cixlbmRUaW1lOmF9fSkudGhlbih0PT57Y29uc3R7bmV4dFJldm9rZWRUaW1lOnMsbm90aWZ5TGlzdDpvfT10LmRhdGE7X2UubChgJHtufSBvay4gZ3JvdXBJRDoke2V9IG5leHRSZXZva2VkVGltZToke3N9YCk7Y29uc3QgaT17ZGF0YUxpc3Q6W3tlbGVtZW50czp7cmV2b2tlZEluZm9zOltdfX1dfTtiZShvKSYmby5mb3JFYWNoKHQ9PntpLmRhdGFMaXN0WzBdLmVsZW1lbnRzLnJldm9rZWRJbmZvcy5wdXNoKHtncm91cElEOmUsc2VxdWVuY2U6dC5zZXF1ZW5jZSxyYW5kb206dC5yYW5kb20scmV2b2tlckluZm86ey4uLnQucmV2b2tlckluZm99fSl9KSx0aGlzLm9uR3JvdXBNZXNzYWdlUmV2b2tlZChpKSwwIT09cz8odGhpcy5fc2V0R3JvdXBMYXN0UmV2b2tlZFRpbWUoZSxzKSx0aGlzLmdldEdyb3VwTm90aWZ5KGUpKTp0aGlzLl9zZXRHcm91cExhc3RSZXZva2VkVGltZShlLDFlMypjZSgpKX0pLmNhdGNoKGU9PntfZS5lKG4rXCIgZmFpbGVkLiBlcnJvcjpcIixlKX0pfV9nZXRHcm91cExhc3RSZXZva2VkVGltZShlKXtyZXR1cm4gdGhpcy5oYXNMb2NhbEdyb3VwKGUpP3RoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSkuX2xhc3RSZXZva2VkVGltZTowfV9zZXRHcm91cExhc3RSZXZva2VkVGltZShlLHQpe3RoaXMuaGFzTG9jYWxHcm91cChlKSYmKHRoaXMuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSkuX2xhc3RSZXZva2VkVGltZT10KX1pc0dyb3VwQ291bnRlcnNOb3RpY2UoZSl7cmV0dXJuIHRoaXMuX2dyb3VwQ291bnRlcnNIYW5kbGVyLmlzR3JvdXBDb3VudGVyc05vdGljZShlKX1zZXRHcm91cENvdW50ZXJzKGUpe3JldHVybiB0aGlzLl9ncm91cENvdW50ZXJzSGFuZGxlci5zZXRHcm91cENvdW50ZXJzKGUpfWluY3JlYXNlR3JvdXBDb3VudGVyKGUpe3JldHVybiB0aGlzLl9ncm91cENvdW50ZXJzSGFuZGxlci5pbmNyZWFzZUdyb3VwQ291bnRlcihlKX1kZWNyZWFzZUdyb3VwQ291bnRlcihlKXtyZXR1cm4gdGhpcy5fZ3JvdXBDb3VudGVyc0hhbmRsZXIuZGVjcmVhc2VHcm91cENvdW50ZXIoZSl9Z2V0R3JvdXBDb3VudGVycyhlKXtyZXR1cm4gdGhpcy5fZ3JvdXBDb3VudGVyc0hhbmRsZXIuZ2V0R3JvdXBDb3VudGVycyhlKX1yZXN0YXJ0UG9sbGluZygpe3RoaXMuX0FWQ2hhdFJvb21IYW5kbGVyJiZ0aGlzLl9BVkNoYXRSb29tSGFuZGxlci5yZXN0YXJ0UG9sbGluZygpfWdldFBvbGxpbmdUaW1lcklEKGUpe2lmKCFlKXJldHVybi0xO2NvbnN0IHQ9dGhpcy5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKTtyZXR1cm4gdCYmZXQodC50eXBlKT90aGlzLl9BVkNoYXRSb29tSGFuZGxlci5nZXRQb2xsaW5nVGltZXJJRChlKTotMX1fY2FuSVVzZUpvaW5PcHRpb24oZSl7cmV0dXJuKGU9PmU9PT10LkdSUF9QVUJMSUMpKGUpfHxzdCh7dHlwZTplfSl9cmVzZXQoKXt0aGlzLmdyb3VwTWFwLmNsZWFyKCksdGhpcy5fdW5qb2luZWRBVkNoYXRSb29tTGlzdC5jbGVhcigpLHRoaXMuX3JlY2VpcHREZXRhaWxDb21wbGV0ZU1hcC5jbGVhcigpLHRoaXMuX2NvbW1vbkdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwU3lzdGVtTm90aWNlSGFuZGxlci5yZXNldCgpLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIucmVzZXQoKSx0aGlzLl9ncm91cEF0dHJpYnV0ZXNIYW5kbGVyLnJlc2V0KCksdGhpcy5fZ3JvdXBDb3VudGVyc0hhbmRsZXIucmVzZXQoKSx0aGlzLl9BVkNoYXRSb29tSGFuZGxlciYmdGhpcy5fQVZDaGF0Um9vbUhhbmRsZXIucmVzZXQoKX19Y2xhc3MgUnJ7Y29uc3RydWN0b3IoZSl7dGhpcy51c2VySUQ9XCJcIix0aGlzLmF2YXRhcj1cIlwiLHRoaXMubmljaz1cIlwiLHRoaXMucm9sZT1cIlwiLHRoaXMuam9pblRpbWU9XCJcIix0aGlzLmxhc3RTZW5kTXNnVGltZT1cIlwiLHRoaXMubmFtZUNhcmQ9XCJcIix0aGlzLm11dGVVbnRpbD0wLHRoaXMubWVtYmVyQ3VzdG9tRmllbGQ9W10sdGhpcy5faW5pdE1lbWJlcihlKX1faW5pdE1lbWJlcihlKXt0aGlzLnVwZGF0ZU1lbWJlcihlKX11cGRhdGVNZW1iZXIoZSl7Y29uc3QgdD1bbnVsbCx2b2lkIDAsXCJcIiwwLE5hTl07ZS5tZW1iZXJDdXN0b21GaWVsZCYmUWUodGhpcy5tZW1iZXJDdXN0b21GaWVsZCxlLm1lbWJlckN1c3RvbUZpZWxkKSxCZSh0aGlzLGUsW1wibWVtYmVyQ3VzdG9tRmllbGRcIixcIm1hcmtzXCJdLHQpfXVwZGF0ZVJvbGUoZSl7W1wiT3duZXJcIixcIkFkbWluXCIsXCJNZW1iZXJcIl0uaW5kZXhPZihlKTwwfHwodGhpcy5yb2xlPWUpfXVwZGF0ZU11dGVVbnRpbChlKXt3ZShlKXx8KHRoaXMubXV0ZVVudGlsPU1hdGguZmxvb3IoKERhdGUubm93KCkrMWUzKmUpLzFlMykpfXVwZGF0ZU5hbWVDYXJkKGUpe3dlKGUpfHwodGhpcy5uYW1lQ2FyZD1lKX11cGRhdGVNZW1iZXJDdXN0b21GaWVsZChlKXtlJiZRZSh0aGlzLm1lbWJlckN1c3RvbUZpZWxkLGUpfX1jbGFzcyBPciBleHRlbmRzIEZze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX249XCJHcm91cE1lbWJlck1vZHVsZVwiLHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwPW5ldyBNYXAsdGhpcy5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKFluLHRoaXMuX29uUHJvZmlsZVVwZGF0ZWQsdGhpcyl9X29uUHJvZmlsZVVwZGF0ZWQoe2RhdGE6ZX0pe2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCBzPWVbdF07dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZm9yRWFjaChlPT57ZS5oYXMocy51c2VySUQpJiZlLmdldChzLnVzZXJJRCkudXBkYXRlTWVtYmVyKHtuaWNrOnMubmljayxhdmF0YXI6cy5hdmF0YXJ9KX0pfX1kZWxldGVHcm91cE1lbWJlckxpc3QoZSl7dGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZGVsZXRlKGUpfWdldEdyb3VwTWVtYmVyTGlzdCh7Z3JvdXBJRDplLG9mZnNldDpzPTAsY291bnQ6bz0xNSxmaWx0ZXI6aX0pe2NvbnN0IG49dGhpcy5fbitcIi5nZXRHcm91cE1lbWJlckxpc3RcIixyPXRoaXMuZ2V0TW9kdWxlKGRzKSxhPXIuaGFzTG9jYWxHcm91cChlKTtpZihfZS5sKGAke259IGdyb3VwSUQ6JHtlfSBvZmZzZXQ6JHtzfSBjb3VudDoke299IGhhc0xvY2FsR3JvdXA6JHthfWApLCFhKXJldHVybiB4bih7bWVtYmVyTGlzdDpbXSxvZmZzZXQ6MH0pO2lmKHIuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZSkudHlwZT09PXQuR1JQX0FWQ0hBVFJPT00pe2lmKHRoaXMuY2FuSVVzZShNLkFWQ0hBVFJPT01fTUJSX0xJU1QpKXJldHVybiB0aGlzLl9nZXRBVkNoYXRSb29tTWVtYmVyTGlzdCh7Z3JvdXBJRDplLG9mZnNldDpzLGZpbHRlcjppfSk7dGhpcy5vdXRwdXRXYXJuaW5nKFwiTGl2ZU9ubGluZU1lbWJlclwiKX1jb25zdCB1PW5ldyBDbihcImdldEdyb3VwTWVtYmVyTGlzdFwiKTtsZXQgYz0wO2NvbnN0IGw9e2dyb3VwSUQ6ZSxsaW1pdDpvPjEwMD8xMDA6b307c3Qoe2dyb3VwSUQ6ZX0pP2wubmV4dD1cIlwiK3M6KGwub2Zmc2V0PXMsYz1zK28pO2xldCBkPVtdO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpUaSxyZXF1ZXN0RGF0YTpsfSkudGhlbigoe2RhdGE6e21lbWJlcnM6dCxtZW1iZXJOdW06cyxuZXh0Om99fSk9PntpZih3ZShvKXx8KGM9THQobyk/MDpvKSwhYmUodCl8fDA9PT10Lmxlbmd0aClyZXR1cm4gYz0wLFByb21pc2UucmVzb2x2ZShbXSk7Y29uc3QgaT10aGlzLmdldE1vZHVsZShkcyk7aS5oYXNMb2NhbEdyb3VwKGUpJiYoaS5nZXRMb2NhbEdyb3VwUHJvZmlsZShlKS5tZW1iZXJOdW09cyksZD10aGlzLl91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKGUsdCk7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGNzKS5nZXRVc2VyUHJvZmlsZSh7dXNlcklETGlzdDp0Lm1hcChlPT5lLnVzZXJJRCksdGFnTGlzdDpbTWUuTklDSyxNZS5BVkFUQVJdfSl9KS50aGVuKHQ9Pntjb25zdHtkYXRhOml9PXQ7aWYoIWJlKGkpfHwwPT09aS5sZW5ndGgpcmV0dXJuIHhuKHttZW1iZXJMaXN0OltdLG9mZnNldDpjfSk7Y29uc3Qgcj1pLm1hcChlPT4oe3VzZXJJRDplLnVzZXJJRCxuaWNrOmUubmljayxhdmF0YXI6ZS5hdmF0YXJ9KSk7cmV0dXJuIHRoaXMuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAoZSxyKSxkLmxlbmd0aDxvJiYoYz0wKSx1LnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgZ3JvdXBJRDoke2V9IG9mZnNldDoke3N9IGNvdW50OiR7b31gKS5lbmQoKSxfZS5sKG4rXCIgb2suXCIpLHduKHttZW1iZXJMaXN0OmQsb2Zmc2V0OmN9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Uuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShuK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fZ2V0QVZDaGF0Um9vbU1lbWJlckxpc3Qoe2dyb3VwSUQ6ZSxvZmZzZXQ6dCxmaWx0ZXI6c30pe2NvbnN0IG89dGhpcy5fbitcIi5fZ2V0QVZDaGF0Um9vbU1lbWJlckxpc3RcIixpPW5ldyBDbihcIl9nZXRBVkNoYXRSb29tTWVtYmVyTGlzdFwiKTtyZXR1cm4gaS5zZXRNZXNzYWdlKGBncm91cElEOiR7ZX0gb2Zmc2V0OiR7dH0gZmlsdGVyOiR7c31gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp5aSxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDplLG9mZnNldDp0LGZpbHRlcjpzfX0pLnRoZW4odD0+e2NvbnN0e21lbWJlckxpc3Q6cz1bXSxvZmZzZXQ6bj0wfT10LmRhdGE7aS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoYCR7b30gb2suIG1lbWJlciBjb3VudDoke3MubGVuZ3RofSwgbmV4dCByZXF1ZXN0IHRpbWVzdGFtcDoke259YCk7Y29uc3Qgcj10aGlzLl91cGRhdGVMb2NhbEdyb3VwTWVtYmVyTWFwKGUscyk7cmV0dXJuIHduKHttZW1iZXJMaXN0OnIsb2Zmc2V0Om59KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShvK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1nZXRHcm91cE1lbWJlclByb2ZpbGUoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmdldEdyb3VwTWVtYmVyUHJvZmlsZVwiLHM9bmV3IENuKFwiZ2V0R3JvdXBNZW1iZXJQcm9maWxlXCIpO3Muc2V0TWVzc2FnZShlLnVzZXJJRExpc3QubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIitlLnVzZXJJRExpc3QubGVuZ3RoOlwidXNlcklETGlzdDpcIitlLnVzZXJJRExpc3QpLF9lLmwoYCR7dH0gZ3JvdXBJRDoke2UuZ3JvdXBJRH0gdXNlcklETGlzdDoke2UudXNlcklETGlzdC5qb2luKFwiLFwiKX1gKSxlLnVzZXJJRExpc3QubGVuZ3RoPjUwJiYoZS51c2VySURMaXN0PWUudXNlcklETGlzdC5zbGljZSgwLDUwKSk7Y29uc3R7Z3JvdXBJRDpvLHVzZXJJRExpc3Q6aX09ZTtyZXR1cm4gdGhpcy5fZ2V0R3JvdXBNZW1iZXJQcm9maWxlQWR2YW5jZSh7Li4uZSx1c2VySURMaXN0Oml9KS50aGVuKGU9Pntjb25zdHttZW1iZXJzOnR9PWUuZGF0YTtpZighYmUodCl8fDA9PT10Lmxlbmd0aClyZXR1cm4geG4oW10pO3RoaXMuX3VwZGF0ZUxvY2FsR3JvdXBNZW1iZXJNYXAobyx0KTtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoY3MpLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OnQubWFwKCh7dXNlcklEOmV9KT0+ZSksdGFnTGlzdDpbTWUuTklDSyxNZS5BVkFUQVJdfSl9KS50aGVuKGU9Pntjb25zdCB0PWUuZGF0YS5tYXAoKHt1c2VySUQ6ZSxuaWNrOnQsYXZhdGFyOnN9KT0+KHt1c2VySUQ6ZSxuaWNrOnQsYXZhdGFyOnN9KSk7dGhpcy5fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChvLHQpO2NvbnN0IG49aS5maWx0ZXIoZT0+dGhpcy5oYXNMb2NhbEdyb3VwTWVtYmVyKG8sZSkpLm1hcChlPT50aGlzLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKG8sZSkpO3JldHVybiBzLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksd24oe21lbWJlckxpc3Q6bn0pfSl9YWRkR3JvdXBNZW1iZXIoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmFkZEdyb3VwTWVtYmVyXCIse2dyb3VwSUQ6c309ZSxvPXRoaXMuZ2V0TW9kdWxlKGRzKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShzKSx7dHlwZTppfT1vLG49bmV3IENuKFwiYWRkR3JvdXBNZW1iZXJcIik7aWYobi5zZXRNZXNzYWdlKGBncm91cElEOiR7c30gZ3JvdXBUeXBlOiR7aX1gKSxldChpKSl7Y29uc3QgZT1uZXcgRm4oe2NvZGU6bm4uQ0FOTk9UX0FERF9NRU1CRVJfSU5fQVZDSEFUUk9PTX0pO3JldHVybiBuLnNldEVycm9yKGUsITAsdGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxWbihlKX1yZXR1cm4gZS51c2VySURMaXN0PWUudXNlcklETGlzdC5tYXAoZT0+KHt1c2VySUQ6ZX0pKSxfZS5sKGAke3R9IGdyb3VwSUQ6JHtzfWApLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkVpLHJlcXVlc3REYXRhOmV9KS50aGVuKCh7ZGF0YTp7bWVtYmVyczpzfX0pPT57X2UubCh0K1wiIG9rXCIpO2NvbnN0IGk9cy5maWx0ZXIoZT0+MT09PWUucmVzdWx0KS5tYXAoZT0+ZS51c2VySUQpLHI9cy5maWx0ZXIoZT0+MD09PWUucmVzdWx0KS5tYXAoZT0+ZS51c2VySUQpLGE9cy5maWx0ZXIoZT0+Mj09PWUucmVzdWx0KS5tYXAoZT0+ZS51c2VySUQpLHU9cy5maWx0ZXIoZT0+ND09PWUucmVzdWx0KS5tYXAoZT0+ZS51c2VySUQpLGM9YGdyb3VwSUQ6JHtlLmdyb3VwSUR9LCBzdWNjZXNzVXNlcklETGlzdDoke2l9LCBmYWlsdXJlVXNlcklETGlzdDoke3J9LCBleGlzdGVkVXNlcklETGlzdDoke2F9LCBvdmVyTGltaXRVc2VySURMaXN0OmArdTtyZXR1cm4gbi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKGMpLmVuZCgpLDA9PT1pLmxlbmd0aD93bih7c3VjY2Vzc1VzZXJJRExpc3Q6aSxmYWlsdXJlVXNlcklETGlzdDpyLGV4aXN0ZWRVc2VySURMaXN0OmEsb3ZlckxpbWl0VXNlcklETGlzdDp1fSk6KG8ubWVtYmVyQ291bnQrPWkubGVuZ3RoLHRoaXMuX3VwZGF0ZUNvbnZlcnNhdGlvbkdyb3VwUHJvZmlsZShvKSx3bih7c3VjY2Vzc1VzZXJJRExpc3Q6aSxmYWlsdXJlVXNlcklETGlzdDpyLGV4aXN0ZWRVc2VySURMaXN0OmEsb3ZlckxpbWl0VXNlcklETGlzdDp1LGdyb3VwOm99KSl9KS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntuLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9ZGVsZXRlR3JvdXBNZW1iZXIoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmRlbGV0ZUdyb3VwTWVtYmVyXCIse2dyb3VwSUQ6cyx1c2VySURMaXN0Om99PWUsaT10aGlzLmdldE1vZHVsZShkcykuZ2V0TG9jYWxHcm91cFByb2ZpbGUocyk7aWYod2UoaSkpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX0dST1VQfSk7aWYoZXQoaS50eXBlKSl7cmV0dXJuIHRoaXMuY2FuSVVzZShNLkFWQ0hBVFJPT01fQkFOX01CUik/dGhpcy5fYmFuQVZDaGF0Um9vbU1lbWJlcihlKTpWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pfWNvbnN0IG49bmV3IENuKFwiZGVsZXRlR3JvdXBNZW1iZXJcIikscj1gZ3JvdXBJRDoke3N9ICR7by5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiK28ubGVuZ3RoOlwidXNlcklETGlzdDpcIitvfWA7cmV0dXJuIG4uc2V0TWVzc2FnZShyKSxfZS5sKGAke3R9IGdyb3VwSUQ6JHtzfSB1c2VySURMaXN0OmAsbyksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6U2kscmVxdWVzdERhdGE6ZX0pLnRoZW4oKCk9PihuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubCh0K1wiIG9rXCIpLGkubWVtYmVyQ291bnQtPTEsdGhpcy5fdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKGkpLHRoaXMuZGVsZXRlTG9jYWxHcm91cE1lbWJlcnMocyxvKSx3bih7Z3JvdXA6aSx1c2VySURMaXN0Om99KSkpLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fdXBkYXRlQ29udmVyc2F0aW9uR3JvdXBQcm9maWxlKGUpe3RoaXMuZ2V0TW9kdWxlKF9zKS51cGRhdGVDb252ZXJzYXRpb25Hcm91cFByb2ZpbGUoW2VdKX1fYmFuQVZDaGF0Um9vbU1lbWJlcihlKXtjb25zdCB0PXRoaXMuX24rXCIuZGVsZXRlR3JvdXBNZW1iZXJcIix7Z3JvdXBJRDpzLHVzZXJJRExpc3Q6b309ZSxpPWBncm91cElEOiR7c30gJHtvLmxlbmd0aD41P1widXNlcklETGlzdC5sZW5ndGg6XCIrby5sZW5ndGg6XCJ1c2VySURMaXN0OlwiK299YCxuPW5ldyBDbihcImRlbGV0ZUdyb3VwTWVtYmVyXCIpO24uc2V0TWVzc2FnZShpKSxfZS5sKGAke3R9IGdyb3VwSUQ6JHtzfSB1c2VySURMaXN0OmAsbyk7Y29uc3Qgcj10aGlzLmdldE1vZHVsZShkcykuZ2V0TG9jYWxHcm91cFByb2ZpbGUocyk7cmV0dXJuIHdlKGUuZHVyYXRpb24pfHwwPT09ZS5kdXJhdGlvbj9Wbih7Y29kZTpubi5CQU5fRFVSQVRJT05fSU5WQUxJRH0pOnRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkxpLHJlcXVlc3REYXRhOmV9KS50aGVuKCgpPT4obi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwodCtcIiBva1wiKSx0aGlzLmRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKHMsbyksd24oe2dyb3VwOnIsdXNlcklETGlzdDpvfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntuLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9c2V0R3JvdXBNZW1iZXJNdXRlVGltZShlKXtjb25zdHtncm91cElEOnQsdXNlcklEOnMsbXV0ZVRpbWU6b309ZSxpPXRoaXMuX24rXCIuc2V0R3JvdXBNZW1iZXJNdXRlVGltZVwiO2lmKHM9PT10aGlzLmdldE15VXNlcklEKCkpcmV0dXJuIFZuKG5ldyBGbih7Y29kZTpubi5DQU5OT1RfTVVURV9TRUxGfSkpO19lLmwoYCR7aX0gZ3JvdXBJRDoke3R9IHVzZXJJRDoke3N9YCk7Y29uc3Qgbj1uZXcgQ24oXCJzZXRHcm91cE1lbWJlck11dGVUaW1lXCIpO3JldHVybiBuLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHt0fSB1c2VySUQ6JHtzfSBtdXRlVGltZToke299YCksdGhpcy5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6dCx1c2VySUQ6cyxtdXRlVGltZTpvfSkudGhlbihlPT57bi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoaStcIiBva1wiKTtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKGRzKTtyZXR1cm4gd24oe2dyb3VwOnMuZ2V0TG9jYWxHcm91cFByb2ZpbGUodCksbWVtYmVyOmV9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShpK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1zZXRHcm91cE1lbWJlclJvbGUoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLnNldEdyb3VwTWVtYmVyUm9sZVwiLHtncm91cElEOm8sdXNlcklEOmkscm9sZTpufT1lLHI9dGhpcy5nZXRNb2R1bGUoZHMpLmdldExvY2FsR3JvdXBQcm9maWxlKG8pO2lmKHIuc2VsZkluZm8ucm9sZSE9PXQuR1JQX01CUl9ST0xFX09XTkVSKXJldHVybiBWbih7Y29kZTpubi5OT1RfT1dORVJ9KTtpZihbdC5HUlBfV09SSyx0LkdSUF9BVkNIQVRST09NXS5pbmNsdWRlcyhyLnR5cGUpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfU0VUX01FTUJFUl9ST0xFX0lOX1dPUktfQU5EX0FWQ0hBVFJPT019KTtjb25zdCBhPVt0LkdSUF9NQlJfUk9MRV9BRE1JTix0LkdSUF9NQlJfUk9MRV9NRU1CRVJdO2lmKHN0KHtncm91cElEOm99KSYmYS5wdXNoKHQuR1JQX01CUl9ST0xFX0NVU1RPTSksYS5pbmRleE9mKG4pPDApcmV0dXJuIFZuKHtjb2RlOm5uLklOVkFMSURfTUVNQkVSX1JPTEV9KTtpZihpPT09dGhpcy5nZXRNeVVzZXJJRCgpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfU0VUX1NFTEZfTUVNQkVSX1JPTEV9KTtjb25zdCB1PW5ldyBDbihcInNldEdyb3VwTWVtYmVyUm9sZVwiKTtyZXR1cm4gdS5zZXRNZXNzYWdlKGBncm91cElEOiR7b30gdXNlcklEOiR7aX0gcm9sZToke259YCksX2UubChgJHtzfSBncm91cElEOiR7b30gdXNlcklEOiR7aX1gKSx0aGlzLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpvLHVzZXJJRDppLHJvbGU6bn0pLnRoZW4oZT0+KHUuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHMrXCIgb2tcIiksd24oe2dyb3VwOnIsbWVtYmVyOmV9KSkpLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Uuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fZmlsdGVyUHJvZmFuaXR5KGUsdCl7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShVcyk7aWYoIXMpcmV0dXJuITA7Y29uc3R7aXNBbGxvd2VkVG9TZW5kOm8sbW9kaWZpZWRUZXh0Oml9PXMuZmlsdGVyVGV4dCh0W2VdLFMpO3JldHVybiEwPT09byYmKHRbZV09aSwhMCl9c2V0R3JvdXBNZW1iZXJOYW1lQ2FyZChlKXtjb25zdCB0PXRoaXMuX24rXCIuc2V0R3JvdXBNZW1iZXJOYW1lQ2FyZFwiO2lmKGUubmFtZUNhcmQmJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibmFtZUNhcmRcIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7Y29uc3R7Z3JvdXBJRDpzLHVzZXJJRDpvPXRoaXMuZ2V0TXlVc2VySUQoKSxuYW1lQ2FyZDppfT1lO19lLmwoYCR7dH0gZ3JvdXBJRDoke3N9IHVzZXJJRDoke299YCk7Y29uc3Qgbj1uZXcgQ24oXCJzZXRHcm91cE1lbWJlck5hbWVDYXJkXCIpO3JldHVybiBuLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtzfSB1c2VySUQ6JHtvfSBuYW1lQ2FyZDoke2l9YCksdGhpcy5tb2RpZnlHcm91cE1lbWJlckluZm8oe2dyb3VwSUQ6cyx1c2VySUQ6byxuYW1lQ2FyZDppfSkudGhlbihlPT57X2UubCh0K1wiIG9rXCIpLG4uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTtjb25zdCByPXRoaXMuZ2V0TW9kdWxlKGRzKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShzKTtyZXR1cm4gbz09PXRoaXMuZ2V0TXlVc2VySUQoKSYmciYmci5zZXRTZWxmTmFtZUNhcmQoaSksd24oe2dyb3VwOnIsbWVtYmVyOmV9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1zZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5zZXRHcm91cE1lbWJlckN1c3RvbUZpZWxkXCIse2dyb3VwSUQ6cyx1c2VySUQ6bz10aGlzLmdldE15VXNlcklEKCksbWVtYmVyQ3VzdG9tRmllbGQ6aX09ZTtfZS5sKGAke3R9IGdyb3VwSUQ6JHtzfSB1c2VySUQ6JHtvfWApO2NvbnN0IG49bmV3IENuKFwic2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZFwiKTtyZXR1cm4gbi5zZXRNZXNzYWdlKGBncm91cElEOiR7c30gdXNlcklEOiR7b30gbWVtYmVyQ3VzdG9tRmllbGQ6JHtKU09OLnN0cmluZ2lmeShpKX1gKSx0aGlzLm1vZGlmeUdyb3VwTWVtYmVySW5mbyh7Z3JvdXBJRDpzLHVzZXJJRDpvLG1lbWJlckN1c3RvbUZpZWxkOml9KS50aGVuKGU9PntuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubCh0K1wiIG9rXCIpO2NvbnN0IG89dGhpcy5nZXRNb2R1bGUoZHMpLmdldExvY2FsR3JvdXBQcm9maWxlKHMpO3JldHVybiB3bih7Z3JvdXA6byxtZW1iZXI6ZX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bi5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfW1vZGlmeUdyb3VwTWVtYmVySW5mbyhlKXtsZXR7Z3JvdXBJRDp0LHVzZXJJRDpzfT1lLG89dm9pZCAwO3JldHVybiBvdCh0KSYmKG89dCx0PWZ0KG8pKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpBaSxyZXF1ZXN0RGF0YTp7Li4uZSxncm91cElEOnQsdG9waWNJRDpvfX0pLnRoZW4oKCk9PntpZih0aGlzLmhhc0xvY2FsR3JvdXBNZW1iZXIodCxzKSl7Y29uc3Qgbz10aGlzLmdldExvY2FsR3JvdXBNZW1iZXJJbmZvKHQscyk7cmV0dXJuIHdlKGUubXV0ZVRpbWUpfHxvLnVwZGF0ZU11dGVVbnRpbChlLm11dGVUaW1lKSx3ZShlLnJvbGUpfHxvLnVwZGF0ZVJvbGUoZS5yb2xlKSx3ZShlLm5hbWVDYXJkKXx8by51cGRhdGVOYW1lQ2FyZChlLm5hbWVDYXJkKSx3ZShlLm1lbWJlckN1c3RvbUZpZWxkKXx8by51cGRhdGVNZW1iZXJDdXN0b21GaWVsZChlLm1lbWJlckN1c3RvbUZpZWxkKSxvfXJldHVybiB0aGlzLmdldEdyb3VwTWVtYmVyUHJvZmlsZSh7Z3JvdXBJRDp0LHVzZXJJRExpc3Q6W3NdfSkudGhlbigoe2RhdGE6e21lbWJlckxpc3Q6W2VdfX0pPT5lKX0pfW1hcmtHcm91cE1lbWJlckxpc3QoZSl7Y29uc3QgdD10aGlzLl9uK1wiLm1hcmtHcm91cE1lbWJlckxpc3RcIix7Z3JvdXBJRDpzLG1hcmtUeXBlOm8sZW5hYmxlTWFyazppLHVzZXJJRExpc3Q6bj1bXX09ZSxyPWBncm91cElEOiR7c30gbWFya1R5cGU6JHtvfSBlbmFibGVNYXJrOiR7aX0gdXNlcklETGlzdCBjb3VudDogJHtuLmxlbmd0aH1gO19lLmwoYCR7dH0gJHtyfWApO2xldCBhPTI7Y29uc3QgdT1bXTshMD09PWkmJihhPTEpO2xldCBjPVsuLi5uXTtuLmxlbmd0aD41MDAmJihjPW4uc2xpY2UoMCw1MDApLF9lLncoYCR7dH0gJHtEdCg1MDApfWApKSxjLmZvckVhY2goZT0+e3UucHVzaCh7dXNlcklEOmUsbWFya1R5cGU6W29dfSl9KSxjPW51bGw7Y29uc3QgbD1uZXcgQ24oXCJtYXJrR3JvdXBNZW1iZXJMaXN0XCIpO3JldHVybiBsLnNldE1lc3NhZ2UoXCJcIityKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp2aSxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpzLG9wZXJhdGlvblR5cGU6YSxtZW1iZXJMaXN0OnV9fSkudGhlbihlPT57Y29uc3R7bWVtYmVyTGlzdDpzPVtdfT1lLmRhdGEsbz1bXSxpPVtdO3MubGVuZ3RoPT09bi5sZW5ndGg/by5wdXNoKC4uLm4pOihzLmZvckVhY2goZT0+e28ucHVzaChlLnVzZXJJRCl9KSxuLmZvckVhY2goZT0+e28uaW5jbHVkZXMoZSl8fGkucHVzaChlKX0pKTtjb25zdCByPWBzdWNjZXNzIGNvdW50OiR7by5sZW5ndGh9IGZhaWwgY291bnQ6JHtpLmxlbmd0aH1gO3JldHVybiBsLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShyKS5lbmQoKSxfZS5sKGAke3R9IG9rLiAke3J9YCksd24oe3N1Y2Nlc3NVc2VySURMaXN0Om8sZmFpbHVyZVVzZXJJRExpc3Q6aX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bC5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfV9nZXRHcm91cE1lbWJlclByb2ZpbGVBZHZhbmNlKGUpe3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpEaSxyZXF1ZXN0RGF0YTp7Li4uZSxtZW1iZXJJbmZvRmlsdGVyOmUubWVtYmVySW5mb0ZpbHRlcj9lLm1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiSm9pblRpbWVcIixcIk5hbWVDYXJkXCIsXCJTaHV0VXBVbnRpbFwiXX19KX1fdXBkYXRlTG9jYWxHcm91cE1lbWJlck1hcChlLHQpe2lmKCFiZSh0KXx8MD09PXQubGVuZ3RoKXJldHVybltdO3JldHVybiB0Lm1hcCh0PT4odGhpcy5oYXNMb2NhbEdyb3VwTWVtYmVyKGUsdC51c2VySUQpP3RoaXMuZ2V0TG9jYWxHcm91cE1lbWJlckluZm8oZSx0LnVzZXJJRCkudXBkYXRlTWVtYmVyKHQpOnRoaXMuc2V0TG9jYWxHcm91cE1lbWJlcihlLG5ldyBScih0KSksdGhpcy5nZXRMb2NhbEdyb3VwTWVtYmVySW5mbyhlLHQudXNlcklEKSkpfWRlbGV0ZUxvY2FsR3JvdXBNZW1iZXJzKGUsdCl7Y29uc3Qgcz10aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSk7cyYmdC5mb3JFYWNoKGU9PntzLmRlbGV0ZShlKX0pfWdldExvY2FsR3JvdXBNZW1iZXJJbmZvKGUsdCl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKT90aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuZ2V0KHQpOm51bGx9c2V0TG9jYWxHcm91cE1lbWJlcihlLHQpe2lmKHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKSl0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuc2V0KHQudXNlcklELHQpO2Vsc2V7Y29uc3Qgcz0obmV3IE1hcCkuc2V0KHQudXNlcklELHQpO3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLnNldChlLHMpfX1nZXRMb2NhbEdyb3VwTWVtYmVyTGlzdChlKXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuZ2V0KGUpfWhhc0xvY2FsR3JvdXBNZW1iZXIoZSx0KXtyZXR1cm4gdGhpcy5ncm91cE1lbWJlckxpc3RNYXAuaGFzKGUpJiZ0aGlzLmdyb3VwTWVtYmVyTGlzdE1hcC5nZXQoZSkuaGFzKHQpfWhhc0xvY2FsR3JvdXBNZW1iZXJNYXAoZSl7cmV0dXJuIHRoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmhhcyhlKX1yZXNldCgpe3RoaXMuZ3JvdXBNZW1iZXJMaXN0TWFwLmNsZWFyKCl9fWNvbnN0IEdyPVtcInRvcGljSURcIixcInRvcGljTmFtZVwiLFwiYXZhdGFyXCIsXCJpbnRyb2R1Y3Rpb25cIixcIm5vdGlmaWNhdGlvblwiLFwidW5yZWFkQ291bnRcIixcIm11dGVBbGxNZW1iZXJzXCIsXCJjdXN0b21EYXRhXCIsXCJncm91cEF0SW5mb0xpc3RcIixcIm5leHRNZXNzYWdlU2VxXCIsXCJzZWxmSW5mb1wiXSxVcj1mdW5jdGlvbihlLHQpe3JldHVybiBMdChlKT97bGFzdFRpbWU6MCxsYXN0U2VxdWVuY2U6MCxmcm9tQWNjb3VudDpcIlwiLHBheWxvYWQ6bnVsbCx0eXBlOlwiXCIsbWVzc2FnZUZvclNob3c6XCJcIixuaWNrOlwiXCIsdmVyc2lvbjowLGNsb3VkQ3VzdG9tRGF0YTpcIlwiLGlzUmV2b2tlZDohMSxyZXZva2VyOm51bGx9OntsYXN0VGltZTplLnRpbWV8fDAsbGFzdFNlcXVlbmNlOmUuc2VxdWVuY2V8fDAsZnJvbUFjY291bnQ6ZS5mcm9tfHxcIlwiLHBheWxvYWQ6ZS5wYXlsb2FkfHxudWxsLHR5cGU6ZS50eXBlfHxcIlwiLG1lc3NhZ2VGb3JTaG93Okl0KGUudHlwZSxlLnBheWxvYWQsdCksbmljazplLm5pY2t8fFwiXCIsdmVyc2lvbjplLnZlcnNpb258fDAsY2xvdWRDdXN0b21EYXRhOmUuY2xvdWRDdXN0b21EYXRhfHxcIlwiLGlzUmV2b2tlZDplLmlzUmV2b2tlZHx8ITEscmV2b2tlcjplLnJldm9rZXJ8fG51bGx9fTtjbGFzcyBrcntjb25zdHJ1Y3RvcihlLHQpe3RoaXMudG9waWNJRD1cIlwiLHRoaXMudG9waWNOYW1lPVwiXCIsdGhpcy5hdmF0YXI9XCJcIix0aGlzLmludHJvZHVjdGlvbj1cIlwiLHRoaXMubm90aWZpY2F0aW9uPVwiXCIsdGhpcy51bnJlYWRDb3VudD0wLHRoaXMubXV0ZUFsbE1lbWJlcnM9ITEsdGhpcy5jdXN0b21EYXRhPVwiXCIsdGhpcy5ncm91cEF0SW5mb0xpc3Q9W10sdGhpcy5uZXh0TWVzc2FnZVNlcT0wLHRoaXMubGFzdE1lc3NhZ2U9VXIoZS5sYXN0TWVzc2FnZSx0KSx0aGlzLnNlbGZJbmZvPXttdXRlVGltZTowLHJlYWRlZFNlcXVlbmNlOjAsbWVzc2FnZVJlbWluZFR5cGU6XCJcIixleGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdDp2b2lkIDB9LHRoaXMuX2luaXRUb3BpYyhlKX1faW5pdFRvcGljKGUpe2Zvcihjb25zdCB0IGluIGUpR3IuaW5kZXhPZih0KTwwfHwoXCJzZWxmSW5mb1wiPT09dD90aGlzLnVwZGF0ZVNlbGZJbmZvKGVbdF0pOnRoaXNbdF09XCJtdXRlQWxsTWVtYmVyc1wiPT09dD8xPT09ZVt0XTplW3RdKX11cGRhdGVVbnJlYWRDb3VudChlPTApe3RoaXMudW5yZWFkQ291bnQ9ZX11cGRhdGVOZXh0TWVzc2FnZVNlcShlKXt0aGlzLm5leHRNZXNzYWdlU2VxPWV9dXBkYXRlTGFzdE1lc3NhZ2UoZSl7dGhpcy5sYXN0TWVzc2FnZT1VcihlKX11cGRhdGVHcm91cEF0SW5mb0xpc3QoZSl7dGhpcy5ncm91cEF0SW5mb0xpc3Q9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9dXBkYXRlVG9waWMoZSl7d2UoZS5zZWxmSW5mbyl8fHRoaXMudXBkYXRlU2VsZkluZm8oZS5zZWxmSW5mbyksd2UoZS5tdXRlQWxsTWVtYmVycyl8fCh0aGlzLm11dGVBbGxNZW1iZXJzPTE9PT1lLm11dGVBbGxNZW1iZXJzKSxCZSh0aGlzLGUsW1wiZ3JvdXBJRFwiLFwibGFzdE1lc3NhZ2VUaW1lXCIsXCJzZWxmSW5mb1wiLFwibXV0ZUFsbE1lbWJlcnNcIixcImxhc3RNc2dcIl0pfXVwZGF0ZVNlbGZJbmZvKGUpe3JldHVybiAwIT09QmUodGhpcy5zZWxmSW5mbyxlLFtdLFtcIlwiXSl9cmVkdWNlVW5yZWFkQ291bnQoKXtyZXR1cm4gdGhpcy51bnJlYWRDb3VudD49MSYmKHRoaXMudW5yZWFkQ291bnQtPTEsITApfWlzTGFzdE1lc3NhZ2VSZXZva2VkKHtzZXF1ZW5jZTplfSl7cmV0dXJuIGU9PT10aGlzLmxhc3RNZXNzYWdlLmxhc3RTZXF1ZW5jZX1zZXRMYXN0TWVzc2FnZVJldm9rZWQoZSl7dGhpcy5sYXN0TWVzc2FnZS5pc1Jldm9rZWQ9ZX1zZXRMYXN0TWVzc2FnZVJldm9rZXIoZSl7dGhpcy5sYXN0TWVzc2FnZS5yZXZva2VyPWV9fWNsYXNzIFByIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlRvcGljTW9kdWxlXCIsdGhpcy5fdG9waWNNYXA9bmV3IE1hcCx0aGlzLl9nZXRUb3BpY1RpbWVNYXA9bmV3IE1hcCx0aGlzLlRPUElDX0NBQ0hFX1RJTUU9MzAwLHRoaXMuVE9QSUNfTEFTVF9BQ1RJVkVfVElNRT0zNjAwO3RoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihXbix0aGlzLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCx0aGlzKX1fb25DbG91ZENvbmZpZ1VwZGF0ZWQoKXtjb25zdCBlPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJ0b3BpY19jYWNoZV90aW1lXCIpLHQ9dGhpcy5nZXRDbG91ZENvbmZpZyhcInRvcGljX2xhc3RfYWN0aXZlX3RpbWVcIik7d2UoZSl8fCh0aGlzLlRPUElDX0NBQ0hFX1RJTUU9TnVtYmVyKGUpKSx3ZSh0KXx8KHRoaXMuVE9QSUNfTEFTVF9BQ1RJVkVfVElNRT1OdW1iZXIodCkpfW9uVG9waWNDcmVhdGVkKHQpe2NvbnN0e2dyb3VwSUQ6c309dDt0aGlzLnJlc2V0R2V0VG9waWNUaW1lKHMpLHRoaXMuZW1pdE91dGVyRXZlbnQoZS5UT1BJQ19DUkVBVEVELHQpfW9uVG9waWNEZWxldGVkKHQpe2NvbnN0e2dyb3VwSUQ6cyx0b3BpY0lETGlzdDpvPVtdfT10O28uZm9yRWFjaChlPT57dGhpcy5fZGVsZXRlTG9jYWxUb3BpYyhzLGUpfSksdGhpcy5lbWl0T3V0ZXJFdmVudChlLlRPUElDX0RFTEVURUQsdCl9b25Ub3BpY01lc3NhZ2VSZW1pbmRUeXBlVXBkYXRlZCh0KXtjb25zdHtncm91cElEOnMsdG9waWNJRDpvLG1lc3NhZ2VSZW1pbmRUeXBlOml9PXQsbj10aGlzLmdldExvY2FsVG9waWMocyxvKTtpZihuKXtjb25zdCB0PW4udXBkYXRlU2VsZkluZm8oe21lc3NhZ2VSZW1pbmRUeXBlOml9KTt0JiZ0aGlzLmVtaXRPdXRlckV2ZW50KGUuVE9QSUNfVVBEQVRFRCx7Z3JvdXBJRDpzLHRvcGljOm59KSxfZS5kKGAke3RoaXMuX259Lm9uVG9waWNNZXNzYWdlUmVtaW5kVHlwZVVwZGF0ZWQgdG9waWNJRDoke299IG1lc3NhZ2VSZW1pbmRUeXBlOiR7aX0gaXNUb3BpY1VwZGF0ZWQ6JHt0fWApfX1vblRvcGljUHJvZmlsZVVwZGF0ZWQodCl7Y29uc3R7Z3JvdXBJRDpzLHRvcGljSUQ6b309dCxpPXRoaXMuZ2V0TG9jYWxUb3BpYyhzLG8pO2kmJihpLnVwZGF0ZVRvcGljKHQpLHRoaXMuZW1pdE91dGVyRXZlbnQoZS5UT1BJQ19VUERBVEVELHtncm91cElEOnMsdG9waWM6aX0pKX1vbkNvbnZlcnNhdGlvblByb3h5KHQpe2NvbnN0e3RvcGljSUQ6cyx1bnJlYWRDb3VudDpvLGdyb3VwQXRJbmZvTGlzdDppfT10LG49ZnQocykscj10aGlzLmdldExvY2FsVG9waWMobixzKTtsZXQgYT0hMTtyJiYod2Uobyl8fHIudW5yZWFkQ291bnQ9PT1vfHwoci51cGRhdGVVbnJlYWRDb3VudChvKSxhPSEwKSx3ZShpKXx8KHIudXBkYXRlR3JvdXBBdEluZm9MaXN0KGkpLGE9ITApKSxhJiZ0aGlzLmVtaXRPdXRlckV2ZW50KGUuVE9QSUNfVVBEQVRFRCx7Z3JvdXBJRDpuLHRvcGljOnJ9KX1vbk1lc3NhZ2VTZW50KHQpe2NvbnN0e2dyb3VwSUQ6cyx0b3BpY0lEOm8sbGFzdE1lc3NhZ2U6aX09dCxuPXRoaXMuZ2V0TG9jYWxUb3BpYyhzLG8pO24mJihuLm5leHRNZXNzYWdlU2VxKz0xLG4udXBkYXRlTGFzdE1lc3NhZ2UoaSksdGhpcy5lbWl0T3V0ZXJFdmVudChlLlRPUElDX1VQREFURUQse2dyb3VwSUQ6cyx0b3BpYzpufSkpfW9uTWVzc2FnZU1vZGlmaWVkKHQpe2NvbnN0e3RvOnMsdGltZTpvLHNlcXVlbmNlOmksZWxlbWVudHM6bixjbG91ZEN1c3RvbURhdGE6cixtZXNzYWdlVmVyc2lvbjphfT10LHU9ZnQocyksYz10aGlzLmdldExvY2FsVG9waWModSxzKTtpZihjKXtjb25zdCBsPWMubGFzdE1lc3NhZ2U7X2UuZChgJHt0aGlzLl9ufS5vbk1lc3NhZ2VNb2RpZmllZCB0b3BpY0lEOiR7c30gbGFzdE1lc3NhZ2U6YCxKU09OLnN0cmluZ2lmeShsKSxcIm9wdGlvbnM6XCIsSlNPTi5zdHJpbmdpZnkodCkpLGwmJihudWxsPT09bC5wYXlsb2FkfHxsLmxhc3RUaW1lPT09byYmbC5sYXN0U2VxdWVuY2U9PT1pJiZsLnZlcnNpb24hPT1hKSYmKGwudHlwZT1uWzBdLnR5cGUsbC5wYXlsb2FkPW5bMF0uY29udGVudCxsLm1lc3NhZ2VGb3JTaG93PUl0KGwudHlwZSxsLnBheWxvYWQsdGhpcy5pc0ludGwoKSksbC5jbG91ZEN1c3RvbURhdGE9cixsLnZlcnNpb249YSxsLmxhc3RTZXF1ZW5jZT1pLGwubGFzdFRpbWU9byx0aGlzLmVtaXRPdXRlckV2ZW50KGUuVE9QSUNfVVBEQVRFRCx7Z3JvdXBJRDp1LHRvcGljOmN9KSl9fW9uTWVzc2FnZVJldm9rZWQodCl7aWYoMD09PXQubGVuZ3RoKXJldHVybjtsZXQgcz1udWxsLG89bnVsbCxpPSExO3QuZm9yRWFjaChlPT57Y29uc3QgdD1lLnRvO289ZnQodCkscz10aGlzLmdldExvY2FsVG9waWMobyx0KSxzJiYocy5yZWR1Y2VVbnJlYWRDb3VudCgpJiYoaT0hMCkscy5pc0xhc3RNZXNzYWdlUmV2b2tlZChlKSYmKHMuc2V0TGFzdE1lc3NhZ2VSZXZva2VkKCEwKSxzLnNldExhc3RNZXNzYWdlUmV2b2tlcihlLnJldm9rZXIpLGk9ITApKX0pLGkmJnRoaXMuZW1pdE91dGVyRXZlbnQoZS5UT1BJQ19VUERBVEVELHtncm91cElEOm8sdG9waWM6c30pfWlzTGFzdE1lc3NhZ2VSZXZva2VkKGUpe2NvbnN0e3RvcGljSUQ6dCxzZXF1ZW5jZTpzfT1lLG89ZnQodCksaT10aGlzLmdldExvY2FsVG9waWMobyx0KTtsZXQgbj0hMTtyZXR1cm4gaSYmKG49aS5pc0xhc3RNZXNzYWdlUmV2b2tlZCh7c2VxdWVuY2U6c30pKSxufWdldEpvaW5lZENvbW11bml0eUxpc3QoKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoZHMpLmdldEdyb3VwTGlzdCh7aXNHcm91cFdpdGhUb3BpY09ubHk6ITB9KS50aGVuKGU9Pntjb25zdHtncm91cExpc3Q6dD1bXX09ZS5kYXRhO3JldHVybiB3bih7Z3JvdXBMaXN0OnR9KX0pLmNhdGNoKGU9PlZuKGUpKX1jcmVhdGVUb3BpY0luQ29tbXVuaXR5KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5jcmVhdGVUb3BpY0luQ29tbXVuaXR5XCIse3RvcGljSUQ6c309ZTtpZighd2UocykmJiFvdChzKSlyZXR1cm4gVm4oe2NvZGU6bm4uSUxMRUdBTF9UT1BJQ19JRH0pO2lmKGUudG9waWNOYW1lJiYhMT09PXRoaXMuX2ZpbHRlclByb2Zhbml0eShcInRvcGljTmFtZVwiLGUpKXJldHVybiBWbih7Y29kZTpubi5QUk9GQU5JVFlfRk9VTkR9KTtpZihlLmludHJvZHVjdGlvbiYmITE9PT10aGlzLl9maWx0ZXJQcm9mYW5pdHkoXCJpbnRyb2R1Y3Rpb25cIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7aWYoZS5ub3RpZmljYXRpb24mJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibm90aWZpY2F0aW9uXCIsZSkpcmV0dXJuIFZuKHtjb2RlOm5uLlBST0ZBTklUWV9GT1VORH0pO2NvbnN0IG89bmV3IENuKFwiY3JlYXRlVG9waWNJbkNvbW11bml0eVwiKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6S2kscmVxdWVzdERhdGE6ey4uLmV9fSkudGhlbihzPT57Y29uc3R7dG9waWNJRDppfT1zLmRhdGE7cmV0dXJuIG8uc2V0TWVzc2FnZShcInRvcGljSUQ6XCIraSkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHQrXCIgb2tcIiksdGhpcy5fdXBkYXRlVG9waWNNYXAoW3suLi5lLHRvcGljSUQ6aX1dKSx3bih7dG9waWNJRDppfSl9KS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9ZGVsZXRlVG9waWNGcm9tQ29tbXVuaXR5KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5kZWxldGVUb3BpY0Zyb21Db21tdW5pdHlcIix7Z3JvdXBJRDpzLHRvcGljSURMaXN0Om89W119PWUsaT1uZXcgQ24oXCJkZWxldGVUb3BpY0Zyb21Db21tdW5pdHlcIik7cmV0dXJuIGkuc2V0TWVzc2FnZShgZ3JvdXBJRDoke3N9IHRvcGljSURMaXN0OiR7b31gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpXaSxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDpzLHRvcGljSURMaXN0Om99fSkudGhlbihlPT57Y29uc3R7cmVzdWx0TGlzdDp0PVtdfT1lLmRhdGEsbz1bXSxuPVtdO3QuZm9yRWFjaChlPT57Y29uc3R7dG9waWNJRDp0LGVycm9yQ29kZTpzLGVycm9ySW5mbzppfT1lOzA9PT1zP28ucHVzaCh7dG9waWNJRDp0fSk6bi5wdXNoKHt0b3BpY0lEOnQsY29kZTpzLG1lc3NhZ2U6aX0pfSk7Y29uc3Qgcj1gc3VjY2VzcyBjb3VudDoke28ubGVuZ3RofSwgZmFpbCBjb3VudDoke24ubGVuZ3RofWA7cmV0dXJuIGkuc2V0TW9yZU1lc3NhZ2UoXCJcIityKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoXCJcIityKSxvLmZvckVhY2goZT0+e3RoaXMuX2RlbGV0ZUxvY2FsVG9waWMocyxlLnRvcGljSUQpfSksd24oe3N1Y2Nlc3NUb3BpY0xpc3Q6byxmYWlsdXJlVG9waWNMaXN0Om59KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX11cGRhdGVUb3BpY1Byb2ZpbGUoZSl7Y29uc3QgdD10aGlzLl9uK1wiLnVwZGF0ZVRvcGljUHJvZmlsZVwiO2lmKF9lLmwodCtcIiBvcHRpb25zOlwiLGUpLGUudG9waWNOYW1lJiYhMT09PXRoaXMuX2ZpbHRlclByb2Zhbml0eShcInRvcGljTmFtZVwiLGUpKXJldHVybiBWbih7Y29kZTpubi5QUk9GQU5JVFlfRk9VTkR9KTtpZihlLmludHJvZHVjdGlvbiYmITE9PT10aGlzLl9maWx0ZXJQcm9mYW5pdHkoXCJpbnRyb2R1Y3Rpb25cIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7aWYoZS5ub3RpZmljYXRpb24mJiExPT09dGhpcy5fZmlsdGVyUHJvZmFuaXR5KFwibm90aWZpY2F0aW9uXCIsZSkpcmV0dXJuIFZuKHtjb2RlOm5uLlBST0ZBTklUWV9GT1VORH0pO2NvbnN0IHM9bmV3IENuKFwidXBkYXRlVG9waWNQcm9maWxlXCIpO3JldHVybiBzLnNldE1lc3NhZ2UoYGdyb3VwSUQ6JHtlLmdyb3VwSUR9IHRvcGljSUQ6JHtlLnRvcGljSUR9YCksd2UoZS5tdXRlQWxsTWVtYmVycyl8fChlLm11dGVBbGxNZW1iZXJzPSEwPT09ZS5tdXRlQWxsTWVtYmVycz9cIk9uXCI6XCJPZmZcIiksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WWkscmVxdWVzdERhdGE6ey4uLmV9fSkudGhlbigoKT0+KHMuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHQrXCIgb2tcIiksdGhpcy5fdXBkYXRlVG9waWNNYXAoW2VdKSx3bih7dG9waWM6dGhpcy5nZXRMb2NhbFRvcGljKGUuZ3JvdXBJRCxlLnRvcGljSUQpfSkpKS5jYXRjaChlPT4odGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxvXSk9PntzLnNldEVycm9yKGUsdCxvKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9Z2V0VG9waWNMaXN0KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5nZXRUb3BpY0xpc3RcIix7Z3JvdXBJRDpzLHRvcGljSURMaXN0Om89W119PWUsaT0wPT09by5sZW5ndGgsbj1uZXcgQ24oXCJnZXRUb3BpY0xpc3RcIik7aWYobi5zZXRNZXNzYWdlKFwiZ3JvdXBJRDpcIitzKSx0aGlzLl9nZXRUb3BpY1RpbWVNYXAuaGFzKHMpKXtjb25zdHtpc0dldEFsbDplLHRpbWU6cn09dGhpcy5fZ2V0VG9waWNUaW1lTWFwLmdldChzKTtpZigoZXx8IWUmJiFpKSYmRGF0ZS5ub3coKS1yPDFlMyp0aGlzLlRPUElDX0NBQ0hFX1RJTUUpe2NvbnN0IGU9dGhpcy5fZ2V0TG9jYWxUb3BpY0xpc3QocyxvKTtpZihpfHxlLmxlbmd0aD09PW8ubGVuZ3RoKXJldHVybiBuLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TW9yZU1lc3NhZ2UoXCJmcm9tIGNhY2hlLCB0b3BpYyBjb3VudDpcIitlLmxlbmd0aCkuZW5kKCksX2UubChgJHt0fSBncm91cElEOiR7c30gZnJvbSBjYWNoZSwgdG9waWMgY291bnQ6JHtlLmxlbmd0aH1gKSx4bih7c3VjY2Vzc1RvcGljTGlzdDplLGZhaWx1cmVUb3BpY0xpc3Q6W119KX19cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOmppLHJlcXVlc3REYXRhOntncm91cElEOnMsdG9waWNJRExpc3Q6b319KS50aGVuKGU9Pntjb25zdHt0b3BpY0luZm9MaXN0Om89W119PWUuZGF0YSxyPVtdLGE9W10sdT1bXTtvLmZvckVhY2goZT0+e2NvbnN0e3RvcGljOnQsc2VsZkluZm86cyxlcnJvckNvZGU6byxlcnJvckluZm86aX09ZSx7dG9waWNJRDpufT10OzA9PT1vPyhyLnB1c2goey4uLnQsc2VsZkluZm86c30pLGEucHVzaChuKSk6dS5wdXNoKHt0b3BpY0lEOm4sY29kZTpvLG1lc3NhZ2U6aX0pfSksdGhpcy5fdXBkYXRlVG9waWNNYXAociksdGhpcy5faGFuZGxlVG9waWNBdEluZm8ocik7Y29uc3QgYz1gc3VjY2VzcyBjb3VudDoke2EubGVuZ3RofSwgZmFpbCBjb3VudDoke3UubGVuZ3RofWA7bi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwiXCIrYykuZW5kKCksX2UubChgJHt0fSBncm91cElEOiR7c30gZnJvbSByZW1vdGUsICR7Y31gKTtsZXQgbD1bXTtyZXR1cm4gTHQoYSl8fCh0aGlzLl9nZXRUb3BpY1RpbWVNYXAuc2V0KHMse3RpbWU6RGF0ZS5ub3coKSxpc0dldEFsbDppfSksbD10aGlzLl9nZXRMb2NhbFRvcGljTGlzdChzLGEpKSx3bih7c3VjY2Vzc1RvcGljTGlzdDpsLGZhaWx1cmVUb3BpY0xpc3Q6dX0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKGUpLnRoZW4oKFt0LHNdKT0+e24uc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1oYXNMb2NhbFRvcGljKGUsdCl7cmV0dXJuISF0aGlzLl90b3BpY01hcC5oYXMoZSkmJnRoaXMuX3RvcGljTWFwLmdldChlKS5oYXModCl9Z2V0TG9jYWxUb3BpYyhlLHQpe2xldCBzPW51bGw7cmV0dXJuIHRoaXMuX3RvcGljTWFwLmhhcyhlKSYmKHM9dGhpcy5fdG9waWNNYXAuZ2V0KGUpLmdldCh0KSksc31fZ2V0TG9jYWxUb3BpY0xpc3QoZSx0PVtdKXtjb25zdCBzPXRoaXMuX3RvcGljTWFwLmdldChlKTtsZXQgbz1bXTtyZXR1cm4gcyYmKG89Wy4uLnMudmFsdWVzKCldKSwwPT09dC5sZW5ndGg/bzpvLmZpbHRlcihlPT50LmluY2x1ZGVzKGUudG9waWNJRCkpfV9kZWxldGVMb2NhbFRvcGljKGUsdCl7dGhpcy5fdG9waWNNYXAuaGFzKGUpJiYodGhpcy5fdG9waWNNYXAuZ2V0KGUpLmRlbGV0ZSh0KSxfZS5sKGAke3RoaXMuX259Ll9kZWxldGVMb2NhbFRvcGljIGdyb3VwSUQ6JHtlfSB0b3BpY0lEOiR7dH1gKSl9X3VwZGF0ZVRvcGljTWFwKGUpe2NvbnN0IHM9W107aWYoZS5mb3JFYWNoKGU9Pntjb25zdHtncm91cElEOm8sdG9waWNJRDppfT1lO2xldCBuPW51bGw7dGhpcy5fdG9waWNNYXAuaGFzKG8pfHx0aGlzLl90b3BpY01hcC5zZXQobyxuZXcgTWFwKTt0aGlzLl90b3BpY01hcC5nZXQobykuaGFzKGkpPyhuPXRoaXMuX3RvcGljTWFwLmdldChvKS5nZXQoaSksbi51cGRhdGVUb3BpYyhlKSk6KHRoaXMuX2dldFRvcGljTGFzdE1lc3NhZ2UoZSksbj1uZXcga3IoZSx0aGlzLmlzSW50bCgpKSx0aGlzLl90b3BpY01hcC5nZXQobykuc2V0KGksbikpO2NvbnN0IHI9dGhpcy5fY29tcHV0ZVVucmVhZENvdW50KG4pO24udXBkYXRlVW5yZWFkQ291bnQocikscy5wdXNoKHtjb252ZXJzYXRpb25JRDpgJHt0LkNPTlZfR1JPVVB9JHtpfWAsdHlwZTp0LkNPTlZfVE9QSUMsdW5yZWFkQ291bnQ6cn0pfSkscy5sZW5ndGg+MCl7dGhpcy5nZXRNb2R1bGUoX3MpLnVwZGF0ZVRvcGljQ29udmVyc2F0aW9uKHMpfX1yZXNldEdldFRvcGljVGltZShlKXtpZighd2UoZSkpcmV0dXJuIHZvaWQgdGhpcy5fZ2V0VG9waWNUaW1lTWFwLnNldChlLDApO1suLi50aGlzLl9nZXRUb3BpY1RpbWVNYXAua2V5cygpXS5mb3JFYWNoKGU9Pnt0aGlzLl9nZXRUb3BpY1RpbWVNYXAuc2V0KGUsMCl9KX1nZXRUb3BpY0xpc3RPblJlY29ubmVjdGVkKCl7Y29uc3QgZT1bLi4udGhpcy5fdG9waWNNYXAua2V5cygpXSx0PVtdO2UuZm9yRWFjaChlPT57Y29uc3Qgcz1bXTt0aGlzLl9nZXRMb2NhbFRvcGljTGlzdChlKS5mb3JFYWNoKGU9Pntjb25zdHtsYXN0TWVzc2FnZTp7bGFzdFRpbWU6dD0wfX09ZTtEYXRlLm5vdygpLTFlMyp0PDFlMyp0aGlzLlRPUElDX0xBU1RfQUNUSVZFX1RJTUUmJnMucHVzaChlLnRvcGljSUQpfSkscy5sZW5ndGg+MCYmdC5wdXNoKHtncm91cElEOmUsdG9waWNJRExpc3Q6c30pfSksX2UubChgJHt0aGlzLl9ufS5nZXRUb3BpY0xpc3RPblJlY29ubmVjdGVkLiBhY3RpdmUgY29tbXVuaXR5IGNvdW50OiR7dC5sZW5ndGh9YCksdGhpcy5fcmVsYXlHZXRUb3BpY0xpc3QodCl9X3JlbGF5R2V0VG9waWNMaXN0KGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm47Y29uc3QgdD1lLnNoaWZ0KCkscz10LnRvcGljSURMaXN0Lmxlbmd0aD41P1widG9waWNJRExpc3QubGVuZ3RoOlwiK3QudG9waWNJRExpc3QubGVuZ3RoOlwidG9waWNJRExpc3Q6XCIrdC50b3BpY0lETGlzdCxvPW5ldyBDbihcInJlbGF5R2V0VG9waWNMaXN0XCIpO28uc2V0TWVzc2FnZShzKSxfZS5sKGAke3RoaXMuX259Ll9yZWxheUdldFRvcGljTGlzdC4gJHtzfWApLHRoaXMuZ2V0VG9waWNMaXN0KHQpLnRoZW4oKCk9PntvLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksdGhpcy5fcmVsYXlHZXRUb3BpY0xpc3QoZSl9KS5jYXRjaCh0PT57dGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbZSxzXSk9PntvLnNldEVycm9yKHQsZSxzKS5lbmQoKX0pLHRoaXMuX3JlbGF5R2V0VG9waWNMaXN0KGUpfSl9X2hhbmRsZVRvcGljQXRJbmZvKGUpezAhPT1lLmxlbmd0aCYmZS5mb3JFYWNoKGU9Pntjb25zdHtncm91cElEOnQsdG9waWNJRDpzLGdyb3VwQXRJbmZvTGlzdDpvfT1lLGk9W107aWYoIXdlKG8pKXtvLmZvckVhY2goZT0+e2kucHVzaCh7Li4uZSxncm91cElEOnQsdG9waWNJRDpzfSl9KTt0aGlzLmdldE1vZHVsZShfcykub25OZXdHcm91cEF0VGlwcyh7ZGF0YUxpc3Q6aX0pfX0pfV9nZXRUb3BpY0xhc3RNZXNzYWdlKGUpe2lmKCF3ZShlLmxhc3RNc2cpKXtjb25zdCB0PXt0aW1lOmUubGFzdE1zZy50aW1lLHNlcXVlbmNlOmUubGFzdE1zZy5zZXF1ZW5jZSxmcm9tOmUubGFzdE1zZy5mcm9tLHBheWxvYWQ6ZS5sYXN0TXNnLmVsZW1lbnRzWzBdP2UubGFzdE1zZy5lbGVtZW50c1swXS5jb250ZW50Om51bGwsdHlwZTplLmxhc3RNc2cuZWxlbWVudHNbMF0/ZS5sYXN0TXNnLmVsZW1lbnRzWzBdLnR5cGU6XCJcIixuaWNrOmUubGFzdE1zZy5uaWNrLHZlcnNpb246ZS5sYXN0TXNnLm1lc3NhZ2VWZXJzaW9uLGNsb3VkQ3VzdG9tRGF0YTplLmxhc3RNc2cuY2xvdWRDdXN0b21EYXRhLGlzUmV2b2tlZDoyPT09ZS5sYXN0TXNnLmlzUGxhY2VNZXNzYWdlLHJldm9rZXI6THQoZS5sYXN0TXNnLnJldm9rZXJJbmZvKT9udWxsOmUubGFzdE1zZy5yZXZva2VySW5mby5yZXZva2VyfTtlLmxhc3RNZXNzYWdlPXR9fWRlbGV0ZVRvcGljTGlzdEluQ29tbXVuaXR5KGUpe2NvbnN0IHM9dGhpcy5fZ2V0TG9jYWxUb3BpY0xpc3QoZSksbz10aGlzLmdldE1vZHVsZShfcyk7cy5mb3JFYWNoKHM9Pntjb25zdHt0b3BpY0lEOml9PXM7dGhpcy5fZGVsZXRlTG9jYWxUb3BpYyhlLGkpLHRoaXMuX2dldFRvcGljVGltZU1hcC5kZWxldGUoZSksby5kZWxldGVMb2NhbENvbnZlcnNhdGlvbihgJHt0LkNPTlZfR1JPVVB9JHtpfWApfSl9X2NvbXB1dGVVbnJlYWRDb3VudChlKXtjb25zdHtleGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdDp0LHJlYWRlZFNlcXVlbmNlOnN9PWUuc2VsZkluZm87bGV0IG89ZS5uZXh0TWVzc2FnZVNlcS1lLnNlbGZJbmZvLnJlYWRlZFNlcXVlbmNlLTE7aWYoYmUodCkpe2xldCBpPTA7dC5mb3JFYWNoKHQ9Pnt0Pj1zJiZ0PD1lLm5leHRNZXNzYWdlU2VxLTEmJihpKz0xKX0pLGk+PTEmJihvLT1pKX1yZXR1cm4gbzwwPzA6b31fZmlsdGVyUHJvZmFuaXR5KGUsdCl7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShVcyk7aWYoIXMpcmV0dXJuITA7Y29uc3R7aXNBbGxvd2VkVG9TZW5kOm8sbW9kaWZpZWRUZXh0Oml9PXMuZmlsdGVyVGV4dCh0W2VdLEUpO3JldHVybiEwPT09byYmKHRbZV09aSwhMCl9dXBkYXRlTGFzdE1lc3NhZ2UodCxzKXtjb25zdCBvPWZ0KHQpLGk9dGhpcy5nZXRMb2NhbFRvcGljKG8sdCk7aWYoaSl7Y29uc3QgdD1zLnNlcXVlbmNlKzE7aS51cGRhdGVOZXh0TWVzc2FnZVNlcSh0KSxpLnVwZGF0ZUxhc3RNZXNzYWdlKHMpLHRoaXMuZW1pdE91dGVyRXZlbnQoZS5UT1BJQ19VUERBVEVELHtncm91cElEOm8sdG9waWM6aX0pfX1nZXRNZXNzYWdlRXh0ZW5zaW9ucyhlLHQpe19lLmwoYCR7dGhpcy5fbn0uZ2V0TWVzc2FnZUV4dGVuc2lvbnMgc3RhcnRTZXF1ZW5jZToke3R9YCk7Y29uc3Qgcz1mdChlLnRvKTtyZXR1cm4gdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6TWkscmVxdWVzdERhdGE6e2dyb3VwSUQ6cyx0b3BpY0lEOmUudG8sbWVzc2FnZVNlcXVlbmNlOmUuc2VxdWVuY2Usc3RhcnRTZXF1ZW5jZTp0fX0pfW1vZGlmeU1lc3NhZ2VFeHRlbnNpb25zKGUsdCxzPTEpe19lLmwoYCR7dGhpcy5fbn0ubW9kaWZ5TWVzc2FnZUV4dGVuc2lvbnMgb3BlcmF0ZVR5cGU6JHtzfWApO2NvbnN0IG89ZnQoZS50byk7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm1pLHJlcXVlc3REYXRhOntncm91cElEOm8sdG9waWNJRDplLnRvLG1lc3NhZ2VTZXF1ZW5jZTplLnNlcXVlbmNlLGV4dGVuc2lvbkxpc3Q6dCxvcGVyYXRlVHlwZTpzfX0pfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLHRoaXMuX3RvcGljTWFwLmNsZWFyKCksdGhpcy5fZ2V0VG9waWNUaW1lTWFwLmNsZWFyKCksdGhpcy5UT1BJQ19DQUNIRV9USU1FPTMwMCx0aGlzLlRPUElDX0xBU1RfQUNUSVZFX1RJTUU9MzYwMH19Y2xhc3MgYnJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fdXNlck1vZHVsZT1lLHRoaXMuX249XCJQcm9maWxlSGFuZGxlclwiLHRoaXMuVEFHPVwicHJvZmlsZVwiLHRoaXMuYWNjb3VudFByb2ZpbGVNYXA9bmV3IE1hcCx0aGlzLmV4cGlyYXRpb25UaW1lPTg2NGU1fXNldEV4cGlyYXRpb25UaW1lKGUpe3RoaXMuZXhwaXJhdGlvblRpbWU9ZX1nZXRVc2VyUHJvZmlsZShlKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0VXNlclByb2ZpbGVcIixzPWUudXNlcklETGlzdDtlLmZyb21BY2NvdW50PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkscy5sZW5ndGg+MTAwJiYoX2UudyhgJHt0fSAke0R0KDEwMCl9YCkscy5sZW5ndGg9MTAwKTtjb25zdCBvPVtdLGk9W107bGV0IG47Zm9yKGxldCBjPTAsbD1zLmxlbmd0aDtjPGw7YysrKW49c1tjXSx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQobikmJnRoaXMuX2NvbnRhaW5zKG4pP2kucHVzaCh0aGlzLl9nZXRQcm9maWxlRnJvbU1hcChuKSk6by5wdXNoKG4pO2lmKDA9PT1vLmxlbmd0aClyZXR1cm4geG4oaSk7ZS50b0FjY291bnQ9bztjb25zdCByPWUuYkZyb21HZXRNeVByb2ZpbGV8fCExLGE9W107ZS50b0FjY291bnQuZm9yRWFjaChlPT57YS5wdXNoKHt0b0FjY291bnQ6ZSxzdGFuZGFyZFNlcXVlbmNlOjAsY3VzdG9tU2VxdWVuY2U6MH0pfSksZS51c2VySXRlbT1hO2NvbnN0IHU9bmV3IENuKFwiZ2V0VXNlclByb2ZpbGVcIik7dS5zZXRNZXNzYWdlKHMubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIitzLmxlbmd0aDpcInVzZXJJRExpc3Q6XCIrcyk7cmV0dXJuIHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOllzLHJlcXVlc3REYXRhOmV9KS50aGVuKGU9Pnt1LnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UuaSh0K1wiIG9rXCIpO2NvbnN0IHM9dGhpcy5faGFuZGxlUmVzcG9uc2UoZSkuY29uY2F0KGkpO3JldHVybiB3bihyP3NbMF06cyl9KS5jYXRjaChlPT4odGhpcy5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9Pnt1LnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9Z2V0TXlQcm9maWxlKCl7Y29uc3QgZT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLHQ9dGhpcy5fbitcIi5nZXRNeVByb2ZpbGVcIjtpZihfZS5sKGAke3R9IG15QWNjb3VudDoke2V9YCksdGhpcy5fZmlsbCgpLHRoaXMuX2NvbnRhaW5zKGUpKXtjb25zdCBzPXRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKGUpO3JldHVybiBfZS5kKGAke3R9IGZyb20gY2FjaGUsIG15UHJvZmlsZToke0pTT04uc3RyaW5naWZ5KHMpfWApLHhuKHMpfXJldHVybiB0aGlzLmdldFVzZXJQcm9maWxlKHtmcm9tQWNjb3VudDplLHVzZXJJRExpc3Q6W2VdLGJGcm9tR2V0TXlQcm9maWxlOiEwfSl9X2hhbmRsZVJlc3BvbnNlKGUpe2NvbnN0e3VzZXJQcm9maWxlSXRlbTp0fT1lLmRhdGE7aWYoIWJlKHQpKXJldHVybltdO2NvbnN0IHM9W10sbz1EYXRlLm5vdygpO2ZvcihsZXQgaT0wLG49dC5sZW5ndGg7aTxuO2krKyl7Y29uc3R7dG86ZSxwcm9maWxlSXRlbTpvfT10W2ldO2lmKFwiQFRMUyNOT1RfRk9VTkRcIj09PWV8fFwiXCI9PT1lKWNvbnRpbnVlO2NvbnN0e2xhdGVzdFByb2ZpbGU6bn09dGhpcy5fdXBkYXRlKGUsdGhpcy5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZShlLG8pKTtzLnB1c2gobil9cmV0dXJuIF9lLmwoYCR7dGhpcy5fbn0uX2hhbmRsZVJlc3BvbnNlIGNvc3QgJHtEYXRlLm5vdygpLW99IG1zYCksc31fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZShlLHQpe2NvbnN0IHM9e3VzZXJJRDplLHByb2ZpbGVDdXN0b21GaWVsZDpbXX07aWYoIUx0KHQpKWZvcihsZXQgbz0wLGk9dC5sZW5ndGg7bzxpO28rKylpZih0W29dLnRhZy5pbmRleE9mKFwiVGFnX1Byb2ZpbGVfQ3VzdG9tXCIpPi0xKXMucHJvZmlsZUN1c3RvbUZpZWxkLnB1c2goe2tleTp0W29dLnRhZyx2YWx1ZTp0W29dLnZhbHVlfSk7ZWxzZSBzd2l0Y2godFtvXS50YWcpe2Nhc2UgTWUuTklDSzpzLm5pY2s9dFtvXS52YWx1ZTticmVhaztjYXNlIE1lLkdFTkRFUjpzLmdlbmRlcj10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuQklSVEhEQVk6cy5iaXJ0aGRheT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuTE9DQVRJT046cy5sb2NhdGlvbj10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuU0VMRlNJR05BVFVSRTpzLnNlbGZTaWduYXR1cmU9dFtvXS52YWx1ZTticmVhaztjYXNlIE1lLkFMTE9XVFlQRTpzLmFsbG93VHlwZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuTEFOR1VBR0U6cy5sYW5ndWFnZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuQVZBVEFSOnMuYXZhdGFyPXRbb10udmFsdWU7YnJlYWs7Y2FzZSBNZS5NRVNTQUdFU0VUVElOR1M6cy5tZXNzYWdlU2V0dGluZ3M9dFtvXS52YWx1ZTticmVhaztjYXNlIE1lLkFETUlORk9SQklEVFlQRTpzLmFkbWluRm9yYmlkVHlwZT10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuTEVWRUw6cy5sZXZlbD10W29dLnZhbHVlO2JyZWFrO2Nhc2UgTWUuUk9MRTpzLnJvbGU9dFtvXS52YWx1ZTticmVhaztkZWZhdWx0Ol9lLncodGhpcy5fbitcIi5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZSB1bmtub3duIHRhZzpcIix0W29dLnRhZyx0W29dLnZhbHVlKX1yZXR1cm4gc311cGRhdGVNeVByb2ZpbGUodCl7Y29uc3Qgcz10aGlzLl9uK1wiLnVwZGF0ZU15UHJvZmlsZVwiO2lmKHQubmljayYmITE9PT10aGlzLl91c2VyTW9kdWxlLmZpbHRlclByb2Zhbml0eShcIm5pY2tcIix0KSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7aWYodC5zZWxmU2lnbmF0dXJlJiYhMT09PXRoaXMuX3VzZXJNb2R1bGUuZmlsdGVyUHJvZmFuaXR5KFwic2VsZlNpZ25hdHVyZVwiLHQpKXJldHVybiBWbih7Y29kZTpubi5QUk9GQU5JVFlfRk9VTkR9KTtjb25zdCBvPW5ldyBDbihcInVwZGF0ZU15UHJvZmlsZVwiKTtvLnNldE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkodCkpO2NvbnN0IGk9KG5ldyB0cikudmFsaWRhdGUodCk7aWYoIWkudmFsaWQpcmV0dXJuIG8uc2V0Q29kZShubi5VUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNKS5zZXRNb3JlTWVzc2FnZShcImluZm86XCIraS50aXBzKS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmUoYCR7c30gaW5mbzoke2kudGlwc31gKSxWbih7Y29kZTpubi5VUERBVEVfUFJPRklMRV9JTlZBTElEX1BBUkFNfSk7Y29uc3Qgbj1bXTtmb3IoY29uc3QgZSBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpJiYoXCJwcm9maWxlQ3VzdG9tRmllbGRcIj09PWU/dC5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaChlPT57bi5wdXNoKHt0YWc6ZS5rZXksdmFsdWU6ZS52YWx1ZX0pfSk6bi5wdXNoKHt0YWc6TWVbZS50b1VwcGVyQ2FzZSgpXSx2YWx1ZTp0W2VdfSkpO2lmKDA9PT1uLmxlbmd0aCl7Y29uc3QgZT1uZXcgRm4oe2NvZGU6bm4uVVBEQVRFX1BST0ZJTEVfTk9fS0VZfSk7cmV0dXJuIG8uc2V0RXJyb3IoZSwhMCx0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpfWNvbnN0IHI9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKTtyZXR1cm4gdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6anMscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnIscHJvZmlsZUl0ZW06bn19KS50aGVuKGk9PntvLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UuaShzK1wiIG9rXCIpO2NvbnN0e2lzUHJvZmlsZVVwZGF0ZWQ6bixsYXRlc3RQcm9maWxlOmF9PXRoaXMuX3VwZGF0ZShyLHQpO3JldHVybiEwPT09biYmdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLlBST0ZJTEVfVVBEQVRFRCxbYV0pLHhuKGEpfSkuY2F0Y2goZT0+KHRoaXMuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfW9uUHJvZmlsZU1vZGlmaWVkKHQpe2NvbnN0IHM9dC5kYXRhTGlzdDtpZihMdChzKSlyZXR1cm47Y29uc3Qgbz1zLmxlbmd0aDtsZXQgaTtfZS5kKGAke3RoaXMuX259Lm9uUHJvZmlsZU1vZGlmaWVkIGNvdW50OiR7b30gZGF0YUxpc3Q6YCx0LmRhdGFMaXN0KTtjb25zdCBuPVtdO2ZvcihsZXQgZT0wO2U8bztlKyspe2k9c1tlXS51c2VySUQ7Y29uc3R7aXNQcm9maWxlVXBkYXRlZDp0LGxhdGVzdFByb2ZpbGU6b309dGhpcy5fdXBkYXRlKGksdGhpcy5fZ2V0TGF0ZXN0UHJvZmlsZUZyb21SZXNwb25zZShpLHNbZV0ucHJvZmlsZUxpc3QpKTshMD09PXQmJm4ucHVzaChvKX1uLmxlbmd0aD4wJiYodGhpcy5fdXNlck1vZHVsZS5lbWl0SW5uZXJFdmVudChZbixuKSx0aGlzLl91c2VyTW9kdWxlLmVtaXRPdXRlckV2ZW50KGUuUFJPRklMRV9VUERBVEVELG4pKX1fZmlsbCgpe2lmKDA9PT10aGlzLmFjY291bnRQcm9maWxlTWFwLnNpemUpe2NvbnN0IGU9dGhpcy5fZ2V0Q2FjaGVkUHJvZmlsZXMoKSx0PURhdGUubm93KCk7Zm9yKGxldCBzPTAsbz1lLmxlbmd0aDtzPG87cysrKXQtZVtzXS5sYXN0VXBkYXRlZFRpbWU8dGhpcy5leHBpcmF0aW9uVGltZSYmdGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zZXQoZVtzXS51c2VySUQsZVtzXSk7X2UubChgJHt0aGlzLl9ufS5fZmlsbCBmcm9tIGNhY2hlLCBzaXplOiR7dGhpcy5hY2NvdW50UHJvZmlsZU1hcC5zaXplfWApfX1fdXBkYXRlKGUsdCl7bGV0IHMsbz0hMTtjb25zdCBpPURhdGUubm93KCk7aWYodGhpcy5fY29udGFpbnMoZSkpe3M9dGhpcy5fZ2V0UHJvZmlsZUZyb21NYXAoZSksdC5wcm9maWxlQ3VzdG9tRmllbGQmJiEwPT09UWUocy5wcm9maWxlQ3VzdG9tRmllbGQsdC5wcm9maWxlQ3VzdG9tRmllbGQpJiYocy5sYXN0VXBkYXRlZFRpbWU9aSxvPSEwKTtCZShzLHQsW1wicHJvZmlsZUN1c3RvbUZpZWxkXCJdKT4wJiYocy5sYXN0VXBkYXRlZFRpbWU9aSxvPSEwKX1lbHNlIHM9bmV3IHRyKHQpLCh0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQoZSl8fGU9PT10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpKSYmKHMubGFzdFVwZGF0ZWRUaW1lPWksbz0hMCx0aGlzLmFjY291bnRQcm9maWxlTWFwLnNldChlLHMpKTtyZXR1cm4gdGhpcy5fZmx1c2goZT09PXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCkpLF9lLmwoYCR7dGhpcy5fbn0uX3VwZGF0ZSBhY2NvdW50OiR7ZX0gaXNQcm9maWxlVXBkYXRlZDoke299YCkse2lzUHJvZmlsZVVwZGF0ZWQ6byxsYXRlc3RQcm9maWxlOnN9fV9mbHVzaChlKXtjb25zdCB0PVsuLi50aGlzLmFjY291bnRQcm9maWxlTWFwLnZhbHVlcygpXSxzPXRoaXMuX3VzZXJNb2R1bGUuZ2V0U3RvcmFnZU1vZHVsZSgpO19lLmQoYCR7dGhpcy5fbn0uX2ZsdXNoIGxlbmd0aDoke3QubGVuZ3RofSBmbHVzaEF0T25jZToke2V9YCkscy5zZXRJdGVtKHRoaXMuVEFHLHQsZSl9X2NvbnRhaW5zKGUpe3JldHVybiB0aGlzLmFjY291bnRQcm9maWxlTWFwLmhhcyhlKX1fZ2V0UHJvZmlsZUZyb21NYXAoZSl7cmV0dXJuIHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuZ2V0KGUpfV9nZXRDYWNoZWRQcm9maWxlcygpe2NvbnN0IGU9dGhpcy5fdXNlck1vZHVsZS5nZXRTdG9yYWdlTW9kdWxlKCkuZ2V0SXRlbSh0aGlzLlRBRyk7cmV0dXJuIEx0KGUpP1tdOmV9b25Db252ZXJzYXRpb25zUHJvZmlsZVVwZGF0ZWQoZSl7bGV0IHQscztjb25zdCBvPVtdO2xldCBpO2ZvcihsZXQgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0PWVbbl0scz10LnVzZXJJRCx0aGlzLl91c2VyTW9kdWxlLmlzTXlGcmllbmQocykmJih0aGlzLl9jb250YWlucyhzKT8oaT10aGlzLl9nZXRQcm9maWxlRnJvbU1hcChzKSxCZShpLHQpPjAmJm8ucHVzaChzKSk6by5wdXNoKHQudXNlcklEKSk7MCE9PW8ubGVuZ3RoJiYoX2UuaShgJHt0aGlzLl9ufS5vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZCB0b0FjY291bnRMaXN0OiR7b31gKSx0aGlzLmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0Om99KSl9Z2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKGUpe2lmKHRoaXMuX2NvbnRhaW5zKGUpKXtjb25zdCB0PXRoaXMuX2dldFByb2ZpbGVGcm9tTWFwKGUpO3JldHVybntuaWNrOnQubmljayxhdmF0YXI6dC5hdmF0YXJ9fXJldHVybntuaWNrOlwiXCIsYXZhdGFyOlwiXCJ9fXJlc2V0KCl7dGhpcy5fZmx1c2goITApLHRoaXMuYWNjb3VudFByb2ZpbGVNYXAuY2xlYXIoKX19Y2xhc3Mgd3J7Y29uc3RydWN0b3IoZSl7THR8fCh0aGlzLnVzZXJJRD1lLnVzZXJJRHx8XCJcIix0aGlzLnRpbWVTdGFtcD1lLnRpbWVTdGFtcHx8MCl9fWNsYXNzIEZye2NvbnN0cnVjdG9yKGUpe3RoaXMuX3VzZXJNb2R1bGU9ZSx0aGlzLl9uPVwiQmxhY2tsaXN0SGFuZGxlclwiLHRoaXMuX2JsYWNrbGlzdE1hcD1uZXcgTWFwLHRoaXMuc3RhcnRJbmRleD0wLHRoaXMubWF4TGltaXRlZD0xMDAsdGhpcy5jdXJyZW50U2VxdWVuY2U9MH1nZXRMb2NhbEJsYWNrbGlzdCgpe3JldHVyblsuLi50aGlzLl9ibGFja2xpc3RNYXAua2V5cygpXX1nZXRCbGFja2xpc3QoKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0QmxhY2tsaXN0XCIscz17ZnJvbUFjY291bnQ6dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxtYXhMaW1pdGVkOnRoaXMubWF4TGltaXRlZCxzdGFydEluZGV4OjAsbGFzdFNlcXVlbmNlOnRoaXMuY3VycmVudFNlcXVlbmNlfSxvPW5ldyBDbihcImdldEJsYWNrbGlzdFwiKTtyZXR1cm4gdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6enMscmVxdWVzdERhdGE6c30pLnRoZW4ocz0+e2NvbnN0e2JsYWNrTGlzdEl0ZW06aSxjdXJyZW50U2VxdWVuY2U6bn09cy5kYXRhLHI9THQoaSk/MDppLmxlbmd0aDtvLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImNvdW50OlwiK3IpLmVuZCgpLF9lLmkodCtcIiBva1wiKSx0aGlzLmN1cnJlbnRTZXF1ZW5jZT1uLHRoaXMuX2hhbmRsZVJlc3BvbnNlKGksITApLHRoaXMuX3VzZXJNb2R1bGUuZW1pdE91dGVyRXZlbnQoZS5CTEFDS0xJU1RfVVBEQVRFRCxbLi4udGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKV0pfSkuY2F0Y2goZT0+KHRoaXMuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWFkZEJsYWNrbGlzdChlKXtjb25zdCB0PW5ldyBDbihcImFkZFRvQmxhY2tsaXN0XCIpLHM9dGhpcy5fbitcIi5hZGRCbGFja2xpc3RcIixvPXRoaXMuX3VzZXJNb2R1bGUuZ2V0TXlBY2NvdW50KCk7aWYoMT09PWUudXNlcklETGlzdC5sZW5ndGgmJmUudXNlcklETGlzdFswXT09PW8pe2NvbnN0IGU9bm4uQ0FOTk9UX0FERF9TRUxGX1RPX0JMQUNLTElTVCxvPXRoaXMuX3VzZXJNb2R1bGUuZ2V0RXJyb3JNZXNzYWdlKGUpO3Quc2V0Q29kZShlKS5zZXRNZXNzYWdlKG8pLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7Y29uc3QgaT1uZXcgRm4oe2NvZGU6ZX0pO3JldHVybiBfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixpKSxWbihpKX1lLnVzZXJJRExpc3QuaW5jbHVkZXMobykmJihlLnVzZXJJRExpc3Q9ZS51c2VySURMaXN0LmZpbHRlcihlPT5lIT09bykpLGUuZnJvbUFjY291bnQ9dGhpcy5fdXNlck1vZHVsZS5nZXRNeUFjY291bnQoKSxlLnRvQWNjb3VudD1lLnVzZXJJRExpc3Q7cmV0dXJuIHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkpzLHJlcXVlc3REYXRhOmV9KS50aGVuKG89Pih0LnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShlLnVzZXJJRExpc3QubGVuZ3RoPjU/XCJ1c2VySURMaXN0Lmxlbmd0aDpcIitlLnVzZXJJRExpc3QubGVuZ3RoOlwidXNlcklETGlzdDpcIitlLnVzZXJJRExpc3QpLmVuZCgpLF9lLmkocytcIiBva1wiKSx0aGlzLl9oYW5kbGVSZXNwb25zZShvLnJlc3VsdEl0ZW0sITApLHduKFsuLi50aGlzLl9ibGFja2xpc3RNYXAua2V5cygpXSkpKS5jYXRjaChlPT4odGhpcy5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbcyxvXSk9Pnt0LnNldEVycm9yKGUscyxvKS5lbmQoKX0pLF9lLmUocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9X2hhbmRsZVJlc3BvbnNlKGUsdCl7aWYoIUx0KGUpKXtsZXQgcyxvLGk7Zm9yKGxldCBuPTAscj1lLmxlbmd0aDtuPHI7bisrKW89ZVtuXS50byxpPWVbbl0ucmVzdWx0Q29kZSwod2UoaSl8fDA9PT1pKSYmKHQ/KHM9dGhpcy5fYmxhY2tsaXN0TWFwLmhhcyhvKT90aGlzLl9ibGFja2xpc3RNYXAuZ2V0KG8pOm5ldyB3cixzLnVzZXJJRD1vLCFMdChlW25dLmFkZEJsYWNrVGltZVN0YW1wKSYmKHMudGltZVN0YW1wPWVbbl0uYWRkQmxhY2tUaW1lU3RhbXApLHRoaXMuX2JsYWNrbGlzdE1hcC5zZXQobyxzKSk6dGhpcy5fYmxhY2tsaXN0TWFwLmhhcyhvKSYmKHM9dGhpcy5fYmxhY2tsaXN0TWFwLmdldChvKSx0aGlzLl9ibGFja2xpc3RNYXAuZGVsZXRlKG8pKSl9X2UubChgJHt0aGlzLl9ufS5faGFuZGxlUmVzcG9uc2UgdG90YWw6JHt0aGlzLl9ibGFja2xpc3RNYXAuc2l6ZX0gYkFkZDoke3R9YCl9ZGVsZXRlQmxhY2tsaXN0KGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5kZWxldGVCbGFja2xpc3RcIixzPW5ldyBDbihcInJlbW92ZUZyb21CbGFja2xpc3RcIik7ZS5mcm9tQWNjb3VudD10aGlzLl91c2VyTW9kdWxlLmdldE15QWNjb3VudCgpLGUudG9BY2NvdW50PWUudXNlcklETGlzdDtyZXR1cm4gdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6WHMscmVxdWVzdERhdGE6ZX0pLnRoZW4obz0+KHMuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGUudXNlcklETGlzdC5sZW5ndGg+NT9cInVzZXJJRExpc3QubGVuZ3RoOlwiK2UudXNlcklETGlzdC5sZW5ndGg6XCJ1c2VySURMaXN0OlwiK2UudXNlcklETGlzdCkuZW5kKCksX2UuaSh0K1wiIG9rXCIpLHRoaXMuX2hhbmRsZVJlc3BvbnNlKG8uZGF0YS5yZXN1bHRJdGVtLCExKSx3bihbLi4udGhpcy5fYmxhY2tsaXN0TWFwLmtleXMoKV0pKSkuY2F0Y2goZT0+KHRoaXMuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsb10pPT57cy5zZXRFcnJvcihlLHQsbykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfW9uQWNjb3VudERlbGV0ZWQodCl7Y29uc3Qgcz1bXTtsZXQgbztmb3IobGV0IGU9MCxpPXQubGVuZ3RoO2U8aTtlKyspbz10W2VdLHRoaXMuX2JsYWNrbGlzdE1hcC5oYXMobykmJih0aGlzLl9ibGFja2xpc3RNYXAuZGVsZXRlKG8pLHMucHVzaChvKSk7cy5sZW5ndGg+MCYmKF9lLmwoYCR7dGhpcy5fbn0ub25BY2NvdW50RGVsZXRlZCBjb3VudDoke3MubGVuZ3RofSB1c2VySURMaXN0OmAscyksdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkJMQUNLTElTVF9VUERBVEVELFsuLi50aGlzLl9ibGFja2xpc3RNYXAua2V5cygpXSkpfW9uQWNjb3VudEFkZGVkKHQpe2NvbnN0IHM9W107bGV0IG87Zm9yKGxldCBlPTAsaT10Lmxlbmd0aDtlPGk7ZSsrKW89dFtlXSx0aGlzLl9ibGFja2xpc3RNYXAuaGFzKG8pfHwodGhpcy5fYmxhY2tsaXN0TWFwLnNldChvLG5ldyB3cih7dXNlcklEOm99KSkscy5wdXNoKG8pKTtzLmxlbmd0aD4wJiYoX2UubChgJHt0aGlzLl9ufS5vbkFjY291bnRBZGRlZCBjb3VudDoke3MubGVuZ3RofSB1c2VySURMaXN0OmAscyksdGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkJMQUNLTElTVF9VUERBVEVELFsuLi50aGlzLl9ibGFja2xpc3RNYXAua2V5cygpXSkpfXJlc2V0KCl7dGhpcy5fYmxhY2tsaXN0TWFwLmNsZWFyKCksdGhpcy5zdGFydEluZGV4PTAsdGhpcy5tYXhMaW1pdGVkPTEwMCx0aGlzLmN1cnJlbnRTZXF1ZW5jZT0wfX1jb25zdCAkcj1mdW5jdGlvbihlKXtjb25zdCB0PVN0cmluZyhlKS5yZXBsYWNlKC9bPV0rJC8sXCJcIik7bGV0IHM9XCJcIjtpZih0Lmxlbmd0aCU0PT0xKXJldHVyblwiXCI7Zm9yKGxldCBpLG4scj0wLGE9MDtuPXQuY2hhckF0KGErKyk7fm4mJihpPXIlND82NCppK246bixyKyslNCk/cys9U3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmaT4+KC0yKnImNikpOjApbj1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuaW5kZXhPZihuKTt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUocykpfWNhdGNoKG8pe3JldHVyblwiXCJ9fTtjbGFzcyBxcntjb25zdHJ1Y3RvcihlKXt0aGlzLl91c2VyTW9kdWxlPWUsdGhpcy5fbj1cIlVzZXJTdGF0dXNIYW5kbGVyXCIsdGhpcy5NQVhfUVVFUllfVVNFUl9DT1VOVD01MDAsdGhpcy5NQVhfU1VCU0NSSUJFX1VTRVJfQ09VTlQ9MTAwLHRoaXMuTUFYX1VOU1VCU0NSSUJFX1VTRVJfQ09VTlQ9MTAwO3RoaXMuX3VzZXJNb2R1bGUuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihXbix0aGlzLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCx0aGlzKX1fb25DbG91ZENvbmZpZ1VwZGF0ZWQoKXtjb25zdCBlPXRoaXMuX3VzZXJNb2R1bGUuZ2V0Q2xvdWRDb25maWcoXCJzdGF0dXNfcXVlcnlfY291bnRcIiksdD10aGlzLl91c2VyTW9kdWxlLmdldENsb3VkQ29uZmlnKFwic3RhdHVzX3N1Yl9jb3VudFwiKSxzPXRoaXMuX3VzZXJNb2R1bGUuZ2V0Q2xvdWRDb25maWcoXCJzdGF0dXNfdW5zdWJfY291bnRcIik7X2UubChgJHt0aGlzLl9ufS5fb25DbG91ZENvbmZpZ1VwZGF0ZWQgc3RhdHVzUXVlcnlDb3VudDoke2V9IHN0YXR1c1N1YnNjcmliZUNvdW50OiR7dH0gc3RhdHVzVW5zdWJzY3JpYmVDb3VudDpgK3MpLHdlKGUpfHwodGhpcy5NQVhfUVVFUllfVVNFUl9DT1VOVD1wYXJzZUludChlLDEwKSksd2UoZSl8fCh0aGlzLk1BWF9TVUJTQ1JJQkVfVVNFUl9DT1VOVD1wYXJzZUludCh0LDEwKSksd2UoZSl8fCh0aGlzLk1BWF9VTlNVQlNDUklCRV9VU0VSX0NPVU5UPXBhcnNlSW50KHMsMTApKX1vblVzZXJTdGF0dXNVcGRhdGVkKHQpe2NvbnN0e2RhdGFMaXN0OnN9PXQsbz10aGlzLl91c2VyTW9kdWxlLmdldE15VXNlcklEKCksaT10aGlzLl91c2VyTW9kdWxlLmdldE1vZHVsZShtcyksbj1zLm1hcChlPT57Y29uc3R7dG86dCxzdGF0dXNUeXBlOnMsY3VzdG9tU3RhdHVzOm59PWUscj0kcihuKTtyZXR1cm4gdD09PW8mJmkuc2V0Q3VzdG9tU3RhdHVzKHIpLHt1c2VySUQ6dCxzdGF0dXNUeXBlOnMsY3VzdG9tU3RhdHVzOnJ9fSk7dGhpcy5fdXNlck1vZHVsZS5lbWl0T3V0ZXJFdmVudChlLlVTRVJfU1RBVFVTX1VQREFURUQsbil9c2V0U2VsZlN0YXR1cyhlKXtjb25zdCB0PXRoaXMuX24rXCIuc2V0U2VsZlN0YXR1c1wiO2lmKCExPT09dGhpcy5fdXNlck1vZHVsZS5maWx0ZXJQcm9mYW5pdHkoXCJjdXN0b21TdGF0dXNcIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7Y29uc3Qgcz1uZXcgQ24oXCJzZXRTZWxmU3RhdHVzXCIpLHtjdXN0b21TdGF0dXM6b309ZTtyZXR1cm4gdGhpcy5fdXNlck1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6emkscmVxdWVzdERhdGE6e2N1c3RvbVN0YXR1czpvfX0pLnRoZW4oZT0+e3Muc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKFwiY3VzdG9tU3RhdHVzOlwiK28pLmVuZCgpLF9lLmwoYCR7dH0gb2suIGN1c3RvbVN0YXR1czoke299YCk7cmV0dXJuIHRoaXMuX3VzZXJNb2R1bGUuZ2V0TW9kdWxlKG1zKS5zZXRDdXN0b21TdGF0dXMobyksd24oe3VzZXJJRDp0aGlzLl91c2VyTW9kdWxlLmdldE15VXNlcklEKCksc3RhdHVzVHlwZToxLGN1c3RvbVN0YXR1czpvfSl9KS5jYXRjaChlPT4odGhpcy5fdXNlck1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxvXSk9PntzLnNldEVycm9yKGUsdCxvKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9Z2V0VXNlclN0YXR1cyhlKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0VXNlclN0YXR1c1wiLHt1c2VySURMaXN0OnM9W119PWUsbz10aGlzLl91c2VyTW9kdWxlLmdldE15VXNlcklEKCk7bGV0IGk9Wy4uLnNdLG49dm9pZCAwO2NvbnN0IHI9aS5pbmRleE9mKG8pO2lmKHI+LTEpe2kuc3BsaWNlKHIsMSk7Y29uc3QgZT10aGlzLl91c2VyTW9kdWxlLmdldE1vZHVsZShtcykuZ2V0Q3VzdG9tU3RhdHVzKCk7bj17dXNlcklEOm8sc3RhdHVzVHlwZToxLGN1c3RvbVN0YXR1czplfX1pZigwPT09aS5sZW5ndGgpcmV0dXJuIHhuKHtzdWNjZXNzVXNlckxpc3Q6W25dLGZhaWx1cmVVc2VyTGlzdDpbXX0pO2lmKCF0aGlzLl91c2VyTW9kdWxlLmNhbklVc2UoTS5VU0VSX1NUQVRVUykpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9VU0VfQ09NTUVSQ0lBTF9BQklMSVRZfSk7aS5sZW5ndGg+dGhpcy5NQVhfUVVFUllfVVNFUl9DT1VOVCYmKF9lLncoYCR7dH0gJHtEdCh0aGlzLk1BWF9RVUVSWV9VU0VSX0NPVU5UKX1gKSxpPXMuc2xpY2UoMCx0aGlzLk1BWF9RVUVSWV9VU0VSX0NPVU5UKSk7Y29uc3QgYT1uZXcgQ24oXCJnZXRVc2VyU3RhdHVzXCIpO3JldHVybiB0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpKaSxyZXF1ZXN0RGF0YTp7dXNlcklETGlzdDppfX0pLnRoZW4oZT0+e2NvbnN0e3N1Y2Nlc3NVc2VyTGlzdDpvPVtdLGZhaWx1cmVVc2VyTGlzdDppPVtdfT1lLmRhdGEscj1vLm1hcChlPT57Y29uc3R7dXNlcklEOnQsc3RhdHVzVHlwZTpzLGN1c3RvbVN0YXR1czpvfT1lO3JldHVybnt1c2VySUQ6dCxzdGF0dXNUeXBlOnMsY3VzdG9tU3RhdHVzOiRyKG8pfX0pLHU9aS5tYXAoZT0+e2NvbnN0e3VzZXJJRDp0LGludmFsaWRVc2VySUQ6cyxlcnJvckNvZGU6byxlcnJvckluZm86aX09ZTtyZXR1cm57dXNlcklEOkx0KHMpP3Q6cyxjb2RlOm8sbWVzc2FnZTppfX0pO3dlKG4pfHxyLnVuc2hpZnQobik7Y29uc3QgYz1gdXNlcklEIGNvdW50OiR7cy5sZW5ndGh9LCBzdWNjZXNzIGNvdW50OiR7ci5sZW5ndGh9LCBmYWlsIGNvdW50OiR7dS5sZW5ndGh9YDtyZXR1cm4gYS5zZXROZXR3b3JrVHlwZSh0aGlzLl91c2VyTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJcIitjKS5lbmQoKSxfZS5sKGAke3R9IG9rLiAke2N9LmApLHduKHtzdWNjZXNzVXNlckxpc3Q6cixmYWlsdXJlVXNlckxpc3Q6dX0pfSkuY2F0Y2goZT0+KHRoaXMuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsb10pPT57YS5zZXRNZXNzYWdlKFwidXNlcklEIGNvdW50OlwiK3MubGVuZ3RoKS5zZXRFcnJvcihlLHQsbykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfXN1YnNjcmliZVVzZXJTdGF0dXMoZSl7aWYoIXRoaXMuX3VzZXJNb2R1bGUuY2FuSVVzZShNLlVTRVJfU1RBVFVTKSlyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX1VTRV9DT01NRVJDSUFMX0FCSUxJVFl9KTtjb25zdCB0PXRoaXMuX24rXCIuc3Vic2NyaWJlVXNlclN0YXR1c1wiLHt1c2VySURMaXN0OnM9W119PWU7bGV0IG89Wy4uLnNdO28ubGVuZ3RoPnRoaXMuTUFYX1NVQlNDUklCRV9VU0VSX0NPVU5UJiYoX2UudyhgJHt0fSAke0R0KHRoaXMuTUFYX1NVQlNDUklCRV9VU0VSX0NPVU5UKX1gKSxvPXMuc2xpY2UoMCx0aGlzLk1BWF9TVUJTQ1JJQkVfVVNFUl9DT1VOVCkpO2NvbnN0IGk9bmV3IENuKFwic3Vic2NyaWJlVXNlclN0YXR1c1wiKSxuPVwidXNlcklEIGNvdW50OlwiK3MubGVuZ3RoO3JldHVybiBfZS5sKGAke3R9ICR7bn1gKSx0aGlzLl91c2VyTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpYaSxyZXF1ZXN0RGF0YTp7dXNlcklETGlzdDpvfX0pLnRoZW4oZT0+e2NvbnN0e2ZhaWx1cmVVc2VyTGlzdDpzPVtdfT1lLmRhdGEsbz1zLm1hcChlPT57Y29uc3R7dXNlcklEOnQsaW52YWxpZFVzZXJJRDpzLGVycm9yQ29kZTpvLGVycm9ySW5mbzppfT1lO3JldHVybnt1c2VySUQ6THQocyk/dDpzLGNvZGU6byxtZXNzYWdlOml9fSk7cmV0dXJuIGkuc2V0TmV0d29ya1R5cGUodGhpcy5fdXNlck1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGAke259IGZhaWwgY291bnQ6JHtvLmxlbmd0aH1gKS5lbmQoKSxfZS5sKGAke3R9IG9rLiBmYWlsIGNvdW50OiR7by5sZW5ndGh9LmApLHduKHtmYWlsdXJlVXNlckxpc3Q6b30pfSkuY2F0Y2goZT0+KHRoaXMuX3VzZXJNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57aS5zZXRNZXNzYWdlKFwiXCIrbikuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZSh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX11bnN1YnNjcmliZVVzZXJTdGF0dXMoZSl7aWYoIXRoaXMuX3VzZXJNb2R1bGUuY2FuSVVzZShNLlVTRVJfU1RBVFVTKSlyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX1VTRV9DT01NRVJDSUFMX0FCSUxJVFl9KTtjb25zdCB0PXRoaXMuX24rXCIudW5zdWJzY3JpYmVVc2VyU3RhdHVzXCIse3VzZXJJRExpc3Q6cz1bXX09ZXx8e307bGV0IG89Wy4uLnNdO3MubGVuZ3RoPnRoaXMuTUFYX1VOU1VCU0NSSUJFX1VTRVJfQ09VTlQmJihfZS53KGAke3R9ICR7RHQodGhpcy5NQVhfVU5TVUJTQ1JJQkVfVVNFUl9DT1VOVCl9YCksbz1zLnNsaWNlKDAsdGhpcy5NQVhfVU5TVUJTQ1JJQkVfVVNFUl9DT1VOVCkpO2NvbnN0IGk9bmV3IENuKFwidW5zdWJzY3JpYmVVc2VyU3RhdHVzXCIpLG49XCJ1c2VySUQgY291bnQ6XCIrcy5sZW5ndGg7X2UubChgJHt0fSAke259YCk7Y29uc3Qgcj17dXNlcklETGlzdDpvfTtyZXR1cm4gMD09PW8ubGVuZ3RoJiYoci51c2VySURMaXN0PXZvaWQgMCxyLnVuc3Vic2NyaWJlQWxsPTEpLHRoaXMuX3VzZXJNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlppLHJlcXVlc3REYXRhOnJ9KS50aGVuKGU9Pntjb25zdHtmYWlsdXJlVXNlckxpc3Q6cz1bXX09ZS5kYXRhLG89cy5tYXAoZT0+e2NvbnN0e3VzZXJJRDp0LGludmFsaWRVc2VySUQ6cyxlcnJvckNvZGU6byxlcnJvckluZm86aX09ZTtyZXR1cm57dXNlcklEOkx0KHMpP3Q6cyxjb2RlOm8sbWVzc2FnZTppfX0pO3JldHVybiBpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3VzZXJNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgJHtufSBmYWlsIGNvdW50OiR7by5sZW5ndGh9YCkuZW5kKCksX2UubChgJHt0fSBvay4gZmFpbCBjb3VudDoke28ubGVuZ3RofS5gKSx3bih7ZmFpbHVyZVVzZXJMaXN0Om99KX0pLmNhdGNoKGU9Pih0aGlzLl91c2VyTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0TWVzc2FnZShcIlwiK24pLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLmUodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9cmVzZXQoKXt0aGlzLk1BWF9RVUVSWV9VU0VSX0NPVU5UPTUwMCx0aGlzLk1BWF9TVUJTQ1JJQkVfVVNFUl9DT1VOVD0xMDAsdGhpcy5NQVhfVU5TVUJTQ1JJQkVfVVNFUl9DT1VOVD0xMDB9fWNsYXNzIHhyIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlVzZXJNb2R1bGVcIix0aGlzLl9wcm9maWxlSGFuZGxlcj1uZXcgYnIodGhpcyksdGhpcy5fYmxhY2tsaXN0SGFuZGxlcj1uZXcgRnIodGhpcyksdGhpcy5fdXNlclN0YXR1c0hhbmRsZXI9bmV3IHFyKHRoaXMpO3RoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihLbix0aGlzLm9uQ29udGV4dFVwZGF0ZWQsdGhpcyl9b25Db250ZXh0VXBkYXRlZChlKXt0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRNeVByb2ZpbGUoKSx0aGlzLl9ibGFja2xpc3RIYW5kbGVyLmdldEJsYWNrbGlzdCgpfW9uUHJvZmlsZU1vZGlmaWVkKGUpe3RoaXMuX3Byb2ZpbGVIYW5kbGVyLm9uUHJvZmlsZU1vZGlmaWVkKGUpfW9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKGUpe2NvbnN0e2RhdGFMaXN0OnR9PWU7aWYoTHQodCkpcmV0dXJuO2NvbnN0IHM9W107dC5mb3JFYWNoKGU9PntlLmJsYWNrTGlzdERlbEFjY291bnQmJnMucHVzaCguLi5lLmJsYWNrTGlzdERlbEFjY291bnQpfSkscy5sZW5ndGg+MCYmdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5vbkFjY291bnREZWxldGVkKHMpO2NvbnN0IG89W107dC5mb3JFYWNoKGU9PntlLmJsYWNrTGlzdEFkZEFjY291bnQmJm8ucHVzaCguLi5lLmJsYWNrTGlzdEFkZEFjY291bnQpfSksby5sZW5ndGg+MCYmdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5vbkFjY291bnRBZGRlZChvKX1vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZChlKXt0aGlzLl9wcm9maWxlSGFuZGxlci5vbkNvbnZlcnNhdGlvbnNQcm9maWxlVXBkYXRlZChlKX1nZXRNeUFjY291bnQoKXtyZXR1cm4gdGhpcy5nZXRNeVVzZXJJRCgpfWdldE15UHJvZmlsZSgpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRNeVByb2ZpbGUoKX1nZXRTdG9yYWdlTW9kdWxlKCl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKE1zKX1maWx0ZXJQcm9mYW5pdHkoZSx0KXtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKFVzKTtpZighcylyZXR1cm4hMDtjb25zdHtpc0FsbG93ZWRUb1NlbmQ6byxtb2RpZmllZFRleHQ6aX09cy5maWx0ZXJUZXh0KHRbZV0seSk7cmV0dXJuITA9PT1vJiYodFtlXT1pLCEwKX1pc015RnJpZW5kKGUpe2NvbnN0IHQ9dGhpcy5nZXRNb2R1bGUocHMpO3JldHVybiEhdCYmdC5pc015RnJpZW5kKGUpfWdldFVzZXJQcm9maWxlKGUpe3JldHVybiB0aGlzLl9wcm9maWxlSGFuZGxlci5nZXRVc2VyUHJvZmlsZShlKX11cGRhdGVNeVByb2ZpbGUoZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnVwZGF0ZU15UHJvZmlsZShlKX1nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoZSl7cmV0dXJuIHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmdldE5pY2tBbmRBdmF0YXJCeVVzZXJJRChlKX1nZXRMb2NhbEJsYWNrbGlzdCgpe2NvbnN0IGU9dGhpcy5fYmxhY2tsaXN0SGFuZGxlci5nZXRMb2NhbEJsYWNrbGlzdCgpO3JldHVybiB4bihlKX1hZGRCbGFja2xpc3QoZSl7cmV0dXJuIHRoaXMuX2JsYWNrbGlzdEhhbmRsZXIuYWRkQmxhY2tsaXN0KGUpfWRlbGV0ZUJsYWNrbGlzdChlKXtyZXR1cm4gdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5kZWxldGVCbGFja2xpc3QoZSl9b25Vc2VyU3RhdHVzVXBkYXRlZChlKXt0aGlzLl91c2VyU3RhdHVzSGFuZGxlci5vblVzZXJTdGF0dXNVcGRhdGVkKGUpfXNldFNlbGZTdGF0dXMoZSl7cmV0dXJuIHRoaXMuX3VzZXJTdGF0dXNIYW5kbGVyLnNldFNlbGZTdGF0dXMoZSl9Z2V0VXNlclN0YXR1cyhlKXtyZXR1cm4gdGhpcy5fdXNlclN0YXR1c0hhbmRsZXIuZ2V0VXNlclN0YXR1cyhlKX1zdWJzY3JpYmVVc2VyU3RhdHVzKGUpe3JldHVybiB0aGlzLl91c2VyU3RhdHVzSGFuZGxlci5zdWJzY3JpYmVVc2VyU3RhdHVzKGUpfXVuc3Vic2NyaWJlVXNlclN0YXR1cyhlKXtyZXR1cm4gdGhpcy5fdXNlclN0YXR1c0hhbmRsZXIudW5zdWJzY3JpYmVVc2VyU3RhdHVzKGUpfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLHRoaXMuX3Byb2ZpbGVIYW5kbGVyLnJlc2V0KCksdGhpcy5fYmxhY2tsaXN0SGFuZGxlci5yZXNldCgpLHRoaXMuX3VzZXJTdGF0dXNIYW5kbGVyLnJlc2V0KCl9fWNsYXNzIFZye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fbT1lLHRoaXMuX2lzTG9nZ2VkSW49ITEsdGhpcy5fU0RLQXBwSUQ9dC5TREtBcHBJRCx0aGlzLl91c2VySUQ9dC51c2VySUR8fFwiXCIsdGhpcy5fdXNlclNpZz10LnVzZXJTaWd8fFwiXCIsdGhpcy5fdmVyc2lvbj1cIjIuMjcuNlwiLHRoaXMuX2EyS2V5PVwiXCIsdGhpcy5fdGlueUlEPVwiXCIsdGhpcy5fY3VzdG9tU3RhdHVzPVwiXCIsdGhpcy5fY29udGVudFR5cGU9XCJqc29uXCIsdGhpcy5fdW5saW1pdGVkQVZDaGF0Um9vbT10LnVubGltaXRlZEFWQ2hhdFJvb20sdGhpcy5fc2NlbmU9dC5zY2VuZXx8XCJcIix0aGlzLl9vdmVyc2VhPXQub3ZlcnNlYSx0aGlzLl9pbnN0YW5jZUlEPXQuaW5zdGFuY2VJRCx0aGlzLl9zdGF0dXNJbnN0YW5jZUlEPTAsdGhpcy5faXNEZXZNb2RlPXQuZGV2TW9kZSx0aGlzLl9wcm94eVNlcnZlcj10LnByb3h5U2VydmVyLHRoaXMuX2ZpbGVVcGxvYWRQcm94eT10LmZpbGVVcGxvYWRQcm94eSx0aGlzLl9maWxlRG93bmxvYWRQcm94eT10LmZpbGVEb3dubG9hZFByb3h5fWlzTG9nZ2VkSW4oKXtyZXR1cm4gdGhpcy5faXNMb2dnZWRJbn1pc092ZXJzZWEoKXtyZXR1cm4gdGhpcy5fb3ZlcnNlYX1pc1ByaXZhdGVOZXRXb3JrKCl7cmV0dXJuIHRoaXMuX3Byb3h5U2VydmVyfWlzRGV2TW9kZSgpe3JldHVybiB0aGlzLl9pc0Rldk1vZGV9aXNTaW5nYXBvcmVTaXRlKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj0yZTcmJnRoaXMuX1NES0FwcElEPDNlN3x8dGhpcy5fU0RLQXBwSUQ+PTE3MmU3JiZ0aGlzLl9TREtBcHBJRDwxNzNlN31pc0tvcmVhU2l0ZSgpe3JldHVybiB0aGlzLl9TREtBcHBJRD49M2U3JiZ0aGlzLl9TREtBcHBJRDw0ZTd8fHRoaXMuX1NES0FwcElEPj0xNzNlNyYmdGhpcy5fU0RLQXBwSUQ8MTc0ZTd9aXNHZXJtYW55U2l0ZSgpe3JldHVybiB0aGlzLl9TREtBcHBJRD49NGU3JiZ0aGlzLl9TREtBcHBJRDw1ZTd8fHRoaXMuX1NES0FwcElEPj0xNzRlNyYmdGhpcy5fU0RLQXBwSUQ8MTc1ZTd9aXNJbmRpYVNpdGUoKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUQ+PTVlNyYmdGhpcy5fU0RLQXBwSUQ8NmU3fHx0aGlzLl9TREtBcHBJRD49MTc1ZTcmJnRoaXMuX1NES0FwcElEPDE3NmU3fWlzSmFwYW5TaXRlKCl7cmV0dXJuIHRoaXMuX1NES0FwcElEPj02ZTcmJnRoaXMuX1NES0FwcElEPDdlN3x8dGhpcy5fU0RLQXBwSUQ+PTE3NmU3JiZ0aGlzLl9TREtBcHBJRDwxNzdlN31pc1VTQVNpdGUoKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUQ+PTdlNyYmdGhpcy5fU0RLQXBwSUQ8OGU3fHx0aGlzLl9TREtBcHBJRD49MTc3ZTcmJnRoaXMuX1NES0FwcElEPDE3OGU3fWlzSW50bCgpe3JldHVybiAwPT09KGU9dGhpcy5fU0RLQXBwSUQpfHxlPj0yZTcmJmU8OGU3fHxlPj0xNzJlNyYmZTwxNzhlNzt2YXIgZX1pc1VubGltaXRlZEFWQ2hhdFJvb20oKXtyZXR1cm4gdGhpcy5fdW5saW1pdGVkQVZDaGF0Um9vbX1zZXRVc2VySUQoZSl7dGhpcy5fdXNlcklEPWV9Z2V0VXNlcklEKCl7cmV0dXJuIHRoaXMuX3VzZXJJRH1zZXRVc2VyU2lnKGUpe3RoaXMuX3VzZXJTaWc9ZX1nZXRVc2VyU2lnKCl7cmV0dXJuIHRoaXMuX3VzZXJTaWd9Z2V0U0RLQXBwSUQoKXtyZXR1cm4gdGhpcy5fU0RLQXBwSUR9c2V0VGlueUlEKGUpe3RoaXMuX3RpbnlJRD1lLHRoaXMuX2lzTG9nZ2VkSW49ITB9Z2V0VGlueUlEKCl7cmV0dXJuIHRoaXMuX3RpbnlJRH1zZXRDdXN0b21TdGF0dXMoZSl7dGhpcy5fY3VzdG9tU3RhdHVzPWV9Z2V0Q3VzdG9tU3RhdHVzKCl7cmV0dXJuIHRoaXMuX2N1c3RvbVN0YXR1c31nZXRTY2VuZSgpe3JldHVybiB0ZT93aW5kb3cudGVuY2VudF9jbG91ZF9pbV9jc2lnX2ZsdXR0ZXJfZm9yX3dlYl8yNUZfY3k6dGhpcy5faXNUVUlLaXQoKT9cInR1aWtpdFwiOnRoaXMuX3NjZW5lfWdldEluc3RhbmNlSUQoKXtyZXR1cm4gdGhpcy5faW5zdGFuY2VJRH1nZXRTdGF0dXNJbnN0YW5jZUlEKCl7cmV0dXJuIHRoaXMuX3N0YXR1c0luc3RhbmNlSUR9c2V0U3RhdHVzSW5zdGFuY2VJRChlKXt0aGlzLl9zdGF0dXNJbnN0YW5jZUlEPWV9Z2V0VmVyc2lvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufWdldEEyS2V5KCl7cmV0dXJuIHRoaXMuX2EyS2V5fXNldEEyS2V5KGUpe3RoaXMuX2EyS2V5PWV9Z2V0Q29udGVudFR5cGUoKXtyZXR1cm4gdGhpcy5fY29udGVudFR5cGV9Z2V0UHJveHlTZXJ2ZXIoKXtyZXR1cm4gdGhpcy5fcHJveHlTZXJ2ZXJ9Z2V0RmlsZVVwbG9hZFByb3h5KCl7cmV0dXJuIHRoaXMuX2ZpbGVVcGxvYWRQcm94eX1nZXRGaWxlRG93bmxvYWRQcm94eSgpe3JldHVybiB0aGlzLl9maWxlRG93bmxvYWRQcm94eX1faXNUVUlLaXQoKXtsZXQgZT0hMSx0PSExLHM9ITEsbz0hMSxpPVtdO1AmJihpPU9iamVjdC5rZXlzKHcpKSxiJiYoaT1rP09iamVjdC5rZXlzKHVuaSk6T2JqZWN0LmtleXMod2luZG93KSk7Zm9yKGxldCByPTAsYT1pLmxlbmd0aDtyPGE7cisrKWlmKGlbcl0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInVpa2l0XCIpKXtlPSEwO2JyZWFrfWlmKGk9bnVsbCxQJiYhJGUody5jcmVhdGVHYW1lUG9ydGFsKSYmJGUoZ2V0QXBwKSYmIXdlKGdldEFwcCgpKSl7Y29uc3QgZT1nZXRBcHAoKS5nbG9iYWxEYXRhO1BlKGUpJiYhMD09PWUuaXNUVUlLaXQmJih0PSEwKX0hMD09PXRoaXMuX20uZ2V0TW9kdWxlKE1zKS5nZXRTdG9yYWdlU3luYyhgVElNXyR7dGhpcy5fU0RLQXBwSUR9X2lzVFVJS2l0YCkmJihzPSEwKTtsZXQgbj1udWxsO2lmKEwmJiFOJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgdW5pJiZfX3d4Q29uZmlnJiYobj1fX3d4Q29uZmlnLnBhZ2VzKSx2JiZcInVuZGVmaW5lZFwiPT10eXBlb2YgdW5pJiZfX3FxQ29uZmlnJiYobj1fX3FxQ29uZmlnLnBhZ2VzKSxiZShuKSYmbi5sZW5ndGg+MCl7Zm9yKGxldCBlPTAsdD1uLmxlbmd0aDtlPHQ7ZSsrKWlmKG5bZV0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInR1aVwiKSl7bz0hMDticmVha31uPW51bGx9cmV0dXJuIGV8fHR8fHN8fG99cmVzZXQoKXt0aGlzLl9pc0xvZ2dlZEluPSExLHRoaXMuX3VzZXJTaWc9XCJcIix0aGlzLl9hMktleT1cIlwiLHRoaXMuX3RpbnlJRD1cIlwiLHRoaXMuX2N1c3RvbVN0YXR1cz1cIlwiLHRoaXMuX3N0YXR1c0luc3RhbmNlSUQ9MH19Y2xhc3MgQnIgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiU2lnbk1vZHVsZVwiLHRoaXMuX2hlbGxvSW50ZXJ2YWw9MTIwLHRoaXMuX2xhc3RMb2dpblRzPTAsdGhpcy5fbGFzdFdzSGVsbG9Ucz0wLHRoaXMuX2lzV2ViVW5pYXBwPTAsam4ubWl4aW4odGhpcyl9b25DaGVja1RpbWVyKGUpe3RoaXMuaXNMb2dnZWRJbigpJiZlJXRoaXMuX2hlbGxvSW50ZXJ2YWw9PTAmJnRoaXMuX2hlbGxvKCl9bG9naW4oZSl7bGV0IHQ9XCJcIjtpZih0aGlzLmlzTG9nZ2VkSW4oKSl7Y29uc3QgZT10aGlzLmdldE15VXNlcklEKCk7cmV0dXJuIHQ9dGhpcy5nZXRFcnJvck1lc3NhZ2UoXCJSZXBlYXRMb2dpblwiLGUpLHQmJl9lLncodCkseG4oe2FjdGlvblN0YXR1czpcIk9LXCIsZXJyb3JDb2RlOjAsZXJyb3JJbmZvOnQscmVwZWF0TG9naW46ITB9KX1pZihEYXRlLm5vdygpLXRoaXMuX2xhc3RMb2dpblRzPD0xNWUzKXJldHVybiB0aGlzLm91dHB1dFdhcm5pbmcoXCJMb2dnaW5nSW5cIixlLnVzZXJJRCksVm4oe2NvZGU6bm4uUkVQRUFUX0xPR0lOfSk7X2UubChgJHt0aGlzLl9ufS5sb2dpbiB1c2VySUQ6JHtlLnVzZXJJRH1gKTtjb25zdCBzPXRoaXMuX2NoZWNrTG9naW5JbmZvKGUpO2lmKDAhPT1zLmNvZGUpcmV0dXJuIFZuKHMpO2NvbnN0IG89dGhpcy5nZXRNb2R1bGUobXMpLHt1c2VySUQ6aSx1c2VyU2lnOm59PWU7by5zZXRVc2VySUQoaSksby5zZXRVc2VyU2lnKG4pO3JldHVybiB0aGlzLmdldE1vZHVsZShFcykudXBkYXRlUHJvdG9jb2xDb25maWcoKSx0aGlzLl9sb2dpbigpfV9sb2dpbigpe2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUobXMpLHQ9ZS5nZXRTY2VuZSgpO2xldCBzPTA7Y29uc3Qgbz1uZXcgQ24oXCJsb2dpblwiKTtvLnNldE1lc3NhZ2UoXCJcIit0KS5zZXRNb3JlTWVzc2FnZShcImlkZW50aWZpZXI6XCIrdGhpcy5nZXRNeVVzZXJJRCgpKSxrP1widHVpa2l0XCI9PT10P28uc2V0VUlQbGF0Zm9ybSg0KTpvLnNldFVJUGxhdGZvcm0oMyk6UD9cInR1aWtpdFwiPT09dD9vLnNldFVJUGxhdGZvcm0oMTIpOm8uc2V0VUlQbGF0Zm9ybSgxMSk6YiYmKHRlP1wiZmx1dHRlcl93ZWJfdWlraXRcIj09PXQ/by5zZXRVSVBsYXRmb3JtKDIxKTpvLnNldFVJUGxhdGZvcm0oMjApOnRoaXMuX2lzUmVhY3RVSUtpdCgpP2VlP28uc2V0VUlQbGF0Zm9ybSgyNSk6by5zZXRVSVBsYXRmb3JtKDI0KTplZT9cInR1aWtpdFwiPT09dD9vLnNldFVJUGxhdGZvcm0oMTcpOm8uc2V0VUlQbGF0Zm9ybSgxNik6XCJ0dWlraXRcIj09PXQ/by5zZXRVSVBsYXRmb3JtKDE0KTpvLnNldFVJUGxhdGZvcm0oMTMpKTtjb25zdCBpPXRoaXMuZ2V0TW9kdWxlKEdzKTtpZihpLmNhbklVc2VPZmZsaW5lUHVzaCgpKXt0aGlzLl9pc1dlYlVuaWFwcD1pLmdldFVuaUFwcFBsYXRmb3JtKCk7Y29uc3QgdD10aGlzLl9nZXRTdGF0dXNJbnN0YW5jZUlEKCk7ZS5zZXRTdGF0dXNJbnN0YW5jZUlEKHQpO3RoaXMuZ2V0TW9kdWxlKEVzKS51cGRhdGVQcm90b2NvbENvbmZpZygpLHM9aS5nZXREZXZpY2VCcmFuZCgpfWNvbnN0IG49dGhpcy5fbitcIi5fbG9naW5cIjtyZXR1cm4gdGhpcy5fbGFzdExvZ2luVHM9RGF0ZS5ub3coKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokcyxyZXF1ZXN0RGF0YTp7ZGV2aWNlQnJhbmQ6cyxpc1dlYlVuaWFwcDp0aGlzLl9pc1dlYlVuaWFwcH19KS50aGVuKHM9Pnt0aGlzLl9sYXN0TG9naW5Ucz0wO2NvbnN0IGk9RGF0ZS5ub3coKTtsZXQgcj1udWxsO2NvbnN0e2EyS2V5OmEsdGlueUlEOnUsaGVsbG9JbnRlcnZhbDpjLGluc3RhbmNlSUQ6bCx0aW1lU3RhbXA6ZCxjdXN0b21TdGF0dXM6cD1cIlwiLHB1cmNoYXNlQml0czpofT1zLmRhdGE7X2UubChgJHtufSBvay4gc2NlbmU6JHt0fSBoZWxsb0ludGVydmFsOiR7Y30gaW5zdGFuY2VJRDoke2x9IHRpbWVTdGFtcDoke2R9YCk7Y29uc3QgZz0xZTMqZCxfPWktby5nZXRTdGFydFRzKCksbT1nK3BhcnNlSW50KF8vMiktaSxNPW8uZ2V0U3RhcnRUcygpK207aWYoby5zdGFydChNKSxmdW5jdGlvbihlLHQpe3VlPXQ7Y29uc3Qgcz1uZXcgRGF0ZTtzLnNldFRpbWUoZSksX2UuaShgYmFzZVRpbWUgZnJvbSBzZXJ2ZXI6JHtzfSBvZmZzZXQ6JHt1ZX1gKX0oZyxtKSwhdSl0aHJvdyByPW5ldyBGbih7Y29kZTpubi5OT19USU5ZSUR9KSxvLnNldEVycm9yKHIsITAsdGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxyO2lmKCFhKXRocm93IHI9bmV3IEZuKHtjb2RlOm5uLk5PX0EyS0VZfSksby5zZXRFcnJvcihyLCEwLHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCkscjtjb25zdCBmPSRyKHApO2lmKG8uc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNb3JlTWVzc2FnZShgaGVsbG9JbnRlcnZhbDoke2N9IGluc3RhbmNlSUQ6JHtsfSBvZmZzZXQ6JHttfSBjdXN0b21TdGF0dXM6JHtmfWApLmVuZCgpLGUuc2V0QTJLZXkoYSksZS5zZXRUaW55SUQodSksZS5zZXRTdGF0dXNJbnN0YW5jZUlEKGwpLGUuc2V0Q3VzdG9tU3RhdHVzKGYpLGgpe3RoaXMuZ2V0TW9kdWxlKE9zKS5vblB1c2hlZENvbmZpZyh7ZXJyb3JDb2RlOjAsZXhwaXJlZFRpbWU6MCxwdXJjaGFzZUJpdHM6aH0pfXRoaXMuZ2V0TW9kdWxlKEVzKS51cGRhdGVQcm90b2NvbENvbmZpZygpLHRoaXMuZW1pdElubmVyRXZlbnQoS24pLHRoaXMuX2hlbGxvSW50ZXJ2YWw9Yyx0aGlzLnRyaWdnZXJSZWFkeSgpO2NvbnN0IEk9dGhpcy5nZXRNb2R1bGUoR3MpO0kuY2FuSVVzZU9mZmxpbmVQdXNoKCkmJih1bmkuc2V0U3RvcmFnZVN5bmMoXCJ0aW1VbmlBcHBJbnN0YW5jZUlEXCIsbCksSS5pbml0KCkpLHRoaXMuX2ZldGNoQ2xvdWRDb250cm9sQ29uZmlnKCk7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFVzKS5pbml0KCksc30pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e28uc2V0RXJyb3IoZSx0LHMpLmVuZCghMCl9KSx0aGlzLl9tLnNldE5vdFJlYWR5UmVhc29uKG5uLkxPR0lOX0ZBSUxFRCksX2UuZShuK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksdGhpcy5fbGFzdExvZ2luVHM9MCx0aGlzLl9tLm9uTG9naW5GYWlsZWQoKSxWbihlKSkpfWxvZ291dChlPTApe2lmKCF0aGlzLmlzTG9nZ2VkSW4oKSlyZXR1cm4gVm4oe2NvZGU6bm4uVVNFUl9OT1RfTE9HR0VEX0lOfSk7bmV3IENuKFwibG9nb3V0XCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShcImlkZW50aWZpZXI6XCIrdGhpcy5nZXRNeVVzZXJJRCgpKS5lbmQoITApO2NvbnN0IHQ9dGhpcy5fbitcIi5sb2dvdXRcIjtyZXR1cm4gX2UuaShgJHt0fSB0eXBlOiR7ZX1gKSwwPT09ZSYmdGhpcy5fbS5zZXROb3RSZWFkeVJlYXNvbihubi5MT0dHRURfT1VUKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpxcyxyZXF1ZXN0RGF0YTp7dHlwZTplfX0pLnRoZW4oKCk9Pih0aGlzLnJlc2V0UmVhZHkoKSx4bih7fSkpKS5jYXRjaChlPT4oX2UuZSh0K1wiIGVycm9yOlwiLGUpLHRoaXMucmVzZXRSZWFkeSgpLHhuKHt9KSkpfV9mZXRjaENsb3VkQ29udHJvbENvbmZpZygpe3RoaXMuZ2V0TW9kdWxlKEFzKS5mZXRjaENvbmZpZygpfV9nZXRTdGF0dXNJbnN0YW5jZUlEKCl7cmV0dXJuIHVuaS5nZXRTdG9yYWdlU3luYyhcInRpbVVuaUFwcEluc3RhbmNlSURcIil9X2hlbGxvKCl7dGhpcy5fbGFzdFdzSGVsbG9Ucz1EYXRlLm5vdygpLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnhzLHJlcXVlc3REYXRhOntpc1dlYlVuaWFwcDp0aGlzLl9pc1dlYlVuaWFwcH19KS5jYXRjaChlPT57X2Uudyh0aGlzLl9uK1wiLl9oZWxsbyBlcnJvcjpcIixlKX0pfWdldExhc3RXc0hlbGxvVHMoKXtyZXR1cm4gdGhpcy5fbGFzdFdzSGVsbG9Uc31fY2hlY2tMb2dpbkluZm8oZSl7bGV0IHQ9MDtyZXR1cm4gTHQodGhpcy5nZXRNb2R1bGUobXMpLmdldFNES0FwcElEKCkpP3Q9bm4uTk9fU0RLQVBQSUQ6THQoZS51c2VySUQpP3Q9bm4uTk9fSURFTlRJRklFUjpMdChlLnVzZXJTaWcpJiYodD1ubi5OT19VU0VSU0lHKSx7Y29kZTp0fX1faXNSZWFjdFVJS2l0KCl7cmV0dXJuIGImJnZvaWQgMCE9PXdpbmRvdy50ZW5jZW50X2Nsb3VkX2ltX2NzaWdfcmVhY3RfdWlraXRfMjNGX3hhfW9uTXVsdGlwbGVBY2NvdW50S2lja2VkT3V0KHMpe25ldyBDbihcImtpY2tlZE91dFwiKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYHR5cGU6JHt0LktJQ0tFRF9PVVRfTVVMVF9BQ0NPVU5UfSBuZXdJbnN0YW5jZUluZm86JHtKU09OLnN0cmluZ2lmeShzKX1gKS5lbmQoITApLF9lLncoYCR7dGhpcy5fbn0ub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQgdXNlcklEOiR7dGhpcy5nZXRNeVVzZXJJRCgpfSBuZXdJbnN0YW5jZUluZm86YCxzKSx0aGlzLmxvZ291dCgxKS50aGVuKCgpPT57dGhpcy5lbWl0T3V0ZXJFdmVudChlLktJQ0tFRF9PVVQse3R5cGU6dC5LSUNLRURfT1VUX01VTFRfQUNDT1VOVH0pLHRoaXMuX20uc2V0Tm90UmVhZHlSZWFzb24obm4uS0lDS0VEX09VVF9NVUxUX0FDQ09VTlQpLHRoaXMuX20ucmVzZXQoKX0pfW9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQocyl7bmV3IENuKFwia2lja2VkT3V0XCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgdHlwZToke3QuS0lDS0VEX09VVF9NVUxUX0RFVklDRX0gbmV3SW5zdGFuY2VJbmZvOiR7SlNPTi5zdHJpbmdpZnkocyl9YCkuZW5kKCEwKSxfZS53KGAke3RoaXMuX259Lm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQgdXNlcklEOiR7dGhpcy5nZXRNeVVzZXJJRCgpfSBuZXdJbnN0YW5jZUluZm86YCxzKSx0aGlzLmxvZ291dCgxKS50aGVuKCgpPT57dGhpcy5lbWl0T3V0ZXJFdmVudChlLktJQ0tFRF9PVVQse3R5cGU6dC5LSUNLRURfT1VUX01VTFRfREVWSUNFfSksdGhpcy5fbS5zZXROb3RSZWFkeVJlYXNvbihubi5LSUNLRURfT1VUX01VTFRfREVWSUNFKSx0aGlzLl9tLnJlc2V0KCl9KX1vblVzZXJTaWdFeHBpcmVkKCl7bmV3IENuKFwia2lja2VkT3V0XCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZSh0LktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEKS5lbmQoITApLF9lLncodGhpcy5fbitcIi5vblVzZXJTaWdFeHBpcmVkOiB1c2VyU2lnIGV4cGlyZWRcIik7MCE9PXRoaXMuZ2V0TW9kdWxlKG1zKS5nZXRTdGF0dXNJbnN0YW5jZUlEKCkmJih0aGlzLmVtaXRPdXRlckV2ZW50KGUuS0lDS0VEX09VVCx7dHlwZTp0LktJQ0tFRF9PVVRfVVNFUlNJR19FWFBJUkVEfSksdGhpcy5fbS5zZXROb3RSZWFkeVJlYXNvbihubi5LSUNLRURfT1VUX1VTRVJTSUdfRVhQSVJFRCksdGhpcy5fbS5yZXNldCgpKX1vblJlc3RBcGlLaWNrZWRPdXQocyl7bmV3IENuKFwia2lja2VkT3V0XCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgdHlwZToke3QuS0lDS0VEX09VVF9SRVNUX0FQSX0gbmV3SW5zdGFuY2VJbmZvOiR7SlNPTi5zdHJpbmdpZnkocyl9YCkuZW5kKCEwKSxfZS53KGAke3RoaXMuX259Lm9uUmVzdEFwaUtpY2tlZE91dCB1c2VySUQ6JHt0aGlzLmdldE15VXNlcklEKCl9IG5ld0luc3RhbmNlSW5mbzpgLHMpO2lmKDAhPT10aGlzLmdldE1vZHVsZShtcykuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpKXt0aGlzLmVtaXRPdXRlckV2ZW50KGUuS0lDS0VEX09VVCx7dHlwZTp0LktJQ0tFRF9PVVRfUkVTVF9BUEl9KSx0aGlzLl9tLnNldE5vdFJlYWR5UmVhc29uKG5uLktJQ0tFRF9PVVRfUkVTVF9BUEkpLHRoaXMuX20ucmVzZXQoKTt0aGlzLmdldE1vZHVsZShTcykub25SZXN0QXBpS2lja2VkT3V0KCl9fXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLHRoaXMucmVzZXRSZWFkeSgpLHRoaXMuX2hlbGxvSW50ZXJ2YWw9MTIwLHRoaXMuX2xhc3RMb2dpblRzPTAsdGhpcy5fbGFzdFdzSGVsbG9Ucz0wLHRoaXMuX2lzV2ViVW5pYXBwPTB9fWZ1bmN0aW9uIEhyKCl7cmV0dXJuIG51bGx9Y2xhc3MgS3J7Y29uc3RydWN0b3IoZSl7dGhpcy5fbT1lLHRoaXMuX249XCJTdG9yYWdlTW9kdWxlXCIsdGhpcy5fc3RvcmFnZVF1ZXVlPW5ldyBNYXAsdGhpcy5fZXJyb3JUb2xlcmFudEhhbmRsZSgpfV9lcnJvclRvbGVyYW50SGFuZGxlKCl7UHx8IXdlKHdpbmRvdykmJnRoaXMuX2NhbklVc2VDb29raWVzKCl8fCh0aGlzLmdldEl0ZW09SHIsdGhpcy5zZXRJdGVtPUhyLHRoaXMucmVtb3ZlSXRlbT1Icix0aGlzLmNsZWFyPUhyKX1vbkNoZWNrVGltZXIoZSl7aWYoZSUyMD09MCl7aWYoMD09PXRoaXMuX3N0b3JhZ2VRdWV1ZS5zaXplKXJldHVybjt0aGlzLl9kb0ZsdXNoKCl9fV9kb0ZsdXNoKCl7dHJ5e2Zvcihjb25zdFtlLHRdb2YgdGhpcy5fc3RvcmFnZVF1ZXVlKXRoaXMuX3NldFN0b3JhZ2VTeW5jKHRoaXMuX2dldEtleShlKSx0KTt0aGlzLl9zdG9yYWdlUXVldWUuY2xlYXIoKX1jYXRjaChlKXtfZS53KHRoaXMuX24rXCIuX2RvRmx1c2ggZXJyb3I6XCIsZSl9fV9nZXRQcmVmaXgoKXtjb25zdCBlPXRoaXMuX20uZ2V0TW9kdWxlKG1zKTtyZXR1cm5gVElNXyR7ZS5nZXRTREtBcHBJRCgpfV8ke2UuZ2V0VXNlcklEKCl9X2B9X2dldEtleShlKXtyZXR1cm5gJHt0aGlzLl9nZXRQcmVmaXgoKX0ke2V9YH1nZXRJdGVtKGUsdD0hMCl7dHJ5e2NvbnN0IHM9dD90aGlzLl9nZXRLZXkoZSk6ZTtyZXR1cm4gdGhpcy5nZXRTdG9yYWdlU3luYyhzKX1jYXRjaChzKXtyZXR1cm4gX2Uudyh0aGlzLl9uK1wiLmdldEl0ZW0gZXJyb3I6XCIscykse319fXNldEl0ZW0oZSx0LHM9ITEsbz0hMCl7aWYocyl7Y29uc3Qgcz1vP3RoaXMuX2dldEtleShlKTplO3RoaXMuX3NldFN0b3JhZ2VTeW5jKHMsdCl9ZWxzZSB0aGlzLl9zdG9yYWdlUXVldWUuc2V0KGUsdCl9Y2xlYXIoKXt0cnl7UD93LmNsZWFyU3RvcmFnZVN5bmMoKTp0aGlzLl9jYW5JVXNlQ29va2llcygpJiZsb2NhbFN0b3JhZ2UuY2xlYXIoKX1jYXRjaChlKXtfZS53KHRoaXMuX24rXCIuY2xlYXIgZXJyb3I6XCIsZSl9fXJlbW92ZUl0ZW0oZSx0PSEwKXt0cnl7Y29uc3Qgcz10P3RoaXMuX2dldEtleShlKTplO3RoaXMuX3JlbW92ZVN0b3JhZ2VTeW5jKHMpfWNhdGNoKHMpe19lLncodGhpcy5fbitcIi5yZW1vdmVJdGVtIGVycm9yOlwiLHMpfX1nZXRTaXplKGUsdD1cImJcIil7dHJ5e2NvbnN0IHM9e3NpemU6MCxsaW1pdFNpemU6NTI0Mjg4MCx1bml0OnR9O2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwibGVmdFNpemVcIix7ZW51bWVyYWJsZTohMCxnZXQ6KCk9PnMubGltaXRTaXplLXMuc2l6ZX0pLFAmJihzLmxpbWl0U2l6ZT0xMDI0KncuZ2V0U3RvcmFnZUluZm9TeW5jKCkubGltaXRTaXplKSxlKXMuc2l6ZT1KU09OLnN0cmluZ2lmeSh0aGlzLmdldEl0ZW0oZSkpLmxlbmd0aCt0aGlzLl9nZXRLZXkoZSkubGVuZ3RoO2Vsc2UgaWYoUCl7Y29uc3R7a2V5czplfT13LmdldFN0b3JhZ2VJbmZvU3luYygpO2UuZm9yRWFjaChlPT57cy5zaXplKz1KU09OLnN0cmluZ2lmeSh0aGlzLmdldFN0b3JhZ2VTeW5jKGUpKS5sZW5ndGgrdGhpcy5fZ2V0S2V5KGUpLmxlbmd0aH0pfWVsc2UgaWYodGhpcy5fY2FuSVVzZUNvb2tpZXMoKSlmb3IoY29uc3QgZSBpbiBsb2NhbFN0b3JhZ2UpbG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KGUpJiYocy5zaXplKz1sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKS5sZW5ndGgrZS5sZW5ndGgpO3JldHVybiB0aGlzLl9jb252ZXJ0VW5pdChzKX1jYXRjaChzKXtfZS53KHRoaXMuX24rXCIgZXJyb3I6XCIscyl9fV9jb252ZXJ0VW5pdChlKXtjb25zdCB0PXt9LHt1bml0OnN9PWU7dC51bml0PXM7Zm9yKGNvbnN0IG8gaW4gZSlcIm51bWJlclwiPT10eXBlb2YgZVtvXSYmKFwia2JcIj09PXMudG9Mb3dlckNhc2UoKT90W29dPU1hdGgucm91bmQoZVtvXS8xMDI0KTpcIm1iXCI9PT1zLnRvTG93ZXJDYXNlKCk/dFtvXT1NYXRoLnJvdW5kKGVbb10vMTAyNC8xMDI0KTp0W29dPWVbb10pO3JldHVybiB0fV9zZXRTdG9yYWdlU3luYyhlLHQpe1A/Tz9teS5zZXRTdG9yYWdlU3luYyh7a2V5OmUsZGF0YTp0fSk6dy5zZXRTdG9yYWdlU3luYyhlLHQpOnRoaXMuX2NhbklVc2VDb29raWVzKCkmJmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsSlNPTi5zdHJpbmdpZnkodCkpfWdldFN0b3JhZ2VTeW5jKGUpe2lmKFApe2lmKE8pe3JldHVybiBteS5nZXRTdG9yYWdlU3luYyh7a2V5OmV9KS5kYXRhfXJldHVybiB3LmdldFN0b3JhZ2VTeW5jKGUpfXJldHVybiB0aGlzLl9jYW5JVXNlQ29va2llcygpP0pTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oZSkpOnt9fV9yZW1vdmVTdG9yYWdlU3luYyhlKXtQP08/bXkucmVtb3ZlU3RvcmFnZVN5bmMoe2tleTplfSk6dy5yZW1vdmVTdG9yYWdlU3luYyhlKTp0aGlzLl9jYW5JVXNlQ29va2llcygpJiZsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShlKX1fY2FuSVVzZUNvb2tpZXMoKXtyZXR1cm4gbmF2aWdhdG9yJiZuYXZpZ2F0b3IuY29va2llRW5hYmxlZCYmbG9jYWxTdG9yYWdlfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLHRoaXMuX2RvRmx1c2goKX19Y2xhc3MgV3J7Y29uc3RydWN0b3IoZSl7dGhpcy5fbj1cIlNTT0xvZ0JvZHlcIix0aGlzLl9yZXBvcnQ9W119cHVzaEluKGUpe19lLmQodGhpcy5fbitcIi5wdXNoSW5cIix0aGlzLl9yZXBvcnQubGVuZ3RoLGUpLHRoaXMuX3JlcG9ydC5wdXNoKGUpfWJhY2tmaWxsKGUpe2JlKGUpJiYwIT09ZS5sZW5ndGgmJihfZS5kKHRoaXMuX24rXCIuYmFja2ZpbGxcIix0aGlzLl9yZXBvcnQubGVuZ3RoLGUubGVuZ3RoKSx0aGlzLl9yZXBvcnQudW5zaGlmdCguLi5lKSl9Z2V0TG9nc051bUluTWVtb3J5KCl7cmV0dXJuIHRoaXMuX3JlcG9ydC5sZW5ndGh9aXNFbXB0eSgpe3JldHVybiAwPT09dGhpcy5fcmVwb3J0Lmxlbmd0aH1fcmVzZXQoKXt0aGlzLl9yZXBvcnQubGVuZ3RoPTAsdGhpcy5fcmVwb3J0PVtdfWdldExvZ3NJbk1lbW9yeSgpe2NvbnN0IGU9dGhpcy5fcmVwb3J0LnNsaWNlKCk7cmV0dXJuIHRoaXMuX3Jlc2V0KCksZX19Y29uc3QgWXI9ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmdldE1vZHVsZShtcyk7cmV0dXJue1NES1R5cGU6MTAsU0RLQXBwSUQ6dC5nZXRTREtBcHBJRCgpLFNES1ZlcnNpb246dC5nZXRWZXJzaW9uKCksdGlueUlEOk51bWJlcih0LmdldFRpbnlJRCgpKSx1c2VySUQ6dC5nZXRVc2VySUQoKSxwbGF0Zm9ybTplLmdldFBsYXRmb3JtKCksaW5zdGFuY2VJRDp0LmdldEluc3RhbmNlSUQoKSx0cmFjZUlEOmNlKCl9fTtjbGFzcyBqciBleHRlbmRzIEZze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX249XCJFdmVudFN0YXRNb2R1bGVcIix0aGlzLlRBRz1cImltLXNzb2xvZy1ldmVudFwiLHRoaXMuX3JlcG9ydEJvZHk9bmV3IFdyLHRoaXMuTUlOX1RIUkVTSE9MRD0yMCx0aGlzLk1BWF9USFJFU0hPTEQ9MTAwLHRoaXMuV0FJVElOR19USU1FPTZlNCx0aGlzLlJFUE9SVF9MRVZFTD1bNCw1LDZdLHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSx0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLHRoaXMuX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCk7Y29uc3QgdD10aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7dC5vbihLbix0aGlzLl9vbkxvZ2luU3VjY2Vzcyx0aGlzKSx0Lm9uKFduLHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfXJlcG9ydEF0T25jZSgpe19lLmQodGhpcy5fbitcIi5yZXBvcnRBdE9uY2VcIiksdGhpcy5fcmVwb3J0KCl9X29uTG9naW5TdWNjZXNzKCl7Y29uc3QgZT10aGlzLmdldE1vZHVsZShNcyksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpOyFMdCh0KSYmJGUodC5mb3JFYWNoKSYmKF9lLmwoYCR7dGhpcy5fbn0uX29uTG9naW5TdWNjZXNzIGdldCBzc29sb2cgaW4gc3RvcmFnZSwgY291bnQ6JHt0Lmxlbmd0aH1gKSx0LmZvckVhY2goZT0+e3RoaXMuX3JlcG9ydEJvZHkucHVzaEluKGUpfSksZS5yZW1vdmVJdGVtKHRoaXMuVEFHLCExKSl9X29uQ2xvdWRDb25maWdVcGRhdGVkKCl7Y29uc3QgZT10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF90aHJlc2hvbGRcIiksdD10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF93YWl0aW5nXCIpLHM9dGhpcy5nZXRDbG91ZENvbmZpZyhcImV2dF9ycHRfbGV2ZWxcIiksbz10aGlzLmdldENsb3VkQ29uZmlnKFwiZXZ0X3JwdF9zZGthcHBpZF9ibFwiKSxpPXRoaXMuZ2V0Q2xvdWRDb25maWcoXCJldnRfcnB0X3RpbnlpZF93bFwiKTt3ZShlKXx8KHRoaXMuTUlOX1RIUkVTSE9MRD1OdW1iZXIoZSkpLHdlKHQpfHwodGhpcy5XQUlUSU5HX1RJTUU9TnVtYmVyKHQpKSx3ZShzKXx8KHRoaXMuUkVQT1JUX0xFVkVMPXMuc3BsaXQoXCIsXCIpLm1hcChlPT5OdW1iZXIoZSkpKSx3ZShvKXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1vLnNwbGl0KFwiLFwiKS5tYXAoZT0+TnVtYmVyKGUpKSksd2UoaSl8fCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPWkuc3BsaXQoXCIsXCIpKX1wdXNoSW4oZSl7ZSBpbnN0YW5jZW9mIENuJiYoZS51cGRhdGVUaW1lU3RhbXAoKSx0aGlzLl9yZXBvcnRCb2R5LnB1c2hJbihlKSx0aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NOdW1Jbk1lbW9yeSgpPj10aGlzLk1JTl9USFJFU0hPTEQmJnRoaXMuX3JlcG9ydCgpKX1vbkNoZWNrVGltZXIoKXtEYXRlLm5vdygpPHRoaXMuX2xhc3RSZXBvcnRUaW1lK3RoaXMuV0FJVElOR19USU1FfHx0aGlzLl9yZXBvcnRCb2R5LmlzRW1wdHkoKXx8dGhpcy5fcmVwb3J0KCl9X2ZpbHRlckxvZ3MoZSl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShtcykscz10LmdldFNES0FwcElEKCksbz10LmdldFRpbnlJRCgpO2lmKG10KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVCxzKSYmIU10KHRoaXMuUkVQT1JUX1RJTllJRF9XSElURUxJU1QsbykpcmV0dXJuW107cmV0dXJuIGUuZmlsdGVyKGU9PnRoaXMuUkVQT1JUX0xFVkVMLmluY2x1ZGVzKGUubGV2ZWwpKX1fcmVwb3J0KCl7aWYodGhpcy5fcmVwb3J0Qm9keS5pc0VtcHR5KCkpcmV0dXJuO2NvbnN0IGU9dGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzSW5NZW1vcnkoKSx0PXRoaXMuX2ZpbHRlckxvZ3MoZSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiB2b2lkKHRoaXMuX2xhc3RSZXBvcnRUaW1lPURhdGUubm93KCkpO2NvbnN0IHM9e2hlYWRlcjpZcih0aGlzKSxldmVudDp0fTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpHaSxyZXF1ZXN0RGF0YTp7Li4uc319KS50aGVuKCgpPT57dGhpcy5fbGFzdFJlcG9ydFRpbWU9RGF0ZS5ub3coKX0pLmNhdGNoKHQ9PntfZS53KGAke3RoaXMuX259LnJlcG9ydCBmYWlsZWQuIG5ldHdvcmtUeXBlOiR7dGhpcy5nZXROZXR3b3JrVHlwZSgpfSBlcnJvcjpgLHQpLHRoaXMuX3JlcG9ydEJvZHkuYmFja2ZpbGwoZSk7dGhpcy5fcmVwb3J0Qm9keS5nZXRMb2dzTnVtSW5NZW1vcnkoKT50aGlzLk1BWF9USFJFU0hPTEQmJnRoaXMuX2ZsdXNoQXRPbmNlKCl9KX1fZmx1c2hBdE9uY2UoKXtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKE1zKSx0PWUuZ2V0SXRlbSh0aGlzLlRBRywhMSkscz10aGlzLl9yZXBvcnRCb2R5LmdldExvZ3NJbk1lbW9yeSgpLG89dGhpcy5fbitcIi5fZmx1c2hBdE9uY2VcIjtpZihMdCh0KSlfZS5sKGAke299IGNvdW50OiR7cy5sZW5ndGh9YCksZS5zZXRJdGVtKHRoaXMuVEFHLHMsITAsITEpO2Vsc2V7bGV0IGk9cy5jb25jYXQodCk7aS5sZW5ndGg+dGhpcy5NQVhfVEhSRVNIT0xEJiYoaT1pLnNsaWNlKDAsdGhpcy5NQVhfVEhSRVNIT0xEKSksX2UubChgJHtvfSBjb3VudDoke2kubGVuZ3RofWApLGUuc2V0SXRlbSh0aGlzLlRBRyxpLCEwLCExKX19cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fbGFzdFJlcG9ydFRpbWU9MCx0aGlzLl9yZXBvcnQoKSx0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9W10sdGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1bXX19Y29uc3QgenI9XCJub25lXCIsSnI9XCJvbmxpbmVcIixYcj1bbm4uT1ZFUl9GUkVRVUVOQ1lfTElNSVQsbm4uT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SXTtjbGFzcyBacntjb25zdHJ1Y3RvcihlKXt0aGlzLl9tPWUsdGhpcy5fbmV0d29ya1R5cGU9XCJcIix0aGlzLl9uPVwiTmV0TW9uaXRvck1vZHVsZVwiLHRoaXMuTUFYX1dBSVRfVElNRT0zZTMsdGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2s9bnVsbCx0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz1udWxsLHRoaXMuX3dlYk9mZmxpbmVDYWxsYmFjaz1udWxsfXN0YXJ0KCl7UD8ody5nZXROZXR3b3JrVHlwZSh7c3VjY2VzczplPT57dGhpcy5fbmV0d29ya1R5cGU9ZS5uZXR3b3JrVHlwZXx8ZS5zdWJ0eXBlfHxcIlwiLGUubmV0d29ya1R5cGU9PT16cj9fZS53KHRoaXMuX24rXCIuc3RhcnQgbm8gbmV0d29yaywgcGxlYXNlIGNoZWNrIVwiKTpfZS5pKGAke3RoaXMuX259LnN0YXJ0IG5ldHdvcmtUeXBlOiR7ZS5uZXR3b3JrVHlwZX1gKX19KSx0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaz10aGlzLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2UuYmluZCh0aGlzKSx3Lm9uTmV0d29ya1N0YXR1c0NoYW5nZSh0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaykpOih0aGlzLl9uZXR3b3JrVHlwZT1Kcix0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz10aGlzLl9vbldlYk9ubGluZS5iaW5kKHRoaXMpLHRoaXMuX3dlYk9mZmxpbmVDYWxsYmFjaz10aGlzLl9vbldlYk9mZmxpbmUuYmluZCh0aGlzKSx3aW5kb3cmJih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX3dlYk9ubGluZUNhbGxiYWNrKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIix0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2spKSl9X29uV2ViT25saW5lKCl7dGhpcy5fb25OZXR3b3JrU3RhdHVzQ2hhbmdlKHtpc0Nvbm5lY3RlZDohMCxuZXR3b3JrVHlwZTpKcn0pfV9vbldlYk9mZmxpbmUoKXt0aGlzLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2Uoe2lzQ29ubmVjdGVkOiExLG5ldHdvcmtUeXBlOnpyfSl9X29uTmV0d29ya1N0YXR1c0NoYW5nZShlKXtjb25zdHtpc0Nvbm5lY3RlZDp0LG5ldHdvcmtUeXBlOnN9PWUsbz10aGlzLl9uK1wiLl9vbk5ldHdvcmtTdGF0dXNDaGFuZ2VcIjtsZXQgaT0hMTtpZih0KXtpZihfZS5pKGAke299IHByZXZpb3VzOiR7dGhpcy5fbmV0d29ya1R5cGV9IGN1cnJlbnQ6JHtzfWApLHRoaXMuX25ldHdvcmtUeXBlIT09cyl7aT0hMDt0aGlzLl9tLmdldE1vZHVsZShTcykucmVDb25uZWN0KCEwKX19ZWxzZSBpZih0aGlzLl9uZXR3b3JrVHlwZSE9PXMpe2k9ITAsX2UudyhvK1wiIG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIik7dGhpcy5fbS5nZXRNb2R1bGUoU3MpLm9mZmxpbmUoKX1pZihpKXtuZXcgQ24oXCJuZXR3b3JrQ2hhbmdlXCIpLnNldE1lc3NhZ2UoYGlzQ29ubmVjdGVkOiR7dH0gcHJldmlvdXNOZXR3b3JrVHlwZToke3RoaXMuX25ldHdvcmtUeXBlfSBuZXR3b3JrVHlwZToke3N9YCkuZW5kKCksdGhpcy5fbmV0d29ya1R5cGU9c319cHJvYmUoZSl7aWYoIXdlKGUpJiZYci5pbmNsdWRlcyhlLmNvZGUpKXJldHVybiBQcm9taXNlLnJlc29sdmUoWyEwLHRoaXMuX25ldHdvcmtUeXBlXSk7Y29uc3QgdD10aGlzLl9uK1wiLnByb2JlXCI7cmV0dXJuIG5ldyBQcm9taXNlKChlLHMpPT57UD93LmdldE5ldHdvcmtUeXBlKHtzdWNjZXNzOnM9Pnt0aGlzLl9uZXR3b3JrVHlwZT1zLm5ldHdvcmtUeXBlLHMubmV0d29ya1R5cGU9PT16cj8oX2Uudyh0K1wiIG5vIG5ldHdvcmssIHBsZWFzZSBjaGVjayFcIiksZShbITEscy5uZXR3b3JrVHlwZV0pKTooX2UuaShgJHt0fSBuZXR3b3JrVHlwZToke3MubmV0d29ya1R5cGV9YCksZShbITAscy5uZXR3b3JrVHlwZV0pKX19KTp0aGlzLl9uZXR3b3JrVHlwZT09PXpyP2UoWyExLHpyXSk6ZShbITAsSnJdKX0pfWdldE5ldHdvcmtUeXBlKCl7cmV0dXJuIHRoaXMuX25ldHdvcmtUeXBlfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLFA/bnVsbCE9PXRoaXMuX21wTmV0d29ya1N0YXR1c0NhbGxiYWNrJiYody5vZmZOZXR3b3JrU3RhdHVzQ2hhbmdlJiYoVXx8Tj93Lm9mZk5ldHdvcmtTdGF0dXNDaGFuZ2UodGhpcy5fbXBOZXR3b3JrU3RhdHVzQ2FsbGJhY2spOncub2ZmTmV0d29ya1N0YXR1c0NoYW5nZSgpKSx0aGlzLl9tcE5ldHdvcmtTdGF0dXNDYWxsYmFjaz1udWxsKTp3aW5kb3cmJihudWxsIT09dGhpcy5fd2ViT25saW5lQ2FsbGJhY2smJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMuX3dlYk9ubGluZUNhbGxiYWNrKSx0aGlzLl93ZWJPbmxpbmVDYWxsYmFjaz1udWxsKSxudWxsIT09dGhpcy5fb25XZWJPZmZsaW5lJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdGhpcy5fd2ViT2ZmbGluZUNhbGxiYWNrKSx0aGlzLl93ZWJPZmZsaW5lQ2FsbGJhY2s9bnVsbCkpfX1mdW5jdGlvbiBRcihlLHQpe3JldHVybiBlKHQ9e2V4cG9ydHM6e319LHQuZXhwb3J0cyksdC5leHBvcnRzfXZhciBlYT1RcigoZnVuY3Rpb24oZSl7dmFyIHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxzPVwiflwiO2Z1bmN0aW9uIG8oKXt9ZnVuY3Rpb24gaShlLHQscyl7dGhpcy5mbj1lLHRoaXMuY29udGV4dD10LHRoaXMub25jZT1zfHwhMX1mdW5jdGlvbiBuKGUsdCxvLG4scil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTt2YXIgYT1uZXcgaShvLG58fGUsciksdT1zP3MrdDp0O3JldHVybiBlLl9ldmVudHNbdV0/ZS5fZXZlbnRzW3VdLmZuP2UuX2V2ZW50c1t1XT1bZS5fZXZlbnRzW3VdLGFdOmUuX2V2ZW50c1t1XS5wdXNoKGEpOihlLl9ldmVudHNbdV09YSxlLl9ldmVudHNDb3VudCsrKSxlfWZ1bmN0aW9uIHIoZSx0KXswPT0tLWUuX2V2ZW50c0NvdW50P2UuX2V2ZW50cz1uZXcgbzpkZWxldGUgZS5fZXZlbnRzW3RdfWZ1bmN0aW9uIGEoKXt0aGlzLl9ldmVudHM9bmV3IG8sdGhpcy5fZXZlbnRzQ291bnQ9MH1PYmplY3QuY3JlYXRlJiYoby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKSwobmV3IG8pLl9fcHJvdG9fX3x8KHM9ITEpKSxhLnByb3RvdHlwZS5ldmVudE5hbWVzPWZ1bmN0aW9uKCl7dmFyIGUsbyxpPVtdO2lmKDA9PT10aGlzLl9ldmVudHNDb3VudClyZXR1cm4gaTtmb3IobyBpbiBlPXRoaXMuX2V2ZW50cyl0LmNhbGwoZSxvKSYmaS5wdXNoKHM/by5zbGljZSgxKTpvKTtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9pLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpKTppfSxhLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9cz9zK2U6ZSxvPXRoaXMuX2V2ZW50c1t0XTtpZighbylyZXR1cm5bXTtpZihvLmZuKXJldHVybltvLmZuXTtmb3IodmFyIGk9MCxuPW8ubGVuZ3RoLHI9bmV3IEFycmF5KG4pO2k8bjtpKyspcltpXT1vW2ldLmZuO3JldHVybiByfSxhLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUpe3ZhciB0PXM/cytlOmUsbz10aGlzLl9ldmVudHNbdF07cmV0dXJuIG8/by5mbj8xOm8ubGVuZ3RoOjB9LGEucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSx0LG8saSxuLHIpe3ZhciBhPXM/cytlOmU7aWYoIXRoaXMuX2V2ZW50c1thXSlyZXR1cm4hMTt2YXIgdSxjLGw9dGhpcy5fZXZlbnRzW2FdLGQ9YXJndW1lbnRzLmxlbmd0aDtpZihsLmZuKXtzd2l0Y2gobC5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbC5mbix2b2lkIDAsITApLGQpe2Nhc2UgMTpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCksITA7Y2FzZSAyOnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQpLCEwO2Nhc2UgMzpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0LG8pLCEwO2Nhc2UgNDpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0LG8saSksITA7Y2FzZSA1OnJldHVybiBsLmZuLmNhbGwobC5jb250ZXh0LHQsbyxpLG4pLCEwO2Nhc2UgNjpyZXR1cm4gbC5mbi5jYWxsKGwuY29udGV4dCx0LG8saSxuLHIpLCEwfWZvcihjPTEsdT1uZXcgQXJyYXkoZC0xKTtjPGQ7YysrKXVbYy0xXT1hcmd1bWVudHNbY107bC5mbi5hcHBseShsLmNvbnRleHQsdSl9ZWxzZXt2YXIgcCxoPWwubGVuZ3RoO2ZvcihjPTA7YzxoO2MrKylzd2l0Y2gobFtjXS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbFtjXS5mbix2b2lkIDAsITApLGQpe2Nhc2UgMTpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0KTticmVhaztjYXNlIDI6bFtjXS5mbi5jYWxsKGxbY10uY29udGV4dCx0KTticmVhaztjYXNlIDM6bFtjXS5mbi5jYWxsKGxbY10uY29udGV4dCx0LG8pO2JyZWFrO2Nhc2UgNDpsW2NdLmZuLmNhbGwobFtjXS5jb250ZXh0LHQsbyxpKTticmVhaztkZWZhdWx0OmlmKCF1KWZvcihwPTEsdT1uZXcgQXJyYXkoZC0xKTtwPGQ7cCsrKXVbcC0xXT1hcmd1bWVudHNbcF07bFtjXS5mbi5hcHBseShsW2NdLmNvbnRleHQsdSl9fXJldHVybiEwfSxhLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQscyl7cmV0dXJuIG4odGhpcyxlLHQscywhMSl9LGEucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0LHMpe3JldHVybiBuKHRoaXMsZSx0LHMsITApfSxhLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLHQsbyxpKXt2YXIgbj1zP3MrZTplO2lmKCF0aGlzLl9ldmVudHNbbl0pcmV0dXJuIHRoaXM7aWYoIXQpcmV0dXJuIHIodGhpcyxuKSx0aGlzO3ZhciBhPXRoaXMuX2V2ZW50c1tuXTtpZihhLmZuKWEuZm4hPT10fHxpJiYhYS5vbmNlfHxvJiZhLmNvbnRleHQhPT1vfHxyKHRoaXMsbik7ZWxzZXtmb3IodmFyIHU9MCxjPVtdLGw9YS5sZW5ndGg7dTxsO3UrKykoYVt1XS5mbiE9PXR8fGkmJiFhW3VdLm9uY2V8fG8mJmFbdV0uY29udGV4dCE9PW8pJiZjLnB1c2goYVt1XSk7Yy5sZW5ndGg/dGhpcy5fZXZlbnRzW25dPTE9PT1jLmxlbmd0aD9jWzBdOmM6cih0aGlzLG4pfXJldHVybiB0aGlzfSxhLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGU/KHQ9cz9zK2U6ZSx0aGlzLl9ldmVudHNbdF0mJnIodGhpcyx0KSk6KHRoaXMuX2V2ZW50cz1uZXcgbyx0aGlzLl9ldmVudHNDb3VudD0wKSx0aGlzfSxhLnByb3RvdHlwZS5vZmY9YS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsYS5wcm90b3R5cGUuYWRkTGlzdGVuZXI9YS5wcm90b3R5cGUub24sYS5wcmVmaXhlZD1zLGEuRXZlbnRFbWl0dGVyPWEsZS5leHBvcnRzPWF9KSk7Y2xhc3MgdGEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiQmlnRGF0YUNoYW5uZWxNb2R1bGVcIix0aGlzLkZJTEVUWVBFPXtTT1VORDoyMTA2LEZJTEU6MjEwNyxWSURFTzoyMTEzfSx0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyPVwiZ3JvdXB0YWxrLmMyYy5xcS5jb21cIix0aGlzLl9CREhCaXpJRD0xMDAwMSx0aGlzLl9hdXRoS2V5PVwiXCIsdGhpcy5fZXhwaXJlVGltZT0wLHRoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihLbix0aGlzLl9nZXRBdXRoS2V5LHRoaXMpfV9nZXRBdXRoS2V5KCl7dGhpcy5pc0ludGwoKXx8dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6SHN9KS50aGVuKGU9PntlLmRhdGEuYXV0aEtleSYmKHRoaXMuX2F1dGhLZXk9ZS5kYXRhLmF1dGhLZXksdGhpcy5fZXhwaXJlVGltZT1wYXJzZUludChlLmRhdGEuZXhwaXJlVGltZSkpfSl9X2lzRnJvbU9sZGVyVmVyc2lvbihlKXtyZXR1cm4hKCFlLmNvbnRlbnR8fDI9PT1lLmNvbnRlbnQuZG93bmxvYWRGbGFnKX1wYXJzZUVsZW1lbnRzKGUsdCl7aWYoIWJlKGUpfHwhdClyZXR1cm5bXTtjb25zdCBzPVtdO2xldCBvPW51bGw7Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspbz1lW2ldLHRoaXMuX25lZWRQYXJzZShvKT9zLnB1c2godGhpcy5fcGFyc2VFbGVtZW50KG8sdCkpOnMucHVzaChlW2ldKTtyZXR1cm4gc31fbmVlZFBhcnNlKGUpe3JldHVybiFlLmNsb3VkQ3VzdG9tRGF0YSYmISghdGhpcy5faXNGcm9tT2xkZXJWZXJzaW9uKGUpfHxlLnR5cGUhPT10Lk1TR19BVURJTyYmZS50eXBlIT09dC5NU0dfRklMRSYmZS50eXBlIT09dC5NU0dfVklERU8pfV9wYXJzZUVsZW1lbnQoZSxzKXtzd2l0Y2goZS50eXBlKXtjYXNlIHQuTVNHX0FVRElPOnJldHVybiB0aGlzLl9wYXJzZUF1ZGlvRWxlbWVudChlLHMpO2Nhc2UgdC5NU0dfRklMRTpyZXR1cm4gdGhpcy5fcGFyc2VGaWxlRWxlbWVudChlLHMpO2Nhc2UgdC5NU0dfVklERU86cmV0dXJuIHRoaXMuX3BhcnNlVmlkZW9FbGVtZW50KGUscyl9fV9wYXJzZUF1ZGlvRWxlbWVudChlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlbkF1ZGlvVXJsKGUuY29udGVudC51dWlkLHQpLGV9X3BhcnNlRmlsZUVsZW1lbnQoZSx0KXtyZXR1cm4gZS5jb250ZW50LnVybD10aGlzLl9nZW5GaWxlVXJsKGUuY29udGVudC51dWlkLHQsZS5jb250ZW50LmZpbGVOYW1lKSxlfV9wYXJzZVZpZGVvRWxlbWVudChlLHQpe3JldHVybiBlLmNvbnRlbnQudXJsPXRoaXMuX2dlblZpZGVvVXJsKGUuY29udGVudC51dWlkLHQpLGV9X2dlbkF1ZGlvVXJsKGUsdCl7aWYoXCJcIj09PXRoaXMuX2F1dGhLZXkpcmV0dXJuXCJcIjtjb25zdCBzPXRoaXMuZ2V0TW9kdWxlKG1zKS5nZXRTREtBcHBJRCgpO3JldHVybmBodHRwczovLyR7dGhpcy5fYmRoX2Rvd25sb2FkX3NlcnZlcn0vYXNuLmNvbS9zdGRkb3dubG9hZF9jb21tb25fZmlsZT9hdXRoa2V5PSR7dGhpcy5fYXV0aEtleX0mYmlkPSR7dGhpcy5fQkRIQml6SUR9JnN1YmJpZD0ke3N9JmZpbGVpZD0ke2V9JmZpbGV0eXBlPSR7dGhpcy5GSUxFVFlQRS5TT1VORH0mb3BlbmlkPSR7dH0mdmVyPTBgfV9nZW5GaWxlVXJsKGUsdCxzKXtpZihcIlwiPT09dGhpcy5fYXV0aEtleSlyZXR1cm5cIlwiO3N8fChzPWAke01hdGguZmxvb3IoMWU1Kk1hdGgucmFuZG9tKCkpfS0ke0RhdGUubm93KCl9YCk7Y29uc3Qgbz10aGlzLmdldE1vZHVsZShtcykuZ2V0U0RLQXBwSUQoKTtyZXR1cm5gaHR0cHM6Ly8ke3RoaXMuX2JkaF9kb3dubG9hZF9zZXJ2ZXJ9L2Fzbi5jb20vc3RkZG93bmxvYWRfY29tbW9uX2ZpbGU/YXV0aGtleT0ke3RoaXMuX2F1dGhLZXl9JmJpZD0ke3RoaXMuX0JESEJpeklEfSZzdWJiaWQ9JHtvfSZmaWxlaWQ9JHtlfSZmaWxldHlwZT0ke3RoaXMuRklMRVRZUEUuRklMRX0mb3BlbmlkPSR7dH0mdmVyPTAmZmlsZW5hbWU9JHtlbmNvZGVVUklDb21wb25lbnQocyl9YH1fZ2VuVmlkZW9VcmwoZSx0KXtpZihcIlwiPT09dGhpcy5fYXV0aEtleSlyZXR1cm5cIlwiO2NvbnN0IHM9dGhpcy5nZXRNb2R1bGUobXMpLmdldFNES0FwcElEKCk7cmV0dXJuYGh0dHBzOi8vJHt0aGlzLl9iZGhfZG93bmxvYWRfc2VydmVyfS9hc24uY29tL3N0ZGRvd25sb2FkX2NvbW1vbl9maWxlP2F1dGhrZXk9JHt0aGlzLl9hdXRoS2V5fSZiaWQ9JHt0aGlzLl9CREhCaXpJRH0mc3ViYmlkPSR7c30mZmlsZWlkPSR7ZX0mZmlsZXR5cGU9JHt0aGlzLkZJTEVUWVBFLlZJREVPfSZvcGVuaWQ9JHt0fSZ2ZXI9MGB9cmVzZXQoKXt0aGlzLl9hdXRoS2V5PVwiXCIsdGhpcy5leHBpcmVUaW1lPTB9fWNsYXNzIHNhIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlVwbG9hZE1vZHVsZVwiLHRoaXMuVElNVXBsb2FkUGx1Z2luPW51bGwsdGhpcy50aW1VcGxvYWRQbHVnaW49bnVsbCx0aGlzLkNPU1NESz1udWxsLHRoaXMuX2Nvc1VwbG9hZE1ldGhvZD1udWxsLHRoaXMuZXhwaXJlZFRpbWVMaW1pdD02MDAsdGhpcy5hcHBpZD0wLHRoaXMuYnVja2V0TmFtZT1cIlwiLHRoaXMuY2lVcmw9XCJcIix0aGlzLmRpcmVjdG9yeT1cIlwiLHRoaXMuZG93bmxvYWRVcmw9XCJcIix0aGlzLnVwbG9hZFVybD1cIlwiLHRoaXMucmVnaW9uPVwiYXAtc2hhbmdoYWlcIix0aGlzLmNvcz1udWxsLHRoaXMuY29zT3B0aW9ucz17c2VjcmV0SWQ6XCJcIixzZWNyZXRLZXk6XCJcIixzZXNzaW9uVG9rZW46XCJcIixleHBpcmVkVGltZTowfSx0aGlzLnVwbG9hZEZpbGVUeXBlPVwiXCIsdGhpcy5kdXJhdGlvbj05MDAsdGhpcy50cnlDb3VudD0wLHRoaXMuVVBMT0FEX1NJWkVfTElNSVQ9e0FVRElPOjIwOTcxNTIwLEZJTEU6MTA0ODU3NjAwLElNQUdFOjIwOTcxNTIwLFZJREVPOjEwNDg1NzYwMH07Y29uc3QgdD10aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7dC5vbihLbix0aGlzLl9pbml0LHRoaXMpLHQub24oV24sdGhpcy5fb25DbG91ZENvbmZpZ1VwZGF0ZWQsdGhpcyl9X2luaXQoKXtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKHlzKTtpZih0aGlzLlRJTVVwbG9hZFBsdWdpbj1lLmdldFBsdWdpbihcInRpbS11cGxvYWQtcGx1Z2luXCIpLHRoaXMuVElNVXBsb2FkUGx1Z2luKXJldHVybiB2b2lkIHRoaXMuX2luaXRVcGxvYWRlck1ldGhvZCgpO2NvbnN0IHQ9UD9cImNvcy13eC1zZGtcIjpcImNvcy1qcy1zZGtcIjt0aGlzLkNPU1NESz1lLmdldFBsdWdpbih0KSx0aGlzLkNPU1NESz8odGhpcy5fZ2V0QXV0aG9yaXphdGlvbktleSgpLHRoaXMub3V0cHV0V2FybmluZyhcIkNvc1JlcGxhY2VtZW50XCIsdCkpOnRoaXMub3V0cHV0V2FybmluZyhcIlBsdWdpblVuZGV0ZWN0ZWRcIil9X29uQ2xvdWRDb25maWdVcGRhdGVkKCl7Y29uc3QgZT10aGlzLl9uK1wiLl9vbkNsb3VkQ29uZmlnVXBkYXRlZFwiLHQ9dGhpcy5nZXRDbG91ZENvbmZpZyhcInVwbG9hZF9zaXplX2xpbWl0XCIpO2lmKF9lLmwoYCR7ZX0gdXBsb2FkU2l6ZUxpbWl0OiR7dH1gKSwhd2UodCkpdHJ5e2NvbnN0IGU9SlNPTi5wYXJzZSh0KTt0aGlzLlVQTE9BRF9TSVpFX0xJTUlUPXtBVURJTzplLmE/MTA0ODU3NipwYXJzZUludChlLmEpOnRoaXMuVVBMT0FEX1NJWkVfTElNSVQuQVVESU8sRklMRTplLmY/MTA0ODU3NipwYXJzZUludChlLmYpOnRoaXMuVVBMT0FEX1NJWkVfTElNSVQuRklMRSxJTUFHRTplLmk/MTA0ODU3NipwYXJzZUludChlLmkpOnRoaXMuVVBMT0FEX1NJWkVfTElNSVQuSU1BR0UsVklERU86ZS52PzEwNDg1NzYqcGFyc2VJbnQoZS52KTp0aGlzLlVQTE9BRF9TSVpFX0xJTUlULlZJREVPfX1jYXRjaChzKXtfZS5lKGUrXCIgSlNPTiBwYXJzZSBlcnJvci4gdXBsb2FkU2l6ZUxpbWl0OlwiLHQpfX1fZ2V0QXV0aG9yaXphdGlvbktleSgpe2NvbnN0IGU9dGhpcy5fbitcIi5fZ2V0QXV0aG9yaXphdGlvbktleVwiLHQ9bmV3IENuKFwiX2dldEF1dGhvcml6YXRpb25LZXlcIikscz1NYXRoLmNlaWwoRGF0ZS5ub3coKS8xZTMpO3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk5pLHJlcXVlc3REYXRhOntkdXJhdGlvbjp0aGlzLmV4cGlyZWRUaW1lTGltaXR9fSkudGhlbihvPT57Y29uc3R7ZGF0YTppfT1vO19lLmwoZStcIiBvay4gZGF0YTpcIixpKTtjb25zdCBuPWkuZXhwaXJlZFRpbWUtczt0LnNldE1lc3NhZ2UoYHJlcXVlc3RJZDoke2kucmVxdWVzdElkfSByZXF1ZXN0VGltZToke3N9IGV4cGlyZWRUaW1lOiR7aS5leHBpcmVkVGltZX0gZGlmZjoke259c2ApLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksIVAmJmkucmVnaW9uJiYodGhpcy5yZWdpb249aS5yZWdpb24pLHRoaXMuYXBwaWQ9aS5hcHBpZCx0aGlzLmJ1Y2tldE5hbWU9aS5idWNrZXROYW1lLHRoaXMuY2lVcmw9aS5jaVVybCx0aGlzLmRpcmVjdG9yeT1pLmRpcmVjdG9yeSx0aGlzLmRvd25sb2FkVXJsPWkuZG93bmxvYWRVcmwsdGhpcy51cGxvYWRVcmw9aS51cGxvYWRVcmwsdGhpcy5jb3NPcHRpb25zPXtzZWNyZXRJZDppLnNlY3JldElkLHNlY3JldEtleTppLnNlY3JldEtleSxzZXNzaW9uVG9rZW46aS5zZXNzaW9uVG9rZW4sZXhwaXJlZFRpbWU6aS5leHBpcmVkVGltZX0sX2UubChgJHtlfSBvay4gcmVnaW9uOiR7dGhpcy5yZWdpb259IGJ1Y2tldE5hbWU6JHt0aGlzLmJ1Y2tldE5hbWV9YCksdGhpcy5faW5pdFVwbG9hZGVyTWV0aG9kKCl9KS5jYXRjaChzPT57dGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbZSxvXSk9Pnt0LnNldEVycm9yKHMsZSxvKS5lbmQoKX0pLF9lLncoZStcIiBmYWlsZWQuIGVycm9yOlwiLHMpfSl9X2dldENvc1ByZVNpZ1VybChlKXtjb25zdCB0PXRoaXMuX24rXCIuX2dldENvc1ByZVNpZ1VybFwiLHM9TWF0aC5jZWlsKERhdGUubm93KCkvMWUzKSxvPW5ldyBDbihcIl9nZXRDb3NQcmVTaWdVcmxcIik7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlJpLHJlcXVlc3REYXRhOntmaWxlVHlwZTplLmZpbGVUeXBlLGZpbGVOYW1lOmUuZmlsZU5hbWUsdXBsb2FkTWV0aG9kOmUudXBsb2FkTWV0aG9kLGR1cmF0aW9uOmUuZHVyYXRpb259fSkudGhlbihlPT57dGhpcy50cnlDb3VudD0wO2NvbnN0IGk9ZS5kYXRhfHx7fSxuPWkuZXhwaXJlZFRpbWUtcztyZXR1cm4gX2UubCh0K1wiIG9rLiBkYXRhOlwiLGkpLG8uc2V0TWVzc2FnZShgcmVxdWVzdElkOiR7aS5yZXF1ZXN0SWR9IGV4cGlyZWRUaW1lOiR7aS5leHBpcmVkVGltZX0gZGlmZjoke259c2ApLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksaX0pLmNhdGNoKHM9PigtMT09PXMuY29kZSYmKHMuY29kZT1ubi5DT1NfR0VUX1NJR19GQUlMKSx0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLHRdKT0+e28uc2V0RXJyb3IocyxlLHQpLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIscyksdGhpcy50cnlDb3VudDwxPyh0aGlzLnRyeUNvdW50KyssdGhpcy5fZ2V0Q29zUHJlU2lnVXJsKGUpKToodGhpcy50cnlDb3VudD0wLFZuKHtjb2RlOm5uLkNPU19HRVRfU0lHX0ZBSUx9KSkpKX1faW5pdFVwbG9hZGVyTWV0aG9kKCl7aWYodGhpcy5USU1VcGxvYWRQbHVnaW4pcmV0dXJuIHRoaXMudGltVXBsb2FkUGx1Z2luPW5ldyB0aGlzLlRJTVVwbG9hZFBsdWdpbix2b2lkKHRoaXMuX2Nvc1VwbG9hZE1ldGhvZD0oZSx0KT0+e3RoaXMudGltVXBsb2FkUGx1Z2luLnVwbG9hZEZpbGUoZSx0KX0pO3RoaXMuYXBwaWQmJih0aGlzLmNvcz1QP25ldyB0aGlzLkNPU1NESyh7Rm9yY2VQYXRoU3R5bGU6ITAsZ2V0QXV0aG9yaXphdGlvbjp0aGlzLl9nZXRBdXRob3JpemF0aW9uLmJpbmQodGhpcyl9KTpuZXcgdGhpcy5DT1NTREsoe2dldEF1dGhvcml6YXRpb246dGhpcy5fZ2V0QXV0aG9yaXphdGlvbi5iaW5kKHRoaXMpfSksdGhpcy5fY29zVXBsb2FkTWV0aG9kPVA/KGUsdCk9Pnt0aGlzLmNvcy5wb3N0T2JqZWN0KGUsdCl9OihlLHQpPT57dGhpcy5jb3MudXBsb2FkRmlsZXMoZSx0KX0pfW9uQ2hlY2tUaW1lcihlKXtpZighdGhpcy5DT1NTREspcmV0dXJuO2lmKHRoaXMuVElNVXBsb2FkUGx1Z2luKXJldHVybjtpZighdGhpcy5pc0xvZ2dlZEluKCkpcmV0dXJuO2lmKGUlNjAhPTApcmV0dXJuO01hdGguY2VpbChEYXRlLm5vdygpLzFlMyk+PXRoaXMuY29zT3B0aW9ucy5leHBpcmVkVGltZS0xMjAmJnRoaXMuX2dldEF1dGhvcml6YXRpb25LZXkoKX1fZ2V0QXV0aG9yaXphdGlvbihlLHQpe3Qoe1RtcFNlY3JldElkOnRoaXMuY29zT3B0aW9ucy5zZWNyZXRJZCxUbXBTZWNyZXRLZXk6dGhpcy5jb3NPcHRpb25zLnNlY3JldEtleSxYQ29zU2VjdXJpdHlUb2tlbjp0aGlzLmNvc09wdGlvbnMuc2Vzc2lvblRva2VuLEV4cGlyZWRUaW1lOnRoaXMuY29zT3B0aW9ucy5leHBpcmVkVGltZX0pfXVwbG9hZChlKXtpZighMD09PWUuZ2V0UmVsYXlGbGFnKCkpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IHM9dGhpcy5nZXRNb2R1bGUoUnMpO3N3aXRjaChlLnR5cGUpe2Nhc2UgdC5NU0dfSU1BR0U6cmV0dXJuIHMuYWRkVG90YWxDb3VudChwbiksdGhpcy5fdXBsb2FkSW1hZ2UoZSk7Y2FzZSB0Lk1TR19GSUxFOnJldHVybiBzLmFkZFRvdGFsQ291bnQocG4pLHRoaXMuX3VwbG9hZEZpbGUoZSk7Y2FzZSB0Lk1TR19BVURJTzpyZXR1cm4gcy5hZGRUb3RhbENvdW50KHBuKSx0aGlzLl91cGxvYWRBdWRpbyhlKTtjYXNlIHQuTVNHX1ZJREVPOnJldHVybiBzLmFkZFRvdGFsQ291bnQocG4pLHRoaXMuX3VwbG9hZFZpZGVvKGUpO2RlZmF1bHQ6cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfX1fdXBsb2FkSW1hZ2UoZSl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShhcykscz1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRJbWFnZSh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZT0+e2lmKHMudXBkYXRlUGVyY2VudChlKSwkZShvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUn0pfX19KS50aGVuKCh7bG9jYXRpb246dCxmaWxlVHlwZTpvLGZpbGVTaXplOmksd2lkdGg6bixoZWlnaHQ6cixzbWFsbEltYWdlVXJsOmEsc21hbGxJbWFnZVdpZHRoOnUsc21hbGxJbWFnZUhlaWdodDpjLGxhcmdlSW1hZ2VVcmw6bCxsYXJnZUltYWdlV2lkdGg6ZCxsYXJnZUltYWdlSGVpZ2h0OnB9KT0+e2NvbnN0IGg9dGhpcy5pc1ByaXZhdGVOZXRXb3JrKCk/dDpYZSh0KTtsZXQgZyxfO3JldHVybiBzLnVwZGF0ZUltYWdlRm9ybWF0KG8pLGEmJmw/KGc9e3VybDphLHdpZHRoOnUsaGVpZ2h0OmN9LF89e3VybDpsLHdpZHRoOmQsaGVpZ2h0OnB9KTooZz1wdCh7b3JpZ2luVXJsOmgsb3JpZ2luV2lkdGg6bixvcmlnaW5IZWlnaHQ6cixtaW46MTk4fSksXz1wdCh7b3JpZ2luVXJsOmgsb3JpZ2luV2lkdGg6bixvcmlnaW5IZWlnaHQ6cixtaW46NzIwfSkpLHMudXBkYXRlSW1hZ2VJbmZvQXJyYXkoW3tzaXplOmksdXJsOmgsd2lkdGg6bixoZWlnaHQ6cn0sey4uLl99LHsuLi5nfV0pLGV9KX1fdXBsb2FkRmlsZShlKXtjb25zdCB0PXRoaXMuZ2V0TW9kdWxlKGFzKSxzPWUuZ2V0RWxlbWVudHMoKVswXSxvPXQuZ2V0TWVzc2FnZU9wdGlvbihlLmNsaWVudFNlcXVlbmNlKTtyZXR1cm4gdGhpcy5kb1VwbG9hZEZpbGUoe2ZpbGU6by5wYXlsb2FkLmZpbGUsdG86by50byxvblByb2dyZXNzOmU9PntpZihzLnVwZGF0ZVBlcmNlbnQoZSksJGUoby5vblByb2dyZXNzKSl0cnl7by5vblByb2dyZXNzKGUpfWNhdGNoKHQpe3JldHVybiBWbih7Y29kZTpubi5NRVNTQUdFX09OUFJPR1JFU1NfRlVOQ1RJT05fRVJST1J9KX19fSkudGhlbigoe2xvY2F0aW9uOnR9KT0+e2NvbnN0IG89dGhpcy5pc1ByaXZhdGVOZXRXb3JrKCk/dDpYZSh0KTtyZXR1cm4gcy51cGRhdGVGaWxlVXJsKG8pLGV9KX1fdXBsb2FkQXVkaW8oZSl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShhcykscz1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRBdWRpbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZT0+e2lmKHMudXBkYXRlUGVyY2VudChlKSwkZShvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUn0pfX19KS50aGVuKCh7bG9jYXRpb246dH0pPT57Y29uc3Qgbz10aGlzLmlzUHJpdmF0ZU5ldFdvcmsoKT90OlhlKHQpO3JldHVybiBzLnVwZGF0ZUF1ZGlvVXJsKG8pLGV9KX1fdXBsb2FkVmlkZW8oZSl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShhcykscz1lLmdldEVsZW1lbnRzKClbMF0sbz10LmdldE1lc3NhZ2VPcHRpb24oZS5jbGllbnRTZXF1ZW5jZSk7cmV0dXJuIHRoaXMuZG9VcGxvYWRWaWRlbyh7ZmlsZTpvLnBheWxvYWQuZmlsZSx0bzpvLnRvLG9uUHJvZ3Jlc3M6ZT0+e2lmKHMudXBkYXRlUGVyY2VudChlKSwkZShvLm9uUHJvZ3Jlc3MpKXRyeXtvLm9uUHJvZ3Jlc3MoZSl9Y2F0Y2godCl7cmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfT05QUk9HUkVTU19GVU5DVElPTl9FUlJPUn0pfX19KS50aGVuKHQ9Pntjb25zdHtsb2NhdGlvbjpvLHNuYXBzaG90SW5mbzppfT10LG49dGhpcy5pc1ByaXZhdGVOZXRXb3JrKCk/bzpYZShvKTtyZXR1cm4gcy51cGRhdGVWaWRlb1VybChuKSxMdChpKXx8cy51cGRhdGVTbmFwc2hvdEluZm8oaSksZX0pfV9jaGVja1NpemVFcnJvcihlKXtyZXR1cm4gVm4oe2NvZGU6bm5bYE1FU1NBR0VfJHtlfV9TSVpFX0xJTUlUYF0sbWVzc2FnZTp0aGlzLmdldEVycm9yTWVzc2FnZShcIlVwbG9hZFNpemVMaW1pdFwiLGUudG9Mb3dlckNhc2UoKSx0aGlzLlVQTE9BRF9TSVpFX0xJTUlUW2VdLzEwNDg1NzYrXCIgTUJcIil9KX1kb1VwbG9hZEltYWdlKGUpe2lmKCFlLmZpbGUpcmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfSU1BR0VfU0VMRUNUX0ZJTEVfRklSU1R9KTtjb25zdCB0PXRoaXMuX2NoZWNrSW1hZ2VUeXBlKGUuZmlsZSk7aWYoITAhPT10KXJldHVybiB0O2NvbnN0IHM9dGhpcy5fY2hlY2tJbWFnZVNpemUoZS5maWxlKTtpZighMCE9PXMpcmV0dXJuIHM7bGV0IG89bnVsbDtyZXR1cm4gdGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoWG4pLHRoaXMudXBsb2FkQnlDT1MoZSkudGhlbihlPT4obz1lLHRoaXMuaXNQcml2YXRlTmV0V29yaygpP3V0KGUubG9jYXRpb24pOnV0KFwiaHR0cHM6Ly9cIitlLmxvY2F0aW9uKSkpLnRoZW4oZT0+KG8ud2lkdGg9ZS53aWR0aCxvLmhlaWdodD1lLmhlaWdodCxQcm9taXNlLnJlc29sdmUobykpKX1fY2hlY2tJbWFnZVR5cGUoZSl7bGV0IHQ9XCJcIjtyZXR1cm4gdD1QP2UudXJsLnNsaWNlKGUudXJsLmxhc3RJbmRleE9mKFwiLlwiKSsxKTplLmZpbGVzWzBdLm5hbWUuc2xpY2UoZS5maWxlc1swXS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSsxKSx6bi5pbmRleE9mKHQudG9Mb3dlckNhc2UoKSk+PTB8fFZuKHtjb2RlOm5uLk1FU1NBR0VfSU1BR0VfVFlQRVNfTElNSVR9KX1fY2hlY2tJbWFnZVNpemUoZSl7bGV0IHQ9MDtyZXR1cm4gdD1QP2Uuc2l6ZTplLmZpbGVzWzBdLnNpemUsMD09PXQ/Vm4oe2NvZGU6bm4uTUVTU0FHRV9GSUxFX0lTX0VNUFRZfSk6dDx0aGlzLlVQTE9BRF9TSVpFX0xJTUlULklNQUdFfHx0aGlzLl9jaGVja1NpemVFcnJvcihcIklNQUdFXCIpfWRvVXBsb2FkRmlsZShlKXtsZXQgdD1udWxsO3JldHVybiBlLmZpbGU/ZS5maWxlLmZpbGVzWzBdLnNpemU+dGhpcy5VUExPQURfU0laRV9MSU1JVC5GSUxFP3RoaXMuX2NoZWNrU2l6ZUVycm9yKFwiRklMRVwiKTowPT09ZS5maWxlLmZpbGVzWzBdLnNpemU/KHQ9e2NvZGU6bm4uTUVTU0FHRV9GSUxFX0lTX0VNUFRZfSxWbih0KSk6KHRoaXMuX3NldFVwbG9hZEZpbGVUeXBlKGVyKSx0aGlzLnVwbG9hZEJ5Q09TKGUpKToodD17Y29kZTpubi5NRVNTQUdFX0ZJTEVfU0VMRUNUX0ZJTEVfRklSU1R9LFZuKHQpKX1kb1VwbG9hZFZpZGVvKGUpe3JldHVybiBlLmZpbGUudmlkZW9GaWxlLnNpemU+dGhpcy5VUExPQURfU0laRV9MSU1JVC5WSURFTz90aGlzLl9jaGVja1NpemVFcnJvcihcIlZJREVPXCIpOjA9PT1lLmZpbGUudmlkZW9GaWxlLnNpemU/Vm4oe2NvZGU6bm4uTUVTU0FHRV9GSUxFX0lTX0VNUFRZfSk6LTE9PT1Kbi5pbmRleE9mKGUuZmlsZS52aWRlb0ZpbGUudHlwZSk/Vm4oe2NvZGU6bm4uTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVH0pOih0aGlzLl9zZXRVcGxvYWRGaWxlVHlwZShabiksUD90aGlzLmhhbmRsZVZpZGVvVXBsb2FkKHtmaWxlOmUuZmlsZS52aWRlb0ZpbGUsb25Qcm9ncmVzczplLm9uUHJvZ3Jlc3N9KTpiP3RoaXMuaGFuZGxlVmlkZW9VcGxvYWQoZSk6dm9pZCAwKX1oYW5kbGVWaWRlb1VwbG9hZChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQscyk9Pnt0aGlzLnVwbG9hZEJ5Q09TKGUpLnRoZW4oZT0+e3QoZSl9KS5jYXRjaCgoKT0+e3RoaXMudXBsb2FkQnlDT1MoZSkudGhlbihlPT57dChlKX0pLmNhdGNoKCgpPT57cyhuZXcgRm4oe2NvZGU6bm4uTUVTU0FHRV9WSURFT19VUExPQURfRkFJTH0pKX0pfSl9KX1kb1VwbG9hZEF1ZGlvKGUpe3JldHVybiBlLmZpbGU/ZS5maWxlLnNpemU+dGhpcy5VUExPQURfU0laRV9MSU1JVC5BVURJTz90aGlzLl9jaGVja1NpemVFcnJvcihcIkFVRElPXCIpOjA9PT1lLmZpbGUuc2l6ZT9Wbih7Y29kZTpubi5NRVNTQUdFX0ZJTEVfSVNfRU1QVFl9KToodGhpcy5fc2V0VXBsb2FkRmlsZVR5cGUoUW4pLHRoaXMudXBsb2FkQnlDT1MoZSkpOlZuKHtjb2RlOm5uLk1FU1NBR0VfQVVESU9fVVBMT0FEX0ZBSUx9KX11cGxvYWRCeUNPUyhlKXtpZighJGUodGhpcy5fY29zVXBsb2FkTWV0aG9kKSlyZXR1cm4gdGhpcy5vdXRwdXRXYXJuaW5nKFwiUGx1Z2luVW5kZXRlY3RlZFwiKSxWbih7Y29kZTpubi5DT1NfVU5ERVRFQ1RFRH0pO2lmKHRoaXMudGltVXBsb2FkUGx1Z2luKXJldHVybiB0aGlzLl91cGxvYWRXaXRoUHJlU2lnVXJsKGUpO2NvbnN0IHQ9bmV3IENuKFwidXBsb2FkXCIpLHM9dGhpcy5fbitcIi51cGxvYWRCeUNPU1wiLG89RGF0ZS5ub3coKSxpPXRoaXMuX2dldEZpbGUoZSk7cmV0dXJuIG5ldyBQcm9taXNlKChuLHIpPT57Y29uc3QgYT1QP3RoaXMuX2NyZWF0ZUNvc09wdGlvbnNXWE1pbmlBcHAoZSk6dGhpcy5fY3JlYXRlQ29zT3B0aW9uc1dlYihlKSx1PXRoaXM7dGhpcy5fY29zVXBsb2FkTWV0aG9kKGEsKGUsYSk9Pntjb25zdCBjPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoYSl7aWYoZXx8YmUoYS5maWxlcykmJmEuZmlsZXNbMF0uZXJyb3Ipe2NvbnN0IGU9bmV3IEZuKHtjb2RlOm5uLk1FU1NBR0VfRklMRV9VUExPQURfRkFJTH0pO3JldHVybiB0LnNldEVycm9yKGUsITAsdGhpcy5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixhLmZpbGVzWzBdLmVycm9yKSw0MDM9PT1hLmZpbGVzWzBdLmVycm9yLnN0YXR1c0NvZGUmJihfZS53KHMrXCIgZmFpbGVkLiBjb3MgQWNjZXNzS2V5SWQgd2FzIGludmFsaWQsIHJlZ2FpbiBhdXRoIGtleSFcIiksdGhpcy5fZ2V0QXV0aG9yaXphdGlvbktleSgpKSx2b2lkIHIoZSl9Yy5maWxlTmFtZT1pLm5hbWUsYy5maWxlU2l6ZT1pLnNpemUsYy5maWxlVHlwZT1pLnR5cGUuc2xpY2UoaS50eXBlLmluZGV4T2YoXCIvXCIpKzEpLnRvTG93ZXJDYXNlKCksYy5sb2NhdGlvbj1QP2EuTG9jYXRpb246YS5maWxlc1swXS5kYXRhLkxvY2F0aW9uO2NvbnN0IGw9RGF0ZS5ub3coKS1vLGQ9YHNpemU6JHt1Ll9mb3JtYXRGaWxlU2l6ZShpLnNpemUpfSB0aW1lOiR7bH1tcyBzcGVlZDoke3UuX2Zvcm1hdFNwZWVkKDFlMyppLnNpemUvbCl9YDtfZS5sKGAke3N9IHN1Y2Nlc3MuIG5hbWU6JHtpLm5hbWV9ICR7ZH1gKSxuKGMpO2NvbnN0IHA9dGhpcy5nZXRNb2R1bGUoUnMpO3JldHVybiBwLmFkZENvc3QocG4sbCkscC5hZGRGaWxlU2l6ZShwbixpLnNpemUpLHZvaWQgdC5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoZCkuZW5kKCl9Y29uc3QgbD1uZXcgRm4oe2NvZGU6bm4uTUVTU0FHRV9GSUxFX1VQTE9BRF9GQUlMfSk7dC5zZXRFcnJvcihsLCEwLHUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksNDAzPT09ZS5zdGF0dXNDb2RlJiYoX2UudyhzK1wiIGZhaWxlZC4gY29zIEFjY2Vzc0tleUlkIHdhcyBpbnZhbGlkLCByZWdhaW4gYXV0aCBrZXkhXCIpLHRoaXMuX2dldEF1dGhvcml6YXRpb25LZXkoKSkscihsKX0pfSl9X3VwbG9hZFdpdGhQcmVTaWdVcmwoZSl7Y29uc3QgdD10aGlzLl9uK1wiLl91cGxvYWRXaXRoUHJlU2lnVXJsXCIscz10aGlzLl9nZXRGaWxlKGUpO3JldHVybiB0aGlzLl9jcmVhdGVDb3NPcHRpb25zUHJlU2lnVXJsKGUpLnRoZW4oZT0+bmV3IFByb21pc2UoKG8saSk9Pntjb25zdCBuPW5ldyBDbihcInVwbG9hZFwiKSx7cmVxdWVzdFNuYXBzaG90VXJsOnIsLi4uYX09ZSx1PURhdGUubm93KCk7dGhpcy5fY29zVXBsb2FkTWV0aG9kKGEsKGUsYyk9PntpZihlfHw0MDM9PT1jLnN0YXR1c0NvZGUpcmV0dXJuIG4uc2V0RXJyb3IobmV3IEZuKGUpLCEwLHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UubCh0K1wiIGZhaWxlZCwgZXJyb3I6XCIsZSksdm9pZCBpKG5ldyBGbih7Y29kZTpubi5NRVNTQUdFX0ZJTEVfVVBMT0FEX0ZBSUx9KSk7Y29uc3QgbD1PYmplY3QuY3JlYXRlKG51bGwpO2xldCBkPWMuZGF0YS5sb2NhdGlvbnx8XCJcIjt0aGlzLmlzUHJpdmF0ZU5ldFdvcmsoKXx8MCE9PWQuaW5kZXhPZihcImh0dHBzOi8vXCIpJiYwIT09ZC5pbmRleE9mKFwiaHR0cDovL1wiKXx8KGQ9ZC5zcGxpdChcIi8vXCIpWzFdKSxsLmZpbGVOYW1lPXMubmFtZSxsLmZpbGVTaXplPXMuc2l6ZSxsLmZpbGVUeXBlPXMudHlwZS5zbGljZShzLnR5cGUuaW5kZXhPZihcIi9cIikrMSkudG9Mb3dlckNhc2UoKSxsLmxvY2F0aW9uPWQ7Y29uc3QgcD1EYXRlLm5vdygpLXUsaD1gc2l6ZToke3RoaXMuX2Zvcm1hdEZpbGVTaXplKHMuc2l6ZSl9LHRpbWU6JHtwfW1zLHNwZWVkOiR7dGhpcy5fZm9ybWF0U3BlZWQoMWUzKnMuc2l6ZS9wKX0gcmVzOiR7SlNPTi5zdHJpbmdpZnkoYy5kYXRhKX1gO19lLmwoYCR7dH0gc3VjY2VzcyBuYW1lOiR7cy5uYW1lfSwke2h9YCksbi5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoaCkuZW5kKCk7Y29uc3QgZz10aGlzLmdldE1vZHVsZShScyk7Zy5hZGRDb3N0KHBuLHApLGcuYWRkRmlsZVNpemUocG4scy5zaXplKTtsZXQgXz1bXTtpZihhLnRodW1iVXJsJiZhLmxhcmdlVXJsJiYoXz1bdGhpcy5fZ2V0U21hbGxJbWFnZUluZm9CeVVybChhLnRodW1iVXJsLGwpLHRoaXMuX2dldExhcmdlSW1hZ2VJbmZvQnlVcmwoYS5sYXJnZVVybCxsKV0pLHImJl8ucHVzaCh0aGlzLl9nZXRTbmFwc2hvdEluZm9CeVVybChyLGwpKSxfLmxlbmd0aD4wKXJldHVybiBQcm9taXNlLmFsbChfKS50aGVuKCgpPT57byhsKX0pO28obCl9KX0pKX1fZ2V0UmF3T3JVcGxvYWRQcm94eVVybChlKXtjb25zdCB0PXRoaXMuZ2V0TW9kdWxlKG1zKS5nZXRGaWxlVXBsb2FkUHJveHkoKTtsZXQgcz1lO3JldHVybiB0JiYocz1lLnJlcGxhY2UoL15odHRwczpcXC9cXC9bXi9dKy8sdCkpLHN9X2dldEZpbGUoZSl7bGV0IHQ9bnVsbDt2YXIgcztyZXR1cm4gdD1iZShlLmZpbGUuZmlsZXMpfHwocz1lLmZpbGUuZmlsZXMsXCJmaWxlbGlzdFwiPT09eGUocykpP2UuZmlsZS5maWxlc1swXTplLmZpbGUsdH1fZm9ybWF0RmlsZVNpemUoZSl7cmV0dXJuIGU8MTAyND9lK1wiQlwiOmU8MTA0ODU3Nj9NYXRoLmZsb29yKGUvMTAyNCkrXCJLQlwiOk1hdGguZmxvb3IoZS8xMDQ4NTc2KStcIk1CXCJ9X2Zvcm1hdFNwZWVkKGUpe2lmKGU8PTEwNDg1NzYpe3JldHVybiBfdChlLzEwMjQsMSkrXCJLQi9zXCJ9cmV0dXJuIF90KGUvMTA0ODU3NiwxKStcIk1CL3NcIn1fY3JlYXRlQ29zT3B0aW9uc1dlYihlKXtjb25zdCB0PXRoaXMuX2dldEZpbGUoZSkscz10Lm5hbWUsbz1zLnNsaWNlKHMubGFzdEluZGV4T2YoXCIuXCIpKSxpPXRoaXMuX2dlbkZpbGVOYW1lKGAke1dlKDk5OTk5OSl9JHtvfWApO3JldHVybntmaWxlczpbe0J1Y2tldDpgJHt0aGlzLmJ1Y2tldE5hbWV9LSR7dGhpcy5hcHBpZH1gLFJlZ2lvbjp0aGlzLnJlZ2lvbixLZXk6YCR7dGhpcy5kaXJlY3Rvcnl9LyR7aX1gLEJvZHk6dH1dLFNsaWNlU2l6ZToxMDQ4NTc2LG9uUHJvZ3Jlc3M6dD0+e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUub25Qcm9ncmVzcyl0cnl7ZS5vblByb2dyZXNzKHQucGVyY2VudCl9Y2F0Y2gocyl7X2UudyhcIm9uUHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3I6XCIscyl9fSxvbkZpbGVGaW5pc2g6KGUsdCxzKT0+e319fV9jcmVhdGVDb3NPcHRpb25zV1hNaW5pQXBwKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0RmlsZShlKSxzPXRoaXMuX2dlbkZpbGVOYW1lKHQubmFtZSksbz10LnVybDtyZXR1cm57QnVja2V0OmAke3RoaXMuYnVja2V0TmFtZX0tJHt0aGlzLmFwcGlkfWAsUmVnaW9uOnRoaXMucmVnaW9uLEtleTpgJHt0aGlzLmRpcmVjdG9yeX0vJHtzfWAsRmlsZVBhdGg6byxvblByb2dyZXNzOnQ9PntpZihfZS5sKEpTT04uc3RyaW5naWZ5KHQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uUHJvZ3Jlc3MpdHJ5e2Uub25Qcm9ncmVzcyh0LnBlcmNlbnQpfWNhdGNoKHMpe19lLncoXCJvblByb2dyZXNzIGNhbGxiYWNrIGVycm9yOlwiLHMpfX19fV9jcmVhdGVDb3NPcHRpb25zUHJlU2lnVXJsKGUpe2xldCB0PVwiXCIscz1cIlwiLG89MDtjb25zdCBpPXRoaXMuX2dldEZpbGUoZSk7aWYoUCl0PXRoaXMuX2dlbkZpbGVOYW1lKGkubmFtZSkscz1pLnVybCxvPTE7ZWxzZXtjb25zdCBlPWkubmFtZSxuPWUuc2xpY2UoZS5sYXN0SW5kZXhPZihcIi5cIikpO3Q9dGhpcy5fZ2VuRmlsZU5hbWUoYCR7V2UoOTk5OTk5KX0ke259YCkscz1pLG89MH1yZXR1cm4gdGhpcy5fZ2V0Q29zUHJlU2lnVXJsKHtmaWxlVHlwZTp0aGlzLnVwbG9hZEZpbGVUeXBlLGZpbGVOYW1lOnQsdXBsb2FkTWV0aG9kOm8sZHVyYXRpb246dGhpcy5kdXJhdGlvbn0pLnRoZW4obz0+e2NvbnN0e3VwbG9hZFVybDppLGRvd25sb2FkVXJsOm4scmVxdWVzdFNuYXBzaG90VXJsOnIsdGh1bWJVcmw6YSxsYXJnZVVybDp1fT1vO3JldHVybnt1cmw6dGhpcy5fZ2V0UmF3T3JVcGxvYWRQcm94eVVybChpKSxmaWxlVHlwZTp0aGlzLnVwbG9hZEZpbGVUeXBlLGZpbGVOYW1lOnQscmVzb3VyY2VzOnMsZG93bmxvYWRVcmw6bixyZXF1ZXN0U25hcHNob3RVcmw6cix0aHVtYlVybDphLGxhcmdlVXJsOnUsb25Qcm9ncmVzczp0PT57aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5vblByb2dyZXNzKXRyeXtlLm9uUHJvZ3Jlc3ModC5wZXJjZW50KX1jYXRjaChzKXtfZS53KFwib25Qcm9ncmVzcyBjYWxsYmFjayBlcnJvcjpcIixzKSxfZS5lKHMpfX19fSl9X2dlbkZpbGVOYW1lKGUpe3JldHVybmAke2N0KCl9LSR7ZX1gfV9zZXRVcGxvYWRGaWxlVHlwZShlKXt0aGlzLnVwbG9hZEZpbGVUeXBlPWV9X2dldFNuYXBzaG90SW5mb0J5VXJsKGUsdCl7Y29uc3Qgcz1uZXcgQ24oXCJnZXRTbmFwc2hvdEluZm9cIik7cmV0dXJuIHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOk9pLHJlcXVlc3REYXRhOntwbGF0Zm9ybTp0aGlzLmdldFBsYXRmb3JtKCksY292ZXJOYW1lOnRoaXMuX2dlbkZpbGVOYW1lKFdlKDk5OTk5KSkscmVxdWVzdFNuYXBzaG90VXJsOmV9fSkudGhlbihlPT57Y29uc3R7c25hcHNob3RVcmw6b309ZS5kYXRhfHx7fTtyZXR1cm4gcy5zZXRNZXNzYWdlKFwic25hcHNob3RVcmw6XCIrbykuZW5kKCksTHQobyk/e306dXQobykudGhlbihlPT57dC5zbmFwc2hvdEluZm89e3NuYXBzaG90VXJsOm8sc25hcHNob3RXaWR0aDplLndpZHRoLHNuYXBzaG90SGVpZ2h0OmUuaGVpZ2h0fX0pfSkuY2F0Y2goZT0+KF9lLncodGhpcy5fbitcIi5fZ2V0U25hcHNob3RJbmZvQnlVcmwgZmFpbGVkLiBlcnJvcjpcIixlKSxzLnNldENvZGUoZS5lcnJvckNvZGUpLnNldE1lc3NhZ2UoZS5lcnJvckluZm8pLmVuZCgpLHt9KSl9X2dldFNtYWxsSW1hZ2VJbmZvQnlVcmwoZSx0KXtyZXR1cm4gdXQoZSkudGhlbihzPT57dC5zbWFsbEltYWdlVXJsPWUsdC5zbWFsbEltYWdlV2lkdGg9cy53aWR0aCx0LnNtYWxsSW1hZ2VIZWlnaHQ9cy5oZWlnaHR9KX1fZ2V0TGFyZ2VJbWFnZUluZm9CeVVybChlLHQpe3JldHVybiB1dChlKS50aGVuKHM9Pnt0LmxhcmdlSW1hZ2VVcmw9ZSx0LmxhcmdlSW1hZ2VXaWR0aD1zLndpZHRoLHQubGFyZ2VJbWFnZUhlaWdodD1zLmhlaWdodH0pfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpfX1jbGFzcyBvYXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9uPVwiTWVyZ2VyTWVzc2FnZUhhbmRsZXJcIix0aGlzLl9tZXNzYWdlTW9kdWxlPWV9dXBsb2FkTWVyZ2VyTWVzc2FnZShlLHQpe2NvbnN0IHM9dGhpcy5fbitcIi51cGxvYWRNZXJnZXJNZXNzYWdlXCI7X2UuZChzK1wiIG1lc3NhZ2U6XCIsZSxcIm1lc3NhZ2VCeXRlczpcIit0KTtjb25zdHttZXNzYWdlTGlzdDpvfT1lLnBheWxvYWQsaT1vLmxlbmd0aCxuPW5ldyBDbihcInVwbG9hZE1lcmdlck1lc3NhZ2VcIik7cmV0dXJuIHRoaXMuX21lc3NhZ2VNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkZpLHJlcXVlc3REYXRhOnttZXNzYWdlTGlzdDpvfX0pLnRoZW4oZT0+e19lLmQocytcIiBvay4gcmVzcG9uc2U6XCIsZS5kYXRhKTtjb25zdHtwYkRvd25sb2FkS2V5Om8sZG93bmxvYWRLZXk6cn09ZS5kYXRhLGE9e3BiRG93bmxvYWRLZXk6byxkb3dubG9hZEtleTpyLG1lc3NhZ2VOdW1iZXI6aX07cmV0dXJuIG4uc2V0TmV0d29ya1R5cGUodGhpcy5fbWVzc2FnZU1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGAke2l9LSR7dH0tJHtyfWApLmVuZCgpLGF9KS5jYXRjaChlPT57dGhyb3cgX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksdGhpcy5fbWVzc2FnZU1vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntuLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLGV9KX1kb3dubG9hZE1lcmdlck1lc3NhZ2UoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiO19lLmQodCtcIiBtZXNzYWdlOlwiLGUpO2NvbnN0e2Rvd25sb2FkS2V5OnN9PWUucGF5bG9hZCxvPXRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0RmlsZURvd25sb2FkUHJveHkoKSxpPW5ldyBDbihcImRvd25sb2FkTWVyZ2VyTWVzc2FnZVwiKTtyZXR1cm4gaS5zZXRNZXNzYWdlKFwiZG93bmxvYWRLZXk6XCIrcyksdGhpcy5fbWVzc2FnZU1vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6JGkscmVxdWVzdERhdGE6e2Rvd25sb2FkS2V5OnN9fSkudGhlbihzPT57aWYoX2UuZCh0K1wiIG9rLiByZXNwb25zZTpcIixzLmRhdGEpLCRlKGUuY2xlYXJFbGVtZW50KSl7Y29uc3R7ZG93bmxvYWRLZXk6dCxwYkRvd25sb2FkS2V5OmksbWVzc2FnZUxpc3Q6biwuLi5yfT1lLnBheWxvYWQ7ZS5jbGVhckVsZW1lbnQoKSxlLnNldEVsZW1lbnQoe3R5cGU6ZS50eXBlLGNvbnRlbnQ6e21lc3NhZ2VMaXN0OnMuZGF0YS5tZXNzYWdlTGlzdCwuLi5yfX0sbyl9ZWxzZXtjb25zdCB0PVtdO3MuZGF0YS5tZXNzYWdlTGlzdC5mb3JFYWNoKGU9PntpZighTHQoZSkpe2NvbnN0IHM9bmV3IFVuKGUsbyk7dC5wdXNoKHMpfX0pLGUucGF5bG9hZC5tZXNzYWdlTGlzdD10LGUucGF5bG9hZC5kb3dubG9hZEtleT1cIlwiLGUucGF5bG9hZC5wYkRvd25sb2FkS2V5PVwiXCJ9cmV0dXJuIGkuc2V0TmV0d29ya1R5cGUodGhpcy5fbWVzc2FnZU1vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxlfSkuY2F0Y2goZT0+e3Rocm93IF9lLncoYCR7dH0gZmFpbGVkLiBrZXk6JHtzfSBlcnJvcjpgLGUpLHRoaXMuX21lc3NhZ2VNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57aS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxlfSl9Y3JlYXRlTWVyZ2VyTWVzc2FnZVBhY2soZSxzLG8pe3JldHVybiBlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDP3RoaXMuX2NyZWF0ZUMyQ01lcmdlck1lc3NhZ2VQYWNrKGUscyxvKTp0aGlzLl9jcmVhdGVHcm91cE1lcmdlck1lc3NhZ2VQYWNrKGUscyxvKX1fY3JlYXRlQzJDTWVyZ2VyTWVzc2FnZVBhY2soZSx0LHMpe2xldCBvPW51bGw7dCYmKHQub2ZmbGluZVB1c2hJbmZvJiYobz10Lm9mZmxpbmVQdXNoSW5mbyksITA9PT10Lm9ubGluZVVzZXJPbmx5JiYobz9vLmRpc2FibGVQdXNoPSEwOm89e2Rpc2FibGVQdXNoOiEwfSkpO2NvbnN0IGk9W107aWYoUGUodCkmJlBlKHQubWVzc2FnZUNvbnRyb2xJbmZvKSl7Y29uc3R7ZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQ6ZSxleGNsdWRlZEZyb21MYXN0TWVzc2FnZTpzLGV4Y2x1ZGVkRnJvbUNvbnRlbnRNb2RlcmF0aW9uOm99PXQubWVzc2FnZUNvbnRyb2xJbmZvOyEwPT09ZSYmaS5wdXNoKFwiTm9VbnJlYWRcIiksITA9PT1zJiZpLnB1c2goXCJOb0xhc3RNc2dcIiksITA9PT1vJiZpLnB1c2goXCJOb01zZ0NoZWNrXCIpfWxldCBuPVwiXCI7VWUoZS5jbG91ZEN1c3RvbURhdGEpJiZlLmNsb3VkQ3VzdG9tRGF0YS5sZW5ndGg+MCYmKG49ZS5jbG91ZEN1c3RvbURhdGEpO2NvbnN0e3BiRG93bmxvYWRLZXk6cixkb3dubG9hZEtleTphLG1lc3NhZ2VOdW1iZXI6dX09cyx7dGl0bGU6YyxhYnN0cmFjdExpc3Q6bCxjb21wYXRpYmxlVGV4dDpkfT1lLnBheWxvYWQscD10aGlzLl9tZXNzYWdlTW9kdWxlLmdldE1vZHVsZShscyksaD1wJiZwLmlzT25saW5lTWVzc2FnZShlLHQpPzA6dm9pZCAwO3JldHVybntwcm90b2NvbE5hbWU6S3MsdGpnSUQ6dGhpcy5fbWVzc2FnZU1vZHVsZS5nZW5lcmF0ZVRqZ0lEKGUpLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdldE15VXNlcklEKCksdG9BY2NvdW50OmUudG8sbXNnQm9keTpbe21zZ1R5cGU6ZS50eXBlLG1zZ0NvbnRlbnQ6e3BiRG93bmxvYWRLZXk6cixkb3dubG9hZEtleTphLHRpdGxlOmMsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6ZCxtZXNzYWdlTnVtYmVyOnV9fV0sY2xvdWRDdXN0b21EYXRhOm4sY2xpZW50VGltZTplLmNsaWVudFRpbWUsbXNnU2VxOmUuc2VxdWVuY2UsbXNnUmFuZG9tOmUucmFuZG9tLG1zZ0xpZmVUaW1lOmgsb2ZmbGluZVB1c2hJbmZvOm8/e3B1c2hGbGFnOiEwPT09by5kaXNhYmxlUHVzaD8xOjAsdGl0bGU6by50aXRsZXx8XCJcIixkZXNjOm8uZGVzY3JpcHRpb258fFwiXCIsZXh0Om8uZXh0ZW5zaW9ufHxcIlwiLGFwbnNJbmZvOntiYWRnZU1vZGU6ITA9PT1vLmlnbm9yZUlPU0JhZGdlPzE6MH0sYW5kcm9pZEluZm86e09QUE9DaGFubmVsSUQ6by5hbmRyb2lkT1BQT0NoYW5uZWxJRHx8XCJcIn19OnZvaWQgMCxtZXNzYWdlQ29udHJvbEluZm86MCE9PWg/aTp2b2lkIDAsaXNTdXBwb3J0RXh0ZW5zaW9uOiEwPT09ZS5pc1N1cHBvcnRFeHRlbnNpb24/MTowfX19X2NyZWF0ZUdyb3VwTWVyZ2VyTWVzc2FnZVBhY2soZSx0LHMpe2xldCBvPW51bGw7dCYmdC5vZmZsaW5lUHVzaEluZm8mJihvPXQub2ZmbGluZVB1c2hJbmZvKTtjb25zdCBpPVtdO2lmKFBlKHQpJiZQZSh0Lm1lc3NhZ2VDb250cm9sSW5mbykpe2NvbnN0e2V4Y2x1ZGVkRnJvbVVucmVhZENvdW50OmUsZXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2U6cyxleGNsdWRlZEZyb21Db250ZW50TW9kZXJhdGlvbjpvfT10Lm1lc3NhZ2VDb250cm9sSW5mbzshMD09PWUmJmkucHVzaChcIk5vVW5yZWFkXCIpLCEwPT09cyYmaS5wdXNoKFwiTm9MYXN0TXNnXCIpLCEwPT09byYmaS5wdXNoKFwiTm9Nc2dDaGVja1wiKX1sZXQgbj1cIlwiO1VlKGUuY2xvdWRDdXN0b21EYXRhKSYmZS5jbG91ZEN1c3RvbURhdGEubGVuZ3RoPjAmJihuPWUuY2xvdWRDdXN0b21EYXRhKTtjb25zdHtwYkRvd25sb2FkS2V5OnIsZG93bmxvYWRLZXk6YSxtZXNzYWdlTnVtYmVyOnV9PXMse3RpdGxlOmMsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6ZH09ZS5wYXlsb2FkLHA9dGhpcy5fbWVzc2FnZU1vZHVsZS5nZXRNb2R1bGUoZHMpLGg9cCYmcC5pc09ubGluZU1lc3NhZ2UoZSx0KT8xOjA7cmV0dXJue3Byb3RvY29sTmFtZTpXcyx0amdJRDp0aGlzLl9tZXNzYWdlTW9kdWxlLmdlbmVyYXRlVGpnSUQoZSkscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX21lc3NhZ2VNb2R1bGUuZ2V0TXlVc2VySUQoKSxncm91cElEOmUudG8sbXNnQm9keTpbe21zZ1R5cGU6ZS50eXBlLG1zZ0NvbnRlbnQ6e3BiRG93bmxvYWRLZXk6cixkb3dubG9hZEtleTphLHRpdGxlOmMsYWJzdHJhY3RMaXN0OmwsY29tcGF0aWJsZVRleHQ6ZCxtZXNzYWdlTnVtYmVyOnV9fV0scmFuZG9tOmUucmFuZG9tLHByaW9yaXR5OmUucHJpb3JpdHksY2xpZW50U2VxdWVuY2U6ZS5jbGllbnRTZXF1ZW5jZSxncm91cEF0SW5mbzp2b2lkIDAsY2xvdWRDdXN0b21EYXRhOm4sb25saW5lT25seUZsYWc6aCxvZmZsaW5lUHVzaEluZm86bz97cHVzaEZsYWc6ITA9PT1vLmRpc2FibGVQdXNoPzE6MCx0aXRsZTpvLnRpdGxlfHxcIlwiLGRlc2M6by5kZXNjcmlwdGlvbnx8XCJcIixleHQ6by5leHRlbnNpb258fFwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTohMD09PW8uaWdub3JlSU9TQmFkZ2U/MTowfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpvLmFuZHJvaWRPUFBPQ2hhbm5lbElEfHxcIlwifX06dm9pZCAwLGNsaWVudFRpbWU6ZS5jbGllbnRUaW1lLG5lZWRSZWFkUmVjZWlwdDohMCE9PWUubmVlZFJlYWRSZWNlaXB0fHxwLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShlLnRvKT8wOjEsbWVzc2FnZUNvbnRyb2xJbmZvOjA9PT1oP2k6dm9pZCAwLGlzU3VwcG9ydEV4dGVuc2lvbjohMD09PWUuaXNTdXBwb3J0RXh0ZW5zaW9uPzE6MH19fX1jb25zdCBpYT17RVJSX1NWUl9DT01NX1NFTlNJVElWRV9URVhUOjgwMDAxLEVSUl9TVlJfQ09NTV9CT0RZX1NJWkVfTElNSVQ6ODAwMDIsT1BFTl9TRVJWSUNFX09WRVJMT0FEX0VSUk9SOjYwMDIyLEVSUl9TVlJfTVNHX1BLR19QQVJTRV9GQUlMRUQ6MjAwMDEsRVJSX1NWUl9NU0dfSU5URVJOQUxfQVVUSF9GQUlMRUQ6MjAwMDIsRVJSX1NWUl9NU0dfSU5WQUxJRF9JRDoyMDAwMyxFUlJfU1ZSX01TR19QVVNIX0RFTlk6MjAwMDYsRVJSX1NWUl9NU0dfSU5fUEVFUl9CTEFDS0xJU1Q6MjAwMDcsRVJSX1NWUl9NU0dfQk9USF9OT1RfRlJJRU5EOjIwMDA5LEVSUl9TVlJfTVNHX05PVF9QRUVSX0ZSSUVORDoyMDAxMCxFUlJfU1ZSX01TR19OT1RfU0VMRl9GUklFTkQ6MjAwMTEsRVJSX1NWUl9NU0dfU0hVVFVQX0RFTlk6MjAwMTIsRVJSX1NWUl9HUk9VUF9JTlZBTElEX1BBUkFNRVRFUlM6MTAwMDQsRVJSX1NWUl9HUk9VUF9QRVJNSVNTSU9OX0RFTlk6MTAwMDcsRVJSX1NWUl9HUk9VUF9OT1RfRk9VTkQ6MTAwMTAsRVJSX1NWUl9HUk9VUF9JTlZBTElEX0dST1VQSUQ6MTAwMTUsRVJSX1NWUl9HUk9VUF9SRUpFQ1RfRlJPTV9USElSRFBBUlRZOjEwMDE2LEVSUl9TVlJfR1JPVVBfU0hVVFVQX0RFTlk6MTAwMTcsTUVTU0FHRV9TRU5EX0ZBSUw6MjEwMCxPVkVSX0ZSRVFVRU5DWV9MSU1JVDoyOTk2fSxuYT1bbm4uTUVTU0FHRV9PTlBST0dSRVNTX0ZVTkNUSU9OX0VSUk9SLG5uLk1FU1NBR0VfSU1BR0VfU0VMRUNUX0ZJTEVfRklSU1Qsbm4uTUVTU0FHRV9JTUFHRV9UWVBFU19MSU1JVCxubi5NRVNTQUdFX0ZJTEVfSVNfRU1QVFksbm4uTUVTU0FHRV9JTUFHRV9TSVpFX0xJTUlULG5uLk1FU1NBR0VfRklMRV9TRUxFQ1RfRklMRV9GSVJTVCxubi5NRVNTQUdFX0ZJTEVfU0laRV9MSU1JVCxubi5NRVNTQUdFX1ZJREVPX1NJWkVfTElNSVQsbm4uTUVTU0FHRV9WSURFT19UWVBFU19MSU1JVCxubi5NRVNTQUdFX0FVRElPX1VQTE9BRF9GQUlMLG5uLk1FU1NBR0VfQVVESU9fU0laRV9MSU1JVCxubi5DT1NfVU5ERVRFQ1RFRF07ZnVuY3Rpb24gcmEoZSl7bGV0IHQ9ITE7cmV0dXJuIE9iamVjdC52YWx1ZXMoaWEpLmluY2x1ZGVzKGUpJiYodD0hMCksKGU+PTEyMDAwMSYmZTw9MTNlNHx8ZT49MTAxMDAmJmU8PTEwMjAwKSYmKHQ9ITApLHR9Y2xhc3MgYWEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiTWVzc2FnZU1vZHVsZVwiLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwPW5ldyBNYXAsdGhpcy5fbWVyZ2VyTWVzc2FnZUhhbmRsZXI9bmV3IG9hKHRoaXMpfWNyZWF0ZVRleHRNZXNzYWdlKGUpe2NvbnN0IHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7Y29uc3Qgcz1uZXcgYm4oZSksbz1cInN0cmluZ1wiPT10eXBlb2YgZS5wYXlsb2FkP2UucGF5bG9hZDplLnBheWxvYWQudGV4dCxpPW5ldyBUbih7dGV4dDpvfSksbj10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIHMuc2V0RWxlbWVudChpKSxzLnNldE5pY2tBbmRBdmF0YXIobikscy5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChzKSksc31jcmVhdGVJbWFnZU1lc3NhZ2UoZSl7Y29uc3QgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTtjb25zdCBzPW5ldyBibihlKTtpZihQKXtjb25zdHtmaWxlOnR9PWUucGF5bG9hZDtpZihPZSh0KSlyZXR1cm4gdm9pZCB0aGlzLm91dHB1dFdhcm5pbmcoXCJGaWxlVW5zdXBwb3J0ZWRJbk1QXCIsXCJjcmVhdGVJbWFnZU1lc3NhZ2VcIik7Y29uc3Qgcz10LnRlbXBGaWxlc1swXS5wYXRofHx0LnRlbXBGaWxlc1swXS50ZW1wRmlsZVBhdGgsbz17dXJsOnMsbmFtZTpzLnNsaWNlKHMubGFzdEluZGV4T2YoXCIvXCIpKzEpLHNpemU6dC50ZW1wRmlsZXMmJnQudGVtcEZpbGVzWzBdLnNpemV8fDEsdHlwZTpzLnNsaWNlKHMubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9O2UucGF5bG9hZC5maWxlPW99ZWxzZSBpZihiKWlmKE9lKGUucGF5bG9hZC5maWxlKSl7Y29uc3QgdD1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W3RdfX1lbHNlIGlmKFBlKGUucGF5bG9hZC5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSl7Y29uc3QgdD1lLnBheWxvYWQuZmlsZS50ZW1wRmlsZXNbMF07ZS5wYXlsb2FkLmZpbGU9e2ZpbGVzOlt0XX19Y29uc3Qgbz1uZXcgeW4oe2ltYWdlRm9ybWF0Om1lLlVOS05PV04sdXVpZDp0aGlzLl9nZW5lcmF0ZVVVSUQoZS5wYXlsb2FkLmZpbGUpLGZpbGU6ZS5wYXlsb2FkLmZpbGV9KSxpPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gcy5zZXRFbGVtZW50KG8pLHMuc2V0Tmlja0FuZEF2YXRhcihpKSxzLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHMpKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQocy5jbGllbnRTZXF1ZW5jZSxlKSxzfWNyZWF0ZUF1ZGlvTWVzc2FnZShlKXtjb25zdHtmaWxlOnR9PWUucGF5bG9hZDtpZihQKXtjb25zdCBzPXt1cmw6dC50ZW1wRmlsZVBhdGgsbmFtZTp0LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi9cIikrMSksc2l6ZTp0LmZpbGVTaXplLHNlY29uZDpwYXJzZUludCh0LmR1cmF0aW9uKS8xZTMsdHlwZTp0LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX07ZS5wYXlsb2FkLmZpbGU9c31jb25zdCBzPXRoaXMuZ2V0TXlVc2VySUQoKTtlLmN1cnJlbnRVc2VyPXMsZS5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpO2NvbnN0IG89bmV3IGJuKGUpLGk9bmV3IEVuKHtzZWNvbmQ6TWF0aC5mbG9vcih0LmR1cmF0aW9uLzFlMyksc2l6ZTp0LmZpbGVTaXplfHx0LnNpemUsdXJsOnQudGVtcEZpbGVQYXRoLHV1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKGUucGF5bG9hZC5maWxlKX0pLG49dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHMpO3JldHVybiBvLnNldEVsZW1lbnQoaSksby5zZXROaWNrQW5kQXZhdGFyKG4pLG8uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobykpLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLnNldChvLmNsaWVudFNlcXVlbmNlLGUpLG99Y3JlYXRlVmlkZW9NZXNzYWdlKGUpe2NvbnN0IHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCksZS5wYXlsb2FkLmZpbGUudGh1bWJVcmw9XCJcIixlLnBheWxvYWQuZmlsZS50aHVtYlNpemU9MDtjb25zdCBzPXt9O2lmKFApe2lmKE8pcmV0dXJuIHZvaWQgdGhpcy5vdXRwdXRXYXJuaW5nKFwiVmlkZW9VbnN1cHBvcnRlZEluQWxpcGF5XCIpO2lmKE9lKGUucGF5bG9hZC5maWxlKSlyZXR1cm4gdm9pZCB0aGlzLm91dHB1dFdhcm5pbmcoXCJGaWxlVW5zdXBwb3J0ZWRJbk1QXCIsXCJjcmVhdGVWaWRlb01lc3NhZ2VcIik7bGV0e2ZpbGU6dH09ZS5wYXlsb2FkO2JlKHQudGVtcEZpbGVzKSYmKHQ9dC50ZW1wRmlsZXNbMF0pLHMudXJsPXQudGVtcEZpbGVQYXRoLHMubmFtZT10LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi9cIikrMSkscy5zaXplPXQuc2l6ZXx8MSxzLnNlY29uZD10LmR1cmF0aW9ufHwwLHMudHlwZT10LnRlbXBGaWxlUGF0aC5zbGljZSh0LnRlbXBGaWxlUGF0aC5sYXN0SW5kZXhPZihcIi5cIikrMSkudG9Mb3dlckNhc2UoKX1lbHNlIGlmKGIpe2lmKE9lKGUucGF5bG9hZC5maWxlKSl7Y29uc3QgdD1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZS5maWxlcz1bdF19ZWxzZSBpZihQZShlLnBheWxvYWQuZmlsZSkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkpe2NvbnN0IHQ9ZS5wYXlsb2FkLmZpbGUudGVtcEZpbGU7ZS5wYXlsb2FkLmZpbGUuZmlsZXM9W3RdfWNvbnN0e2ZpbGU6dH09ZS5wYXlsb2FkO3MudXJsPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHQuZmlsZXNbMF0pLHMubmFtZT10LmZpbGVzWzBdLm5hbWUscy5zaXplPXQuZmlsZXNbMF0uc2l6ZXx8MSxzLnNlY29uZD10LmZpbGVzWzBdLmR1cmF0aW9ufHwwLHMudHlwZT10LmZpbGVzWzBdLnR5cGUuc3BsaXQoXCIvXCIpWzFdfWUucGF5bG9hZC5maWxlLnZpZGVvRmlsZT1zO2NvbnN0IG89bmV3IGJuKGUpLGk9bmV3IE9uKHt2aWRlb0Zvcm1hdDpzLnR5cGUsdmlkZW9TZWNvbmQ6X3Qocy5zZWNvbmQsMCksdmlkZW9TaXplOnMuc2l6ZSxyZW1vdGVWaWRlb1VybDpcIlwiLHZpZGVvVXJsOnMudXJsLHZpZGVvVVVJRDp0aGlzLl9nZW5lcmF0ZVVVSUQoZS5wYXlsb2FkLmZpbGUudmlkZW9GaWxlKSx0aHVtYlVVSUQ6dGhpcy5fZ2VuZXJhdGVVVUlEKGUucGF5bG9hZC5maWxlLnZpZGVvRmlsZSksdGh1bWJXaWR0aDplLnBheWxvYWQuZmlsZS53aWR0aHx8MjAwLHRodW1iSGVpZ2h0OmUucGF5bG9hZC5maWxlLmhlaWdodHx8MjAwLHRodW1iVXJsOmUucGF5bG9hZC5maWxlLnRodW1iVXJsLHRodW1iU2l6ZTplLnBheWxvYWQuZmlsZS50aHVtYlNpemUsdGh1bWJGb3JtYXQ6ZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwuc2xpY2UoZS5wYXlsb2FkLmZpbGUudGh1bWJVcmwubGFzdEluZGV4T2YoXCIuXCIpKzEpLnRvTG93ZXJDYXNlKCl9KSxuPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gby5zZXRFbGVtZW50KGkpLG8uc2V0Tmlja0FuZEF2YXRhcihuKSxvLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKG8pKSx0aGlzLl9tZXNzYWdlT3B0aW9uc01hcC5zZXQoby5jbGllbnRTZXF1ZW5jZSxlKSxvfWNyZWF0ZUN1c3RvbU1lc3NhZ2UoZSl7Y29uc3QgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTtjb25zdCBzPW5ldyBibihlKSxvPW5ldyBSbih7ZGF0YTplLnBheWxvYWQuZGF0YSxkZXNjcmlwdGlvbjplLnBheWxvYWQuZGVzY3JpcHRpb24sZXh0ZW5zaW9uOmUucGF5bG9hZC5leHRlbnNpb259KSxpPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gcy5zZXRFbGVtZW50KG8pLHMuc2V0Tmlja0FuZEF2YXRhcihpKSxzLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHMpKSxzfWNyZWF0ZUZhY2VNZXNzYWdlKGUpe2NvbnN0IHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7Y29uc3Qgcz1uZXcgYm4oZSksbz1uZXcgRG4oZS5wYXlsb2FkKSxpPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KTtyZXR1cm4gcy5zZXRFbGVtZW50KG8pLHMuc2V0Tmlja0FuZEF2YXRhcihpKSxzLnNldE5hbWVDYXJkKHRoaXMuX2dldE5hbWVDYXJkQnlHcm91cElEKHMpKSxzfWNyZWF0ZU1lcmdlck1lc3NhZ2UoZSl7Y29uc3QgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTtjb25zdCBzPXRoaXMuX2dldE5pY2tBbmRBdmF0YXJCeVVzZXJJRCh0KSxvPW5ldyBibihlKSxpPW5ldyBrbihlLnBheWxvYWQpO3JldHVybiBvLnNldEVsZW1lbnQoaSksby5zZXROaWNrQW5kQXZhdGFyKHMpLG8uc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQobykpLG8uc2V0UmVsYXlGbGFnKCEwKSxvfWNyZWF0ZUZvcndhcmRNZXNzYWdlKGUpe2NvbnN0e3RvOnMsY29udmVyc2F0aW9uVHlwZTpvLHByaW9yaXR5OmkscGF5bG9hZDpuLG5lZWRSZWFkUmVjZWlwdDpyLHJlY2VpdmVyTGlzdDphfT1lLHU9dGhpcy5nZXRNeVVzZXJJRCgpLGM9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHUpO2lmKG4udHlwZT09PXQuTVNHX0dSUF9USVApcmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfRk9SV0FSRF9UWVBFX0lOVkFMSUR9KTtjb25zdCBsPXt0bzpzLGNvbnZlcnNhdGlvblR5cGU6byxjb252ZXJzYXRpb25JRDpgJHtvfSR7c31gLHByaW9yaXR5OmksaXNQbGFjZU1lc3NhZ2U6MCxzdGF0dXM6TnQuVU5TRU5ELGN1cnJlbnRVc2VyOnUsc2VuZGVyVGlueUlEOnRoaXMuZ2V0TXlUaW55SUQoKSxjbG91ZEN1c3RvbURhdGE6ZS5jbG91ZEN1c3RvbURhdGF8fG4uY2xvdWRDdXN0b21EYXRhfHxcIlwiLG5lZWRSZWFkUmVjZWlwdDpyLHJlY2VpdmVyTGlzdDphLGlzU3VwcG9ydEV4dGVuc2lvbjplLmlzU3VwcG9ydEV4dGVuc2lvbnx8ITF9LGQ9bmV3IGJuKGwpO3JldHVybiBkLnNldEVsZW1lbnQobi5nZXRFbGVtZW50cygpWzBdKSxkLnNldE5pY2tBbmRBdmF0YXIoYyksZC5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChuKSksZC5zZXRSZWxheUZsYWcoITApLGR9ZG93bmxvYWRNZXJnZXJNZXNzYWdlKGUpe3JldHVybiB0aGlzLl9tZXJnZXJNZXNzYWdlSGFuZGxlci5kb3dubG9hZE1lcmdlck1lc3NhZ2UoZSl9Y3JlYXRlRmlsZU1lc3NhZ2UoZSl7aWYoUCl7aWYoIUwmJiF2JiYhVSlyZXR1cm47bGV0IGU7Y29uc3QgdD13LmdldFN5c3RlbUluZm9TeW5jKCkuU0RLVmVyc2lvbjtpZihMJiYoZT1cIjIuNS4wXCIsZHQodCxlKTwwKSlyZXR1cm4gdm9pZCB0aGlzLm91dHB1dFdhcm5pbmcoXCJXWENob29zZU1lc3NhZ2VGaWxlXCIpO2lmKHYmJihlPVwiMS4xOC4wXCIsZHQodCxlKTwwKSlyZXR1cm4gdm9pZCB0aGlzLm91dHB1dFdhcm5pbmcoXCJRUUNob29zZU1lc3NhZ2VGaWxlXCIpfWlmKGJ8fFUpe2lmKE9lKGUucGF5bG9hZC5maWxlKSl7Y29uc3QgdD1lLnBheWxvYWQuZmlsZTtlLnBheWxvYWQuZmlsZT17ZmlsZXM6W3RdfX1lbHNlIGlmKFBlKGUucGF5bG9hZC5maWxlKSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHVuaSl7Y29uc3R7dGVtcEZpbGVzOnQsZmlsZXM6c309ZS5wYXlsb2FkLmZpbGU7bGV0IG89bnVsbDtiZSh0KT9vPXRbMF06YmUocykmJihvPXNbMF0pLGUucGF5bG9hZC5maWxlPXtmaWxlczpbb119fX1lbHNlIGlmKEx8fHYpe2NvbnN0e3RlbXBGaWxlczp0fT1lLnBheWxvYWQuZmlsZSxzPXsuLi50WzBdLHVybDp0WzBdLnBhdGh9O2UucGF5bG9hZC5maWxlPXtmaWxlczpbc119fWNvbnN0IHQ9dGhpcy5nZXRNeVVzZXJJRCgpO2UuY3VycmVudFVzZXI9dCxlLnNlbmRlclRpbnlJRD10aGlzLmdldE15VGlueUlEKCk7Y29uc3Qgcz1uZXcgYm4oZSksbz1uZXcgTm4oe3V1aWQ6dGhpcy5fZ2VuZXJhdGVVVUlEKGUucGF5bG9hZC5maWxlKSxmaWxlOmUucGF5bG9hZC5maWxlfSksaT10aGlzLl9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQodCk7cmV0dXJuIHMuc2V0RWxlbWVudChvKSxzLnNldE5pY2tBbmRBdmF0YXIoaSkscy5zZXROYW1lQ2FyZCh0aGlzLl9nZXROYW1lQ2FyZEJ5R3JvdXBJRChzKSksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuc2V0KHMuY2xpZW50U2VxdWVuY2UsZSksc31jcmVhdGVMb2NhdGlvbk1lc3NhZ2UoZSl7Y29uc3QgdD10aGlzLmdldE15VXNlcklEKCk7ZS5jdXJyZW50VXNlcj10LGUuc2VuZGVyVGlueUlEPXRoaXMuZ2V0TXlUaW55SUQoKTtjb25zdCBzPW5ldyBibihlKSxvPW5ldyBHbihlLnBheWxvYWQpLGk9dGhpcy5fZ2V0Tmlja0FuZEF2YXRhckJ5VXNlcklEKHQpO3JldHVybiBzLnNldEVsZW1lbnQobykscy5zZXROaWNrQW5kQXZhdGFyKGkpLHMuc2V0TmFtZUNhcmQodGhpcy5fZ2V0TmFtZUNhcmRCeUdyb3VwSUQocykpLHN9X29uQ2Fubm90RmluZE1vZHVsZSgpe3JldHVybiBWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1zZW5kTWVzc2FnZUluc3RhbmNlKGUscyl7aWYoITE9PT10aGlzLmdldE1vZHVsZShVcykuZmlsdGVyTWVzc2FnZShlLHMpKXJldHVybiB0aGlzLl9vblNlbmRNZXNzYWdlRmFpbGVkKGUsbmV3IEZuKHtjb2RlOm5uLlBST0ZBTklUWV9GT1VORH0pKTtsZXQgbyxpPW51bGw7c3dpdGNoKGUuY29udmVyc2F0aW9uVHlwZSl7Y2FzZSB0LkNPTlZfQzJDOmlmKGk9dGhpcy5nZXRNb2R1bGUobHMpLCFpKXJldHVybiB0aGlzLl9vbkNhbm5vdEZpbmRNb2R1bGUoKTticmVhaztjYXNlIHQuQ09OVl9HUk9VUDppZihpPXRoaXMuZ2V0TW9kdWxlKGRzKSwhaSlyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7aWYoc3Qoe2dyb3VwSUQ6ZS50b30pKXtjb25zdCB0PWkuZ2V0TG9jYWxHcm91cFByb2ZpbGUoZS50byk7aWYodCYmdC5pc1N1cHBvcnRUb3BpYylyZXR1cm4gVm4oe2NvZGU6bm4uTUVTU0FHRV9TRU5EX0dST1VQX1dJVEhfVE9QSUNfRkFJTH0pfWJyZWFrO2RlZmF1bHQ6cmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfU0VORF9JTlZBTElEX0NPTlZFUlNBVElPTl9UWVBFfSl9Y29uc3Qgbj10aGlzLmdldE1vZHVsZShUcykscj10aGlzLmdldE1vZHVsZShkcyk7cmV0dXJuIG4udXBsb2FkKGUpLnRoZW4oKCk9PntpZih0aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKT09PWRuKXt0aGlzLmdldE1vZHVsZShScykuYWRkU3VjY2Vzc0NvdW50KHBuKX1yZXR1cm4gci5ndWFyZEZvckFWQ2hhdFJvb20oZSkudGhlbigoKT0+e2lmKCFlLmlzU2VuZGFibGUoKSlyZXR1cm4gVm4oe2NvZGU6bm4uTUVTU0FHRV9GSUxFX1VSTF9JU19FTVBUWX0pO3RoaXMuX2FkZFNlbmRNZXNzYWdlVG90YWxDb3VudChlKSxvPURhdGUubm93KCk7Y29uc3Qgbj1mdW5jdGlvbihlKXtsZXQgdD1cInV0Zi04XCI7YiYmZG9jdW1lbnQmJih0PWRvY3VtZW50LmNoYXJzZXQudG9Mb3dlckNhc2UoKSk7bGV0IHMsbz0wLGk9MDtpZihpPWUubGVuZ3RoLFwidXRmLThcIj09PXR8fFwidXRmOFwiPT09dClmb3IobGV0IG49MDtuPGk7bisrKXM9ZS5jb2RlUG9pbnRBdChuKSxzPD0xMjc/bys9MTpzPD0yMDQ3P28rPTI6czw9NjU1MzU/bys9Mzoobys9NCxuKyspO2Vsc2UgaWYoXCJ1dGYtMTZcIj09PXR8fFwidXRmMTZcIj09PXQpZm9yKGxldCBuPTA7bjxpO24rKylzPWUuY29kZVBvaW50QXQobiksczw9NjU1MzU/bys9Mjoobys9NCxuKyspO2Vsc2Ugbz1lLnJlcGxhY2UoL1teXFx4MDAtXFx4ZmZdL2csXCJhYVwiKS5sZW5ndGg7cmV0dXJuIG99KEpTT04uc3RyaW5naWZ5KGUpKTtpZihlLnR5cGU9PT10Lk1TR19NRVJHRVImJm4+MTEyNjQpcmV0dXJuIHRoaXMuX21lcmdlck1lc3NhZ2VIYW5kbGVyLnVwbG9hZE1lcmdlck1lc3NhZ2UoZSxuKS50aGVuKHQ9Pntjb25zdCBvPXRoaXMuX21lcmdlck1lc3NhZ2VIYW5kbGVyLmNyZWF0ZU1lcmdlck1lc3NhZ2VQYWNrKGUscyx0KTtyZXR1cm4gdGhpcy5yZXF1ZXN0KG8pfSk7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKF9zKS5zZXRNZXNzYWdlUmFuZG9tKGUpLGUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9DMkN8fGUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUD9pLnNlbmRNZXNzYWdlKGUscyk6dm9pZCAwfSkudGhlbihuPT57Y29uc3R7dGltZTpyLHNlcXVlbmNlOmEscmVhZFJlY2VpcHRDb2RlOnV9PW4uZGF0YTtpZihHZSh1KSYmMCE9PXUpe25ldyBDbihcInNlbmRNZXNzYWdlV2l0aFJlY2VpcHRcIikuc2V0TWVzc2FnZShgZnJvbToke2UuZnJvbX0gdG86JHtlLnRvfSBzZXF1ZW5jZToke2F9IHJlYWRSZWNlaXB0Q29kZToke3V9YCkuZW5kKCksX2UudyhgJHt0aGlzLl9ufS5zZW5kTWVzc2FnZUluc3RhbmNlIHJlYWRSZWNlaXB0Q29kZToke3V9IG1lc3NhZ2U6JHt0aGlzLmdldEVycm9yTWVzc2FnZSh1KX1gKX10aGlzLl9hZGRTZW5kTWVzc2FnZVN1Y2Nlc3NDb3VudChlLG8pLHRoaXMuX21lc3NhZ2VPcHRpb25zTWFwLmRlbGV0ZShlLmNsaWVudFNlcXVlbmNlKTtjb25zdCBjPXRoaXMuZ2V0TW9kdWxlKF9zKTtlLnN0YXR1cz1OdC5TVUNDRVNTLGUudGltZT1yO2xldCBsPSExO2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUCllLnNlcXVlbmNlPWE7ZWxzZSBpZihlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDKXtjb25zdCB0PWMuZ2V0TGF0ZXN0TWVzc2FnZVNlbnRCeU1lKGUuY29udmVyc2F0aW9uSUQpO2lmKHQpe2NvbnN0e25pY2s6cyxhdmF0YXI6b309dDtzPT09ZS5uaWNrJiZvPT09ZS5hdmF0YXJ8fChsPSEwKX19aWYobCYmYy5tb2RpZnlNZXNzYWdlU2VudEJ5TWUoe2NvbnZlcnNhdGlvbklEOmUuY29udmVyc2F0aW9uSUQsbGF0ZXN0TmljazplLm5pY2ssbGF0ZXN0QXZhdGFyOmUuYXZhdGFyfSksaS5pc09ubGluZU1lc3NhZ2UoZSxzKSllLl9vbmxpbmVPbmx5RmxhZz0hMDtlbHNle2MuYXBwZW5kVG9NZXNzYWdlTGlzdChlKTtsZXQgbz1lO1BlKHMpJiZQZShzLm1lc3NhZ2VDb250cm9sSW5mbykmJighMD09PXMubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlJiYoZS5faXNFeGNsdWRlZEZyb21MYXN0TWVzc2FnZT0hMCxvPVwiXCIpLCEwPT09cy5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQmJihlLl9pc0V4Y2x1ZGVkRnJvbVVucmVhZENvdW50PSEwKSk7bGV0IGk9ZS5jb252ZXJzYXRpb25UeXBlO2lmKG90KGUudG8pKXtpPXQuQ09OVl9UT1BJQzt0aGlzLmdldE1vZHVsZShncykub25NZXNzYWdlU2VudCh7Z3JvdXBJRDpmdChlLnRvKSx0b3BpY0lEOmUudG8sbGFzdE1lc3NhZ2U6b30pfWMub25NZXNzYWdlU2VudCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6W3tjb252ZXJzYXRpb25JRDplLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50OjAsdHlwZTppLHN1YlR5cGU6ZS5jb252ZXJzYXRpb25TdWJUeXBlLGxhc3RNZXNzYWdlOm99XX0pfXJldHVybiBlLmdldFJlbGF5RmxhZygpfHxcIlRJTUltYWdlRWxlbVwiIT09ZS50eXBlfHxodChlLnBheWxvYWQuaW1hZ2VJbmZvQXJyYXkpLHduKHttZXNzYWdlOmV9KX0pfSkuY2F0Y2godD0+dGhpcy5fb25TZW5kTWVzc2FnZUZhaWxlZChlLHQpKX1fb25TZW5kTWVzc2FnZUZhaWxlZChlLHQpe2Uuc3RhdHVzPU50LkZBSUw7dGhpcy5nZXRNb2R1bGUoX3MpLmRlbGV0ZU1lc3NhZ2VSYW5kb20oZSksdGhpcy5fYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXIoZSx0KTtjb25zdCBzPW5ldyBDbihcInNlbmRNZXNzYWdlXCIpO3JldHVybiBzLnNldE1lc3NhZ2UoYHRqZ19pZDoke3RoaXMuZ2VuZXJhdGVUamdJRChlKX0gdHlwZToke2UudHlwZX0gZnJvbToke2UuZnJvbX0gdG86JHtlLnRvfWApLHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW2Usb10pPT57cy5zZXRFcnJvcih0LGUsbykuZW5kKCl9KSxfZS5lKHRoaXMuX24rXCIuX29uU2VuZE1lc3NhZ2VGYWlsZWQgZXJyb3I6XCIsdCksVm4obmV3IEZuKHtjb2RlOnQmJnQuY29kZT90LmNvZGU6bm4uTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTp0JiZ0Lm1lc3NhZ2U/dC5tZXNzYWdlOnZvaWQgMCxkYXRhOnttZXNzYWdlOmV9fSkpfV9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKXtpZihbdC5NU0dfSU1BR0UsdC5NU0dfQVVESU8sdC5NU0dfVklERU8sdC5NU0dfRklMRV0uaW5jbHVkZXMoZS50eXBlKSlyZXR1cm4gZG47aWYoZS5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0MyQylyZXR1cm4gdW47aWYoZS5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0dST1VQKXtjb25zdCB0PXRoaXMuZ2V0TW9kdWxlKGRzKS5nZXRMb2NhbEdyb3VwUHJvZmlsZShlLnRvKTtpZighdClyZXR1cm47Y29uc3Qgcz10LnR5cGU7cmV0dXJuIGV0KHMpP2xuOmNufX1fYWRkU2VuZE1lc3NhZ2VUb3RhbENvdW50KGUpe2NvbnN0IHQ9dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7aWYodCl7dGhpcy5nZXRNb2R1bGUoUnMpLmFkZFRvdGFsQ291bnQodCl9fV9hZGRTZW5kTWVzc2FnZVN1Y2Nlc3NDb3VudChlLHQpe2NvbnN0IHM9TWF0aC5hYnMoRGF0ZS5ub3coKS10KSxvPXRoaXMuX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5KGUpO2lmKG8pe2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUoUnMpO2UuYWRkU3VjY2Vzc0NvdW50KG8pLGUuYWRkQ29zdChvLHMpfX1fYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXIoZSx0KXtjb25zdHtjb2RlOnM9LTF9PXQsbz10aGlzLmdldE1vZHVsZShScyksaT10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpPT09ZG4mJmZ1bmN0aW9uKGUpe2xldCB0PSExO3JldHVybiBuYS5pbmNsdWRlcyhlKSYmKHQ9ITApLHR9KHMpP28uYWRkRmFpbGVkQ291bnRPZlVzZXJTaWRlKHBuKTpyYShzKSYmaSYmby5hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUoaSl9cmVzZW5kTWVzc2FnZShlKXtyZXR1cm4gZS5pc1Jlc2VuZD0hMCxlLnN0YXR1cz1OdC5VTlNFTkQsdGhpcy5zZW5kTWVzc2FnZUluc3RhbmNlKGUpfXJldm9rZU1lc3NhZ2UoZSl7bGV0IHM9bnVsbDtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDP3M9dGhpcy5nZXRNb2R1bGUobHMpOmUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUCYmKHM9dGhpcy5nZXRNb2R1bGUoZHMpKSwhcylyZXR1cm4gdGhpcy5fb25DYW5ub3RGaW5kTW9kdWxlKCk7Y29uc3Qgbz1uZXcgQ24oXCJyZXZva2VNZXNzYWdlXCIpO28uc2V0TWVzc2FnZShgdGpnX2lkOiR7dGhpcy5nZW5lcmF0ZVRqZ0lEKGUpfSB0eXBlOiR7ZS50eXBlfSBmcm9tOiR7ZS5mcm9tfSB0bzoke2UudG99YCk7Y29uc3QgaT10aGlzLl9uK1wiLnJldm9rZU1lc3NhZ2VcIjtyZXR1cm4gcy5yZXZva2VNZXNzYWdlKGUpLnRoZW4odD0+e2NvbnN0IHM9dC5kYXRhLnJlY2FsbFJldExpc3Q7aWYoIUx0KHMpJiYwIT09c1swXS5yZXRDb2RlKXtjb25zdCB0PW5ldyBGbih7Y29kZTpzWzBdLnJldENvZGUsZGF0YTp7bWVzc2FnZTplfX0pO3JldHVybiBvLnNldENvZGUodC5jb2RlKS5zZXRNb3JlTWVzc2FnZSh0Lm1lc3NhZ2UpLmVuZCgpLFZuKHQpfV9lLmkoYCR7aX0gb2suIElEOiR7ZS5JRH1gKSxlLmlzUmV2b2tlZD0hMCxvLmVuZCgpO3JldHVybiB0aGlzLmdldE1vZHVsZShfcykub25NZXNzYWdlUmV2b2tlZChbZV0pLHduKHttZXNzYWdlOmV9KX0pLmNhdGNoKHQ9Pnt0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLHNdKT0+e28uc2V0RXJyb3IodCxlLHMpLmVuZCgpfSk7Y29uc3Qgcz1uZXcgRm4oe2NvZGU6dCYmdC5jb2RlP3QuY29kZTpubi5NRVNTQUdFX1JFVk9LRV9GQUlMLG1lc3NhZ2U6dCYmdC5tZXNzYWdlP3QubWVzc2FnZTp2b2lkIDAsZGF0YTp7bWVzc2FnZTplfX0pO3JldHVybiBfZS53KGkrXCIgZmFpbGVkLiBlcnJvcjpcIix0KSxWbihzKX0pfWRlbGV0ZU1lc3NhZ2UoZSl7bGV0IHM9bnVsbDtjb25zdCBvPWVbMF0saT1vLmNvbnZlcnNhdGlvbklEO2xldCBuPVwiXCIscj1bXSxhPVtdO2lmKG8uY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9DMkMpcz10aGlzLmdldE1vZHVsZShscyksbj1pLnJlcGxhY2UodC5DT05WX0MyQyxcIlwiKSxlLmZvckVhY2goZT0+e2UmJmUuc3RhdHVzPT09TnQuU1VDQ0VTUyYmZS5jb252ZXJzYXRpb25JRD09PWkmJihlLl9vbmxpbmVPbmx5RmxhZ3x8ci5wdXNoKGAke2Uuc2VxdWVuY2V9XyR7ZS5yYW5kb219XyR7ZS50aW1lfWApLGEucHVzaChlKSl9KTtlbHNlIGlmKG8uY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUClzPXRoaXMuZ2V0TW9kdWxlKGRzKSxuPWkucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIiksZS5mb3JFYWNoKGU9PntlJiZlLnN0YXR1cz09PU50LlNVQ0NFU1MmJmUuY29udmVyc2F0aW9uSUQ9PT1pJiYoZS5fb25saW5lT25seUZsYWd8fHIucHVzaChcIlwiK2Uuc2VxdWVuY2UpLGEucHVzaChlKSl9KTtlbHNlIGlmKG8uY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9TWVNURU0pcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9ERUxFVEVfR1JPVVBfU1lTVEVNX05PVElDRX0pO2lmKCFzKXJldHVybiB0aGlzLl9vbkNhbm5vdEZpbmRNb2R1bGUoKTtpZigwPT09ci5sZW5ndGgpcmV0dXJuIHRoaXMuX29uTWVzc2FnZURlbGV0ZWQoYSk7ci5sZW5ndGg+MzAmJihyPXIuc2xpY2UoMCwzMCksYT1hLnNsaWNlKDAsMzApKTtjb25zdCB1PW5ldyBDbihcImRlbGV0ZU1lc3NhZ2VcIik7dS5zZXRNZXNzYWdlKGB0bzoke259IGNvdW50OiR7ci5sZW5ndGh9YCk7Y29uc3QgYz10aGlzLl9uK1wiLmRlbGV0ZU1lc3NhZ2VcIjtyZXR1cm4gcy5kZWxldGVNZXNzYWdlKHt0bzpuLGtleUxpc3Q6cn0pLnRoZW4oZT0+KHUuZW5kKCksX2UuaShjK1wiIG9rXCIpLHRoaXMuX29uTWVzc2FnZURlbGV0ZWQoYSkpKS5jYXRjaChlPT57dGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9Pnt1LnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncoYytcIiBmYWlsZWQuIGVycm9yOlwiLGUpO2NvbnN0IHQ9bmV3IEZuKHtjb2RlOmUmJmUuY29kZT9lLmNvZGU6bm4uTUVTU0FHRV9ERUxFVEVfRkFJTCxtZXNzYWdlOmUmJmUubWVzc2FnZT9lLm1lc3NhZ2U6dm9pZCAwfSk7cmV0dXJuIFZuKHQpfSl9X29uTWVzc2FnZURlbGV0ZWQoZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKF9zKS5vbk1lc3NhZ2VEZWxldGVkKGUpLHhuKHttZXNzYWdlTGlzdDplfSl9dHJhbnNsYXRlVGV4dChlKXtjb25zdCB0PXRoaXMuX24rXCIudHJhbnNsYXRlVGV4dFwiLHtzb3VyY2VUZXh0TGlzdDpzLHNvdXJjZUxhbmd1YWdlOm8sdGFyZ2V0TGFuZ3VhZ2U6aX09ZSxuPW5ldyBDbihcInRyYW5zbGF0ZVRleHRcIik7cmV0dXJuIG4uc2V0TWVzc2FnZShgc291cmNlTGFuZ3VhZ2U6JHtvfSB0YXJnZXRMYW5ndWFnZToke2l9YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6b24scmVxdWVzdERhdGE6e3NvdXJjZVRleHRMaXN0OnMsc291cmNlOm98fFwiYXV0b1wiLHRhcmdldDppLGZyb206dGhpcy5nZXRNeVRpbnlJRCgpLFNES0FwcElEOnRoaXMuZ2V0U0RLQXBwSUQoKX19KS50aGVuKGU9Pntjb25zdHtlcnJvcjpzLHJlcXVlc3RJRDpvLHRyYW5zbGF0ZWRUZXh0TGlzdDppfT1lLmRhdGEse2NvZGU6cn09cztpZigwPT09cilyZXR1cm4gbi5lbmQoKSxfZS5pKGAke3R9IG9rLiByZXF1ZXN0SUQ6JHtvfWApLHduKHt0cmFuc2xhdGVkVGV4dExpc3Q6aX0pO3Rocm93ey4uLnMscmVxdWVzdElEOm99fSkuY2F0Y2goZT0+KG4uc2V0Q29kZShlLmNvZGUpLnNldE1vcmVNZXNzYWdlKGUucmVxdWVzdElEKS5lbmQoKSxfZS53KHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbih7Y29kZTpubi5UUkFOU0xBVEVfVEVYVF9GQUlMfSkpKX1tb2RpZnlSZW1vdGVNZXNzYWdlKGUpe2xldCBzPW51bGw7Y29uc3R7Y29udmVyc2F0aW9uVHlwZTpvLHRvOml9PWU7aWYodGhpcy5nZXRNb2R1bGUoZHMpLmlzTWVzc2FnZUZyb21PclRvQVZDaGF0cm9vbShpKSlyZXR1cm4gVm4oe2NvZGU6bm4uTUVTU0FHRV9NT0RJRllfRElTQUJMRURfSU5fQVZDSEFUUk9PTSxkYXRhOnttZXNzYWdlOmV9fSk7aWYoITE9PT10aGlzLmdldE1vZHVsZShVcykuZmlsdGVyTWVzc2FnZShlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5ELGRhdGE6e21lc3NhZ2U6ZX19KTtvPT09dC5DT05WX0MyQz9zPXRoaXMuZ2V0TW9kdWxlKGxzKTpvPT09dC5DT05WX0dST1VQJiYocz10aGlzLmdldE1vZHVsZShkcykpO2NvbnN0IG49bmV3IENuKFwibW9kaWZ5TWVzc2FnZVwiKTtuLnNldE1lc3NhZ2UoXCJ0bzpcIitpKTtjb25zdCByPXRoaXMuX24rXCIubW9kaWZ5UmVtb3RlTWVzc2FnZVwiO3JldHVybiBzLm1vZGlmeVJlbW90ZU1lc3NhZ2UoZSkudGhlbih0PT57bi5lbmQoKSxfZS5pKHIrXCIgb2tcIik7Y29uc3Qgcz10aGlzLl9vbk1vZGlmeVJlbW90ZU1lc3NhZ2VSZXNwKGUsdC5kYXRhKTtyZXR1cm4gd24oe21lc3NhZ2U6c30pfSkuY2F0Y2godD0+e2lmKG4uc2V0Q29kZSh0LmNvZGUpLnNldE1vcmVNZXNzYWdlKHQubWVzc2FnZSkuZW5kKCksX2UudyhyK1wiIGZhaWxlZC4gZXJyb3I6XCIsdCksMjAwMjc9PT10LmNvZGUpe2NvbnN0IHM9dGhpcy5fb25Nb2RpZnlSZW1vdGVNZXNzYWdlUmVzcChlLHQuZGF0YSk7cmV0dXJuIFZuKHtjb2RlOm5uLk1FU1NBR0VfTU9ESUZZX0NPTkZMSUNULGRhdGE6e21lc3NhZ2U6c319KX1yZXR1cm4gVm4oe2NvZGU6dC5jb2RlLG1lc3NhZ2U6dC5tZXNzYWdlLGRhdGE6e21lc3NhZ2U6ZX19KX0pfV9vbk1vZGlmeVJlbW90ZU1lc3NhZ2VSZXNwKGUsdCl7X2UuZCh0aGlzLl9uK1wiLl9vbk1vZGlmeVJlbW90ZU1lc3NhZ2VSZXNwIG9wdGlvbnM6XCIsdCk7Y29uc3R7Y29udmVyc2F0aW9uVHlwZTpzLGZyb206byx0bzppLHJhbmRvbTpuLHNlcXVlbmNlOnIsdGltZTphfT1lLHtlbGVtZW50czp1LG1lc3NhZ2VWZXJzaW9uOmMsY2xvdWRDdXN0b21EYXRhOmw9XCJcIn09dDtyZXR1cm4gdGhpcy5nZXRNb2R1bGUoX3MpLm9uTWVzc2FnZU1vZGlmaWVkKHtjb252ZXJzYXRpb25UeXBlOnMsZnJvbTpvLHRvOmksdGltZTphLHJhbmRvbTpuLHNlcXVlbmNlOnIsZWxlbWVudHM6dSxjbG91ZEN1c3RvbURhdGE6bCxtZXNzYWdlVmVyc2lvbjpjfSl9X2dlbmVyYXRlVVVJRChlKXtjb25zdCB0PXRoaXMuZ2V0TW9kdWxlKG1zKTtsZXQgcz1gJHt0LmdldFNES0FwcElEKCl9LSR7dC5nZXRVc2VySUQoKX0tJHtmdW5jdGlvbigpe2xldCBlPVwiXCI7Zm9yKGxldCB0PTMyO3Q+MDstLXQpZSs9WWVbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmplKV07cmV0dXJuIGV9KCl9YDtjb25zdCBvPWUubmFtZXx8ZS52YWx1ZXx8ZS51cmx8fGUudGVtcEZpbGVQYXRoLGk9byYmby5zbGljZShvLmxhc3RJbmRleE9mKFwiLlwiKSsxKTtyZXR1cm4gaSYmKHM9YCR7c30uJHtpfWApLHN9Z2V0TWVzc2FnZU9wdGlvbihlKXtyZXR1cm4gdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuZ2V0KGUpfV9nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKGNzKS5nZXROaWNrQW5kQXZhdGFyQnlVc2VySUQoZSl9X2dldE5hbWVDYXJkQnlHcm91cElEKGUpe2lmKGUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9HUk9VUCl7Y29uc3QgdD10aGlzLmdldE1vZHVsZShkcyk7aWYodClyZXR1cm4gdC5nZXRNeU5hbWVDYXJkQnlHcm91cElEKGUudG8pfXJldHVyblwiXCJ9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fbWVzc2FnZU9wdGlvbnNNYXAuY2xlYXIoKX19Y2xhc3MgdWEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiTWVzc2FnZUV4dGVuc2lvbk1vZHVsZVwiLHRoaXMubWVzc2FnZUV4dGVuc2lvbk1hcD1uZXcgTWFwLHRoaXMuZ2xvYmFsU2VxTWFwPW5ldyBNYXAsdGhpcy5nZXRNZXNzYWdlRXh0ZW5zaW9uc01hcD1uZXcgTWFwfW9uTWVzc2FnZUV4dGVuc2lvbk5vdGlmeSh0KXtjb25zdHttZXNzYWdlSW5mbzpzLG9wZXJhdGVUeXBlOm8sb3BlcmF0ZVJlc3VsdExpc3Q6aSx0aW55SUQ6bixnbG9iYWxTZXF1ZW5jZTpyfT10LmRhdGFMaXN0LHtjbGllbnRUaW1lOmEscmFuZG9tOnV9PXMsYz1gJHtufS0ke2F9LSR7dX1gLGw9W10sZD1bXTtfZS5sKGAke3RoaXMuX259Lm9uTWVzc2FnZUV4dGVuc2lvbk5vdGlmeSBtZXNzYWdlSUQ6JHtjfSBvcGVyYXRlVHlwZToke299IGdsb2JhbFNlcXVlbmNlOiR7cn1gKSx0aGlzLl91cGRhdGVHbG9iYWxTZXF1ZW5jZShjLHIpO2xldCBwPSExLGg9ITE7aS5mb3JFYWNoKGU9Pntjb25zdHtleHRlbnNpb25zOnQ9W10sY2xlYXJTZXF1ZW5jZTpzfT1lO2lmKDE9PT1vKXA9ITAsdC5mb3JFYWNoKGU9PntsLnB1c2goe2tleTplLmtleSx2YWx1ZTplLnZhbHVlfSl9KSx0aGlzLl91cGRhdGVMb2NhbEV4dGVuc2lvbihjLHQpO2Vsc2UgaWYoMj09PW8paD0hMCx0LmZvckVhY2goZT0+e2QucHVzaChlLmtleSl9KSx0aGlzLl91cGRhdGVMb2NhbEV4dGVuc2lvbihjLHQpO2Vsc2UgaWYoMz09PW8pe2lmKGg9ITAsdGhpcy5faGFzTG9jYWxFeHRlbnNpb24oYykpe3RoaXMuX2dldExvY2FsRXh0ZW5zaW9uKGMpLmZvckVhY2goKGUsdCk9PntlLnNlcTw9cyYmIUx0KGUudmFsdWUpJiZkLnB1c2godCl9KX10aGlzLl9jbGVhckxvY2FsRXh0ZW5zaW9uKGMscyl9fSkscCYmdGhpcy5lbWl0T3V0ZXJFdmVudChlLk1FU1NBR0VfRVhURU5TSU9OU19VUERBVEVELHttZXNzYWdlSUQ6YyxleHRlbnNpb25zOmx9KSxoJiZ0aGlzLmVtaXRPdXRlckV2ZW50KGUuTUVTU0FHRV9FWFRFTlNJT05TX0RFTEVURUQse21lc3NhZ2VJRDpjLGtleUxpc3Q6ZH0pfXNldE1lc3NhZ2VFeHRlbnNpb25zKGUsdCl7aWYoIXRoaXMuY2FuSVVzZShNLk1TR19FWFQpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHM9dGhpcy5fbitcIi5zZXRNZXNzYWdlRXh0ZW5zaW9uc1wiLHtJRDpvLGNvbnZlcnNhdGlvbklEOmksc2VxdWVuY2U6bix0aW1lOnJ9PWU7bGV0IGE9Wy4uLnRdO3QubGVuZ3RoPjIwJiYoYT10LnNsaWNlKDAsMjApLF9lLncocytcIi4gdGhlIGxlbmd0aCBvZiBleHRlbnNpb25zIGNhbm5vdCBleGNlZWQgMjAuXCIpKTtjb25zdCB1PWBjb252ZXJzYXRpb25JRDoke2l9IG1lc3NhZ2VJRDoke299IHNlcXVlbmNlOiR7bn0gdGltZToke3J9IGNvdW50OiR7YS5sZW5ndGh9YCxjPW5ldyBDbihcInNldE1lc3NhZ2VFeHRlbnNpb25zXCIpO3JldHVybiBjLnNldE1lc3NhZ2UodSksX2UubChgJHtzfSAke3V9YCksdGhpcy5fbW9kaWZ5TWVzc2FnZUV4dGVuc2lvbnMoZSxhKS50aGVuKGU9Pntjb25zdHtyZXN1bHRMaXN0OnQsc3VjY2Vzc0NvdW50Om8sZmFpbHVyZUNvdW50Oml9PWUsbj1gc3VjY2VzcyBjb3VudDoke299IGZhaWwgY291bnQ6JHtpfWA7cmV0dXJuIGMuc2V0TW9yZU1lc3NhZ2UobikuZW5kKCksX2UubChgJHtzfSBvay4gJHtufWApLHduKHtleHRlbnNpb25zOnR9KX0pLmNhdGNoKGU9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Muc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UuZShzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1nZXRNZXNzYWdlRXh0ZW5zaW9ucyhlKXtpZighdGhpcy5jYW5JVXNlKE0uTVNHX0VYVCkpcmV0dXJuIFZuKHtjb2RlOm5uLkNBTk5PVF9VU0VfQ09NTUVSQ0lBTF9BQklMSVRZfSk7Y29uc3QgdD10aGlzLl9uK1wiLmdldE1lc3NhZ2VFeHRlbnNpb25zXCIse0lEOnMsY29udmVyc2F0aW9uSUQ6byxzZXF1ZW5jZTppLHRpbWU6bn09ZSxyPWBjb252ZXJzYXRpb25JRDoke299IG1lc3NhZ2VJRDoke3N9IHNlcXVlbmNlOiR7aX0gdGltZToke259YCxhPW5ldyBDbihcImdldE1lc3NhZ2VFeHRlbnNpb25zXCIpO2Euc2V0TWVzc2FnZShyKSxfZS5sKGAke3R9ICR7cn1gKTtsZXQgdT12b2lkIDA7cmV0dXJuIHRoaXMuZ2V0TWVzc2FnZUV4dGVuc2lvbnNNYXAuaGFzKHMpJiYodT10aGlzLl9nZXRHbG9iYWxTZXF1ZW5jZShzKSksdGhpcy5fZ2V0TWVzc2FnZUV4dGVuc2lvbnMoZSx1KS50aGVuKGU9PihhLmVuZCgpLF9lLmwoYCR7dH0gb2suIHRvdGFsIGNvdW50OiR7ZS5sZW5ndGh9YCksd2UodSkmJmUubGVuZ3RoPjAmJnRoaXMuZ2V0TWVzc2FnZUV4dGVuc2lvbnNNYXAuc2V0KHMsMSksd24oe2V4dGVuc2lvbnM6ZX0pKSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57YS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWRlbGV0ZU1lc3NhZ2VFeHRlbnNpb25zKGUsdCl7aWYoIXRoaXMuY2FuSVVzZShNLk1TR19FWFQpKXJldHVybiBWbih7Y29kZTpubi5DQU5OT1RfVVNFX0NPTU1FUkNJQUxfQUJJTElUWX0pO2NvbnN0IHM9dGhpcy5fbitcIi5kZWxldGVNZXNzYWdlRXh0ZW5zaW9uc1wiLG89W107bGV0IGk9MztMdCh0KXx8KGk9Mix0LmZvckVhY2goZT0+e28ucHVzaCh7a2V5OmUsdmFsdWU6XCJcIixzZXE6MH0pfSkpO2NvbnN0e0lEOm4sY29udmVyc2F0aW9uSUQ6cixzZXF1ZW5jZTphLHRpbWU6dX09ZSxjPWBjb252ZXJzYXRpb25JRDoke3J9IG1lc3NhZ2VJRDoke259IHNlcXVlbmNlOiR7YX0gdGltZToke3V9IG9wZXJhdGVUeXBlOiR7aX1gLGw9bmV3IENuKFwiZGVsZXRlTWVzc2FnZUV4dGVuc2lvbnNcIik7cmV0dXJuIGwuc2V0TWVzc2FnZShjKSxfZS5sKGAke3N9ICR7Y31gKSx0aGlzLl9tb2RpZnlNZXNzYWdlRXh0ZW5zaW9ucyhlLG8saSkudGhlbihlPT57Y29uc3R7cmVzdWx0TGlzdDp0LHN1Y2Nlc3NDb3VudDpvLGZhaWx1cmVDb3VudDpufT1lO2xldCByPVwiXCI7cmV0dXJuIDI9PT1pJiYocj1gc3VjY2VzcyBjb3VudDoke299IGZhaWwgY291bnQ6JHtufWApLGwuc2V0TW9yZU1lc3NhZ2UoXCJcIityKS5lbmQoKSxfZS5sKGAke3N9IG9rLiAke3J9YCksd24oe2V4dGVuc2lvbnM6dH0pfSkuY2F0Y2goZT0+KHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bC5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfV9tb2RpZnlNZXNzYWdlRXh0ZW5zaW9ucyhlLHMsbz0xKXtjb25zdCBpPW90KGUudG8pP3QuQ09OVl9UT1BJQzplLmNvbnZlcnNhdGlvblR5cGU7bGV0IG49dm9pZCAwOzMhPT1vJiYobj10aGlzLl9nZXRSZXF1ZXN0RXh0ZW5zaW9ucyhlLHMpKTtsZXQgcj1udWxsO3N3aXRjaChpKXtjYXNlIHQuQ09OVl9DMkM6cj10aGlzLmdldE1vZHVsZShscyk7YnJlYWs7Y2FzZSB0LkNPTlZfR1JPVVA6cj10aGlzLmdldE1vZHVsZShkcyk7YnJlYWs7Y2FzZSB0LkNPTlZfVE9QSUM6cj10aGlzLmdldE1vZHVsZShncyk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9cmV0dXJuIHIubW9kaWZ5TWVzc2FnZUV4dGVuc2lvbnMoZSxuLG8pLnRoZW4odD0+e2xldHtleHRlbnNpb25zOnMsc2VxOm99PXQuZGF0YTtjb25zdCBpPVtdO2xldCBuPTAscj0wLGE9W107cmV0dXJuIHM9THQocyk/W106cyxzLmZvckVhY2goZT0+e2NvbnN0e2Vycm9yQ29kZTp0LGV4dGVuc2lvbjpzfT1lLHtrZXk6byx2YWx1ZTp1LHNlcTpjfT1zO2kucHVzaCh7Y29kZTp0LGtleTpvLHZhbHVlOnV9KSwwPT09dD9uKys6cisrLGEucHVzaCh7a2V5Om8sdmFsdWU6dSxzZXE6Y30pfSksdGhpcy5fdXBkYXRlR2xvYmFsU2VxdWVuY2UoZS5JRCxvKSxhLmxlbmd0aD4wJiYodGhpcy5fdXBkYXRlTG9jYWxFeHRlbnNpb24oZS5JRCxhKSxhPW51bGwpLHtyZXN1bHRMaXN0Omksc3VjY2Vzc0NvdW50Om4sZmFpbHVyZUNvdW50OnJ9fSkuY2F0Y2goZT0+Vm4oZSkpfV9nZXRSZXF1ZXN0RXh0ZW5zaW9ucyhlLHQpe2NvbnN0IHM9W107aWYodGhpcy5faGFzTG9jYWxFeHRlbnNpb24oZS5JRCkpe2NvbnN0IG89dGhpcy5fZ2V0TG9jYWxFeHRlbnNpb24oZS5JRCk7cmV0dXJuIHQuZm9yRWFjaChlPT57Y29uc3R7a2V5OnQsdmFsdWU6aX09ZTtsZXQgbj0wO28uaGFzKHQpJiYobj1vLmdldCh0KS5zZXEpLHMucHVzaCh7a2V5OnQsdmFsdWU6aSxzZXE6bn0pfSksc31yZXR1cm4gdC5mb3JFYWNoKGU9Pntjb25zdHtrZXk6dCx2YWx1ZTpvfT1lO3MucHVzaCh7a2V5OnQsdmFsdWU6byxzZXE6MH0pfSksc31fZ2V0TWVzc2FnZUV4dGVuc2lvbnMoZSxzKXtjb25zdCBvPXRoaXMuX24rXCIuX2dldE1lc3NhZ2VFeHRlbnNpb25zXCIse0lEOmksdG86bn09ZTtsZXQgcj1udWxsO3N3aXRjaChvdChuKT90LkNPTlZfVE9QSUM6ZS5jb252ZXJzYXRpb25UeXBlKXtjYXNlIHQuQ09OVl9DMkM6cj10aGlzLmdldE1vZHVsZShscyk7YnJlYWs7Y2FzZSB0LkNPTlZfR1JPVVA6cj10aGlzLmdldE1vZHVsZShkcyk7YnJlYWs7Y2FzZSB0LkNPTlZfVE9QSUM6cj10aGlzLmdldE1vZHVsZShncyk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gVm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9cmV0dXJuIHIuZ2V0TWVzc2FnZUV4dGVuc2lvbnMoZSxzKS50aGVuKHQ9PntsZXR7ZXh0ZW5zaW9uczpzLGNvbXBsZXRlRmxhZzpuLGdsb2JhbFNlcXVlbmNlOnIsY2xlYXJTZXF1ZW5jZTphfT10LmRhdGE7aWYocz1MdChzKT9bXTpzLF9lLmwoYCR7b30gb2suIGNvbXBsZXRlRmxhZzoke259IGdsb2JhbFNlcXVlbmNlOiR7cn0gY2xlYXJTZXF1ZW5jZToke2F9IGNvdW50OiR7cy5sZW5ndGh9YCksdGhpcy5fdXBkYXRlTG9jYWxFeHRlbnNpb24oaSxzKSx0aGlzLl9jbGVhckxvY2FsRXh0ZW5zaW9uKGksYSksdGhpcy5fdXBkYXRlR2xvYmFsU2VxdWVuY2UoaSxyKSwxIT09bil7Y29uc3QgdD1zLnNsaWNlKC0xKVswXS5zZXErMTtyZXR1cm4gdGhpcy5fZ2V0TWVzc2FnZUV4dGVuc2lvbnMoZSx0KX1yZXR1cm4gdGhpcy5fZ2V0TG9jYWxFeHRlbnNpb25zKGkpfSkuY2F0Y2goZT0+Vm4oZSkpfV9oYXNMb2NhbEV4dGVuc2lvbihlKXtyZXR1cm4gdGhpcy5tZXNzYWdlRXh0ZW5zaW9uTWFwLmhhcyhlKX1fZ2V0TG9jYWxFeHRlbnNpb24oZSl7cmV0dXJuIHRoaXMubWVzc2FnZUV4dGVuc2lvbk1hcC5nZXQoZSl9X3VwZGF0ZUxvY2FsRXh0ZW5zaW9uKGUsdCl7dGhpcy5faGFzTG9jYWxFeHRlbnNpb24oZSl8fHRoaXMubWVzc2FnZUV4dGVuc2lvbk1hcC5zZXQoZSxuZXcgTWFwKTtjb25zdCBzPXRoaXMuX2dldExvY2FsRXh0ZW5zaW9uKGUpO3QuZm9yRWFjaChlPT57Y29uc3R7a2V5OnQsdmFsdWU6bz1cIlwiLHNlcTppfT1lO3Muc2V0KHQse3ZhbHVlOm8sc2VxOml9KX0pfV9jbGVhckxvY2FsRXh0ZW5zaW9uKGUsdCl7aWYoISh0PD0wKSYmdGhpcy5faGFzTG9jYWxFeHRlbnNpb24oZSkpe2NvbnN0IHM9dGhpcy5fZ2V0TG9jYWxFeHRlbnNpb24oZSk7cy5mb3JFYWNoKChlLG8pPT57ZS5zZXE8PXQmJnMuZGVsZXRlKG8pfSl9fV9nZXRMb2NhbEV4dGVuc2lvbnMoZSl7Y29uc3QgdD1bXTtpZih0aGlzLl9oYXNMb2NhbEV4dGVuc2lvbihlKSl7dGhpcy5fZ2V0TG9jYWxFeHRlbnNpb24oZSkuZm9yRWFjaCgoZSxzKT0+e2NvbnN0e3ZhbHVlOm99PWU7THQobyl8fHQucHVzaCh7a2V5OnMsdmFsdWU6b30pfSl9cmV0dXJuIHR9X2dldEdsb2JhbFNlcXVlbmNlKGUpe3JldHVybiB0aGlzLmdsb2JhbFNlcU1hcC5nZXQoZSl9X3VwZGF0ZUdsb2JhbFNlcXVlbmNlKGUsdCl7dGhpcy5nbG9iYWxTZXFNYXAuc2V0KGUsdCl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5tZXNzYWdlRXh0ZW5zaW9uTWFwLmNsZWFyKCksdGhpcy5nbG9iYWxTZXFNYXAuY2xlYXIoKSx0aGlzLmdldE1lc3NhZ2VFeHRlbnNpb25zTWFwLmNsZWFyKCl9fWNsYXNzIGNhIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIkNvbWJvTWVzc2FnZU1vZHVsZVwifXNlbmRNZXNzYWdlKGUpe2NvbnN0IHM9dGhpcy5fY29uc3RydWN0TWVzc2FnZUluc3RhbmNlKGUpO2lmKG51bGw9PT1zKXJldHVybiBWbih7Y29kZTpubi5NRVNTQUdFX1NFTkRfRkFJTH0pO3RoaXMuX2FkZFNlbmRNZXNzYWdlVG90YWxDb3VudChzKTtjb25zdCBvPURhdGUubm93KCk7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKF9zKS5zZXRNZXNzYWdlUmFuZG9tKHMpLHRoaXMuX3NlbmRDb21ib01lc3NhZ2UocyxlKS50aGVuKGU9Pntjb25zdHt0aW1lOmksc2VxdWVuY2U6bixyZWFkUmVjZWlwdENvZGU6cn09ZS5kYXRhO2lmKEdlKHIpJiYwIT09cil7bmV3IENuKFwic2VuZE1lc3NhZ2VXaXRoUmVjZWlwdFwiKS5zZXRNZXNzYWdlKGBmcm9tOiR7cy5mcm9tfSB0bzoke3MudG99IHNlcXVlbmNlOiR7bn0gcmVhZFJlY2VpcHRDb2RlOiR7cn1gKS5lbmQoKSxfZS53KGAke3RoaXMuX259LnNlbmRNZXNzYWdlIHJlYWRSZWNlaXB0Q29kZToke3J9IG1lc3NhZ2U6JHt0aGlzLmdldEVycm9yTWVzc2FnZShyKX1gKX10aGlzLl9hZGRTZW5kTWVzc2FnZVN1Y2Nlc3NDb3VudChzLG8pO2NvbnN0IGE9dGhpcy5nZXRNb2R1bGUoX3MpO3Muc3RhdHVzPU50LlNVQ0NFU1Mscy50aW1lPWkscy5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0dST1VQJiYocy5zZXF1ZW5jZT1uKSxhLmFwcGVuZFRvTWVzc2FnZUxpc3Qocyk7bGV0IHU9cztyZXR1cm4hMD09PXMuX2lzRXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2UmJih1PVwiXCIpLGEub25NZXNzYWdlU2VudCh7Y29udmVyc2F0aW9uT3B0aW9uc0xpc3Q6W3tjb252ZXJzYXRpb25JRDpzLmNvbnZlcnNhdGlvbklELHVucmVhZENvdW50OjAsdHlwZTpzLmNvbnZlcnNhdGlvblR5cGUsc3ViVHlwZTpzLmNvbnZlcnNhdGlvblN1YlR5cGUsbGFzdE1lc3NhZ2U6dX1dfSksd24oe21lc3NhZ2U6c30pfSkuY2F0Y2goZT0+dGhpcy5fb25TZW5kTWVzc2FnZUZhaWxlZChzLGUpKX1fc2VuZENvbWJvTWVzc2FnZShlLHMpe2NvbnN0IG89dGhpcy5fbS5nZXRNb2R1bGUoRXMpO2xldCBpPVwiXCI7cmV0dXJuIGUuY29udmVyc2F0aW9uVHlwZT09PXQuQ09OVl9DMkMmJihpPWAke20uTkFNRS5PUEVOX0lNfS4ke20uQ01ELlNFTkRfTUVTU0FHRX1gKSxlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfR1JPVVAmJihpPWAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5TRU5EX0dST1VQX01FU1NBR0V9YCksby5zZW5kQ29tYm9NZXNzYWdlKHtzZXJ2Y21kOmksZGF0YTpzfSl9X2NvbnN0cnVjdE1lc3NhZ2VJbnN0YW5jZShlKXtjb25zdCBzPXRoaXMuX24rXCIuX2NvbnN0cnVjdE1lc3NhZ2VJbnN0YW5jZVwiO2xldCBvPW51bGw7dHJ5e2NvbnN0IGk9dGhpcy5nZXRNeVVzZXJJRCgpLG49e307aWYobi5zZW5kZXJUaW55SUQ9dGhpcy5nZXRNeVRpbnlJRCgpLG4uY3VycmVudFVzZXI9aSxuLmZyb209ZS5Gcm9tX0FjY291bnR8fGksZS5Hcm91cElkPyhuLmNvbnZlcnNhdGlvbklEPWAke3QuQ09OVl9HUk9VUH0ke2UuR3JvdXBJZH1gLG4uY29udmVyc2F0aW9uVHlwZT10LkNPTlZfR1JPVVAsbi50bz1lLkdyb3VwSWQpOmUuVG9fQWNjb3VudCYmKG4uY29udmVyc2F0aW9uSUQ9YCR7dC5DT05WX0MyQ30ke2UuVG9fQWNjb3VudH1gLG4uY29udmVyc2F0aW9uVHlwZT10LkNPTlZfQzJDLG4udG89ZS5Ub19BY2NvdW50KSxuLnRpbWU9ZS5Nc2dUaW1lU3RhbXB8fDAsbi5yYW5kb209ZS5SYW5kb218fGUuTXNnUmFuZG9tfHwwLG4ucHJpb3JpdHk9ZS5Nc2dQcmlvcml0eSxVZShlLkNsb3VkQ3VzdG9tRGF0YSkmJmUuQ2xvdWRDdXN0b21EYXRhLmxlbmd0aD4wJiYobi5jbG91ZEN1c3RvbURhdGE9ZS5DbG91ZEN1c3RvbURhdGEpLGJlKGUuU2VuZE1zZ0NvbnRyb2wpJiYobi5tZXNzYWdlQ29udHJvbEluZm89e30sZS5TZW5kTXNnQ29udHJvbC5pbmNsdWRlcyhcIk5vVW5yZWFkXCIpJiYobi5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tVW5yZWFkQ291bnQ9MSksZS5TZW5kTXNnQ29udHJvbC5pbmNsdWRlcyhcIk5vTGFzdE1zZ1wiKSYmKG4ubWVzc2FnZUNvbnRyb2xJbmZvLmV4Y2x1ZGVkRnJvbUxhc3RNZXNzYWdlPTEpKSxuLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfR1JPVVAmJmJlKGUuVG9fQWNjb3VudCkmJmUuVG9fQWNjb3VudC5sZW5ndGg+MCl7bGV0IHQ9ZS5Ub19BY2NvdW50O2UuVG9fQWNjb3VudC5sZW5ndGg+NTAmJih0PWUuVG9fQWNjb3VudC5zbGljZSgwLDUwKSxfZS53KHMrXCIgVG9fQWNjb3VudCBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byA1MC5cIikpLG4ucmVjZWl2ZXJMaXN0PVsuLi50XSxlLlRvX0FjY291bnQ9Wy4uLnRdfTEhPT1lLklzTmVlZFJlYWRSZWNlaXB0JiYxIT09ZS5OZWVkUmVhZFJlY2VpcHR8fChuLm5lZWRSZWFkUmVjZWlwdD0hMCksMT09PWUuU3VwcG9ydE1lc3NhZ2VFeHRlbnNpb24mJihuLmlzU3VwcG9ydEV4dGVuc2lvbj0hMCksbz1uZXcgYm4obiksby5zdGF0dXM9TnQuVU5TRU5ELGUuTXNnQ2xpZW50VGltZT1vLmNsaWVudFRpbWUsby5jb252ZXJzYXRpb25UeXBlPT09dC5DT05WX0MyQyYmKGUuTXNnU2VxPW8uc2VxdWVuY2UpO2NvbnN0IHI9ZS5Nc2dCb2R5Lmxlbmd0aDtsZXQgYTtmb3IobGV0IHQ9MDt0PHI7dCsrKWE9ZS5Nc2dCb2R5W3RdLFwiVElNVGV4dEVsZW1cIj09PWEuTXNnVHlwZT9vLnNldFRleHRFbGVtZW50KGEuTXNnQ29udGVudC5UZXh0KTpcIlRJTUN1c3RvbUVsZW1cIj09PWEuTXNnVHlwZT9vLnNldEN1c3RvbUVsZW1lbnQoe2RhdGE6YS5Nc2dDb250ZW50LkRhdGF8fFwiXCIsZGVzY3JpcHRpb246YS5Nc2dDb250ZW50LkRlc2N8fFwiXCIsZXh0ZW5zaW9uOmEuTXNnQ29udGVudC5FeHR8fFwiXCJ9KTpcIlRJTUZhY2VFbGVtXCI9PT1hLk1zZ1R5cGUmJm8uc2V0RmFjZUVsZW1lbnQoe2luZGV4OmEuTXNnQ29udGVudC5JbmRleCxkYXRhOmEuTXNnQ29udGVudC5EYXRhfSk7Y29uc3QgdT1vLmdldEVsZW1lbnRzKCk7by5wYXlsb2FkPXVbMF0uY29udGVudCxvLnR5cGU9dVswXS50eXBlfWNhdGNoKGkpe289bnVsbCxfZS5lKHMrXCIgZmFpbGVkLiBlcnJvcjpcIixpKX1yZXR1cm4gb31fb25TZW5kTWVzc2FnZUZhaWxlZChlLHQpe2Uuc3RhdHVzPU50LkZBSUw7dGhpcy5nZXRNb2R1bGUoX3MpLmRlbGV0ZU1lc3NhZ2VSYW5kb20oZSksdGhpcy5fYWRkU2VuZE1lc3NhZ2VGYWlsQ291bnRPblVzZXIoZSx0KTtjb25zdCBzPW5ldyBDbihcInNlbmRNZXNzYWdlXCIpO3JldHVybiBzLnNldE1lc3NhZ2UoYHRqZ19pZDoke3RoaXMuZ2VuZXJhdGVUamdJRChlKX0gdHlwZToke2UudHlwZX0gZnJvbToke2UuZnJvbX0gdG86JHtlLnRvfWApLHRoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW2Usb10pPT57cy5zZXRFcnJvcih0LGUsbykuZW5kKCl9KSxfZS5lKHRoaXMuX24rXCIuX29uU2VuZE1lc3NhZ2VGYWlsZWQgZXJyb3I6XCIsdCksVm4obmV3IEZuKHtjb2RlOnQmJnQuY29kZT90LmNvZGU6bm4uTUVTU0FHRV9TRU5EX0ZBSUwsbWVzc2FnZTp0JiZ0Lm1lc3NhZ2U/dC5tZXNzYWdlOnZvaWQgMCxkYXRhOnttZXNzYWdlOmV9fSkpfV9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKXtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfQzJDKXJldHVybiB1bjtpZihlLmNvbnZlcnNhdGlvblR5cGU9PT10LkNPTlZfR1JPVVApe2NvbnN0IHQ9dGhpcy5nZXRNb2R1bGUoZHMpLmdldExvY2FsR3JvdXBQcm9maWxlKGUudG8pO2lmKCF0KXJldHVybjtjb25zdCBzPXQudHlwZTtyZXR1cm4gZXQocyk/bG46Y259fV9hZGRTZW5kTWVzc2FnZVRvdGFsQ291bnQoZSl7Y29uc3QgdD10aGlzLl9nZXRTZW5kTWVzc2FnZVNwZWNpZmllZEtleShlKTtpZih0KXt0aGlzLmdldE1vZHVsZShScykuYWRkVG90YWxDb3VudCh0KX19X2FkZFNlbmRNZXNzYWdlU3VjY2Vzc0NvdW50KGUsdCl7Y29uc3Qgcz1NYXRoLmFicyhEYXRlLm5vdygpLXQpLG89dGhpcy5fZ2V0U2VuZE1lc3NhZ2VTcGVjaWZpZWRLZXkoZSk7aWYobyl7Y29uc3QgZT10aGlzLmdldE1vZHVsZShScyk7ZS5hZGRTdWNjZXNzQ291bnQobyksZS5hZGRDb3N0KG8scyl9fV9hZGRTZW5kTWVzc2FnZUZhaWxDb3VudE9uVXNlcihlLHQpe2NvbnN0e2NvZGU6cz0tMX09dCxvPXRoaXMuZ2V0TW9kdWxlKFJzKSxpPXRoaXMuX2dldFNlbmRNZXNzYWdlU3BlY2lmaWVkS2V5KGUpO3JhKHMpJiZpJiZvLmFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZShpKX19Y2xhc3MgbGEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiUGx1Z2luTW9kdWxlXCIsdGhpcy5wbHVnaW5zPXt9fXJlZ2lzdGVyUGx1Z2luKGUpe09iamVjdC5rZXlzKGUpLmZvckVhY2godD0+e3RoaXMucGx1Z2luc1t0XT1lW3RdfSk7bmV3IENuKFwicmVnaXN0ZXJQbHVnaW5cIikuc2V0TWVzc2FnZShcIlwiK09iamVjdC5rZXlzKGUpKS5lbmQoKX1nZXRQbHVnaW4oZSl7cmV0dXJuIHRoaXMucGx1Z2luc1tlXX1yZXNldCgpe319Y2xhc3MgZGEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiU3luY1VucmVhZE1lc3NhZ2VNb2R1bGVcIix0aGlzLl9jb29raWU9XCJcIix0aGlzLl9vbmxpbmVTeW5jRmxhZz0hMSx0aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCkub24oS24sdGhpcy5fb25Mb2dpblN1Y2Nlc3MsdGhpcyl9X29uTG9naW5TdWNjZXNzKGUpe3RoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzowfSl9X3N0YXJ0U3luYyhlKXtjb25zdHtjb29raWU6dCxzeW5jRmxhZzpzLGlzT25saW5lU3luYzpvfT1lLGk9dGhpcy5fbitcIi5fc3RhcnRTeW5jXCI7X2UubChgJHtpfSBjb29raWU6JHt0fSBzeW5jRmxhZzoke3N9IGlzT25saW5lU3luYzoke299YCksdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6QnMscmVxdWVzdERhdGE6e2Nvb2tpZTp0LHN5bmNGbGFnOnMsaXNPbmxpbmVTeW5jOm99fSkudGhlbihlPT57Y29uc3R7Y29va2llOnQsc3luY0ZsYWc6c309ZS5kYXRhO3RoaXMuX2Nvb2tpZT10LEx0KHQpfHwoMD09PXN8fDE9PT1zPyh0aGlzLl9kaXNwYXRjaFVucmVhZE1lc3NhZ2Uoey4uLmUuZGF0YSxpc1N5bmNpbmdFbmRlZDohMX0pLHRoaXMuX3N0YXJ0U3luYyh7Y29va2llOnQsc3luY0ZsYWc6cyxpc09ubGluZVN5bmM6MH0pKToyPT09cyYmdGhpcy5fZGlzcGF0Y2hVbnJlYWRNZXNzYWdlKHsuLi5lLmRhdGEsaXNTeW5jaW5nRW5kZWQ6ITB9KSl9KS5jYXRjaChlPT57X2UuZShpK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSl9KX1fZGlzcGF0Y2hVbnJlYWRNZXNzYWdlKGUpe2lmKGUuZXZlbnRBcnJheSl7dGhpcy5nZXRNb2R1bGUoRXMpLm9uTWVzc2FnZSh7aGVhZDp7fSxib2R5OntldmVudEFycmF5OmUuZXZlbnRBcnJheSxpc0luc3RhbnRNZXNzYWdlOnRoaXMuX29ubGluZVN5bmNGbGFnLGlzU3luY2luZ0VuZGVkOmUuaXNTeW5jaW5nRW5kZWR9fSl9dGhpcy5nZXRNb2R1bGUobHMpLm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6ZS5tZXNzYWdlTGlzdCxpc0luc3RhbnRNZXNzYWdlOiEhZS5pc1N5bmNpbmdFbmRlZCYmdGhpcy5fb25saW5lU3luY0ZsYWcsQzJDUmVtYWluaW5nVW5yZWFkTGlzdDplLkMyQ1JlbWFpbmluZ1VucmVhZExpc3QsQzJDUGFpclVucmVhZExpc3Q6ZS5DMkNQYWlyVW5yZWFkTGlzdH0pfXN0YXJ0T25saW5lU3luYygpe19lLmwodGhpcy5fbitcIi5zdGFydE9ubGluZVN5bmNcIiksdGhpcy5fb25saW5lU3luY0ZsYWc9ITAsdGhpcy5fc3RhcnRTeW5jKHtjb29raWU6dGhpcy5fY29va2llLHN5bmNGbGFnOjAsaXNPbmxpbmVTeW5jOjF9KX1zdGFydFN5bmNPblJlY29ubmVjdGVkKCl7X2UubCh0aGlzLl9uK1wiLnN0YXJ0U3luY09uUmVjb25uZWN0ZWQuXCIpLHRoaXMuX29ubGluZVN5bmNGbGFnPSEwLHRoaXMuX3N0YXJ0U3luYyh7Y29va2llOnRoaXMuX2Nvb2tpZSxzeW5jRmxhZzowLGlzT25saW5lU3luYzowfSl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fb25saW5lU3luY0ZsYWc9ITEsdGhpcy5fY29va2llPVwiXCJ9fWNvbnN0IHBhPXtyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0bzpcIlRvX0FjY291bnRcIixmcm9tOlwiRnJvbV9BY2NvdW50XCIsZ3JvdXBJRDpcIkdyb3VwSWRcIixncm91cEF0VXNlcklEOlwiR3JvdXBBdF9BY2NvdW50XCIsZXh0ZW5zaW9uOlwiRXh0XCIsZGF0YTpcIkRhdGFcIixkZXNjcmlwdGlvbjpcIkRlc2NcIixlbGVtZW50czpcIk1zZ0JvZHlcIixzaXplVHlwZTpcIlR5cGVcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdmlkZW9Vcmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIix1dWlkOlwiVVVJRFwiLHByaW9yaXR5OlwiTXNnUHJpb3JpdHlcIixyZWNlaXZlclVzZXJJRDpcIlRvX0FjY291bnRcIixyZWNlaXZlckdyb3VwSUQ6XCJHcm91cElkXCIsbWVzc2FnZVNlbmRlcjpcIlNlbmRlcklkXCIsbWVzc2FnZVJlY2VpdmVyOlwiUmVjZWl2ZXJJZFwiLG5pY2s6XCJGcm9tX0FjY291bnROaWNrXCIsYXZhdGFyOlwiRnJvbV9BY2NvdW50SGVhZHVybFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixwYkRvd25sb2FkS2V5OlwiUGJNc2dLZXlcIixkb3dubG9hZEtleTpcIkpzb25Nc2dLZXlcIixhcHBsaWNhdGlvblR5cGU6XCJQZW5kZW5jeVR5cGVcIix1c2VySURMaXN0OlwiVG9fQWNjb3VudFwiLGdyb3VwTmFtZUxpc3Q6XCJHcm91cE5hbWVcIix1c2VySUQ6XCJUb19BY2NvdW50XCIsZ3JvdXBBdHRyaWJ1dGVMaXN0OlwiR3JvdXBBdHRyXCIsbWFpblNlcXVlbmNlOlwiQXR0ck1haW5TZXFcIixhdkNoYXRSb29tS2V5OlwiQnl0ZXNLZXlcIixhdHRyaWJ1dGVDb250cm9sOlwiQXR0ckNvbnRyb2xcIixzZXF1ZW5jZTpcInNlcVwiLG1lc3NhZ2VDb250cm9sSW5mbzpcIlNlbmRNc2dDb250cm9sXCIsdXBkYXRlU2VxdWVuY2U6XCJVcGRhdGVTZXFcIixjbGllbnRUaW1lOlwiTXNnQ2xpZW50VGltZVwiLHNlcXVlbmNlTGlzdDpcIk1zZ1NlcUxpc3RcIix0b3BpY0lEOlwiVG9waWNJZFwiLGN1c3RvbURhdGE6XCJDdXN0b21TdHJpbmdcIixpc1N1cHBvcnRUb3BpYzpcIlN1cHBvcnRUb3BpY1wiLGlzV2ViVW5pYXBwOlwiaXNfd2ViX3VuaWFwcFwiLGlzU3VwcG9ydEV4dGVuc2lvbjpcIlN1cHBvcnRNZXNzYWdlRXh0ZW5zaW9uXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCIsbWVzc2FnZUtleTpcIk1zZ0tleVwiLHN0YXJ0U2VxdWVuY2U6XCJzdGFydFNlcVwiLHNpbXBsaWZpZWRNZXNzYWdlOlwiRG93bnNpemVGbGFnXCJ9LHJlc3BvbnNlOntNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsVGh1bWJVVUlEOlwidGh1bWJVVUlEXCIsVmlkZW9VVUlEOlwidmlkZW9VVUlEXCIsRG93bmxvYWRfRmxhZzpcImRvd25sb2FkRmxhZ1wiLEdyb3VwSWQ6XCJncm91cElEXCIsTWVtYmVyX0FjY291bnQ6XCJ1c2VySURcIixNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixTeW5jRmxhZzpcInN5bmNGbGFnXCIsVG9fQWNjb3VudDpcInRvXCIsRnJvbV9BY2NvdW50OlwiZnJvbVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsTXNnUmFuZG9tOlwicmFuZG9tXCIsTXNnVGltZTpcInRpbWVcIixNc2dUaW1lU3RhbXA6XCJ0aW1lXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixNc2dCb2R5OlwiZWxlbWVudHNcIixGcm9tX0FjY291bnROaWNrOlwibmlja1wiLEZyb21fQWNjb3VudEhlYWR1cmw6XCJhdmF0YXJcIixHcm91cFdpdGhkcmF3SW5mb0FycmF5OlwicmV2b2tlZEluZm9zXCIsR3JvdXBSZWFkSW5mb0FycmF5OlwiZ3JvdXBNZXNzYWdlUmVhZE5vdGljZVwiLExhc3RSZWFkTXNnU2VxOlwibGFzdE1lc3NhZ2VTZXFcIixXaXRoZHJhd0MyY01zZ05vdGlmeTpcImMyY01lc3NhZ2VSZXZva2VkTm90aWZ5XCIsQzJjV2l0aGRyYXdJbmZvQXJyYXk6XCJyZXZva2VkSW5mb3NcIixDMmNSZWFkZWRSZWNlaXB0OlwiYzJjTWVzc2FnZVJlYWRSZWNlaXB0XCIsUmVhZEMyY01zZ05vdGlmeTpcImMyY01lc3NhZ2VSZWFkTm90aWNlXCIsTGFzdFJlYWRUaW1lOlwicGVlclJlYWRUaW1lXCIsTXNnUmFuZDpcInJhbmRvbVwiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnU2hvdzpcIm1lc3NhZ2VTaG93XCIsTmV4dE1zZ1NlcTpcIm5leHRNZXNzYWdlU2VxXCIsRmFjZVVybDpcImF2YXRhclwiLFByb2ZpbGVEYXRhTW9kOlwicHJvZmlsZU1vZGlmeVwiLFByb2ZpbGVfQWNjb3VudDpcInVzZXJJRFwiLFZhbHVlQnl0ZXM6XCJ2YWx1ZVwiLFZhbHVlTnVtOlwidmFsdWVcIixOb3RpY2VTZXE6XCJub3RpY2VTZXF1ZW5jZVwiLE5vdGlmeVNlcTpcIm5vdGlmeVNlcXVlbmNlXCIsTXNnRnJvbV9BY2NvdW50RXh0cmFJbmZvOlwibWVzc2FnZUZyb21BY2NvdW50RXh0cmFJbmZvcm1hdGlvblwiLE9wZXJhdG9yX0FjY291bnQ6XCJvcGVyYXRvcklEXCIsT3BUeXBlOlwib3BlcmF0aW9uVHlwZVwiLFJlcG9ydFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsVXNlcklkOlwidXNlcklEXCIsVXNlcl9BY2NvdW50OlwidXNlcklEXCIsTGlzdF9BY2NvdW50OlwidXNlcklETGlzdFwiLE1zZ09wZXJhdG9yTWVtYmVyRXh0cmFJbmZvOlwib3BlcmF0b3JJbmZvXCIsTXNnTWVtYmVyRXh0cmFJbmZvOlwibWVtYmVySW5mb0xpc3RcIixJbWFnZVVybDpcImF2YXRhclwiLE5pY2tOYW1lOlwibmlja1wiLE1zZ0dyb3VwTmV3SW5mbzpcIm5ld0dyb3VwUHJvZmlsZVwiLE1zZ0FwcERlZmluZWREYXRhOlwiZ3JvdXBDdXN0b21GaWVsZFwiLE93bmVyX0FjY291bnQ6XCJvd25lcklEXCIsR3JvdXBGYWNlVXJsOlwiYXZhdGFyXCIsR3JvdXBJbnRyb2R1Y3Rpb246XCJpbnRyb2R1Y3Rpb25cIixHcm91cE5vdGlmaWNhdGlvbjpcIm5vdGlmaWNhdGlvblwiLEdyb3VwQXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwiLE1zZ0tleTpcIm1lc3NhZ2VLZXlcIixHcm91cEluZm86XCJncm91cFByb2ZpbGVcIixTaHV0dXBUaW1lOlwibXV0ZVRpbWVcIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixHcm91cEF0X0FjY291bnQ6XCJncm91cEF0VXNlcklEXCIsTXNnTnVtOlwibWVzc2FnZU51bWJlclwiLFBiTXNnS2V5OlwicGJEb3dubG9hZEtleVwiLEpzb25Nc2dLZXk6XCJkb3dubG9hZEtleVwiLE1zZ01vZGlmaWVkRmxhZzpcImlzTW9kaWZpZWRcIixQZW5kZW5jeUl0ZW06XCJhcHBsaWNhdGlvbkl0ZW1cIixQZW5kZW5jeVR5cGU6XCJhcHBsaWNhdGlvblR5cGVcIixBZGRUaW1lOlwidGltZVwiLEFkZFNvdXJjZTpcInNvdXJjZVwiLEFkZFdvcmRpbmc6XCJ3b3JkaW5nXCIsUHJvZmlsZUltSW1hZ2U6XCJhdmF0YXJcIixQZW5kZW5jeUFkZDpcImZyaWVuZEFwcGxpY2F0aW9uQWRkZWRcIixGcmllblBlbmN5ZERlbF9BY2NvdW50OlwiZnJpZW5kQXBwbGljYXRpb25EZWxldGVkVXNlcklETGlzdFwiLFBlZXJfQWNjb3VudDpcInVzZXJJRFwiLEdyb3VwQXR0cjpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEdyb3VwQXR0ckFyeTpcImdyb3VwQXR0cmlidXRlTGlzdFwiLEF0dHJNYWluU2VxOlwibWFpblNlcXVlbmNlXCIsc2VxOlwic2VxdWVuY2VcIixHcm91cEF0dHJPcHRpb246XCJncm91cEF0dHJpYnV0ZU9wdGlvblwiLEJ5dGVzQ2hhbmdlZEtleXM6XCJjaGFuZ2VkS2V5TGlzdFwiLEdyb3VwQXR0ckluZm86XCJncm91cEF0dHJpYnV0ZUxpc3RcIixHcm91cEF0dHJTZXE6XCJtYWluU2VxdWVuY2VcIixQdXNoQ2hhbmdlZEF0dHJWYWxGbGFnOlwiaXNXaXRoQ2hhbmdlZEF0dHJpYnV0ZUluZm9cIixTdWJLZXlTZXE6XCJzZXF1ZW5jZVwiLFZhbDpcInZhbHVlXCIsTXNnR3JvdXBGcm9tQ2FyZE5hbWU6XCJzZW5kZXJOYW1lQ2FyZFwiLE1zZ0dyb3VwRnJvbU5pY2tOYW1lOlwic2VuZGVyTmlja1wiLEMyY05pY2s6XCJwZWVyTmlja1wiLEMyY0ltYWdlOlwicGVlckF2YXRhclwiLFNlbmRNc2dDb250cm9sOlwibWVzc2FnZUNvbnRyb2xJbmZvXCIsTm9MYXN0TXNnOlwiZXhjbHVkZWRGcm9tTGFzdE1lc3NhZ2VcIixOb1VucmVhZDpcImV4Y2x1ZGVkRnJvbVVucmVhZENvdW50XCIsVXBkYXRlU2VxOlwidXBkYXRlU2VxdWVuY2VcIixNdXRlTm90aWZpY2F0aW9uczpcIm11dGVGbGFnXCIsTXNnQ2xpZW50VGltZTpcImNsaWVudFRpbWVcIixUaW55SWQ6XCJ0aW55SURcIixHcm91cE1zZ1JlY2VpcHRMaXN0OlwicmVhZFJlY2VpcHRMaXN0XCIsUmVhZE51bTpcInJlYWRDb3VudFwiLFVucmVhZE51bTpcInVucmVhZENvdW50XCIsVG9waWNJZDpcInRvcGljSURcIixNaWxsaW9uR3JvdXBGbGFnOlwiY29tbXVuaXR5VHlwZVwiLFN1cHBvcnRUb3BpYzpcImlzU3VwcG9ydFRvcGljXCIsTXNnVG9waWNOZXdJbmZvOlwibmV3VG9waWNJbmZvXCIsU2h1dHVwQWxsOlwibXV0ZUFsbE1lbWJlcnNcIixDdXN0b21TdHJpbmc6XCJjdXN0b21EYXRhXCIsVG9waWNGYWNlVXJsOlwiYXZhdGFyXCIsVG9waWNJbnRyb2R1Y3Rpb246XCJpbnRyb2R1Y3Rpb25cIixUb3BpY05vdGlmaWNhdGlvbjpcIm5vdGlmaWNhdGlvblwiLFRvcGljSWRBcnJheTpcInRvcGljSURMaXN0XCIsTXNnVmVyc2lvbjpcIm1lc3NhZ2VWZXJzaW9uXCIsQzJjTXNnTW9kTm90aWZ5czpcImMyY01lc3NhZ2VNb2RpZmllZFwiLEdyb3VwTXNnTW9kTm90aWZ5czpcImdyb3VwTWVzc2FnZU1vZGlmaWVkXCIsQXBwbHlKb2luT3B0aW9uOlwiam9pbk9wdGlvblwiLE1zZ0ZsYWc6XCJtZXNzYWdlUmVtaW5kVHlwZVwiLEF0SW5mb0xpc3Q6XCJncm91cEF0SW5mb0xpc3RcIixBdEZsYWdMaXN0OlwiZ3JvdXBBdFR5cGVcIixBdE1zZ1NlcTpcInNlcXVlbmNlXCIsQmFuRHVyYXRpb246XCJkdXJhdGlvblwiLEJhbkRlc2NyaXB0aW9uOlwicmVhc29uXCIsTm90VmlzaWJsZTpcImludmlzaWJsZVwiLEJ5dGVzVGFnOlwidGFnXCIsQnl0ZXNWYWx1ZTpcInZhbHVlXCIsUnB0Qnl0ZXNWYWx1ZTpcInZhbHVlXCIsTGF0ZXN0U2VxOlwiZ2xvYmFsU2VxdWVuY2VcIixDbGVhclNlcTpcImNsZWFyU2VxdWVuY2VcIixTdXBwb3J0TWVzc2FnZUV4dGVuc2lvbjpcImlzU3VwcG9ydEV4dGVuc2lvblwiLEV4dGVuc2lvbkxpc3Q6XCJleHRlbnNpb25zXCIsR3JvdXBDb3VudGVyOlwiY291bnRlckxpc3RcIixSZXZva2VyX0FjY291bnQ6XCJyZXZva2VyXCIsTXNnRXh0ZW5zaW9uTm90aWZ5OlwibWVzc2FnZUV4dGVuc2lvbk5vdGlmeVwiLEV4dGVuc2lvbkMyY01zZ0luZm86XCJtZXNzYWdlSW5mb1wiLEV4dGVuc2lvbkdyb3VwTXNnSW5mbzpcIm1lc3NhZ2VJbmZvXCIsTXNnT3B0VHlwZTpcIm9wZXJhdGVUeXBlXCIsU2V0S1ZJbmZvOlwib3BlcmF0ZVJlc3VsdExpc3RcIixEZWxldGVLVkluZm86XCJvcGVyYXRlUmVzdWx0TGlzdFwiLENsZWFyS1ZJbmZvOlwib3BlcmF0ZVJlc3VsdExpc3RcIixNc2dLZXlWYWx1ZTpcImV4dGVuc2lvbnNcIixDbGVhck1zZ1NlcTpcImNsZWFyU2VxdWVuY2VcIixNc2dMYXN0U2VxOlwiZ2xvYmFsU2VxdWVuY2VcIixJbnZpdGVKb2luT3B0aW9uOlwiaW52aXRlT3B0aW9uXCIsTWVtYmVyTGlzdF9BY2NvdW50OlwiaW52aXRlZUxpc3RcIixNc2dNZW1iZXJFeHRyYUluZm9MaXN0OlwiaW52aXRlZUluZm9MaXN0XCIsRTpcImV2ZW50XCIsR0luZjpcImdyb3VwUHJvZmlsZVwiLE1DVDpcImNsaWVudFRpbWVcIixNUjpcInJhbmRvbVwiLE1QOlwicHJpb3JpdHlcIixNVFM6XCJ0aW1lXCIsR0lkOlwiZ3JvdXBJRFwiLE1TOlwic2VxdWVuY2VcIixDQ0Q6XCJjbG91ZEN1c3RvbURhdGFcIixGX0FjY291bnQ6XCJmcm9tXCIsRl9IZDpcImF2YXRhclwiLEZfTk46XCJuaWNrXCIsR046XCJncm91cE5hbWVcIixHVDpcImdyb3VwVHlwZVwiLElzU3lzOlwiaXNTeXN0ZW1NZXNzYWdlXCIsT3BJbmY6XCJvcGVyYXRvckluZm9cIixJbWc6XCJhdmF0YXJcIixOTjpcIm5pY2tcIixPbmxpbmVJbmY6XCJvbmxpbmVNZW1iZXJJbmZvXCIsRVQ6XCJleHBpcmVUaW1lXCIsTnVtOlwib25saW5lTWVtYmVyTnVtXCIsT3B0Olwib3BlcmF0aW9uVHlwZVwiLE9fQWNjb3VudDpcIm9wZXJhdG9ySURcIixSVDpcIm9wZXJhdGlvblR5cGVcIixVREY6XCJ1c2VyRGVmaW5lZEZpZWxkXCIsTF9BY2NvdW50OlwidXNlcklETGlzdFwifSxpZ25vcmVLZXlXb3JkOltcIkMyQ1wiLFwiSURcIixcIlVTUFwiXX07ZnVuY3Rpb24gaGEoZSx0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIHRoZSBpbnB1dCB0byBiZSBgc3RyaW5nIHwgc3RyaW5nW11gXCIpO3Q9T2JqZWN0LmFzc2lnbih7cGFzY2FsQ2FzZTohMX0sdCk7aWYoMD09PShlPUFycmF5LmlzQXJyYXkoZSk/ZS5tYXAoZT0+ZS50cmltKCkpLmZpbHRlcihlPT5lLmxlbmd0aCkuam9pbihcIi1cIik6ZS50cmltKCkpLmxlbmd0aClyZXR1cm5cIlwiO2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gdC5wYXNjYWxDYXNlP2UudG9VcHBlckNhc2UoKTplLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGUhPT1lLnRvTG93ZXJDYXNlKCkmJihlPWdhKGUpKSxlPWUucmVwbGFjZSgvXltfLlxcLSBdKy8sXCJcIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXy5cXC0gXSsoXFx3fCQpL2csKGUsdCk9PnQudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvXFxkKyhcXHd8JCkvZyxlPT5lLnRvVXBwZXJDYXNlKCkpLHM9ZSx0LnBhc2NhbENhc2U/cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStzLnNsaWNlKDEpOnM7dmFyIHN9Y29uc3QgZ2E9ZT0+e2xldCB0PSExLHM9ITEsbz0hMTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krKyl7Y29uc3Qgbj1lW2ldO3QmJi9bYS16QS1aXS8udGVzdChuKSYmbi50b1VwcGVyQ2FzZSgpPT09bj8oZT1lLnNsaWNlKDAsaSkrXCItXCIrZS5zbGljZShpKSx0PSExLG89cyxzPSEwLGkrKyk6cyYmbyYmL1thLXpBLVpdLy50ZXN0KG4pJiZuLnRvTG93ZXJDYXNlKCk9PT1uPyhlPWUuc2xpY2UoMCxpLTEpK1wiLVwiK2Uuc2xpY2UoaS0xKSxvPXMscz0hMSx0PSEwKToodD1uLnRvTG93ZXJDYXNlKCk9PT1uJiZuLnRvVXBwZXJDYXNlKCkhPT1uLG89cyxzPW4udG9VcHBlckNhc2UoKT09PW4mJm4udG9Mb3dlckNhc2UoKSE9PW4pfXJldHVybiBlfTtmdW5jdGlvbiBfYShlLHQpe2xldCBzPTA7cmV0dXJuIGZ1bmN0aW9uIGUodCxvKXtpZihzKysscz4xMDApcmV0dXJuIHMtLSx0O2lmKGJlKHQpKXtjb25zdCBpPXQubWFwKHQ9PmtlKHQpP2UodCxvKTp0KTtyZXR1cm4gcy0tLGl9aWYoa2UodCkpe2xldCBpPWZ1bmN0aW9uKGUsdCl7Y29uc3Qgcz1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG89Pntjb25zdCBpPXQoZVtvXSxvKTtpJiYoc1tpXT1lW29dKX0pLHN9KHQsKGUsdCk9PntpZighVmUodCkpcmV0dXJuITE7aWYoKHM9dCkhPT1oYShzKSlmb3IobGV0IG89MDtvPHBhLmlnbm9yZUtleVdvcmQubGVuZ3RoJiYhdC5pbmNsdWRlcyhwYS5pZ25vcmVLZXlXb3JkW29dKTtvKyspO3ZhciBzO3JldHVybiB3ZShvW3RdKT9mdW5jdGlvbihlKXtpZihcIk9QUE9DaGFubmVsSURcIj09PWUpcmV0dXJuIGU7cmV0dXJuIGVbMF0udG9VcHBlckNhc2UoKStoYShlKS5zbGljZSgxKX0odCk6b1t0XX0pO3JldHVybiBpPWF0KGksKHQscyk9PmJlKHQpfHxrZSh0KT9lKHQsbyk6dCkscy0tLGl9fShlLHQpfWZ1bmN0aW9uIG1hKGUsdCl7aWYoYmUoZSkpcmV0dXJuIGUubWFwKGU9PmtlKGUpP21hKGUsdCk6ZSk7aWYoa2UoZSkpe2xldCBzPWZ1bmN0aW9uKGUsdCl7Y29uc3Qgcz17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChvPT57c1t0KGVbb10sbyldPWVbb119KSxzfShlLChlLHMpPT53ZSh0W3NdKT9oYShzKTp0W3NdKTtyZXR1cm4gcz1hdChzLGU9PmJlKGUpfHxrZShlKT9tYShlLHQpOmUpLHN9fWNvbnN0IE1hPVN0cmluZy5mcm9tQ2hhckNvZGUsZmE9ZnVuY3Rpb24oZSl7bGV0IHQ9MHxlLmNoYXJDb2RlQXQoMCk7aWYoNTUyOTY8PXQpaWYodDw1NjMyMCl7Y29uc3Qgcz0wfGUuY2hhckNvZGVBdCgxKTtpZig1NjMyMDw9cyYmczw9NTczNDMpe2lmKHQ9KHQ8PDEwKStzLTU2NjEzODg4fDAsdD42NTUzNSlyZXR1cm4gTWEoMjQwfHQ+Pj4xOCwxMjh8dD4+PjEyJjYzLDEyOHx0Pj4+NiY2MywxMjh8NjMmdCl9ZWxzZSB0PTY1NTMzfWVsc2UgdDw9NTczNDMmJih0PTY1NTMzKTtyZXR1cm4gdDw9MjA0Nz9NYSgxOTJ8dD4+PjYsMTI4fDYzJnQpOk1hKDIyNHx0Pj4+MTIsMTI4fHQ+Pj42JjYzLDEyOHw2MyZ0KX0sSWE9ZnVuY3Rpb24oZSl7Y29uc3QgdD12b2lkIDA9PT1lP1wiXCI6KFwiXCIrZSkucmVwbGFjZSgvW1xceDgwLVxcdUQ3ZmZcXHVEQzAwLVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0/L2csZmEpLHM9MHx0Lmxlbmd0aCxvPW5ldyBVaW50OEFycmF5KHMpO2xldCBpPTA7Zm9yKDtpPHM7aT1pKzF8MClvW2ldPTB8dC5jaGFyQ29kZUF0KGkpO3JldHVybiBvfTtjbGFzcyBDYXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9oYW5kbGVyPWU7Y29uc3QgdD1lLmdldFVSTCgpO2lmKHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3dvcmtlclNvY2tldD1udWxsLHRoaXMuX2lkPVdlKCksdGhpcy5faGFuZGxlci5nZXRJc1dvcmtlckVuYWJsZWQoKSl7Y29uc3QgZT1VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFsnO2xldCBfc29ja2V0ID0gbnVsbDtvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAgaWYgKGV2ZW50LmRhdGEuY21kID09PSBcInN0YXJ0XCIpIHsgICAgY29uc3QgdXJsID0gZXZlbnQuZGF0YS51cmw7ICAgIF9zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCk7ICAgIF9zb2NrZXQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjsgICAgX3NvY2tldC5vbm9wZW4gPSBmdW5jdGlvbigpIHsgICAgICBwb3N0TWVzc2FnZSh7IGNhbGxiYWNrOiBcIm9uT3BlblwiLCBleHRlbnNpb25zOiBfc29ja2V0LmV4dGVuc2lvbnMgfSk7ICAgIH07ICAgIF9zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uKGUpIHsgICAgICBwb3N0TWVzc2FnZSh7IGNhbGxiYWNrOiBcIm9uT3BlblwiLCBlOiB7IGNvZGU6IGUuY29kZSwgcmVhc29uOiBlLnJlYXNvbiB9IH0pOyAgICB9OyAgICBfc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHsgICAgICBwb3N0TWVzc2FnZSh7IGNhbGxiYWNrOiBcIm9uTWVzc2FnZVwiLCBkYXRhOiBlLmRhdGEgfSk7ICAgIH07ICAgIF9zb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKGUpIHsgICAgICBwb3N0TWVzc2FnZSh7IGNhbGxiYWNrOiBcIm9uRXJyb3JcIiwgZTogeyBpc1RydXN0ZWQ6IFwidHJ1ZVwiIH0gfSk7ICAgIH07ICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEuY21kID09PSBcInNlbmRNZXNzYWdlXCIpIHsgICAgaWYgKF9zb2NrZXQgIT09IG51bGwpIHsgICAgICBfc29ja2V0LnNlbmQoZXZlbnQuZGF0YS5kYXRhKTsgICAgfSAgfSBlbHNlIGlmIChldmVudC5kYXRhLmNtZCA9PT0gXCJzdG9wXCIpIHsgICAgaWYgKF9zb2NrZXQgIT09IG51bGwpIHsgICAgICBfc29ja2V0LmNsb3NlKGV2ZW50LmRhdGEuY29kZSk7ICAgICAgX3NvY2tldCA9IG51bGw7ICAgIH0gIH19OyddLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOFwifSkpO3RoaXMuX3dvcmtlclNvY2tldD1uZXcgV29ya2VyKGUpO2NvbnN0IHM9dGhpczt0aGlzLl93b3JrZXJTb2NrZXQub25tZXNzYWdlPWZ1bmN0aW9uKGUpe2NvbnN0e2NhbGxiYWNrOnQsZTpvLGV4dGVuc2lvbnM6aX09ZS5kYXRhO1wib25PcGVuXCI9PT10P3MuX29uT3BlbihpKTpcIm9uQ2xvc2VcIj09PXQ/cy5fb25DbG9zZShvKTpcIm9uRXJyb3JcIj09PXQ/cy5fb25FcnJvcihvKTpcIm9uTWVzc2FnZVwiPT09dCYmcy5fb25NZXNzYWdlKGUuZGF0YSl9LHRoaXMuX3dvcmtlclNvY2tldC5wb3N0TWVzc2FnZSh7Y21kOlwic3RhcnRcIixpZDp0aGlzLl9pZCx1cmw6dH0pfWVsc2UgUD9PPyh3LmNvbm5lY3RTb2NrZXQoe3VybDp0LGhlYWRlcjp7XCJjb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KSx3Lm9uU29ja2V0Q2xvc2UodGhpcy5fb25DbG9zZS5iaW5kKHRoaXMpKSx3Lm9uU29ja2V0T3Blbih0aGlzLl9vbk9wZW4uYmluZCh0aGlzKSksdy5vblNvY2tldE1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLHcub25Tb2NrZXRFcnJvcih0aGlzLl9vbkVycm9yLmJpbmQodGhpcykpKToodGhpcy5fc29ja2V0PXcuY29ubmVjdFNvY2tldCh7dXJsOnQsaGVhZGVyOntcImNvbnRlbnQtdHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwifSxjb21wbGV0ZTooKT0+e319KSx0aGlzLl9zb2NrZXQub25DbG9zZSh0aGlzLl9vbkNsb3NlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk9wZW4odGhpcy5fb25PcGVuLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbk1lc3NhZ2UodGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcykpLHRoaXMuX3NvY2tldC5vbkVycm9yKHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKSkpOmImJih0aGlzLl9zb2NrZXQ9bmV3IFdlYlNvY2tldCh0KSx0aGlzLl9zb2NrZXQuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdGhpcy5fc29ja2V0Lm9ub3Blbj10aGlzLl9vbk9wZW4uYmluZCh0aGlzLHRoaXMuX3NvY2tldC5leHRlbnNpb25zKSx0aGlzLl9zb2NrZXQub25tZXNzYWdlPXRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpLHRoaXMuX3NvY2tldC5vbmNsb3NlPXRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSx0aGlzLl9zb2NrZXQub25lcnJvcj10aGlzLl9vbkVycm9yLmJpbmQodGhpcykpO3RoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT1lLmNhbklVc2VCaW5hcnlGcmFtZSgpfWdldElEKCl7cmV0dXJuIHRoaXMuX2lkfV9vbk9wZW4oZSl7dGhpcy5faGFuZGxlci5vbk9wZW4oe2lkOnRoaXMuX2lkLHJlczpKU09OLnN0cmluZ2lmeShlKX0pfV9vbkNsb3NlKGUpe3RoaXMuX2hhbmRsZXIub25DbG9zZSh7aWQ6dGhpcy5faWQsZTplfSl9X29uTWVzc2FnZShlKXtsZXQgdDt0PXRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT90aGlzLl9pc0FwcENvbXByZXNzZWREYXRhKGUuZGF0YSk/dGhpcy5faGFuZGxlci5pbmZsYXRlKGUuZGF0YSk6ZnVuY3Rpb24oZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtsZXQgcz1cIlwiLG89MDtjb25zdCBpPXQubGVuZ3RoO2Zvcig7bzxpOyl7bGV0IGU9dFtvXSxuPTAscj0wO2lmKGU8PTEyNz8obj0wLHI9MjU1JmUpOmU8PTIyMz8obj0xLHI9MzEmZSk6ZTw9MjM5PyhuPTIscj0xNSZlKTplPD0yNDQmJihuPTMscj03JmUpLGktby1uPjApe2xldCBzPTA7Zm9yKDtzPG47KWU9dFtvK3MrMV0scj1yPDw2fDYzJmUscys9MX1lbHNlIHI9NjU1MzMsbj1pLW87cys9U3RyaW5nLmZyb21Db2RlUG9pbnQociksbys9bisxfXJldHVybiBzfShlLmRhdGEpOmUuZGF0YSx0aGlzLl9oYW5kbGVyLm9uTWVzc2FnZSh7ZGF0YTp0fSl9X2lzQXBwQ29tcHJlc3NlZERhdGEoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtyZXR1cm4gNjc9PT10WzBdJiY3OT09PXRbMV0mJjc3PT09dFsyXSYmODA9PT10WzNdfV9vbkVycm9yKGUpe3RoaXMuX2hhbmRsZXIub25FcnJvcih7aWQ6dGhpcy5faWQsZTplfSl9c2V0SXNXb3JrZXJFbmFibGVkKGUpe3RoaXMuX2lzV29ya2VyRW5hYmxlZD0hMH1jbG9zZShlKXtpZih0aGlzLl93b3JrZXJTb2NrZXQmJih0aGlzLl93b3JrZXJTb2NrZXQucG9zdE1lc3NhZ2Uoe2NtZDpcInN0b3BcIixjb2RlOmV9KSx0aGlzLl93b3JrZXJTb2NrZXQudGVybWluYXRlKCksdGhpcy5fd29ya2VyU29ja2V0PW51bGwpLE8pcmV0dXJuIHcub2ZmU29ja2V0Q2xvc2UoKSx3Lm9mZlNvY2tldE1lc3NhZ2UoKSx3Lm9mZlNvY2tldE9wZW4oKSx3Lm9mZlNvY2tldEVycm9yKCksdm9pZCB3LmNsb3NlU29ja2V0KCk7dGhpcy5fc29ja2V0JiYoUD8odGhpcy5fc29ja2V0Lm9uQ2xvc2UoKCk9Pnt9KSx0aGlzLl9zb2NrZXQub25PcGVuKCgpPT57fSksdGhpcy5fc29ja2V0Lm9uTWVzc2FnZSgoKT0+e30pLHRoaXMuX3NvY2tldC5vbkVycm9yKCgpPT57fSkpOmImJih0aGlzLl9zb2NrZXQub25vcGVuPW51bGwsdGhpcy5fc29ja2V0Lm9ubWVzc2FnZT1udWxsLHRoaXMuX3NvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fc29ja2V0Lm9uZXJyb3I9bnVsbCksUj90aGlzLl9zb2NrZXQuY2xvc2Uoe2NvZGU6ZX0pOnRoaXMuX3NvY2tldC5jbG9zZShlKSx0aGlzLl9zb2NrZXQ9bnVsbCl9c2VuZChlKXtpZih0aGlzLl93b3JrZXJTb2NrZXQpdGhpcy5fd29ya2VyU29ja2V0LnBvc3RNZXNzYWdlKHtjbWQ6XCJzZW5kTWVzc2FnZVwiLGRhdGE6dGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP0lhKGUuZGF0YSkuYnVmZmVyOmUuZGF0YX0pO2Vsc2V7aWYoTylyZXR1cm4gdm9pZCB3LnNlbmRTb2NrZXRNZXNzYWdlKHtkYXRhOmUuZGF0YSxmYWlsOigpPT57ZS5mYWlsJiZlLnJlcXVlc3RJRCYmZS5mYWlsKGUucmVxdWVzdElEKX19KTt0aGlzLl9zb2NrZXQmJihQP3RoaXMuX3NvY2tldC5zZW5kKHtkYXRhOnRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT9JYShlLmRhdGEpLmJ1ZmZlcjplLmRhdGEsZmFpbDooKT0+e2UuZmFpbCYmZS5yZXF1ZXN0SUQmJmUuZmFpbChlLnJlcXVlc3RJRCl9fSk6YiYmdGhpcy5fc29ja2V0LnNlbmQodGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP0lhKGUuZGF0YSk6ZS5kYXRhKSl9fX1jb25zdCBUYT00ZTMseWE9NDAwMSxEYT1cImNvbm5lY3RlZFwiLEVhPVwiY29ubmVjdGluZ1wiLFNhPVwiZGlzY29ubmVjdGVkXCI7Y2xhc3MgTGF7Y29uc3RydWN0b3IoZSl7dGhpcy5fY2hhbm5lbE1vZHVsZT1lLHRoaXMuX249XCJTb2NrZXRIYW5kbGVyXCIsdGhpcy5fcHJvbWlzZU1hcD1uZXcgTWFwLHRoaXMuX3JlYWR5U3RhdGU9U2EsdGhpcy5fc2ltcGxlUmVxdWVzdE1hcD1uZXcgTWFwLHRoaXMuTUFYX1NJWkU9MTAwLHRoaXMuX3N0YXJ0U2VxdWVuY2U9V2UoKSx0aGlzLl9zdGFydFRzPTAsdGhpcy5fcmVDb25uZWN0RmxhZz0hMSx0aGlzLl9uZXh0UGluZ1RzPTAsdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLk1BWF9SRUNPTk5FQ1RfQ09VTlQ9Myx0aGlzLl9zb2NrZXRJRD0tMSx0aGlzLl9yYW5kb209MCx0aGlzLl9zb2NrZXQ9bnVsbCx0aGlzLl91cmw9XCJcIix0aGlzLl9vbk9wZW5Ucz0wLHRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT0hMCx0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITAsdGhpcy5fc2V0V2Vic29ja2V0SG9zdCgpLHRoaXMuX2luaXRDb25uZWN0aW9uKCl9X3NldFdlYnNvY2tldEhvc3QoKXtjb25zdCBlPXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKG1zKTtsZXQgdD11O3RoaXMuX2NoYW5uZWxNb2R1bGUuaXNPdmVyc2VhKCkmJih0PWMpLGUuaXNTaW5nYXBvcmVTaXRlKCk/dD1sOmUuaXNLb3JlYVNpdGUoKT90PWQ6ZS5pc0dlcm1hbnlTaXRlKCk/dD1wOmUuaXNJbmRpYVNpdGUoKT90PWg6ZS5pc0phcGFuU2l0ZSgpP3Q9ZzplLmlzVVNBU2l0ZSgpJiYodD1fKSxtLkhPU1Quc2V0Q3VycmVudCh0KX1faW5pdENvbm5lY3Rpb24oKXt3ZShtLkhPU1QuQ1VSUkVOVC5CQUNLVVApfHxcIlwiPT09dGhpcy5fdXJsP3RoaXMuX3VybD1tLkhPU1QuQ1VSUkVOVC5ERUZBVUxUOnRoaXMuX3VybD09PW0uSE9TVC5DVVJSRU5ULkRFRkFVTFQ/dGhpcy5fdXJsPW0uSE9TVC5DVVJSRU5ULkJBQ0tVUDp0aGlzLl91cmw9PT1tLkhPU1QuQ1VSUkVOVC5CQUNLVVA/dGhpcy5fdXJsPXRoaXMuX2NhbklVc2VBbnlDYXN0KCk/bS5IT1NULkNVUlJFTlQuQU5ZQ0FTVDptLkhPU1QuQ1VSUkVOVC5ERUZBVUxUOnRoaXMuX3VybD09PW0uSE9TVC5DVVJSRU5ULkFOWUNBU1QmJihtLkhPU1QuQ1VSUkVOVC5BTllDQVNUPVwiXCIsdGhpcy5fdXJsPW0uSE9TVC5DVVJSRU5ULkRFRkFVTFQpO2NvbnN0IGU9dGhpcy5fY2hhbm5lbE1vZHVsZS5nZXRNb2R1bGUobXMpLmdldFByb3h5U2VydmVyKCk7THQoZSl8fCh0aGlzLl91cmw9ZSksdGhpcy5fY29ubmVjdCgpLHRoaXMuX25leHRQaW5nVHM9MH1fY2FuSVVzZUFueUNhc3QoKXtyZXR1cm4gYiYmbS5IT1NULkNVUlJFTlQuQU5ZQ0FTVH1vbkNoZWNrVGltZXIoZSl7ZSUxPT0wJiZ0aGlzLl9jaGVja1Byb21pc2VNYXAoKX1fY2hlY2tQcm9taXNlTWFwKCl7MCE9PXRoaXMuX3Byb21pc2VNYXAuc2l6ZSYmdGhpcy5fcHJvbWlzZU1hcC5mb3JFYWNoKChlLHQpPT57Y29uc3R7cmVqZWN0OnMsdGltZXN0YW1wOm99PWU7bGV0IGk9MTVlMzstMSE9PXQuaW5kZXhPZigkcyk/aT05ZTQ6LTEhPT10LmluZGV4T2YoVWkpJiYoaT0zZTMpLERhdGUubm93KCktbz49aSYmKF9lLmwoYCR7dGhpcy5fbn0uX2NoZWNrUHJvbWlzZU1hcCByZXF1ZXN0IHRpbWVvdXQsIGRlbGV0ZSByZXF1ZXN0SUQ6JHt0fWApLHRoaXMuX3Byb21pc2VNYXAuZGVsZXRlKHQpLHMobmV3IEZuKHtjb2RlOm5uLk5FVFdPUktfVElNRU9VVH0pKSx0aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVxdWVzdFRpbWVvdXQodCkpfSl9b25PcGVuKGUpe2lmKFwiXCI9PT10aGlzLl9yZWFkeVN0YXRlKXJldHVybjt0aGlzLl9vbk9wZW5Ucz1EYXRlLm5vdygpO2NvbnN0e2lkOnQscmVzOnN9PWU7dGhpcy5fc29ja2V0SUQ9dDtjb25zdCBvPURhdGUubm93KCktdGhpcy5fc3RhcnRUcyxpPWBzb2NrZXRJRDoke3R9IHJlczoke3N9YDtfZS5sKGAke3RoaXMuX259Ll9vbk9wZW4gY29zdDoke299IG1zLiAke2l9YCk7bmV3IENuKFwid3NPbk9wZW5cIikuc2V0TWVzc2FnZShvKS5zZXRDb3N0VGltZShvKS5zZXRNb3JlTWVzc2FnZShpKS5lbmQoKSxlLmlkPT09dGhpcy5fc29ja2V0SUQmJih0aGlzLl9yZWFkeVN0YXRlPURhLHRoaXMuX3JlQ29ubmVjdENvdW50PTAsdGhpcy5fcmVzZW5kKCksITA9PT10aGlzLl9yZUNvbm5lY3RGbGFnJiYodGhpcy5fY2hhbm5lbE1vZHVsZS5vblJlY29ubmVjdGVkKCksdGhpcy5fcmVDb25uZWN0RmxhZz0hMSksdGhpcy5fY2hhbm5lbE1vZHVsZS5vbk9wZW4oKSl9b25DbG9zZShlKXtjb25zdCB0PW5ldyBDbihcIndzT25DbG9zZVwiKSx7aWQ6cyxlOm99PWUsaT1gc291cmNlU29ja2V0SUQ6JHtzfSBjdXJyZW50U29ja2V0SUQ6JHt0aGlzLl9zb2NrZXRJRH0gY29kZToke28uY29kZX0gcmVhc29uOiR7by5yZWFzb259YDtsZXQgbj0wOzAhPT10aGlzLl9vbk9wZW5UcyYmKG49RGF0ZS5ub3coKS10aGlzLl9vbk9wZW5UcyksdC5zZXRNZXNzYWdlKG4pLnNldENvc3RUaW1lKG4pLnNldE1vcmVNZXNzYWdlKGkpLnNldENvZGUoby5jb2RlKS5lbmQoKSxfZS5sKGAke3RoaXMuX259Ll9vbkNsb3NlICR7aX0gb25saW5lVGltZToke259YCkscz09PXRoaXMuX3NvY2tldElEJiYodGhpcy5fcmVhZHlTdGF0ZT1TYSxuPDFlMz90aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCk6dGhpcy5fY2hhbm5lbE1vZHVsZS5vbkNsb3NlKCkpfW9uRXJyb3IoZSl7Y29uc3R7aWQ6dCxlOnN9PWUsbz1gc291cmNlU29ja2V0SUQ6JHt0fSBjdXJyZW50U29ja2V0SUQ6JHt0aGlzLl9zb2NrZXRJRH1gO25ldyBDbihcIndzT25FcnJvclwiKS5zZXRNZXNzYWdlKHMuZXJyTXNnfHxIZShzKSkuc2V0TW9yZU1lc3NhZ2Uobykuc2V0TGV2ZWwoXCJlcnJvclwiKS5lbmQoKSxfZS53KHRoaXMuX24rXCIuX29uRXJyb3JcIixzLG8pLHQ9PT10aGlzLl9zb2NrZXRJRCYmKHRoaXMuX3JlYWR5U3RhdGU9XCJcIix0aGlzLl9jaGFubmVsTW9kdWxlLm9uRXJyb3IoKSl9b25NZXNzYWdlKGUpe2xldCB0O3RyeXt0PUpTT04ucGFyc2UoZS5kYXRhKX1jYXRjaChpKXtuZXcgQ24oXCJqc29uUGFyc2VFcnJvclwiKS5zZXRNZXNzYWdlKGUuZGF0YSkuZW5kKCl9aWYoIXR8fCF0LmhlYWQpcmV0dXJuO2NvbnN0IHM9dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQodC5oZWFkKTtsZXQgbz10LmJvZHk7aWYoIXRoaXMuX2lzVFJUQ0NvbW1hbmQocykpe2NvbnN0IGU9Z3QodC5oZWFkKTtvPW1hKHQuYm9keSx0aGlzLl9nZXRSZXNwb25zZUtleU1hcChlKSl9aWYoX2UuZChgJHt0aGlzLl9ufS5vbk1lc3NhZ2UgcmV0OiR7SlNPTi5zdHJpbmdpZnkobyl9IHJlcXVlc3RJRDoke3N9IGhhczoke3RoaXMuX3Byb21pc2VNYXAuaGFzKHMpfWApLHRoaXMuX3NldE5leHRQaW5nVHMoKSx0aGlzLl9wcm9taXNlTWFwLmhhcyhzKSl7Y29uc3R7cmVzb2x2ZTplLHJlamVjdDp0LHRpbWVzdGFtcDppfT10aGlzLl9wcm9taXNlTWFwLmdldChzKTtyZXR1cm4gdGhpcy5fcHJvbWlzZU1hcC5kZWxldGUocyksdGhpcy5fY2FsY1JUVChpKSx2b2lkKG8uZXJyb3JDb2RlJiYwIT09by5lcnJvckNvZGU/KHRoaXMuX2NoYW5uZWxNb2R1bGUub25FcnJvckNvZGVOb3RaZXJvKG8pLHQobmV3IEZuKHtjb2RlOm8uZXJyb3JDb2RlLG1lc3NhZ2U6by5lcnJvckluZm98fFwiXCIsZGF0YTpzLmluY2x1ZGVzKENvKXx8cy5pbmNsdWRlcyhsaSk/e2VsZW1lbnRzOm8uZWxlbWVudHMsbWVzc2FnZVZlcnNpb246by5tZXNzYWdlVmVyc2lvbixjbG91ZEN1c3RvbURhdGE6by5jbG91ZEN1c3RvbURhdGF9OnZvaWQgMH0pKSk6ZSh3bihvKSkpfXRoaXMuX2NoYW5uZWxNb2R1bGUub25NZXNzYWdlKHtoZWFkOnQuaGVhZCxib2R5Om99KX1faXNUUlRDQ29tbWFuZChlKXtjb25zdCB0PXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKGtzKS5nZXRDb21tYW5kTGlzdCgpO2xldCBzPSExO2ZvcihsZXQgbz0wO288dC5sZW5ndGg7bysrKWlmKGUuc3RhcnRzV2l0aCh0W29dKSl7cz0hMDticmVha31yZXR1cm4gc31fY2FsY1JUVChlKXtjb25zdCB0PURhdGUubm93KCktZTt0aGlzLl9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShScykuYWRkUlRUKHQpfV9jb25uZWN0KCl7dGhpcy5fc3RhcnRUcz1EYXRlLm5vdygpLHRoaXMuX29uT3BlblRzPTAsdGhpcy5fc29ja2V0PW5ldyBDYSh0aGlzKSx0aGlzLl9zb2NrZXRJRD10aGlzLl9zb2NrZXQuZ2V0SUQoKSx0aGlzLl9yZWFkeVN0YXRlPUVhLF9lLmwoYCR7dGhpcy5fbn0uX2Nvbm5lY3QgaXNXb3JrZXJFbmFibGVkOiR7dGhpcy5nZXRJc1dvcmtlckVuYWJsZWQoKX0gc29ja2V0SUQ6JHt0aGlzLl9zb2NrZXRJRH0gdXJsOiR7dGhpcy5nZXRVUkwoKX1gKTtuZXcgQ24oXCJ3c0Nvbm5lY3RcIikuc2V0TWVzc2FnZShgc29ja2V0SUQ6JHt0aGlzLl9zb2NrZXRJRH0gdXJsOiR7dGhpcy5nZXRVUkwoKX1gKS5lbmQoKX1nZXRVUkwoKXt0aGlzLl9jaGFubmVsTW9kdWxlLmlzRGV2TW9kZSgpJiYodGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lPSExKTtjb25zdCBlPWx0KCk7KE98fEwmJlwid2luZG93c1wiPT09ZXx8VSkmJih0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWU9ITEpO2xldCB0PS0xO1wiaW9zXCI9PT1lP3Q9V3x8LTE6XCJhbmRyb2lkXCI9PT1lJiYodD1qfHwtMSk7Y29uc3Qgcz10aGlzLl9jaGFubmVsTW9kdWxlLmdldE1vZHVsZShtcyksbz10aGlzLl9jaGFubmVsTW9kdWxlLmdldFBsYXRmb3JtKCk7bGV0IGk9YHNka2FwcGlkPSR7cy5nZXRTREtBcHBJRCgpfSZpbnN0YW5jZWlkPSR7cy5nZXRJbnN0YW5jZUlEKCl9JnJhbmRvbT0ke3RoaXMuX2dldFJhbmRvbSgpfSZwbGF0Zm9ybT0ke299Jmhvc3Q9JHtlfSZ2ZXJzaW9uPSR7dH0mc2RrdmVyc2lvbj0yLjI3LjZgO3JldHVybiBBJiYoaSs9XCImaXNtaW5pZ2FtZT0xXCIpLHRoaXMuX2NoYW5uZWxNb2R1bGUuY2FuSVVzZUluZmxhdGUoKSYmKGkrPVwiJmNvbXByZXNzPWd6aXBcIiksdGhpcy5fY2FuSVVzZUJpbmFyeUZyYW1lP2Ake3RoaXMuX3VybH0vYmluZm8/JHtpfWA6YCR7dGhpcy5fdXJsfS9pbmZvPyR7aX1gfV9jbG9zZUNvbm5lY3Rpb24oZSl7X2UubChgJHt0aGlzLl9ufS5fY2xvc2VDb25uZWN0aW9uIHNvY2tldElEOiR7dGhpcy5fc29ja2V0SUR9YCksdGhpcy5fc29ja2V0JiYodGhpcy5fc29ja2V0LmNsb3NlKGUpLHRoaXMuX3NvY2tldElEPS0xLHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3JlYWR5U3RhdGU9U2EpfV9yZXNlbmQoKXtpZihfZS5sKGAke3RoaXMuX259Ll9yZXNlbmQgcmVDb25uZWN0RmxhZzoke3RoaXMuX3JlQ29ubmVjdEZsYWd9YCxgcHJvbWlzZU1hcC5zaXplOiR7dGhpcy5fcHJvbWlzZU1hcC5zaXplfSBzaW1wbGVSZXF1ZXN0TWFwLnNpemU6JHt0aGlzLl9zaW1wbGVSZXF1ZXN0TWFwLnNpemV9YCksdGhpcy5fcHJvbWlzZU1hcC5zaXplPjAmJnRoaXMuX3Byb21pc2VNYXAuZm9yRWFjaCgoZSx0KT0+e2NvbnN0e3VwbGlua0RhdGE6cyxyZXNvbHZlOm8scmVqZWN0Oml9PWU7dGhpcy5fcHJvbWlzZU1hcC5zZXQodCx7cmVzb2x2ZTpvLHJlamVjdDppLHRpbWVzdGFtcDpEYXRlLm5vdygpLHVwbGlua0RhdGE6c30pLHRoaXMuX2V4ZWN1dGUodCxzKX0pLHRoaXMuX3NpbXBsZVJlcXVlc3RNYXAuc2l6ZT4wKXtmb3IoY29uc3RbZSx0XW9mIHRoaXMuX3NpbXBsZVJlcXVlc3RNYXApdGhpcy5fZXhlY3V0ZShlLHQpO3RoaXMuX3NpbXBsZVJlcXVlc3RNYXAuY2xlYXIoKX19c2VuZChlKXtlLmhlYWQuc2VxPXRoaXMuX2dldFNlcXVlbmNlKCksZS5oZWFkLnJlcXRpbWU9TWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyk7Y29uc3R7a2V5TWFwOnQsLi4uc309ZSxvPXRoaXMuX2dldFJlcXVlc3RJREZyb21IZWFkKGUuaGVhZCksaT1KU09OLnN0cmluZ2lmeShzKTtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9PntpZih0aGlzLl9wcm9taXNlTWFwLnNldChvLHtyZXNvbHZlOmUscmVqZWN0OnQsdGltZXN0YW1wOkRhdGUubm93KCksdXBsaW5rRGF0YTppfSksX2UuZChgJHt0aGlzLl9ufS5zZW5kIHVwbGlua0RhdGE6JHtKU09OLnN0cmluZ2lmeShzKX0gcmVxdWVzdElEOiR7b30gcmVhZHlTdGF0ZToke3RoaXMuX3JlYWR5U3RhdGV9YCksdGhpcy5fcmVhZHlTdGF0ZSE9PURhKXRoaXMuX3JlQ29ubmVjdCgpO2Vsc2V7dGhpcy5fZXhlY3V0ZShvLGkpO3RoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKFJzKS5hZGRSZXF1ZXN0Q291bnQoKX19KX1zaW1wbHlTZW5kKGUpe2UuaGVhZC5zZXE9dGhpcy5fZ2V0U2VxdWVuY2UoKSxlLmhlYWQucmVxdGltZT1NYXRoLmZsb29yKERhdGUubm93KCkvMWUzKTtjb25zdHtrZXlNYXA6dCwuLi5zfT1lLG89dGhpcy5fZ2V0UmVxdWVzdElERnJvbUhlYWQoZS5oZWFkKSxpPUpTT04uc3RyaW5naWZ5KHMpO3RoaXMuX3JlYWR5U3RhdGUhPT1EYT8odGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zaXplPHRoaXMuTUFYX1NJWkU/dGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5zZXQobyxpKTpfZS5sKHRoaXMuX24rXCIuc2ltcGx5U2VuZC4gc2ltcGxlUmVxdWVzdE1hcCBpcyBmdWxsLCBkcm9wIHJlcXVlc3QhXCIpLHRoaXMuX3JlQ29ubmVjdCgpKTp0aGlzLl9leGVjdXRlKG8saSl9X2V4ZWN1dGUoZSx0KXt0aGlzLl9zb2NrZXQuc2VuZCh7ZGF0YTp0LGZhaWw6UD90aGlzLl9vblNlbmRGYWlsLmJpbmQodGhpcyk6dm9pZCAwLHJlcXVlc3RJRDplfSl9X29uU2VuZEZhaWwoZSl7X2UubChgJHt0aGlzLl9ufS5fb25TZW5kRmFpbCByZXF1ZXN0SUQ6JHtlfWApfV9nZXRTZXF1ZW5jZSgpe2xldCBlO2lmKHRoaXMuX3N0YXJ0U2VxdWVuY2U8MjQxNTkxOTEwMylyZXR1cm4gZT10aGlzLl9zdGFydFNlcXVlbmNlLHRoaXMuX3N0YXJ0U2VxdWVuY2UrPTEsMjQxNTkxOTEwMz09PXRoaXMuX3N0YXJ0U2VxdWVuY2UmJih0aGlzLl9zdGFydFNlcXVlbmNlPVdlKCkpLGV9X2dldFJlcXVlc3RJREZyb21IZWFkKGUpe2NvbnN0e3NlcnZjbWQ6dCxzZXE6c309ZTtyZXR1cm4gdCtzfV9nZXRSZXNwb25zZUtleU1hcChlKXtjb25zdCB0PXRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0S2V5TWFwKGUpO3JldHVybnsuLi5wYS5yZXNwb25zZSwuLi50LnJlc3BvbnNlfX1fcmVDb25uZWN0KCl7dGhpcy5fcmVhZHlTdGF0ZSE9PURhJiZ0aGlzLl9yZWFkeVN0YXRlIT09RWEmJnRoaXMuZm9yY2VkUmVjb25uZWN0KCl9Zm9yY2VkUmVjb25uZWN0KCl7Y29uc3QgZT10aGlzLl9uK1wiLmZvcmNlZFJlY29ubmVjdFwiO19lLmwoYCR7ZX0gY291bnQ6JHt0aGlzLl9yZUNvbm5lY3RDb3VudH0gcmVhZHlTdGF0ZToke3RoaXMuX3JlYWR5U3RhdGV9YCksdGhpcy5fcmVDb25uZWN0RmxhZz0hMCx0aGlzLl9yZXNldFJhbmRvbSgpLHRoaXMuX3JlQ29ubmVjdENvdW50PHRoaXMuTUFYX1JFQ09OTkVDVF9DT1VOVD8odGhpcy5fcmVDb25uZWN0Q291bnQrPTEsdGhpcy5fY2xvc2VDb25uZWN0aW9uKHlhKSx0aGlzLl9pbml0Q29ubmVjdGlvbigpKToodGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9jaGFubmVsTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Q/KF9lLncoZStcIiBkaXNjb25uZWN0ZWQgZnJvbSB3c3NlcnZlciBidXQgbmV0d29yayBpcyBvaywgY29udGludWUuLi5cIiksdGhpcy5fY2xvc2VDb25uZWN0aW9uKHlhKSx0aGlzLl9pbml0Q29ubmVjdGlvbigpKTp0aGlzLl9jaGFubmVsTW9kdWxlLm9uUmVjb25uZWN0RmFpbGVkKCl9KSl9Z2V0UmVjb25uZWN0RmxhZygpe3JldHVybiB0aGlzLl9yZUNvbm5lY3RGbGFnfV9zZXROZXh0UGluZ1RzKCl7dGhpcy5fbmV4dFBpbmdUcz1EYXRlLm5vdygpKzFlNH1nZXROZXh0UGluZ1RzKCl7cmV0dXJuIHRoaXMuX25leHRQaW5nVHN9aXNDb25uZWN0ZWQoKXtyZXR1cm4gdGhpcy5fcmVhZHlTdGF0ZT09PURhfWNhbklVc2VCaW5hcnlGcmFtZSgpe3JldHVybiB0aGlzLl9jYW5JVXNlQmluYXJ5RnJhbWV9aW5mbGF0ZShlKXtpZih0aGlzLl9jaGFubmVsTW9kdWxlLmNhbklVc2VJbmZsYXRlKCkpcmV0dXJuIHRoaXMuX2NoYW5uZWxNb2R1bGUuZ2V0TW9kdWxlKHdzKS5pbmZsYXRlKGUpfXNldElzV29ya2VyRW5hYmxlZChlKXtfZS5sKGAke3RoaXMuX259LnNldElzV29ya2VyRW5hYmxlZCBmbGFnOiR7ZX1gKSx0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ZX1nZXRJc1dvcmtlckVuYWJsZWQoKXtyZXR1cm4gdGhpcy5faXNXb3JrZXJFbmFibGVkJiZRfV9nZXRSYW5kb20oKXtyZXR1cm4gMD09PXRoaXMuX3JhbmRvbSYmKHRoaXMuX3JhbmRvbT1NYXRoLnJhbmRvbSgpKSx0aGlzLl9yYW5kb219X3Jlc2V0UmFuZG9tKCl7dGhpcy5fcmFuZG9tPTB9Y2xvc2UoKXtfZS5sKHRoaXMuX24rXCIuY2xvc2VcIiksdGhpcy5fY2xvc2VDb25uZWN0aW9uKFRhKSx0aGlzLl9wcm9taXNlTWFwLmNsZWFyKCksdGhpcy5fc3RhcnRTZXF1ZW5jZT1XZSgpLHRoaXMuX3JlYWR5U3RhdGU9U2EsdGhpcy5fc2ltcGxlUmVxdWVzdE1hcC5jbGVhcigpLHRoaXMuX3JlQ29ubmVjdEZsYWc9ITEsdGhpcy5fcmVDb25uZWN0Q291bnQ9MCx0aGlzLl9vbk9wZW5Ucz0wLHRoaXMuX3VybD1cIlwiLHRoaXMuX3JhbmRvbT0wLHRoaXMuX2NhbklVc2VCaW5hcnlGcmFtZT0hMCx0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITB9fWNsYXNzIEFhIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy5fbj1cIkNoYW5uZWxNb2R1bGVcIix0aGlzLl9zb2NrZXRIYW5kbGVyPW5ldyBMYSh0aGlzKSx0aGlzLl9wcm9iaW5nPSExLHRoaXMuX2lzQXBwU2hvd2luZz0hMCx0aGlzLl9wcmV2aW91c1N0YXRlPXQuTkVUX1NUQVRFX0NPTk5FQ1RFRCxQJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3Lm9uQXBwU2hvdyYmXCJmdW5jdGlvblwiPT10eXBlb2Ygdy5vbkFwcEhpZGUpe2NvbnN0IGU9dGhpcy5fb25BcHBIaWRlLmJpbmQodGhpcyksdD10aGlzLl9vbkFwcFNob3cuYmluZCh0aGlzKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiB3Lm9mZkFwcEhpZGUmJncub2ZmQXBwSGlkZShlKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB3Lm9mZkFwcFNob3cmJncub2ZmQXBwU2hvdyh0KSx3Lm9uQXBwSGlkZShlKSx3Lm9uQXBwU2hvdyh0KX10aGlzLl90aW1lckZvck5vdExvZ2dlZEluPS0xLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW49c2V0SW50ZXJ2YWwodGhpcy5vbkNoZWNrVGltZXIuYmluZCh0aGlzKSwxZTMpLHRoaXMuX2ZhdGFsRXJyb3JGbGFnPSExfW9uQ2hlY2tUaW1lcihlKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiYodGhpcy5pc0xvZ2dlZEluKCk/KHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4+MCYmKGNsZWFySW50ZXJ2YWwodGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbiksdGhpcy5fdGltZXJGb3JOb3RMb2dnZWRJbj0tMSksdGhpcy5fc29ja2V0SGFuZGxlci5vbkNoZWNrVGltZXIoZSkpOnRoaXMuX3NvY2tldEhhbmRsZXIub25DaGVja1RpbWVyKDEpLHRoaXMuX2NoZWNrTmV4dFBpbmcoKSl9b25FcnJvckNvZGVOb3RaZXJvKGUpe3RoaXMuZ2V0TW9kdWxlKEVzKS5vbkVycm9yQ29kZU5vdFplcm8oZSl9b25NZXNzYWdlKGUpe3RoaXMuZ2V0TW9kdWxlKEVzKS5vbk1lc3NhZ2UoZSl9c2VuZChlKXtyZXR1cm4gdGhpcy5fc29ja2V0SGFuZGxlcj90aGlzLl9wcmV2aW91c1N0YXRlIT09dC5ORVRfU1RBVEVfQ09OTkVDVEVEJiZlLmhlYWQuc2VydmNtZC5pbmNsdWRlcyhHaSk/KHRoaXMucmVDb25uZWN0KCksdGhpcy5fc2VuZExvZ1ZpYUhUVFAoZSkpOnRoaXMuX3NvY2tldEhhbmRsZXIuc2VuZChlKTpQcm9taXNlLnJlamVjdCgpfV9zZW5kTG9nVmlhSFRUUChlKXtjb25zdCB0PW0uSE9TVC5DVVJSRU5ULlNUQVQ7cmV0dXJuIG5ldyBQcm9taXNlKChzLG8pPT57Y29uc3QgaT1gJHt0fS92NC9pbW9wZW5zdGF0L3RpbV93ZWJfcmVwb3J0X3YyP3Nka2FwcGlkPSR7ZS5oZWFkLnNka2FwcGlkfSZyZXF0aW1lPSR7RGF0ZS5ub3coKX1gLG49SlNPTi5zdHJpbmdpZnkoZS5ib2R5KSxyPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLThcIjtpZihQKXcucmVxdWVzdCh7dXJsOmksZGF0YTpuLG1ldGhvZDpcIlBPU1RcIix0aW1lb3V0OjNlMyxoZWFkZXI6e1wiY29udGVudC10eXBlXCI6cn0sc3VjY2VzczooKT0+e3MoKX0sZmFpbDooKT0+e28obmV3IEZuKHtjb2RlOm5uLk5FVFdPUktfRVJST1J9KSl9fSk7ZWxzZXtjb25zdCBlPW5ldyBYTUxIdHRwUmVxdWVzdCx0PXNldFRpbWVvdXQoKCk9PntlLmFib3J0KCksbyhuZXcgRm4oe2NvZGU6bm4uTkVUV09SS19USU1FT1VUfSkpfSwzZTMpO2Uub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWUucmVhZHlTdGF0ZSYmKGNsZWFyVGltZW91dCh0KSwyMDA9PT1lLnN0YXR1c3x8MzA0PT09ZS5zdGF0dXM/cygpOm8obmV3IEZuKHtjb2RlOm5uLk5FVFdPUktfRVJST1J9KSkpfSxlLm9wZW4oXCJQT1NUXCIsaSwhMCksZS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsciksZS5zZW5kKG4pfX0pfXNpbXBseVNlbmQoZSl7cmV0dXJuIHRoaXMuX3NvY2tldEhhbmRsZXI/dGhpcy5fc29ja2V0SGFuZGxlci5zaW1wbHlTZW5kKGUpOlByb21pc2UucmVqZWN0KCl9b25PcGVuKCl7dGhpcy5fcGluZygpfW9uQ2xvc2UoKXtpZih0aGlzLl9zb2NrZXRIYW5kbGVyKXt0aGlzLl9zb2NrZXRIYW5kbGVyLmdldFJlY29ubmVjdEZsYWcoKSYmdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQodC5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX10aGlzLnJlQ29ubmVjdCgpfW9uRXJyb3IoKXtQJiYhVSYmdGhpcy5vdXRwdXRXYXJuaW5nKFwiRG9tYWluTmFtZUluTVBcIiksdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQodC5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX1nZXRLZXlNYXAoZSl7cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKEVzKS5nZXRLZXlNYXAoZSl9X29uQXBwSGlkZSgpe3RoaXMuX2lzQXBwU2hvd2luZz0hMX1fb25BcHBTaG93KCl7dGhpcy5faXNBcHBTaG93aW5nPSEwfW9uUmVxdWVzdFRpbWVvdXQoZSl7fW9uUmVjb25uZWN0ZWQoKXtfZS5sKHRoaXMuX24rXCIub25SZWNvbm5lY3RlZFwiKSx0aGlzLl9tLnJlc3RhcnRUaW1lcigpO3RoaXMuZ2V0TW9kdWxlKEVzKS5vblJlY29ubmVjdGVkKCksdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQodC5ORVRfU1RBVEVfQ09OTkVDVEVEKX1vblJlY29ubmVjdEZhaWxlZCgpe19lLmwodGhpcy5fbitcIi5vblJlY29ubmVjdEZhaWxlZFwiKSx0aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudCh0Lk5FVF9TVEFURV9ESVNDT05ORUNURUQpfXNldElzV29ya2VyRW5hYmxlZChlKXt0aGlzLl9zb2NrZXRIYW5kbGVyJiZ0aGlzLl9zb2NrZXRIYW5kbGVyLnNldElzV29ya2VyRW5hYmxlZCghMSl9b2ZmbGluZSgpe3RoaXMuX2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHQuTkVUX1NUQVRFX0RJU0NPTk5FQ1RFRCl9cmVDb25uZWN0KGU9ITEpe2xldCBzPSExO3RoaXMuX3NvY2tldEhhbmRsZXImJihzPXRoaXMuX3NvY2tldEhhbmRsZXIuZ2V0UmVjb25uZWN0RmxhZygpKTtjb25zdCBvPWBmb3JjZWRGbGFnOiR7ZX0gZmF0YWxFcnJvckZsYWc6JHt0aGlzLl9mYXRhbEVycm9yRmxhZ30gcHJldmlvdXNTdGF0ZToke3RoaXMuX3ByZXZpb3VzU3RhdGV9IHJlY29ubmVjdEZsYWc6JHtzfWA7aWYoX2UubChgJHt0aGlzLl9ufS5yZUNvbm5lY3QgJHtvfWApLCF0aGlzLl9mYXRhbEVycm9yRmxhZyYmdGhpcy5fc29ja2V0SGFuZGxlcil7aWYoITA9PT1lKXRoaXMuX3NvY2tldEhhbmRsZXIuZm9yY2VkUmVjb25uZWN0KCk7ZWxzZXtpZih0aGlzLl9wcmV2aW91c1N0YXRlPT09dC5ORVRfU1RBVEVfQ09OTkVDVElORyYmcylyZXR1cm47dGhpcy5fc29ja2V0SGFuZGxlci5mb3JjZWRSZWNvbm5lY3QoKX10aGlzLl9lbWl0TmV0U3RhdGVDaGFuZ2VFdmVudCh0Lk5FVF9TVEFURV9DT05ORUNUSU5HKX19X2VtaXROZXRTdGF0ZUNoYW5nZUV2ZW50KHQpe3RoaXMuX3ByZXZpb3VzU3RhdGUhPT10JiYoX2UubChgJHt0aGlzLl9ufS5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQgZnJvbSAke3RoaXMuX3ByZXZpb3VzU3RhdGV9IHRvICR7dH1gKSx0aGlzLl9wcmV2aW91c1N0YXRlPXQsdGhpcy5lbWl0T3V0ZXJFdmVudChlLk5FVF9TVEFURV9DSEFOR0Use3N0YXRlOnR9KSl9X3BpbmcoKXtpZighMD09PXRoaXMuX3Byb2JpbmcpcmV0dXJuO3RoaXMuX3Byb2Jpbmc9ITA7Y29uc3QgZT10aGlzLmdldE1vZHVsZShFcykuZ2V0UHJvdG9jb2xEYXRhKHtwcm90b2NvbE5hbWU6VWl9KTt0aGlzLnNlbmQoZSkudGhlbigoKT0+e3RoaXMuX3Byb2Jpbmc9ITF9KS5jYXRjaChlPT57aWYoX2Uudyh0aGlzLl9uK1wiLl9waW5nIGZhaWxlZC4gZXJyb3I6XCIsZSksdGhpcy5fcHJvYmluZz0hMSxlJiY2MDAwMj09PWUuY29kZSl7cmV0dXJuIG5ldyBDbihcImVycm9yXCIpLnNldE1lc3NhZ2UoYGNvZGU6JHtlLmNvZGV9IG1lc3NhZ2U6JHtlLm1lc3NhZ2V9YCkuc2V0TmV0d29ya1R5cGUodGhpcy5nZXRNb2R1bGUoSXMpLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHRoaXMuX2ZhdGFsRXJyb3JGbGFnPSEwLHZvaWQgdGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQodC5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX10aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLHNdKT0+e19lLmwoYCR7dGhpcy5fbn0uX3BpbmcgZmFpbGVkLiBwcm9iZSBuZXR3b3JrLCBpc0FwcFNob3dpbmc6JHt0aGlzLl9pc0FwcFNob3dpbmd9IG9ubGluZToke2V9IG5ldHdvcmtUeXBlOiR7c31gKSxlP3RoaXMucmVDb25uZWN0KCk6dGhpcy5fZW1pdE5ldFN0YXRlQ2hhbmdlRXZlbnQodC5ORVRfU1RBVEVfRElTQ09OTkVDVEVEKX0pfSl9X2NoZWNrTmV4dFBpbmcoKXtpZighdGhpcy5fc29ja2V0SGFuZGxlcilyZXR1cm47aWYoIXRoaXMuX3NvY2tldEhhbmRsZXIuaXNDb25uZWN0ZWQoKSlyZXR1cm47RGF0ZS5ub3coKT49dGhpcy5fc29ja2V0SGFuZGxlci5nZXROZXh0UGluZ1RzKCkmJnRoaXMuX3BpbmcoKX1jYW5JVXNlSW5mbGF0ZSgpe3JldHVybiB0aGlzLl9tLmNhbklVc2VJbmZsYXRlKCl9ZGVhbGxvYygpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmNsb3NlKCksdGhpcy5fc29ja2V0SGFuZGxlcj1udWxsKSx0aGlzLl90aW1lckZvck5vdExvZ2dlZEluPi0xJiZjbGVhckludGVydmFsKHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW4pfW9uUmVzdEFwaUtpY2tlZE91dCgpe3RoaXMuX3NvY2tldEhhbmRsZXImJih0aGlzLl9zb2NrZXRIYW5kbGVyLmNsb3NlKCksdGhpcy5yZUNvbm5lY3QoITApKX1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl9wcmV2aW91c1N0YXRlPXQuTkVUX1NUQVRFX0NPTk5FQ1RFRCx0aGlzLl9wcm9iaW5nPSExLHRoaXMuX2ZhdGFsRXJyb3JGbGFnPSExLHRoaXMuX3RpbWVyRm9yTm90TG9nZ2VkSW49c2V0SW50ZXJ2YWwodGhpcy5vbkNoZWNrVGltZXIuYmluZCh0aGlzKSwxZTMpfX1jbGFzcyB2YXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9uPVwiUHJvdG9jb2xIYW5kbGVyXCIsdGhpcy5fc2Vzc2lvbk1vZHVsZT1lLHRoaXMuX2NvbmZpZ01hcD1uZXcgTWFwLHRoaXMuX2ZpbGxDb25maWdNYXAoKX1fZmlsbENvbmZpZ01hcCgpe3RoaXMuX2NvbmZpZ01hcC5jbGVhcigpO2NvbnN0IGU9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZW5Db21tb25IZWFkKCksdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdlbkNvc1NwZWNpZmllZEhlYWQoKSxzPXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2VuU1NPUmVwb3J0SGVhZCgpLG89dGhpcy5fc2Vzc2lvbk1vZHVsZS5pc0ludGwoKTt0aGlzLl9jb25maWdNYXAuc2V0KCRzLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVFVTfS4ke20uQ01ELkxPR0lOfWB9LGJvZHk6e3N0YXRlOlwiT25saW5lXCIsaXNXZWJVbmlhcHA6MCxkZXZpY2VCcmFuZDowfSxrZXlNYXA6e3JlcXVlc3Q6e2RldmljZUJyYW5kOlwiSW5zdFR5cGVcIn0scmVzcG9uc2U6e0luc3RJZDpcImluc3RhbmNlSURcIixIZWxsb0ludGVydmFsOlwiaGVsbG9JbnRlcnZhbFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChxcyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9PUEVOX1NUQVRVU30uJHttLkNNRC5MT0dPVVR9YH0sYm9keTp7dHlwZTowfSxrZXlNYXA6e3JlcXVlc3Q6e3R5cGU6XCJ3c2xvZ291dF90eXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHhzLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVFVTfS4ke20uQ01ELkhFTExPfWB9LGJvZHk6e2lzV2ViVW5pYXBwOjB9LGtleU1hcDp7cmVzcG9uc2U6e05ld0luc3RJbmZvOlwibmV3SW5zdGFuY2VJbmZvXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFZzLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLlNUQVRfU0VSVklDRX0uJHttLkNNRC5LSUNLX09USEVSfWB9LGJvZHk6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChOaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9DT1NfU0lHTn0uJHttLkNNRC5DT1NfU0lHTn1gfSxib2R5OntjbWQ6XCJvcGVuX2ltX2Nvc19zdmNcIixzdWJDbWQ6XCJnZXRfY29zX3Rva2VuXCIsZHVyYXRpb246MzAwLHZlcnNpb246Mn0sa2V5TWFwOntyZXF1ZXN0Ont1c2VyU2lnOlwidXNlcnNpZ1wiLHN1YkNtZDpcInN1Yl9jbWRcIixjbWQ6XCJjbWRcIixkdXJhdGlvbjpcImR1cmF0aW9uXCIsdmVyc2lvbjpcInZlcnNpb25cIn0scmVzcG9uc2U6e2V4cGlyZWRfdGltZTpcImV4cGlyZWRUaW1lXCIsYnVja2V0X25hbWU6XCJidWNrZXROYW1lXCIsc2Vzc2lvbl90b2tlbjpcInNlc3Npb25Ub2tlblwiLHRtcF9zZWNyZXRfaWQ6XCJzZWNyZXRJZFwiLHRtcF9zZWNyZXRfa2V5Olwic2VjcmV0S2V5XCJ9fX19KHQpKSx0aGlzLl9jb25maWdNYXAuc2V0KFJpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkNVU1RPTV9VUExPQUR9LiR7bS5DTUQuQ09TX1BSRV9TSUd9YH0sYm9keTp7ZmlsZVR5cGU6dm9pZCAwLGZpbGVOYW1lOnZvaWQgMCx1cGxvYWRNZXRob2Q6MCxkdXJhdGlvbjo5MDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlclNpZzpcInVzZXJzaWdcIixmaWxlVHlwZTpcImZpbGVfdHlwZVwiLGZpbGVOYW1lOlwiZmlsZV9uYW1lXCIsdXBsb2FkTWV0aG9kOlwidXBsb2FkX21ldGhvZFwifSxyZXNwb25zZTp7ZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIixyZXF1ZXN0X2lkOlwicmVxdWVzdElkXCIsaGVhZF91cmw6XCJoZWFkVXJsXCIsdXBsb2FkX3VybDpcInVwbG9hZFVybFwiLGRvd25sb2FkX3VybDpcImRvd25sb2FkVXJsXCIsY2lfdXJsOlwiY2lVcmxcIixzbmFwc2hvdF91cmw6XCJyZXF1ZXN0U25hcHNob3RVcmxcIn19fX0odCkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoT2ksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuQ1VTVE9NX1VQTE9BRH0uJHttLkNNRC5WSURFT19DT1ZFUn1gfSxib2R5Ont2ZXJzaW9uOjEscGxhdGZvcm06dm9pZCAwLGNvdmVyTmFtZTp2b2lkIDAscmVxdWVzdFNuYXBzaG90VXJsOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont2ZXJzaW9uOlwidmVyc2lvblwiLHBsYXRmb3JtOlwicGxhdGZvcm1cIixjb3Zlck5hbWU6XCJjb3Zlcl9uYW1lXCIscmVxdWVzdFNuYXBzaG90VXJsOlwic25hcHNob3RfdXJsXCJ9LHJlc3BvbnNlOntlcnJvcl9jb2RlOlwiZXJyb3JDb2RlXCIsZXJyb3JfbXNnOlwiZXJyb3JJbmZvXCIsZG93bmxvYWRfdXJsOlwic25hcHNob3RVcmxcIn19fX0odCkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVmksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fQ09ORklHX01BTkFHRVJ9LiR7bS5DTUQuRkVUQ0hfQ09NTUVSQ0lBTF9DT05GSUd9YH0sYm9keTp7U0RLQXBwSUQ6MH0sa2V5TWFwOntyZXF1ZXN0OntTREtBcHBJRDpcInVpbnQzMl9zZGthcHBpZFwifSxyZXNwb25zZTp7aW50MzJfZXJyb3JfY29kZTpcImVycm9yQ29kZVwiLHN0cl9lcnJvcl9tZXNzYWdlOlwiZXJyb3JNZXNzYWdlXCIsc3RyX3B1cmNoYXNlX2JpdHM6XCJwdXJjaGFzZUJpdHNcIix1aW50MzJfZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQmksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fQ09ORklHX01BTkFHRVJ9LiR7bS5DTUQuUFVTSEVEX0NPTU1FUkNJQUxfQ09ORklHfWB9LGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7aW50MzJfZXJyb3JfY29kZTpcImVycm9yQ29kZVwiLHN0cl9lcnJvcl9tZXNzYWdlOlwiZXJyb3JNZXNzYWdlXCIsc3RyX3B1cmNoYXNlX2JpdHM6XCJwdXJjaGFzZUJpdHNcIix1aW50MzJfZXhwaXJlZF90aW1lOlwiZXhwaXJlZFRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocWksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fQ09ORklHX01BTkFHRVJ9LiR7bS5DTUQuRkVUQ0hfQ0xPVURfQ09OVFJPTF9DT05GSUd9YH0sYm9keTp7U0RLQXBwSUQ6MCx2ZXJzaW9uOjB9LGtleU1hcDp7cmVxdWVzdDp7U0RLQXBwSUQ6XCJ1aW50MzJfc2RrYXBwaWRcIix2ZXJzaW9uOlwidWludDY0X3ZlcnNpb25cIn0scmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHhpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX0NPTkZJR19NQU5BR0VSfS4ke20uQ01ELlBVU0hFRF9DTE9VRF9DT05UUk9MX0NPTkZJR31gfSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e2ludDMyX2Vycm9yX2NvZGU6XCJlcnJvckNvZGVcIixzdHJfZXJyb3JfbWVzc2FnZTpcImVycm9yTWVzc2FnZVwiLHN0cl9qc29uX2NvbmZpZzpcImNsb3VkQ29udHJvbENvbmZpZ1wiLHVpbnQzMl9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwiLHVpbnQzMl9zZGthcHBpZDpcIlNES0FwcElEXCIsdWludDY0X3ZlcnNpb246XCJ2ZXJzaW9uXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEhpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9WRVJMT0FEX1BVU0h9LiR7bS5DTUQuT1ZFUkxPQURfTk9USUZZfWB9LGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7T3ZlckxvYWRTZXJ2Q21kOlwib3ZlcmxvYWRDb21tYW5kXCIsRGVsYXlTZWNzOlwid2FpdGluZ1RpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQnMsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5HRVRfTUVTU0FHRVN9YH0sYm9keTp7Y29va2llOlwiXCIsc3luY0ZsYWc6MCxuZWVkQWJzdHJhY3Q6MSxpc09ubGluZVN5bmM6MCxuZWVkU2lnbmFsaW5nOjF9LGtleU1hcDp7cmVxdWVzdDp7ZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRvOlwiVG9fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixzZXF1ZW5jZTpcIk1zZ1NlcVwiLHJhbmRvbTpcIk1zZ1JhbmRvbVwiLGVsZW1lbnRzOlwiTXNnQm9keVwifSxyZXNwb25zZTp7TXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsU3luY0ZsYWc6XCJzeW5jRmxhZ1wiLFRvX0FjY291bnQ6XCJ0b1wiLEZyb21fQWNjb3VudDpcImZyb21cIixDbGllbnRTZXE6XCJjbGllbnRTZXF1ZW5jZVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixOb3RpZnlTZXE6XCJub3RpZnlTZXF1ZW5jZVwiLE1zZ1JhbmRvbTpcInJhbmRvbVwiLE1zZ1RpbWVTdGFtcDpcInRpbWVcIixNc2dDb250ZW50OlwiY29udGVudFwiLFRvR3JvdXBJZDpcInRvXCIsTXNnS2V5OlwibWVzc2FnZUtleVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLE1zZ1R5cGU6XCJ0eXBlXCIsQzJDUmVtYWluaW5nVW5yZWFkQ291bnQ6XCJDMkNSZW1haW5pbmdVbnJlYWRMaXN0XCIsQzJDUGFpclVucmVhZENvdW50OlwiQzJDUGFpclVucmVhZExpc3RcIn19fX0oZSkpLG98fCh0aGlzLl9jb25maWdNYXAuc2V0KEhzLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuQklHX0RBVEFfSEFMTFdBWV9BVVRIX0tFWX1gfSxib2R5Ont9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoc24sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fTVNHX0FVRElUX01HUn0uJHttLkNNRC5HRVRfUlBPRkFOSVRZX0xJU1R9YH0sYm9keTp7dmVyc2lvbjowLGRldmljZUlEOlwiXCIsc3RhcnRJbmRleDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dmVyc2lvbjpcInVpbnQ2NF92ZXJzaW9uXCIsZGV2aWNlSUQ6XCJzdHJfZGV2aWNlX2lkXCIsc3RhcnRJbmRleDpcInVpbnQ2NF9zdGFydF9pbmRleFwifSxyZXNwb25zZTp7bXNnX2NtZF9lcnJvcl9jb2RlOlwiZXJyb3JJbmZvXCIsc3RyX2Vycl9tc2c6XCJlcnJvck1lc3NhZ2VcIix1aW50MzJfY29kZTpcImVycm9yQ29kZVwiLG1zZ19zY2VuZV9jdGxfY29uZmlnOlwiZmlsdGVyQ29uZmlnXCIsdWludDY0X2MyY19jdXN0b21fbXNnX2ZsYWc6XCJjMmNfY3VzdG9tX21lc3NhZ2VcIix1aW50NjRfYzJjX3RleHRfbXNnX2ZsYWc6XCJjMmNfdGV4dF9tZXNzYWdlXCIsdWludDY0X2dyb3VwX2N1c3RvbV9tc2dfZmxhZzpcImdyb3VwX2N1c3RvbV9tZXNzYWdlXCIsdWludDY0X2dyb3VwX3RleHRfbXNnX2ZsYWc6XCJncm91cF90ZXh0X21lc3NhZ2VcIix1aW50NjRfZ3JvdXBfaW5mb19mbGFnOlwiZ3JvdXBfcHJvZmlsZVwiLHVpbnQ2NF9ncm91cF9tZW1iZXJfaW5mb19mbGFnOlwiZ3JvdXBfbWVtYmVyX3Byb2ZpbGVcIix1aW50NjRfcmVsYXRpb25fY2hhaW5fZmxhZzpcInNuc1wiLHVpbnQ2NF91c2VyX2luZm9fZmxhZzpcInVzZXJfcHJvZmlsZVwiLHJwdF9tc2dfZGlydHlfd29yZDpcImxleGljb25cIixzdHJfZGlydHlfd29yZDpcInByb2Zhbml0eVwiLHN0cl9yZXBsYWNlZF9jb250ZW50OlwicmVwbGFjZW1lbnRcIix1aW50NjRfZmlsdGVyX3R5cGU6XCJmaWx0ZXJUeXBlXCIsdWludDY0X2lkOlwiaWRcIix1aW50NjRfd29yZF90eXBlOlwicHJvZmFuaXR5VHlwZVwiLHVpbnQ2NF9jb21wbGV0ZV9mbGFnOlwiY29tcGxldGVGbGFnXCIsdWludDY0X25leHRfc3RhcnRfaW5kZXg6XCJuZXh0U3RhcnRJbmRleFwiLHVpbnQ2NF92ZXJzaW9uOlwidmVyc2lvblwiLHVpbnQ2NF9leHBpcmVkX3RpbWU6XCJleHBpcmVkVGltZVwifX19fShlKSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoS3MsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5TRU5EX01FU1NBR0V9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6XCJcIixtc2dTZXE6MCxtc2dSYW5kb206MCxtc2dCb2R5OltdLGNsb3VkQ3VzdG9tRGF0YTp2b2lkIDAsbmljazpcIlwiLGF2YXRhcjpcIlwiLG1zZ0xpZmVUaW1lOnZvaWQgMCxvZmZsaW5lUHVzaEluZm86e3B1c2hGbGFnOjAsdGl0bGU6XCJcIixkZXNjOlwiXCIsZXh0OlwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTowLGlzVm9pcFB1c2g6dm9pZCAwfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpcIlwifX0sbWVzc2FnZUNvbnRyb2xJbmZvOnZvaWQgMCxjbGllbnRUaW1lOnZvaWQgMCxuZWVkUmVhZFJlY2VpcHQ6MCxpc1N1cHBvcnRFeHRlbnNpb246MH0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIixtc2dCb2R5OlwiTXNnQm9keVwiLGNvdW50OlwiTWF4Q250XCIsbGFzdE1lc3NhZ2VUaW1lOlwiTGFzdE1zZ1RpbWVcIixtZXNzYWdlS2V5OlwiTXNnS2V5XCIscGVlckFjY291bnQ6XCJQZWVyX0FjY291bnRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGV4dGVuc2lvbjpcIkV4dFwiLHR5cGU6XCJNc2dUeXBlXCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIixzaXplVHlwZTpcIlR5cGVcIix1dWlkOlwiVVVJRFwiLHVybDpcIlwiLGltYWdlVXJsOlwiVVJMXCIsZmlsZVVybDpcIlVybFwiLHJlbW90ZUF1ZGlvVXJsOlwiVXJsXCIscmVtb3RlVmlkZW9Vcmw6XCJWaWRlb1VybFwiLHRodW1iVVVJRDpcIlRodW1iVVVJRFwiLHZpZGVvVVVJRDpcIlZpZGVvVVVJRFwiLHZpZGVvVXJsOlwiXCIsZG93bmxvYWRGbGFnOlwiRG93bmxvYWRfRmxhZ1wiLG5pY2s6XCJGcm9tX0FjY291bnROaWNrXCIsYXZhdGFyOlwiRnJvbV9BY2NvdW50SGVhZHVybFwiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLGVsZW1lbnRzOlwiTXNnQm9keVwiLGNsaWVudFNlcXVlbmNlOlwiQ2xpZW50U2VxXCIscGF5bG9hZDpcIk1zZ0NvbnRlbnRcIixtZXNzYWdlTGlzdDpcIk1zZ0xpc3RcIixtZXNzYWdlTnVtYmVyOlwiTXNnTnVtXCIsYWJzdHJhY3RMaXN0OlwiQWJzdHJhY3RMaXN0XCIsbWVzc2FnZUJvZHk6XCJNc2dCb2R5XCIsbmVlZFJlYWRSZWNlaXB0OlwiSXNOZWVkUmVhZFJlY2VpcHRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoV3MsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuU0VORF9HUk9VUF9NRVNTQUdFfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsZ3JvdXBJRDpcIlwiLHJhbmRvbTowLGNsaWVudFNlcXVlbmNlOjAscHJpb3JpdHk6XCJcIixtc2dCb2R5OltdLGNsb3VkQ3VzdG9tRGF0YTp2b2lkIDAsb25saW5lT25seUZsYWc6MCxvZmZsaW5lUHVzaEluZm86e3B1c2hGbGFnOjAsdGl0bGU6XCJcIixkZXNjOlwiXCIsZXh0OlwiXCIsYXBuc0luZm86e2JhZGdlTW9kZTowLGlzVm9pcFB1c2g6dm9pZCAwfSxhbmRyb2lkSW5mbzp7T1BQT0NoYW5uZWxJRDpcIlwifX0sZ3JvdXBBdEluZm86W10sbWVzc2FnZUNvbnRyb2xJbmZvOnZvaWQgMCxjbGllbnRUaW1lOnZvaWQgMCxuZWVkUmVhZFJlY2VpcHQ6MCx0b3BpY0lEOnZvaWQgMCxyZWNlaXZlckxpc3Q6dm9pZCAwLGlzU3VwcG9ydEV4dGVuc2lvbjowfSxrZXlNYXA6e3JlcXVlc3Q6e3RvOlwiR3JvdXBJZFwiLGV4dGVuc2lvbjpcIkV4dFwiLGRhdGE6XCJEYXRhXCIsZGVzY3JpcHRpb246XCJEZXNjXCIscmFuZG9tOlwiUmFuZG9tXCIsc2VxdWVuY2U6XCJSZXFNc2dTZXFcIixjb3VudDpcIlJlcU1zZ051bWJlclwiLHR5cGU6XCJNc2dUeXBlXCIscHJpb3JpdHk6XCJNc2dQcmlvcml0eVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsc2l6ZVR5cGU6XCJUeXBlXCIsdXVpZDpcIlVVSURcIix1cmw6XCJcIixpbWFnZVVybDpcIlVSTFwiLGZpbGVVcmw6XCJVcmxcIixyZW1vdGVBdWRpb1VybDpcIlVybFwiLHJlbW90ZVZpZGVvVXJsOlwiVmlkZW9VcmxcIix0aHVtYlVVSUQ6XCJUaHVtYlVVSURcIix2aWRlb1VVSUQ6XCJWaWRlb1VVSURcIix2aWRlb1VybDpcIlwiLGRvd25sb2FkRmxhZzpcIkRvd25sb2FkX0ZsYWdcIixjbGllbnRTZXF1ZW5jZTpcIkNsaWVudFNlcVwiLGZyb206XCJGcm9tX0FjY291bnRcIix0aW1lOlwiTXNnVGltZVN0YW1wXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwiLHBheWxvYWQ6XCJNc2dDb250ZW50XCIsbWVzc2FnZUxpc3Q6XCJNc2dMaXN0XCIsbWVzc2FnZU51bWJlcjpcIk1zZ051bVwiLGFic3RyYWN0TGlzdDpcIkFic3RyYWN0TGlzdFwiLG1lc3NhZ2VCb2R5OlwiTXNnQm9keVwiLG5lZWRSZWFkUmVjZWlwdDpcIk5lZWRSZWFkUmVjZWlwdFwiLHJlY2VpdmVyTGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e01zZ1RpbWU6XCJ0aW1lXCIsTXNnU2VxOlwic2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoaG8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5SRVZPS0VfQzJDX01FU1NBR0V9YH0sYm9keTp7bXNnSW5mbzp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6XCJcIixtc2dUaW1lU3RhbXA6MCxtc2dTZXE6MCxtc2dSYW5kb206MH19LGtleU1hcDp7cmVxdWVzdDp7bXNnSW5mbzpcIk1zZ0luZm9cIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSm8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuUkVWT0tFX0dST1VQX01FU1NBR0V9YH0sYm9keTp7Z3JvdXBJRDpcIlwiLG1zZ1NlcUxpc3Q6dm9pZCAwLHRvcGljSUQ6XCJcIn0sa2V5TWFwOntyZXF1ZXN0Onttc2dTZXFMaXN0OlwiTXNnU2VxTGlzdFwiLG1zZ1NlcTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChNbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNfS4ke20uQ01ELkdFVF9DMkNfUk9BTV9NRVNTQUdFU31gfSxib2R5OntwZWVyQWNjb3VudDpcIlwiLGNvdW50OjE1LGxhc3RNZXNzYWdlVGltZTowLG1lc3NhZ2VLZXk6XCJcIix3aXRoUmVjYWxsZWRNZXNzYWdlOjEsZGlyZWN0aW9uOjB9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUtleTpcIk1zZ0tleVwiLHBlZXJBY2NvdW50OlwiUGVlcl9BY2NvdW50XCIsY291bnQ6XCJNYXhDbnRcIixsYXN0TWVzc2FnZVRpbWU6XCJMYXN0TXNnVGltZVwiLHdpdGhSZWNhbGxlZE1lc3NhZ2U6XCJXaXRoUmVjYWxsZWRNc2dcIixkaXJlY3Rpb246XCJHZXREaXJlY3Rpb25cIn0scmVzcG9uc2U6e0xhc3RNc2dUaW1lOlwibGFzdE1lc3NhZ2VUaW1lXCIsSXNOZWVkUmVhZFJlY2VpcHQ6XCJuZWVkUmVhZFJlY2VpcHRcIixJc1BlZXJSZWFkOlwicmVhZFJlY2VpcHRTZW50QnlQZWVyXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KENvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuTU9ESUZZX0MyQ19NRVNTQUdFfWB9LGJvZHk6e2Zyb206XCJcIix0bzpcIlwiLHNlcXVlbmNlOjAscmFuZG9tOjAsdGltZTowLHZlcnNpb246MCxlbGVtZW50czp2b2lkIDAsY2xvdWRDdXN0b21EYXRhOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIk1zZ1NlcVwiLHJhbmRvbTpcIk1zZ1JhbmRvbVwiLHRpbWU6XCJNc2dUaW1lXCIsdmVyc2lvbjpcIk1zZ1ZlcnNpb25cIix0eXBlOlwiTXNnVHlwZVwiLGNvbnRlbnQ6XCJNc2dDb250ZW50XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFFvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkdFVF9HUk9VUF9ST0FNX01FU1NBR0VTfWB9LGJvZHk6e3dpdGhSZWNhbGxlZE1zZzoxLGdyb3VwSUQ6XCJcIixjb3VudDoxNSxzZXF1ZW5jZTpcIlwiLHRvcGljSUQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlOlwiUmVxTXNnU2VxXCIsY291bnQ6XCJSZXFNc2dOdW1iZXJcIix3aXRoUmVjYWxsZWRNZXNzYWdlOlwiV2l0aFJlY2FsbGVkTXNnXCJ9LHJlc3BvbnNlOntSYW5kb206XCJyYW5kb21cIixNc2dUaW1lOlwidGltZVwiLE1zZ1NlcTpcInNlcXVlbmNlXCIsUmVxTXNnU2VxOlwic2VxdWVuY2VcIixSc3BNc2dMaXN0OlwibWVzc2FnZUxpc3RcIixJc1BsYWNlTXNnOlwiaXNQbGFjZU1lc3NhZ2VcIixJc1N5c3RlbU1zZzpcImlzU3lzdGVtTWVzc2FnZVwiLFRvR3JvdXBJZDpcInRvXCIsRW51bUZyb21fQWNjb3VudFR5cGU6XCJmcm9tQWNjb3VudFR5cGVcIixFbnVtVG9fQWNjb3VudFR5cGU6XCJ0b0FjY291bnRUeXBlXCIsR3JvdXBDb2RlOlwiZ3JvdXBDb2RlXCIsTXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixJc0ZpbmlzaGVkOlwiY29tcGxldGVcIixEb3dubG9hZF9GbGFnOlwiZG93bmxvYWRGbGFnXCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIixUb1RvcGljSWQ6XCJ0b3BpY0lEXCIsSW52aXNpYmxlTXNnU2VxOlwiaW52aXNpYmxlU2VxdWVuY2VMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGdvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuU0VUX0MyQ19NRVNTQUdFX1JFQUR9YH0sYm9keTp7QzJDTXNnUmVhZGVkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntsYXN0TWVzc2FnZVRpbWU6XCJMYXN0ZWRNc2dUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KF9vLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuU0VUX0MyQ19QRUVSX01VVEVfTk9USUZJQ0FUSU9OU31gfSxib2R5Ont1c2VySURMaXN0OnZvaWQgMCxtdXRlRmxhZzowfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJQZWVyX0FjY291bnRcIixtdXRlRmxhZzpcIk11dGVfTm90aWZpY2F0aW9uc1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChtbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNfS4ke20uQ01ELkdFVF9DMkNfUEVFUl9NVVRFX05PVElGSUNBVElPTlN9YH0sYm9keTp7dXBkYXRlU2VxdWVuY2U6MH0sa2V5TWFwOntyZXNwb25zZTp7TXV0ZU5vdGlmaWNhdGlvbnNMaXN0OlwibXV0ZUZsYWdMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFhvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELlNFVF9HUk9VUF9NRVNTQUdFX1JFQUR9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsbWVzc2FnZVJlYWRTZXE6dm9pZCAwLHRvcGljSUQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VSZWFkU2VxOlwiTXNnUmVhZGVkU2VxXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFpvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuU0VUX0FMTF9NRVNTQUdFX1JFQUR9YH0sYm9keTp7cmVhZEFsbEMyQ01lc3NhZ2U6MCxncm91cE1lc3NhZ2VSZWFkSW5mb0xpc3Q6W119LGtleU1hcDp7cmVxdWVzdDp7cmVhZEFsbEMyQ01lc3NhZ2U6XCJDMkNSZWFkQWxsTXNnXCIsZ3JvdXBNZXNzYWdlUmVhZEluZm9MaXN0OlwiR3JvdXBSZWFkSW5mb1wiLG1lc3NhZ2VTZXF1ZW5jZTpcIk1zZ1NlcVwifSxyZXNwb25zZTp7QzJDUmVhZEFsbE1zZzpcInJlYWRBbGxDMkNNZXNzYWdlXCIsR3JvdXBSZWFkSW5mb0FycmF5OlwiZ3JvdXBNZXNzYWdlUmVhZEluZm9MaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KElvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuREVMRVRFX0MyQ19NRVNTQUdFfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG86XCJcIixrZXlMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntrZXlMaXN0OlwiTXNnS2V5TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChjaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5ERUxFVEVfR1JPVVBfTUVTU0FHRX1gfSxib2R5Ontncm91cElEOlwiXCIsZGVsZXRlcjpcIlwiLGtleUxpc3Q6dm9pZCAwLHRvcGljSUQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2RlbGV0ZXI6XCJEZWxldGVyX0FjY291bnRcIixrZXlMaXN0OlwiU2Vxc1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvbixmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9PUEVOX1RSQU5TTEFURX0uJHttLkNNRC5UUkFOU0xBVEVfVEVYVH1gfSxib2R5Ontzb3VyY2VUZXh0TGlzdDp2b2lkIDAsU0RLQXBwSUQ6MCxmcm9tOjAsc291cmNlOlwiXCIsdGFyZ2V0OlwiXCJ9LGtleU1hcDp7cmVxdWVzdDp7c291cmNlVGV4dExpc3Q6XCJTb3VyY2VUZXh0XCIsU0RLQXBwSUQ6XCJTZGtBcHBJZFwiLGZyb206XCJGcm9tQWNjb3VudFwifSxyZXNwb25zZTp7VGFyZ2V0VGV4dDpcInRyYW5zbGF0ZWRUZXh0TGlzdFwiLFJlcXVlc3RJZDpcInJlcXVlc3RJRFwiLENtZEVycm9yQ29kZTpcImVycm9yXCIsRXJyb3JDb2RlOlwiY29kZVwiLEVycm9ySW5mbzpcIm1lc3NhZ2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5NT0RJRllfR1JPVVBfTUVTU0FHRX1gfSxib2R5Ontncm91cElEOlwiXCIsdG9waWNJRDp2b2lkIDAsc2VxdWVuY2U6MCx2ZXJzaW9uOjAsZWxlbWVudHM6dm9pZCAwLGNsb3VkQ3VzdG9tRGF0YTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c2VxdWVuY2U6XCJNc2dTZXFcIix2ZXJzaW9uOlwiTXNnVmVyc2lvblwiLHR5cGU6XCJNc2dUeXBlXCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZWksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuR0VUX1JFQURfUkVDRUlQVH1gfSxib2R5Ontncm91cElEOlwiXCIsc2VxdWVuY2VMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntzZXF1ZW5jZTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChzaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNfS4ke20uQ01ELlNFTkRfQzJDX1JFQURfUkVDRUlQVH1gfSxib2R5OntwZWVyQWNjb3VudDpcIlwiLG1lc3NhZ2VJbmZvTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7cGVlckFjY291bnQ6XCJQZWVyX0FjY291bnRcIixtZXNzYWdlSW5mb0xpc3Q6XCJDMkNNc2dJbmZvXCIsZnJvbUFjY291bnQ6XCJGcm9tX0FjY291bnRcIix0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsc2VxdWVuY2U6XCJNc2dTZXFcIixyYW5kb206XCJNc2dSYW5kb21cIix0aW1lOlwiTXNnVGltZVwiLGNsaWVudFRpbWU6XCJNc2dDbGllbnRUaW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHRpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELlNFTkRfUkVBRF9SRUNFSVBUfWB9LGJvZHk6e2dyb3VwSUQ6XCJcIixzZXF1ZW5jZUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlTGlzdDpcIk1zZ1NlcUxpc3RcIixzZXF1ZW5jZTpcIk1zZ1NlcVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5HRVRfUkVBRF9SRUNFSVBUX0RFVEFJTH1gfSxib2R5Ontncm91cElEOlwiXCIsc2VxdWVuY2U6dm9pZCAwLGZsYWc6MCxjdXJzb3I6MCxjb3VudDowfSxrZXlNYXA6e3JlcXVlc3Q6e3NlcXVlbmNlOlwiTXNnU2VxXCIsY291bnQ6XCJOdW1cIn0scmVzcG9uc2U6e1JlYWRMaXN0OlwicmVhZFVzZXJJRExpc3RcIixSZWFkX0FjY291bnQ6XCJ1c2VySURcIixVbnJlYWRMaXN0OlwidW5yZWFkVXNlcklETGlzdFwiLFVucmVhZF9BY2NvdW50OlwidXNlcklEXCIsSXNGaW5pc2g6XCJpc0NvbXBsZXRlZFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChUbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNX01TR19FWFR9LiR7bS5DTUQuTU9ESUZZX0MyQ19NRVNTQUdFX0VYVEVOU0lPTlN9YH0sYm9keTp7ZnJvbTp2b2lkIDAsdG86dm9pZCAwLG1lc3NhZ2VLZXk6dm9pZCAwLG9wZXJhdGVUeXBlOnZvaWQgMCxleHRlbnNpb25MaXN0OnZvaWQgMH19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh5byxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNX01TR19FWFR9LiR7bS5DTUQuR0VUX0MyQ19NRVNTQUdFX0VYVEVOU0lPTlN9YH0sYm9keTp7ZnJvbTp2b2lkIDAsdG86dm9pZCAwLG1lc3NhZ2VLZXk6dm9pZCAwLHN0YXJ0U2VxdWVuY2U6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KG1pLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU1fTVNHX0VYVH0uJHttLkNNRC5NT0RJRllfR1JPVVBfTUVTU0FHRV9FWFRFTlNJT05TfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljSUQ6dm9pZCAwLG1lc3NhZ2VTZXF1ZW5jZTp2b2lkIDAsb3BlcmF0ZVR5cGU6dm9pZCAwLGV4dGVuc2lvbkxpc3Q6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KE1pLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU1fTVNHX0VYVH0uJHttLkNNRC5HRVRfR1JPVVBfTUVTU0FHRV9FWFRFTlNJT05TfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljSUQ6dm9pZCAwLG1lc3NhZ2VTZXF1ZW5jZTp2b2lkIDAsc3RhcnRTZXF1ZW5jZTp2b2lkIDB9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZm8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5HRVRfUEVFUl9SRUFEX1RJTUV9YH0sYm9keTp7dXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7dXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1JlYWRUaW1lOlwicGVlclJlYWRUaW1lTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChFbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5SRUNFTlRfQ09OVEFDVH0uJHttLkNNRC5HRVRfQ09OVkVSU0FUSU9OX0xJU1R9YH0sYm9keTp7ZnJvbUFjY291bnQ6dm9pZCAwLGNvdW50OjB9LGtleU1hcDp7cmVxdWVzdDp7fSxyZXNwb25zZTp7U2Vzc2lvbkl0ZW06XCJjb252ZXJzYXRpb25zXCIsVG9BY2NvdW50OlwiZ3JvdXBJRFwiLFRvX0FjY291bnQ6XCJ1c2VySURcIixVbnJlYWRNc2dDb3VudDpcInVucmVhZENvdW50XCIsTXNnR3JvdXBSZWFkZWRTZXE6XCJtZXNzYWdlUmVhZFNlcVwiLEMyY1BlZXJSZWFkVGltZTpcImMyY1BlZXJSZWFkVGltZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChEbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5SRUNFTlRfQ09OVEFDVH0uJHttLkNNRC5QQUdJTkdfR0VUX0NPTlZFUlNBVElPTl9MSVNUfWB9LGJvZHk6e2Zyb21BY2NvdW50OnZvaWQgMCx0aW1lU3RhbXA6dm9pZCAwLHN0YXJ0SW5kZXg6dm9pZCAwLHBpbm5lZFRpbWVTdGFtcDp2b2lkIDAscGlubmVkU3RhcnRJbmRleDp2b2lkIDAsb3JkZXJUeXBlOnZvaWQgMCxtZXNzYWdlQXNzaXN0RmxhZzo0LGFzc2lzdEZsYWc6MTV9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUFzc2lzdEZsYWc6XCJNc2dBc3Npc3RGbGFnc1wiLGFzc2lzdEZsYWc6XCJBc3Npc3RGbGFnc1wiLHBpbm5lZFRpbWVTdGFtcDpcIlRvcFRpbWVTdGFtcFwiLHBpbm5lZFN0YXJ0SW5kZXg6XCJUb3BTdGFydEluZGV4XCJ9LHJlc3BvbnNlOntTZXNzaW9uSXRlbTpcImNvbnZlcnNhdGlvbnNcIixUb0FjY291bnQ6XCJncm91cElEXCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLFVucmVhZE1zZ0NvdW50OlwidW5yZWFkQ291bnRcIixNc2dHcm91cFJlYWRlZFNlcTpcIm1lc3NhZ2VSZWFkU2VxXCIsQzJjUGVlclJlYWRUaW1lOlwiYzJjUGVlclJlYWRUaW1lXCIsTGFzdE1zZ0ZsYWdzOlwibGFzdE1lc3NhZ2VGbGFnXCIsVG9wRmxhZ3M6XCJpc1Bpbm5lZFwiLFRvcFRpbWVTdGFtcDpcInBpbm5lZFRpbWVTdGFtcFwiLFRvcFN0YXJ0SW5kZXg6XCJwaW5uZWRTdGFydEluZGV4XCIsR3JvdXBJZDpcImNvbnZHcm91cElEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFNvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLlJFQ0VOVF9DT05UQUNUfS4ke20uQ01ELkRFTEVURV9DT05WRVJTQVRJT059YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixjb252ZXJzYXRpb25MaXN0OnZvaWQgMCxjbGVhckhpc3RvcnlNZXNzYWdlOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0b0dyb3VwSUQ6XCJUb0dyb3VwaWRcIixjbGVhckhpc3RvcnlNZXNzYWdlOlwiQ2xlYXJSYW1ibGVcIixjb252ZXJzYXRpb25MaXN0OlwiQ29udGFjdEl0ZW1cIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCIsVG9Hcm91cGlkOlwiZ3JvdXBJRFwiLFJlc3VsdENvZGU6XCJjb2RlXCIsUmVzdWx0SW5mbzpcImluZm9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTG8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuQ0xFQVJfSElTVE9SWV9NRVNTQUdFfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdG9BY2NvdW50OnZvaWQgMCx0eXBlOjEsdG9Hcm91cElEOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0b0dyb3VwSUQ6XCJUb0dyb3VwaWRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQW8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuUElOX0NPTlZFUlNBVElPTn1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLG9wZXJhdGlvblR5cGU6MSxpdGVtTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aXRlbUxpc3Q6XCJSZWNlbnRDb250YWN0SXRlbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh2byxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5PUEVOX0lNfS4ke20uQ01ELkRFTEVURV9HUk9VUF9BVF9USVBTfWB9LGJvZHk6e21lc3NhZ2VMaXN0VG9EZWxldGU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e21lc3NhZ2VMaXN0VG9EZWxldGU6XCJEZWxNc2dMaXN0XCIsbWVzc2FnZVNlcTpcIk1zZ1NlcVwiLG1lc3NhZ2VSYW5kb206XCJNc2dSYW5kb21cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoTm8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuTUFSS19DT05WRVJTQVRJT059YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixpdGVtTGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7aXRlbUxpc3Q6XCJNYXJrSXRlbVwiLG9wZXJhdGlvblR5cGU6XCJPcHRUeXBlXCIsZ3JvdXBJRDpcIlRvR3JvdXBJZFwifSxyZXNwb25zZTp7VG9Hcm91cElkOlwiZ3JvdXBJRFwiLE9wdFR5cGU6XCJvcGVyYXRpb25UeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFJvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLlJFQ0VOVF9DT05UQUNUfS4ke20uQ01ELk1BUktfQ09OVkVSU0FUSU9OfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsaXRlbUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2l0ZW1MaXN0OlwiTWFya0l0ZW1cIixvcGVyYXRpb25UeXBlOlwiT3B0VHlwZVwiLGdyb3VwSUQ6XCJUb0dyb3VwSWRcIn0scmVzcG9uc2U6e1RvR3JvdXBJZDpcImdyb3VwSURcIixPcHRUeXBlOlwib3BlcmF0aW9uVHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChPbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5SRUNFTlRfQ09OVEFDVH0uJHttLkNNRC5DUkVBVEVfQ09OVkVSU0FUSU9OX0dST1VQfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsaXRlbUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2l0ZW1MaXN0OlwiR3JvdXBDb250YWN0SXRlbVwiLGdyb3VwSUQ6XCJUb0dyb3VwSWRcIn0scmVzcG9uc2U6e0dyb3VwSWQ6XCJjb252R3JvdXBJRFwiLFRvR3JvdXBJZDpcImdyb3VwSURcIixPcHRUeXBlOlwib3BlcmF0aW9uVHlwZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChHbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5SRUNFTlRfQ09OVEFDVH0uJHttLkNNRC5ERUxFVEVfQ09OVkVSU0FUSU9OX0dST1VQfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsZ3JvdXBOYW1lOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont9LHJlc3BvbnNlOntHcm91cElkOlwiY29udkdyb3VwSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVW8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuVVBEQVRFX0NPTlZFUlNBVElPTl9HUk9VUH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVwZGF0ZVR5cGU6dm9pZCAwLHVwZGF0ZUdyb3VwOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntvbGROYW1lOlwiT2xkR3JvdXBOYW1lXCIsbmV3TmFtZTpcIk5ld0dyb3VwTmFtZVwiLGdyb3VwSUQ6XCJUb0dyb3VwSWRcIixvcGVyYXRpb25UeXBlOlwiQ29udGFjdE9wdFR5cGVcIixncm91cE5hbWU6XCJPbGRHcm91cE5hbWVcIix1cGRhdGVJdGVtOlwiQ29udGFjdFVwZGF0ZUl0ZW1cIn0scmVzcG9uc2U6e0NvbnRhY3RPcHRUeXBlOlwib3BlcmF0aW9uVHlwZVwiLFRvR3JvdXBJZDpcImdyb3VwSURcIixHcm91cElkOlwiY29udkdyb3VwSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoa28sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuVVBEQVRFX0NPTlZFUlNBVElPTl9HUk9VUH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVwZGF0ZVR5cGU6dm9pZCAwLHVwZGF0ZUdyb3VwOntncm91cE5hbWU6dm9pZCAwLHVwZGF0ZUdyb3VwVHlwZTp2b2lkIDAsdXBkYXRlSXRlbTp2b2lkIDB9fSxrZXlNYXA6e3JlcXVlc3Q6e30scmVzcG9uc2U6e319fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUG8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUkVDRU5UX0NPTlRBQ1R9LiR7bS5DTUQuVVBEQVRFX0NPTlZFUlNBVElPTl9HUk9VUH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVwZGF0ZVR5cGU6dm9pZCAwLHVwZGF0ZUdyb3VwOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont9LHJlc3BvbnNlOnt9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGJvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLlJFQ0VOVF9DT05UQUNUfS4ke20uQ01ELkdFVF9DT05WRVJTQVRJT05fR1JPVVBfTElTVH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHN0YXJ0VGltZTp2b2lkIDAsc3RhcnRJbmRleDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7fSxyZXNwb25zZTp7R3JvdXBJZDpcImNvbnZHcm91cElEXCIsVG9Hcm91cElkOlwiZ3JvdXBJRFwiLE9wdFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsQ3VzdG9tTWFyazpcImN1c3RvbURhdGFcIixDb250YWN0R3JvdXBJZDpcImNvbnZHcm91cElETGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChZcyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5QUk9GSUxFfS4ke20uQ01ELlBPUlRSQUlUX0dFVH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVzZXJJdGVtOltdfSxrZXlNYXA6e3JlcXVlc3Q6e3RvQWNjb3VudDpcIlRvX0FjY291bnRcIixzdGFuZGFyZFNlcXVlbmNlOlwiU3RhbmRhcmRTZXF1ZW5jZVwiLGN1c3RvbVNlcXVlbmNlOlwiQ3VzdG9tU2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoanMsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuUFJPRklMRX0uJHttLkNNRC5QT1JUUkFJVF9TRVR9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixwcm9maWxlSXRlbTpbe3RhZzpNZS5OSUNLLHZhbHVlOlwiXCJ9LHt0YWc6TWUuR0VOREVSLHZhbHVlOlwiXCJ9LHt0YWc6TWUuQUxMT1dUWVBFLHZhbHVlOlwiXCJ9LHt0YWc6TWUuQVZBVEFSLHZhbHVlOlwiXCJ9XX0sa2V5TWFwOntyZXF1ZXN0Ont0b0FjY291bnQ6XCJUb19BY2NvdW50XCIsc3RhbmRhcmRTZXF1ZW5jZTpcIlN0YW5kYXJkU2VxdWVuY2VcIixjdXN0b21TZXF1ZW5jZTpcIkN1c3RvbVNlcXVlbmNlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHpzLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5HRVRfQkxBQ0tMSVNUfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsc3RhcnRJbmRleDowLG1heExpbWl0ZWQ6MzAsbGFzdFNlcXVlbmNlOjB9LGtleU1hcDp7cmVzcG9uc2U6e0N1cnJ1ZW50U2VxdWVuY2U6XCJjdXJyZW50U2VxdWVuY2VcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSnMsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuRlJJRU5EfS4ke20uQ01ELkFERF9CTEFDS0xJU1R9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6W119fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWHMsZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuRlJJRU5EfS4ke20uQ01ELkRFTEVURV9CTEFDS0xJU1R9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIix0b0FjY291bnQ6W119fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoemksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fT1BFTl9TVEFUVVN9LiR7bS5DTUQuU0VUX1NFTEZfU1RBVFVTfWB9LGJvZHk6e2N1c3RvbVN0YXR1czpcIlwifSxrZXlNYXA6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChKaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9PUEVOX1NUQVRVU30uJHttLkNNRC5HRVRfVVNFUl9TVEFUVVN9YH0sYm9keTp7dXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVzcG9uc2U6e1VzZXJTdGF0dXNMaXN0Olwic3VjY2Vzc1VzZXJMaXN0XCIsRXJyb3JMaXN0OlwiZmFpbHVyZVVzZXJMaXN0XCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLEludmFsaWRfQWNjb3VudDpcImludmFsaWRVc2VySURcIixTdGF0dXM6XCJzdGF0dXNUeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFhpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVFVTfS4ke20uQ01ELlNVQlNDUklCRV9VU0VSX1NUQVRVU31gfSxib2R5Ont1c2VySURMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXNwb25zZTp7RXJyb3JMaXN0OlwiZmFpbHVyZVVzZXJMaXN0XCIsVG9fQWNjb3VudDpcInVzZXJJRFwiLEludmFsaWRfQWNjb3VudDpcImludmFsaWRVc2VySURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWmksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fT1BFTl9TVEFUVVN9LiR7bS5DTUQuVU5TVUJTQ1JJQkVfVVNFUl9TVEFUVVN9YH0sYm9keTp7dXNlcklETGlzdDp2b2lkIDAsdW5zdWJzY3JpYmVBbGw6dm9pZCAwfSxrZXlNYXA6e3Jlc3BvbnNlOntFcnJvckxpc3Q6XCJmYWlsdXJlVXNlckxpc3RcIixUb19BY2NvdW50OlwidXNlcklEXCIsSW52YWxpZF9BY2NvdW50OlwiaW52YWxpZFVzZXJJRFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChacyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuR0VUX0ZSSUVORF9MSVNUfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsc3RhcnRJbmRleDowLHN0YW5kYXJkU2VxdWVuY2U6MCxjdXN0b21TZXF1ZW5jZTowfSxrZXlNYXA6e3Jlc3BvbnNlOntGcmllbmROdW06XCJmcmllbmRDb3VudFwiLFVzZXJEYXRhSXRlbTpcInJlc3VsdExpc3RcIixWYWx1ZUl0ZW06XCJ0YWdWYWx1ZUxpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoc28sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuRlJJRU5EfS4ke20uQ01ELkFERF9GUklFTkR9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixhZGRGcmllbmRJdGVtOltdLHR5cGU6XCJcIn0sa2V5TWFwOntyZXF1ZXN0Ontzb3VyY2U6XCJBZGRTb3VyY2VcIix3b3JkaW5nOlwiQWRkV29yZGluZ1wiLHR5cGU6XCJBZGRUeXBlXCJ9LHJlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChvbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuVVBEQVRFX0ZSSUVORH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVwZGF0ZUl0ZW06dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3Nuc0l0ZW06XCJTbnNJdGVtXCJ9LHJlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh0byxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuREVMRVRFX0ZSSUVORH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHVzZXJJRExpc3Q6W10sdHlwZTpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e3R5cGU6XCJEZWxldGVUeXBlXCJ9LHJlc3BvbnNlOntSZXN1bHRJdGVtOlwicmVzdWx0TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChRcyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuR0VUX0ZSSUVORF9QUk9GSUxFfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVzcG9uc2U6e0luZm9JdGVtOlwicmVzdWx0TGlzdFwiLFNuc1Byb2ZpbGVJdGVtOlwidGFnVmFsdWVMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGVvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5DSEVDS19GUklFTkR9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIix1c2VySURMaXN0OltdLHR5cGU6XCJcIn0sa2V5TWFwOntyZXF1ZXN0Ont0eXBlOlwiQ2hlY2tUeXBlXCJ9LHJlc3BvbnNlOntJbmZvSXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobm8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuRlJJRU5EfS4ke20uQ01ELkdFVF9GUklFTkRfQVBQTElDQVRJT05fTElTVH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGFwcGxpY2F0aW9uVHlwZTpcIlwiLHN0YXJ0VGltZTowLG1heExpbWl0ZWQ6MCxsYXN0U2VxdWVuY2U6MH0sa2V5TWFwOntyZXNwb25zZTp7UGVuZGVuY3lJdGVtOlwicmVzdWx0TGlzdFwiLEFkZFNvdXJjZTpcInNvdXJjZVwiLEFkZFRpbWU6XCJ0aW1lXCIsQWRkV29yZGluZzpcIndvcmRpbmdcIixJbWFnZTpcImF2YXRhclwiLFVucmVhZFBlbmRlbmN5Q291bnQ6XCJ1bnJlYWRDb3VudFwiLFRvX0FjY291bnQ6XCJ1c2VySURcIixQZW5kZW5jeVR5cGU6XCJ0eXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGlvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5SRVNQT05EX0ZSSUVORF9BUFBMSUNBVElPTn1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLHJlc3BvbnNlRnJpZW5kSXRlbTpbXX0sa2V5TWFwOntyZXF1ZXN0Ont0YWc6XCJUYWdOYW1lXCIsYWN0aW9uOlwiUmVzcG9uc2VBY3Rpb25cIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHJvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5ERUxFVEVfRlJJRU5EX0FQUExJQ0FUSU9OfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsdHlwZTpcIlwiLHVzZXJJRExpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3R5cGU6XCJQZW5kZW5jeVR5cGVcIix1c2VySURMaXN0OlwiVG9fQWNjb3VudFwifSxyZXNwb25zZTp7UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoYW8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuRlJJRU5EfS4ke20uQ01ELlJFUE9SVF9GUklFTkRfQVBQTElDQVRJT059YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixsYXRlc3RUaW1lU3RhbXA6XCJcIn0sa2V5TWFwOntyZXF1ZXN0OntsYXRlc3RUaW1lU3RhbXA6XCJMYXRlc3RQZW5kZW5jeVRpbWVTdGFtcFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChjbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuQ1JFQVRFX0ZSSUVORF9HUk9VUH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLGdyb3VwTmFtZTp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7Z3JvdXBOYW1lOlwiR3JvdXBOYW1lXCIsdXNlcklETGlzdDpcIlRvX0FjY291bnRcIn0scmVzcG9uc2U6e1Jlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGxvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5ERUxFVEVfRlJJRU5EX0dST1VQfWB9LGJvZHk6e2Zyb21BY2NvdW50OlwiXCIsbmFtZUxpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e25hbWVMaXN0OlwiR3JvdXBOYW1lXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHVvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkZSSUVORH0uJHttLkNNRC5HRVRfRlJJRU5EX0dST1VQX0xJU1R9YH0sYm9keTp7ZnJvbUFjY291bnQ6XCJcIixsYXN0U2VxdWVuY2U6MCxuZWVkRnJpZW5kOlwiTmVlZF9GcmllbmRfVHlwZV9ZZXNcIn0sa2V5TWFwOntyZXNwb25zZTp7UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIixHcm91cE5hbWU6XCJuYW1lXCIsRnJpZW5kTnVtYmVyOlwiZnJpZW5kQ291bnRcIixUb19BY2NvdW50OlwidXNlcklETGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChwbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5GUklFTkR9LiR7bS5DTUQuVVBEQVRFX0ZSSUVORF9HUk9VUH1gfSxib2R5Ontmcm9tQWNjb3VudDpcIlwiLG9sZE5hbWU6XCJcIixuZXdOYW1lOnZvaWQgMCx1cGRhdGVHcm91cEl0ZW06dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e29sZE5hbWU6XCJHcm91cE9sZE5hbWVcIixuZXdOYW1lOlwiR3JvdXBOZXdOYW1lXCJ9LHJlc3BvbnNlOntVcGRhdGVUeXBlOlwidHlwZVwiLFJlc3VsdEl0ZW06XCJyZXN1bHRMaXN0XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHdvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkdFVF9KT0lORURfR1JPVVBTfWB9LGJvZHk6e21lbWJlckFjY291bnQ6XCJcIixsaW1pdDp2b2lkIDAsb2Zmc2V0OnZvaWQgMCxncm91cFR5cGU6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOnZvaWQgMCxzZWxmSW5mb0ZpbHRlcjp2b2lkIDB9LGlzU3VwcG9ydFRvcGljOjB9LGtleU1hcDp7cmVxdWVzdDp7bWVtYmVyQWNjb3VudDpcIk1lbWJlcl9BY2NvdW50XCJ9LHJlc3BvbnNlOntHcm91cElkTGlzdDpcImdyb3Vwc1wiLE5vVW5yZWFkU2VxTGlzdDpcImV4Y2x1ZGVkVW5yZWFkU2VxdWVuY2VMaXN0XCIsTXNnU2VxOlwicmVhZGVkU2VxdWVuY2VcIixMYXN0UmVjYWxsVGltZTpcIl9sYXN0UmV2b2tlZFRpbWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRm8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuR0VUX0dST1VQX0lORk99YH0sYm9keTp7Z3JvdXBJRExpc3Q6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJPd25lcl9BY2NvdW50XCIsXCJDcmVhdGVUaW1lXCIsXCJJbmZvU2VxXCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCIsXCJOZXh0TXNnU2VxXCIsXCJTaHV0VXBBbGxNZW1iZXJcIl0sZ3JvdXBDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDAsbWVtYmVySW5mb0ZpbHRlcjp2b2lkIDAsbWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6dm9pZCAwfX0sa2V5TWFwOntyZXF1ZXN0Ontncm91cElETGlzdDpcIkdyb3VwSWRMaXN0XCIsZ3JvdXBDdXN0b21GaWVsZDpcIkFwcERlZmluZWREYXRhXCIsbWVtYmVyQ3VzdG9tRmllbGQ6XCJBcHBNZW1iZXJEZWZpbmVkRGF0YVwiLGdyb3VwQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cFwiLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXJcIn0scmVzcG9uc2U6e0dyb3VwSWRMaXN0OlwiZ3JvdXBzXCIsQXBwRGVmaW5lZERhdGE6XCJncm91cEN1c3RvbUZpZWxkXCIsQXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwOlwiZ3JvdXBDdXN0b21GaWVsZEZpbHRlclwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixJbmZvU2VxOlwiaW5mb1NlcXVlbmNlXCIsTWVtYmVyTGlzdDpcIm1lbWJlcnNcIixHcm91cEluZm86XCJncm91cHNcIixTaHV0VXBVbnRpbDpcIm11dGVVbnRpbFwiLFNodXRVcEFsbE1lbWJlcjpcIm11dGVBbGxNZW1iZXJzXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KCRvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkNSRUFURV9HUk9VUH1gfSxib2R5Ont0eXBlOnZvaWQgMCxuYW1lOnZvaWQgMCxncm91cElEOnZvaWQgMCxvd25lcklEOnZvaWQgMCxpbnRyb2R1Y3Rpb246dm9pZCAwLG5vdGlmaWNhdGlvbjp2b2lkIDAsbWF4TWVtYmVyTnVtOnZvaWQgMCxqb2luT3B0aW9uOnZvaWQgMCxtZW1iZXJMaXN0OnZvaWQgMCxncm91cEN1c3RvbUZpZWxkOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAsd2ViUHVzaEZsYWc6MSxhdmF0YXI6XCJcIixpc1N1cHBvcnRUb3BpYzp2b2lkIDAsaW52aXRlT3B0aW9uOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ontvd25lcklEOlwiT3duZXJfQWNjb3VudFwiLHVzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsYXZhdGFyOlwiRmFjZVVybFwiLG1heE1lbWJlck51bTpcIk1heE1lbWJlckNvdW50XCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGdyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG1lbWJlckN1c3RvbUZpZWxkOlwiQXBwTWVtYmVyRGVmaW5lZERhdGFcIixpbnZpdGVPcHRpb246XCJJbnZpdGVKb2luT3B0aW9uXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIixPdmVySm9pbmVkR3JvdXBMaW1pdF9BY2NvdW50Olwib3ZlckxpbWl0VXNlcklETGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChxbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5ERVNUUk9ZX0dST1VQfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHhvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELk1PRElGWV9HUk9VUF9JTkZPfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG5hbWU6dm9pZCAwLGludHJvZHVjdGlvbjp2b2lkIDAsbm90aWZpY2F0aW9uOnZvaWQgMCxhdmF0YXI6dm9pZCAwLGpvaW5PcHRpb246dm9pZCAwLGdyb3VwQ3VzdG9tRmllbGQ6dm9pZCAwLG11dGVBbGxNZW1iZXJzOnZvaWQgMCxpbnZpdGVPcHRpb246dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2dyb3VwQ3VzdG9tRmllbGQ6XCJBcHBEZWZpbmVkRGF0YVwiLG11dGVBbGxNZW1iZXJzOlwiU2h1dFVwQWxsTWVtYmVyXCIsam9pbk9wdGlvbjpcIkFwcGx5Sm9pbk9wdGlvblwiLGF2YXRhcjpcIkZhY2VVcmxcIixpbnZpdGVPcHRpb246XCJJbnZpdGVKb2luT3B0aW9uXCJ9LHJlc3BvbnNlOntBcHBEZWZpbmVkRGF0YTpcImdyb3VwQ3VzdG9tRmllbGRcIixTaHV0VXBBbGxNZW1iZXI6XCJtdXRlQWxsTWVtYmVyc1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChWbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5BUFBMWV9KT0lOX0dST1VQfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGFwcGx5TWVzc2FnZTp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDAsd2ViUHVzaEZsYWc6MSxoaXN0b3J5TWVzc2FnZUZsYWc6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGx5TWVzc2FnZTpcIkFwcGx5TXNnXCIsaGlzdG9yeU1lc3NhZ2VGbGFnOlwiSHVnZUdyb3VwSGlzdG9yeU1zZ0ZsYWdcIn0scmVzcG9uc2U6e0h1Z2VHcm91cEZsYWc6XCJhdkNoYXRSb29tRmxhZ1wiLEFWQ2hhdFJvb21LZXk6XCJhdkNoYXRSb29tS2V5XCIsUnNwTXNnTGlzdDpcIm1lc3NhZ2VMaXN0XCIsVG9Hcm91cElkOlwidG9cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQm8sZnVuY3Rpb24oZSl7Y29uc3R7YTI6dCx0aW55aWQ6cywuLi5vfT1lO3JldHVybntoZWFkOnsuLi5vLHNlcnZjbWQ6YCR7bS5OQU1FLkJJR19HUk9VUF9OT19BVVRIfS4ke20uQ01ELkFQUExZX0pPSU5fR1JPVVB9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbHlNZXNzYWdlOnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMCx3ZWJQdXNoRmxhZzoxfSxrZXlNYXA6e3JlcXVlc3Q6e2FwcGx5TWVzc2FnZTpcIkFwcGx5TXNnXCJ9LHJlc3BvbnNlOntIdWdlR3JvdXBGbGFnOlwiYXZDaGF0Um9vbUZsYWdcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoSG8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuUVVJVF9HUk9VUH1gfSxib2R5Ontncm91cElEOnZvaWQgMH19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChLbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5TRUFSQ0hfR1JPVVBfQllfSUR9YH0sYm9keTp7Z3JvdXBJRExpc3Q6dm9pZCAwLHJlc3BvbnNlRmlsdGVyOntncm91cEJhc2VQdWJsaWNJbmZvRmlsdGVyOltcIlR5cGVcIixcIk5hbWVcIixcIkludHJvZHVjdGlvblwiLFwiTm90aWZpY2F0aW9uXCIsXCJGYWNlVXJsXCIsXCJDcmVhdGVUaW1lXCIsXCJPd25lcl9BY2NvdW50XCIsXCJMYXN0SW5mb1RpbWVcIixcIkxhc3RNc2dUaW1lXCIsXCJOZXh0TXNnU2VxXCIsXCJNZW1iZXJOdW1cIixcIk1heE1lbWJlck51bVwiLFwiQXBwbHlKb2luT3B0aW9uXCIsXCJJbnZpdGVKb2luT3B0aW9uXCJdfX0sa2V5TWFwOntyZXNwb25zZTp7fX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChXbyxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5DSEFOR0VfR1JPVVBfT1dORVJ9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsbmV3T3duZXJJRDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bmV3T3duZXJJRDpcIk5ld093bmVyX0FjY291bnRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWW8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuSEFORExFX0FQUExZX0pPSU5fR1JPVVB9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsYXBwbGljYW50OnZvaWQgMCxoYW5kbGVBY3Rpb246dm9pZCAwLGhhbmRsZU1lc3NhZ2U6dm9pZCAwLGF1dGhlbnRpY2F0aW9uOnZvaWQgMCxtZXNzYWdlS2V5OnZvaWQgMCx1c2VyRGVmaW5lZEZpZWxkOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OnthcHBsaWNhbnQ6XCJBcHBsaWNhbnRfQWNjb3VudFwiLGhhbmRsZUFjdGlvbjpcIkhhbmRsZU1zZ1wiLGhhbmRsZU1lc3NhZ2U6XCJBcHByb3ZhbE1zZ1wiLG1lc3NhZ2VLZXk6XCJNc2dLZXlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoam8sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuSEFORExFX0lOVklURV9KT0lOX0dST1VQfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGFwcGxpY2FudDp2b2lkIDAsaW52aXRlZTp2b2lkIDAsaGFuZGxlQWN0aW9uOnZvaWQgMCxoYW5kbGVNZXNzYWdlOnZvaWQgMCxhdXRoZW50aWNhdGlvbjp2b2lkIDAsdXNlckRlZmluZWRGaWVsZDp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7YXBwbGljYW50OlwiQXBwbGljYW50X0FjY291bnRcIixpbnZpdGVlOlwiSW52aXRlZF9BY2NvdW50XCIsaGFuZGxlQWN0aW9uOlwiSGFuZGxlTXNnXCIsaGFuZGxlTWVzc2FnZTpcIkFwcHJvdmFsTXNnXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHpvLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkhBTkRMRV9HUk9VUF9JTlZJVEFUSU9OfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLGludml0ZXI6dm9pZCAwLGhhbmRsZUFjdGlvbjp2b2lkIDAsaGFuZGxlTWVzc2FnZTp2b2lkIDAsYXV0aGVudGljYXRpb246dm9pZCAwLG1lc3NhZ2VLZXk6dm9pZCAwLHVzZXJEZWZpbmVkRmllbGQ6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2ludml0ZXI6XCJJbnZpdGVyX0FjY291bnRcIixoYW5kbGVBY3Rpb246XCJIYW5kbGVNc2dcIixoYW5kbGVNZXNzYWdlOlwiQXBwcm92YWxNc2dcIixtZXNzYWdlS2V5OlwiTXNnS2V5XCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGlpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkdFVF9HUk9VUF9BUFBMSUNBVElPTn1gfSxib2R5OntzdGFydFRpbWU6dm9pZCAwLGxpbWl0OnZvaWQgMCxoYW5kbGVBY2NvdW50OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntoYW5kbGVBY2NvdW50OlwiSGFuZGxlX0FjY291bnRcIn0scmVzcG9uc2U6e1RvX0FjY291bnQ6XCJ1c2VySURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQobmksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuT1BFTl9JTX0uJHttLkNNRC5ERUxFVEVfR1JPVVBfU1lTVEVNX01FU1NBR0V9YH0sYm9keTp7bWVzc2FnZUxpc3RUb0RlbGV0ZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWVzc2FnZUxpc3RUb0RlbGV0ZTpcIkRlbE1zZ0xpc3RcIixtZXNzYWdlU2VxOlwiTXNnU2VxXCIsbWVzc2FnZVJhbmRvbTpcIk1zZ1JhbmRvbVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChyaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5CSUdfR1JPVVBfTE9OR19QT0xMSU5HfS4ke20uQ01ELkFWQ0hBVFJPT01fTE9OR19QT0xMfWB9LGJvZHk6e1VTUDoxLHN0YXJ0U2VxOjEsc3RhcnRCcm9hZGNhc3RTZXE6dm9pZCAwLGhvbGRUaW1lOjkwLGtleTp2b2lkIDAsc2ltcGxpZmllZE1lc3NhZ2U6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e1VTUDpcIlVTUFwifSxyZXNwb25zZTp7VG9Hcm91cElkOlwiZ3JvdXBJRFwiLFJzcEJyb2FkY2FzdE1zZ0xpc3Q6XCJicm9hZGNhc3RNZXNzYWdlTGlzdFwiLElzU3lzdGVtTXNnOlwiaXNTeXN0ZW1NZXNzYWdlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGFpLGZ1bmN0aW9uKGUpe2NvbnN0e2EyOnQsdGlueWlkOnMsLi4ub309ZTtyZXR1cm57aGVhZDp7Li4ubyxzZXJ2Y21kOmAke20uTkFNRS5CSUdfR1JPVVBfTE9OR19QT0xMSU5HX05PX0FVVEh9LiR7bS5DTUQuQVZDSEFUUk9PTV9MT05HX1BPTEx9YH0sYm9keTp7VVNQOjEsc3RhcnRTZXE6MSxob2xkVGltZTo5MCxrZXk6dm9pZCAwLHNpbXBsaWZpZWRNZXNzYWdlOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntVU1A6XCJVU1BcIn0scmVzcG9uc2U6e1RvR3JvdXBJZDpcImdyb3VwSURcIixSc3BCcm9hZGNhc3RNc2dMaXN0OlwiYnJvYWRjYXN0TWVzc2FnZUxpc3RcIixJc1N5c3RlbU1zZzpcImlzU3lzdGVtTWVzc2FnZVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh1aSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5HRVRfT05MSU5FX01FTUJFUl9OVU19YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDB9fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoZGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuU0VUX0dST1VQX0FUVFJJQlVURVN9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsZ3JvdXBBdHRyaWJ1dGVMaXN0OnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e2tleTpcImtleVwiLHZhbHVlOlwidmFsdWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQocGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuTU9ESUZZX0dST1VQX0FUVFJJQlVURVN9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsZ3JvdXBBdHRyaWJ1dGVMaXN0OnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e2tleTpcImtleVwiLHZhbHVlOlwidmFsdWVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoaGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuREVMRVRFX0dST1VQX0FUVFJJQlVURVN9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsZ3JvdXBBdHRyaWJ1dGVMaXN0OnZvaWQgMCxtYWluU2VxdWVuY2U6dm9pZCAwLGF2Q2hhdFJvb21LZXk6dm9pZCAwLGF0dHJpYnV0ZUNvbnRyb2w6W1wiUmFjZUNvbmZsaWN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e2tleTpcImtleVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChnaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5DTEVBUl9HUk9VUF9BVFRSSUJVVEVTfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLG1haW5TZXF1ZW5jZTp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsYXR0cmlidXRlQ29udHJvbDpbXCJSYWNlQ29uZmxpY3RcIl19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoX2ksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVBfQVRUUn0uJHttLkNNRC5HRVRfR1JPVVBfQVRUUklCVVRFU31gfSxib2R5Ontncm91cElEOnZvaWQgMCxhdkNoYXRSb29tS2V5OnZvaWQgMCxncm91cFR5cGU6MX0sa2V5TWFwOntyZXF1ZXN0OnthdkNoYXRSb29tS2V5OlwiS2V5XCIsZ3JvdXBUeXBlOlwiR3JvdXBUeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGZpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkdFVF9HUk9VUF9OT1RJRll9YH0sYm9keTp7bm90aWZ5VHlwZToxLGdyb3VwSUQ6XCJcIixiZWdpblRpbWU6MCxlbmRUaW1lOjAsbGltaXQ6MjB9LGtleU1hcDp7cmVxdWVzdDp7fSxyZXNwb25zZTp7TmV4dE1zZ1RpbWU6XCJuZXh0UmV2b2tlZFRpbWVcIixOb3RpZnlNc2dMaXN0Olwibm90aWZ5TGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChJaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5VUERBVEVfR1JPVVBfQ09VTlRFUn1gfSxib2R5Ontncm91cElEOnZvaWQgMCxjb3VudGVyTGlzdDp2b2lkIDAsYXZDaGF0Um9vbUtleTp2b2lkIDAsbW9kZTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7Y291bnRlckxpc3Q6XCJHcm91cENvdW50ZXJcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQ2ksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuR0VUX0dST1VQX0NPVU5URVJ9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsa2V5TGlzdDpbXSxhdkNoYXRSb29tS2V5OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0OntrZXlMaXN0OlwiR3JvdXBDb3VudGVyS2V5c1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChLaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUF9DT01NVU5JVFl9LiR7bS5DTUQuQ1JFQVRFX1RPUElDfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljTmFtZTp2b2lkIDAsYXZhdGFyOnZvaWQgMCxjdXN0b21EYXRhOnZvaWQgMCx0b3BpY0lEOnZvaWQgMCxub3RpZmljYXRpb246dm9pZCAwLGludHJvZHVjdGlvbjp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7YXZhdGFyOlwiRmFjZVVybFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChXaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUF9DT01NVU5JVFl9LiR7bS5DTUQuREVMRVRFX1RPUElDfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljSURMaXN0OnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont0b3BpY0lETGlzdDpcIlRvcGljSWRMaXN0XCJ9LHJlc3BvbnNlOntEZXN0cm95UmVzdWx0SXRlbTpcInJlc3VsdExpc3RcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoWWksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVBfQ09NTVVOSVRZfS4ke20uQ01ELlVQREFURV9UT1BJQ19QUk9GSUxFfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljSUQ6dm9pZCAwLGF2YXRhcjp2b2lkIDAsY3VzdG9tRGF0YTp2b2lkIDAsbm90aWZpY2F0aW9uOnZvaWQgMCxpbnRyb2R1Y3Rpb246dm9pZCAwLG11dGVBbGxNZW1iZXJzOnZvaWQgMCx0b3BpY05hbWU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e2F2YXRhcjpcIkZhY2VVcmxcIixtdXRlQWxsTWVtYmVyczpcIlNodXRVcEFsbE1lbWJlclwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChqaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUF9DT01NVU5JVFl9LiR7bS5DTUQuR0VUX1RPUElDX0xJU1R9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsdG9waWNJRExpc3Q6dm9pZCAwLE1lbWJlckluZm9GaWx0ZXI6W1wiTm9VbnJlYWRTZXFMaXN0XCJdfSxrZXlNYXA6e3JlcXVlc3Q6e3RvcGljSURMaXN0OlwiVG9waWNJZExpc3RcIn0scmVzcG9uc2U6e1RvcGljQW5kU2VsZkluZm86XCJ0b3BpY0luZm9MaXN0XCIsVG9waWNJbmZvOlwidG9waWNcIixHcm91cElEOlwiZ3JvdXBJRFwiLFNodXRVcFRpbWU6XCJtdXRlVGltZVwiLFNodXRVcEFsbEZsYWc6XCJtdXRlQWxsTWVtYmVyc1wiLExhc3RNc2dUaW1lOlwibGFzdE1lc3NhZ2VUaW1lXCIsTXNnU2VxOlwicmVhZGVkU2VxdWVuY2VcIixMYXN0TXNnU2VxOlwic2VxdWVuY2VcIixOb1VucmVhZFNlcUxpc3Q6XCJleGNsdWRlZFVucmVhZFNlcXVlbmNlTGlzdFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChUaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5HRVRfR1JPVVBfTUVNQkVSX0xJU1R9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsbGltaXQ6MCxvZmZzZXQ6dm9pZCAwLG5leHQ6dm9pZCAwLG1lbWJlclJvbGVGaWx0ZXI6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6W1wiUm9sZVwiLFwiTmFtZUNhcmRcIixcIlNodXRVcFVudGlsXCIsXCJKb2luVGltZVwiXSxtZW1iZXJDdXN0b21GaWVsZEZpbHRlcjp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7bWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXI6XCJBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlclwifSxyZXNwb25zZTp7QXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwiLEFwcERlZmluZWREYXRhRmlsdGVyX0dyb3VwTWVtYmVyOlwibWVtYmVyQ3VzdG9tRmllbGRGaWx0ZXJcIixNZW1iZXJMaXN0OlwibWVtYmVyc1wiLFNodXRVcFVudGlsOlwibXV0ZVVudGlsXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KHlpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQX0FWQ0hBVFJPT019LiR7bS5DTUQuR0VUX0FWQ0hBVFJPT01fTUVNQkVSX0xJU1R9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsb2Zmc2V0OnZvaWQgMCxmaWx0ZXI6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e29mZnNldDpcIlRpbWVzdGFtcFwiLGZpbHRlcjpcIk1hcmtcIn0scmVzcG9uc2U6e05leHRUaW1lc3RhbXA6XCJvZmZzZXRcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuR0VUX0dST1VQX01FTUJFUl9JTkZPfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwLG1lbWJlckluZm9GaWx0ZXI6dm9pZCAwLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiTWVtYmVyX0xpc3RfQWNjb3VudFwiLG1lbWJlckN1c3RvbUZpZWxkRmlsdGVyOlwiQXBwRGVmaW5lZERhdGFGaWx0ZXJfR3JvdXBNZW1iZXJcIn0scmVzcG9uc2U6e01lbWJlckxpc3Q6XCJtZW1iZXJzXCIsU2h1dFVwVW50aWw6XCJtdXRlVW50aWxcIixBcHBEZWZpbmVkRGF0YUZpbHRlcl9Hcm91cE1lbWJlcjpcIm1lbWJlckN1c3RvbUZpZWxkRmlsdGVyXCIsQXBwTWVtYmVyRGVmaW5lZERhdGE6XCJtZW1iZXJDdXN0b21GaWVsZFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChFaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5BRERfR1JPVVBfTUVNQkVSfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHNpbGVuY2U6dm9pZCAwLHVzZXJJRExpc3Q6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsdXNlcklETGlzdDpcIk1lbWJlckxpc3RcIn0scmVzcG9uc2U6e01lbWJlckxpc3Q6XCJtZW1iZXJzXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFNpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLkdST1VQfS4ke20uQ01ELkRFTEVURV9HUk9VUF9NRU1CRVJ9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAscmVhc29uOnZvaWQgMH0sa2V5TWFwOntyZXF1ZXN0Ont1c2VySURMaXN0OlwiTWVtYmVyVG9EZWxfQWNjb3VudFwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChMaSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUH0uJHttLkNNRC5CQU5fQVZDSEFUUk9PTV9NRU1CRVJ9YH0sYm9keTp7Z3JvdXBJRDp2b2lkIDAsdXNlcklETGlzdDp2b2lkIDAsZHVyYXRpb246dm9pZCAwLHJlYXNvbjpcIlwifSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRExpc3Q6XCJNZW1iZXJzX0FjY291bnRcIixkdXJhdGlvbjpcIkR1cmF0aW9uXCIscmVhc29uOlwiRGVzY3JpcHRpb25cIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoQWksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuR1JPVVB9LiR7bS5DTUQuTU9ESUZZX0dST1VQX01FTUJFUl9JTkZPfWB9LGJvZHk6e2dyb3VwSUQ6dm9pZCAwLHRvcGljSUQ6dm9pZCAwLHVzZXJJRDp2b2lkIDAsbWVzc2FnZVJlbWluZFR5cGU6dm9pZCAwLG5hbWVDYXJkOnZvaWQgMCxyb2xlOnZvaWQgMCxtZW1iZXJDdXN0b21GaWVsZDp2b2lkIDAsbXV0ZVRpbWU6dm9pZCAwfSxrZXlNYXA6e3JlcXVlc3Q6e3VzZXJJRDpcIk1lbWJlcl9BY2NvdW50XCIsbWVtYmVyQ3VzdG9tRmllbGQ6XCJBcHBNZW1iZXJEZWZpbmVkRGF0YVwiLG11dGVUaW1lOlwiU2h1dFVwVGltZVwiLG1lc3NhZ2VSZW1pbmRUeXBlOlwiTXNnRmxhZ1wifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh2aSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5HUk9VUF9BVkNIQVRST09NfS4ke20uQ01ELk1BUktfQVZDSEFUUk9PTV9NRU1CRVJfSU5GT31gfSxib2R5Ontncm91cElEOnZvaWQgMCxvcGVyYXRpb25UeXBlOjEsbWVtYmVyTGlzdDpbXX0sa2V5TWFwOntyZXF1ZXN0OntvcGVyYXRpb25UeXBlOlwiQ29tbWFuZFR5cGVcIixtZW1iZXJMaXN0OlwiTWVtYmVyTGlzdFwiLG1hcmtUeXBlOlwiTWFya3NcIix1c2VySUQ6XCJNZW1iZXJfQWNjb3VudFwifSxyZXNwb25zZTp7Q29tbWFuZFR5cGU6XCJvcGVyYXRpb25UeXBlXCIsTWFya3M6XCJtYXJrVHlwZVwiLE1lbWJlcl9BY2NvdW50OlwidXNlcklEXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KEdpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVH0uJHttLkNNRC5USU1fV0VCX1JFUE9SVF9WMn1gfSxib2R5OntoZWFkZXI6e30sZXZlbnQ6W10scXVhbGl0eTpbXX0sa2V5TWFwOntyZXF1ZXN0OntTREtUeXBlOlwic2RrX3R5cGVcIixTREtWZXJzaW9uOlwic2RrX3ZlcnNpb25cIixkZXZpY2VUeXBlOlwiZGV2aWNlX3R5cGVcIixwbGF0Zm9ybTpcInBsYXRmb3JtXCIsaW5zdGFuY2VJRDpcImluc3RhbmNlX2lkXCIsdHJhY2VJRDpcInRyYWNlX2lkXCIsU0RLQXBwSUQ6XCJzZGtfYXBwX2lkXCIsdXNlcklEOlwidXNlcl9pZFwiLHRpbnlJRDpcInRpbnlfaWRcIixleHRlbnNpb246XCJleHRlbnNpb25cIix0aW1lc3RhbXA6XCJ0aW1lc3RhbXBcIixuZXR3b3JrVHlwZTpcIm5ldHdvcmtfdHlwZVwiLGV2ZW50VHlwZTpcImV2ZW50X3R5cGVcIixjb2RlOlwiZXJyb3JfY29kZVwiLG1lc3NhZ2U6XCJlcnJvcl9tZXNzYWdlXCIsbW9yZU1lc3NhZ2U6XCJtb3JlX21lc3NhZ2VcIixkdXBsaWNhdGU6XCJkdXBsaWNhdGVcIixjb3N0VGltZTpcImNvc3RfdGltZVwiLGxldmVsOlwibGV2ZWxcIixxdWFsaXR5VHlwZTpcInF1YWxpdHlfdHlwZVwiLHJlcG9ydEluZGV4OlwicmVwb3J0X2luZGV4XCIsd2hvbGVQZXJpb2Q6XCJ3aG9sZV9wZXJpb2RcIix0b3RhbENvdW50OlwidG90YWxfY291bnRcIixydHRDb3VudDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mUmVxdWVzdDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuMVNlY29uZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixwZXJjZW50T2ZDb3VudExlc3NUaGFuMVNlY29uZDpcInBlcmNlbnRfYnVzaW5lc3NcIixjb3VudExlc3NUaGFuM1NlY29uZDpcInN1Y2Nlc3NfY291bnRfcGxhdGZvcm1cIixwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZkJ1c2luZXNzOlwic3VjY2Vzc19jb3VudF9idXNpbmVzc1wiLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpcInBlcmNlbnRfYnVzaW5lc3NcIixzdWNjZXNzQ291bnRPZlBsYXRmb3JtOlwic3VjY2Vzc19jb3VudF9wbGF0Zm9ybVwiLHN1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybTpcInBlcmNlbnRfcGxhdGZvcm1cIixzdWNjZXNzQ291bnRPZk1lc3NhZ2VSZWNlaXZlZDpcInN1Y2Nlc3NfY291bnRfYnVzaW5lc3NcIixzdWNjZXNzUmF0ZU9mTWVzc2FnZVJlY2VpdmVkOlwicGVyY2VudF9idXNpbmVzc1wiLGF2Z1JUVDpcImF2ZXJhZ2VfdmFsdWVcIixhdmdEZWxheTpcImF2ZXJhZ2VfdmFsdWVcIixhdmdWYWx1ZTpcImF2ZXJhZ2VfdmFsdWVcIix1aVBsYXRmb3JtOlwidWlfcGxhdGZvcm1cIn19fX0ocykpLHRoaXMuX2NvbmZpZ01hcC5zZXQoVWksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSEVBUlRCRUFUfS4ke20uQ01ELkFMSVZFfWB9LGJvZHk6e319fShlKSksdGhpcy5fY29uZmlnTWFwLnNldChraSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9PUEVOX1BVU0h9LiR7bS5DTUQuTUVTU0FHRV9QVVNIfWB9LGJvZHk6e30sa2V5TWFwOntyZXNwb25zZTp7QzJjTXNnQXJyYXk6XCJDMkNNZXNzYWdlQXJyYXlcIixHcm91cE1zZ0FycmF5OlwiZ3JvdXBNZXNzYWdlQXJyYXlcIixHcm91cFRpcHM6XCJncm91cFRpcHNcIixDMmNOb3RpZnlNc2dBcnJheTpcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLEMyY01zZ0luZm86XCJDMkNSZWFkUmVjZWlwdEFycmF5XCIsQ2xpZW50U2VxOlwiY2xpZW50U2VxdWVuY2VcIixNc2dQcmlvcml0eTpcInByaW9yaXR5XCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixNc2dDb250ZW50OlwiY29udGVudFwiLE1zZ1R5cGU6XCJ0eXBlXCIsTXNnQm9keTpcImVsZW1lbnRzXCIsVG9Hcm91cElkOlwidG9cIixEZXNjOlwiZGVzY3JpcHRpb25cIixFeHQ6XCJleHRlbnNpb25cIixJc1N5bmNNc2c6XCJpc1N5bmNNZXNzYWdlXCIsRmxhZzpcIm5lZWRTeW5jXCIsTmVlZEFjazpcIm5lZWRBY2tcIixQZW5kZW5jeUFkZF9BY2NvdW50OlwidXNlcklEXCIsUHJvZmlsZUltTmljazpcIm5pY2tcIixQZW5kZW5jeVR5cGU6XCJhcHBsaWNhdGlvblR5cGVcIixDMkNSZWFkQWxsTXNnOlwicmVhZEFsbEMyQ01lc3NhZ2VcIixJc05lZWRSZWFkUmVjZWlwdDpcIm5lZWRSZWFkUmVjZWlwdFwiLFN0YXR1czpcInN0YXR1c1R5cGVcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoUGksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fT1BFTl9QVVNIfS4ke20uQ01ELk1VTFRJX01FU1NBR0VfUFVTSH1gfSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e0dyb3VwTXNnQXJyYXk6XCJncm91cE1lc3NhZ2VBcnJheVwiLEdyb3VwVGlwczpcImdyb3VwVGlwc1wiLENsaWVudFNlcTpcImNsaWVudFNlcXVlbmNlXCIsTXNnUHJpb3JpdHk6XCJwcmlvcml0eVwiLE5vdGljZVNlcTpcIm5vdGljZVNlcXVlbmNlXCIsTXNnQ29udGVudDpcImNvbnRlbnRcIixNc2dUeXBlOlwidHlwZVwiLE1zZ0JvZHk6XCJlbGVtZW50c1wiLFRvR3JvdXBJZDpcInRvXCIsRGVzYzpcImRlc2NyaXB0aW9uXCIsRXh0OlwiZXh0ZW5zaW9uXCIsSXNTeW5jTXNnOlwiaXNTeW5jTWVzc2FnZVwiLEZsYWc6XCJuZWVkU3luY1wiLE5lZWRBY2s6XCJuZWVkQWNrXCIsUGVuZGVuY3lUeXBlOlwiYXBwbGljYXRpb25UeXBlXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGJpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLk9QRU5fSU19LiR7bS5DTUQuTUVTU0FHRV9QVVNIX0FDS31gfSxib2R5OntzZXNzaW9uRGF0YTp2b2lkIDB9LGtleU1hcDp7cmVxdWVzdDp7c2Vzc2lvbkRhdGE6XCJTZXNzaW9uRGF0YVwifX19fShlKSksdGhpcy5fY29uZmlnTWFwLnNldCh3aSxmdW5jdGlvbihlKXtyZXR1cm57aGVhZDp7Li4uZSxzZXJ2Y21kOmAke20uTkFNRS5JTV9PUEVOX1NUQVRVU30uJHttLkNNRC5TVEFUVVNfRk9SQ0VfT0ZGTElORX1gfSxib2R5Ont9LGtleU1hcDp7cmVzcG9uc2U6e0MyY05vdGlmeU1zZ0FycmF5OlwiQzJDTm90aWZ5TWVzc2FnZUFycmF5XCIsTm90aWNlU2VxOlwibm90aWNlU2VxdWVuY2VcIixLaWNrb3V0TXNnTm90aWZ5Olwia2lja291dE1zZ05vdGlmeVwiLE5ld0luc3RJbmZvOlwibmV3SW5zdGFuY2VJbmZvXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KCRpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX0xPTkdfTUVTU0FHRX0uJHttLkNNRC5ET1dOTE9BRF9NRVJHRVJfTUVTU0FHRX1gfSxib2R5Ontkb3dubG9hZEtleTpcIlwifSxrZXlNYXA6e3Jlc3BvbnNlOntEYXRhOlwiZGF0YVwiLERlc2M6XCJkZXNjcmlwdGlvblwiLEV4dDpcImV4dGVuc2lvblwiLERvd25sb2FkX0ZsYWc6XCJkb3dubG9hZEZsYWdcIixUaHVtYlVVSUQ6XCJ0aHVtYlVVSURcIixWaWRlb1VVSUQ6XCJ2aWRlb1VVSURcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQoRmksZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fTE9OR19NRVNTQUdFfS4ke20uQ01ELlVQTE9BRF9NRVJHRVJfTUVTU0FHRX1gfSxib2R5OnttZXNzYWdlTGlzdDpbXX0sa2V5TWFwOntyZXF1ZXN0Ontmcm9tQWNjb3VudDpcIkZyb21fQWNjb3VudFwiLHRvQWNjb3VudDpcIlRvX0FjY291bnRcIixtc2dUaW1lU3RhbXA6XCJNc2dUaW1lU3RhbXBcIixtc2dTZXE6XCJNc2dTZXFcIixtc2dSYW5kb206XCJNc2dSYW5kb21cIixtc2dCb2R5OlwiTXNnQm9keVwiLHR5cGU6XCJNc2dUeXBlXCIsY29udGVudDpcIk1zZ0NvbnRlbnRcIixkYXRhOlwiRGF0YVwiLGRlc2NyaXB0aW9uOlwiRGVzY1wiLGV4dGVuc2lvbjpcIkV4dFwiLHNpemVUeXBlOlwiVHlwZVwiLHV1aWQ6XCJVVUlEXCIsdXJsOlwiXCIsaW1hZ2VVcmw6XCJVUkxcIixmaWxlVXJsOlwiVXJsXCIscmVtb3RlQXVkaW9Vcmw6XCJVcmxcIixyZW1vdGVWaWRlb1VybDpcIlZpZGVvVXJsXCIsdGh1bWJVVUlEOlwiVGh1bWJVVUlEXCIsdmlkZW9VVUlEOlwiVmlkZW9VVUlEXCIsdmlkZW9Vcmw6XCJcIixkb3dubG9hZEZsYWc6XCJEb3dubG9hZF9GbGFnXCIsZnJvbTpcIkZyb21fQWNjb3VudFwiLHRpbWU6XCJNc2dUaW1lU3RhbXBcIixtZXNzYWdlUmFuZG9tOlwiTXNnUmFuZG9tXCIsbWVzc2FnZVNlcXVlbmNlOlwiTXNnU2VxXCIsZWxlbWVudHM6XCJNc2dCb2R5XCIsY2xpZW50U2VxdWVuY2U6XCJDbGllbnRTZXFcIixwYXlsb2FkOlwiTXNnQ29udGVudFwiLG1lc3NhZ2VMaXN0OlwiTXNnTGlzdFwiLG1lc3NhZ2VOdW1iZXI6XCJNc2dOdW1cIixhYnN0cmFjdExpc3Q6XCJBYnN0cmFjdExpc3RcIixtZXNzYWdlQm9keTpcIk1zZ0JvZHlcIn19fX0oZSkpLHRoaXMuX2NvbmZpZ01hcC5zZXQodG4sZnVuY3Rpb24oZSl7cmV0dXJue2hlYWQ6ey4uLmUsc2VydmNtZDpgJHttLk5BTUUuSU1fT1BFTl9TVEFUVVN9LiR7bS5DTUQuU0VUX1RPS0VOfWB9LGJvZHk6e3Rva2VuSUQ6XCJcIixwdXNoTXNnOjAsc2RrQXBwSUQ6MCxidXNpbmVzc0lEOlwiXCIsZGV2aWNlQnJhbmQ6XCJcIixkZXZpY2VUb2tlbjpcIlwiLGlzVHBuczowLGlzV2ViVW5pYXBwOjB9LGtleU1hcDp7cmVxdWVzdDp7dG9rZW5JRDpcIlRva2VuSURcIixwdXNoTXNnOlwiUHVzaE1zZ1wiLHNka0FwcElEOlwiRW50ZXJWZXJzaW9uXCIsYnVzaW5lc3NJRDpcIkJ1c2lJRFwiLGRldmljZUJyYW5kOlwiSW5zdFR5cGVcIixkZXZpY2VUb2tlbjpcIlZhclRva2VuXCIsaXNUcG5zOlwiSXNUcG5zXCJ9fX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KGVuLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVFVTfS4ke20uQ01ELlNUQVRfRk9SRUdST1VORH1gfSxib2R5Ontpc1dlYlVuaWFwcDowfX19KGUpKSx0aGlzLl9jb25maWdNYXAuc2V0KFFpLGZ1bmN0aW9uKGUpe3JldHVybntoZWFkOnsuLi5lLHNlcnZjbWQ6YCR7bS5OQU1FLklNX09QRU5fU1RBVFVTfS4ke20uQ01ELlNUQVRfQkFDS0dST1VORH1gfSxib2R5OntDMkNVbnJlYWQ6MCxHcm91cFVucmVhZDowLGlzV2ViVW5pYXBwOjB9LGtleU1hcDp7cmVxdWVzdDp7YzJjVW5yZWFkQ291bnQ6XCJDMmNVbnJlYWRcIixncm91cFVucmVhZENvdW50OlwiR3JwVW5yZWFkXCJ9fX19KGUpKX1oYXMoZSl7cmV0dXJuIHRoaXMuX2NvbmZpZ01hcC5oYXMoZSl9Z2V0KGUpe3JldHVybiB0aGlzLl9jb25maWdNYXAuZ2V0KGUpfXVwZGF0ZSgpe3RoaXMuX2ZpbGxDb25maWdNYXAoKX1nZXRLZXlNYXAoZSl7cmV0dXJuIHRoaXMuaGFzKGUpP3RoaXMuZ2V0KGUpLmtleU1hcHx8e306KF9lLncoYCR7dGhpcy5fbn0uZ2V0S2V5TWFwIHVua25vd24gcHJvdG9jb2xOYW1lOiR7ZX1gKSx7fSl9Z2V0UHJvdG9jb2xEYXRhKGUpe2NvbnN0e3Byb3RvY29sTmFtZTp0LHJlcXVlc3REYXRhOnN9PWUsbz10aGlzLmdldCh0KTtsZXQgaT1udWxsO2lmKHMpe2NvbnN0IGU9dGhpcy5fc2ltcGxlRGVlcENvcHkobyksdD10aGlzLl91cGRhdGVTZXJ2aWNlKHMsZSksbj10LmJvZHkscj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcihjb25zdCBvIGluIG4paWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykpe2lmKHJbb109bltvXSx2b2lkIDA9PT1zW29dKWNvbnRpbnVlO3Jbb109c1tvXX10LmJvZHk9cixpPXRoaXMuX2dldFVwbGlua0RhdGEodCl9ZWxzZSBpPXRoaXMuX2dldFVwbGlua0RhdGEobyk7cmV0dXJuIGl9X2dldFVwbGlua0RhdGEoZSl7Y29uc3QgdD10aGlzLl9yZXF1ZXN0RGF0YUNsZWFuZXIoZSkscz1ndCh0LmhlYWQpLG89X2EodC5ib2R5LHRoaXMuX2dldFJlcXVlc3RLZXlNYXAocykpO3JldHVybiB0LmJvZHk9byx0fV91cGRhdGVTZXJ2aWNlKGUsdCl7Y29uc3Qgcz1ndCh0LmhlYWQpO2lmKHRoaXMuX2lzRnJvbUdyb3VwUmVxdWVzdCh0KSl7bGV0e3R5cGU6byxncm91cElEOmksZ3JvdXBJRExpc3Q6bj1bXX09ZTt3ZShpKSYmKGk9blswXXx8XCJcIiksc3Qoe3R5cGU6byxncm91cElEOml9KSYmKHQuaGVhZC5zZXJ2Y21kPWAke20uTkFNRS5HUk9VUF9DT01NVU5JVFl9LiR7c31gKX1yZXR1cm4gdH1faXNGcm9tR3JvdXBSZXF1ZXN0KGUpe3JldHVybiBlLmhlYWQuc2VydmNtZC5pbmNsdWRlcyhtLk5BTUUuR1JPVVApfHxlLmhlYWQuc2VydmNtZC5pbmNsdWRlcyhtLk5BTUUuR1JPVVBfQVRUUil9X2dldFJlcXVlc3RLZXlNYXAoZSl7Y29uc3QgdD10aGlzLmdldEtleU1hcChlKTtyZXR1cm57Li4ucGEucmVxdWVzdCwuLi50LnJlcXVlc3R9fV9yZXF1ZXN0RGF0YUNsZWFuZXIoZSl7Y29uc3QgdD1BcnJheS5pc0FycmF5KGUpP1tdOk9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKGNvbnN0IHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmVmUocykmJm51bGwhPT1lW3NdJiZ2b2lkIDAhPT1lW3NdJiYoXCJvYmplY3RcIiE9dHlwZW9mIGVbc10/dFtzXT1lW3NdOnRbc109dGhpcy5fcmVxdWVzdERhdGFDbGVhbmVyLmJpbmQodGhpcykoZVtzXSkpO3JldHVybiB0fV9zaW1wbGVEZWVwQ29weShlKXtjb25zdCB0PU9iamVjdC5rZXlzKGUpLHM9e307bGV0IG87Zm9yKGxldCBpPTAsbj10Lmxlbmd0aDtpPG47aSsrKW89dFtpXSxiZShlW29dKT9zW29dPUFycmF5LmZyb20oZVtvXSk6a2UoZVtvXSk/c1tvXT10aGlzLl9zaW1wbGVEZWVwQ29weShlW29dKTpzW29dPWVbb107cmV0dXJuIHN9fWNvbnN0IE5hPVtiaV07Y2xhc3MgUmF7Y29uc3RydWN0b3IoZSl7dGhpcy5fc2Vzc2lvbk1vZHVsZT1lLHRoaXMuX249XCJEb3dubGlua0hhbmRsZXJcIix0aGlzLl9ldmVudEhhbmRsZXJNYXA9bmV3IE1hcCx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiQzJDTWVzc2FnZUFycmF5XCIsdGhpcy5fYzJjTWVzc2FnZUFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwiZ3JvdXBNZXNzYWdlQXJyYXlcIix0aGlzLl9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImdyb3VwVGlwc1wiLHRoaXMuX2dyb3VwVGlwc0hhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcIkMyQ05vdGlmeU1lc3NhZ2VBcnJheVwiLHRoaXMuX0MyQ05vdGlmeU1lc3NhZ2VBcnJheUhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcIkMyQ1JlYWRSZWNlaXB0QXJyYXlcIix0aGlzLl9DMkNSZWFkUmVjZWlwdEFycmF5SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwicHJvZmlsZU1vZGlmeVwiLHRoaXMuX3Byb2ZpbGVIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJmcmllbmRMaXN0TW9kXCIsdGhpcy5fcmVsYXRpb25DaGFpbkhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcInJlY2VudENvbnRhY3RNb2RcIix0aGlzLl9yZWNlbnRDb250YWN0SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwicmVhZEFsbEMyQ01lc3NhZ2VcIix0aGlzLl9hbGxNZXNzYWdlUmVhZEhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImMyY01lc3NhZ2VNb2RpZmllZFwiLHRoaXMuX2MyY01lc3NhZ2VNb2RpZmllZEhhbmRsZXIuYmluZCh0aGlzKSksdGhpcy5fZXZlbnRIYW5kbGVyTWFwLnNldChcImdyb3VwTWVzc2FnZU1vZGlmaWVkXCIsdGhpcy5fZ3JvdXBNZXNzYWdlTW9kaWZpZWRIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5zZXQoXCJ1c2VyU3RhdHVzTGlzdFwiLHRoaXMuX3VzZXJTdGF0dXNMaXN0SGFuZGxlci5iaW5kKHRoaXMpKSx0aGlzLl9ldmVudEhhbmRsZXJNYXAuc2V0KFwibWVzc2FnZUV4dGVuc2lvbk5vdGlmeVwiLHRoaXMuX21lc3NhZ2VFeHRlbnNpb25Ob3RpZnlIYW5kbGVyLmJpbmQodGhpcykpLHRoaXMuX2tleXM9Wy4uLnRoaXMuX2V2ZW50SGFuZGxlck1hcC5rZXlzKCldfV9jMmNNZXNzYWdlQXJyYXlIYW5kbGVyKGUpe2NvbnN0IHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUobHMpO2lmKHQpe2lmKGUuZGF0YUxpc3QuZm9yRWFjaChlPT57aWYoMT09PWUuaXNTeW5jTWVzc2FnZSl7Y29uc3QgdD1lLmZyb207ZS5mcm9tPWUudG8sZS50bz10fX0pLDE9PT1lLm5lZWRTeW5jKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShEcykuc3RhcnRPbmxpbmVTeW5jKCl9dC5vbk5ld0MyQ01lc3NhZ2Uoe2RhdGFMaXN0OmUuZGF0YUxpc3QsaXNJbnN0YW50TWVzc2FnZTohMH0pfX1fYzJjTWVzc2FnZU1vZGlmaWVkSGFuZGxlcihlKXtjb25zdCB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGxzKTt0JiZ0Lm9uQzJDTWVzc2FnZU1vZGlmaWVkKGUpfV9ncm91cE1lc3NhZ2VBcnJheUhhbmRsZXIoZSl7Y29uc3QgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShkcyk7dCYmdC5vbk5ld0dyb3VwTWVzc2FnZSh7ZXZlbnQ6ZS5ldmVudCxkYXRhTGlzdDplLmRhdGFMaXN0LGlzSW5zdGFudE1lc3NhZ2U6ITB9KX1fZ3JvdXBNZXNzYWdlTW9kaWZpZWRIYW5kbGVyKGUpe2NvbnN0IHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoZHMpO3QmJnQub25Hcm91cE1lc3NhZ2VNb2RpZmllZChlKX1fZ3JvdXBUaXBzSGFuZGxlcihlKXtjb25zdCB0PXRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGRzKTtpZighdClyZXR1cm47Y29uc3R7ZXZlbnQ6cyxkYXRhTGlzdDpvLGlzSW5zdGFudE1lc3NhZ2U6aT0hMCxpc1N5bmNpbmdFbmRlZDpufT1lO3N3aXRjaChzKXtjYXNlIDQ6Y2FzZSA2OnQub25OZXdHcm91cFRpcHMoe2V2ZW50OnMsZGF0YUxpc3Q6b30pO2JyZWFrO2Nhc2UgNTpmb3IobGV0IGU9MDtlPG8ubGVuZ3RoO2UrKylpZihiZShvW2VdLmVsZW1lbnRzLnJldm9rZWRJbmZvcykpdC5vbkdyb3VwTWVzc2FnZVJldm9rZWQoe2RhdGFMaXN0Om99KTtlbHNlIGlmKGJlKG9bZV0uZWxlbWVudHMuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZSkpdC5vbkdyb3VwTWVzc2FnZVJlYWROb3RpY2Uoe2RhdGFMaXN0Om99KTtlbHNle2lmKCFiZShvW2VdLmVsZW1lbnRzLnJlYWRSZWNlaXB0TGlzdCkpe3Qub25OZXdHcm91cFN5c3RlbU5vdGljZSh7ZGF0YUxpc3Q6byxpc0luc3RhbnRNZXNzYWdlOmksaXNTeW5jaW5nRW5kZWQ6bn0pO2JyZWFrfXQub25SZWFkUmVjZWlwdExpc3Qoe2RhdGFMaXN0Om99KX1icmVhaztjYXNlIDEyOnRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKF9zKS5vbk5ld0dyb3VwQXRUaXBzKHtkYXRhTGlzdDpvfSk7YnJlYWs7ZGVmYXVsdDpfZS5sKGAke3RoaXMuX259Ll9ncm91cFRpcHNIYW5kbGVyIHVua25vd24gZXZlbnQ6JHtzfSBkYXRhTGlzdDpgLG8pfX1fQzJDTm90aWZ5TWVzc2FnZUFycmF5SGFuZGxlcihlKXtjb25zdHtkYXRhTGlzdDp0fT1lO2lmKCFiZSh0KSlyZXR1cm47Y29uc3Qgcz10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShscyk7dC5mb3JFYWNoKGU9PntpZihQZShlKSlpZihlLmhhc093blByb3BlcnR5KFwia2lja291dE1zZ05vdGlmeVwiKSl7Y29uc3R7a2lja291dE1zZ05vdGlmeTp7a2lja1R5cGU6dCxuZXdJbnN0YW5jZUluZm86cz17fX19PWU7MT09PXQ/dGhpcy5fc2Vzc2lvbk1vZHVsZS5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChzKToyPT09dD90aGlzLl9zZXNzaW9uTW9kdWxlLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQocyk6Mz09PXQmJnRoaXMuX3Nlc3Npb25Nb2R1bGUub25SZXN0QXBpS2lja2VkT3V0KHMpfWVsc2UgaWYoZS5oYXNPd25Qcm9wZXJ0eShcImMyY01lc3NhZ2VSZXZva2VkTm90aWZ5XCIpKXMmJnMub25DMkNNZXNzYWdlUmV2b2tlZCh7ZGF0YUxpc3Q6dH0pO2Vsc2UgaWYoZS5oYXNPd25Qcm9wZXJ0eShcImMyY01lc3NhZ2VSZWFkUmVjZWlwdFwiKSlzJiZzLm9uQzJDTWVzc2FnZVJlYWRSZWNlaXB0KHtkYXRhTGlzdDp0fSk7ZWxzZSBpZihlLmhhc093blByb3BlcnR5KFwiYzJjTWVzc2FnZVJlYWROb3RpY2VcIikpcyYmcy5vbkMyQ01lc3NhZ2VSZWFkTm90aWNlKHtkYXRhTGlzdDp0fSk7ZWxzZSBpZihlLmhhc093blByb3BlcnR5KFwibXV0ZU5vdGlmaWNhdGlvbnNTeW5jXCIpKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShfcykub25DMkNNZXNzYWdlUmVtaW5kVHlwZVN5bmNlZCh7ZGF0YUxpc3Q6dH0pfX0pfV9DMkNSZWFkUmVjZWlwdEFycmF5SGFuZGxlcihlKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShscykub25SZWFkUmVjZWlwdExpc3QoZSl9X3Byb2ZpbGVIYW5kbGVyKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGNzKS5vblByb2ZpbGVNb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pO2NvbnN0IHQ9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUocHMpO3QmJnQub25GcmllbmRQcm9maWxlTW9kaWZpZWQoe2RhdGFMaXN0OmUuZGF0YUxpc3R9KX1fcmVsYXRpb25DaGFpbkhhbmRsZXIoZSl7dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoY3MpLm9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKHtkYXRhTGlzdDplLmRhdGFMaXN0fSk7Y29uc3QgdD10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShwcyk7dCYmdC5vblJlbGF0aW9uQ2hhaW5Nb2RpZmllZCh7ZGF0YUxpc3Q6ZS5kYXRhTGlzdH0pfV9yZWNlbnRDb250YWN0SGFuZGxlcihlKXtjb25zdHtkYXRhTGlzdDp0fT1lO2lmKCFiZSh0KSlyZXR1cm47Y29uc3Qgcz10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShfcyk7cyYmdC5mb3JFYWNoKGU9Pntjb25zdHtwdXNoVHlwZTp0fT1lO2lmKDE9PT10KXtjb25zdHtyZWNlbnRDb250YWN0RGVsZXRlSXRlbTp0fT1lO3Mub25Db252ZXJzYXRpb25EZWxldGVkKHQucmVjZW50Q29udGFjdExpc3QpfWVsc2UgaWYoMj09PXQpe2NvbnN0e3JlY2VudENvbnRhY3RUb3BJdGVtOnR9PWU7cy5vbkNvbnZlcnNhdGlvblBpbm5lZCh0LnJlY2VudENvbnRhY3RMaXN0KX1lbHNlIGlmKDM9PT10KXtjb25zdHtyZWNlbnRDb250YWN0VG9wSXRlbTp0fT1lO3Mub25Db252ZXJzYXRpb25VbnBpbm5lZCh0LnJlY2VudENvbnRhY3RMaXN0KX1lbHNlIGlmKDQ9PT10KXtjb25zdHtyZWNlbnRDb250YWN0TWFya0NvbnRhY3Q6dH09ZTtzLm9uQ29udmVyc2F0aW9uTWFya1VwZGF0ZWQodC5yZWNlbnRDb250YWN0TWFya0NvbnRhY3RJdGVtKX1lbHNlIGlmKDU9PT10KXtjb25zdHtyZWNlbnRDb250YWN0Q3JlYXRlQ29udGFjdEdyb3VwOnR9PWU7cy5vbkNvbnZlcnNhdGlvbkdyb3VwQ3JlYXRlZCh0Lm1zZ0NvbnRhY3RHcm91cENvbnRhY3RJdGVtKX1lbHNlIGlmKDY9PT10KXtjb25zdHtyZWNlbnRDb250YWN0RGVsQ29udGFjdEdyb3VwOnR9PWU7cy5vbkNvbnZlcnNhdGlvbkdyb3VwRGVsZXRlZCh0Lm1zZ0dyb3VwSXRlbSl9ZWxzZSBpZig3PT09dCl7Y29uc3R7cmVjZW50Q29udGFjdFVwZGF0ZUNvbnRhY3RHcm91cDp0fT1lLHt1cGRhdGVUeXBlOm8sbXNnVXBkYXRlR3JvdXA6aSxtc2dVcGRhdGVDb250YWN0Om59PXQ7aWYoMT09PW8pe2NvbnN0e3VwZGF0ZUdyb3VwVHlwZTplfT1pOzE9PT1lP3Mub25Db252ZXJzYXRpb25Hcm91cE5hbWVVcGRhdGVkKGkpOjI9PT1lJiZzLm9uQ29udmVyc2F0aW9uSW5Hcm91cFVwZGF0ZWQoaSl9ZWxzZSAyPT09byYmcy5vbkNvbnZlcnNhdGlvbkFkZGVkVG9PckRlbGV0ZWRGcm9tR3JvdXAobil9fSl9X2FsbE1lc3NhZ2VSZWFkSGFuZGxlcihlKXtjb25zdHtkYXRhTGlzdDp0fT1lLHM9dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoX3MpO3MmJnMub25QdXNoZWRBbGxNZXNzYWdlUmVhZCh0KX1fdXNlclN0YXR1c0xpc3RIYW5kbGVyKGUpe3RoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TW9kdWxlKGNzKS5vblVzZXJTdGF0dXNVcGRhdGVkKGUpfV9tZXNzYWdlRXh0ZW5zaW9uTm90aWZ5SGFuZGxlcihlKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZSh1cykub25NZXNzYWdlRXh0ZW5zaW9uTm90aWZ5KGUpfW9uTWVzc2FnZShlKXtjb25zdHtib2R5OnR9PWU7aWYoIXRoaXMuX2ZpbHRlck1lc3NhZ2VGcm9tSU1PcGVuUHVzaChlKSlyZXR1cm47Y29uc3R7ZXZlbnRBcnJheTpzLGlzSW5zdGFudE1lc3NhZ2U6byxpc1N5bmNpbmdFbmRlZDppLG5lZWRTeW5jOm59PXQ7aWYoIWJlKHMpKXJldHVybjtsZXQgcj1udWxsLGE9bnVsbCx1PTA7Zm9yKGxldCBjPTAsbD1zLmxlbmd0aDtjPGw7YysrKXtyPXNbY10sdT1yLmV2ZW50O2NvbnN0IGU9T2JqZWN0LmtleXMocikuZmluZChlPT4tMSE9PXRoaXMuX2tleXMuaW5kZXhPZihlKSk7ZT8oYT0xND09PXU/e3JlYWRBbGxDMkNNZXNzYWdlOnJbZV0sZ3JvdXBNZXNzYWdlUmVhZEluZm9MaXN0OnIuZ3JvdXBNZXNzYWdlUmVhZE5vdGljZXx8W119OjE2PT09dT97dXNlcklEOnIudXNlcklELHJlYWRSZWNlaXB0TGlzdDpyW2VdfTpyW2VdLHRoaXMuX2V2ZW50SGFuZGxlck1hcC5nZXQoZSkoe2V2ZW50OnUsZGF0YUxpc3Q6YSxpc0luc3RhbnRNZXNzYWdlOm8saXNTeW5jaW5nRW5kZWQ6aSxuZWVkU3luYzpufSkpOl9lLmwoYCR7dGhpcy5fbn0ub25NZXNzYWdlIHVua25vd24gZXZlbnRJdGVtOiR7cn1gKX19X2ZpbHRlck1lc3NhZ2VGcm9tSU1PcGVuUHVzaChlKXtjb25zdHtoZWFkOnQsYm9keTpzfT1lLHtzZXJ2Y21kOm99PXQ7bGV0IGk9ITE7aWYod2Uobyl8fChpPW8uaW5jbHVkZXMobS5OQU1FLklNX0NPTkZJR19NQU5BR0VSKXx8by5pbmNsdWRlcyhtLk5BTUUuT1ZFUkxPQURfUFVTSCl8fG8uaW5jbHVkZXMobS5OQU1FLlNUQVRfU0VSVklDRSkpLCFpKXJldHVybiEwO2lmKG8uaW5jbHVkZXMobS5DTUQuUFVTSEVEX0NMT1VEX0NPTlRST0xfQ09ORklHKSl7dGhpcy5fc2Vzc2lvbk1vZHVsZS5nZXRNb2R1bGUoQXMpLm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnKHMpfWVsc2UgaWYoby5pbmNsdWRlcyhtLkNNRC5QVVNIRURfQ09NTUVSQ0lBTF9DT05GSUcpKXt0aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShPcykub25QdXNoZWRDb25maWcocyl9ZWxzZSBpZihvLmluY2x1ZGVzKG0uQ01ELk9WRVJMT0FEX05PVElGWSkpdGhpcy5fc2Vzc2lvbk1vZHVsZS5vblB1c2hlZFNlcnZlck92ZXJsb2FkKHMpO2Vsc2UgaWYoby5pbmNsdWRlcyhtLkNNRC5LSUNLX09USEVSKSl7Y29uc3QgZT1EYXRlLm5vdygpO3RoaXMuX3Nlc3Npb25Nb2R1bGUucmVMb2dpbk9uS2lja090aGVyKCk7Y29uc3QgdD1uZXcgQ24oXCJraWNrT3RoZXJcIikscz10aGlzLl9zZXNzaW9uTW9kdWxlLmdldE1vZHVsZShycykuZ2V0TGFzdFdzSGVsbG9UcygpLG89ZS1zO3Quc2V0TWVzc2FnZShgbGFzdCB3c2hlbGxvIHRpbWU6JHtzfSBkaWZmOiR7b31tc2ApLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nlc3Npb25Nb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCl9cmV0dXJuITF9fWNvbnN0IE9hPVt7Y21kOm0uQ01ELkdFVF9HUk9VUF9JTkZPLGludGVydmFsOjEsY291bnQ6MjB9LHtjbWQ6bS5DTUQuR0VUX0FWQ0hBVFJPT01fTUVNQkVSX0xJU1QsaW50ZXJ2YWw6Myxjb3VudDoxfSx7Y21kOm0uQ01ELkdFVF9HUk9VUF9BUFBMSUNBVElPTixpbnRlcnZhbDoxLGNvdW50OjE1fSx7Y21kOm0uQ01ELkdFVF9UT1BJQ19MSVNULGludGVydmFsOjEsY291bnQ6MTB9LHtjbWQ6bS5DTUQuU0VUX0dST1VQX0FUVFJJQlVURVMsaW50ZXJ2YWw6NSxjb3VudDoxMH0se2NtZDptLkNNRC5NT0RJRllfR1JPVVBfQVRUUklCVVRFUyxpbnRlcnZhbDo1LGNvdW50OjEwfSx7Y21kOm0uQ01ELkRFTEVURV9HUk9VUF9BVFRSSUJVVEVTLGludGVydmFsOjUsY291bnQ6MTB9LHtjbWQ6bS5DTUQuQ0xFQVJfR1JPVVBfQVRUUklCVVRFUyxpbnRlcnZhbDo1LGNvdW50OjEwfSx7Y21kOm0uQ01ELkdFVF9HUk9VUF9BVFRSSUJVVEVTLGludGVydmFsOjUsY291bnQ6MjB9LHtjbWQ6bS5DTUQuVVBEQVRFX0dST1VQX0NPVU5URVIsaW50ZXJ2YWw6NSxjb3VudDoyMH0se2NtZDptLkNNRC5HRVRfR1JPVVBfQ09VTlRFUixpbnRlcnZhbDo1LGNvdW50OjIwfSx7Y21kOm0uQ01ELlNFVF9BTExfTUVTU0FHRV9SRUFELGludGVydmFsOjEsY291bnQ6MX0se2NtZDptLkNNRC5HRVRfVVNFUl9TVEFUVVMsaW50ZXJ2YWw6NSxjb3VudDoyMH0se2NtZDptLkNNRC5TVUJTQ1JJQkVfVVNFUl9TVEFUVVMsaW50ZXJ2YWw6NSxjb3VudDoyMH0se2NtZDptLkNNRC5VTlNVQlNDUklCRV9VU0VSX1NUQVRVUyxpbnRlcnZhbDo1LGNvdW50OjIwfV07Y2xhc3MgR2EgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiU2Vzc2lvbk1vZHVsZVwiLHRoaXMuX3BsYXRmb3JtPXRoaXMuZ2V0UGxhdGZvcm0oKSx0aGlzLl9wcm90b2NvbEhhbmRsZXI9bmV3IHZhKHRoaXMpLHRoaXMuX21lc3NhZ2VEaXNwYXRjaGVyPW5ldyBSYSh0aGlzKSx0aGlzLl9jb21tYW5kRnJlcXVlbmN5TGltaXRNYXA9bmV3IE1hcCx0aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXA9bmV3IE1hcCx0aGlzLl9zZXJ2ZXJPdmVybG9hZEluZm9NYXA9bmV3IE1hcCx0aGlzLl9pbml0KCk7dGhpcy5nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpLm9uKFduLHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfV9pbml0KCl7dGhpcy5fdXBkYXRlQ29tbWFuZEZyZXF1ZW5jeUxpbWl0TWFwKE9hKX1fb25DbG91ZENvbmZpZ1VwZGF0ZWQoKXtsZXQgZT10aGlzLmdldENsb3VkQ29uZmlnKFwiY21kX2ZyZXF1ZW5jeV9saW1pdFwiKTt3ZShlKXx8KGU9SlNPTi5wYXJzZShlKSx0aGlzLl91cGRhdGVDb21tYW5kRnJlcXVlbmN5TGltaXRNYXAoZSkpfV91cGRhdGVDb21tYW5kRnJlcXVlbmN5TGltaXRNYXAoZSl7ZS5mb3JFYWNoKGU9Pnt0aGlzLl9jb21tYW5kRnJlcXVlbmN5TGltaXRNYXAuc2V0KGUuY21kLHtpbnRlcnZhbDplLmludGVydmFsLGNvdW50OmUuY291bnR9KX0pfXVwZGF0ZVByb3RvY29sQ29uZmlnKCl7dGhpcy5fcHJvdG9jb2xIYW5kbGVyLnVwZGF0ZSgpfXJlcXVlc3QoZSl7X2UuZCh0aGlzLl9uK1wiLnJlcXVlc3Qgb3B0aW9uczpcIixlKTtjb25zdHtwcm90b2NvbE5hbWU6dCx0amdJRDpzfT1lO2lmKCF0aGlzLl9wcm90b2NvbEhhbmRsZXIuaGFzKHQpKXJldHVybiBfZS53KGAke3RoaXMuX259LnJlcXVlc3QgdW5rbm93biBwcm90b2NvbDoke3R9YCksVm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfUFJPVE9DT0x9KTtjb25zdCBvPXRoaXMuZ2V0UHJvdG9jb2xEYXRhKGUpLHtzZXJ2Y21kOml9PW8uaGVhZDtpZih0aGlzLl9pc0ZyZXF1ZW5jeU92ZXJMaW1pdChpKSlyZXR1cm4gVm4oe2NvZGU6bm4uT1ZFUl9GUkVRVUVOQ1lfTElNSVR9KTtpZih0aGlzLl9pc1NlcnZlck92ZXJsb2FkKGkpKXJldHVybiBWbih7Y29kZTpubi5PUEVOX1NFUlZJQ0VfT1ZFUkxPQURfRVJST1J9KTtMdChzKXx8KG8uaGVhZC50amdJRD1zKTtjb25zdCBuPXRoaXMuZ2V0TW9kdWxlKFNzKTtyZXR1cm4gTmEuaW5jbHVkZXModCk/bi5zaW1wbHlTZW5kKG8pOm4uc2VuZChvKX1nZXRLZXlNYXAoZSl7cmV0dXJuIHRoaXMuX3Byb3RvY29sSGFuZGxlci5nZXRLZXlNYXAoZSl9Z2VuQ29tbW9uSGVhZCgpe2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUobXMpO3JldHVybnt2ZXI6XCJ2NFwiLHBsYXRmb3JtOnRoaXMuX3BsYXRmb3JtLHdlYnNka2FwcGlkOmEsd2Vic2RrdmVyc2lvbjpyLGEyOmUuZ2V0QTJLZXkoKXx8dm9pZCAwLHRpbnlpZDplLmdldFRpbnlJRCgpfHx2b2lkIDAsc3RhdHVzX2luc3RpZDplLmdldFN0YXR1c0luc3RhbmNlSUQoKSxzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6ZS5nZXRDb250ZW50VHlwZSgpLHJlcXRpbWU6MCxpZGVudGlmaWVyOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VySUQoKSx1c2Vyc2lnOmUuZ2V0QTJLZXkoKT92b2lkIDA6ZS5nZXRVc2VyU2lnKCksc2RrYWJpbGl0eToxOTIzNzEsdGpnSUQ6XCJcIn19Z2VuQ29zU3BlY2lmaWVkSGVhZCgpe2NvbnN0IGU9dGhpcy5nZXRNb2R1bGUobXMpO3JldHVybnt2ZXI6XCJ2NFwiLHBsYXRmb3JtOnRoaXMuX3BsYXRmb3JtLHdlYnNka2FwcGlkOmEsd2Vic2RrdmVyc2lvbjpyLHNka2FwcGlkOmUuZ2V0U0RLQXBwSUQoKSxjb250ZW50dHlwZTplLmdldENvbnRlbnRUeXBlKCkscmVxdGltZTowLGlkZW50aWZpZXI6ZS5nZXRVc2VySUQoKSx1c2Vyc2lnOmUuZ2V0VXNlclNpZygpLHN0YXR1c19pbnN0aWQ6ZS5nZXRTdGF0dXNJbnN0YW5jZUlEKCksc2RrYWJpbGl0eToxOTIzNzF9fWdlblNTT1JlcG9ydEhlYWQoKXtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKG1zKTtyZXR1cm57dmVyOlwidjRcIixwbGF0Zm9ybTp0aGlzLl9wbGF0Zm9ybSx3ZWJzZGthcHBpZDphLHdlYnNka3ZlcnNpb246cixzZGthcHBpZDplLmdldFNES0FwcElEKCksY29udGVudHR5cGU6XCJcIixyZXF0aW1lOjAsaWRlbnRpZmllcjpcIlwiLHVzZXJzaWc6XCJcIixzdGF0dXNfaW5zdGlkOmUuZ2V0U3RhdHVzSW5zdGFuY2VJRCgpLHNka2FiaWxpdHk6MTkyMzcxfX1nZXRQcm90b2NvbERhdGEoZSl7cmV0dXJuIHRoaXMuX3Byb3RvY29sSGFuZGxlci5nZXRQcm90b2NvbERhdGEoZSl9dHJhbnMoZSl7Y29uc3R7c2VydmNtZDp0LGRhdGE6c309ZSxvPXtoZWFkOnsuLi50aGlzLmdlbkNvbW1vbkhlYWQoKSxzZXJ2Y21kOnR9LGJvZHk6c307cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFNzKS5zZW5kKG8pfXNlbmRDb21ib01lc3NhZ2UoZSl7Y29uc3R7c2VydmNtZDp0LGRhdGE6c309ZSxvPXtoZWFkOnsuLi50aGlzLmdlbkNvbW1vbkhlYWQoKSxzZXJ2Y21kOnR9LGJvZHk6c307cmV0dXJuIHRoaXMuZ2V0TW9kdWxlKFNzKS5zZW5kKG8pfW9uRXJyb3JDb2RlTm90WmVybyhlKXtjb25zdHtlcnJvckNvZGU6dH09ZTtpZih0PT09bm4uSEVMTE9fQU5TV0VSX0tJQ0tFRF9PVVQpe2NvbnN0e2tpY2tUeXBlOnQsbmV3SW5zdGFuY2VJbmZvOnM9e319PWU7MT09PXQ/dGhpcy5vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChzKToyPT09dD90aGlzLm9uTXVsdGlwbGVEZXZpY2VLaWNrZWRPdXQocyk6Mz09PXQmJnRoaXMub25SZXN0QXBpS2lja2VkT3V0KHMpfWlmKHQ9PT1ubi5NRVNTQUdFX0EyS0VZX0VYUElSRUR8fHQ9PT1ubi5BQ0NPVU5UX0EyS0VZX0VYUElSRUQpe3RoaXMuX29uVXNlclNpZ0V4cGlyZWQoKTt0aGlzLmdldE1vZHVsZShTcykucmVDb25uZWN0KCl9fW9uTWVzc2FnZShlKXtjb25zdHtib2R5OnR9PWUse25lZWRBY2s6cz0wLHNlc3Npb25EYXRhOm99PXQ7MT09PXMmJnRoaXMuX3NlbmRBQ0sobyksdGhpcy5fbWVzc2FnZURpc3BhdGNoZXIub25NZXNzYWdlKGUpfW9uUmVjb25uZWN0ZWQoKXt0aGlzLl9yZUxvZ2luT25SZWNvbm5lY3RlZCgpfXJlTG9naW5PbktpY2tPdGhlcigpe19lLmwodGhpcy5fbitcIi5yZUxvZ2luT25LaWNrT3RoZXJcIiksdGhpcy5fcmVMb2dpbigpfV9yZUxvZ2luT25SZWNvbm5lY3RlZCgpe19lLmwodGhpcy5fbitcIi5fcmVMb2dpbk9uUmVjb25uZWN0ZWRcIiksdGhpcy5fcmVMb2dpbigpfV9yZUxvZ2luKCl7aWYodGhpcy5pc0xvZ2dlZEluKCkpe2xldCBlPTA7Y29uc3QgdD10aGlzLmdldE1vZHVsZShHcyk7dC5jYW5JVXNlT2ZmbGluZVB1c2goKSYmKGU9dC5nZXRVbmlBcHBQbGF0Zm9ybSgpKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTokcyxyZXF1ZXN0RGF0YTp7aXNXZWJVbmlhcHA6ZX19KS50aGVuKGU9Pntjb25zdHtpbnN0YW5jZUlEOnR9PWUuZGF0YTt0aGlzLmdldE1vZHVsZShtcykuc2V0U3RhdHVzSW5zdGFuY2VJRCh0KSxfZS5sKHRoaXMuX24rXCIuX3JlTG9naW4gb2suXCIpO3RoaXMuZ2V0TW9kdWxlKF9zKS5zeW5jQ29udmVyc2F0aW9uTGlzdCgpLnRoZW4oKCk9PntfZS5sKHRoaXMuX24rXCIuX3JlTG9naW4sIHN5bmMgY29udmVyc2F0aW9uIGxpc3Qgb2suXCIpO3RoaXMuZ2V0TW9kdWxlKE5zKS5zdGFydCgpfSk7dGhpcy5nZXRNb2R1bGUoZHMpLnVwZGF0ZUxvY2FsTWFpblNlcXVlbmNlT25SZWNvbm5lY3RlZCgpO2NvbnN0IHM9dGhpcy5nZXRNb2R1bGUoZ3MpO3MucmVzZXRHZXRUb3BpY1RpbWUoKSxzLmdldFRvcGljTGlzdE9uUmVjb25uZWN0ZWQoKX0pfX1vbk11bHRpcGxlQWNjb3VudEtpY2tlZE91dChlKXt0aGlzLmdldE1vZHVsZShycykub25NdWx0aXBsZUFjY291bnRLaWNrZWRPdXQoZSl9b25NdWx0aXBsZURldmljZUtpY2tlZE91dChlKXt0aGlzLmdldE1vZHVsZShycykub25NdWx0aXBsZURldmljZUtpY2tlZE91dChlKX1fb25Vc2VyU2lnRXhwaXJlZCgpe3RoaXMuZ2V0TW9kdWxlKHJzKS5vblVzZXJTaWdFeHBpcmVkKCl9b25SZXN0QXBpS2lja2VkT3V0KGUpe3RoaXMuZ2V0TW9kdWxlKHJzKS5vblJlc3RBcGlLaWNrZWRPdXQoZSl9X3NlbmRBQ0soZSl7dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6YmkscmVxdWVzdERhdGE6e3Nlc3Npb25EYXRhOmV9fSl9X2lzRnJlcXVlbmN5T3ZlckxpbWl0KGUpe2NvbnN0IHQ9ZS5zcGxpdChcIi5cIilbMV07aWYoIXRoaXMuX2NvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcC5oYXModCkpcmV0dXJuITE7aWYoIXRoaXMuX2NvbW1hbmRSZXF1ZXN0SW5mb01hcC5oYXModCkpcmV0dXJuIHRoaXMuX2NvbW1hbmRSZXF1ZXN0SW5mb01hcC5zZXQodCx7c3RhcnRUaW1lOkRhdGUubm93KCkscmVxdWVzdENvdW50OjF9KSwhMTtjb25zdHtjb3VudDpzLGludGVydmFsOm99PXRoaXMuX2NvbW1hbmRGcmVxdWVuY3lMaW1pdE1hcC5nZXQodCk7bGV0e3N0YXJ0VGltZTppLHJlcXVlc3RDb3VudDpufT10aGlzLl9jb21tYW5kUmVxdWVzdEluZm9NYXAuZ2V0KHQpO2lmKERhdGUubm93KCktaT4xZTMqbylyZXR1cm4gdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLnNldCh0LHtzdGFydFRpbWU6RGF0ZS5ub3coKSxyZXF1ZXN0Q291bnQ6MX0pLCExO24rPTEsdGhpcy5fY29tbWFuZFJlcXVlc3RJbmZvTWFwLnNldCh0LHtzdGFydFRpbWU6aSxyZXF1ZXN0Q291bnQ6bn0pO2xldCByPSExO3JldHVybiBuPnMmJihyPSEwKSxyfV9pc1NlcnZlck92ZXJsb2FkKGUpe2lmKCF0aGlzLl9zZXJ2ZXJPdmVybG9hZEluZm9NYXAuaGFzKGUpKXJldHVybiExO2NvbnN0e292ZXJsb2FkVGltZTp0LHdhaXRpbmdUaW1lOnN9PXRoaXMuX3NlcnZlck92ZXJsb2FkSW5mb01hcC5nZXQoZSk7bGV0IG89ITE7cmV0dXJuIERhdGUubm93KCktdDw9MWUzKnM/bz0hMDoodGhpcy5fc2VydmVyT3ZlcmxvYWRJbmZvTWFwLmRlbGV0ZShlKSxvPSExKSxvfW9uUHVzaGVkU2VydmVyT3ZlcmxvYWQoZSl7Y29uc3R7b3ZlcmxvYWRDb21tYW5kOnQsd2FpdGluZ1RpbWU6c309ZTt0aGlzLl9zZXJ2ZXJPdmVybG9hZEluZm9NYXAuc2V0KHQse292ZXJsb2FkVGltZTpEYXRlLm5vdygpLHdhaXRpbmdUaW1lOnN9KSxfZS53KGAke3RoaXMuX259Lm9uUHVzaGVkU2VydmVyT3ZlcmxvYWQgd2FpdGluZ1RpbWU6JHtzfXNgKX1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl91cGRhdGVDb21tYW5kRnJlcXVlbmN5TGltaXRNYXAoT2EpLHRoaXMuX2NvbW1hbmRSZXF1ZXN0SW5mb01hcC5jbGVhcigpLHRoaXMuX3NlcnZlck92ZXJsb2FkSW5mb01hcC5jbGVhcigpfX1jbGFzcyBVYSBleHRlbmRzIEZze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX249XCJNZXNzYWdlTG9zc0RldGVjdGlvbk1vZHVsZVwiLHRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcD1uZXcgTWFwLHRoaXMuX2ZpcnN0Um91bmRSZXQ9W119b25NZXNzYWdlTWF5YmVMb3N0KGUsdCxzKXt0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuaGFzKGUpfHx0aGlzLl9tYXliZUxvc3RTZXF1ZW5jZXNNYXAuc2V0KGUsW10pO2NvbnN0IG89dGhpcy5fbWF5YmVMb3N0U2VxdWVuY2VzTWFwLmdldChlKTtmb3IobGV0IGk9MDtpPHM7aSsrKS0xPT09by5pbmRleE9mKHQraSkmJm8ucHVzaCh0K2kpfWRldGVjdEZpcnN0Um91bmQoZSx0KXtjb25zdCBzPXRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5nZXQoZSk7aWYoTHQocyl8fEx0KHQpKXJldHVybjtjb25zdCBvPXMuZmlsdGVyKGU9Pi0xPT09dC5pbmRleE9mKGUpKTswPT09by5sZW5ndGg/X2UuaShgJHt0aGlzLl9ufS5kZXRlY3RGaXJzdFJvdW5kIG5vIG1lc3NhZ2UgbG9zcy4gY29udmVyc2F0aW9uSUQ6JHtlfWApOnRoaXMuX2ZpcnN0Um91bmRSZXQ9dGhpcy5fZmlyc3RSb3VuZFJldC5jb25jYXQobykscy5sZW5ndGg9MH1kZXRlY3RTZWNvbmRSb3VuZChlLHQpe2lmKEx0KHRoaXMuX2ZpcnN0Um91bmRSZXQpfHxMdCh0KSlyZXR1cm47Y29uc3Qgcz10aGlzLl9maXJzdFJvdW5kUmV0LmZpbHRlcihlPT4tMT09PXQuaW5kZXhPZihlKSk7dGhpcy5fZmlyc3RSb3VuZFJldC5sZW5ndGg9MDtjb25zdCBvPXMubGVuZ3RoO2lmKDA9PT1vKXJldHVybjtsZXQgaTtvPD01P2k9ZStcIi1cIitzLmpvaW4oXCItXCIpOihzLnNvcnQoKGUsdCk9PmUtdCksaT1lK1wiIHN0YXJ0OlwiK3NbMF0rXCIgZW5kOlwiK3Nbby0xXStcIiBjb3VudDpcIitvKTtuZXcgQ24oXCJtZXNzYWdlTG9zc1wiKS5zZXRNZXNzYWdlKGkpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpLF9lLmkoYCR7dGhpcy5fbn0uZGV0ZWN0U2Vjb25kUm91bmQgbWVzc2FnZSBsb3NzIGRldGVjdGVkLiBjb252ZXJzYXRpb25JRDoke2V9IGxvc3RTZXF1ZW5jZXM6JHtzfWApfXJlc2V0KCl7X2UubCh0aGlzLl9uK1wiLnJlc2V0XCIpLHRoaXMuX21heWJlTG9zdFNlcXVlbmNlc01hcC5jbGVhcigpLHRoaXMuX2ZpcnN0Um91bmRSZXQubGVuZ3RoPTB9fWNsYXNzIGthIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIkNsb3VkQ29udHJvbE1vZHVsZVwiLHRoaXMuX2Nsb3VkQ29uZmlnPW5ldyBNYXAsdGhpcy5fZXhwaXJlZFRpbWU9MCx0aGlzLl92ZXJzaW9uPTAsdGhpcy5faXNGZXRjaGluZz0hMX1nZXRDbG91ZENvbmZpZyhlKXtyZXR1cm4gd2UoZSk/dGhpcy5fY2xvdWRDb25maWc6dGhpcy5fY2xvdWRDb25maWcuaGFzKGUpP3RoaXMuX2Nsb3VkQ29uZmlnLmdldChlKTp2b2lkIDB9X2NhbkZldGNoQ29uZmlnKCl7cmV0dXJuIHRoaXMuaXNMb2dnZWRJbigpJiYhdGhpcy5faXNGZXRjaGluZyYmRGF0ZS5ub3coKT49dGhpcy5fZXhwaXJlZFRpbWV9ZmV0Y2hDb25maWcoKXtjb25zdCBlPXRoaXMuX2NhbkZldGNoQ29uZmlnKCk7aWYoX2UubChgJHt0aGlzLl9ufS5mZXRjaENvbmZpZyBjYW5GZXRjaENvbmZpZzoke2V9YCksIWUpcmV0dXJuO2NvbnN0IHQ9bmV3IENuKFwiZmV0Y2hDbG91ZENvbnRyb2xDb25maWdcIikscz10aGlzLmdldE1vZHVsZShtcykuZ2V0U0RLQXBwSUQoKTt0aGlzLl9pc0ZldGNoaW5nPSEwLHRoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnFpLHJlcXVlc3REYXRhOntTREtBcHBJRDpzLHZlcnNpb246dGhpcy5fdmVyc2lvbn19KS50aGVuKGU9Pnt0aGlzLl9pc0ZldGNoaW5nPSExLHQuc2V0TWVzc2FnZShgdmVyc2lvbjoke3RoaXMuX3ZlcnNpb259IG5ld1ZlcnNpb246JHtlLmRhdGEudmVyc2lvbn0gY29uZmlnOiR7ZS5kYXRhLmNsb3VkQ29udHJvbENvbmZpZ31gKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwodGhpcy5fbitcIi5mZXRjaENvbmZpZyBva1wiKSx0aGlzLl9wYXJzZUNsb3VkQ29udHJvbENvbmZpZyhlLmRhdGEpfSkuY2F0Y2goZT0+e3RoaXMuX2lzRmV0Y2hpbmc9ITEsdGhpcy5wcm9iZU5ldHdvcmsoKS50aGVuKChbcyxvXSk9Pnt0LnNldEVycm9yKGUscyxvKS5lbmQoKX0pLF9lLmwodGhpcy5fbitcIi5mZXRjaENvbmZpZyBmYWlsZWQuIGVycm9yOlwiLGUpLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDEyZTQpfSl9b25QdXNoZWRDbG91ZENvbnRyb2xDb25maWcoZSl7X2UubCh0aGlzLl9uK1wiLm9uUHVzaGVkQ2xvdWRDb250cm9sQ29uZmlnXCIpO25ldyBDbihcInB1c2hlZENsb3VkQ29udHJvbENvbmZpZ1wiKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoYG5ld1ZlcnNpb246JHtlLnZlcnNpb259IGNvbmZpZzoke2UuY2xvdWRDb250cm9sQ29uZmlnfWApLmVuZCgpLHRoaXMuX3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnKGUpfW9uQ2hlY2tUaW1lcihlKXt0aGlzLl9jYW5GZXRjaENvbmZpZygpJiZ0aGlzLmZldGNoQ29uZmlnKCl9X3BhcnNlQ2xvdWRDb250cm9sQ29uZmlnKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5fcGFyc2VDbG91ZENvbnRyb2xDb25maWdcIix7ZXJyb3JDb2RlOnMsZXJyb3JNZXNzYWdlOm8sY2xvdWRDb250cm9sQ29uZmlnOmksdmVyc2lvbjpuLGV4cGlyZWRUaW1lOnJ9PWU7aWYoMD09PXMpe2lmKHRoaXMuX3ZlcnNpb24hPT1uKXtsZXQgZT1udWxsO3RyeXtlPUpTT04ucGFyc2UoaSl9Y2F0Y2goYSl7dGhpcy5pc1ByaXZhdGVOZXRXb3JrKCl8fF9lLmUodCtcIiBKU09OIHBhcnNlIGVycm9yLiBjbG91ZENvbnRyb2xDb25maWc6XCIsaSl9ZSYmKHRoaXMuX2Nsb3VkQ29uZmlnLmNsZWFyKCksT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57dGhpcy5fY2xvdWRDb25maWcuc2V0KHQsZVt0XSl9KSx0aGlzLl92ZXJzaW9uPW4sdGhpcy5lbWl0SW5uZXJFdmVudChXbikpfXRoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrMWUzKnJ9ZWxzZSB3ZShzKT8oX2UubCh0K1wiIGZhaWxlZC4gSW52YWxpZCBtZXNzYWdlIGZvcm1hdDpcIixlKSx0aGlzLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigzNmU1KSk6KF9lLmUoYCR7dH0gZXJyb3JDb2RlOiR7c30gZXJyb3JNZXNzYWdlOiR7b31gKSx0aGlzLl9zZXRFeHBpcmVkVGltZU9uUmVzcG9uc2VFcnJvcigxMmU0KSl9X3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKGUpe3RoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrZX1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl9jbG91ZENvbmZpZy5jbGVhcigpLHRoaXMuX2V4cGlyZWRUaW1lPTAsdGhpcy5fdmVyc2lvbj0wLHRoaXMuX2lzRmV0Y2hpbmc9ITF9fWNsYXNzIFBhIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlJlY292ZXJNZXNzYWdlTW9kdWxlXCIsdGhpcy5QVUxMX0xJTUlUX0NPVU5UPTE1fXN0YXJ0KCl7dGhpcy5fcmVjb3Zlckdyb3VwQ2hhdCgpLHRoaXMuX3JlY292ZXJDMkNDaGF0KCl9X3JlY292ZXJHcm91cENoYXQoKXtjb25zdCBlPXRoaXMuX2dldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLmZpbHRlcihlPT5lLnR5cGU9PT10LkNPTlZfR1JPVVAmJmUuZ3JvdXBQcm9maWxlLnR5cGUhPT10LkdSUF9BVkNIQVRST09NKSxzPXRoaXMuZ2V0TW9kdWxlKF9zKTtsZXQgbyxpLG49MCxyPTAsYT0wO2UuZm9yRWFjaChlPT57Y29uc3R7Y29udmVyc2F0aW9uSUQ6dSxsYXN0TWVzc2FnZTpjfT1lO2k9dS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKSxvPXMuZ2V0TG9jYWxMYXN0TWVzc2FnZSh1KSxjJiYwIT09Yy5sYXN0U2VxdWVuY2UmJm8/KHI9Yy5sYXN0U2VxdWVuY2Usbj1vLnNlcXVlbmNlLGE9ci1uLG4+MCYmYT49MSYmYTwzMDA/dGhpcy5fcmVjb3Zlckdyb3VwTWVzc2FnZSh7Z3JvdXBJRDppLGxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZTpuLHJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2U6cn0pOnRoaXMuX2dldEdyb3VwTm90aWZ5KGkpKTp0aGlzLl9nZXRHcm91cE5vdGlmeShpKX0pfV9yZWNvdmVyQzJDQ2hhdCgpe2NvbnN0IGU9dGhpcy5fZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCkuZmlsdGVyKGU9PmUudHlwZT09PXQuQ09OVl9DMkMpLHM9dGhpcy5nZXRNb2R1bGUoX3MpO2xldCBvLGk9MCxuPTAscj0wO2NvbnN0IGE9W1Byb21pc2UucmVzb2x2ZSgpXTtlLmZvckVhY2goZT0+e2NvbnN0e2NvbnZlcnNhdGlvbklEOnQsbGFzdE1lc3NhZ2U6dX09ZTtvPXMuZ2V0TG9jYWxMYXN0TWVzc2FnZSh0KSx1JiYwIT09dS5sYXN0VGltZSYmbyYmKG49dS5sYXN0VGltZSxpPW8udGltZSxyPW4taSxpPjAmJnI+PTEmJnI8PTYwMCYmYS5wdXNoKHRoaXMuX3JlY292ZXJDMkNNZXNzYWdlKHtjb252ZXJzYXRpb25JRDp0LGxvY2FsTGFzdE1lc3NhZ2VUaW1lOmkscmVtb3RlTGFzdE1lc3NhZ2VUaW1lOm59KSkpfSksUHJvbWlzZS5hbGwoYSkudGhlbigoKT0+e19lLmwodGhpcy5fbitcIi5fcmVjb3ZlckMyQ0NoYXQgYWxsIHByb21pc2UgZnVsZmlsbGVkLCBzdGFydCB0byBzeW5jIHVucmVhZCBtZXNzYWdlc1wiKTt0aGlzLmdldE1vZHVsZShEcykuc3RhcnRTeW5jT25SZWNvbm5lY3RlZCgpfSl9X2dldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpe3JldHVybiB0aGlzLmdldE1vZHVsZShfcykuZ2V0TG9jYWxDb252ZXJzYXRpb25MaXN0KCl9X3JlY292ZXJHcm91cE1lc3NhZ2UoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLl9yZWNvdmVyR3JvdXBNZXNzYWdlXCI7X2UubChzK1wiIG9wdGlvbnM6XCIsZSk7Y29uc3R7Z3JvdXBJRDpvLGxvY2FsTGFzdE1lc3NhZ2VTZXF1ZW5jZTppLHJlbW90ZUxhc3RNZXNzYWdlU2VxdWVuY2U6bn09ZTt0aGlzLl9nZXRHcm91cFJvbWFpbmdNZXNzYWdlKHtncm91cElEOm8sc2VxdWVuY2U6aX0pLnRoZW4oZT0+e2NvbnN0e2NvbXBsZXRlOmksbWVzc2FnZUxpc3Q6cn09ZS5kYXRhO2lmKCF3ZShyKSl7Y29uc3QgZT1yWzBdLnNlcXVlbmNlO19lLmwoYCR7c30gcGtnTGFzdE1lc3NhZ2VTZXF1ZW5jZToke2V9IGNvbXBsZXRlOiR7aX1gKSxlPG4mJjIhPT1pJiZ0aGlzLl9yZWNvdmVyR3JvdXBNZXNzYWdlKHtncm91cElEOm8sbG9jYWxMYXN0TWVzc2FnZVNlcXVlbmNlOmUscmVtb3RlTGFzdE1lc3NhZ2VTZXF1ZW5jZTpufSk7bmV3IENuKFwicmVjb3Zlck1lc3NhZ2VcIikuc2V0TmV0d29ya1R5cGUodGhpcy5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBncm91cElEOiR7b30gY29tcGxldGU6JHtpfSBtZXNzYWdlTGlzdCBsZW5ndGg6JHtyLmxlbmd0aH1gKS5lbmQoKTtjb25zdCBhPXRoaXMuZ2V0TW9kdWxlKGRzKTtyLmxlbmd0aD4xJiZyLnNvcnQoKGUsdCk9PmUuc2VxdWVuY2UtdC5zZXF1ZW5jZSk7Zm9yKGxldCBzPTA7czxyLmxlbmd0aDtzKyspe2NvbnN0IGU9cltzXTtlLmZyb20hPT10LkNPTlZfU1lTVEVNP2Eub25OZXdHcm91cE1lc3NhZ2Uoe2RhdGFMaXN0OltlXSxpc0luc3RhbnRNZXNzYWdlOiExLHVwZGF0ZVVucmVhZENvdW50OiExfSk6YS5vbk5ld0dyb3VwVGlwcyh7ZXZlbnQ6ZS5ldmVudCxkYXRhTGlzdDpbZV19KX10aGlzLl9nZXRHcm91cE5vdGlmeShvKX19KX1fZ2V0R3JvdXBOb3RpZnkoZSl7dGhpcy5nZXRNb2R1bGUoZHMpLmdldEdyb3VwTm90aWZ5KGUpfV9nZXRHcm91cFJvbWFpbmdNZXNzYWdlKGUpe2NvbnN0e2dyb3VwSUQ6dCxzZXF1ZW5jZTpzfT1lO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpRbyxyZXF1ZXN0RGF0YTp7Z3JvdXBJRDp0LGNvdW50OnRoaXMuUFVMTF9MSU1JVF9DT1VOVCxzZXF1ZW5jZTpzK3RoaXMuUFVMTF9MSU1JVF9DT1VOVC0xfX0pfV9yZWNvdmVyQzJDTWVzc2FnZShlKXtjb25zdCB0PXRoaXMuX24rXCIuX3JlY292ZXJDMkNNZXNzYWdlXCI7X2UubCh0aGlzLl9uK1wiLl9yZWNvdmVyQzJDTWVzc2FnZSBvcHRpb25zOlwiLGUpO2NvbnN0e2NvbnZlcnNhdGlvbklEOnMsbG9jYWxMYXN0TWVzc2FnZVRpbWU6byxyZW1vdGVMYXN0TWVzc2FnZVRpbWU6aX09ZTtyZXR1cm4gdGhpcy5fZ2V0QzJDUm9hbWluZ01lc3NhZ2Uoe2NvbnZlcnNhdGlvbklEOnMsdGltZTpvfSkudGhlbihlPT57Y29uc3R7Y29tcGxldGU6byxtZXNzYWdlTGlzdDpufT1lLmRhdGE7aWYoIXdlKG4pKXtjb25zdCBlPW4ubGVuZ3RoO25ldyBDbihcInJlY292ZXJNZXNzYWdlXCIpLnNldE5ldHdvcmtUeXBlKHRoaXMuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShgJHtzfSBjb21wbGV0ZToke299IG1lc3NhZ2VMaXN0IGxlbmd0aDoke2V9YCkuZW5kKCk7dGhpcy5nZXRNb2R1bGUobHMpLm9uTmV3QzJDTWVzc2FnZSh7ZGF0YUxpc3Q6bixpc0luc3RhbnRNZXNzYWdlOiEwfSk7Y29uc3Qgcj1uW2UtMV0udGltZTtpZihfZS5sKGAke3R9IHBrZ0xhc3RNZXNzYWdlVGltZToke3J9IGNvbXBsZXRlOiR7b31gKSxyPGkmJjEhPT1vKXJldHVybiB0aGlzLl9yZWNvdmVyQzJDTWVzc2FnZSh7Y29udmVyc2F0aW9uSUQ6cyxsb2NhbExhc3RNZXNzYWdlVGltZTpyLHJlbW90ZUxhc3RNZXNzYWdlVGltZTppfSl9fSl9X2dldEMyQ1JvYW1pbmdNZXNzYWdlKGUpe2NvbnN0e2NvbnZlcnNhdGlvbklEOnMsdGltZTpvfT1lO3JldHVybiB0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpNbyxyZXF1ZXN0RGF0YTp7cGVlckFjY291bnQ6cy5yZXBsYWNlKHQuQ09OVl9DMkMsXCJcIiksY291bnQ6dGhpcy5QVUxMX0xJTUlUX0NPVU5UKzEsbGFzdE1lc3NhZ2VUaW1lOm8sZGlyZWN0aW9uOjF9fSl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIil9fWNsYXNzIGJhe2NvbnN0cnVjdG9yKCl7dGhpcy5fbj1cIkF2Z0UyRURlbGF5XCIsdGhpcy5fZTJlRGVsYXlBcnJheT1bXX1hZGRNZXNzYWdlRGVsYXkoZSl7Y29uc3QgdD1kZSgpLWU7dD49MCYmdGhpcy5fZTJlRGVsYXlBcnJheS5wdXNoKHQpfV9jYWxjQXZnKGUsdCl7aWYoMD09PXQpcmV0dXJuIDA7bGV0IHM9MDtyZXR1cm4gZS5mb3JFYWNoKGU9PntzKz1lfSksX3Qocy90LDEpfV9jYWxjQ291bnRXaXRoTGltaXQoZSl7Y29uc3R7ZTJlRGVsYXlBcnJheTp0LG1pbjpzLG1heDpvfT1lO3JldHVybiB0LmZpbHRlcihlPT5zPD1lJiZlPG8pLmxlbmd0aH1fY2FsY1BlcmNlbnQoZSx0KXtsZXQgcz1fdChlL3QqMTAwLDIpO3JldHVybiBzPjEwMCYmKHM9MTAwKSxzfV9jaGVja0UyRURlbGF5RXhjZXB0aW9uKGUsdCl7Y29uc3Qgcz1lLmZpbHRlcihlPT5lPnQpO2lmKHMubGVuZ3RoPjApe2NvbnN0IHQ9cy5sZW5ndGgsbz1NYXRoLm1pbiguLi5zKSxpPU1hdGgubWF4KC4uLnMpLG49dGhpcy5fY2FsY0F2ZyhzLHQpLHI9X3QodC9lLmxlbmd0aCoxMDAsMik7aWYocj41MCl7bmV3IENuKFwibWVzc2FnZUUyRURlbGF5RXhjZXB0aW9uXCIpLnNldE1lc3NhZ2UoYGNvdW50OiR7dH0gbWluOiR7b30gbWF4OiR7aX0gYXZnOiR7bn0gcGVyY2VudDoke3J9YCkuc2V0TGV2ZWwoXCJ3YXJuaW5nXCIpLmVuZCgpfX19Z2V0U3RhdFJlc3VsdCgpe2NvbnN0IGU9dGhpcy5fZTJlRGVsYXlBcnJheS5sZW5ndGg7aWYoMD09PWUpcmV0dXJuIG51bGw7Y29uc3QgdD1bLi4udGhpcy5fZTJlRGVsYXlBcnJheV0scz10aGlzLl9jYWxjQ291bnRXaXRoTGltaXQoe2UyZURlbGF5QXJyYXk6dCxtaW46MCxtYXg6MX0pLG89dGhpcy5fY2FsY0NvdW50V2l0aExpbWl0KHtlMmVEZWxheUFycmF5OnQsbWluOjEsbWF4OjN9KSxpPXRoaXMuX2NhbGNQZXJjZW50KHMsZSksbj10aGlzLl9jYWxjUGVyY2VudChvLGUpLHI9dGhpcy5fY2FsY0F2Zyh0LGUpO3JldHVybiB0aGlzLl9jaGVja0UyRURlbGF5RXhjZXB0aW9uKHQsMyksdC5sZW5ndGg9MCx0aGlzLnJlc2V0KCkse3RvdGFsQ291bnQ6ZSxjb3VudExlc3NUaGFuMVNlY29uZDpzLHBlcmNlbnRPZkNvdW50TGVzc1RoYW4xU2Vjb25kOmksY291bnRMZXNzVGhhbjNTZWNvbmQ6byxwZXJjZW50T2ZDb3VudExlc3NUaGFuM1NlY29uZDpuLGF2Z0RlbGF5OnJ9fXJlc2V0KCl7dGhpcy5fZTJlRGVsYXlBcnJheS5sZW5ndGg9MH19Y2xhc3Mgd2F7Y29uc3RydWN0b3IoKXt0aGlzLl9uPVwiQXZnUlRUXCIsdGhpcy5fcmVxdWVzdENvdW50PTAsdGhpcy5fcnR0QXJyYXk9W119YWRkUmVxdWVzdENvdW50KCl7dGhpcy5fcmVxdWVzdENvdW50Kz0xfWFkZFJUVChlKXt0aGlzLl9ydHRBcnJheS5wdXNoKGUpfV9jYWxjVG90YWxDb3VudCgpe3JldHVybiB0aGlzLl9yZXF1ZXN0Q291bnR9X2NhbGNSVFRDb3VudChlKXtyZXR1cm4gZS5sZW5ndGh9X2NhbGNTdWNjZXNzUmF0ZU9mUmVxdWVzdChlLHQpe2lmKDA9PT10KXJldHVybiAwO2xldCBzPV90KGUvdCoxMDAsMik7cmV0dXJuIHM+MTAwJiYocz0xMDApLHN9X2NhbGNBdmcoZSx0KXtpZigwPT09dClyZXR1cm4gMDtsZXQgcz0wO3JldHVybiBlLmZvckVhY2goZT0+e3MrPWV9KSxwYXJzZUludChzL3QpfV9jYWxjTWF4KCl7cmV0dXJuIE1hdGgubWF4KC4uLnRoaXMuX3J0dEFycmF5KX1fY2FsY01pbigpe3JldHVybiBNYXRoLm1pbiguLi50aGlzLl9ydHRBcnJheSl9Z2V0U3RhdFJlc3VsdCgpe2NvbnN0IGU9dGhpcy5fY2FsY1RvdGFsQ291bnQoKSx0PVsuLi50aGlzLl9ydHRBcnJheV07aWYoMD09PWUpcmV0dXJuIG51bGw7Y29uc3Qgcz10aGlzLl9jYWxjUlRUQ291bnQodCksbz10aGlzLl9jYWxjU3VjY2Vzc1JhdGVPZlJlcXVlc3QocyxlKSxpPXRoaXMuX2NhbGNBdmcodCxzKTtyZXR1cm4gX2UubChgJHt0aGlzLl9ufS5nZXRTdGF0UmVzdWx0IG1heDoke3RoaXMuX2NhbGNNYXgoKX0gbWluOiR7dGhpcy5fY2FsY01pbigpfSBhdmc6JHtpfWApLHRoaXMucmVzZXQoKSx7dG90YWxDb3VudDplLHJ0dENvdW50OnMsc3VjY2Vzc1JhdGVPZlJlcXVlc3Q6byxhdmdSVFQ6aX19cmVzZXQoKXt0aGlzLl9yZXF1ZXN0Q291bnQ9MCx0aGlzLl9ydHRBcnJheS5sZW5ndGg9MH19Y2xhc3MgRmF7Y29uc3RydWN0b3IoKXt0aGlzLl9tYXA9bmV3IE1hcH1pbml0TWFwKGUpe2UuZm9yRWFjaChlPT57dGhpcy5fbWFwLnNldChlLHt0b3RhbENvdW50OjAsc3VjY2Vzc0NvdW50OjAsZmFpbGVkQ291bnRPZlVzZXJTaWRlOjAsY29zdEFycmF5OltdLGZpbGVTaXplQXJyYXk6W119KX0pfWFkZFRvdGFsQ291bnQoZSl7cmV0dXJuISh3ZShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS50b3RhbENvdW50Kz0xLCEwKX1hZGRTdWNjZXNzQ291bnQoZSl7cmV0dXJuISh3ZShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5zdWNjZXNzQ291bnQrPTEsITApfWFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZShlKXtyZXR1cm4hKHdlKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSkmJih0aGlzLl9tYXAuZ2V0KGUpLmZhaWxlZENvdW50T2ZVc2VyU2lkZSs9MSwhMCl9YWRkQ29zdChlLHQpe3JldHVybiEod2UoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKSYmKHRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5LnB1c2godCksITApfWFkZEZpbGVTaXplKGUsdCl7cmV0dXJuISh3ZShlKXx8IXRoaXMuX21hcC5oYXMoZSkpJiYodGhpcy5fbWFwLmdldChlKS5maWxlU2l6ZUFycmF5LnB1c2godCksITApfV9jYWxjU3VjY2Vzc1JhdGVPZkJ1c2luZXNzKGUpe2lmKHdlKGUpfHwhdGhpcy5fbWFwLmhhcyhlKSlyZXR1cm4tMTtjb25zdCB0PXRoaXMuX21hcC5nZXQoZSk7bGV0IHM9X3QodC5zdWNjZXNzQ291bnQvdC50b3RhbENvdW50KjEwMCwyKTtyZXR1cm4gcz4xMDAmJihzPTEwMCksc31fY2FsY1N1Y2Nlc3NSYXRlT2ZQbGF0Zm9ybShlKXtpZih3ZShlKXx8IXRoaXMuX21hcC5oYXMoZSkpcmV0dXJuLTE7Y29uc3QgdD10aGlzLl9tYXAuZ2V0KGUpO2xldCBzPXRoaXMuX2NhbGNTdWNjZXNzQ291bnRPZlBsYXRmb3JtKGUpL3QudG90YWxDb3VudCoxMDA7cmV0dXJuIHM9X3QocywyKSxzPjEwMCYmKHM9MTAwKSxzfV9jYWxjVG90YWxDb3VudChlKXtyZXR1cm4gd2UoZSl8fCF0aGlzLl9tYXAuaGFzKGUpPy0xOnRoaXMuX21hcC5nZXQoZSkudG90YWxDb3VudH1fY2FsY1N1Y2Nlc3NDb3VudE9mQnVzaW5lc3MoZSl7cmV0dXJuIHdlKGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTp0aGlzLl9tYXAuZ2V0KGUpLnN1Y2Nlc3NDb3VudH1fY2FsY1N1Y2Nlc3NDb3VudE9mUGxhdGZvcm0oZSl7aWYod2UoZSl8fCF0aGlzLl9tYXAuaGFzKGUpKXJldHVybi0xO2NvbnN0IHQ9dGhpcy5fbWFwLmdldChlKTtyZXR1cm4gdC5zdWNjZXNzQ291bnQrdC5mYWlsZWRDb3VudE9mVXNlclNpZGV9X2NhbGNBdmcoZSl7cmV0dXJuIHdlKGUpfHwhdGhpcy5fbWFwLmhhcyhlKT8tMTplPT09cG4/dGhpcy5fY2FsY0F2Z1NwZWVkKGUpOnRoaXMuX2NhbGNBdmdDb3N0KGUpfV9jYWxjQXZnQ29zdChlKXtjb25zdCB0PXRoaXMuX21hcC5nZXQoZSkuY29zdEFycmF5Lmxlbmd0aDtpZigwPT09dClyZXR1cm4gMDtsZXQgcz0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKGU9PntzKz1lfSkscGFyc2VJbnQocy90KX1fY2FsY0F2Z1NwZWVkKGUpe2xldCB0PTAscz0wO3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpLmNvc3RBcnJheS5mb3JFYWNoKGU9Pnt0Kz1lfSksdGhpcy5fbWFwLmdldChlKS5maWxlU2l6ZUFycmF5LmZvckVhY2goZT0+e3MrPWV9KSxwYXJzZUludCgxZTMqcy90KX1nZXRTdGF0UmVzdWx0KGUpe2NvbnN0IHQ9dGhpcy5fY2FsY1RvdGFsQ291bnQoZSk7aWYoMD09PXQpcmV0dXJuIG51bGw7Y29uc3Qgcz10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZCdXNpbmVzcyhlKSxvPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mQnVzaW5lc3MoZSksaT10aGlzLl9jYWxjU3VjY2Vzc0NvdW50T2ZQbGF0Zm9ybShlKSxuPXRoaXMuX2NhbGNTdWNjZXNzUmF0ZU9mUGxhdGZvcm0oZSkscj10aGlzLl9jYWxjQXZnKGUpO3JldHVybiB0aGlzLnJlc2V0KGUpLHt0b3RhbENvdW50OnQsc3VjY2Vzc0NvdW50T2ZCdXNpbmVzczpzLHN1Y2Nlc3NSYXRlT2ZCdXNpbmVzczpvLHN1Y2Nlc3NDb3VudE9mUGxhdGZvcm06aSxzdWNjZXNzUmF0ZU9mUGxhdGZvcm06bixhdmdWYWx1ZTpyfX1yZXNldChlKXt3ZShlKT90aGlzLl9tYXAuY2xlYXIoKTp0aGlzLl9tYXAuc2V0KGUse3RvdGFsQ291bnQ6MCxzdWNjZXNzQ291bnQ6MCxmYWlsZWRDb3VudE9mVXNlclNpZGU6MCxjb3N0QXJyYXk6W10sZmlsZVNpemVBcnJheTpbXX0pfX1jbGFzcyAkYXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2xhc3RNYXA9bmV3IE1hcCx0aGlzLl9jdXJyZW50TWFwPW5ldyBNYXB9aW5pdE1hcChlKXtlLmZvckVhY2goZT0+e3RoaXMuX2xhc3RNYXAuc2V0KGUsbmV3IE1hcCksdGhpcy5fY3VycmVudE1hcC5zZXQoZSxuZXcgTWFwKX0pfWFkZE1lc3NhZ2VTZXF1ZW5jZShlKXtjb25zdHtrZXk6cyxtZXNzYWdlOm99PWU7aWYod2Uocyl8fCF0aGlzLl9sYXN0TWFwLmhhcyhzKXx8IXRoaXMuX2N1cnJlbnRNYXAuaGFzKHMpKXJldHVybiExO2NvbnN0e2NvbnZlcnNhdGlvbklEOmksc2VxdWVuY2U6bn09byxyPWkucmVwbGFjZSh0LkNPTlZfR1JPVVAsXCJcIik7aWYoMD09PXRoaXMuX2xhc3RNYXAuZ2V0KHMpLnNpemUpdGhpcy5fYWRkQ3VycmVudE1hcChlKTtlbHNlIGlmKHRoaXMuX2xhc3RNYXAuZ2V0KHMpLmhhcyhyKSl7Y29uc3QgdD10aGlzLl9sYXN0TWFwLmdldChzKS5nZXQociksbz10Lmxlbmd0aC0xO24+dFswXSYmbjx0W29dPyh0LnB1c2gobiksdC5zb3J0KCksdGhpcy5fbGFzdE1hcC5nZXQocykuc2V0KHIsdCkpOnRoaXMuX2FkZEN1cnJlbnRNYXAoZSl9ZWxzZSB0aGlzLl9hZGRDdXJyZW50TWFwKGUpO3JldHVybiEwfV9hZGRDdXJyZW50TWFwKGUpe2NvbnN0e2tleTpzLG1lc3NhZ2U6b309ZSx7Y29udmVyc2F0aW9uSUQ6aSxzZXF1ZW5jZTpufT1vLHI9aS5yZXBsYWNlKHQuQ09OVl9HUk9VUCxcIlwiKTt0aGlzLl9jdXJyZW50TWFwLmdldChzKS5oYXMocil8fHRoaXMuX2N1cnJlbnRNYXAuZ2V0KHMpLnNldChyLFtdKSx0aGlzLl9jdXJyZW50TWFwLmdldChzKS5nZXQocikucHVzaChuKX1fY29weURhdGEoZSl7aWYoIXdlKGUpKXt0aGlzLl9sYXN0TWFwLnNldChlLG5ldyBNYXApO2xldCB0PXRoaXMuX2xhc3RNYXAuZ2V0KGUpO2Zvcihjb25zdFtzLG9db2YgdGhpcy5fY3VycmVudE1hcC5nZXQoZSkpdC5zZXQocyxvKTt0PW51bGwsdGhpcy5fY3VycmVudE1hcC5zZXQoZSxuZXcgTWFwKX19Z2V0U3RhdFJlc3VsdChlKXtpZih3ZSh0aGlzLl9jdXJyZW50TWFwLmdldChlKSl8fHdlKHRoaXMuX2xhc3RNYXAuZ2V0KGUpKSlyZXR1cm4gbnVsbDtpZigwPT09dGhpcy5fbGFzdE1hcC5nZXQoZSkuc2l6ZSlyZXR1cm4gdGhpcy5fY29weURhdGEoZSksbnVsbDtsZXQgdD0wLHM9MDtpZih0aGlzLl9sYXN0TWFwLmdldChlKS5mb3JFYWNoKChlLG8pPT57Y29uc3QgaT1bLi4uZS52YWx1ZXMoKV0sbj1pLmxlbmd0aDt0Kz1pW24tMV0taVswXSsxLHMrPW59KSwwPT09dClyZXR1cm4gbnVsbDtsZXQgbz1fdChzL3QqMTAwLDIpO3JldHVybiBvPjEwMCYmKG89MTAwKSx0aGlzLl9jb3B5RGF0YShlKSx7dG90YWxDb3VudDp0LHN1Y2Nlc3NDb3VudE9mTWVzc2FnZVJlY2VpdmVkOnMsc3VjY2Vzc1JhdGVPZk1lc3NhZ2VSZWNlaXZlZDpvfX1yZXNldCgpe3RoaXMuX2N1cnJlbnRNYXAuY2xlYXIoKSx0aGlzLl9sYXN0TWFwLmNsZWFyKCl9fWNsYXNzIHFhIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlF1YWxpdHlTdGF0TW9kdWxlXCIsdGhpcy5UQUc9XCJpbS1zc29sb2ctcXVhbGl0eS1zdGF0XCIsdGhpcy5yZXBvcnRJbmRleD0wLHRoaXMud2hvbGVQZXJpb2Q9ITEsdGhpcy5fcXVhbGl0eUl0ZW1zPVtybixhbix1bixjbixsbixkbixwbixobixnbixfbl0sdGhpcy5fbWVzc2FnZVNlbnRJdGVtcz1bdW4sY24sbG4sZG4scG5dLHRoaXMuX21lc3NhZ2VSZWNlaXZlZEl0ZW1zPVtobixnbixfbl0sdGhpcy5SRVBPUlRfSU5URVJWQUw9MTIwLHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD1bXSx0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPVtdLHRoaXMuX3N0YXRJbmZvQXJyPVtdLHRoaXMuX2F2Z1JUVD1uZXcgd2EsdGhpcy5fYXZnRTJFRGVsYXk9bmV3IGJhLHRoaXMuX3JhdGVNZXNzYWdlU2VudD1uZXcgRmEsdGhpcy5fcmF0ZU1lc3NhZ2VSZWNlaXZlZD1uZXcgJGE7Y29uc3QgdD10aGlzLmdldElubmVyRW1pdHRlckluc3RhbmNlKCk7dC5vbihLbix0aGlzLl9vbkxvZ2luU3VjY2Vzcyx0aGlzKSx0Lm9uKFduLHRoaXMuX29uQ2xvdWRDb25maWdVcGRhdGVkLHRoaXMpfV9vbkxvZ2luU3VjY2Vzcygpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5pbml0TWFwKHRoaXMuX21lc3NhZ2VTZW50SXRlbXMpLHRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuaW5pdE1hcCh0aGlzLl9tZXNzYWdlUmVjZWl2ZWRJdGVtcyk7Y29uc3QgZT10aGlzLmdldE1vZHVsZShNcyksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpOyFMdCh0KSYmJGUodC5mb3JFYWNoKSYmKF9lLmwoYCR7dGhpcy5fbn0uX29uTG9naW5TdWNjZXNzIGdldCBxdWFsaXR5IHN0YXQgbG9ncyBmcm9tIGxvY2FsIHN0b3JhZ2UsIGNvdW50OiR7dC5sZW5ndGh9YCksdC5mb3JFYWNoKGU9Pnt0aGlzLl9zdGF0SW5mb0Fyci5wdXNoKGUpfSksZS5yZW1vdmVJdGVtKHRoaXMuVEFHLCExKSl9X29uQ2xvdWRDb25maWdVcGRhdGVkKCl7Y29uc3QgZT10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfaW50ZXJ2YWxcIiksdD10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfc2RrYXBwaWRfYmxcIikscz10aGlzLmdldENsb3VkQ29uZmlnKFwicV9ycHRfdGlueWlkX3dsXCIpO3dlKGUpfHwodGhpcy5SRVBPUlRfSU5URVJWQUw9TnVtYmVyKGUpKSx3ZSh0KXx8KHRoaXMuUkVQT1JUX1NES0FQUElEX0JMQUNLTElTVD10LnNwbGl0KFwiLFwiKS5tYXAoZT0+TnVtYmVyKGUpKSksd2Uocyl8fCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNUPXMuc3BsaXQoXCIsXCIpKX1vbkNoZWNrVGltZXIoZSl7dGhpcy5pc0xvZ2dlZEluKCkmJmUldGhpcy5SRVBPUlRfSU5URVJWQUw9PTAmJih0aGlzLndob2xlUGVyaW9kPSEwLHRoaXMuX3JlcG9ydCgpKX1hZGRSZXF1ZXN0Q291bnQoKXt0aGlzLl9hdmdSVFQuYWRkUmVxdWVzdENvdW50KCl9YWRkUlRUKGUpe3RoaXMuX2F2Z1JUVC5hZGRSVFQoZSl9YWRkTWVzc2FnZURlbGF5KGUpe3RoaXMuX2F2Z0UyRURlbGF5LmFkZE1lc3NhZ2VEZWxheShlKX1hZGRUb3RhbENvdW50KGUpe3RoaXMuX3JhdGVNZXNzYWdlU2VudC5hZGRUb3RhbENvdW50KGUpfHxfZS53KHRoaXMuX24rXCIuYWRkVG90YWxDb3VudCBpbnZhbGlkIGtleTpcIixlKX1hZGRTdWNjZXNzQ291bnQoZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZFN1Y2Nlc3NDb3VudChlKXx8X2Uudyh0aGlzLl9uK1wiLmFkZFN1Y2Nlc3NDb3VudCBpbnZhbGlkIGtleTpcIixlKX1hZGRGYWlsZWRDb3VudE9mVXNlclNpZGUoZSl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZShlKXx8X2Uudyh0aGlzLl9uK1wiLmFkZEZhaWxlZENvdW50T2ZVc2VyU2lkZSBpbnZhbGlkIGtleTpcIixlKX1hZGRDb3N0KGUsdCl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZENvc3QoZSx0KXx8X2Uudyh0aGlzLl9uK1wiLmFkZENvc3QgaW52YWxpZCBrZXkgb3IgY29zdDpcIixlLHQpfWFkZEZpbGVTaXplKGUsdCl7dGhpcy5fcmF0ZU1lc3NhZ2VTZW50LmFkZEZpbGVTaXplKGUsdCl8fF9lLncodGhpcy5fbitcIi5hZGRGaWxlU2l6ZSBpbnZhbGlkIGtleSBvciBzaXplOlwiLGUsdCl9YWRkTWVzc2FnZVNlcXVlbmNlKGUpe3RoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuYWRkTWVzc2FnZVNlcXVlbmNlKGUpfHxfZS53KHRoaXMuX24rXCIuYWRkTWVzc2FnZVNlcXVlbmNlIGludmFsaWQga2V5OlwiLGUua2V5KX1fZ2V0UXVhbGl0eUl0ZW0oZSl7bGV0IHQ9e30scz1mblt0aGlzLmdldE5ldHdvcmtUeXBlKCldO3dlKHMpJiYocz04KTtjb25zdCBvPXtxdWFsaXR5VHlwZTptbltlXSx0aW1lc3RhbXA6Y2UoKSxuZXR3b3JrVHlwZTpzLGV4dGVuc2lvbjpcIlwifTtzd2l0Y2goZSl7Y2FzZSBybjp0PXRoaXMuX2F2Z1JUVC5nZXRTdGF0UmVzdWx0KCk7YnJlYWs7Y2FzZSBhbjp0PXRoaXMuX2F2Z0UyRURlbGF5LmdldFN0YXRSZXN1bHQoKTticmVhaztjYXNlIHVuOmNhc2UgY246Y2FzZSBsbjpjYXNlIGRuOmNhc2UgcG46dD10aGlzLl9yYXRlTWVzc2FnZVNlbnQuZ2V0U3RhdFJlc3VsdChlKTticmVhaztjYXNlIGhuOmNhc2UgZ246Y2FzZSBfbjp0PXRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQuZ2V0U3RhdFJlc3VsdChlKX1yZXR1cm4gbnVsbD09PXQ/bnVsbDp7Li4ubywuLi50fX1fcmVwb3J0KGUpe2xldCB0PVtdLHM9bnVsbDt3ZShlKT90aGlzLl9xdWFsaXR5SXRlbXMuZm9yRWFjaChlPT57cz10aGlzLl9nZXRRdWFsaXR5SXRlbShlKSxudWxsIT09cyYmKHMucmVwb3J0SW5kZXg9dGhpcy5yZXBvcnRJbmRleCxzLndob2xlUGVyaW9kPXRoaXMud2hvbGVQZXJpb2QsdC5wdXNoKHMpKX0pOihzPXRoaXMuX2dldFF1YWxpdHlJdGVtKGUpLG51bGwhPT1zJiYocy5yZXBvcnRJbmRleD10aGlzLnJlcG9ydEluZGV4LHMud2hvbGVQZXJpb2Q9dGhpcy53aG9sZVBlcmlvZCx0LnB1c2gocykpKSxfZS5kKHRoaXMuX24rXCIuX3JlcG9ydFwiLHQpLHRoaXMuX3N0YXRJbmZvQXJyLmxlbmd0aD4wJiYodD10LmNvbmNhdCh0aGlzLl9zdGF0SW5mb0FyciksdGhpcy5fc3RhdEluZm9BcnI9W10pO2NvbnN0IG89dGhpcy5nZXRNb2R1bGUobXMpLGk9by5nZXRTREtBcHBJRCgpLG49by5nZXRUaW55SUQoKTttdCh0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1QsaSkmJiFNdCh0aGlzLlJFUE9SVF9USU5ZSURfV0hJVEVMSVNULG4pJiYodD1bXSksdC5sZW5ndGg+MCYmdGhpcy5fZG9SZXBvcnQodCl9X2RvUmVwb3J0KGUpe2NvbnN0IHQ9e2hlYWRlcjpZcih0aGlzKSxxdWFsaXR5OmV9O3RoaXMucmVxdWVzdCh7cHJvdG9jb2xOYW1lOkdpLHJlcXVlc3REYXRhOnsuLi50fX0pLnRoZW4oKCk9Pnt0aGlzLnJlcG9ydEluZGV4KyssdGhpcy53aG9sZVBlcmlvZD0hMX0pLmNhdGNoKHQ9PntfZS53KGAke3RoaXMuX259Ll9kb1JlcG9ydCwgb25saW5lOiR7dGhpcy5nZXROZXR3b3JrVHlwZSgpfSBlcnJvcjpgLHQpLHRoaXMuX3N0YXRJbmZvQXJyPXRoaXMuX3N0YXRJbmZvQXJyLmNvbmNhdChlKSx0aGlzLl9mbHVzaEF0T25jZSgpfSl9X2ZsdXNoQXRPbmNlKCl7Y29uc3QgZT10aGlzLmdldE1vZHVsZShNcyksdD1lLmdldEl0ZW0odGhpcy5UQUcsITEpLHM9dGhpcy5fc3RhdEluZm9BcnIsbz10aGlzLl9uK1wiLl9mbHVzaEF0T25jZVwiO2lmKEx0KHQpKV9lLmwoYCR7b30gY291bnQ6JHtzLmxlbmd0aH1gKSxlLnNldEl0ZW0odGhpcy5UQUcscywhMCwhMSk7ZWxzZXtsZXQgaT1zLmNvbmNhdCh0KTtpLmxlbmd0aD4xMCYmKGk9aS5zbGljZSgwLDEwKSksX2UubChgJHtvfSBjb3VudDoke2kubGVuZ3RofWApLGUuc2V0SXRlbSh0aGlzLlRBRyxpLCEwLCExKX10aGlzLl9zdGF0SW5mb0Fycj1bXX1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl9yZXBvcnQoKSx0aGlzLnJlcG9ydEluZGV4PTAsdGhpcy53aG9sZVBlcmlvZD0hMSx0aGlzLlJFUE9SVF9TREtBUFBJRF9CTEFDS0xJU1Q9W10sdGhpcy5SRVBPUlRfVElOWUlEX1dISVRFTElTVD1bXSx0aGlzLl9hdmdSVFQucmVzZXQoKSx0aGlzLl9hdmdFMkVEZWxheS5yZXNldCgpLHRoaXMuX3JhdGVNZXNzYWdlU2VudC5yZXNldCgpLHRoaXMuX3JhdGVNZXNzYWdlUmVjZWl2ZWQucmVzZXQoKX19Y2xhc3MgeGF7Y29uc3RydWN0b3IoZSl7THQoZSl8fCh0aGlzLnVzZXJJRD1lLnVzZXJJRHx8XCJcIix0aGlzLm5pY2s9ZS5uaWNrfHxcIlwiLHRoaXMuYXZhdGFyPWUuYXZhdGFyfHxcIlwiLHRoaXMudGltZT1lLnRpbWV8fDAsdGhpcy5zb3VyY2U9ZS5zb3VyY2V8fFwiXCIsdGhpcy53b3JkaW5nPWUud29yZGluZ3x8XCJcIix0aGlzLnR5cGU9ZS50eXBlfHxcIlwiKX19Y2xhc3MgVmF7Y29uc3RydWN0b3IoZSl7dGhpcy5fc25zTW9kdWxlPWUsdGhpcy5fbj1cIkZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlclwiLHRoaXMuX3N0YXJ0VGltZT0wLHRoaXMuX21heExpbWl0ZWQ9MTAwLHRoaXMuX2N1cnJlbnRTZXF1ZW5jZT0wLHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwPW5ldyBNYXAsdGhpcy5fdW5yZWFkQ291bnQ9MH1nZXRMb2NhbEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpe3JldHVybntmcmllbmRBcHBsaWNhdGlvbkxpc3Q6Wy4uLnRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLnZhbHVlcygpXSx1bnJlYWRDb3VudDp0aGlzLl91bnJlYWRDb3VudH19X29uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZCgpe3RoaXMuX3Nuc01vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkZSSUVORF9BUFBMSUNBVElPTl9MSVNUX1VQREFURUQse2ZyaWVuZEFwcGxpY2F0aW9uTGlzdDpbLi4udGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAudmFsdWVzKCldLHVucmVhZENvdW50OnRoaXMuX3VucmVhZENvdW50fSl9b25GcmllbmRBcHBsaWNhdGlvblJlYWQoKXt0aGlzLl91bnJlYWRDb3VudD0wLHRoaXMuX29uRnJpZW5kQXBwbGljYXRpb25MaXN0VXBkYXRlZCgpfW9uRnJpZW5kQXBwbGljYXRpb25BZGRlZChlLHMpe2lmKEx0KGUpKXJldHVybjtsZXQgbz1cIlwiO289cz09PXRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpP3QuU05TX0FQUExJQ0FUSU9OX1NFTlRfQllfTUU6dC5TTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRTtsZXQgaT0hMTtlLmZvckVhY2goZT0+e2NvbnN0IHM9YCR7ZS51c2VySUR9XyR7b31gO28hPT10LlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FfHx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbk1hcC5oYXMocyl8fCh0aGlzLl91bnJlYWRDb3VudCs9MSksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuc2V0KHMsbmV3IHhhKHsuLi5lLHR5cGU6b30pKSxpPSEwfSksaSYmdGhpcy5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9b25GcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWQoZSl7THQoZSl8fHRoaXMuZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0KCl9Z2V0RnJpZW5kQXBwbGljYXRpb25MaXN0KCl7Y29uc3QgZT10aGlzLl9uK1wiLmdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdFwiLHM9bmV3IENuKFwiZ2V0RnJpZW5kQXBwbGljYXRpb25MaXN0XCIpO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm5vLHJlcXVlc3REYXRhOnthcHBsaWNhdGlvblR5cGU6dC5TTlNfQVBQTElDQVRJT05fVFlQRV9CT1RILGZyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLG1heExpbWl0ZWQ6dGhpcy5fbWF4TGltaXRlZCxzdGFydFRpbWU6dGhpcy5fc3RhcnRUaW1lLGxhc3RTZXF1ZW5jZTp0aGlzLl9jdXJyZW50U2VxdWVuY2V9fSkudGhlbih0PT57Y29uc3R7cmVzdWx0TGlzdDpvLHVucmVhZENvdW50Omksc3RhcnRUaW1lOm4sY3VycmVudFNlcXVlbmNlOnJ9PXQuZGF0YTt0aGlzLl9zdGFydFRpbWU9bix0aGlzLl9jdXJyZW50U2VxdWVuY2U9cix0aGlzLl91bnJlYWRDb3VudD1pO2NvbnN0IGE9YmUobyk/by5sZW5ndGg6MDtzLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5zZXRNZXNzYWdlKGBhcHBsaWNhdGlvbkNvdW50OiR7YX0gdW5yZWFkQ291bnQ6JHtpfWApLmVuZCgpLF9lLmkoYCR7ZX0gb2suIGFwcGxpY2F0aW9uQ291bnQ6JHthfSB1bnJlYWRDb3VudDoke2l9YCksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuY2xlYXIoKSxiZShvKSYmby5mb3JFYWNoKGU9Pntjb25zdHt1c2VySUQ6dCx0eXBlOnN9PWUsbz1uZXcgeGEoZSk7dGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuc2V0KGAke3R9XyR7c31gLG8pfSksdGhpcy5fb25GcmllbmRBcHBsaWNhdGlvbkxpc3RVcGRhdGVkKCl9KS5jYXRjaCh0PT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLG9dKT0+e3Muc2V0RXJyb3IodCxlLG8pLmVuZCgpfSksX2UudyhlK1wiIGZhaWxlZC4gZXJyb3I6XCIsdCksVm4odCkpKX1kZWxldGVGcmllbmRBcHBsaWNhdGlvbihlKXtjb25zdCBzPXRoaXMuX24rXCIuZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIix7dXNlcklEOm8sdHlwZTppfT1lO2xldCBuPWk7aWYoKCFufHxuIT09dC5TTlNfQVBQTElDQVRJT05fU0VOVF9CWV9NRSYmbiE9PXQuU05TX0FQUExJQ0FUSU9OX1NFTlRfVE9fTUUpJiYobj10LlNOU19BUFBMSUNBVElPTl9TRU5UX1RPX01FKSwhdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuaGFzKGAke299XyR7bn1gKSlyZXR1cm4gVm4oe2NvZGU6bm4uRlJJRU5EX0FQUExJQ0FUSU9OX05PVF9FWElTVH0pO2NvbnN0IHI9bmV3IENuKFwiZGVsZXRlRnJpZW5kQXBwbGljYXRpb25cIik7ci5zZXRNZXNzYWdlKGB1c2VySUQ6JHtvfSB0eXBlOiR7bn1gKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpybyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksdXNlcklETGlzdDpbb10sdHlwZTpufX0pLnRoZW4oZT0+e2NvbnN0e3Jlc3VsdExpc3Q6dH09ZS5kYXRhLHt0bzppLHJlc3VsdENvZGU6YSxyZXN1bHRJbmZvOnV9PXRbMF07cmV0dXJuIHIuc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwicmVzdWx0TGlzdDpcIitKU09OLnN0cmluZ2lmeSh0KSkuZW5kKCksX2UuaShgJHtzfSBvay4gdXNlcklEOiR7b30gdHlwZToke259YCksMD09PWE/d24oKTpWbih7dXNlcklEOmksY29kZTphLG1lc3NhZ2U6dX0pfSkuY2F0Y2goZT0+KHRoaXMuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntyLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncocytcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9YWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSl7Y29uc3Qgcz10aGlzLl9uK1wiLmFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uXCIse3VzZXJJRDpvLHJlbWFyazppLHRhZzpuLHR5cGU6cn09ZTtsZXQgYT1yOyghYXx8YSE9PXQuU05TX0FQUExJQ0FUSU9OX0FHUkVFJiZhIT09dC5TTlNfQVBQTElDQVRJT05fQUdSRUVfQU5EX0FERCkmJihhPXQuU05TX0FQUExJQ0FUSU9OX0FHUkVFX0FORF9BREQpO2NvbnN0IHU9bmV3IENuKFwiYWNjZXB0RnJpZW5kQXBwbGljYXRpb25cIik7dS5zZXRNZXNzYWdlKGB1c2VySUQ6JHtvfSB0eXBlOiR7YX1gKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTppbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCkscmVzcG9uc2VGcmllbmRJdGVtOlt7dXNlcklEOm8scmVtYXJrOmksdGFnOm4sYWN0aW9uOmF9XX19KS50aGVuKGU9Pnt1LnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKTtjb25zdHtyZXN1bHRMaXN0OnR9PWUuZGF0YSx7cmVzdWx0Q29kZTppLHJlc3VsdEluZm86bn09dFswXTtpZigwIT09aSlyZXR1cm4gVm4oe2NvZGU6aSxtZXNzYWdlOm59KTtfZS5pKGAke3N9IG9rLiB1c2VySUQ6JHtvfSB0eXBlOiR7YX1gKX0pLmNhdGNoKGU9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57dS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHMrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfXJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5yZWZ1c2VGcmllbmRBcHBsaWNhdGlvblwiLHt1c2VySUQ6c309ZSxvPW5ldyBDbihcInJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uXCIpO28uc2V0TWVzc2FnZShcInVzZXJJRDpcIitzKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTppbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCkscmVzcG9uc2VGcmllbmRJdGVtOlt7dXNlcklEOnMsYWN0aW9uOlwiUmVzcG9uc2VfQWN0aW9uX1JlamVjdFwifV19fSkudGhlbihlPT57by5zZXROZXR3b3JrVHlwZSh0aGlzLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCk7Y29uc3R7cmVzdWx0TGlzdDppfT1lLmRhdGEse3Jlc3VsdENvZGU6bixyZXN1bHRJbmZvOnJ9PWlbMF07aWYoMCE9PW4pcmV0dXJuIFZuKHtjb2RlOm4sbWVzc2FnZTpyfSk7X2UuaShgJHt0fSBvay4gdXNlcklEOiR7c31gKX0pLmNhdGNoKGU9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfV9vbkZyaWVuZEFwcGxpY2F0aW9uUHJvY2Vzc2VkKGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm47bGV0IHM9ITE7ZS5mb3JFYWNoKGU9Pntjb25zdCBvPWAke2UudG99XyR7dC5TTlNfQVBQTElDQVRJT05fU0VOVF9UT19NRX1gO3RoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLmhhcyhvKSYmKHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uTWFwLmRlbGV0ZShvKSx0aGlzLl91bnJlYWRDb3VudC09MSxzPSEwKX0pLHRoaXMuX3VucmVhZENvdW50PDAmJih0aGlzLl91bnJlYWRDb3VudD0wKSxzJiZ0aGlzLl9vbkZyaWVuZEFwcGxpY2F0aW9uTGlzdFVwZGF0ZWQoKX1zZXRGcmllbmRBcHBsaWNhdGlvblJlYWQoKXtjb25zdCBlPXRoaXMuX24rXCIuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkXCIsdD1uZXcgQ24oXCJzZXRGcmllbmRBcHBsaWNhdGlvblJlYWRcIik7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6YW8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLGxhdGVzdFRpbWVTdGFtcDpfdChjZSgpLzFlMywwKX19KS50aGVuKHM9Pnt0LnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5pKGUrXCIgb2tcIiksdGhpcy5fdW5yZWFkQ291bnQ9MH0pLmNhdGNoKHM9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW2Usb10pPT57dC5zZXRFcnJvcihzLGUsbykuZW5kKCl9KSxfZS53KGUrXCIgZmFpbGVkLiBlcnJvcjpcIixzKSxWbihzKSkpfXJlc2V0KCl7dGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX21heExpbWl0ZWQ9MTAwLHRoaXMuX2N1cnJlbnRTZXF1ZW5jZT0wLHRoaXMuX3VucmVhZENvdW50PTAsdGhpcy5fZnJpZW5kQXBwbGljYXRpb25NYXAuY2xlYXIoKX19Y2xhc3MgQmF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnVzZXJJRD1lLHRoaXMucmVtYXJrPVwiXCIsdGhpcy5ncm91cExpc3Q9W10sdGhpcy5zb3VyY2U9XCJcIix0aGlzLmFkZFRpbWU9MCx0aGlzLmZyaWVuZEN1c3RvbUZpZWxkPVtdLHRoaXMudGltZXN0YW1wPTA7Y29uc3Qgcz17fSxvPVtdO2lmKHMudXNlcklEPWUsIUx0KHQpKXtsZXQgZT1cIlwiLGk9XCJcIjtmb3IobGV0IG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoZT10W25dLnRhZyxpPXRbbl0udmFsdWUsZS5pbmRleE9mKFwiVGFnX1NOU19DdXN0b21cIik+LTEpdGhpcy5mcmllbmRDdXN0b21GaWVsZC5wdXNoKHtrZXk6ZSx2YWx1ZTppfSk7ZWxzZSBpZihlLmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIik+LTEpby5wdXNoKHtrZXk6ZSx2YWx1ZTppfSk7ZWxzZSBzd2l0Y2goZSl7Y2FzZSBNZS5OSUNLOnMubmljaz1pO2JyZWFrO2Nhc2UgTWUuR0VOREVSOnMuZ2VuZGVyPWk7YnJlYWs7Y2FzZSBNZS5CSVJUSERBWTpzLmJpcnRoZGF5PWk7YnJlYWs7Y2FzZSBNZS5MT0NBVElPTjpzLmxvY2F0aW9uPWk7YnJlYWs7Y2FzZSBNZS5TRUxGU0lHTkFUVVJFOnMuc2VsZlNpZ25hdHVyZT1pO2JyZWFrO2Nhc2UgTWUuQUxMT1dUWVBFOnMuYWxsb3dUeXBlPWk7YnJlYWs7Y2FzZSBNZS5MQU5HVUFHRTpzLmxhbmd1YWdlPWk7YnJlYWs7Y2FzZSBNZS5BVkFUQVI6cy5hdmF0YXI9aTticmVhaztjYXNlIE1lLk1FU1NBR0VTRVRUSU5HUzpzLm1lc3NhZ2VTZXR0aW5ncz1pO2JyZWFrO2Nhc2UgTWUuQURNSU5GT1JCSURUWVBFOnMuYWRtaW5Gb3JiaWRUeXBlPWk7YnJlYWs7Y2FzZSBNZS5MRVZFTDpzLmxldmVsPWk7YnJlYWs7Y2FzZSBNZS5ST0xFOnMucm9sZT1pO2JyZWFrO2Nhc2UgSWU6dGhpcy5yZW1hcms9aTticmVhaztjYXNlIHllOnRoaXMuYWRkVGltZT1pO2JyZWFrO2Nhc2UgZmU6dGhpcy5ncm91cExpc3Q9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpKSk7YnJlYWs7Y2FzZSBDZTp0aGlzLnNvdXJjZT1pO2JyZWFrO2Nhc2UgVGU6YnJlYWs7ZGVmYXVsdDpfZS5sKFwic25zUHJvZmlsZUl0ZW0gdW5rbm93biB0YWctPlwiLHRbbl0udGFnKX19dGhpcy5wcm9maWxlPW5ldyB0cih7Li4ucyxwcm9maWxlQ3VzdG9tRmllbGQ6b30pfXZhbGlkYXRlKGUpe2xldCB0PSEwLHM9XCJcIjtpZihMdChlKSlyZXR1cm57dmFsaWQ6ITEsdGlwczpcImVtcHR5IG9wdGlvbnNcIn07aWYoZS5wcm9maWxlQ3VzdG9tRmllbGQpe2NvbnN0IHQ9ZS5wcm9maWxlQ3VzdG9tRmllbGQubGVuZ3RoO2xldCBzPW51bGw7Zm9yKGxldCBvPTA7bzx0O28rKyl7aWYocz1lLnByb2ZpbGVDdXN0b21GaWVsZFtvXSwhVWUocy5rZXkpfHwtMT09PXMua2V5LmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIikpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCJUaGUgcHJlZml4IG9mIGtleXMgb2YgdGhlIGN1c3RvbSBwcm9maWxlIGtleS12YWx1ZSBwYWlycyAod2hpY2ggaXMgcHJvZmlsZUN1c3RvbUZpZWxkKSBtdXN0IGJlIFRhZ19Qcm9maWxlX0N1c3RvbVwifTtpZighVWUocy52YWx1ZSkpcmV0dXJue3ZhbGlkOiExLHRpcHM6XCJUaGUgdHlwZSBvZiB2YWx1ZXMgb2YgdGhlIGN1c3RvbSBwcm9maWxlIGtleS12YWx1ZSBwYWlycyAod2hpY2ggaXMgcHJvZmlsZUN1c3RvbUZpZWxkKSBtdXN0IGJlIFN0cmluZ1wifX19Zm9yKGNvbnN0IG8gaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxvKSl7aWYoXCJwcm9maWxlQ3VzdG9tRmllbGRcIj09PW8pY29udGludWU7aWYoTHQoZVtvXSkmJiFVZShlW29dKSYmIUdlKGVbb10pKXtzPVwia2V5OlwiK28rXCIsIGludmFsaWQgdmFsdWU6XCIrZVtvXSx0PSExO2NvbnRpbnVlfXN3aXRjaChvKXtjYXNlXCJuaWNrXCI6VWUoZVtvXSl8fChzPVwibmljayBtdXN0IGJlIGEgc3RyaW5nXCIsdD0hMSksS2UoZVtvXSk+NTAwJiYocz1gbmljayBuYW1lIGxpbWl0ZWQ6IG11c3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDUwMCBieXRlcywgY3VycmVudCBzaXplOiAke0tlKGVbb10pfSBieXRlc2AsdD0hMSk7YnJlYWs7Y2FzZVwiZ2VuZGVyXCI6emUoRGUsZS5nZW5kZXIpfHwocz1cImtleTpnZW5kZXIsIGludmFsaWQgdmFsdWU6XCIrZS5nZW5kZXIsdD0hMSk7YnJlYWs7Y2FzZVwiYmlydGhkYXlcIjpHZShlLmJpcnRoZGF5KXx8KHM9XCJiaXJ0aGRheSBtdXN0IGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwibG9jYXRpb25cIjpVZShlLmxvY2F0aW9uKXx8KHM9XCJsb2NhdGlvbiBtdXN0IGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwic2VsZlNpZ25hdHVyZVwiOlVlKGUuc2VsZlNpZ25hdHVyZSl8fChzPVwic2VsZlNpZ25hdHVyZSBtdXN0IGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWxsb3dUeXBlXCI6emUoU2UsZS5hbGxvd1R5cGUpfHwocz1cImtleTphbGxvd1R5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hbGxvd1R5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGFuZ3VhZ2VcIjpHZShlLmxhbmd1YWdlKXx8KHM9XCJsYW5ndWFnZSBtdXN0IGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYXZhdGFyXCI6VWUoZS5hdmF0YXIpfHwocz1cImF2YXRhciBtdXN0IGJlIGEgc3RyaW5nXCIsdD0hMSk7YnJlYWs7Y2FzZVwibWVzc2FnZVNldHRpbmdzXCI6MCE9PWUubWVzc2FnZVNldHRpbmdzJiYxIT09ZS5tZXNzYWdlU2V0dGluZ3MmJihzPVwibWVzc2FnZVNldHRpbmdzIG11c3QgYmUgMCBvciAxXCIsdD0hMSk7YnJlYWs7Y2FzZVwiYWRtaW5Gb3JiaWRUeXBlXCI6emUoRWUsZS5hZG1pbkZvcmJpZFR5cGUpfHwocz1cImtleTphZG1pbkZvcmJpZFR5cGUsIGludmFsaWQgdmFsdWU6XCIrZS5hZG1pbkZvcmJpZFR5cGUsdD0hMSk7YnJlYWs7Y2FzZVwibGV2ZWxcIjpHZShlLmxldmVsKXx8KHM9XCJsZXZlbCBtdXN0IGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7Y2FzZVwicm9sZVwiOkdlKGUucm9sZSl8fChzPVwicm9sZSBtdXN0IGJlIGEgbnVtYmVyXCIsdD0hMSk7YnJlYWs7ZGVmYXVsdDpzPVwidW5rbm93biBrZXk6XCIrbytcIiAgXCIrZVtvXSx0PSExfX1yZXR1cm57dmFsaWQ6dCx0aXBzOnN9fXVwZGF0ZShlKXtsZXQgdD1cIlwiLHM9XCJcIjtjb25zdCBvPVtdO3RoaXMuZnJpZW5kQ3VzdG9tRmllbGQuZm9yRWFjaChlPT57by5wdXNoKGUua2V5KX0pO2ZvcihsZXQgaT0wLG49ZS5sZW5ndGg7aTxuO2krKylpZih0PWVbaV0udGFnLHM9ZVtpXS52YWx1ZSx0LmluZGV4T2YoXCJUYWdfU05TX0N1c3RvbVwiKT4tMSlvLmluZGV4T2YodCk+LTE/dGhpcy5mcmllbmRDdXN0b21GaWVsZC5mb3JFYWNoKGU9PntlLmtleT09PXQmJihlLnZhbHVlPXMpfSk6dGhpcy5mcmllbmRDdXN0b21GaWVsZC5wdXNoKHtrZXk6dCx2YWx1ZTpzfSk7ZWxzZSBpZih0LmluZGV4T2YoXCJUYWdfUHJvZmlsZV9DdXN0b21cIik+LTEpe2xldCBlPSExO3RoaXMucHJvZmlsZS5wcm9maWxlQ3VzdG9tRmllbGQuZm9yRWFjaChvPT57by5rZXk9PT10JiYoby52YWx1ZT1zLGU9ITApfSksZXx8dGhpcy5wcm9maWxlLnByb2ZpbGVDdXN0b21GaWVsZC5wdXNoKHtrZXk6dCx2YWx1ZTpzfSl9ZWxzZSBzd2l0Y2godCl7Y2FzZSBNZS5OSUNLOnRoaXMucHJvZmlsZS5uaWNrPXM7YnJlYWs7Y2FzZSBNZS5HRU5ERVI6dGhpcy5wcm9maWxlLmdlbmRlcj1zO2JyZWFrO2Nhc2UgTWUuQklSVEhEQVk6dGhpcy5wcm9maWxlLmJpcnRoZGF5PXM7YnJlYWs7Y2FzZSBNZS5MT0NBVElPTjp0aGlzLnByb2ZpbGUubG9jYXRpb249czticmVhaztjYXNlIE1lLlNFTEZTSUdOQVRVUkU6dGhpcy5wcm9maWxlLnNlbGZTaWduYXR1cmU9czticmVhaztjYXNlIE1lLkFMTE9XVFlQRTp0aGlzLnByb2ZpbGUuYWxsb3dUeXBlPXM7YnJlYWs7Y2FzZSBNZS5MQU5HVUFHRTp0aGlzLnByb2ZpbGUubGFuZ3VhZ2U9czticmVhaztjYXNlIE1lLkFWQVRBUjp0aGlzLnByb2ZpbGUuYXZhdGFyPXM7YnJlYWs7Y2FzZSBNZS5NRVNTQUdFU0VUVElOR1M6dGhpcy5wcm9maWxlLm1lc3NhZ2VTZXR0aW5ncz1zO2JyZWFrO2Nhc2UgTWUuQURNSU5GT1JCSURUWVBFOnRoaXMucHJvZmlsZS5hZG1pbkZvcmJpZFR5cGU9czticmVhaztjYXNlIE1lLkxFVkVMOnRoaXMucHJvZmlsZS5sZXZlbD1zO2JyZWFrO2Nhc2UgTWUuUk9MRTp0aGlzLnByb2ZpbGUucm9sZT1zO2JyZWFrO2Nhc2UgSWU6dGhpcy5yZW1hcms9czticmVhaztjYXNlIHllOnRoaXMuYWRkVGltZT1zO2JyZWFrO2Nhc2UgZmU6dGhpcy5ncm91cExpc3Q9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzKSk7YnJlYWs7Y2FzZSBDZTp0aGlzLnNvdXJjZT1zO2JyZWFrO2Nhc2UgVGU6YnJlYWs7ZGVmYXVsdDpfZS5kKFwic25zUHJvZmlsZUl0ZW0gdW5rb3duIHRhZy0+XCIsZVtpXS50YWcpfXRoaXMudGltZXN0YW1wPURhdGUubm93KCksby5sZW5ndGg9MH11cGRhdGVQcm9maWxlKGUpe3RoaXMucHJvZmlsZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSx0aGlzLnRpbWVzdGFtcD1EYXRlLm5vdygpfWFkZFRvR3JvdXBMaXN0KGUpey0xPT09dGhpcy5ncm91cExpc3QuaW5kZXhPZihlKSYmKHRoaXMuZ3JvdXBMaXN0LnB1c2goZSksdGhpcy5jb3VudD10aGlzLmdyb3VwTGlzdC5sZW5ndGgpfXJlbW92ZUZyb21Hcm91cExpc3QoZSl7Y29uc3QgdD10aGlzLmdyb3VwTGlzdC5pbmRleE9mKGUpO3Q+LTEmJih0aGlzLmdyb3VwTGlzdC5zcGxpY2UodCwxKSx0aGlzLmNvdW50PXRoaXMuZ3JvdXBMaXN0Lmxlbmd0aCl9fWNsYXNzIEhhe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3Nuc01vZHVsZT1lLHRoaXMuX249XCJGcmllbmRIYW5kbGVyXCIsdGhpcy5fZnJpZW5kTWFwPW5ldyBNYXAsdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9MCx0aGlzLl9jdXN0b21TZXF1ZW5jZT0wLHRoaXMuX2V4cGlyYXRpb25UaW1lPTE4ZTR9Z2V0TG9jYWxGcmllbmRMaXN0KCl7cmV0dXJuWy4uLnRoaXMuX2ZyaWVuZE1hcC52YWx1ZXMoKV19Z2V0RnJpZW5kUmVtYXJrKGUpe3JldHVybiB0aGlzLl9mcmllbmRNYXAuaGFzKGUpP3RoaXMuX2ZyaWVuZE1hcC5nZXQoZSkucmVtYXJrOlwiXCJ9b25GcmllbmRQcm9maWxlTW9kaWZpZWQoZSl7Y29uc3R7ZGF0YUxpc3Q6c309ZTtpZihMdChzKSlyZXR1cm47Y29uc3Qgbz10aGlzLl9zbnNNb2R1bGUuZ2V0TW9kdWxlKF9zKTtzLmZvckVhY2goZT0+e2NvbnN0e3VzZXJJRDpzLHByb2ZpbGVMaXN0Oml9PWU7aWYodGhpcy5pc015RnJpZW5kKHMpKXtfZS5sKGAke3RoaXMuX259Lm9uRnJpZW5kUHJvZmlsZU1vZGlmaWVkLiBmcmllbmQgYWNjb3VudDoke3N9LCBwcm9maWxlTGlzdDoke0pTT04uc3RyaW5naWZ5KGkpfWApO2NvbnN0IGU9dGhpcy5fZnJpZW5kTWFwLmdldChzKTtlLnVwZGF0ZShpKSxvLm1vZGlmeU1lc3NhZ2VTZW50QnlQZWVyKHtjb252ZXJzYXRpb25JRDpgJHt0LkNPTlZfQzJDfSR7c31gLGxhdGVzdE5pY2s6ZS5wcm9maWxlLm5pY2ssbGF0ZXN0QXZhdGFyOmUucHJvZmlsZS5hdmF0YXJ9KX19KSx0aGlzLl9vbkZyaWVuZExpc3RVcGRhdGVkKCl9b25GcmllbmRBZGRlZChlKXswIT09ZS5sZW5ndGgmJihfZS5sKGAke3RoaXMuX259Lm9uRnJpZW5kQWRkZWQgdXNlcklETGlzdDoke2V9YCksZS5mb3JFYWNoKGU9Pnt0aGlzLl9mcmllbmRNYXAuc2V0KGUsbmV3IEJhKGUpKX0pLHRoaXMuZ2V0RnJpZW5kUHJvZmlsZSh7dXNlcklETGlzdDplfSkudGhlbih0PT57ZS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMuX2ZyaWVuZE1hcC5nZXQoZSk7dC5ncm91cExpc3QubGVuZ3RoPjAmJnRoaXMuX3Nuc01vZHVsZS51cGRhdGVXaGVuRnJpZW5kQWRkZWQoe25hbWVMaXN0OnQuZ3JvdXBMaXN0LHVzZXJJRDplfSl9KSx0aGlzLl9vbkZyaWVuZExpc3RVcGRhdGVkKCl9KSl9b25GcmllbmREZWxldGVkKGUpezAhPT1lLmxlbmd0aCYmKF9lLmwoYCR7dGhpcy5fbn0ub25GcmllbmREZWxldGVkIHVzZXJJRExpc3Q6JHtlfWApLGUuZm9yRWFjaChlPT57Y29uc3QgdD10aGlzLl9mcmllbmRNYXAuZ2V0KGUpO3QuZ3JvdXBMaXN0Lmxlbmd0aD4wJiZ0aGlzLl9zbnNNb2R1bGUudXBkYXRlV2hlbkZyaWVuZERlbGV0ZWQoe25hbWVMaXN0OnQuZ3JvdXBMaXN0LHVzZXJJRDplfSksdGhpcy5fZnJpZW5kTWFwLmRlbGV0ZShlKX0pLHRoaXMuX29uRnJpZW5kTGlzdFVwZGF0ZWQoKSl9X29uRnJpZW5kTGlzdFVwZGF0ZWQoKXt0aGlzLl9zbnNNb2R1bGUuZW1pdE91dGVyRXZlbnQoZS5GUklFTkRfTElTVF9VUERBVEVEKTt0aGlzLl9zbnNNb2R1bGUuZ2V0TW9kdWxlKF9zKS5jaGVja0FuZFBhdGNoUmVtYXJrKCl9Z2V0RnJpZW5kUHJvZmlsZShlKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0RnJpZW5kUHJvZmlsZVwiLHt1c2VySURMaXN0OnN9PWUsbz1bXSxpPVtdLG49W107aWYocy5mb3JFYWNoKGU9PntpZih0aGlzLl9mcmllbmRNYXAuaGFzKGUpKXtjb25zdCB0PXRoaXMuX2ZyaWVuZE1hcC5nZXQoZSk7RGF0ZS5ub3coKS10LnRpbWVzdGFtcDx0aGlzLl9leHBpcmF0aW9uVGltZT9pLnB1c2godCk6bi5wdXNoKGUpfWVsc2Ugby5wdXNoKHt1c2VySUQ6ZSxjb2RlOm5uLk5PVF9NWV9GUklFTkQsbWVzc2FnZTp0aGlzLl9zbnNNb2R1bGUuZ2V0RXJyb3JNZXNzYWdlKG5uLk5PVF9NWV9GUklFTkQpfSl9KSwwPT09bi5sZW5ndGgpcmV0dXJuIF9lLmkodCtcIiBuZXdVc2VySURMaXN0IGlzIGVtcHR5XCIpLHhuKHtmcmllbmRMaXN0OmksZmFpbHVyZVVzZXJJRExpc3Q6b30pO2NvbnN0IHI9bmV3IENuKFwiZ2V0RnJpZW5kUHJvZmlsZVwiKTtyLnNldE1lc3NhZ2UoXCJ1c2VySURMaXN0OlwiK24pLF9lLmkoYCR7dH0gdXNlcklETGlzdDoke259YCk7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UXMscmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLHVzZXJJRExpc3Q6bn19KS50aGVuKGU9PntyLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5pKHQrXCIgb2tcIik7Y29uc3R7cmVzdWx0TGlzdDpzfT1lLmRhdGE7cmV0dXJuIHMuZm9yRWFjaChlPT57Y29uc3R7dG86dCxyZXN1bHRDb2RlOnMscmVzdWx0SW5mbzpuLHRhZ1ZhbHVlTGlzdDpyfT1lO2lmKHdlKHMpfHwwPT09cyl7bGV0IGU7dGhpcy5fZnJpZW5kTWFwLmhhcyh0KT8oZT10aGlzLl9mcmllbmRNYXAuZ2V0KHQpLGUudXBkYXRlKHIpKTooZT1uZXcgQmEodCxyKSx0aGlzLl9mcmllbmRNYXAuc2V0KHQsZSkpLGkucHVzaChlKX1lbHNlIG8ucHVzaCh7dXNlcklEOnQsY29kZTpzLG1lc3NhZ2U6bn0pfSksd24oe2ZyaWVuZExpc3Q6aSxmYWlsdXJlVXNlcklETGlzdDpvfSl9KS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Iuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1pc015RnJpZW5kKGUpe3JldHVybiB0aGlzLl9mcmllbmRNYXAuaGFzKGUpfXBhZ2luZ0dldEZyaWVuZExpc3QoKXtjb25zdCB0PXRoaXMuX24rXCIuZ2V0RnJpZW5kTGlzdFwiLHM9bmV3IENuKFwiZ2V0RnJpZW5kTGlzdFwiKSxvPURhdGUubm93KCk7dGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpacyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksc3RhcnRJbmRleDp0aGlzLl9zdGFydEluZGV4LHN0YW5kYXJkU2VxdWVuY2U6dGhpcy5fc3RhbmRhcmRTZXF1ZW5jZSxjdXN0b21TZXF1ZW5jZTp0aGlzLl9jdXN0b21TZXF1ZW5jZX19KS50aGVuKGk9Pntjb25zdHtmcmllbmRDb3VudDpuLHJlc3VsdExpc3Q6cixuZXh0U3RhcnRJbmRleDphLHN0YW5kYXJkU2VxdWVuY2U6dSxjdXN0b21TZXF1ZW5jZTpjLGNvbXBsZXRlRmxhZzpsfT1pLmRhdGE7dGhpcy5fc3RhcnRJbmRleD1hLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9dSx0aGlzLl9jdXN0b21TZXF1ZW5jZT1jO2NvbnN0IGQ9YGZyaWVuZENvdW50OiR7bn0gbmV4dFN0YXJ0SW5kZXg6JHthfSBzdGFuZGFyZFNlcXVlbmNlOiR7dX0gY3VzdG9tU2VxdWVuY2U6JHtjfSBjb21wbGV0ZUZsYWc6JHtsfSBjb3N0ICR7RGF0ZS5ub3coKS1vfSBtc2A7cy5zZXROZXR3b3JrVHlwZSh0aGlzLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TWVzc2FnZShkKS5lbmQoKSxfZS5pKHQrXCIgb2suXCIsZCksTHQocil8fHIuZm9yRWFjaChlPT57Y29uc3R7dG86dCx0YWdWYWx1ZUxpc3Q6c309ZTt0aGlzLl9mcmllbmRNYXAuc2V0KHQsbmV3IEJhKHQscykpfSksMD09PWw/dGhpcy5wYWdpbmdHZXRGcmllbmRMaXN0KCk6KHRoaXMuX3Nuc01vZHVsZS5lbWl0T3V0ZXJFdmVudChlLkZSSUVORF9MSVNUX1VQREFURUQpLHRoaXMuX3BhZ2luZ0dldEZyaWVuZFByb2ZpbGUoKSl9KS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LG9dKT0+e3Muc2V0RXJyb3IoZSx0LG8pLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fcGFnaW5nR2V0RnJpZW5kUHJvZmlsZSgpe2NvbnN0IGU9Wy4uLnRoaXMuX2ZyaWVuZE1hcC5rZXlzKCldLHQ9dGhpcy5fc25zTW9kdWxlLmdldE1vZHVsZShjcykscz1lLmxlbmd0aCxvPXM8PTEwMD8xOk1hdGguY2VpbChzLzEwMCk7X2UubChgJHt0aGlzLl9ufS5fcGFnaW5nR2V0RnJpZW5kUHJvZmlsZSBmcmllbmRDb3VudDoke3N9IHBhZ2VDb3VudDoke299YCk7Zm9yKGxldCBpPTA7aTxvO2krKyl0LmdldFVzZXJQcm9maWxlKHt1c2VySURMaXN0OmUuc2xpY2UoMTAwKmksMTAwKihpKzEpKX0pLnRoZW4oZT0+e2UuZGF0YS5mb3JFYWNoKGU9Pntjb25zdCB0PXRoaXMuX2ZyaWVuZE1hcC5nZXQoZS51c2VySUQpO3QmJnQudXBkYXRlUHJvZmlsZShlKX0pLHRoaXMuX29uRnJpZW5kTGlzdFVwZGF0ZWQoKX0pfWFkZEZyaWVuZChlKXtjb25zdCBzPXRoaXMuX24rXCIuYWRkRnJpZW5kXCI7aWYodGhpcy5fZnJpZW5kTWFwLmhhcyhlLnRvKSlyZXR1cm4gVm4oe2NvZGU6bm4uQUxSRUFEWV9NWV9GUklFTkR9KTtpZihlLndvcmRpbmcmJiExPT09dGhpcy5fc25zTW9kdWxlLmZpbHRlclByb2Zhbml0eShcIndvcmRpbmdcIixlKSlyZXR1cm4gVm4oe2NvZGU6bm4uUFJPRkFOSVRZX0ZPVU5EfSk7Y29uc3R7dG86byxzb3VyY2U6aSx0eXBlOm4sd29yZGluZzpyLHJlbWFyazphLGdyb3VwTmFtZTp1fT1lO2xldCBjPW47KCFjfHxjIT09dC5TTlNfQUREX1RZUEVfU0lOR0xFJiZjIT09dC5TTlNfQUREX1RZUEVfQk9USCkmJihjPXQuU05TX0FERF9UWVBFX0JPVEgpO2NvbnN0IGw9bmV3IENuKFwiYWRkRnJpZW5kXCIpO2wuc2V0TWVzc2FnZShgdG86JHtvfSBzb3VyY2U6JHtpfSB0eXBlOiR7Y31gKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpzbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksYWRkRnJpZW5kSXRlbTpbe3RvOm8sc291cmNlOmksd29yZGluZzpyLHJlbWFyazphLGdyb3VwTmFtZTp1fV0sdHlwZTpjfX0pLnRoZW4oZT0+e2NvbnN0e3Jlc3VsdExpc3Q6dH09ZS5kYXRhO2wuc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLnNldE1vcmVNZXNzYWdlKFwicmVzdWx0TGlzdDpcIitKU09OLnN0cmluZ2lmeSh0KSkuZW5kKCk7Y29uc3R7dG86byxyZXN1bHRDb2RlOmkscmVzdWx0SW5mbzpufT10WzBdO3JldHVybiBfZS5pKGAke3N9IG9rLiB0bzoke299IHR5cGU6JHtjfSBjb2RlOiR7aX1gKSx3ZShpKXx8MD09PWk/d24oe3VzZXJJRDpvLGNvZGU6MH0pOjMwNTM5PT09aT93bih7dXNlcklEOm8sY29kZTppLG1lc3NhZ2U6dGhpcy5fc25zTW9kdWxlLmdldEVycm9yTWVzc2FnZShpKX0pOlZuKHt1c2VySUQ6byxjb2RlOmksbWVzc2FnZTp0aGlzLl9zbnNNb2R1bGUuZ2V0RXJyb3JNZXNzYWdlKGkpfHxufSl9KS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2wuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1kZWxldGVGcmllbmQoZSl7Y29uc3Qgcz10aGlzLl9uK1wiLmRlbGV0ZUZyaWVuZFwiLHt1c2VySURMaXN0Om8sdHlwZTppfT1lO28ubGVuZ3RoPjFlMyYmKF9lLncoYCR7c30gJHtEdCgxZTMpfWApLG8ubGVuZ3RoPTFlMyk7Y29uc3Qgbj1bXSxyPVtdLGE9W107aWYoby5mb3JFYWNoKGU9Pnt0aGlzLl9mcmllbmRNYXAuaGFzKGUpP2EucHVzaChlKTpuLnB1c2goe3VzZXJJRDplLGNvZGU6bm4uTk9UX01ZX0ZSSUVORCxtZXNzYWdlOnRoaXMuX3Nuc01vZHVsZS5nZXRFcnJvck1lc3NhZ2Uobm4uTk9UX01ZX0ZSSUVORCl9KX0pLDA9PT1hLmxlbmd0aClyZXR1cm4geG4oe3N1Y2Nlc3NVc2VySURMaXN0OnIsZmFpbHVyZVVzZXJJRExpc3Q6bn0pO2xldCB1PWk7KCF1fHx1IT09dC5TTlNfREVMRVRFX1RZUEVfU0lOR0xFJiZ1IT09dC5TTlNfREVMRVRFX1RZUEVfQk9USCkmJih1PXQuU05TX0RFTEVURV9UWVBFX0JPVEgpO2NvbnN0IGM9bmV3IENuKFwiZGVsZXRlRnJpZW5kXCIpO2Muc2V0TWVzc2FnZShgdXNlcklETGlzdDoke2F9IHR5cGU6JHt1fWApO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnRvLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1c2VySURMaXN0OmEsdHlwZTp1fX0pLnRoZW4oZT0+e2Muc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmkocytcIiBva1wiKTtjb25zdHtyZXN1bHRMaXN0OnR9PWUuZGF0YTtyZXR1cm4gTHQodCl8fHQuZm9yRWFjaChlPT57Y29uc3R7dG86dCxyZXN1bHRDb2RlOnMscmVzdWx0SW5mbzpvfT1lO3dlKHMpfHwwPT09cz9yLnB1c2goe3VzZXJJRDp0fSk6bi5wdXNoKHt1c2VySUQ6dCxjb2RlOnMsbWVzc2FnZTpvfSl9KSx3bih7c3VjY2Vzc1VzZXJJRExpc3Q6cixmYWlsdXJlVXNlcklETGlzdDpufSl9KS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2Muc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UudyhzK1wiIGVycm9yOlwiLGUpLFZuKGUpKSl9dXBkYXRlRnJpZW5kKGUpe2NvbnN0e3VzZXJJRDp0LHJlbWFyazpzLGZyaWVuZEN1c3RvbUZpZWxkOm99PWU7aWYoIXRoaXMuX2ZyaWVuZE1hcC5oYXModCkpcmV0dXJuIFZuKHtjb2RlOm5uLk5PVF9NWV9GUklFTkR9KTtjb25zdCBpPXRoaXMuX24rXCIudXBkYXRlRnJpZW5kXCIsbj1uZXcgQ24oXCJ1cGRhdGVGcmllbmRcIik7bi5zZXRNZXNzYWdlKGB1c2VySUQ6JHt0fSByZW1hcms6JHtzfSBmcmllbmRDdXN0b21GaWVsZDoke299YCk7Y29uc3Qgcj1bXTt3ZShzKXx8ci5wdXNoKHt0YWc6SWUsdmFsdWU6c30pLGJlKG8pJiZvLmxlbmd0aD4wJiZvLmZvckVhY2goZT0+e3IucHVzaCh7dGFnOmUua2V5LHZhbHVlOmUudmFsdWV9KX0pO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOm9vLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSx1cGRhdGVJdGVtOlt7dG86dCxzbnNJdGVtOnJ9XX19KS50aGVuKGU9PntuLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5pKGkrXCIgb2tcIik7Y29uc3R7cmVzdWx0TGlzdDp0fT1lLmRhdGEse3RvOnIscmVzdWx0Q29kZTphLHJlc3VsdEluZm86dX09dFswXTtpZih3ZShhKXx8MD09PWEpe2NvbnN0IGU9dGhpcy5fZnJpZW5kTWFwLmdldChyKTtyZXR1cm4gZSYmKHdlKHMpfHwoZS5yZW1hcms9cyksYmUobykmJm8ubGVuZ3RoPjAmJlFlKGUuZnJpZW5kQ3VzdG9tRmllbGQsbyksdGhpcy5fb25GcmllbmRMaXN0VXBkYXRlZCgpKSx3bihlKX1yZXR1cm4gVm4oe2NvZGU6YSxtZXNzYWdlOnV9KX0pLmNhdGNoKGU9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57bi5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KGkrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWNoZWNrRnJpZW5kKGUpe2NvbnN0IHM9dGhpcy5fbitcIi5jaGVja0ZyaWVuZFwiLHt1c2VySURMaXN0Om8sdHlwZTppfT1lO2xldCBuPWk7KCFufHxuIT09dC5TTlNfQ0hFQ0tfVFlQRV9TSU5HTEUmJm4hPT10LlNOU19DSEVDS19UWVBFX0JPVEgpJiYobj10LlNOU19DSEVDS19UWVBFX0JPVEgpO2NvbnN0IHI9bmV3IENuKFwiY2hlY2tGcmllbmRcIik7ci5zZXRNZXNzYWdlKGB1c2VySURMaXN0OiR7b30gdHlwZToke259YCk7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6ZW8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLHVzZXJJRExpc3Q6byx0eXBlOm59fSkudGhlbihlPT57ci5zZXROZXR3b3JrVHlwZSh0aGlzLl9zbnNNb2R1bGUuZ2V0TmV0d29ya1R5cGUoKSkuZW5kKCksX2UuaShgJHtzfSBvay4gdXNlcklETGlzdDoke299IHR5cGU6JHtufWApO2NvbnN0IHQ9W10saT1bXSx7cmVzdWx0TGlzdDphfT1lLmRhdGE7cmV0dXJuIGJlKGEpJiZhLmZvckVhY2goZT0+e2NvbnN0e3RvOnMscmVsYXRpb246byxyZXN1bHRDb2RlOm4scmVzdWx0SW5mbzpyfT1lO3dlKG4pfHwwPT09bj90LnB1c2goe3VzZXJJRDpzLGNvZGU6MCxyZWxhdGlvbjpvfSk6aS5wdXNoKHt1c2VySUQ6cyxjb2RlOm4sbWVzc2FnZTpyfSl9KSx3bih7c3VjY2Vzc1VzZXJJRExpc3Q6dCxmYWlsdXJlVXNlcklETGlzdDppfSl9KS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e3Iuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2UudyhzK1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX11cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwKGUpe2NvbnN0e25hbWU6dCx1c2VySURMaXN0OnN9PWU7X2UubChgJHt0aGlzLl9ufS51cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwIGdyb3VwTmFtZToke3R9IHVzZXJJRExpc3Q6JHtzfWApLHQmJiFMdChzKSYmcy5mb3JFYWNoKGU9PntpZih0aGlzLl9mcmllbmRNYXAuaGFzKGUpKXt0aGlzLl9mcmllbmRNYXAuZ2V0KGUpLmFkZFRvR3JvdXBMaXN0KHQpfX0pfXVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwKGUpe2NvbnN0e25hbWU6dCx1c2VySURMaXN0OnN9PWU7X2UubChgJHt0aGlzLl9ufS51cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cCBncm91cE5hbWU6JHt0fSB1c2VySURMaXN0OiR7c31gKSx0JiYhTHQocykmJnMuZm9yRWFjaChlPT57aWYodGhpcy5fZnJpZW5kTWFwLmhhcyhlKSl7dGhpcy5fZnJpZW5kTWFwLmdldChlKS5yZW1vdmVGcm9tR3JvdXBMaXN0KHQpfX0pfXJlc2V0KCl7dGhpcy5fZnJpZW5kTWFwLmNsZWFyKCksdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX3N0YW5kYXJkU2VxdWVuY2U9MCx0aGlzLl9jdXN0b21TZXF1ZW5jZT0wfX1jbGFzcyBLYXtjb25zdHJ1Y3RvcihlKXtMdChlKXx8KHRoaXMubmFtZT1lLm5hbWV8fFwiXCIsdGhpcy51c2VySURMaXN0PWUudXNlcklETGlzdHx8W10sdGhpcy5jb3VudD10aGlzLnVzZXJJRExpc3QubGVuZ3RofHwwKX1hZGRUb1VzZXJJRExpc3QoZSl7LTE9PT10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKSYmKHRoaXMudXNlcklETGlzdC5wdXNoKGUpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9cmVtb3ZlRnJvbVVzZXJJRExpc3QoZSl7Y29uc3QgdD10aGlzLnVzZXJJRExpc3QuaW5kZXhPZihlKTt0Pi0xJiYodGhpcy51c2VySURMaXN0LnNwbGljZSh0LDEpLHRoaXMuY291bnQ9dGhpcy51c2VySURMaXN0Lmxlbmd0aCl9fWNsYXNzIFdhe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3Nuc01vZHVsZT1lLHRoaXMuX249XCJGcmllbmRHcm91cEhhbmRsZXJcIix0aGlzLl9mcmllbmRHcm91cE1hcD1uZXcgTWFwfWdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCl7cmV0dXJuWy4uLnRoaXMuX2ZyaWVuZEdyb3VwTWFwLnZhbHVlcygpXX1fZW1pdEZyaWVuZEdyb3VwTGlzdFVwZGF0ZWQoKXtjb25zdCB0PVsuLi50aGlzLl9mcmllbmRHcm91cE1hcC52YWx1ZXMoKV07dGhpcy5fc25zTW9kdWxlLmVtaXRPdXRlckV2ZW50KGUuRlJJRU5EX0dST1VQX0xJU1RfVVBEQVRFRCx0KX1nZXRGcmllbmRHcm91cExpc3QoKXtjb25zdCBlPXRoaXMuX24rXCIuZ2V0RnJpZW5kR3JvdXBMaXN0XCIsdD1uZXcgQ24oXCJnZXRGcmllbmRHcm91cExpc3RcIik7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6dW8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpfX0pLnRoZW4ocz0+e3Quc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpO2NvbnN0e3Jlc3VsdExpc3Q6b309cy5kYXRhO0x0KG8pP19lLmkoZStcIiBvay4gZnJpZW5kIGdyb3VwIGNvdW50OjBcIik6KF9lLmkoYCR7ZX0gb2suIGZyaWVuZCBncm91cCBjb3VudDoke28ubGVuZ3RofWApLHRoaXMuX2ZyaWVuZEdyb3VwTWFwLmNsZWFyKCksby5mb3JFYWNoKGU9Pntjb25zdCB0PW5ldyBLYShlKTt0aGlzLl9mcmllbmRHcm91cE1hcC5zZXQoZS5uYW1lLHQpfSksdGhpcy5fZW1pdEZyaWVuZEdyb3VwTGlzdFVwZGF0ZWQoKSl9KS5jYXRjaChzPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLG9dKT0+e3Quc2V0RXJyb3IocyxlLG8pLmVuZCgpfSksX2UudyhlK1wiIGVycm9yOlwiLHMpLFZuKHMpKSl9Y3JlYXRlRnJpZW5kR3JvdXAoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmNyZWF0ZUZyaWVuZEdyb3VwXCIse25hbWU6cyx1c2VySURMaXN0Om99PWU7aWYodGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKHMpKXJldHVybiBWbih7Y29kZTpubi5GUklFTkRfR1JPVVBfRVhJU1RFRH0pO2NvbnN0IGk9bmV3IENuKFwiY3JlYXRlRnJpZW5kR3JvdXBcIik7cmV0dXJuIGkuc2V0TWVzc2FnZShgbmFtZToke3N9IHVzZXJJRExpc3Q6JHtvfWApLHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6Y28scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLGdyb3VwTmFtZTpbc10sdXNlcklETGlzdDpiZShvKT9vOnZvaWQgMH19KS50aGVuKGU9PntpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSxfZS5sKGAke3R9IG9rLiBuYW1lOiR7c30gdXNlcklETGlzdDoke299YCk7Y29uc3R7cmVzdWx0TGlzdDpufT1lLmRhdGEscj1bXSxhPVtdO24mJm4uZm9yRWFjaChlPT57Y29uc3R7dG86dCxyZXN1bHRDb2RlOnMscmVzdWx0SW5mbzpvfT1lO2lmKHdlKHMpfHwwPT09cylyLnB1c2godCk7ZWxzZXtjb25zdCB0PXt1c2VySUQ6ZS50byxjb2RlOnMsbWVzc2FnZTpvfTthLnB1c2godCl9fSk7Y29uc3QgdT1uZXcgS2Eoe25hbWU6cyx1c2VySURMaXN0OnJ9KTtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBNYXAuc2V0KHMsdSksdGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAoe25hbWU6cyx1c2VySURMaXN0OnJ9KSx0aGlzLl9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpLHduKHtmcmllbmRHcm91cDp1LGZhaWx1cmVVc2VySURMaXN0OmF9KX0pLmNhdGNoKGU9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57aS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWRlbGV0ZUZyaWVuZEdyb3VwKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5kZWxldGVGcmllbmRHcm91cFwiLHtuYW1lOnN9PWU7aWYoIXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhzKSlyZXR1cm4gVm4oe2NvZGU6bm4uRlJJRU5EX0dST1VQX05PVF9FWElTVH0pO2NvbnN0IG89bmV3IENuKFwiZGVsZXRlRnJpZW5kR3JvdXBcIik7by5zZXRNZXNzYWdlKFwibmFtZTpcIitzKTtyZXR1cm4gdGhpcy5fc25zTW9kdWxlLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTpsbyxyZXF1ZXN0RGF0YTp7ZnJvbUFjY291bnQ6dGhpcy5fc25zTW9kdWxlLmdldE15VXNlcklEKCksbmFtZUxpc3Q6W3NdfX0pLnRoZW4oZT0+e28uc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoYCR7dH0gb2suIG5hbWU6JHtzfWApO2NvbnN0IGk9dGhpcy5fZnJpZW5kR3JvdXBNYXAuZ2V0KHMpO3JldHVybiBpJiYodGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwKHtuYW1lOnMsdXNlcklETGlzdDppLnVzZXJJRExpc3R9KSx0aGlzLl9mcmllbmRHcm91cE1hcC5kZWxldGUocyksaS51c2VySURMaXN0Lmxlbmd0aD0wKSx0aGlzLl9lbWl0RnJpZW5kR3JvdXBMaXN0VXBkYXRlZCgpLHduKGkpfSkuY2F0Y2goZT0+KHRoaXMuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntvLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9cmVuYW1lRnJpZW5kR3JvdXAoZSl7Y29uc3QgdD10aGlzLl9uK1wiLnJlbmFtZUZyaWVuZEdyb3VwXCIse29sZE5hbWU6cyxuZXdOYW1lOm99PWU7aWYoIXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhzKSlyZXR1cm4gVm4oe2NvZGU6bm4uRlJJRU5EX0dST1VQX05PVF9FWElTVH0pO2NvbnN0IGk9bmV3IENuKFwicmVuYW1lRnJpZW5kR3JvdXBcIik7aS5zZXRNZXNzYWdlKGBvbGROYW1lOiR7c30gbmV3TmFtZToke299YCk7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cG8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLG9sZE5hbWU6cyxuZXdOYW1lOm99fSkudGhlbigoKT0+e2lmKGkuc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLF9lLmwoYCR7dH0gb2suIG9sZE5hbWU6JHtzfSBuZXdOYW1lOiR7b31gKSx0aGlzLl9mcmllbmRHcm91cE1hcC5oYXMocykpe2NvbnN0IGU9dGhpcy5fZnJpZW5kR3JvdXBNYXAuZ2V0KHMpO3JldHVybiBlLm5hbWU9byx0aGlzLl9mcmllbmRHcm91cE1hcC5kZWxldGUocyksdGhpcy5fZnJpZW5kR3JvdXBNYXAuc2V0KG8sZSksdGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwKHtuYW1lOnMsdXNlcklETGlzdDplLnVzZXJJRExpc3R9KSx0aGlzLl9zbnNNb2R1bGUudXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cCh7bmFtZTpvLHVzZXJJRExpc3Q6ZS51c2VySURMaXN0fSksdGhpcy5fZW1pdEZyaWVuZEdyb3VwTGlzdFVwZGF0ZWQoKSx3bihlKX1yZXR1cm4gd24oKX0pLmNhdGNoKGU9Pih0aGlzLl9zbnNNb2R1bGUucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsc10pPT57aS5zZXRFcnJvcihlLHQscykuZW5kKCl9KSxfZS53KHQrXCIgZmFpbGVkLiBlcnJvcjpcIixlKSxWbihlKSkpfWFkZFRvRnJpZW5kR3JvdXAoZSl7Y29uc3QgdD10aGlzLl9uK1wiLmFkZFRvRnJpZW5kR3JvdXBcIix7bmFtZTpzLHVzZXJJRExpc3Q6b309ZTtpZighdGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKHMpKXJldHVybiB0aGlzLl9vbkZyaWVuZEdyb3VwTm90RXhpc3Qocyk7Y29uc3QgaT1uZXcgQ24oXCJhZGRUb0ZyaWVuZEdyb3VwXCIpO2kuc2V0TWVzc2FnZShgbmFtZToke3N9IHVzZXJJRExpc3Q6JHtvfWApLF9lLmwoYCR7dH0gbmFtZToke3N9IHVzZXJJRExpc3Q6JHtvfWApO3JldHVybiB0aGlzLl9zbnNNb2R1bGUucmVxdWVzdCh7cHJvdG9jb2xOYW1lOnBvLHJlcXVlc3REYXRhOntmcm9tQWNjb3VudDp0aGlzLl9zbnNNb2R1bGUuZ2V0TXlVc2VySUQoKSxvbGROYW1lOnMsdXBkYXRlR3JvdXBJdGVtOm8uZmlsdGVyKGU9PnRoaXMuX3Nuc01vZHVsZS5pc015RnJpZW5kKGUpKS5tYXAoZT0+KHt0bzplLHVwZGF0ZVR5cGU6XCJVcGRhdGVfVHlwZV9BZGRcIn0pKX19KS50aGVuKGU9PihpLnNldE5ldHdvcmtUeXBlKHRoaXMuX3Nuc01vZHVsZS5nZXROZXR3b3JrVHlwZSgpKS5lbmQoKSx0aGlzLl9vbkZyaWVuZEdyb3VwVXBkYXRlZChzLGUpKSkuY2F0Y2goZT0+KHRoaXMuX3Nuc01vZHVsZS5wcm9iZU5ldHdvcmsoKS50aGVuKChbdCxzXSk9PntpLnNldEVycm9yKGUsdCxzKS5lbmQoKX0pLF9lLncodCtcIiBmYWlsZWQuIGVycm9yOlwiLGUpLFZuKGUpKSl9cmVtb3ZlRnJvbUZyaWVuZEdyb3VwKGUpe2NvbnN0IHQ9dGhpcy5fbitcIi5yZW1vdmVGcm9tRnJpZW5kR3JvdXBcIix7bmFtZTpzLHVzZXJJRExpc3Q6b309ZTtpZighdGhpcy5fZnJpZW5kR3JvdXBNYXAuaGFzKHMpKXJldHVybiB0aGlzLl9vbkZyaWVuZEdyb3VwTm90RXhpc3Qocyk7Y29uc3QgaT1uZXcgQ24oXCJyZW1vdmVGcm9tRnJpZW5kR3JvdXBcIik7aS5zZXRNZXNzYWdlKGBuYW1lOiR7c30gdXNlcklETGlzdDoke299YCksX2UubChgJHt0fSBuYW1lOiR7c30gdXNlcklETGlzdDoke299YCk7cmV0dXJuIHRoaXMuX3Nuc01vZHVsZS5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6cG8scmVxdWVzdERhdGE6e2Zyb21BY2NvdW50OnRoaXMuX3Nuc01vZHVsZS5nZXRNeVVzZXJJRCgpLG9sZE5hbWU6cyx1cGRhdGVHcm91cEl0ZW06by5maWx0ZXIoZT0+dGhpcy5fc25zTW9kdWxlLmlzTXlGcmllbmQoZSkpLm1hcChlPT4oe3RvOmUsdXBkYXRlVHlwZTpcIlVwZGF0ZV9UeXBlX0RlbGV0ZVwifSkpfX0pLnRoZW4oZT0+KGkuc2V0TmV0d29ya1R5cGUodGhpcy5fc25zTW9kdWxlLmdldE5ldHdvcmtUeXBlKCkpLmVuZCgpLHRoaXMuX29uRnJpZW5kR3JvdXBVcGRhdGVkKHMsZSkpKS5jYXRjaChlPT4odGhpcy5fc25zTW9kdWxlLnByb2JlTmV0d29yaygpLnRoZW4oKFt0LHNdKT0+e2kuc2V0RXJyb3IoZSx0LHMpLmVuZCgpfSksX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsZSksVm4oZSkpKX1fb25GcmllbmRHcm91cFVwZGF0ZWQoZSx0KXtjb25zdHtyZXN1bHRMaXN0OnN9PXQuZGF0YSxvPXRoaXMuX2ZyaWVuZEdyb3VwTWFwLmdldChlKSxpPVtdLG49W10scj1bXTtyZXR1cm4gYmUocykmJnMuZm9yRWFjaChlPT57Y29uc3R7dG86dCxyZXN1bHRDb2RlOnMscmVzdWx0SW5mbzphLHR5cGU6dX09ZTswPT09cz9cIlVwZGF0ZV9UeXBlX0FkZFwiPT09dT9vJiYoby5hZGRUb1VzZXJJRExpc3QodCksbi5wdXNoKHQpKTpcIlVwZGF0ZV9UeXBlX0RlbGV0ZVwiPT09dSYmbyYmKG8ucmVtb3ZlRnJvbVVzZXJJRExpc3QodCksci5wdXNoKHQpKTppLnB1c2goe3RvOmUudG8sY29kZTpzLG1lc3NhZ2U6YX0pfSksX2UubChgJHt0aGlzLl9ufS5fb25GcmllbmRHcm91cFVwZGF0ZWQgbmFtZToke2V9IHVzZXJJRExpc3Q6JHtvLnVzZXJJRExpc3R9YCksbi5sZW5ndGg+MCYmdGhpcy5fc25zTW9kdWxlLnVwZGF0ZVdoZW5BZGRlZFRvRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0Om59KSxyLmxlbmd0aD4wJiZ0aGlzLl9zbnNNb2R1bGUudXBkYXRlV2hlblJlbW92ZWRGcm9tRnJpZW5kR3JvdXAoe25hbWU6ZSx1c2VySURMaXN0OnJ9KSx3bih7ZnJpZW5kR3JvdXA6byxmYWlsdXJlVXNlcklETGlzdDppfSl9dXBkYXRlV2hlbkZyaWVuZEFkZGVkKGUpe2NvbnN0e25hbWVMaXN0OnQsdXNlcklEOnN9PWU7X2UubChgJHt0aGlzLl9ufS51cGRhdGVXaGVuRnJpZW5kQWRkZWQgdXNlcklEOiR7c30gbmFtZUxpc3Q6JHt0fWApLEx0KHQpfHx0LmZvckVhY2goZT0+e2lmKHRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSl7dGhpcy5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLmFkZFRvVXNlcklETGlzdChzKX19KX11cGRhdGVXaGVuRnJpZW5kRGVsZXRlZChlKXtjb25zdHtuYW1lTGlzdDp0LHVzZXJJRDpzfT1lO19lLmwoYCR7dGhpcy5fbn0udXBkYXRlV2hlbkZyaWVuZERlbGV0ZWQgdXNlcklEOiR7c30gbmFtZUxpc3Q6JHt0fWApLEx0KHQpfHx0LmZvckVhY2goZT0+e2lmKHRoaXMuX2ZyaWVuZEdyb3VwTWFwLmhhcyhlKSl7dGhpcy5fZnJpZW5kR3JvdXBNYXAuZ2V0KGUpLnJlbW92ZUZyb21Vc2VySURMaXN0KHMpfX0pfXJlc2V0KCl7dGhpcy5fZnJpZW5kR3JvdXBNYXAuY2xlYXIoKX19Y2xhc3MgWWEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9uPVwiU25zTW9kdWxlXCIsdGhpcy5fZnJpZW5kSGFuZGxlcj1uZXcgSGEodGhpcyksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyPW5ldyBWYSh0aGlzKSx0aGlzLl9mcmllbmRHcm91cEhhbmRsZXI9bmV3IFdhKHRoaXMpO3RoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihLbix0aGlzLm9uQ29udGV4dFVwZGF0ZWQsdGhpcyl9b25Db250ZXh0VXBkYXRlZChlKXt0aGlzLl9mcmllbmRIYW5kbGVyLnBhZ2luZ0dldEZyaWVuZExpc3QoKSx0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuZ2V0RnJpZW5kR3JvdXBMaXN0KCksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLmdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpfW9uUmVsYXRpb25DaGFpbk1vZGlmaWVkKGUpe2NvbnN0e2RhdGFMaXN0OnR9PWU7aWYoTHQodCkpcmV0dXJuO2NvbnN0IHM9W10sbz1bXSxpPVtdLG49W107bGV0IHI9ITEsYT1cIlwiO3QuZm9yRWFjaChlPT57aWYoMyE9PWUucHVzaFR5cGUmJjQhPT1lLnB1c2hUeXBlfHwhZS5mcm9tfHwoYT1lLmZyb20pLGUuZnJpZW5kQWRkQWNjb3VudCYmKHMucHVzaCguLi5lLmZyaWVuZEFkZEFjY291bnQpLG4ucHVzaCguLi5lLmZyaWVuZEFkZEFjY291bnQpKSxlLmZyaWVuZERlbEFjY291bnQmJm8ucHVzaCguLi5lLmZyaWVuZERlbEFjY291bnQpLGUuZnJpZW5kQXBwbGljYXRpb25BZGRlZCYmaS5wdXNoKC4uLmUuZnJpZW5kQXBwbGljYXRpb25BZGRlZCksZS5mcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRVc2VySURMaXN0JiZuLnB1c2goLi4uZS5mcmllbmRBcHBsaWNhdGlvbkRlbGV0ZWRVc2VySURMaXN0KSxlLnJlcG9ydFRpbWUmJjc9PT1lLnB1c2hUeXBlJiYocj0hMCksZS5mcmllbmRVcEluZm8pe2NvbnN0IHQ9e2RhdGFMaXN0OltdfTtlLmZyaWVuZFVwSW5mby5mb3JFYWNoKGU9Pnt0LmRhdGFMaXN0LnB1c2goe3VzZXJJRDplLmZyaWVuZEFjY291bnQscHJvZmlsZUxpc3Q6Wy4uLmUuc25zXX0pfSksdGhpcy5vbkZyaWVuZFByb2ZpbGVNb2RpZmllZCh0KX19KSxyJiZ0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIub25GcmllbmRBcHBsaWNhdGlvblJlYWQoKSx0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIub25GcmllbmRBcHBsaWNhdGlvbkFkZGVkKGksYSksdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLm9uRnJpZW5kQXBwbGljYXRpb25EZWxldGVkKG4pLHRoaXMuX2ZyaWVuZEhhbmRsZXIub25GcmllbmRBZGRlZChzKSx0aGlzLl9mcmllbmRIYW5kbGVyLm9uRnJpZW5kRGVsZXRlZChvKX1pc015RnJpZW5kKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmlzTXlGcmllbmQoZSl9ZmlsdGVyUHJvZmFuaXR5KGUsdCl7Y29uc3Qgcz10aGlzLmdldE1vZHVsZShVcyk7aWYoIXMpcmV0dXJuITA7Y29uc3R7aXNBbGxvd2VkVG9TZW5kOm8sbW9kaWZpZWRUZXh0Oml9PXMuZmlsdGVyVGV4dCh0W2VdLEQpO3JldHVybiEwPT09byYmKHRbZV09aSwhMCl9b25GcmllbmRQcm9maWxlTW9kaWZpZWQoZSl7dGhpcy5fZnJpZW5kSGFuZGxlci5vbkZyaWVuZFByb2ZpbGVNb2RpZmllZChlKX1nZXRMb2NhbEZyaWVuZExpc3QoZT0hMCl7Y29uc3QgdD10aGlzLl9mcmllbmRIYW5kbGVyLmdldExvY2FsRnJpZW5kTGlzdCgpO3JldHVybiBlP3huKHQpOnR9Z2V0RnJpZW5kUmVtYXJrKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmdldEZyaWVuZFJlbWFyayhlKX1nZXRGcmllbmRMaXN0KCl7cmV0dXJuIHRoaXMuX2ZyaWVuZEhhbmRsZXIucGFnaW5nR2V0RnJpZW5kTGlzdCgpfWFkZEZyaWVuZChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5hZGRGcmllbmQoZSl9ZGVsZXRlRnJpZW5kKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmRlbGV0ZUZyaWVuZChlKX1jaGVja0ZyaWVuZChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kSGFuZGxlci5jaGVja0ZyaWVuZChlKX1nZXRGcmllbmRQcm9maWxlKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLmdldEZyaWVuZFByb2ZpbGUoZSl9dXBkYXRlRnJpZW5kKGUpe3JldHVybiB0aGlzLl9mcmllbmRIYW5kbGVyLnVwZGF0ZUZyaWVuZChlKX11cGRhdGVXaGVuQWRkZWRUb0ZyaWVuZEdyb3VwKGUpe3RoaXMuX2ZyaWVuZEhhbmRsZXIudXBkYXRlV2hlbkFkZGVkVG9GcmllbmRHcm91cChlKX11cGRhdGVXaGVuUmVtb3ZlZEZyb21GcmllbmRHcm91cChlKXt0aGlzLl9mcmllbmRIYW5kbGVyLnVwZGF0ZVdoZW5SZW1vdmVkRnJvbUZyaWVuZEdyb3VwKGUpfWdldExvY2FsRnJpZW5kQXBwbGljYXRpb25MaXN0KCl7Y29uc3QgZT10aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuZ2V0TG9jYWxGcmllbmRBcHBsaWNhdGlvbkxpc3QoKTtyZXR1cm4geG4oZSl9ZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5kZWxldGVGcmllbmRBcHBsaWNhdGlvbihlKX1yZWZ1c2VGcmllbmRBcHBsaWNhdGlvbihlKXtyZXR1cm4gdGhpcy5fZnJpZW5kQXBwbGljYXRpb25IYW5kbGVyLnJlZnVzZUZyaWVuZEFwcGxpY2F0aW9uKGUpfWFjY2VwdEZyaWVuZEFwcGxpY2F0aW9uKGUpe3JldHVybiB0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuYWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSl9c2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKGUpe3JldHVybiB0aGlzLl9mcmllbmRBcHBsaWNhdGlvbkhhbmRsZXIuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKGUpfWdldExvY2FsRnJpZW5kR3JvdXBMaXN0KCl7Y29uc3QgZT10aGlzLl9mcmllbmRHcm91cEhhbmRsZXIuZ2V0TG9jYWxGcmllbmRHcm91cExpc3QoKTtyZXR1cm4geG4oZSl9Y3JlYXRlRnJpZW5kR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5jcmVhdGVGcmllbmRHcm91cChlKX1kZWxldGVGcmllbmRHcm91cChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLmRlbGV0ZUZyaWVuZEdyb3VwKGUpfWFkZFRvRnJpZW5kR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5hZGRUb0ZyaWVuZEdyb3VwKGUpfXJlbW92ZUZyb21GcmllbmRHcm91cChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnJlbW92ZUZyb21GcmllbmRHcm91cChlKX1yZW5hbWVGcmllbmRHcm91cChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnJlbmFtZUZyaWVuZEdyb3VwKGUpfW9uQWRkVG9GcmllbmRHcm91cChlKXtyZXR1cm4gdGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLm9uQWRkVG9GcmllbmRHcm91cChlKX11cGRhdGVXaGVuRnJpZW5kQWRkZWQoZSl7dGhpcy5fZnJpZW5kR3JvdXBIYW5kbGVyLnVwZGF0ZVdoZW5GcmllbmRBZGRlZChlKX11cGRhdGVXaGVuRnJpZW5kRGVsZXRlZChlKXt0aGlzLl9mcmllbmRHcm91cEhhbmRsZXIudXBkYXRlV2hlbkZyaWVuZERlbGV0ZWQoZSl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fZnJpZW5kSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEdyb3VwSGFuZGxlci5yZXNldCgpLHRoaXMuX2ZyaWVuZEFwcGxpY2F0aW9uSGFuZGxlci5yZXNldCgpfX1jbGFzcyBqYSBleHRlbmRzIEZze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX249XCJXb3JrZXJUaW1lck1vZHVsZVwiLHRoaXMuX2lzV29ya2VyRW5hYmxlZD0hMCx0aGlzLl93b3JrZXJUaW1lcj1udWxsLHRoaXMuX3RpbWVySUQ9LTEsdGhpcy5faW5pdCgpO3RoaXMuZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihXbix0aGlzLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCx0aGlzKX1pc1dvcmtlckVuYWJsZWQoKXtyZXR1cm4gdGhpcy5faXNXb3JrZXJFbmFibGVkJiZRfXN0YXJ0V29ya2VyVGltZXIoKXtfZS5sKHRoaXMuX24rXCIuc3RhcnRXb3JrZXJUaW1lclwiKSx0aGlzLl93b3JrZXJUaW1lciYmdGhpcy5fd29ya2VyVGltZXIucG9zdE1lc3NhZ2UoXCJzdGFydFwiKX1zdG9wV29ya2VyVGltZXIoKXtfZS5sKHRoaXMuX24rXCIuc3RvcFdvcmtlclRpbWVyXCIpLHRoaXMuX3dvcmtlclRpbWVyJiZ0aGlzLl93b3JrZXJUaW1lci5wb3N0TWVzc2FnZShcInN0b3BcIil9X2luaXQoKXtpZihRKXtjb25zdCBlPVVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoWydsZXQgaW50ZXJ2YWwgPSAtMTtvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RhcnRcIikgeyAgICBpZiAoaW50ZXJ2YWwgPiAwKSB7ICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7ICAgIH0gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7ICAgICAgcG9zdE1lc3NhZ2UoXCJcIik7ICAgIH0sIDEwMDApOyAgICBwb3N0TWVzc2FnZShpbnRlcnZhbCk7ICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RvcFwiKSB7ICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOyAgICBpbnRlcnZhbCA9IC0xOyAgfX07J10se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04XCJ9KSk7dGhpcy5fd29ya2VyVGltZXI9bmV3IFdvcmtlcihlKTtjb25zdCB0PXRoaXM7dGhpcy5fd29ya2VyVGltZXIub25tZXNzYWdlPWZ1bmN0aW9uKGUpe2UuZGF0YT8odC5fdGltZXJJRD1lLmRhdGEsX2UubChgJHt0Ll9ufS5faW5pdCBzZWVkOiR7dC5fdGltZXJJRH1gKSk6dC5fbS5vbkNoZWNrVGltZXIoKX19fV9vbkNsb3VkQ29uZmlnVXBkYXRlZCgpe2NvbnN0IGU9dGhpcy5nZXRDbG91ZENvbmZpZyhcImVuYWJsZV93b3JrZXJcIik7X2UubChgJHt0aGlzLl9ufS5fb25DbG91ZENvbmZpZ1VwZGF0ZWQgZW5hYmxlV29ya2VyOiR7ZX1gKSx3ZShlKXx8XCIxXCI9PT1lPyF0aGlzLl9pc1dvcmtlckVuYWJsZWQmJlEmJih0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITAsdGhpcy5zdGFydFdvcmtlclRpbWVyKCksdGhpcy5fbS5vbldvcmtlclRpbWVyRW5hYmxlZCgpKTp0aGlzLl9pc1dvcmtlckVuYWJsZWQmJlEmJih0aGlzLl9pc1dvcmtlckVuYWJsZWQ9ITEsdGhpcy5zdG9wV29ya2VyVGltZXIoKSx0aGlzLl9tLm9uV29ya2VyVGltZXJEaXNhYmxlZCgpKX10ZXJtaW5hdGUoKXtfZS5sKHRoaXMuX24rXCIudGVybWluYXRlXCIpLHRoaXMuX3dvcmtlclRpbWVyJiYodGhpcy5fd29ya2VyVGltZXIudGVybWluYXRlKCksdGhpcy5fd29ya2VyVGltZXI9bnVsbCx0aGlzLl90aW1lcklEPS0xKX1nZXRUaW1lcklEKCl7cmV0dXJuIHRoaXMuX3RpbWVySUR9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIil9fWNsYXNzIHphe2NvbnN0cnVjdG9yKCl7dGhpcy5fbj1cIlB1cmNoYXNlZEZlYXR1cmVIYW5kbGVyXCIsdGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcD1uZXcgTWFwfWlzVmFsaWRQdXJjaGFzZUJpdHMoZSl7cmV0dXJuIGUmJlwic3RyaW5nXCI9PXR5cGVvZiBlJiZlLmxlbmd0aD49MSYmZS5sZW5ndGg8PTY0JiYvWzAxXXsxLDY0fS8udGVzdChlKX1wYXJzZVB1cmNoYXNlQml0cyhlKXtpZih0aGlzLmlzVmFsaWRQdXJjaGFzZUJpdHMoZSkpe3RoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuY2xlYXIoKTtsZXQgdD1udWxsO2ZvcihsZXQgcz1lLmxlbmd0aC0xLGk9MDtzPj0wO3MtLSxpKyspdD1pPDMyP25ldyBvKDAsTWF0aC5wb3coMixpKSkudG9TdHJpbmcoKTpuZXcgbyhNYXRoLnBvdygyLGktMzIpLDApLnRvU3RyaW5nKCksXCIxXCI9PT1lW3NdP3RoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuc2V0KHQsITApOnRoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuc2V0KHQsITEpfWVsc2UgX2UudyhgJHt0aGlzLl9ufS5wYXJzZVB1cmNoYXNlQml0cyBpbnZhbGlkIHB1cmNoYXNlYml0czoke2V9YCl9aGFzUHVyY2hhc2VkRmVhdHVyZShlKXtyZXR1cm4hIXRoaXMuX3B1cmNoYXNlZEZlYXR1cmVNYXAuZ2V0KGUpfWlzRmVhdHVyZUVuYWJsZWQoZSl7Y29uc3QgdD1wYXJzZUludChlKS50b1N0cmluZygyKTtsZXQgcz12b2lkIDAsaT0hMDtmb3IobGV0IG49dC5sZW5ndGgtMSxyPTA7bj49MDtuLS0scisrKWlmKFwiMVwiPT09dC5jaGFyQXQobikmJihzPXI8MzI/bmV3IG8oMCxNYXRoLnBvdygyLHIpKS50b1N0cmluZygpOm5ldyBvKE1hdGgucG93KDIsci0zMiksMCkudG9TdHJpbmcoKSwhdGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcC5nZXQocykpKXtpPSExO2JyZWFrfXJldHVybiBfZS5sKGAke3RoaXMuX259LmlzRmVhdHVyZUVuYWJsZWQgZGVjaW1hbE51bWJlcjoke2V9IGJpbmFyeVN0cmluZzoke3R9IHJldDoke2l9YCkseG4oe2VuYWJsZWQ6aX0pfWNsZWFyKCl7dGhpcy5fcHVyY2hhc2VkRmVhdHVyZU1hcC5jbGVhcigpfX1jbGFzcyBKYXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9tPWUsdGhpcy5fbj1cIkNvbW1lcmNpYWxDb25maWdNb2R1bGVcIix0aGlzLl9leHBpcmVkVGltZT0wLHRoaXMuX2lzRmV0Y2hpbmc9ITEsdGhpcy5fcHVyY2hhc2VkRmVhdHVyZUhhbmRsZXI9bmV3IHphfV9jYW5GZXRjaCgpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUobXMpLmlzTG9nZ2VkSW4oKT8hdGhpcy5faXNGZXRjaGluZyYmRGF0ZS5ub3coKT49dGhpcy5fZXhwaXJlZFRpbWU6KHRoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrMmUzLCExKX1vbkNoZWNrVGltZXIoZSl7dGhpcy5fY2FuRmV0Y2goKSYmdGhpcy5mZXRjaENvbmZpZygpfWZldGNoQ29uZmlnKCl7Y29uc3QgZT10aGlzLl9jYW5GZXRjaCgpLHQ9dGhpcy5fbitcIi5mZXRjaENvbmZpZ1wiO2lmKF9lLmwoYCR7dH0gY2FuRmV0Y2g6JHtlfWApLCFlKXJldHVybjtjb25zdCBzPXRoaXMuX2dldE1vZHVsZShJcyksbz1uZXcgQ24oXCJmZXRjaENvbW1lcmNpYWxDb25maWdcIik7by5zZXROZXR3b3JrVHlwZShzLmdldE5ldHdvcmtUeXBlKCkpO2NvbnN0IGk9dGhpcy5fZ2V0TW9kdWxlKG1zKS5nZXRTREtBcHBJRCgpLG49dGhpcy5fZ2V0TW9kdWxlKEVzKTt0aGlzLl9pc0ZldGNoaW5nPSEwLG4ucmVxdWVzdCh7cHJvdG9jb2xOYW1lOlZpLHJlcXVlc3REYXRhOntTREtBcHBJRDppfX0pLnRoZW4oZT0+e28uc2V0TWVzc2FnZShcInB1cmNoYXNlQml0czpcIitlLmRhdGEucHVyY2hhc2VCaXRzKS5lbmQoKSxfZS5sKHQrXCIgb2suXCIpLHRoaXMuX3BhcnNlQ29uZmlnKGUuZGF0YSksdGhpcy5faXNGZXRjaGluZz0hMX0pLmNhdGNoKGU9PntzLnByb2JlKCkudGhlbigoW3Qsc10pPT57by5zZXRFcnJvcihlLHQscykuZW5kKCl9KSx0aGlzLl9pc0ZldGNoaW5nPSExfSl9b25QdXNoZWRDb25maWcoZSl7Y29uc3QgdD1gJHt0aGlzLl9ufS5vblB1c2hlZENvbmZpZyBkYXRhOiR7SlNPTi5zdHJpbmdpZnkoZSl9YDtfZS5sKFwiXCIrdCk7bmV3IENuKFwicHVzaGVkQ29tbWVyY2lhbENvbmZpZ1wiKS5zZXROZXR3b3JrVHlwZSh0aGlzLl9nZXRNb2R1bGUoSXMpLmdldE5ldHdvcmtUeXBlKCkpLnNldE1lc3NhZ2UoXCJwdXJjaGFzZUJpdHM6XCIrZS5wdXJjaGFzZUJpdHMpLmVuZCgpLHRoaXMuX3BhcnNlQ29uZmlnKGUpfV9wYXJzZUNvbmZpZyhlKXtjb25zdCB0PXRoaXMuX24rXCIuX3BhcnNlQ29uZmlnXCIse2Vycm9yQ29kZTpzLGVycm9yTWVzc2FnZTpvLHB1cmNoYXNlQml0czppLGV4cGlyZWRUaW1lOm59PWU7MD09PXM/KHRoaXMuX3B1cmNoYXNlZEZlYXR1cmVIYW5kbGVyLnBhcnNlUHVyY2hhc2VCaXRzKGkpLHRoaXMuX2V4cGlyZWRUaW1lPURhdGUubm93KCkrMWUzKm4pOndlKHMpPyhfZS5sKHQrXCIgZmFpbGVkLiBJbnZhbGlkIG1lc3NhZ2UgZm9ybWF0OlwiLGUpLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDM2ZTUpKTooX2UuZShgJHt0fSBlcnJvckNvZGU6JHtzfSBlcnJvck1lc3NhZ2U6JHtvfWApLHRoaXMuX3NldEV4cGlyZWRUaW1lT25SZXNwb25zZUVycm9yKDEyZTQpKX1fc2V0RXhwaXJlZFRpbWVPblJlc3BvbnNlRXJyb3IoZSl7dGhpcy5fZXhwaXJlZFRpbWU9RGF0ZS5ub3coKStlfWNhbklVc2UoZSl7cmV0dXJuIHRoaXMuX3B1cmNoYXNlZEZlYXR1cmVIYW5kbGVyLmhhc1B1cmNoYXNlZEZlYXR1cmUoZSl9aXNGZWF0dXJlRW5hYmxlZChlKXtyZXR1cm4gdGhpcy5fcHVyY2hhc2VkRmVhdHVyZUhhbmRsZXIuaXNGZWF0dXJlRW5hYmxlZChlKX1fZ2V0TW9kdWxlKGUpe3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShlKX1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKSx0aGlzLl9leHBpcmVkVGltZT0wLHRoaXMuX2lzRmV0Y2hpbmc9ITEsdGhpcy5fcHVyY2hhc2VkRmVhdHVyZUhhbmRsZXIuY2xlYXIoKX19Y2xhc3MgWGEgZXh0ZW5kcyBGc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9tPWUsdGhpcy5fbj1cIk9mZmxpbmVQdXNoTW9kdWxlXCIsdGhpcy5fb2ZmbGluZVB1c2hQbHVnaW49dm9pZCAwLHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnPXtodWF3ZWlQdXNoQnVzc2luZXNzSWQ6XCJcIix4aWFvbWlQdXNoQnVzc2luZXNzSWQ6XCJcIix4aWFvbWlQdXNoQXBwSWQ6XCJcIix4aWFvbWlQdXNoQXBwS2V5OlwiXCIsbWVpenVQdXNoQnVzc2luZXNzSWQ6XCJcIixtZWl6dVB1c2hBcHBJZDpcIlwiLG1laXp1UHVzaEFwcEtleTpcIlwiLHZpdm9QdXNoQnVzc2luZXNzSWQ6XCJcIixmY21QdXNoQnVzc2luZXNzSWQ6XCJcIixvcHBvUHVzaEJ1c3NpbmVzc0lkOlwiXCIsb3Bwb1B1c2hBcHBLZXk6XCJcIixvcHBvUHVzaEFwcFNlY3JldDpcIlwiLGhvbm9yUHVzaEJ1c3NpbmVzc0lkOlwiXCJ9LHRoaXMuX2RldmljZVRva2VuPVwiXCIsdGhpcy5fYnVzaW5lc3NJRD0wLHRoaXMuX2lvc0J1c2luZXNzSUQ9MCx0aGlzLl9jMmNVbnJlYWRDb3VudD0wLHRoaXMuX2dyb3VwVW5yZWFkQ291bnQ9MCx0aGlzLl9pc1dlYlVuaWFwcD0wfXJlZ2lzdGVyUGx1Z2luKGUpe2lmKCFVKXJldHVybiB2b2lkIHRoaXMub3V0cHV0V2FybmluZyhcIk9mZmxpbmVQdXNoSW5VbmlhcHBcIik7dGhpcy5fb2ZmbGluZVB1c2hQbHVnaW49ZVtcInRpbS1vZmZsaW5lLXB1c2gtcGx1Z2luXCJdO2NvbnN0e2h1YXdlaUJ1c2luZXNzSUQ6dCx4aWFvbWlCdXNpbmVzc0lEOnMseGlhb21pQXBwSUQ6byx4aWFvbWlBcHBLZXk6aSxtZWl6dUJ1c2luZXNzSUQ6bixtZWl6dUFwcElEOnIsbWVpenVBcHBLZXk6YSx2aXZvQnVzaW5lc3NJRDp1LG9wcG9CdXNpbmVzc0lEOmMsb3Bwb0FwcEtleTpsLG9wcG9BcHBTZWNyZXQ6ZCxob25vckJ1c2luZXNzSUQ6cCxpb3NCdXNpbmVzc0lEOmh9PWUub2ZmbGluZVB1c2hDb25maWd8fHt9O3RoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLmh1YXdlaVB1c2hCdXNzaW5lc3NJZD10LHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLnhpYW9taVB1c2hCdXNzaW5lc3NJZD1zLHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLnhpYW9taVB1c2hBcHBJZD1vLHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLnhpYW9taVB1c2hBcHBLZXk9aSx0aGlzLl9hbmRyb2lkUHVzaENvbmZpZy5tZWl6dVB1c2hCdXNzaW5lc3NJZD1uLHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLm1laXp1UHVzaEFwcElkPXIsdGhpcy5fYW5kcm9pZFB1c2hDb25maWcubWVpenVQdXNoQXBwS2V5PWEsdGhpcy5fYW5kcm9pZFB1c2hDb25maWcudml2b1B1c2hCdXNzaW5lc3NJZD11LHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLm9wcG9QdXNoQnVzc2luZXNzSWQ9Yyx0aGlzLl9hbmRyb2lkUHVzaENvbmZpZy5vcHBvUHVzaEFwcEtleT1sLHRoaXMuX2FuZHJvaWRQdXNoQ29uZmlnLm9wcG9QdXNoQXBwU2VjcmV0PWQsdGhpcy5fYW5kcm9pZFB1c2hDb25maWcuaG9ub3JQdXNoQnVzc2luZXNzSWQ9cDtuZXcgQ24oXCJyZWdpc3RlclBsdWdpblwiKS5zZXRNZXNzYWdlKFwidGltLW9mZmxpbmUtcHVzaC1wbHVnaW5cIikuc2V0TW9yZU1lc3NhZ2UoXCJpc0V4aXN0OlwiKyF3ZSh0aGlzLl9vZmZsaW5lUHVzaFBsdWdpbikpLmVuZCghMCksX2UubChgJHt0aGlzLl9ufS5yZWdpc3RlclBsdWdpbiBvay4gb2ZmbGluZVB1c2hDb25maWc6JHtKU09OLnN0cmluZ2lmeShlLm9mZmxpbmVQdXNoQ29uZmlnKX1gKSx0aGlzLl9pb3NCdXNpbmVzc0lEPWgsdGhpcy5fc2V0QXBwU2hvd0xpc3RlbmVyKCl9aW5pdCgpe3RoaXMuX2lzV2ViVW5pYXBwPXRoaXMuZ2V0VW5pQXBwUGxhdGZvcm0oKSx0aGlzLl9nZXREZXZpY2VUb2tlbigpfV9nZXREZXZpY2VUb2tlbigpe2NvbnN0IGU9dGhpcy5fbitcIi5fZ2V0RGV2aWNlVG9rZW5cIjtpZighJGUodGhpcy5fb2ZmbGluZVB1c2hQbHVnaW4uZ2V0RGV2aWNlVG9rZW4pKXJldHVybiB2b2lkIF9lLmUoZStcIiBnZXREZXZpY2VUb2tlbiBpcyBub3QgYSBmdW5jdGlvblwiKTtsZXQgdD1gYW5kcm9pZFB1c2hDb25maWc6JHtKU09OLnN0cmluZ2lmeSh0aGlzLl9hbmRyb2lkUHVzaENvbmZpZyl9LCBpb3NCdXNpbmVzc0lEOiR7dGhpcy5faW9zQnVzaW5lc3NJRH1gO19lLmwoYCR7ZX0gc3RhcnQuICR7dH1gKTtuZXcgQ24oXCJfZ2V0RGV2aWNlVG9rZW5cIikuc2V0TWVzc2FnZShcIlwiK3QpLmVuZCghMCksdGhpcy5fb2ZmbGluZVB1c2hQbHVnaW4uZ2V0RGV2aWNlVG9rZW4odGhpcy5fYW5kcm9pZFB1c2hDb25maWcscz0+e2NvbnN0IG89bmV3IENuKFwiZ2V0RGV2aWNlVG9rZW5SZXNcIikse2NvZGU6aSxtc2c6bn09cztpZigwPT09aSl7Y29uc3R7ZGV2aWNlVG9rZW46aSxkZXZpY2VCcmFuZDpuLGRldmljZVR5cGU6cixidXNzaW5lc3NJZDphfT1zLmRhdGE7dGhpcy5fZGV2aWNlVG9rZW49aSx0aGlzLl9idXNpbmVzc0lEPWF8fHRoaXMuX2lvc0J1c2luZXNzSUQsdD1gZGV2aWNlVG9rZW46JHtpfSwgZGV2aWNlQnJhbmQ6JHtufHxyfSwgYnVzaW5lc3NJRDoke3RoaXMuX2J1c2luZXNzSUR9YCxfZS5sKGAke2V9IG9rLiAke3R9YCksby5zZXRNZXNzYWdlKHQpLmVuZCghMCksdGhpcy5fc2V0VG9rZW4oKX1lbHNlIG8uc2V0TWVzc2FnZShgY29kZToke2l9LCBtc2c6JHtufWApLmVuZCghMCksX2UuZShlK1wiIGZhaWxlZC4gZXJyb3I6XCIscyl9KX1jYW5JVXNlT2ZmbGluZVB1c2goKXtyZXR1cm4gVSYmIXdlKHRoaXMuX29mZmxpbmVQdXNoUGx1Z2luKX1fc2V0QXBwU2hvd0xpc3RlbmVyKCl7Y29uc3QgZT10aGlzLl9uK1wiLl9zZXRBcHBTaG93TGlzdGVuZXJcIjtpZih3ZSh0aGlzLl9vZmZsaW5lUHVzaFBsdWdpbikpcmV0dXJuIHZvaWQgX2UuZShlK1wiIG9mZmxpbmVQdXNoUGx1Z2luIGlzIHVuZGVmaW5lZFwiKTtpZighJGUodGhpcy5fb2ZmbGluZVB1c2hQbHVnaW4uc2V0QXBwU2hvd0xpc3RlbmVyKSlyZXR1cm4gdm9pZCBfZS5lKGUrXCIgc2V0QXBwU2hvd0xpc3RlbmVyIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO25ldyBDbihcIl9zZXRBcHBTaG93TGlzdGVuZXJcIikuZW5kKCEwKSxfZS5sKGUrXCIgc3RhcnRcIiksdGhpcy5fb2ZmbGluZVB1c2hQbHVnaW4uc2V0QXBwU2hvd0xpc3RlbmVyKHQ9Pntjb25zdHthcHBTaG93OnN9PXR8fHt9O25ldyBDbihcInNldEFwcFNob3dMaXN0ZW5lclJlc1wiKS5zZXRNZXNzYWdlKFwiYXBwU2hvdzpcIitzKS5lbmQoITApLF9lLmwoYCR7ZX0gb2suIGFwcFNob3c6JHtzfWApLHRoaXMuX20uaXNSZWFkeSgpJiYoMD09PXM/KHRoaXMuX2dldENvbnZVbnJlYWRDb3VudCgpLHRoaXMuX29uQmFja2dyb3VuZCgpKToxPT09cyYmdGhpcy5fb25Gb3JlZ3JvdW5kKCkpfSl9Z2V0RGV2aWNlQnJhbmQoKXtpZighd2UodGhpcy5fb2ZmbGluZVB1c2hQbHVnaW4pJiYkZSh0aGlzLl9vZmZsaW5lUHVzaFBsdWdpbi5nZXREZXZpY2VUeXBlKSl7Y29uc3R7ZGV2aWNlVHlwZTplfT10aGlzLl9vZmZsaW5lUHVzaFBsdWdpbi5nZXREZXZpY2VUeXBlKCl8fHt9O3JldHVybiBfZS5sKGAke3RoaXMuX259LmdldERldmljZUJyYW5kIG9rLiBkZXZpY2VUeXBlOiR7ZX1gKSxlfX1fc2V0VG9rZW4oKXtjb25zdCBlPXRoaXMuX24rXCIuX3NldFRva2VuXCIsdD10aGlzLmdldE1vZHVsZShtcyk7bGV0IHM9XCJcIixvPTEsaT1cIlwiLHI9XCJcIjtMdCh0aGlzLl9kZXZpY2VUb2tlbikmJihvPTApO2NvbnN0IGE9dGhpcy5nZXRVbmlBcHBQbGF0Zm9ybSgpLHU9dGhpcy5nZXREZXZpY2VCcmFuZCgpO2E9PT1uLklPU3x8YT09PW4uSVBBRHx8YT09PW4uTUFDP3I9dGhpcy5fZGV2aWNlVG9rZW46YT09PW4uQU5EUk9JRCYmKGk9dGhpcy5fZGV2aWNlVG9rZW4pO2NvbnN0IGM9bmV3IENuKFwib2ZmbGluZVB1c2hTZXRUb2tlblwiKTtyZXR1cm4gcz1gZGV2aWNlVG9rZW46JHtyfHxpfSwgYnVzaW5lc3NJRDoke3RoaXMuX2J1c2luZXNzSUR9LCBkZXZpY2VCcmFuZDoke3V9LCBpc1dlYlVuaWFwcDoke3RoaXMuX2lzV2ViVW5pYXBwfSwgcHVzaE1zZzoke299LCBwbGF0Zm9ybToke2F9YCxjLnNldE1lc3NhZ2UoXCJcIitzKSxfZS5sKGAke2V9ICR7c31gKSx0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTp0bixyZXF1ZXN0RGF0YTp7dG9rZW5JRDppLHB1c2hNc2c6byxzZGtBcHBJRDp0LmdldFNES0FwcElEKCksYnVzaW5lc3NJRDpwYXJzZUludCh0aGlzLl9idXNpbmVzc0lEKSxkZXZpY2VCcmFuZDp1LGRldmljZVRva2VuOnIsaXNXZWJVbmlhcHA6dGhpcy5faXNXZWJVbmlhcHB9fSkudGhlbih0PT4oYy5lbmQoKSxfZS5sKGUrXCIgb2tcIiksdCkpLmNhdGNoKHQ9Pih0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLHNdKT0+e2Muc2V0RXJyb3IodCxlLHMpLmVuZCgpfSksX2UuZShlK1wiIGZhaWxlZC4gZXJyb3I6XCIsdCksVm4odCkpKX1fZ2V0Q29udlVucmVhZENvdW50KCl7dGhpcy5fYzJjVW5yZWFkQ291bnQ9MCx0aGlzLl9ncm91cFVucmVhZENvdW50PTA7dGhpcy5nZXRNb2R1bGUoX3MpLmdldExvY2FsQ29udmVyc2F0aW9uTGlzdCgpLmZvckVhY2goZT0+e2UudHlwZT09PXQuQ09OVl9DMkMmJih0aGlzLl9jMmNVbnJlYWRDb3VudCs9ZS51bnJlYWRDb3VudCksZS50eXBlPT09dC5DT05WX0dST1VQJiYodGhpcy5fZ3JvdXBVbnJlYWRDb3VudCs9ZS51bnJlYWRDb3VudCl9KX1fb25CYWNrZ3JvdW5kKCl7Y29uc3QgZT10aGlzLl9uK1wiLl9vbkJhY2tncm91bmRcIix0PW5ldyBDbihcIl9vbkJhY2tncm91bmRcIik7dGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6UWkscmVxdWVzdERhdGE6e2MyY1VucmVhZENvdW50OnRoaXMuX2MyY1VucmVhZENvdW50LGdyb3VwVW5yZWFkQ291bnQ6dGhpcy5fZ3JvdXBVbnJlYWRDb3VudCxpc1dlYlVuaWFwcDp0aGlzLl9pc1dlYlVuaWFwcH19KS50aGVuKHM9Pih0LnNldE1lc3NhZ2UoYGMyY1VucmVhZENvdW50OiAke3RoaXMuX2MyY1VucmVhZENvdW50fSwgZ3JvdXBVbnJlYWRDb3VudDogJHt0aGlzLl9ncm91cFVucmVhZENvdW50fWApLmVuZCgpLF9lLmwoZStcIiBva1wiKSxzKSkuY2F0Y2gocz0+e3RoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW2Usb10pPT57dC5zZXRFcnJvcihzLGUsbykuZW5kKCl9KSxfZS5lKGUrXCIgZmFpbGVkLiBlcnJvcjpcIixzKX0pfV9vbkZvcmVncm91bmQoKXtjb25zdCBlPXRoaXMuX24rXCIuX29uRm9yZWdyb3VuZFwiLHQ9bmV3IENuKFwiX29uRm9yZWdyb3VuZFwiKTt0aGlzLnJlcXVlc3Qoe3Byb3RvY29sTmFtZTplbixyZXF1ZXN0RGF0YTp7aXNXZWJVbmlhcHA6dGhpcy5faXNXZWJVbmlhcHB9fSkudGhlbihzPT4odC5lbmQoKSxfZS5sKGUrXCIgb2tcIikscykpLmNhdGNoKHM9Pnt0aGlzLnByb2JlTmV0d29yaygpLnRoZW4oKFtlLG9dKT0+e3Quc2V0RXJyb3IocyxlLG8pLmVuZCgpfSksX2UuZShlK1wiIGZhaWxlZC4gZXJyb3I6XCIscyl9KX1nZXRVbmlBcHBQbGF0Zm9ybSgpe2NvbnN0IGU9dW5pLmdldFN5c3RlbUluZm9TeW5jKCkucGxhdGZvcm0sdD10aGlzLmdldERldmljZUJyYW5kKCk7cmV0dXJuXCJpb3NcIj09PWU/bi5JT1M6XCJhbmRyb2lkXCI9PT1lP24uQU5EUk9JRDoxMDAyPT09dD9uLklQQUQ6MTAwMT09PXQ/bi5NQUM6dm9pZCAwfXJlc2V0KCl7dGhpcy5fZGV2aWNlVG9rZW49XCJcIix0aGlzLl9idXNpbmVzc0lEPTAsdGhpcy5fYzJjVW5yZWFkQ291bnQ9MCx0aGlzLl9ncm91cFVucmVhZENvdW50PTAsdGhpcy5faXNXZWJVbmlhcHA9MCxfZS5sKHRoaXMuX24rXCIucmVzZXRcIil9fWNsYXNzIFphIGV4dGVuZHMgRnN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fbj1cIlByb2Zhbml0eUZpbHRlck1vZHVsZVwiLHRoaXMuX3BsdWdpbj1udWxsLHRoaXMuX2ZpbHRlckNvbmZpZ01hcD1uZXcgTWFwLHRoaXMuX3N0YXJ0SW5kZXg9MCx0aGlzLl92ZXJzaW9uPTAsdGhpcy5fY2FuSVVzZUxleGljb249ITEsdGhpcy5faXNGZXRjaGluZz0hMSx0aGlzLl9leHBpcmVkVGltZT0wfWluaXQoKXtjb25zdCBlPXRoaXMuZ2V0TW9kdWxlKHlzKS5nZXRQbHVnaW4oXCJ0aW0tcHJvZmFuaXR5LWZpbHRlci1wbHVnaW5cIik7ZT8odGhpcy5fcGx1Z2luPW5ldyBlKHtsb2dnZXI6X2UsaXNBcnJheTpiZSxpc01hcDpSZSxpc0Rldk1vZGU6dGhpcy5pc0Rldk1vZGUoKX0pLHRoaXMuX2dldExleGljb24oKSk6dGhpcy5vdXRwdXRXYXJuaW5nKFwiUHJvZmFuaXR5UGx1Z2luTm90Rm91bmRcIil9b25DaGVja1RpbWVyKCl7dGhpcy5fcGx1Z2luJiZ0aGlzLl9jYW5JVXNlTGV4aWNvbiYmdGhpcy5pc0xvZ2dlZEluKCkmJiF0aGlzLl9pc0ZldGNoaW5nJiZEYXRlLm5vdygpPj10aGlzLl9leHBpcmVkVGltZSYmdGhpcy5fZ2V0TGV4aWNvbigpfWZpbHRlck1lc3NhZ2UoZSxzKXtsZXQgbz0hMDtpZighdGhpcy5fcGx1Z2lufHwhdGhpcy5fY2FuSVVzZUxleGljb24pcmV0dXJuIG87aWYocyYmcy5tZXNzYWdlQ29udHJvbEluZm8mJiEwPT09cy5tZXNzYWdlQ29udHJvbEluZm8uZXhjbHVkZWRGcm9tQ29udGVudE1vZGVyYXRpb24pcmV0dXJuIG87Y29uc3R7dHlwZTppLGNvbnZlcnNhdGlvblR5cGU6bn09ZTtpZihpIT09dC5NU0dfVEVYVCYmaSE9PXQuTVNHX0NVU1RPTSlyZXR1cm4gbztjb25zdCByPXRoaXMuX24rXCIuZmlsdGVyTWVzc2FnZVwiO2xldCBhO2lmKF9lLmwoXCJcIityKSxpPT09dC5NU0dfVEVYVCl7aWYobj09PXQuQ09OVl9DMkM/YT1mOm49PT10LkNPTlZfR1JPVVAmJihhPUMpLCF0aGlzLl9pc0NvbmZpZ09uKGEpKXJldHVybiBvO2NvbnN0e3R5cGU6cyxtb2RpZmllZFRleHQ6aX09dGhpcy5fcGx1Z2luLmZpbHRlcihlLnBheWxvYWQudGV4dCk7MT09PXM/bz0hMToyPT09cyYmKGUucGF5bG9hZC50ZXh0PWkpfWVsc2UgaWYoaT09PXQuTVNHX0NVU1RPTSl7aWYobj09PXQuQ09OVl9DMkM/YT1JOm49PT10LkNPTlZfR1JPVVAmJihhPVQpLCF0aGlzLl9pc0NvbmZpZ09uKGEpKXJldHVybiBvO2NvbnN0IHM9dGhpcy5fcGx1Z2luLmZpbHRlcihlLnBheWxvYWQuZGF0YSksaT10aGlzLl9wbHVnaW4uZmlsdGVyKGUucGF5bG9hZC5kZXNjcmlwdGlvbikscj10aGlzLl9wbHVnaW4uZmlsdGVyKGUucGF5bG9hZC5leHRlbnNpb24pOzE9PT1zLnR5cGV8fDE9PT1pLnR5cGV8fDE9PT1yLnR5cGU/bz0hMTooMj09PXMudHlwZSYmKGUucGF5bG9hZC5kYXRhPXMubW9kaWZpZWRUZXh0KSwyPT09aS50eXBlJiYoZS5wYXlsb2FkLmRlc2NyaXB0aW9uPWkubW9kaWZpZWRUZXh0KSwyPT09ci50eXBlJiYoZS5wYXlsb2FkLmV4dGVuc2lvbj1yLm1vZGlmaWVkVGV4dCkpfXJldHVybiBfZS5sKGAke3J9IGRvbmUuIGlzQWxsb3dlZFRvU2VuZDoke299YCksb31maWx0ZXJUZXh0KGUsdCl7Y29uc3Qgcz10aGlzLl9uK1wiLmZpbHRlclRleHRcIixvPXtpc0FsbG93ZWRUb1NlbmQ6ITAsbW9kaWZpZWRUZXh0OmV9O2lmKCF0aGlzLl9wbHVnaW58fCF0aGlzLl9jYW5JVXNlTGV4aWNvbilyZXR1cm4gbztpZighdGhpcy5faXNDb25maWdPbih0KSlyZXR1cm4gbztfZS5sKFwiXCIrcyk7Y29uc3R7dHlwZTppLG1vZGlmaWVkVGV4dDpufT10aGlzLl9wbHVnaW4uZmlsdGVyKGUpO3JldHVybiAxPT09aT9vLmlzQWxsb3dlZFRvU2VuZD0hMToyPT09aSYmKG8ubW9kaWZpZWRUZXh0PW4pLF9lLmwocytcIiBkb25lLiByZXQ6XCIsbyksb31fZ2V0TGV4aWNvbigpe2NvbnN0IGU9bmV3IENuKFwicHJvZmFuaXR5RmlsdGVyXCIpLHQ9dGhpcy5fbitcIi5fZ2V0TGV4aWNvblwiO3RoaXMuX2lzRmV0Y2hpbmc9ITAsdGhpcy5yZXF1ZXN0KHtwcm90b2NvbE5hbWU6c24scmVxdWVzdERhdGE6e3N0YXJ0SW5kZXg6dGhpcy5fc3RhcnRJbmRleCx2ZXJzaW9uOnRoaXMuX3ZlcnNpb259fSkudGhlbihzPT57Y29uc3R7ZXJyb3JJbmZvOm8sZmlsdGVyQ29uZmlnOmksbGV4aWNvbjpuLHN0clRva2VuOnIsY29tcGxldGVGbGFnOmEsbmV4dFN0YXJ0SW5kZXg6dSx2ZXJzaW9uOmMsZXhwaXJlZFRpbWU6bH09cy5kYXRhLHtlcnJvckNvZGU6ZCxlcnJvck1lc3NhZ2U6cH09bztyZXR1cm4gMCE9PWQ/KHRoaXMuX2lzRmV0Y2hpbmc9ITEsX2Uudyh0K1wiIGZhaWxlZC4gZXJyb3I6XCIsbyksdm9pZCBlLnNldENvZGUoZCkuc2V0TWVzc2FnZShwKS5lbmQoKSk6KHRoaXMuX29uRmlsdGVyQ29uZmlnKGkpLHRoaXMuX2dldFRva2VuKHIpLDE9PT1hPyhfZS5sKGAke3R9IGRvbmUuIHZlcnNpb246JHtjfSBleHBpcmVkVGltZToke2x9YCksdGhpcy5fdmVyc2lvbj1jLHRoaXMuX2NhbklVc2VMZXhpY29uPSEwLHRoaXMuX2lzRmV0Y2hpbmc9ITEsdGhpcy5fZXhwaXJlZFRpbWU9RGF0ZS5ub3coKSsxZTMqbCx2b2lkIHRoaXMuX3BsdWdpbi5vbkxleGljb25Db21wbGV0ZWQobikpOih0aGlzLl9zdGFydEluZGV4PXUsdGhpcy5fcGx1Z2luLm9uTGV4aWNvblNsaWNlZChuKSx2b2lkIHRoaXMuX2dldExleGljb24oKSkpfSkuY2F0Y2gocz0+e3RoaXMucHJvYmVOZXR3b3JrKCkudGhlbigoW3Qsb10pPT57ZS5zZXRFcnJvcihzLHQsbykuZW5kKCl9KSx0aGlzLl9pc0ZldGNoaW5nPSExLF9lLmwodCtcIiBmYWlsZWQuIGVycm9yOlwiLHMpfSl9X29uRmlsdGVyQ29uZmlnKGUpe0x0KGUpfHwodGhpcy5fZmlsdGVyQ29uZmlnTWFwLmNsZWFyKCksT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57dGhpcy5fZmlsdGVyQ29uZmlnTWFwLnNldCh0LGVbdF0pfSksX2UubChgJHt0aGlzLl9ufS5fb25GaWx0ZXJDb25maWcuIGtleXM6JHtBcnJheS5mcm9tKHRoaXMuX2ZpbHRlckNvbmZpZ01hcC5rZXlzKCkpfSB2YWx1ZXM6JHtBcnJheS5mcm9tKHRoaXMuX2ZpbHRlckNvbmZpZ01hcC52YWx1ZXMoKSl9YCkpfV9pc0NvbmZpZ09uKGUpe3JldHVybiAxPT09dGhpcy5fZmlsdGVyQ29uZmlnTWFwLmdldChlKX1fZ2V0VG9rZW4oZSl7aWYoIVVlKGUpKXJldHVybjtjb25zdCB0PWUubGVuZ3RoO2xldCBzPVwiXCI7aWYodCUyPT0wKWZvcihsZXQgbz0wO288PXQtMTtvKz0yKXMrPWVbbysxXSxzKz1lW29dO2Vsc2V7Zm9yKGxldCBvPTA7bzx0LTE7bys9MilzKz1lW28rMV0scys9ZVtvXTtzKz1lW3QtMV19dGhpcy5fcGx1Z2luLm9uVG9rZW4ocyl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fcGx1Z2luJiYodGhpcy5fcGx1Z2luLnJlc2V0KCksdGhpcy5fcGx1Z2luPW51bGwpLHRoaXMuX2ZpbHRlckNvbmZpZ01hcC5jbGVhcigpLHRoaXMuX3N0YXJ0SW5kZXg9MCx0aGlzLl92ZXJzaW9uPTAsdGhpcy5fY2FuSVVzZUxleGljb249ITEsdGhpcy5faXNGZXRjaGluZz0hMSx0aGlzLl9leHBpcmVkVGltZT0wfX1jbGFzcyBRYXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9tPWUsdGhpcy5fbj1cIlRyYW5zQ21kTW9kdWxlXCIsdGhpcy5fVFJUQ0NvbW1hbmRMaXN0PVtcInR1aV9yb29tX3N2ci4qXCJdO3RoaXMuX20uZ2V0SW5uZXJFbWl0dGVySW5zdGFuY2UoKS5vbihXbix0aGlzLl9vbkNsb3VkQ29uZmlnVXBkYXRlZCx0aGlzKX1fb25DbG91ZENvbmZpZ1VwZGF0ZWQoKXtsZXQgZT10aGlzLl9tLmdldE1vZHVsZShBcykuZ2V0Q2xvdWRDb25maWcoXCJydGNfY21kXCIpO3dlKGUpfHwoZT1KU09OLnBhcnNlKGUpLGUuZm9yRWFjaChlPT57dGhpcy5fVFJUQ0NvbW1hbmRMaXN0LmluY2x1ZGVzKGUpfHx0aGlzLl9UUlRDQ29tbWFuZExpc3QucHVzaChlKX0pKX1zZW5kVFJUQ0N1c3RvbURhdGEoZSl7Y29uc3R7c2VydmljZUNvbW1hbmQ6dCxkYXRhOnN9PWU7bGV0IG89bS5OQU1FLlRVSVJPT01fU1ZSK1wiLipcIjtyZXR1cm4gd2UodCl8fChvPXQpLHRoaXMuX1RSVENDb21tYW5kTGlzdC5pbmNsdWRlcyhvKT90aGlzLl90cmFucyh7c2VydmNtZDpvLGRhdGE6c30pOlZuKHtjb2RlOm5uLklOVkFMSURfVFJUQ19DTUR9KX1fdHJhbnMoZSl7X2UuZChgJHt0aGlzLl9ufS5fdHJhbnMuIG9wdGlvbnM6JHtKU09OLnN0cmluZ2lmeShlKX1gKTtjb25zdHtzZXJ2Y21kOnQsZGF0YTpzfT1lO3JldHVybiB0aGlzLl9tLmdldE1vZHVsZShFcykudHJhbnMoe3NlcnZjbWQ6dCxkYXRhOlVlKHMpP0pTT04ucGFyc2Uocyk6c30pfWdldENvbW1hbmRMaXN0KCl7cmV0dXJuIHRoaXMuX1RSVENDb21tYW5kTGlzdH1yZXNldCgpe19lLmwodGhpcy5fbitcIi5yZXNldFwiKX19Y2xhc3MgZXV7Y29uc3RydWN0b3IoZSl7dGhpcy5fbT1lLHRoaXMuX249XCJFcnJvck1lc3NhZ2VNb2R1bGVcIix0aGlzLlRJTV9FUlJPUl9BU1NJU1RBTkNFPVwidGltX2Vycm9yX2Fzc2lzdGFuY2VcIix0aGlzLlNUT1JBR0VfRVhQSVJFU19USU1FPTYwNDhlNSx0aGlzLl9tYXA9bmV3IE1hcCx0aGlzLl9pbml0KCl9X2luaXQoKXtjb25zdCBlPXRoaXMuX2dldFN0b3JhZ2VNb2R1bGUoKS5nZXRJdGVtKHRoaXMuVElNX0VSUk9SX0FTU0lTVEFOQ0UsITEpO2lmKCFlKXJldHVybiB2b2lkIHRoaXMuX2ZldGNoKCk7bGV0IHQ7dHJ5e3Q9SlNPTi5wYXJzZShlKX1jYXRjaChzKXt0aGlzLl9nZXRTdG9yYWdlTW9kdWxlKCkucmVtb3ZlSXRlbSh0aGlzLlRJTV9FUlJPUl9BU1NJU1RBTkNFLCExKSxfZS53KHRoaXMuX24rXCIuX2luaXQgZXJyb3I6XCIscyl9dCYmKHRoaXMuX25lZWRUb1VwZGF0ZSh0KT90aGlzLl9mZXRjaCgpOnRoaXMuX2ZpbGxNYXAodC5tZXNzYWdlKSl9X25lZWRUb1VwZGF0ZShlKXtjb25zdHtsb2NhbFNhdmVkVGltZTp0LGxvY2FsU2F2ZWRWZXJzaW9uOnN9PWUsbz10JiYobmV3IERhdGUpLmdldFRpbWUoKS10Pj10aGlzLlNUT1JBR0VfRVhQSVJFU19USU1FLGk9IXN8fFwiMi4yNy42XCIhPT1zO3JldHVybiBfZS5sKGAke3RoaXMuX259Ll9uZWVkVG9VcGRhdGUgaXNUaW1lb3V0OiR7b30gaXNEaWZmZXJlbnRWZXJzaW9uOiR7aX1gKSxvfHxpfV9mZXRjaCgpe2lmKHRoaXMuX20uZ2V0TW9kdWxlKG1zKS5pc1ByaXZhdGVOZXRXb3JrKCkpcmV0dXJuO2NvbnN0IGU9XCJodHRwczovL3dlYi5zZGsucWNsb3VkLmNvbS9pbS9kb3dubG9hZC9lcnJvci1tZXNzYWdlLzAuMC4xL3RpbS1lcnJvci1tZXNzYWdlLnR4dFwiLHQ9XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOFwiLHM9dGhpcy5fbitcIi5fZmV0Y2ggb2sgaW5cIixvPXRoaXM7aWYoUCl3LnJlcXVlc3Qoe3VybDplLG1ldGhvZDpcIkdFVFwiLHRpbWVvdXQ6M2UzLGhlYWRlcjp7XCJjb250ZW50LXR5cGVcIjp0fSxkYXRhVHlwZTpcInRleHRcIixzdWNjZXNzOmU9PntvLl9maWxsQW5kU2F2ZShlLmRhdGEpLF9lLmwocytcIiBtaW5pIHByb2dyYW1cIil9LGZhaWw6KCk9Pnt9fSk7ZWxzZXtjb25zdCBpPW5ldyBYTUxIdHRwUmVxdWVzdCxuPXNldFRpbWVvdXQoKCk9PntpLmFib3J0KCl9LDNlMyk7aS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09aS5yZWFkeVN0YXRlJiYoY2xlYXJUaW1lb3V0KG4pLDIwMCE9PWkuc3RhdHVzJiYzMDQhPT1pLnN0YXR1c3x8KF9lLmwocytcIiBicm93c2VyXCIpLG8uX2ZpbGxBbmRTYXZlKGkucmVzcG9uc2VUZXh0KSkpfSxpLm9wZW4oXCJHRVRcIixlLCEwKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIix0KSxpLnNlbmQoKX19X2ZpbGxBbmRTYXZlKGUpe3RoaXMuX2ZpbGxNYXAoZSksdGhpcy5fZ2V0U3RvcmFnZU1vZHVsZSgpLnNldEl0ZW0odGhpcy5USU1fRVJST1JfQVNTSVNUQU5DRSxKU09OLnN0cmluZ2lmeSh7bWVzc2FnZTplLGxvY2FsU2F2ZWRUaW1lOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGxvY2FsU2F2ZWRWZXJzaW9uOlwiMi4yNy42XCJ9KSwhMCwhMSl9X2dldFN0b3JhZ2VNb2R1bGUoKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoTXMpfV9maWxsTWFwKGUpe3RoaXMuX21hcC5jbGVhcigpO2NvbnN0IHQ9ZS5zcGxpdChcIjtcXG5cIikscz10Lmxlbmd0aDtsZXQgbyxpLG47Y29uc3Qgcj1uZXcgUmVnRXhwKC8nL2cpO2ZvcihsZXQgYT0wO2E8czthKyspaWYobz10W2FdLmluZGV4T2YoXCI6XCIpLGk9dFthXS5zbGljZSgwLG8pLG49dFthXS5zbGljZShvKzEsdFthXS5sZW5ndGgpLCFpLnN0YXJ0c1dpdGgoXCIvL1wiKSl7aWYod2UobikpY29udGludWU7dGhpcy5fbWFwLnNldChpLG4ucmVwbGFjZShyLFwiXCIpKX19Z2V0KGUpe2NvbnN0e2lzSW50bDp0LGtleTpzLHJlcGxhY2VtZW50MTpvLHJlcGxhY2VtZW50MjppfT1lO2xldCBuPXQ/cytcIl9lblwiOnMrXCJfY25cIjshdGhpcy5fbWFwLmhhcyhuKSYmdGhpcy5fbWFwLmhhcyhzKSYmKG49cyk7bGV0IHI9XCJcIjtyZXR1cm4gdGhpcy5fbWFwLmhhcyhuKT8ocj10aGlzLl9tYXAuZ2V0KG4pLHdlKG8pfHwocj1yLnJlcGxhY2UoXCIkcmVwbGFjZW1lbnQxXCIsbykpLHdlKGkpfHwocj1yLnJlcGxhY2UoXCIkcmVwbGFjZW1lbnQyXCIsaSkpLHIpOnJ9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIil9fXZhciB0dT1RcigoZnVuY3Rpb24oZSx0KXt2YXIgcz1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgSW50MzJBcnJheTtmdW5jdGlvbiBvKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfXQuYXNzaWduPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7dC5sZW5ndGg7KXt2YXIgcz10LnNoaWZ0KCk7aWYocyl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHMpdGhyb3cgbmV3IFR5cGVFcnJvcihzK1wibXVzdCBiZSBub24tb2JqZWN0XCIpO2Zvcih2YXIgaSBpbiBzKW8ocyxpKSYmKGVbaV09c1tpXSl9fXJldHVybiBlfSx0LnNocmlua0J1Zj1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxlbmd0aD09PXQ/ZTplLnN1YmFycmF5P2Uuc3ViYXJyYXkoMCx0KTooZS5sZW5ndGg9dCxlKX07dmFyIGk9e2FycmF5U2V0OmZ1bmN0aW9uKGUsdCxzLG8saSl7aWYodC5zdWJhcnJheSYmZS5zdWJhcnJheSllLnNldCh0LnN1YmFycmF5KHMscytvKSxpKTtlbHNlIGZvcih2YXIgbj0wO248bztuKyspZVtpK25dPXRbcytuXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbihlKXt2YXIgdCxzLG8saSxuLHI7Zm9yKG89MCx0PTAscz1lLmxlbmd0aDt0PHM7dCsrKW8rPWVbdF0ubGVuZ3RoO2ZvcihyPW5ldyBVaW50OEFycmF5KG8pLGk9MCx0PTAscz1lLmxlbmd0aDt0PHM7dCsrKW49ZVt0XSxyLnNldChuLGkpLGkrPW4ubGVuZ3RoO3JldHVybiByfX0sbj17YXJyYXlTZXQ6ZnVuY3Rpb24oZSx0LHMsbyxpKXtmb3IodmFyIG49MDtuPG87bisrKWVbaStuXT10W3Mrbl19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oZSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGUpfX07dC5zZXRUeXBlZD1mdW5jdGlvbihlKXtlPyh0LkJ1Zjg9VWludDhBcnJheSx0LkJ1ZjE2PVVpbnQxNkFycmF5LHQuQnVmMzI9SW50MzJBcnJheSx0LmFzc2lnbih0LGkpKToodC5CdWY4PUFycmF5LHQuQnVmMTY9QXJyYXksdC5CdWYzMj1BcnJheSx0LmFzc2lnbih0LG4pKX0sdC5zZXRUeXBlZChzKX0pKTt0dS5hc3NpZ24sdHUuc2hyaW5rQnVmLHR1LnNldFR5cGVkLHR1LkJ1ZjgsdHUuQnVmMTYsdHUuQnVmMzI7dmFyIHN1PWZ1bmN0aW9uKGUsdCxzLG8pe2Zvcih2YXIgaT02NTUzNSZlfDAsbj1lPj4+MTYmNjU1MzV8MCxyPTA7MCE9PXM7KXtzLT1yPXM+MmUzPzJlMzpzO2Rve249bisoaT1pK3RbbysrXXwwKXwwfXdoaWxlKC0tcik7aSU9NjU1MjEsbiU9NjU1MjF9cmV0dXJuIGl8bjw8MTZ8MH07dmFyIG91PWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9W10scz0wO3M8MjU2O3MrKyl7ZT1zO2Zvcih2YXIgbz0wO288ODtvKyspZT0xJmU/Mzk4ODI5MjM4NF5lPj4+MTplPj4+MTt0W3NdPWV9cmV0dXJuIHR9KCk7dmFyIGl1PWZ1bmN0aW9uKGUsdCxzLG8pe3ZhciBpPW91LG49bytzO2VePS0xO2Zvcih2YXIgcj1vO3I8bjtyKyspZT1lPj4+OF5pWzI1NSYoZV50W3JdKV07cmV0dXJuLTFeZX0sbnU9ZnVuY3Rpb24oZSx0KXt2YXIgcyxvLGksbixyLGEsdSxjLGwsZCxwLGgsZyxfLG0sTSxmLEksQyxULHksRCxFLFMsTDtzPWUuc3RhdGUsbz1lLm5leHRfaW4sUz1lLmlucHV0LGk9bysoZS5hdmFpbF9pbi01KSxuPWUubmV4dF9vdXQsTD1lLm91dHB1dCxyPW4tKHQtZS5hdmFpbF9vdXQpLGE9bisoZS5hdmFpbF9vdXQtMjU3KSx1PXMuZG1heCxjPXMud3NpemUsbD1zLndoYXZlLGQ9cy53bmV4dCxwPXMud2luZG93LGg9cy5ob2xkLGc9cy5iaXRzLF89cy5sZW5jb2RlLG09cy5kaXN0Y29kZSxNPSgxPDxzLmxlbmJpdHMpLTEsZj0oMTw8cy5kaXN0Yml0cyktMTtlOmRve2c8MTUmJihoKz1TW28rK108PGcsZys9OCxoKz1TW28rK108PGcsZys9OCksST1fW2gmTV07dDpmb3IoOzspe2lmKGg+Pj49Qz1JPj4+MjQsZy09QywwPT09KEM9ST4+PjE2JjI1NSkpTFtuKytdPTY1NTM1Jkk7ZWxzZXtpZighKDE2JkMpKXtpZigwPT0oNjQmQykpe0k9X1soNjU1MzUmSSkrKGgmKDE8PEMpLTEpXTtjb250aW51ZSB0fWlmKDMyJkMpe3MubW9kZT0xMjticmVhayBlfWUubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCIscy5tb2RlPTMwO2JyZWFrIGV9VD02NTUzNSZJLChDJj0xNSkmJihnPEMmJihoKz1TW28rK108PGcsZys9OCksVCs9aCYoMTw8QyktMSxoPj4+PUMsZy09QyksZzwxNSYmKGgrPVNbbysrXTw8ZyxnKz04LGgrPVNbbysrXTw8ZyxnKz04KSxJPW1baCZmXTtzOmZvcig7Oyl7aWYoaD4+Pj1DPUk+Pj4yNCxnLT1DLCEoMTYmKEM9ST4+PjE2JjI1NSkpKXtpZigwPT0oNjQmQykpe0k9bVsoNjU1MzUmSSkrKGgmKDE8PEMpLTEpXTtjb250aW51ZSBzfWUubXNnPVwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCIscy5tb2RlPTMwO2JyZWFrIGV9aWYoeT02NTUzNSZJLGc8KEMmPTE1KSYmKGgrPVNbbysrXTw8ZywoZys9OCk8QyYmKGgrPVNbbysrXTw8ZyxnKz04KSksKHkrPWgmKDE8PEMpLTEpPnUpe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2tcIixzLm1vZGU9MzA7YnJlYWsgZX1pZihoPj4+PUMsZy09Qyx5PihDPW4tcikpe2lmKChDPXktQyk+bCYmcy5zYW5lKXtlLm1zZz1cImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrXCIscy5tb2RlPTMwO2JyZWFrIGV9aWYoRD0wLEU9cCwwPT09ZCl7aWYoRCs9Yy1DLEM8VCl7VC09Qztkb3tMW24rK109cFtEKytdfXdoaWxlKC0tQyk7RD1uLXksRT1MfX1lbHNlIGlmKGQ8Qyl7aWYoRCs9YytkLUMsKEMtPWQpPFQpe1QtPUM7ZG97TFtuKytdPXBbRCsrXX13aGlsZSgtLUMpO2lmKEQ9MCxkPFQpe1QtPUM9ZDtkb3tMW24rK109cFtEKytdfXdoaWxlKC0tQyk7RD1uLXksRT1MfX19ZWxzZSBpZihEKz1kLUMsQzxUKXtULT1DO2Rve0xbbisrXT1wW0QrK119d2hpbGUoLS1DKTtEPW4teSxFPUx9Zm9yKDtUPjI7KUxbbisrXT1FW0QrK10sTFtuKytdPUVbRCsrXSxMW24rK109RVtEKytdLFQtPTM7VCYmKExbbisrXT1FW0QrK10sVD4xJiYoTFtuKytdPUVbRCsrXSkpfWVsc2V7RD1uLXk7ZG97TFtuKytdPUxbRCsrXSxMW24rK109TFtEKytdLExbbisrXT1MW0QrK10sVC09M313aGlsZShUPjIpO1QmJihMW24rK109TFtEKytdLFQ+MSYmKExbbisrXT1MW0QrK10pKX1icmVha319YnJlYWt9fXdoaWxlKG88aSYmbjxhKTtvLT1UPWc+PjMsaCY9KDE8PChnLT1UPDwzKSktMSxlLm5leHRfaW49byxlLm5leHRfb3V0PW4sZS5hdmFpbF9pbj1vPGk/aS1vKzU6NS0oby1pKSxlLmF2YWlsX291dD1uPGE/YS1uKzI1NzoyNTctKG4tYSkscy5ob2xkPWgscy5iaXRzPWd9LHJ1PVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDAsMF0sYXU9WzE2LDE2LDE2LDE2LDE2LDE2LDE2LDE2LDE3LDE3LDE3LDE3LDE4LDE4LDE4LDE4LDE5LDE5LDE5LDE5LDIwLDIwLDIwLDIwLDIxLDIxLDIxLDIxLDE2LDcyLDc4XSx1dT1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3LDAsMF0sY3U9WzE2LDE2LDE2LDE2LDE3LDE3LDE4LDE4LDE5LDE5LDIwLDIwLDIxLDIxLDIyLDIyLDIzLDIzLDI0LDI0LDI1LDI1LDI2LDI2LDI3LDI3LDI4LDI4LDI5LDI5LDY0LDY0XSxsdT1mdW5jdGlvbihlLHQscyxvLGksbixyLGEpe3ZhciB1LGMsbCxkLHAsaCxnLF8sbSxNPWEuYml0cyxmPTAsST0wLEM9MCxUPTAseT0wLEQ9MCxFPTAsUz0wLEw9MCxBPTAsdj1udWxsLE49MCxSPW5ldyB0dS5CdWYxNigxNiksTz1uZXcgdHUuQnVmMTYoMTYpLEc9bnVsbCxVPTA7Zm9yKGY9MDtmPD0xNTtmKyspUltmXT0wO2ZvcihJPTA7STxvO0krKylSW3RbcytJXV0rKztmb3IoeT1NLFQ9MTU7VD49MSYmMD09PVJbVF07VC0tKTtpZih5PlQmJih5PVQpLDA9PT1UKXJldHVybiBpW24rK109MjA5NzE1MjAsaVtuKytdPTIwOTcxNTIwLGEuYml0cz0xLDA7Zm9yKEM9MTtDPFQmJjA9PT1SW0NdO0MrKyk7Zm9yKHk8QyYmKHk9QyksUz0xLGY9MTtmPD0xNTtmKyspaWYoUzw8PTEsKFMtPVJbZl0pPDApcmV0dXJuLTE7aWYoUz4wJiYoMD09PWV8fDEhPT1UKSlyZXR1cm4tMTtmb3IoT1sxXT0wLGY9MTtmPDE1O2YrKylPW2YrMV09T1tmXStSW2ZdO2ZvcihJPTA7STxvO0krKykwIT09dFtzK0ldJiYocltPW3RbcytJXV0rK109SSk7aWYoMD09PWU/KHY9Rz1yLGg9MTkpOjE9PT1lPyh2PXJ1LE4tPTI1NyxHPWF1LFUtPTI1NyxoPTI1Nik6KHY9dXUsRz1jdSxoPS0xKSxBPTAsST0wLGY9QyxwPW4sRD15LEU9MCxsPS0xLGQ9KEw9MTw8eSktMSwxPT09ZSYmTD44NTJ8fDI9PT1lJiZMPjU5MilyZXR1cm4gMTtmb3IoOzspe2c9Zi1FLHJbSV08aD8oXz0wLG09cltJXSk6cltJXT5oPyhfPUdbVStyW0ldXSxtPXZbTityW0ldXSk6KF89OTYsbT0wKSx1PTE8PGYtRSxDPWM9MTw8RDtkb3tpW3ArKEE+PkUpKyhjLT11KV09Zzw8MjR8Xzw8MTZ8bXwwfXdoaWxlKDAhPT1jKTtmb3IodT0xPDxmLTE7QSZ1Oyl1Pj49MTtpZigwIT09dT8oQSY9dS0xLEErPXUpOkE9MCxJKyssMD09LS1SW2ZdKXtpZihmPT09VClicmVhaztmPXRbcytyW0ldXX1pZihmPnkmJihBJmQpIT09bCl7Zm9yKDA9PT1FJiYoRT15KSxwKz1DLFM9MTw8KEQ9Zi1FKTtEK0U8VCYmISgoUy09UltEK0VdKTw9MCk7KUQrKyxTPDw9MTtpZihMKz0xPDxELDE9PT1lJiZMPjg1Mnx8Mj09PWUmJkw+NTkyKXJldHVybiAxO2lbbD1BJmRdPXk8PDI0fEQ8PDE2fHAtbnwwfX1yZXR1cm4gMCE9PUEmJihpW3ArQV09Zi1FPDwyNHw2NDw8MTZ8MCksYS5iaXRzPXksMH07ZnVuY3Rpb24gZHUoZSl7cmV0dXJuKGU+Pj4yNCYyNTUpKyhlPj4+OCY2NTI4MCkrKCg2NTI4MCZlKTw8OCkrKCgyNTUmZSk8PDI0KX1mdW5jdGlvbiBwdSgpe3RoaXMubW9kZT0wLHRoaXMubGFzdD0hMSx0aGlzLndyYXA9MCx0aGlzLmhhdmVkaWN0PSExLHRoaXMuZmxhZ3M9MCx0aGlzLmRtYXg9MCx0aGlzLmNoZWNrPTAsdGhpcy50b3RhbD0wLHRoaXMuaGVhZD1udWxsLHRoaXMud2JpdHM9MCx0aGlzLndzaXplPTAsdGhpcy53aGF2ZT0wLHRoaXMud25leHQ9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMuaG9sZD0wLHRoaXMuYml0cz0wLHRoaXMubGVuZ3RoPTAsdGhpcy5vZmZzZXQ9MCx0aGlzLmV4dHJhPTAsdGhpcy5sZW5jb2RlPW51bGwsdGhpcy5kaXN0Y29kZT1udWxsLHRoaXMubGVuYml0cz0wLHRoaXMuZGlzdGJpdHM9MCx0aGlzLm5jb2RlPTAsdGhpcy5ubGVuPTAsdGhpcy5uZGlzdD0wLHRoaXMuaGF2ZT0wLHRoaXMubmV4dD1udWxsLHRoaXMubGVucz1uZXcgdHUuQnVmMTYoMzIwKSx0aGlzLndvcms9bmV3IHR1LkJ1ZjE2KDI4OCksdGhpcy5sZW5keW49bnVsbCx0aGlzLmRpc3RkeW49bnVsbCx0aGlzLnNhbmU9MCx0aGlzLmJhY2s9MCx0aGlzLndhcz0wfWZ1bmN0aW9uIGh1KGUpe3ZhciB0O3JldHVybiBlJiZlLnN0YXRlPyh0PWUuc3RhdGUsZS50b3RhbF9pbj1lLnRvdGFsX291dD10LnRvdGFsPTAsZS5tc2c9XCJcIix0LndyYXAmJihlLmFkbGVyPTEmdC53cmFwKSx0Lm1vZGU9MSx0Lmxhc3Q9MCx0LmhhdmVkaWN0PTAsdC5kbWF4PTMyNzY4LHQuaGVhZD1udWxsLHQuaG9sZD0wLHQuYml0cz0wLHQubGVuY29kZT10LmxlbmR5bj1uZXcgdHUuQnVmMzIoODUyKSx0LmRpc3Rjb2RlPXQuZGlzdGR5bj1uZXcgdHUuQnVmMzIoNTkyKSx0LnNhbmU9MSx0LmJhY2s9LTEsMCk6LTJ9ZnVuY3Rpb24gZ3UoZSl7dmFyIHQ7cmV0dXJuIGUmJmUuc3RhdGU/KCh0PWUuc3RhdGUpLndzaXplPTAsdC53aGF2ZT0wLHQud25leHQ9MCxodShlKSk6LTJ9ZnVuY3Rpb24gX3UoZSx0KXt2YXIgcyxvO3JldHVybiBlJiZlLnN0YXRlPyhvPWUuc3RhdGUsdDwwPyhzPTAsdD0tdCk6KHM9MSsodD4+NCksdDw0OCYmKHQmPTE1KSksdCYmKHQ8OHx8dD4xNSk/LTI6KG51bGwhPT1vLndpbmRvdyYmby53Yml0cyE9PXQmJihvLndpbmRvdz1udWxsKSxvLndyYXA9cyxvLndiaXRzPXQsZ3UoZSkpKTotMn1mdW5jdGlvbiBtdShlLHQpe3ZhciBzLG87cmV0dXJuIGU/KG89bmV3IHB1LGUuc3RhdGU9byxvLndpbmRvdz1udWxsLDAhPT0ocz1fdShlLHQpKSYmKGUuc3RhdGU9bnVsbCkscyk6LTJ9dmFyIE11LGZ1LEl1PSEwO2Z1bmN0aW9uIEN1KGUpe2lmKEl1KXt2YXIgdDtmb3IoTXU9bmV3IHR1LkJ1ZjMyKDUxMiksZnU9bmV3IHR1LkJ1ZjMyKDMyKSx0PTA7dDwxNDQ7KWUubGVuc1t0KytdPTg7Zm9yKDt0PDI1NjspZS5sZW5zW3QrK109OTtmb3IoO3Q8MjgwOyllLmxlbnNbdCsrXT03O2Zvcig7dDwyODg7KWUubGVuc1t0KytdPTg7Zm9yKGx1KDEsZS5sZW5zLDAsMjg4LE11LDAsZS53b3JrLHtiaXRzOjl9KSx0PTA7dDwzMjspZS5sZW5zW3QrK109NTtsdSgyLGUubGVucywwLDMyLGZ1LDAsZS53b3JrLHtiaXRzOjV9KSxJdT0hMX1lLmxlbmNvZGU9TXUsZS5sZW5iaXRzPTksZS5kaXN0Y29kZT1mdSxlLmRpc3RiaXRzPTV9ZnVuY3Rpb24gVHUoZSx0LHMsbyl7dmFyIGksbj1lLnN0YXRlO3JldHVybiBudWxsPT09bi53aW5kb3cmJihuLndzaXplPTE8PG4ud2JpdHMsbi53bmV4dD0wLG4ud2hhdmU9MCxuLndpbmRvdz1uZXcgdHUuQnVmOChuLndzaXplKSksbz49bi53c2l6ZT8odHUuYXJyYXlTZXQobi53aW5kb3csdCxzLW4ud3NpemUsbi53c2l6ZSwwKSxuLnduZXh0PTAsbi53aGF2ZT1uLndzaXplKTooKGk9bi53c2l6ZS1uLnduZXh0KT5vJiYoaT1vKSx0dS5hcnJheVNldChuLndpbmRvdyx0LHMtbyxpLG4ud25leHQpLChvLT1pKT8odHUuYXJyYXlTZXQobi53aW5kb3csdCxzLW8sbywwKSxuLnduZXh0PW8sbi53aGF2ZT1uLndzaXplKToobi53bmV4dCs9aSxuLnduZXh0PT09bi53c2l6ZSYmKG4ud25leHQ9MCksbi53aGF2ZTxuLndzaXplJiYobi53aGF2ZSs9aSkpKSwwfXZhciB5dT17aW5mbGF0ZVJlc2V0Omd1LGluZmxhdGVSZXNldDI6X3UsaW5mbGF0ZVJlc2V0S2VlcDpodSxpbmZsYXRlSW5pdDpmdW5jdGlvbihlKXtyZXR1cm4gbXUoZSwxNSl9LGluZmxhdGVJbml0MjptdSxpbmZsYXRlOmZ1bmN0aW9uKGUsdCl7dmFyIHMsbyxpLG4scixhLHUsYyxsLGQscCxoLGcsXyxtLE0sZixJLEMsVCx5LEQsRSxTLEw9MCxBPW5ldyB0dS5CdWY4KDQpLHY9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdO2lmKCFlfHwhZS5zdGF0ZXx8IWUub3V0cHV0fHwhZS5pbnB1dCYmMCE9PWUuYXZhaWxfaW4pcmV0dXJuLTI7MTI9PT0ocz1lLnN0YXRlKS5tb2RlJiYocy5tb2RlPTEzKSxyPWUubmV4dF9vdXQsaT1lLm91dHB1dCx1PWUuYXZhaWxfb3V0LG49ZS5uZXh0X2luLG89ZS5pbnB1dCxhPWUuYXZhaWxfaW4sYz1zLmhvbGQsbD1zLmJpdHMsZD1hLHA9dSxEPTA7ZTpmb3IoOzspc3dpdGNoKHMubW9kZSl7Y2FzZSAxOmlmKDA9PT1zLndyYXApe3MubW9kZT0xMzticmVha31mb3IoO2w8MTY7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1pZigyJnMud3JhcCYmMzU2MTU9PT1jKXtzLmNoZWNrPTAsQVswXT0yNTUmYyxBWzFdPWM+Pj44JjI1NSxzLmNoZWNrPWl1KHMuY2hlY2ssQSwyLDApLGM9MCxsPTAscy5tb2RlPTI7YnJlYWt9aWYocy5mbGFncz0wLHMuaGVhZCYmKHMuaGVhZC5kb25lPSExKSwhKDEmcy53cmFwKXx8KCgoMjU1JmMpPDw4KSsoYz4+OCkpJTMxKXtlLm1zZz1cImluY29ycmVjdCBoZWFkZXIgY2hlY2tcIixzLm1vZGU9MzA7YnJlYWt9aWYoOCE9KDE1JmMpKXtlLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIscy5tb2RlPTMwO2JyZWFrfWlmKGwtPTQseT04KygxNSYoYz4+Pj00KSksMD09PXMud2JpdHMpcy53Yml0cz15O2Vsc2UgaWYoeT5zLndiaXRzKXtlLm1zZz1cImludmFsaWQgd2luZG93IHNpemVcIixzLm1vZGU9MzA7YnJlYWt9cy5kbWF4PTE8PHksZS5hZGxlcj1zLmNoZWNrPTEscy5tb2RlPTUxMiZjPzEwOjEyLGM9MCxsPTA7YnJlYWs7Y2FzZSAyOmZvcig7bDwxNjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fWlmKHMuZmxhZ3M9Yyw4IT0oMjU1JnMuZmxhZ3MpKXtlLm1zZz1cInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kXCIscy5tb2RlPTMwO2JyZWFrfWlmKDU3MzQ0JnMuZmxhZ3Mpe2UubXNnPVwidW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0XCIscy5tb2RlPTMwO2JyZWFrfXMuaGVhZCYmKHMuaGVhZC50ZXh0PWM+PjgmMSksNTEyJnMuZmxhZ3MmJihBWzBdPTI1NSZjLEFbMV09Yz4+PjgmMjU1LHMuY2hlY2s9aXUocy5jaGVjayxBLDIsMCkpLGM9MCxsPTAscy5tb2RlPTM7Y2FzZSAzOmZvcig7bDwzMjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fXMuaGVhZCYmKHMuaGVhZC50aW1lPWMpLDUxMiZzLmZsYWdzJiYoQVswXT0yNTUmYyxBWzFdPWM+Pj44JjI1NSxBWzJdPWM+Pj4xNiYyNTUsQVszXT1jPj4+MjQmMjU1LHMuY2hlY2s9aXUocy5jaGVjayxBLDQsMCkpLGM9MCxsPTAscy5tb2RlPTQ7Y2FzZSA0OmZvcig7bDwxNjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fXMuaGVhZCYmKHMuaGVhZC54ZmxhZ3M9MjU1JmMscy5oZWFkLm9zPWM+PjgpLDUxMiZzLmZsYWdzJiYoQVswXT0yNTUmYyxBWzFdPWM+Pj44JjI1NSxzLmNoZWNrPWl1KHMuY2hlY2ssQSwyLDApKSxjPTAsbD0wLHMubW9kZT01O2Nhc2UgNTppZigxMDI0JnMuZmxhZ3Mpe2Zvcig7bDwxNjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fXMubGVuZ3RoPWMscy5oZWFkJiYocy5oZWFkLmV4dHJhX2xlbj1jKSw1MTImcy5mbGFncyYmKEFbMF09MjU1JmMsQVsxXT1jPj4+OCYyNTUscy5jaGVjaz1pdShzLmNoZWNrLEEsMiwwKSksYz0wLGw9MH1lbHNlIHMuaGVhZCYmKHMuaGVhZC5leHRyYT1udWxsKTtzLm1vZGU9NjtjYXNlIDY6aWYoMTAyNCZzLmZsYWdzJiYoKGg9cy5sZW5ndGgpPmEmJihoPWEpLGgmJihzLmhlYWQmJih5PXMuaGVhZC5leHRyYV9sZW4tcy5sZW5ndGgscy5oZWFkLmV4dHJhfHwocy5oZWFkLmV4dHJhPW5ldyBBcnJheShzLmhlYWQuZXh0cmFfbGVuKSksdHUuYXJyYXlTZXQocy5oZWFkLmV4dHJhLG8sbixoLHkpKSw1MTImcy5mbGFncyYmKHMuY2hlY2s9aXUocy5jaGVjayxvLGgsbikpLGEtPWgsbis9aCxzLmxlbmd0aC09aCkscy5sZW5ndGgpKWJyZWFrIGU7cy5sZW5ndGg9MCxzLm1vZGU9NztjYXNlIDc6aWYoMjA0OCZzLmZsYWdzKXtpZigwPT09YSlicmVhayBlO2g9MDtkb3t5PW9bbitoKytdLHMuaGVhZCYmeSYmcy5sZW5ndGg8NjU1MzYmJihzLmhlYWQubmFtZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh5KSl9d2hpbGUoeSYmaDxhKTtpZig1MTImcy5mbGFncyYmKHMuY2hlY2s9aXUocy5jaGVjayxvLGgsbikpLGEtPWgsbis9aCx5KWJyZWFrIGV9ZWxzZSBzLmhlYWQmJihzLmhlYWQubmFtZT1udWxsKTtzLmxlbmd0aD0wLHMubW9kZT04O2Nhc2UgODppZig0MDk2JnMuZmxhZ3Mpe2lmKDA9PT1hKWJyZWFrIGU7aD0wO2Rve3k9b1tuK2grK10scy5oZWFkJiZ5JiZzLmxlbmd0aDw2NTUzNiYmKHMuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHkpKX13aGlsZSh5JiZoPGEpO2lmKDUxMiZzLmZsYWdzJiYocy5jaGVjaz1pdShzLmNoZWNrLG8saCxuKSksYS09aCxuKz1oLHkpYnJlYWsgZX1lbHNlIHMuaGVhZCYmKHMuaGVhZC5jb21tZW50PW51bGwpO3MubW9kZT05O2Nhc2UgOTppZig1MTImcy5mbGFncyl7Zm9yKDtsPDE2Oyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9aWYoYyE9PSg2NTUzNSZzLmNoZWNrKSl7ZS5tc2c9XCJoZWFkZXIgY3JjIG1pc21hdGNoXCIscy5tb2RlPTMwO2JyZWFrfWM9MCxsPTB9cy5oZWFkJiYocy5oZWFkLmhjcmM9cy5mbGFncz4+OSYxLHMuaGVhZC5kb25lPSEwKSxlLmFkbGVyPXMuY2hlY2s9MCxzLm1vZGU9MTI7YnJlYWs7Y2FzZSAxMDpmb3IoO2w8MzI7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1lLmFkbGVyPXMuY2hlY2s9ZHUoYyksYz0wLGw9MCxzLm1vZGU9MTE7Y2FzZSAxMTppZigwPT09cy5oYXZlZGljdClyZXR1cm4gZS5uZXh0X291dD1yLGUuYXZhaWxfb3V0PXUsZS5uZXh0X2luPW4sZS5hdmFpbF9pbj1hLHMuaG9sZD1jLHMuYml0cz1sLDI7ZS5hZGxlcj1zLmNoZWNrPTEscy5tb2RlPTEyO2Nhc2UgMTI6aWYoNT09PXR8fDY9PT10KWJyZWFrIGU7Y2FzZSAxMzppZihzLmxhc3Qpe2M+Pj49NyZsLGwtPTcmbCxzLm1vZGU9Mjc7YnJlYWt9Zm9yKDtsPDM7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1zd2l0Y2gocy5sYXN0PTEmYyxsLT0xLDMmKGM+Pj49MSkpe2Nhc2UgMDpzLm1vZGU9MTQ7YnJlYWs7Y2FzZSAxOmlmKEN1KHMpLHMubW9kZT0yMCw2PT09dCl7Yz4+Pj0yLGwtPTI7YnJlYWsgZX1icmVhaztjYXNlIDI6cy5tb2RlPTE3O2JyZWFrO2Nhc2UgMzplLm1zZz1cImludmFsaWQgYmxvY2sgdHlwZVwiLHMubW9kZT0zMH1jPj4+PTIsbC09MjticmVhaztjYXNlIDE0OmZvcihjPj4+PTcmbCxsLT03Jmw7bDwzMjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fWlmKCg2NTUzNSZjKSE9KGM+Pj4xNl42NTUzNSkpe2UubXNnPVwiaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Roc1wiLHMubW9kZT0zMDticmVha31pZihzLmxlbmd0aD02NTUzNSZjLGM9MCxsPTAscy5tb2RlPTE1LDY9PT10KWJyZWFrIGU7Y2FzZSAxNTpzLm1vZGU9MTY7Y2FzZSAxNjppZihoPXMubGVuZ3RoKXtpZihoPmEmJihoPWEpLGg+dSYmKGg9dSksMD09PWgpYnJlYWsgZTt0dS5hcnJheVNldChpLG8sbixoLHIpLGEtPWgsbis9aCx1LT1oLHIrPWgscy5sZW5ndGgtPWg7YnJlYWt9cy5tb2RlPTEyO2JyZWFrO2Nhc2UgMTc6Zm9yKDtsPDE0Oyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9aWYocy5ubGVuPTI1NysoMzEmYyksYz4+Pj01LGwtPTUscy5uZGlzdD0xKygzMSZjKSxjPj4+PTUsbC09NSxzLm5jb2RlPTQrKDE1JmMpLGM+Pj49NCxsLT00LHMubmxlbj4yODZ8fHMubmRpc3Q+MzApe2UubXNnPVwidG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHNcIixzLm1vZGU9MzA7YnJlYWt9cy5oYXZlPTAscy5tb2RlPTE4O2Nhc2UgMTg6Zm9yKDtzLmhhdmU8cy5uY29kZTspe2Zvcig7bDwzOyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9cy5sZW5zW3Zbcy5oYXZlKytdXT03JmMsYz4+Pj0zLGwtPTN9Zm9yKDtzLmhhdmU8MTk7KXMubGVuc1t2W3MuaGF2ZSsrXV09MDtpZihzLmxlbmNvZGU9cy5sZW5keW4scy5sZW5iaXRzPTcsRT17Yml0czpzLmxlbmJpdHN9LEQ9bHUoMCxzLmxlbnMsMCwxOSxzLmxlbmNvZGUsMCxzLndvcmssRSkscy5sZW5iaXRzPUUuYml0cyxEKXtlLm1zZz1cImludmFsaWQgY29kZSBsZW5ndGhzIHNldFwiLHMubW9kZT0zMDticmVha31zLmhhdmU9MCxzLm1vZGU9MTk7Y2FzZSAxOTpmb3IoO3MuaGF2ZTxzLm5sZW4rcy5uZGlzdDspe2Zvcig7TT0oTD1zLmxlbmNvZGVbYyYoMTw8cy5sZW5iaXRzKS0xXSk+Pj4xNiYyNTUsZj02NTUzNSZMLCEoKG09TD4+PjI0KTw9bCk7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1pZihmPDE2KWM+Pj49bSxsLT1tLHMubGVuc1tzLmhhdmUrK109ZjtlbHNle2lmKDE2PT09Zil7Zm9yKFM9bSsyO2w8Uzspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fWlmKGM+Pj49bSxsLT1tLDA9PT1zLmhhdmUpe2UubXNnPVwiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdFwiLHMubW9kZT0zMDticmVha315PXMubGVuc1tzLmhhdmUtMV0saD0zKygzJmMpLGM+Pj49MixsLT0yfWVsc2UgaWYoMTc9PT1mKXtmb3IoUz1tKzM7bDxTOyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9bC09bSx5PTAsaD0zKyg3JihjPj4+PW0pKSxjPj4+PTMsbC09M31lbHNle2ZvcihTPW0rNztsPFM7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1sLT1tLHk9MCxoPTExKygxMjcmKGM+Pj49bSkpLGM+Pj49NyxsLT03fWlmKHMuaGF2ZStoPnMubmxlbitzLm5kaXN0KXtlLm1zZz1cImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIixzLm1vZGU9MzA7YnJlYWt9Zm9yKDtoLS07KXMubGVuc1tzLmhhdmUrK109eX19aWYoMzA9PT1zLm1vZGUpYnJlYWs7aWYoMD09PXMubGVuc1syNTZdKXtlLm1zZz1cImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9ja1wiLHMubW9kZT0zMDticmVha31pZihzLmxlbmJpdHM9OSxFPXtiaXRzOnMubGVuYml0c30sRD1sdSgxLHMubGVucywwLHMubmxlbixzLmxlbmNvZGUsMCxzLndvcmssRSkscy5sZW5iaXRzPUUuYml0cyxEKXtlLm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldFwiLHMubW9kZT0zMDticmVha31pZihzLmRpc3RiaXRzPTYscy5kaXN0Y29kZT1zLmRpc3RkeW4sRT17Yml0czpzLmRpc3RiaXRzfSxEPWx1KDIscy5sZW5zLHMubmxlbixzLm5kaXN0LHMuZGlzdGNvZGUsMCxzLndvcmssRSkscy5kaXN0Yml0cz1FLmJpdHMsRCl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlcyBzZXRcIixzLm1vZGU9MzA7YnJlYWt9aWYocy5tb2RlPTIwLDY9PT10KWJyZWFrIGU7Y2FzZSAyMDpzLm1vZGU9MjE7Y2FzZSAyMTppZihhPj02JiZ1Pj0yNTgpe2UubmV4dF9vdXQ9cixlLmF2YWlsX291dD11LGUubmV4dF9pbj1uLGUuYXZhaWxfaW49YSxzLmhvbGQ9YyxzLmJpdHM9bCxudShlLHApLHI9ZS5uZXh0X291dCxpPWUub3V0cHV0LHU9ZS5hdmFpbF9vdXQsbj1lLm5leHRfaW4sbz1lLmlucHV0LGE9ZS5hdmFpbF9pbixjPXMuaG9sZCxsPXMuYml0cywxMj09PXMubW9kZSYmKHMuYmFjaz0tMSk7YnJlYWt9Zm9yKHMuYmFjaz0wO009KEw9cy5sZW5jb2RlW2MmKDE8PHMubGVuYml0cyktMV0pPj4+MTYmMjU1LGY9NjU1MzUmTCwhKChtPUw+Pj4yNCk8PWwpOyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9aWYoTSYmMD09KDI0MCZNKSl7Zm9yKEk9bSxDPU0sVD1mO009KEw9cy5sZW5jb2RlW1QrKChjJigxPDxJK0MpLTEpPj5JKV0pPj4+MTYmMjU1LGY9NjU1MzUmTCwhKEkrKG09TD4+PjI0KTw9bCk7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1jPj4+PUksbC09SSxzLmJhY2srPUl9aWYoYz4+Pj1tLGwtPW0scy5iYWNrKz1tLHMubGVuZ3RoPWYsMD09PU0pe3MubW9kZT0yNjticmVha31pZigzMiZNKXtzLmJhY2s9LTEscy5tb2RlPTEyO2JyZWFrfWlmKDY0Jk0pe2UubXNnPVwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCIscy5tb2RlPTMwO2JyZWFrfXMuZXh0cmE9MTUmTSxzLm1vZGU9MjI7Y2FzZSAyMjppZihzLmV4dHJhKXtmb3IoUz1zLmV4dHJhO2w8Uzspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGMrPW9bbisrXTw8bCxsKz04fXMubGVuZ3RoKz1jJigxPDxzLmV4dHJhKS0xLGM+Pj49cy5leHRyYSxsLT1zLmV4dHJhLHMuYmFjays9cy5leHRyYX1zLndhcz1zLmxlbmd0aCxzLm1vZGU9MjM7Y2FzZSAyMzpmb3IoO009KEw9cy5kaXN0Y29kZVtjJigxPDxzLmRpc3RiaXRzKS0xXSk+Pj4xNiYyNTUsZj02NTUzNSZMLCEoKG09TD4+PjI0KTw9bCk7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1pZigwPT0oMjQwJk0pKXtmb3IoST1tLEM9TSxUPWY7TT0oTD1zLmRpc3Rjb2RlW1QrKChjJigxPDxJK0MpLTEpPj5JKV0pPj4+MTYmMjU1LGY9NjU1MzUmTCwhKEkrKG09TD4+PjI0KTw9bCk7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1jPj4+PUksbC09SSxzLmJhY2srPUl9aWYoYz4+Pj1tLGwtPW0scy5iYWNrKz1tLDY0Jk0pe2UubXNnPVwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCIscy5tb2RlPTMwO2JyZWFrfXMub2Zmc2V0PWYscy5leHRyYT0xNSZNLHMubW9kZT0yNDtjYXNlIDI0OmlmKHMuZXh0cmEpe2ZvcihTPXMuZXh0cmE7bDxTOyl7aWYoMD09PWEpYnJlYWsgZTthLS0sYys9b1tuKytdPDxsLGwrPTh9cy5vZmZzZXQrPWMmKDE8PHMuZXh0cmEpLTEsYz4+Pj1zLmV4dHJhLGwtPXMuZXh0cmEscy5iYWNrKz1zLmV4dHJhfWlmKHMub2Zmc2V0PnMuZG1heCl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLHMubW9kZT0zMDticmVha31zLm1vZGU9MjU7Y2FzZSAyNTppZigwPT09dSlicmVhayBlO2lmKGg9cC11LHMub2Zmc2V0Pmgpe2lmKChoPXMub2Zmc2V0LWgpPnMud2hhdmUmJnMuc2FuZSl7ZS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLHMubW9kZT0zMDticmVha31oPnMud25leHQ/KGgtPXMud25leHQsZz1zLndzaXplLWgpOmc9cy53bmV4dC1oLGg+cy5sZW5ndGgmJihoPXMubGVuZ3RoKSxfPXMud2luZG93fWVsc2UgXz1pLGc9ci1zLm9mZnNldCxoPXMubGVuZ3RoO2g+dSYmKGg9dSksdS09aCxzLmxlbmd0aC09aDtkb3tpW3IrK109X1tnKytdfXdoaWxlKC0taCk7MD09PXMubGVuZ3RoJiYocy5tb2RlPTIxKTticmVhaztjYXNlIDI2OmlmKDA9PT11KWJyZWFrIGU7aVtyKytdPXMubGVuZ3RoLHUtLSxzLm1vZGU9MjE7YnJlYWs7Y2FzZSAyNzppZihzLndyYXApe2Zvcig7bDwzMjspe2lmKDA9PT1hKWJyZWFrIGU7YS0tLGN8PW9bbisrXTw8bCxsKz04fWlmKHAtPXUsZS50b3RhbF9vdXQrPXAscy50b3RhbCs9cCxwJiYoZS5hZGxlcj1zLmNoZWNrPXMuZmxhZ3M/aXUocy5jaGVjayxpLHAsci1wKTpzdShzLmNoZWNrLGkscCxyLXApKSxwPXUsKHMuZmxhZ3M/YzpkdShjKSkhPT1zLmNoZWNrKXtlLm1zZz1cImluY29ycmVjdCBkYXRhIGNoZWNrXCIscy5tb2RlPTMwO2JyZWFrfWM9MCxsPTB9cy5tb2RlPTI4O2Nhc2UgMjg6aWYocy53cmFwJiZzLmZsYWdzKXtmb3IoO2w8MzI7KXtpZigwPT09YSlicmVhayBlO2EtLSxjKz1vW24rK108PGwsbCs9OH1pZihjIT09KDQyOTQ5NjcyOTUmcy50b3RhbCkpe2UubXNnPVwiaW5jb3JyZWN0IGxlbmd0aCBjaGVja1wiLHMubW9kZT0zMDticmVha31jPTAsbD0wfXMubW9kZT0yOTtjYXNlIDI5OkQ9MTticmVhayBlO2Nhc2UgMzA6RD0tMzticmVhayBlO2Nhc2UgMzE6cmV0dXJuLTQ7Y2FzZSAzMjpkZWZhdWx0OnJldHVybi0yfXJldHVybiBlLm5leHRfb3V0PXIsZS5hdmFpbF9vdXQ9dSxlLm5leHRfaW49bixlLmF2YWlsX2luPWEscy5ob2xkPWMscy5iaXRzPWwsKHMud3NpemV8fHAhPT1lLmF2YWlsX291dCYmcy5tb2RlPDMwJiYocy5tb2RlPDI3fHw0IT09dCkpJiZUdShlLGUub3V0cHV0LGUubmV4dF9vdXQscC1lLmF2YWlsX291dCksZC09ZS5hdmFpbF9pbixwLT1lLmF2YWlsX291dCxlLnRvdGFsX2luKz1kLGUudG90YWxfb3V0Kz1wLHMudG90YWwrPXAscy53cmFwJiZwJiYoZS5hZGxlcj1zLmNoZWNrPXMuZmxhZ3M/aXUocy5jaGVjayxpLHAsZS5uZXh0X291dC1wKTpzdShzLmNoZWNrLGkscCxlLm5leHRfb3V0LXApKSxlLmRhdGFfdHlwZT1zLmJpdHMrKHMubGFzdD82NDowKSsoMTI9PT1zLm1vZGU/MTI4OjApKygyMD09PXMubW9kZXx8MTU9PT1zLm1vZGU/MjU2OjApLCgwPT09ZCYmMD09PXB8fDQ9PT10KSYmMD09PUQmJihEPS01KSxEfSxpbmZsYXRlRW5kOmZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5zdGF0ZSlyZXR1cm4tMjt2YXIgdD1lLnN0YXRlO3JldHVybiB0LndpbmRvdyYmKHQud2luZG93PW51bGwpLGUuc3RhdGU9bnVsbCwwfSxpbmZsYXRlR2V0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIHM7cmV0dXJuIGUmJmUuc3RhdGU/MD09KDImKHM9ZS5zdGF0ZSkud3JhcCk/LTI6KHMuaGVhZD10LHQuZG9uZT0hMSwwKTotMn0saW5mbGF0ZVNldERpY3Rpb25hcnk6ZnVuY3Rpb24oZSx0KXt2YXIgcyxvPXQubGVuZ3RoO3JldHVybiBlJiZlLnN0YXRlPzAhPT0ocz1lLnN0YXRlKS53cmFwJiYxMSE9PXMubW9kZT8tMjoxMT09PXMubW9kZSYmc3UoMSx0LG8sMCkhPT1zLmNoZWNrPy0zOlR1KGUsdCxvLG8pPyhzLm1vZGU9MzEsLTQpOihzLmhhdmVkaWN0PTEsMCk6LTJ9LGluZmxhdGVJbmZvOlwicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KVwifSxEdT0hMCxFdT0hMDt0cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLFswXSl9Y2F0Y2goSnUpe0R1PSExfXRyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKEp1KXtFdT0hMX1mb3IodmFyIFN1PW5ldyB0dS5CdWY4KDI1NiksTHU9MDtMdTwyNTY7THUrKylTdVtMdV09THU+PTI1Mj82Okx1Pj0yNDg/NTpMdT49MjQwPzQ6THU+PTIyND8zOkx1Pj0xOTI/MjoxO1N1WzI1NF09U3VbMjU0XT0xO2Z1bmN0aW9uIEF1KGUsdCl7aWYodDw2NTUzNCYmKGUuc3ViYXJyYXkmJkV1fHwhZS5zdWJhcnJheSYmRHUpKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdHUuc2hyaW5rQnVmKGUsdCkpO2Zvcih2YXIgcz1cIlwiLG89MDtvPHQ7bysrKXMrPVN0cmluZy5mcm9tQ2hhckNvZGUoZVtvXSk7cmV0dXJuIHN9dmFyIHZ1PWZ1bmN0aW9uKGUpe3ZhciB0LHMsbyxpLG4scj1lLmxlbmd0aCxhPTA7Zm9yKGk9MDtpPHI7aSsrKTU1Mjk2PT0oNjQ1MTImKHM9ZS5jaGFyQ29kZUF0KGkpKSkmJmkrMTxyJiY1NjMyMD09KDY0NTEyJihvPWUuY2hhckNvZGVBdChpKzEpKSkmJihzPTY1NTM2KyhzLTU1Mjk2PDwxMCkrKG8tNTYzMjApLGkrKyksYSs9czwxMjg/MTpzPDIwNDg/MjpzPDY1NTM2PzM6NDtmb3IodD1uZXcgdHUuQnVmOChhKSxuPTAsaT0wO248YTtpKyspNTUyOTY9PSg2NDUxMiYocz1lLmNoYXJDb2RlQXQoaSkpKSYmaSsxPHImJjU2MzIwPT0oNjQ1MTImKG89ZS5jaGFyQ29kZUF0KGkrMSkpKSYmKHM9NjU1MzYrKHMtNTUyOTY8PDEwKSsoby01NjMyMCksaSsrKSxzPDEyOD90W24rK109czpzPDIwNDg/KHRbbisrXT0xOTJ8cz4+PjYsdFtuKytdPTEyOHw2MyZzKTpzPDY1NTM2Pyh0W24rK109MjI0fHM+Pj4xMix0W24rK109MTI4fHM+Pj42JjYzLHRbbisrXT0xMjh8NjMmcyk6KHRbbisrXT0yNDB8cz4+PjE4LHRbbisrXT0xMjh8cz4+PjEyJjYzLHRbbisrXT0xMjh8cz4+PjYmNjMsdFtuKytdPTEyOHw2MyZzKTtyZXR1cm4gdH0sTnU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PW5ldyB0dS5CdWY4KGUubGVuZ3RoKSxzPTAsbz10Lmxlbmd0aDtzPG87cysrKXRbc109ZS5jaGFyQ29kZUF0KHMpO3JldHVybiB0fSxSdT1mdW5jdGlvbihlLHQpe3ZhciBzLG8saSxuLHI9dHx8ZS5sZW5ndGgsYT1uZXcgQXJyYXkoMipyKTtmb3Iobz0wLHM9MDtzPHI7KWlmKChpPWVbcysrXSk8MTI4KWFbbysrXT1pO2Vsc2UgaWYoKG49U3VbaV0pPjQpYVtvKytdPTY1NTMzLHMrPW4tMTtlbHNle2ZvcihpJj0yPT09bj8zMTozPT09bj8xNTo3O24+MSYmczxyOylpPWk8PDZ8NjMmZVtzKytdLG4tLTtuPjE/YVtvKytdPTY1NTMzOmk8NjU1MzY/YVtvKytdPWk6KGktPTY1NTM2LGFbbysrXT01NTI5NnxpPj4xMCYxMDIzLGFbbysrXT01NjMyMHwxMDIzJmkpfXJldHVybiBBdShhLG8pfSxPdT1mdW5jdGlvbihlLHQpe3ZhciBzO2ZvcigodD10fHxlLmxlbmd0aCk+ZS5sZW5ndGgmJih0PWUubGVuZ3RoKSxzPXQtMTtzPj0wJiYxMjg9PSgxOTImZVtzXSk7KXMtLTtyZXR1cm4gczwwfHwwPT09cz90OnMrU3VbZVtzXV0+dD9zOnR9LEd1PXtaX05PX0ZMVVNIOjAsWl9QQVJUSUFMX0ZMVVNIOjEsWl9TWU5DX0ZMVVNIOjIsWl9GVUxMX0ZMVVNIOjMsWl9GSU5JU0g6NCxaX0JMT0NLOjUsWl9UUkVFUzo2LFpfT0s6MCxaX1NUUkVBTV9FTkQ6MSxaX05FRURfRElDVDoyLFpfRVJSTk86LTEsWl9TVFJFQU1fRVJST1I6LTIsWl9EQVRBX0VSUk9SOi0zLFpfQlVGX0VSUk9SOi01LFpfTk9fQ09NUFJFU1NJT046MCxaX0JFU1RfU1BFRUQ6MSxaX0JFU1RfQ09NUFJFU1NJT046OSxaX0RFRkFVTFRfQ09NUFJFU1NJT046LTEsWl9GSUxURVJFRDoxLFpfSFVGRk1BTl9PTkxZOjIsWl9STEU6MyxaX0ZJWEVEOjQsWl9ERUZBVUxUX1NUUkFURUdZOjAsWl9CSU5BUlk6MCxaX1RFWFQ6MSxaX1VOS05PV046MixaX0RFRkxBVEVEOjh9LFV1PXsyOlwibmVlZCBkaWN0aW9uYXJ5XCIsMTpcInN0cmVhbSBlbmRcIiwwOlwiXCIsXCItMVwiOlwiZmlsZSBlcnJvclwiLFwiLTJcIjpcInN0cmVhbSBlcnJvclwiLFwiLTNcIjpcImRhdGEgZXJyb3JcIixcIi00XCI6XCJpbnN1ZmZpY2llbnQgbWVtb3J5XCIsXCItNVwiOlwiYnVmZmVyIGVycm9yXCIsXCItNlwiOlwiaW5jb21wYXRpYmxlIHZlcnNpb25cIn07dmFyIGt1PWZ1bmN0aW9uKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPVwiXCIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfTt2YXIgUHU9ZnVuY3Rpb24oKXt0aGlzLnRleHQ9MCx0aGlzLnRpbWU9MCx0aGlzLnhmbGFncz0wLHRoaXMub3M9MCx0aGlzLmV4dHJhPW51bGwsdGhpcy5leHRyYV9sZW49MCx0aGlzLm5hbWU9XCJcIix0aGlzLmNvbW1lbnQ9XCJcIix0aGlzLmhjcmM9MCx0aGlzLmRvbmU9ITF9LGJ1PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7ZnVuY3Rpb24gd3UoZSl7aWYoISh0aGlzIGluc3RhbmNlb2Ygd3UpKXJldHVybiBuZXcgd3UoZSk7dGhpcy5vcHRpb25zPXR1LmFzc2lnbih7Y2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MCx0bzpcIlwifSxlfHx7fSk7dmFyIHQ9dGhpcy5vcHRpb25zO3QucmF3JiZ0LndpbmRvd0JpdHM+PTAmJnQud2luZG93Qml0czwxNiYmKHQud2luZG93Qml0cz0tdC53aW5kb3dCaXRzLDA9PT10LndpbmRvd0JpdHMmJih0LndpbmRvd0JpdHM9LTE1KSksISh0LndpbmRvd0JpdHM+PTAmJnQud2luZG93Qml0czwxNil8fGUmJmUud2luZG93Qml0c3x8KHQud2luZG93Qml0cys9MzIpLHQud2luZG93Qml0cz4xNSYmdC53aW5kb3dCaXRzPDQ4JiYwPT0oMTUmdC53aW5kb3dCaXRzKSYmKHQud2luZG93Qml0c3w9MTUpLHRoaXMuZXJyPTAsdGhpcy5tc2c9XCJcIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcga3UsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBzPXl1LmluZmxhdGVJbml0Mih0aGlzLnN0cm0sdC53aW5kb3dCaXRzKTtpZihzIT09R3UuWl9PSyl0aHJvdyBuZXcgRXJyb3IoVXVbc10pO2lmKHRoaXMuaGVhZGVyPW5ldyBQdSx5dS5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSx0aGlzLmhlYWRlciksdC5kaWN0aW9uYXJ5JiYoXCJzdHJpbmdcIj09dHlwZW9mIHQuZGljdGlvbmFyeT90LmRpY3Rpb25hcnk9dnUodC5kaWN0aW9uYXJ5KTpcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1idS5jYWxsKHQuZGljdGlvbmFyeSkmJih0LmRpY3Rpb25hcnk9bmV3IFVpbnQ4QXJyYXkodC5kaWN0aW9uYXJ5KSksdC5yYXcmJihzPXl1LmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSx0LmRpY3Rpb25hcnkpKSE9PUd1LlpfT0spKXRocm93IG5ldyBFcnJvcihVdVtzXSl9ZnVuY3Rpb24gRnUoZSx0KXt2YXIgcz1uZXcgd3UodCk7aWYocy5wdXNoKGUsITApLHMuZXJyKXRocm93IHMubXNnfHxVdVtzLmVycl07cmV0dXJuIHMucmVzdWx0fXd1LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHMsbyxpLG4scixhPXRoaXMuc3RybSx1PXRoaXMub3B0aW9ucy5jaHVua1NpemUsYz10aGlzLm9wdGlvbnMuZGljdGlvbmFyeSxsPSExO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7bz10PT09fn50P3Q6ITA9PT10P0d1LlpfRklOSVNIOkd1LlpfTk9fRkxVU0gsXCJzdHJpbmdcIj09dHlwZW9mIGU/YS5pbnB1dD1OdShlKTpcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1idS5jYWxsKGUpP2EuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoZSk6YS5pbnB1dD1lLGEubmV4dF9pbj0wLGEuYXZhaWxfaW49YS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PWEuYXZhaWxfb3V0JiYoYS5vdXRwdXQ9bmV3IHR1LkJ1ZjgodSksYS5uZXh0X291dD0wLGEuYXZhaWxfb3V0PXUpLChzPXl1LmluZmxhdGUoYSxHdS5aX05PX0ZMVVNIKSk9PT1HdS5aX05FRURfRElDVCYmYyYmKHM9eXUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLGMpKSxzPT09R3UuWl9CVUZfRVJST1ImJiEwPT09bCYmKHM9R3UuWl9PSyxsPSExKSxzIT09R3UuWl9TVFJFQU1fRU5EJiZzIT09R3UuWl9PSylyZXR1cm4gdGhpcy5vbkVuZChzKSx0aGlzLmVuZGVkPSEwLCExO2EubmV4dF9vdXQmJigwIT09YS5hdmFpbF9vdXQmJnMhPT1HdS5aX1NUUkVBTV9FTkQmJigwIT09YS5hdmFpbF9pbnx8byE9PUd1LlpfRklOSVNIJiZvIT09R3UuWl9TWU5DX0ZMVVNIKXx8KFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/KGk9T3UoYS5vdXRwdXQsYS5uZXh0X291dCksbj1hLm5leHRfb3V0LWkscj1SdShhLm91dHB1dCxpKSxhLm5leHRfb3V0PW4sYS5hdmFpbF9vdXQ9dS1uLG4mJnR1LmFycmF5U2V0KGEub3V0cHV0LGEub3V0cHV0LGksbiwwKSx0aGlzLm9uRGF0YShyKSk6dGhpcy5vbkRhdGEodHUuc2hyaW5rQnVmKGEub3V0cHV0LGEubmV4dF9vdXQpKSkpLDA9PT1hLmF2YWlsX2luJiYwPT09YS5hdmFpbF9vdXQmJihsPSEwKX13aGlsZSgoYS5hdmFpbF9pbj4wfHwwPT09YS5hdmFpbF9vdXQpJiZzIT09R3UuWl9TVFJFQU1fRU5EKTtyZXR1cm4gcz09PUd1LlpfU1RSRUFNX0VORCYmKG89R3UuWl9GSU5JU0gpLG89PT1HdS5aX0ZJTklTSD8ocz15dS5pbmZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChzKSx0aGlzLmVuZGVkPSEwLHM9PT1HdS5aX09LKTpvIT09R3UuWl9TWU5DX0ZMVVNIfHwodGhpcy5vbkVuZChHdS5aX09LKSxhLmF2YWlsX291dD0wLCEwKX0sd3UucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihlKXt0aGlzLmNodW5rcy5wdXNoKGUpfSx3dS5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oZSl7ZT09PUd1LlpfT0smJihcInN0cmluZ1wiPT09dGhpcy5vcHRpb25zLnRvP3RoaXMucmVzdWx0PXRoaXMuY2h1bmtzLmpvaW4oXCJcIik6dGhpcy5yZXN1bHQ9dHUuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWUsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ307dmFyICR1PXtJbmZsYXRlOnd1LGluZmxhdGU6RnUsaW5mbGF0ZVJhdzpmdW5jdGlvbihlLHQpe3JldHVybih0PXR8fHt9KS5yYXc9ITAsRnUoZSx0KX0sdW5nemlwOkZ1fSxxdT17fTsoMCx0dS5hc3NpZ24pKHF1LCR1LEd1KTt2YXIgeHU9cXU7Y2xhc3MgVnV7Y29uc3RydWN0b3IoZSl7dGhpcy5fbT1lLHRoaXMuX249XCJJbmZsYXRlTW9kdWxlXCIsdGhpcy5fYkxvZ0ZvckluZmxhdGVPSz0hMSx0aGlzLl9iTG9nRm9ySW5mbGF0ZUVycm9yPSExfWluZmxhdGUoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKS5zbGljZSg0KSxzPURhdGUubm93KCk7bGV0IG87dHJ5e289eHUuaW5mbGF0ZSh0LHt0bzpcInN0cmluZ1wifSksdGhpcy5fYkxvZ0ZvckluZmxhdGVPS3x8KHRoaXMuX2JMb2dGb3JJbmZsYXRlT0s9ITAsbmV3IENuKFwiaW5mbGF0ZU9LXCIpLmVuZCgpKX1jYXRjaChyKXtpZih0aGlzLl9iTG9nRm9ySW5mbGF0ZUVycm9yKXJldHVybjtyZXR1cm4gdGhpcy5fYkxvZ0ZvckluZmxhdGVFcnJvcj0hMCx2b2lkIG5ldyBDbihcImluZmxhdGVFcnJvclwiKS5zZXRNZXNzYWdlKHIpLmVuZCgpfWNvbnN0IGk9dC5sZW5ndGgrNCxuPW8ubGVuZ3RoO3JldHVybiBfZS5kKGBpbmZsYXRlIG9rLiB6aXBwZWQ6JHtpfSB1bnppcHBlZDoke259IGNvbXByZXNzaW9uIHJhdGlvOiR7TWF0aC5yb3VuZCgxMDAqKG4taSkvbil9JSBjb3N0OiR7RGF0ZS5ub3coKS1zfWApLG99cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksdGhpcy5fYkxvZ0ZvckluZmxhdGVPSz0hMSx0aGlzLl9iTG9nRm9ySW5mbGF0ZUVycm9yPSExfX1jbGFzcyBCdXtjb25zdHJ1Y3RvcihlKXtjb25zdCB0PW5ldyBDbihcInNka0NvbnN0cnVjdFwiKTt0aGlzLl9uPVwiTW9kdWxlTWFuYWdlclwiLHRoaXMuX2lzUmVhZHk9ITEsdGhpcy5fcmVhc29uPW5uLlVTRVJfTk9UX0xPR0dFRF9JTix0aGlzLl9zdGFydExvZ2luVHM9MCx0aGlzLl9tb2R1bGVNYXA9bmV3IE1hcCx0aGlzLl9pbm5lckVtaXR0ZXI9bnVsbCx0aGlzLl9vdXRlckVtaXR0ZXI9bnVsbCx0aGlzLl9jaGVja0NvdW50PTAsdGhpcy5fY2hlY2tUaW1lcj0tMSx0aGlzLl9tb2R1bGVNYXAuc2V0KG1zLG5ldyBWcih0aGlzLGUpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHdzLG5ldyBWdSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChPcyxuZXcgSmEodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoQXMsbmV3IGthKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHZzLG5ldyBqYSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChScyxuZXcgcWEodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoU3MsbmV3IEFhKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KEVzLG5ldyBHYSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChycyxuZXcgQnIodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoYXMsbmV3IGFhKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHVzLG5ldyB1YSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChQcyxuZXcgY2EodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoY3MsbmV3IHhyKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGxzLG5ldyBCbih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChfcyxuZXcgbHIodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoZHMsbmV3IE5yKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGhzLG5ldyBPcih0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChncyxuZXcgUHIodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoTXMsbmV3IEtyKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGJzLG5ldyBldSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChmcyxuZXcganIodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoSXMsbmV3IFpyKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KENzLG5ldyB0YSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChUcyxuZXcgc2EodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoeXMsbmV3IGxhKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KERzLG5ldyBkYSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChMcyxuZXcgVWEodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoTnMsbmV3IFBhKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KHBzLG5ldyBZYSh0aGlzKSksdGhpcy5fbW9kdWxlTWFwLnNldChHcyxuZXcgWGEodGhpcykpLHRoaXMuX21vZHVsZU1hcC5zZXQoVXMsbmV3IFphKHRoaXMpKSx0aGlzLl9tb2R1bGVNYXAuc2V0KGtzLG5ldyBRYSh0aGlzKSksdGhpcy5fZXZlbnRUaHJvdHRsZU1hcD1uZXcgTWFwO2NvbnN0e2luc3RhbmNlSUQ6cyxvdmVyc2VhOm8sU0RLQXBwSUQ6aX09ZSxuPWBpbnN0YW5jZUlEOiR7c30gU0RLQXBwSUQ6JHtpfSBob3N0OiR7bHQoKX0gb3ZlcnNlYToke299IGluQnJvd3Nlcjoke2J9IGluTWluaUFwcDoke1B9IGNhbklVc2VJbmZsYXRlOmArdGhpcy5jYW5JVXNlSW5mbGF0ZSgpK2Agd29ya2VyQXZhaWxhYmxlOiR7UX0gVXNlckFnZW50OiR7Rn1gO0NuLmJpbmRFdmVudFN0YXRNb2R1bGUodGhpcy5fbW9kdWxlTWFwLmdldChmcykpLHQuc2V0TWVzc2FnZShgJHtufSAke2Z1bmN0aW9uKCl7bGV0IGU9XCJcIjtpZihQKXRyeXtjb25zdHttb2RlbDp0LHZlcnNpb246cyxzeXN0ZW06byxwbGF0Zm9ybTppLFNES1ZlcnNpb246bn09dy5nZXRTeXN0ZW1JbmZvU3luYygpO2U9YG1vZGVsOiR7dH0gdmVyc2lvbjoke3N9IHN5c3RlbToke299IHBsYXRmb3JtOiR7aX0gU0RLVmVyc2lvbjoke259YH1jYXRjaCh0KXtlPVwiXCJ9cmV0dXJuIGV9KCl9YCkuZW5kKCksX2UuaShcIlNESyBcIituKSxGbi5wcm90b3R5cGUuX2dldEVycm9yTWVzc2FnZT10aGlzLmdldEVycm9yTWVzc2FnZS5iaW5kKHRoaXMpLHRoaXMuX3JlYWR5TGlzdD12b2lkIDAsdGhpcy5fc3NvTG9nRm9yUmVhZHk9bnVsbCx0aGlzLl9pbml0UmVhZHlMaXN0KCl9X3N0YXJ0VGltZXIoKXtjb25zdCBlPXRoaXMuX21vZHVsZU1hcC5nZXQodnMpLHQ9ZS5pc1dvcmtlckVuYWJsZWQoKTtfZS5sKGAke3RoaXMuX259LnN0YXJ0VGltZXIgaXNXb3JrZXJFbmFibGVkOiR7dH0gc2VlZDoke3RoaXMuX2NoZWNrVGltZXJ9YCksdD9lLnN0YXJ0V29ya2VyVGltZXIoKTp0aGlzLl9zdGFydE1haW5UaHJlYWRUaW1lcigpfV9zdGFydE1haW5UaHJlYWRUaW1lcigpe3RoaXMuX2NoZWNrVGltZXI8MCYmKHRoaXMuX2NoZWNrVGltZXI9c2V0SW50ZXJ2YWwodGhpcy5vbkNoZWNrVGltZXIuYmluZCh0aGlzKSwxZTMpKSxfZS5sKGAke3RoaXMuX259Ll9zdGFydE1haW5UaHJlYWRUaW1lciBzZWVkOiR7dGhpcy5fY2hlY2tUaW1lcn1gKX1zdG9wVGltZXIoKXtjb25zdCBlPXRoaXMuX21vZHVsZU1hcC5nZXQodnMpLHQ9ZS5pc1dvcmtlckVuYWJsZWQoKTtfZS5sKGAke3RoaXMuX259LnN0b3BUaW1lciBpc1dvcmtlckVuYWJsZWQ6JHt0fSBzZWVkOiR7dGhpcy5fY2hlY2tUaW1lcn1gKSx0P2Uuc3RvcFdvcmtlclRpbWVyKCk6dGhpcy5fc3RvcE1haW5UaHJlYWRUaW1lcigpfV9zdG9wTWFpblRocmVhZFRpbWVyKCl7X2UubCh0aGlzLl9uK1wiLl9zdG9wTWFpblRocmVhZFRpbWVyXCIpLHRoaXMuX2NoZWNrVGltZXI+MCYmKGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tUaW1lciksdGhpcy5fY2hlY2tUaW1lcj0tMSx0aGlzLl9jaGVja0NvdW50PTApfV9zdG9wTWFpblRocmVhZFNvY2tldCgpe19lLmwodGhpcy5fbitcIi5fc3RvcE1haW5UaHJlYWRTb2NrZXRcIik7Y29uc3QgZT10aGlzLl9tb2R1bGVNYXAuZ2V0KFNzKTtlLnNldElzV29ya2VyRW5hYmxlZCghMCksZS5yZUNvbm5lY3QoKX1fc3RhcnRNYWluVGhyZWFkU29ja2V0KCl7X2UubCh0aGlzLl9uK1wiLl9zdGFydE1haW5UaHJlYWRTb2NrZXRcIik7Y29uc3QgZT10aGlzLl9tb2R1bGVNYXAuZ2V0KFNzKTtlLnNldElzV29ya2VyRW5hYmxlZCghMSksZS5yZUNvbm5lY3QoKX1vbldvcmtlclRpbWVyRW5hYmxlZCgpe19lLmwodGhpcy5fbitcIi5vbldvcmtlclRpbWVyRW5hYmxlZCwgZGlzYWJsZSBtYWluIHRocmVhZCB0aW1lciBhbmQgc29ja2V0XCIpLHRoaXMuX3N0b3BNYWluVGhyZWFkVGltZXIoKSx0aGlzLl9zdG9wTWFpblRocmVhZFNvY2tldCgpfW9uV29ya2VyVGltZXJEaXNhYmxlZCgpe19lLmwodGhpcy5fbitcIi5vbldvcmtlclRpbWVyRGlzYWJsZWQsIGVuYWJsZSBtYWluIHRocmVhZCB0aW1lciBhbmQgc29ja2V0XCIpLHRoaXMuX3N0YXJ0TWFpblRocmVhZFRpbWVyKCksdGhpcy5fc3RhcnRNYWluVGhyZWFkU29ja2V0KCl9b25DaGVja1RpbWVyKCl7dGhpcy5fY2hlY2tDb3VudCs9MTtmb3IoY29uc3RbLGVdb2YgdGhpcy5fbW9kdWxlTWFwKWUub25DaGVja1RpbWVyJiZlLm9uQ2hlY2tUaW1lcih0aGlzLl9jaGVja0NvdW50KX1faW5pdFJlYWR5TGlzdCgpe3RoaXMuX3JlYWR5TGlzdD1bdGhpcy5fbW9kdWxlTWFwLmdldChycyksdGhpcy5fbW9kdWxlTWFwLmdldChfcyldLHRoaXMuX3JlYWR5TGlzdC5mb3JFYWNoKGU9PntlLnJlYWR5KCgpPT50aGlzLl9vbk1vZHVsZVJlYWR5KCkpfSl9X29uTW9kdWxlUmVhZHkoKXtsZXQgdD0hMDtpZih0aGlzLl9yZWFkeUxpc3QuZm9yRWFjaChlPT57ZS5pc1JlYWR5KCl8fCh0PSExKX0pLHQmJiF0aGlzLl9pc1JlYWR5KXt0aGlzLl9pc1JlYWR5PSEwLHRoaXMuX291dGVyRW1pdHRlci5lbWl0KGUuU0RLX1JFQURZKTtjb25zdCB0PURhdGUubm93KCktdGhpcy5fc3RhcnRMb2dpblRzO19lLncoYFNESyBpcyByZWFkeS4gY29zdCAke3R9IG1zYCksdGhpcy5fc3RhcnRMb2dpblRzPURhdGUubm93KCk7Y29uc3Qgcz10aGlzLl9tb2R1bGVNYXAuZ2V0KElzKS5nZXROZXR3b3JrVHlwZSgpLG89dGhpcy5fc3NvTG9nRm9yUmVhZHkuZ2V0U3RhcnRUcygpK3VlO3RoaXMuX3Nzb0xvZ0ZvclJlYWR5LnNldE5ldHdvcmtUeXBlKHMpLnNldE1lc3NhZ2UodCkuc3RhcnQobykuZW5kKCl9fWxvZ2luKCl7MD09PXRoaXMuX3N0YXJ0TG9naW5UcyYmKGxlKCksdGhpcy5fc3RhcnRMb2dpblRzPURhdGUubm93KCksdGhpcy5fc3RhcnRUaW1lcigpLHRoaXMuX21vZHVsZU1hcC5nZXQoSXMpLnN0YXJ0KCksdGhpcy5fc3NvTG9nRm9yUmVhZHk9bmV3IENuKFwic2RrUmVhZHlcIiksdGhpcy5fcmVhc29uPW5uLkxPR0dJTkdfSU4pfW9uTG9naW5GYWlsZWQoKXt0aGlzLl9zdGFydExvZ2luVHM9MH1nZXRPdXRlckVtaXR0ZXJJbnN0YW5jZSgpe3JldHVybiBudWxsPT09dGhpcy5fb3V0ZXJFbWl0dGVyJiYodGhpcy5fb3V0ZXJFbWl0dGVyPW5ldyBlYSxxbih0aGlzLl9vdXRlckVtaXR0ZXIpLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdD10aGlzLl9vdXRlckVtaXR0ZXIuZW1pdCx0aGlzLl9vdXRlckVtaXR0ZXIuZW1pdD1mdW5jdGlvbih0LHMpe2lmKHQ9PT1lLkNPTlZFUlNBVElPTl9MSVNUX1VQREFURUR8fHQ9PT1lLkZSSUVORF9MSVNUX1VQREFURUR8fHQ9PT1lLkdST1VQX0xJU1RfVVBEQVRFRHx8dD09PWUuVE9UQUxfVU5SRUFEX01FU1NBR0VfQ09VTlRfVVBEQVRFRClpZih0aGlzLl9ldmVudFRocm90dGxlTWFwLmhhcyh0KSl7Y29uc3QgZT1EYXRlLm5vdygpLHM9dGhpcy5fZXZlbnRUaHJvdHRsZU1hcC5nZXQodCk7ZS1zLmxhc3Q8PTFlMz8ocy50aW1lb3V0SUQmJmNsZWFyVGltZW91dChzLnRpbWVvdXRJRCkscy50aW1lb3V0SUQ9c2V0VGltZW91dCgoKT0+e3MubGFzdD1EYXRlLm5vdygpLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9vdXRlckVtaXR0ZXIsW3Qse25hbWU6dCxkYXRhOnRoaXMuX2dldEV2ZW50RGF0YSh0KX1dKX0sMWUzKSk6KHMubGFzdD1lLHRoaXMuX291dGVyRW1pdHRlci5fZW1pdC5hcHBseSh0aGlzLl9vdXRlckVtaXR0ZXIsW3Qse25hbWU6dCxkYXRhOnRoaXMuX2dldEV2ZW50RGF0YSh0KX1dKSl9ZWxzZSB0aGlzLl9ldmVudFRocm90dGxlTWFwLnNldCh0LHtsYXN0OkRhdGUubm93KCksdGltZW91dElEOi0xfSksdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX291dGVyRW1pdHRlcixbdCx7bmFtZTp0LGRhdGE6dGhpcy5fZ2V0RXZlbnREYXRhKHQpfV0pO2Vsc2UgdGhpcy5fb3V0ZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX291dGVyRW1pdHRlcixbdCx7bmFtZTp0LGRhdGE6YXJndW1lbnRzWzFdfV0pfS5iaW5kKHRoaXMpKSx0aGlzLl9vdXRlckVtaXR0ZXJ9X2dldEV2ZW50RGF0YSh0KXtyZXR1cm4gdD09PWUuQ09OVkVSU0FUSU9OX0xJU1RfVVBEQVRFRD90aGlzLl9tb2R1bGVNYXAuZ2V0KF9zKS5nZXRMb2NhbENvbnZlcnNhdGlvbkxpc3QoKTp0PT09ZS5GUklFTkRfTElTVF9VUERBVEVEP3RoaXMuX21vZHVsZU1hcC5nZXQocHMpLmdldExvY2FsRnJpZW5kTGlzdCghMSk6dD09PWUuR1JPVVBfTElTVF9VUERBVEVEP3RoaXMuX21vZHVsZU1hcC5nZXQoZHMpLmdldExvY2FsR3JvdXBMaXN0KCk6dD09PWUuVE9UQUxfVU5SRUFEX01FU1NBR0VfQ09VTlRfVVBEQVRFRD90aGlzLl9tb2R1bGVNYXAuZ2V0KF9zKS5nZXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudCgpOnZvaWQgMH1nZXRJbm5lckVtaXR0ZXJJbnN0YW5jZSgpe3JldHVybiBudWxsPT09dGhpcy5faW5uZXJFbWl0dGVyJiYodGhpcy5faW5uZXJFbWl0dGVyPW5ldyBlYSx0aGlzLl9pbm5lckVtaXR0ZXIuX2VtaXQ9dGhpcy5faW5uZXJFbWl0dGVyLmVtaXQsdGhpcy5faW5uZXJFbWl0dGVyLmVtaXQ9ZnVuY3Rpb24oZSx0KXtsZXQgcztzPVBlKGFyZ3VtZW50c1sxXSkmJmFyZ3VtZW50c1sxXS5kYXRhP1tlLHtuYW1lOmFyZ3VtZW50c1swXSxkYXRhOmFyZ3VtZW50c1sxXS5kYXRhfV06W2Use25hbWU6YXJndW1lbnRzWzBdLGRhdGE6YXJndW1lbnRzWzFdfV0sdGhpcy5faW5uZXJFbWl0dGVyLl9lbWl0LmFwcGx5KHRoaXMuX2lubmVyRW1pdHRlcixzKX0uYmluZCh0aGlzKSksdGhpcy5faW5uZXJFbWl0dGVyfWhhc01vZHVsZShlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmhhcyhlKX1nZXRNb2R1bGUoZSl7cmV0dXJuIHRoaXMuX21vZHVsZU1hcC5nZXQoZSl9Y2FuSVVzZUluZmxhdGUoKXtyZXR1cm4hIXRoaXMuX21vZHVsZU1hcC5nZXQod3MpfWlzUmVhZHkoKXtyZXR1cm4gdGhpcy5faXNSZWFkeX1pc0ludGwoKXtyZXR1cm4gdGhpcy5nZXRNb2R1bGUobXMpLmlzSW50bCgpfWdldE5vdFJlYWR5UmVhc29uKCl7cmV0dXJuIHRoaXMuX3JlYXNvbn1zZXROb3RSZWFkeVJlYXNvbihlKXt0aGlzLl9yZWFzb249ZX1nZXRFcnJvck1lc3NhZ2UoZSx0LHMpe3JldHVybiB0aGlzLl9tb2R1bGVNYXAuZ2V0KGJzKS5nZXQoe2tleTplLHJlcGxhY2VtZW50MTp0LHJlcGxhY2VtZW50MjpzLGlzSW50bDp0aGlzLmlzSW50bCgpfSl9b3V0cHV0V2FybmluZyhlLHQscyl7Y29uc3Qgbz10aGlzLmdldEVycm9yTWVzc2FnZShlLHQscyk7byYmX2UudyhvKX1vbkVycm9yKHQpe2NvbnN0IHM9YGNvZGU6JHt0LmNvZGV9IG1lc3NhZ2U6JHt0Lm1lc3NhZ2V9YDtfZS53KFwiT29wcyEgXCIrcyk7bmV3IENuKFwiZXJyb3JcIikuc2V0TWVzc2FnZShzKS5zZXROZXR3b3JrVHlwZSh0aGlzLmdldE1vZHVsZShJcykuZ2V0TmV0d29ya1R5cGUoKSkuc2V0TGV2ZWwoXCJlcnJvclwiKS5lbmQoKSx0aGlzLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkuZW1pdChlLkVSUk9SLHQpfXJlc3RhcnRUaW1lcigpe19lLmwodGhpcy5fbitcIi5yZXN0YXJ0VGltZXJcIiksdGhpcy5zdG9wVGltZXIoKSx0aGlzLl9zdGFydFRpbWVyKCksdGhpcy5nZXRNb2R1bGUoZHMpLnJlc3RhcnRQb2xsaW5nKCl9Z2V0VGltZXJJRCgpe2NvbnN0IGU9dGhpcy5fbW9kdWxlTWFwLmdldCh2cyk7cmV0dXJuIGUuaXNXb3JrZXJFbmFibGVkKCk/ZS5nZXRUaW1lcklEKCk6dGhpcy5fY2hlY2tUaW1lcn1nZXRQb2xsaW5nVGltZXJJRChlKXtyZXR1cm4gdGhpcy5fbW9kdWxlTWFwLmdldChkcykuZ2V0UG9sbGluZ1RpbWVySUQoZSl9cmVzZXQoKXtfZS5sKHRoaXMuX24rXCIucmVzZXRcIiksbGUoKTtmb3IoY29uc3RbLGVdb2YgdGhpcy5fbW9kdWxlTWFwKWUucmVzZXQmJmUucmVzZXQoKTt0aGlzLl9zdGFydExvZ2luVHM9MCx0aGlzLl9pbml0UmVhZHlMaXN0KCksdGhpcy5faXNSZWFkeT0hMSx0aGlzLnN0b3BUaW1lcigpLHRoaXMuX291dGVyRW1pdHRlci5lbWl0KGUuU0RLX05PVF9SRUFEWSk7Zm9yKGNvbnN0WyxlXW9mIHRoaXMuX2V2ZW50VGhyb3R0bGVNYXApZS50aW1lb3V0SUQmJmNsZWFyVGltZW91dChlLnRpbWVvdXRJRCk7dGhpcy5fZXZlbnRUaHJvdHRsZU1hcC5jbGVhcigpfX1jbGFzcyBIdXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9mdW5jTWFwPW5ldyBNYXAsdGhpcy5fbT1lfWRlZmVuc2UoZSx0LHMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBudWxsO2lmKHRoaXMuX2Z1bmNNYXAuaGFzKGUpJiZ0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCkpcmV0dXJuIHRoaXMuX2Z1bmNNYXAuZ2V0KGUpLmdldCh0KTt0aGlzLl9mdW5jTWFwLmhhcyhlKXx8dGhpcy5fZnVuY01hcC5zZXQoZSxuZXcgTWFwKTtsZXQgbz1udWxsO3JldHVybiB0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/bz10aGlzLl9mdW5jTWFwLmdldChlKS5nZXQodCk6KG89dGhpcy5fcGFjayhlLHQscyksdGhpcy5fZnVuY01hcC5nZXQoZSkuc2V0KHQsbykpLG99ZGVmZW5zZU9uY2UoZSx0LHMpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/bnVsbDp0aGlzLl9wYWNrKGUsdCxzKX1maW5kKGUsdCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdD9udWxsOnRoaXMuX2Z1bmNNYXAuaGFzKGUpJiZ0aGlzLl9mdW5jTWFwLmdldChlKS5oYXModCk/dGhpcy5fZnVuY01hcC5nZXQoZSkuZ2V0KHQpOih0aGlzLl9tLm91dHB1dFdhcm5pbmcoXCJMaXN0ZW5lckZuTm90Rm91bmRcIixlKSxudWxsKX1kZWxldGUoZSx0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiYoISF0aGlzLl9mdW5jTWFwLmhhcyhlKSYmKCEhdGhpcy5fZnVuY01hcC5nZXQoZSkuaGFzKHQpJiYodGhpcy5fZnVuY01hcC5nZXQoZSkuZGVsZXRlKHQpLDA9PT10aGlzLl9mdW5jTWFwLmdldChlKS5zaXplJiZ0aGlzLl9mdW5jTWFwLmRlbGV0ZShlKSwhMCkpKX1fcGFjayh0LHMsbyl7Y29uc3QgaT10aGlzO3JldHVybiBmdW5jdGlvbigpe3RyeXtzLmFwcGx5KG8sQXJyYXkuZnJvbShhcmd1bWVudHMpKX1jYXRjaChuKXtjb25zdCBzPU9iamVjdC52YWx1ZXMoZSkuaW5kZXhPZih0KSxvPVwiQ2FsbGJhY2tFcnJvclwiO2lmKC0xIT09cyl7Y29uc3QgdD1PYmplY3Qua2V5cyhlKVtzXTtpLl9tLm91dHB1dFdhcm5pbmcobyx0LG4pfW5ldyBDbihvKS5zZXRNZXNzYWdlKFwiZXZlbnROYW1lOlwiK3QpLnNldE1vcmVNZXNzYWdlKG4ubWVzc2FnZSkuZW5kKCl9fX19Y2xhc3MgS3V7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD17U0RLQXBwSUQ6ZS5TREtBcHBJRCx1bmxpbWl0ZWRBVkNoYXRSb29tOmUudW5saW1pdGVkQVZDaGF0Um9vbXx8ITEsc2NlbmU6ZS5zY2VuZXx8XCJcIixvdmVyc2VhOmUub3ZlcnNlYXx8ITEsaW5zdGFuY2VJRDpjdCgpLGRldk1vZGU6ZS5kZXZNb2RlfHwhMSxwcm94eVNlcnZlcjplLnByb3h5U2VydmVyfHx2b2lkIDAsZmlsZVVwbG9hZFByb3h5OmUuZmlsZVVwbG9hZFByb3h5fHx2b2lkIDAsZmlsZURvd25sb2FkUHJveHk6ZS5maWxlRG93bmxvYWRQcm94eXx8ZS5maWxlVXBsb2FkUHJveHl8fHZvaWQgMH07dGhpcy5fbT1uZXcgQnUodCksdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5PW5ldyBIdSh0aGlzLl9tKX1vbkVycm9yKGUpe3RoaXMuX20ub25FcnJvcihlKX1sb2dpbihlKXt0aGlzLl9tLmxvZ2luKCk7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShycykubG9naW4oZSl9bG9nb3V0KCl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShycykubG9nb3V0KCkudGhlbihlPT4odGhpcy5fbS5yZXNldCgpLGUpKX1pc1JlYWR5KCl7cmV0dXJuIHRoaXMuX20uaXNSZWFkeSgpfWlzSW50bCgpe3JldHVybiB0aGlzLl9tLmlzSW50bCgpfWdldE5vdFJlYWR5UmVhc29uKCl7cmV0dXJuIHRoaXMuX20uZ2V0Tm90UmVhZHlSZWFzb24oKX1nZXRFcnJvck1lc3NhZ2UoZSx0LHMpe3JldHVybiB0aGlzLl9tLmdldEVycm9yTWVzc2FnZShlLHQscyl9X2dldE1vZHVsZShlKXtyZXR1cm4gdGhpcy5fbS5nZXRNb2R1bGUoZSl9ZGVzdHJveSgpe3JldHVybiB0aGlzLmxvZ291dCgpLmZpbmFsbHkoKCk9Pnt0aGlzLl9tLnN0b3BUaW1lcigpO3RoaXMuX2dldE1vZHVsZSh2cykudGVybWluYXRlKCk7dGhpcy5fZ2V0TW9kdWxlKFNzKS5kZWFsbG9jKCk7Y29uc3QgdD10aGlzLl9tLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkscz10aGlzLl9nZXRNb2R1bGUobXMpO3QuZW1pdChlLlNES19ERVNUUk9ZLHtTREtBcHBJRDpzLmdldFNES0FwcElEKCl9KX0pfW9uKGUsdCxzKXtfZS5kKFwib25cIixcImV2ZW50TmFtZTpcIitlKTt0aGlzLl9tLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub24oZSx0aGlzLl9zYWZldHlDYWxsYmFja0ZhY3RvcnkuZGVmZW5zZShlLHQscykscyl9b25jZShlLHQscyl7X2UuZChcIm9uY2VcIixcImV2ZW50TmFtZTpcIitlKTt0aGlzLl9tLmdldE91dGVyRW1pdHRlckluc3RhbmNlKCkub25jZShlLHRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5kZWZlbnNlT25jZShlLHQscyksc3x8dGhpcyl9b2ZmKGUsdCxzLG8pe19lLmQoXCJvZmZcIixcImV2ZW50TmFtZTpcIitlKTtjb25zdCBpPXRoaXMuX3NhZmV0eUNhbGxiYWNrRmFjdG9yeS5maW5kKGUsdCk7aWYobnVsbCE9PWkpe3RoaXMuX20uZ2V0T3V0ZXJFbWl0dGVySW5zdGFuY2UoKS5vZmYoZSxpLHMsbyksdGhpcy5fc2FmZXR5Q2FsbGJhY2tGYWN0b3J5LmRlbGV0ZShlLHQpfX1yZWdpc3RlclBsdWdpbihlKXtpZih3ZShlW1widGltLW9mZmxpbmUtcHVzaC1wbHVnaW5cIl0pKXt0aGlzLl9nZXRNb2R1bGUoeXMpLnJlZ2lzdGVyUGx1Z2luKGUpfWVsc2V7dGhpcy5fZ2V0TW9kdWxlKEdzKS5yZWdpc3RlclBsdWdpbihlKX19c2V0TG9nTGV2ZWwoZSl7aWYoZTw9MCl7Y29uc3QgZT10aGlzLmdldEVycm9yTWVzc2FnZShcIlRJTV9BU0NJSV9BUlRcIik7ZSYmY29uc29sZS5sb2coZSk7Y29uc3QgdD10aGlzLmdldEVycm9yTWVzc2FnZShcIkFQSV9SRUZFUlwiKTtpZih0KXtjb25zdCBlPVwiSU0gU0RLIEFQSSAtPlwiO3l0KCk/Y29uc29sZS5sb2coYCVjICR7ZX0gJWNgLFwiYmFja2dyb3VuZDojZmY5ZDAwOyBwYWRkaW5nOjFweDsgYm9yZGVyLXJhZGl1czozcHg7IGNvbG9yOiAjZmZmXCIsXCJiYWNrZ3JvdW5kOnRyYW5zcGFyZW50XCIsdCk6Y29uc29sZS5sb2coZSx0KX1jb25zdCBzPXRoaXMuZ2V0RXJyb3JNZXNzYWdlKFwiRE9DU19HVUlERVwiKTtzJiZjb25zb2xlLmxvZyhzKX1fZS5zZXRMZXZlbChlKX1jcmVhdGVUZXh0TWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGFzKS5jcmVhdGVUZXh0TWVzc2FnZShlKX1jcmVhdGVUZXh0QXRNZXNzYWdlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLmNyZWF0ZVRleHRNZXNzYWdlKGUpfWNyZWF0ZUltYWdlTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGFzKS5jcmVhdGVJbWFnZU1lc3NhZ2UoZSl9Y3JlYXRlQXVkaW9NZXNzYWdlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLmNyZWF0ZUF1ZGlvTWVzc2FnZShlKX1jcmVhdGVWaWRlb01lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuY3JlYXRlVmlkZW9NZXNzYWdlKGUpfWNyZWF0ZUN1c3RvbU1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuY3JlYXRlQ3VzdG9tTWVzc2FnZShlKX1jcmVhdGVGYWNlTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGFzKS5jcmVhdGVGYWNlTWVzc2FnZShlKX1jcmVhdGVGaWxlTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGFzKS5jcmVhdGVGaWxlTWVzc2FnZShlKX1jcmVhdGVMb2NhdGlvbk1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuY3JlYXRlTG9jYXRpb25NZXNzYWdlKGUpfWNyZWF0ZU1lcmdlck1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuY3JlYXRlTWVyZ2VyTWVzc2FnZShlKX1kb3dubG9hZE1lcmdlck1lc3NhZ2UoZSl7aWYoZS50eXBlIT09dC5NU0dfTUVSR0VSKXJldHVybiBWbih7Y29kZTpubi5NRVNTQUdFX01FUkdFUl9UWVBFX0lOVkFMSUR9KTtpZihMdChlLnBheWxvYWQuZG93bmxvYWRLZXkpKXJldHVybiBWbih7Y29kZTpubi5NRVNTQUdFX01FUkdFUl9LRVlfSU5WQUxJRH0pO3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLmRvd25sb2FkTWVyZ2VyTWVzc2FnZShlKS5jYXRjaChlPT5Wbih7Y29kZTpubi5NRVNTQUdFX01FUkdFUl9ET1dOTE9BRF9GQUlMfSkpfWNyZWF0ZUZvcndhcmRNZXNzYWdlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLmNyZWF0ZUZvcndhcmRNZXNzYWdlKGUpfXNlbmRNZXNzYWdlKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgYm4pKXJldHVybiBWbih7Y29kZTpubi5NRVNTQUdFX1NFTkRfTkVFRF9NRVNTQUdFX0lOU1RBTkNFfSk7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuc2VuZE1lc3NhZ2VJbnN0YW5jZShlLHQpfWNhbGxFeHBlcmltZW50YWxBUEkoZSx0KXtpZihcInNlbmRDb21ib01lc3NhZ2VcIj09PWUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoUHMpLnNlbmRNZXNzYWdlKHQpfWlmKFwiaGFuZGxlR3JvdXBJbnZpdGF0aW9uXCI9PT1lKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5oYW5kbGVHcm91cEludml0YXRpb24odCl9aWYoXCJpc0NvbW1lcmNpYWxBYmlsaXR5RW5hYmxlZFwiPT09ZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShPcykuaXNGZWF0dXJlRW5hYmxlZCh0KX1pZihcImlzSW50bFwiPT09ZSlyZXR1cm4gdGhpcy5pc0ludGwoKTtpZihcInNlbmRUUlRDQ3VzdG9tRGF0YVwiPT09ZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShrcykuc2VuZFRSVENDdXN0b21EYXRhKHQpfXJldHVyblwiZ2V0VGltZXJJRFwiPT09ZT90aGlzLl9tLmdldFRpbWVySUQoKTpcImdldFBvbGxpbmdUaW1lcklEXCI9PT1lP3RoaXMuX20uZ2V0UG9sbGluZ1RpbWVySUQodCk6Vm4oe2NvZGU6bm4uSU5WQUxJRF9PUEVSQVRJT059KX1yZXZva2VNZXNzYWdlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLnJldm9rZU1lc3NhZ2UoZSl9cmVzZW5kTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGFzKS5yZXNlbmRNZXNzYWdlKGUpfWRlbGV0ZU1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShhcykuZGVsZXRlTWVzc2FnZShlKX10cmFuc2xhdGVUZXh0KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLnRyYW5zbGF0ZVRleHQoZSl9c2V0TWVzc2FnZUV4dGVuc2lvbnMoZSx0KXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKHVzKS5zZXRNZXNzYWdlRXh0ZW5zaW9ucyhlLHQpfWdldE1lc3NhZ2VFeHRlbnNpb25zKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUodXMpLmdldE1lc3NhZ2VFeHRlbnNpb25zKGUpfWRlbGV0ZU1lc3NhZ2VFeHRlbnNpb25zKGUsdCl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZSh1cykuZGVsZXRlTWVzc2FnZUV4dGVuc2lvbnMoZSx0KX1tb2RpZnlNZXNzYWdlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoYXMpLm1vZGlmeVJlbW90ZU1lc3NhZ2UoZSl9Z2V0TWVzc2FnZUxpc3QoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuZ2V0TWVzc2FnZUxpc3QoZSl9Z2V0TWVzc2FnZUxpc3RIb3BwaW5nKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoX3MpLmdldE1lc3NhZ2VMaXN0SG9wcGluZyhlKX1zZW5kTWVzc2FnZVJlYWRSZWNlaXB0KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoX3MpLnNlbmRSZWFkUmVjZWlwdChlKX1nZXRNZXNzYWdlUmVhZFJlY2VpcHRMaXN0KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoX3MpLmdldFJlYWRSZWNlaXB0TGlzdChlKX1nZXRHcm91cE1lc3NhZ2VSZWFkTWVtYmVyTGlzdChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5nZXRSZWFkUmVjZWlwdERldGFpbChlKX1maW5kTWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5maW5kTWVzc2FnZShlKX1zZXRNZXNzYWdlUmVhZChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5zZXRNZXNzYWdlUmVhZChlKX1nZXRDb252ZXJzYXRpb25MaXN0KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoX3MpLmdldENvbnZlcnNhdGlvbkxpc3QoZSl9Z2V0Q29udmVyc2F0aW9uUHJvZmlsZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5nZXRDb252ZXJzYXRpb25Qcm9maWxlKGUpfWRlbGV0ZUNvbnZlcnNhdGlvbihlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5kZWxldGVDb252ZXJzYXRpb24oZSl9Y2xlYXJIaXN0b3J5TWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5jbGVhckhpc3RvcnlNZXNzYWdlKGUpfXBpbkNvbnZlcnNhdGlvbihlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5waW5Db252ZXJzYXRpb24oZSl9c2V0QWxsTWVzc2FnZVJlYWQoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuc2V0QWxsTWVzc2FnZVJlYWQoZSl9c2V0TWVzc2FnZVJlbWluZFR5cGUoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuc2V0TWVzc2FnZVJlbWluZFR5cGUoZSl9Z2V0VG90YWxVbnJlYWRNZXNzYWdlQ291bnQoKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5nZXRUb3RhbFVucmVhZE1lc3NhZ2VDb3VudCgpfXNldENvbnZlcnNhdGlvbkN1c3RvbURhdGEoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuc2V0Q29udmVyc2F0aW9uQ3VzdG9tRGF0YShlKX1tYXJrQ29udmVyc2F0aW9uKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoX3MpLm1hcmtDb252ZXJzYXRpb24oZSl9Z2V0Q29udmVyc2F0aW9uR3JvdXBMaXN0KCl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuZ2V0Q29udmVyc2F0aW9uR3JvdXBMaXN0KCl9Y3JlYXRlQ29udmVyc2F0aW9uR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuY3JlYXRlQ29udmVyc2F0aW9uR3JvdXAoZSl9ZGVsZXRlQ29udmVyc2F0aW9uR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuZGVsZXRlQ29udmVyc2F0aW9uR3JvdXAoZSl9cmVuYW1lQ29udmVyc2F0aW9uR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykucmVuYW1lQ29udmVyc2F0aW9uR3JvdXAoZSl9YWRkQ29udmVyc2F0aW9uc1RvR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShfcykuYWRkQ29udmVyc2F0aW9uc1RvR3JvdXAoZSl9ZGVsZXRlQ29udmVyc2F0aW9uc0Zyb21Hcm91cChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKF9zKS5kZWxldGVDb252ZXJzYXRpb25zRnJvbUdyb3VwKGUpfWdldE15UHJvZmlsZSgpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoY3MpLmdldE15UHJvZmlsZSgpfWdldFVzZXJQcm9maWxlKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoY3MpLmdldFVzZXJQcm9maWxlKGUpfXVwZGF0ZU15UHJvZmlsZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGNzKS51cGRhdGVNeVByb2ZpbGUoZSl9Z2V0QmxhY2tsaXN0KCl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShjcykuZ2V0TG9jYWxCbGFja2xpc3QoKX1hZGRUb0JsYWNrbGlzdChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGNzKS5hZGRCbGFja2xpc3QoZSl9cmVtb3ZlRnJvbUJsYWNrbGlzdChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGNzKS5kZWxldGVCbGFja2xpc3QoZSl9c2V0U2VsZlN0YXR1cyhlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGNzKS5zZXRTZWxmU3RhdHVzKGUpfWdldFVzZXJTdGF0dXMoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShjcykuZ2V0VXNlclN0YXR1cyhlKX1zdWJzY3JpYmVVc2VyU3RhdHVzKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoY3MpLnN1YnNjcmliZVVzZXJTdGF0dXMoZSl9dW5zdWJzY3JpYmVVc2VyU3RhdHVzKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoY3MpLnVuc3Vic2NyaWJlVXNlclN0YXR1cyhlKX1nZXRGcmllbmRMaXN0KCl7Y29uc3QgZT10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiBlP2UuZ2V0TG9jYWxGcmllbmRMaXN0KCk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9YWRkRnJpZW5kKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0TW9kdWxlKHBzKTtyZXR1cm4gdD90LmFkZEZyaWVuZChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1kZWxldGVGcmllbmQoZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QuZGVsZXRlRnJpZW5kKGUpOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pfWNoZWNrRnJpZW5kKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0TW9kdWxlKHBzKTtyZXR1cm4gdD90LmNoZWNrRnJpZW5kKGUpOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pfWdldEZyaWVuZFByb2ZpbGUoZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QuZ2V0RnJpZW5kUHJvZmlsZShlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX11cGRhdGVGcmllbmQoZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QudXBkYXRlRnJpZW5kKGUpOlZuKHtjb2RlOm5uLkNBTk5PVF9GSU5EX01PRFVMRX0pfWdldEZyaWVuZEFwcGxpY2F0aW9uTGlzdCgpe2NvbnN0IGU9dGhpcy5fZ2V0TW9kdWxlKHBzKTtyZXR1cm4gZT9lLmdldExvY2FsRnJpZW5kQXBwbGljYXRpb25MaXN0KCk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9YWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QuYWNjZXB0RnJpZW5kQXBwbGljYXRpb24oZSk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9cmVmdXNlRnJpZW5kQXBwbGljYXRpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QucmVmdXNlRnJpZW5kQXBwbGljYXRpb24oZSk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9ZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiB0P3QuZGVsZXRlRnJpZW5kQXBwbGljYXRpb24oZSk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9c2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKCl7Y29uc3QgZT10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiBlP2Uuc2V0RnJpZW5kQXBwbGljYXRpb25SZWFkKCk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9Z2V0RnJpZW5kR3JvdXBMaXN0KCl7Y29uc3QgZT10aGlzLl9nZXRNb2R1bGUocHMpO3JldHVybiBlP2UuZ2V0TG9jYWxGcmllbmRHcm91cExpc3QoKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1jcmVhdGVGcmllbmRHcm91cChlKXtjb25zdCB0PXRoaXMuX2dldE1vZHVsZShwcyk7cmV0dXJuIHQ/dC5jcmVhdGVGcmllbmRHcm91cChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1kZWxldGVGcmllbmRHcm91cChlKXtjb25zdCB0PXRoaXMuX2dldE1vZHVsZShwcyk7cmV0dXJuIHQ/dC5kZWxldGVGcmllbmRHcm91cChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1hZGRUb0ZyaWVuZEdyb3VwKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0TW9kdWxlKHBzKTtyZXR1cm4gdD90LmFkZFRvRnJpZW5kR3JvdXAoZSk6Vm4oe2NvZGU6bm4uQ0FOTk9UX0ZJTkRfTU9EVUxFfSl9cmVtb3ZlRnJvbUZyaWVuZEdyb3VwKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0TW9kdWxlKHBzKTtyZXR1cm4gdD90LnJlbW92ZUZyb21GcmllbmRHcm91cChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1yZW5hbWVGcmllbmRHcm91cChlKXtjb25zdCB0PXRoaXMuX2dldE1vZHVsZShwcyk7cmV0dXJuIHQ/dC5yZW5hbWVGcmllbmRHcm91cChlKTpWbih7Y29kZTpubi5DQU5OT1RfRklORF9NT0RVTEV9KX1nZXRHcm91cExpc3QoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuZ2V0R3JvdXBMaXN0KGUpfWdldEdyb3VwUHJvZmlsZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5nZXRHcm91cFByb2ZpbGUoZSl9Y3JlYXRlR3JvdXAoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuY3JlYXRlR3JvdXAoZSl9ZGlzbWlzc0dyb3VwKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLmRpc21pc3NHcm91cChlKX11cGRhdGVHcm91cFByb2ZpbGUoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykudXBkYXRlR3JvdXBQcm9maWxlKGUpfWpvaW5Hcm91cChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5qb2luR3JvdXAoZSl9cXVpdEdyb3VwKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLnF1aXRHcm91cChlKX1zZWFyY2hHcm91cEJ5SUQoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuc2VhcmNoR3JvdXBCeUlEKGUpfWdldEdyb3VwT25saW5lTWVtYmVyQ291bnQoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuZ2V0R3JvdXBPbmxpbmVNZW1iZXJDb3VudChlKX1jaGFuZ2VHcm91cE93bmVyKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLmNoYW5nZUdyb3VwT3duZXIoZSl9Z2V0R3JvdXBBcHBsaWNhdGlvbkxpc3QoKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5nZXRHcm91cEFwcGxpY2F0aW9uTGlzdCgpfWhhbmRsZUdyb3VwQXBwbGljYXRpb24oZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuaGFuZGxlR3JvdXBBcHBsaWNhdGlvbihlKX1pbml0R3JvdXBBdHRyaWJ1dGVzKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLmluaXRHcm91cEF0dHJpYnV0ZXMoZSl9c2V0R3JvdXBBdHRyaWJ1dGVzKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLnNldEdyb3VwQXR0cmlidXRlcyhlKX1kZWxldGVHcm91cEF0dHJpYnV0ZXMoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuZGVsZXRlR3JvdXBBdHRyaWJ1dGVzKGUpfWdldEdyb3VwQXR0cmlidXRlcyhlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5nZXRHcm91cEF0dHJpYnV0ZXMoZSl9c2V0R3JvdXBDb3VudGVycyhlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGRzKS5zZXRHcm91cENvdW50ZXJzKGUpfWluY3JlYXNlR3JvdXBDb3VudGVyKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLmluY3JlYXNlR3JvdXBDb3VudGVyKGUpfWRlY3JlYXNlR3JvdXBDb3VudGVyKGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZHMpLmRlY3JlYXNlR3JvdXBDb3VudGVyKGUpfWdldEdyb3VwQ291bnRlcnMoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShkcykuZ2V0R3JvdXBDb3VudGVycyhlKX1nZXRHcm91cE1lbWJlckxpc3QoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShocykuZ2V0R3JvdXBNZW1iZXJMaXN0KGUpfWdldEdyb3VwTWVtYmVyUHJvZmlsZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGhzKS5nZXRHcm91cE1lbWJlclByb2ZpbGUoZSl9YWRkR3JvdXBNZW1iZXIoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShocykuYWRkR3JvdXBNZW1iZXIoZSl9ZGVsZXRlR3JvdXBNZW1iZXIoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShocykuZGVsZXRlR3JvdXBNZW1iZXIoZSl9c2V0R3JvdXBNZW1iZXJNdXRlVGltZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGhzKS5zZXRHcm91cE1lbWJlck11dGVUaW1lKGUpfXNldEdyb3VwTWVtYmVyUm9sZShlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGhzKS5zZXRHcm91cE1lbWJlclJvbGUoZSl9c2V0R3JvdXBNZW1iZXJOYW1lQ2FyZChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGhzKS5zZXRHcm91cE1lbWJlck5hbWVDYXJkKGUpfXNldEdyb3VwTWVtYmVyQ3VzdG9tRmllbGQoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShocykuc2V0R3JvdXBNZW1iZXJDdXN0b21GaWVsZChlKX1tYXJrR3JvdXBNZW1iZXJMaXN0KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoaHMpLm1hcmtHcm91cE1lbWJlckxpc3QoZSl9Z2V0Sm9pbmVkQ29tbXVuaXR5TGlzdCgpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZ3MpLmdldEpvaW5lZENvbW11bml0eUxpc3QoKX1jcmVhdGVUb3BpY0luQ29tbXVuaXR5KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZ3MpLmNyZWF0ZVRvcGljSW5Db21tdW5pdHkoZSl9ZGVsZXRlVG9waWNGcm9tQ29tbXVuaXR5KGUpe3JldHVybiB0aGlzLl9nZXRNb2R1bGUoZ3MpLmRlbGV0ZVRvcGljRnJvbUNvbW11bml0eShlKX11cGRhdGVUb3BpY1Byb2ZpbGUoZSl7cmV0dXJuIHRoaXMuX2dldE1vZHVsZShncykudXBkYXRlVG9waWNQcm9maWxlKGUpfWdldFRvcGljTGlzdChlKXtyZXR1cm4gdGhpcy5fZ2V0TW9kdWxlKGdzKS5nZXRUb3BpY0xpc3QoZSl9fWNvbnN0IFd1PXtsb2dpbjoxLGxvZ291dDoxLGRlc3Ryb3k6MSxvbjoxLG9mZjoxLHJlYWR5OjEsc2V0TG9nTGV2ZWw6MSxqb2luR3JvdXA6MSxxdWl0R3JvdXA6MSxyZWdpc3RlclBsdWdpbjoxLGdldEdyb3VwT25saW5lTWVtYmVyQ291bnQ6MX07ZnVuY3Rpb24gWXUoZSx0KXtpZihlLmlzUmVhZHkoKXx8MT09PVd1W3RdKXJldHVybiEwO2NvbnN0IHM9ZS5nZXROb3RSZWFkeVJlYXNvbigpLG89e2NvZGU6cyxtZXNzYWdlOmAke2UuZ2V0RXJyb3JNZXNzYWdlKHMpfSB8ICR7dH0gfCAke2UuZ2V0RXJyb3JNZXNzYWdlKG5uLlNES19JU19OT1RfUkVBRFkpfWB9O3JldHVybiBlLm9uRXJyb3Iobyksb31jb25zdCBqdT17fSx6dT17fTt6dS5jcmVhdGU9ZnVuY3Rpb24odCl7bGV0IG89MDtjb25zdHtTREtBcHBJRDppfT10O2lmKEdlKGkpKW89aTtlbHNlIGlmKG89cGFyc2VJbnQoaSksaXNOYU4oaSkpcmV0dXJuIF9lLmUoXCJUSU0uY3JlYXRlIGZhaWxlZC4gRmFpbGVkIHRvIHBhcnNlIHRoZSBTREtBcHBJRCwgcGxlYXNlIGNoZWNrIHRoZSBhcmd1bWVudHNcIiksbnVsbDtpZihvJiZqdVtvXSlyZXR1cm4ganVbb107X2UubChcIlRJTS5jcmVhdGVcIik7Y29uc3Qgbj1uZXcgS3Uoey4uLnQsU0RLQXBwSUQ6b30pO24ub24oZS5TREtfREVTVFJPWSxlPT57anVbZS5kYXRhLlNES0FwcElEXT1udWxsLGRlbGV0ZSBqdVtlLmRhdGEuU0RLQXBwSURdfSk7Y29uc3Qgcj1mdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIE9iamVjdC5rZXlzKG5zKS5mb3JFYWNoKG89PntpZighZVtvXSlyZXR1cm47Y29uc3QgaT1uZXcgczt0W29dPWZ1bmN0aW9uKCl7Y29uc3QgdD1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIGkudXNlKChmdW5jdGlvbih0LHMpe2NvbnN0IGk9WXUoZSxvKTtyZXR1cm4hMD09PWk/cygpOlZuKGkpfSkpLnVzZSgoZnVuY3Rpb24oZSx0KXtpZighMD09PUF0KGUsaXNbb10sbykpcmV0dXJuIHQoKX0pKS51c2UoKGZ1bmN0aW9uKHQscyl7cmV0dXJuIGVbb10uYXBwbHkoZSx0KX0pKSxpLnJ1bih0KX19KSx0fShuKTtyZXR1cm4ganVbb109cixpcy5ob29rR2V0QVBJVGlwcyhuLmdldEVycm9yTWVzc2FnZS5iaW5kKG4pKSxfZS5sKFwiVElNLmNyZWF0ZSBva1wiKSxyfSx6dS5UWVBFUz10LHp1LkVWRU5UPWUsenUuVkVSU0lPTj1cIjIuMjcuNlwiLF9lLmwoXCJUSU0uVkVSU0lPTjpcIit6dS5WRVJTSU9OKTtleHBvcnR7enUgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/tim-js-sdk/tim-js-friendship.es.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/clients/WebSocketClient.js":
/*!***************************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/clients/WebSocketClient.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ WebSocketClient)\n/* harmony export */ });\n/* harmony import */ var _utils_log_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/log.js */ \"./node_modules/webpack-dev-server/client/utils/log.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar WebSocketClient = /*#__PURE__*/function () {\n  /**\n   * @param {string} url\n   */\n  function WebSocketClient(url) {\n    _classCallCheck(this, WebSocketClient);\n    this.client = new WebSocket(url);\n    this.client.onerror = function (error) {\n      _utils_log_js__WEBPACK_IMPORTED_MODULE_0__.log.error(error);\n    };\n  }\n\n  /**\n   * @param {(...args: any[]) => void} f\n   */\n  return _createClass(WebSocketClient, [{\n    key: \"onOpen\",\n    value: function onOpen(f) {\n      this.client.onopen = f;\n    }\n\n    /**\n     * @param {(...args: any[]) => void} f\n     */\n  }, {\n    key: \"onClose\",\n    value: function onClose(f) {\n      this.client.onclose = f;\n    }\n\n    // call f with the message string as the first argument\n    /**\n     * @param {(...args: any[]) => void} f\n     */\n  }, {\n    key: \"onMessage\",\n    value: function onMessage(f) {\n      this.client.onmessage = function (e) {\n        f(e.data);\n      };\n    }\n  }]);\n}();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9jbGllbnRzL1dlYlNvY2tldENsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9jbGllbnRzL1dlYlNvY2tldENsaWVudC5qcz82MjZiIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmltcG9ydCB7IGxvZyB9IGZyb20gXCIuLi91dGlscy9sb2cuanNcIjtcbnZhciBXZWJTb2NrZXRDbGllbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgZnVuY3Rpb24gV2ViU29ja2V0Q2xpZW50KHVybCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWJTb2NrZXRDbGllbnQpO1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IFdlYlNvY2tldCh1cmwpO1xuICAgIHRoaXMuY2xpZW50Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGxvZy5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZH0gZlxuICAgKi9cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhXZWJTb2NrZXRDbGllbnQsIFt7XG4gICAga2V5OiBcIm9uT3BlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9wZW4oZikge1xuICAgICAgdGhpcy5jbGllbnQub25vcGVuID0gZjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZH0gZlxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcIm9uQ2xvc2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbG9zZShmKSB7XG4gICAgICB0aGlzLmNsaWVudC5vbmNsb3NlID0gZjtcbiAgICB9XG5cbiAgICAvLyBjYWxsIGYgd2l0aCB0aGUgbWVzc2FnZSBzdHJpbmcgYXMgdGhlIGZpcnN0IGFyZ3VtZW50XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHsoLi4uYXJnczogYW55W10pID0+IHZvaWR9IGZcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJvbk1lc3NhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25NZXNzYWdlKGYpIHtcbiAgICAgIHRoaXMuY2xpZW50Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGYoZS5kYXRhKTtcbiAgICAgIH07XG4gICAgfVxuICB9XSk7XG59KCk7XG5leHBvcnQgeyBXZWJTb2NrZXRDbGllbnQgYXMgZGVmYXVsdCB9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/clients/WebSocketClient.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/index.js?protocol=ws%3A&hostname=0.0.0.0&port=3000&pathname=%2Fws&logging=info&overlay=true&reconnect=10&hot=only&live-reload=true":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/index.js?protocol=ws%3A&hostname=0.0.0.0&port=3000&pathname=%2Fws&logging=info&overlay=true&reconnect=10&hot=only&live-reload=true ***!
  \***********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("var __resourceQuery = \"?protocol=ws%3A&hostname=0.0.0.0&port=3000&pathname=%2Fws&logging=info&overlay=true&reconnect=10&hot=only&live-reload=true\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSocketURL: () => (/* binding */ createSocketURL),\n/* harmony export */   getCurrentScriptSource: () => (/* binding */ getCurrentScriptSource),\n/* harmony export */   parseURL: () => (/* binding */ parseURL)\n/* harmony export */ });\n/* harmony import */ var webpack_hot_log_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webpack/hot/log.js */ \"./node_modules/webpack/hot/log.js\");\n/* harmony import */ var webpack_hot_log_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webpack_hot_log_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var webpack_hot_emitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! webpack/hot/emitter.js */ \"./node_modules/webpack/hot/emitter.js\");\n/* harmony import */ var webpack_hot_emitter_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(webpack_hot_emitter_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _socket_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./socket.js */ \"./node_modules/webpack-dev-server/client/socket.js\");\n/* harmony import */ var _overlay_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./overlay.js */ \"./node_modules/webpack-dev-server/client/overlay.js\");\n/* harmony import */ var _utils_log_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/log.js */ \"./node_modules/webpack-dev-server/client/utils/log.js\");\n/* harmony import */ var _utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/sendMessage.js */ \"./node_modules/webpack-dev-server/client/utils/sendMessage.js\");\n/* harmony import */ var _progress_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./progress.js */ \"./node_modules/webpack-dev-server/client/progress.js\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n/* global __resourceQuery, __webpack_hash__ */\n/// <reference types=\"webpack/module\" />\n\n\n\n\n\n\n\n\n/**\n * @typedef {Object} OverlayOptions\n * @property {boolean | (error: Error) => boolean} [warnings]\n * @property {boolean | (error: Error) => boolean} [errors]\n * @property {boolean | (error: Error) => boolean} [runtimeErrors]\n * @property {string} [trustedTypesPolicyName]\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean} hot\n * @property {boolean} liveReload\n * @property {boolean} progress\n * @property {boolean | OverlayOptions} overlay\n * @property {string} [logging]\n * @property {number} [reconnect]\n */\n\n/**\n * @typedef {Object} Status\n * @property {boolean} isUnloading\n * @property {string} currentHash\n * @property {string} [previousHash]\n */\n\n/**\n * @param {boolean | { warnings?: boolean | string; errors?: boolean | string; runtimeErrors?: boolean | string; }} overlayOptions\n */\nvar decodeOverlayOptions = function decodeOverlayOptions(overlayOptions) {\n  if (_typeof(overlayOptions) === \"object\") {\n    [\"warnings\", \"errors\", \"runtimeErrors\"].forEach(function (property) {\n      if (typeof overlayOptions[property] === \"string\") {\n        var overlayFilterFunctionString = decodeURIComponent(overlayOptions[property]);\n\n        // eslint-disable-next-line no-new-func\n        overlayOptions[property] = new Function(\"message\", \"var callback = \".concat(overlayFilterFunctionString, \"\\n        return callback(message)\"));\n      }\n    });\n  }\n};\n\n/**\n * @type {Status}\n */\nvar status = {\n  isUnloading: false,\n  // eslint-disable-next-line camelcase\n  currentHash: __webpack_require__.h()\n};\n\n/**\n * @returns {string}\n */\nvar getCurrentScriptSource = function getCurrentScriptSource() {\n  // `document.currentScript` is the most accurate way to find the current script,\n  // but is not supported in all browsers.\n  if (document.currentScript) {\n    return document.currentScript.getAttribute(\"src\");\n  }\n\n  // Fallback to getting all scripts running in the document.\n  var scriptElements = document.scripts || [];\n  var scriptElementsWithSrc = Array.prototype.filter.call(scriptElements, function (element) {\n    return element.getAttribute(\"src\");\n  });\n  if (scriptElementsWithSrc.length > 0) {\n    var currentScript = scriptElementsWithSrc[scriptElementsWithSrc.length - 1];\n    return currentScript.getAttribute(\"src\");\n  }\n\n  // Fail as there was no script to use.\n  throw new Error(\"[webpack-dev-server] Failed to get current script source.\");\n};\n\n/**\n * @param {string} resourceQuery\n * @returns {{ [key: string]: string | boolean }}\n */\nvar parseURL = function parseURL(resourceQuery) {\n  /** @type {{ [key: string]: string }} */\n  var result = {};\n  if (typeof resourceQuery === \"string\" && resourceQuery !== \"\") {\n    var searchParams = resourceQuery.slice(1).split(\"&\");\n    for (var i = 0; i < searchParams.length; i++) {\n      var pair = searchParams[i].split(\"=\");\n      result[pair[0]] = decodeURIComponent(pair[1]);\n    }\n  } else {\n    // Else, get the url from the <script> this file was called with.\n    var scriptSource = getCurrentScriptSource();\n    var scriptSourceURL;\n    try {\n      // The placeholder `baseURL` with `window.location.href`,\n      // is to allow parsing of path-relative or protocol-relative URLs,\n      // and will have no effect if `scriptSource` is a fully valid URL.\n      scriptSourceURL = new URL(scriptSource, self.location.href);\n    } catch (error) {\n      // URL parsing failed, do nothing.\n      // We will still proceed to see if we can recover using `resourceQuery`\n    }\n    if (scriptSourceURL) {\n      result = scriptSourceURL;\n      result.fromCurrentScript = true;\n    }\n  }\n  return result;\n};\nvar parsedResourceQuery = parseURL(__resourceQuery);\nvar enabledFeatures = {\n  \"Hot Module Replacement\": false,\n  \"Live Reloading\": false,\n  Progress: false,\n  Overlay: false\n};\n\n/** @type {Options} */\nvar options = {\n  hot: false,\n  liveReload: false,\n  progress: false,\n  overlay: false\n};\nif (parsedResourceQuery.hot === \"true\") {\n  options.hot = true;\n  enabledFeatures[\"Hot Module Replacement\"] = true;\n}\nif (parsedResourceQuery[\"live-reload\"] === \"true\") {\n  options.liveReload = true;\n  enabledFeatures[\"Live Reloading\"] = true;\n}\nif (parsedResourceQuery.progress === \"true\") {\n  options.progress = true;\n  enabledFeatures.Progress = true;\n}\nif (parsedResourceQuery.overlay) {\n  try {\n    options.overlay = JSON.parse(parsedResourceQuery.overlay);\n  } catch (e) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.error(\"Error parsing overlay options from resource query:\", e);\n  }\n\n  // Fill in default \"true\" params for partially-specified objects.\n  if (_typeof(options.overlay) === \"object\") {\n    options.overlay = _objectSpread({\n      errors: true,\n      warnings: true,\n      runtimeErrors: true\n    }, options.overlay);\n    decodeOverlayOptions(options.overlay);\n  }\n  enabledFeatures.Overlay = true;\n}\nif (parsedResourceQuery.logging) {\n  options.logging = parsedResourceQuery.logging;\n}\nif (typeof parsedResourceQuery.reconnect !== \"undefined\") {\n  options.reconnect = Number(parsedResourceQuery.reconnect);\n}\n\n/**\n * @param {string} level\n */\nvar setAllLogLevel = function setAllLogLevel(level) {\n  // This is needed because the HMR logger operate separately from dev server logger\n  webpack_hot_log_js__WEBPACK_IMPORTED_MODULE_0___default().setLogLevel(level === \"verbose\" || level === \"log\" ? \"info\" : level);\n  (0,_utils_log_js__WEBPACK_IMPORTED_MODULE_4__.setLogLevel)(level);\n};\nif (options.logging) {\n  setAllLogLevel(options.logging);\n}\nvar logEnabledFeatures = function logEnabledFeatures(features) {\n  var listEnabledFeatures = Object.keys(features);\n  if (!features || listEnabledFeatures.length === 0) {\n    return;\n  }\n  var logString = \"Server started:\";\n\n  // Server started: Hot Module Replacement enabled, Live Reloading enabled, Overlay disabled.\n  for (var i = 0; i < listEnabledFeatures.length; i++) {\n    var key = listEnabledFeatures[i];\n    logString += \" \".concat(key, \" \").concat(features[key] ? \"enabled\" : \"disabled\", \",\");\n  }\n  // replace last comma with a period\n  logString = logString.slice(0, -1).concat(\".\");\n  _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(logString);\n};\nlogEnabledFeatures(enabledFeatures);\nself.addEventListener(\"beforeunload\", function () {\n  status.isUnloading = true;\n});\nvar overlay = typeof window !== \"undefined\" ? (0,_overlay_js__WEBPACK_IMPORTED_MODULE_3__.createOverlay)(_typeof(options.overlay) === \"object\" ? {\n  trustedTypesPolicyName: options.overlay.trustedTypesPolicyName,\n  catchRuntimeError: options.overlay.runtimeErrors\n} : {\n  trustedTypesPolicyName: false,\n  catchRuntimeError: options.overlay\n}) : {\n  send: function send() {}\n};\n\n/**\n * @param {Options} options\n * @param {Status} currentStatus\n */\nvar reloadApp = function reloadApp(_ref, currentStatus) {\n  var hot = _ref.hot,\n    liveReload = _ref.liveReload;\n  if (currentStatus.isUnloading) {\n    return;\n  }\n  var currentHash = currentStatus.currentHash,\n    previousHash = currentStatus.previousHash;\n  var isInitial = currentHash.indexOf(/** @type {string} */previousHash) >= 0;\n  if (isInitial) {\n    return;\n  }\n\n  /**\n   * @param {Window} rootWindow\n   * @param {number} intervalId\n   */\n  function applyReload(rootWindow, intervalId) {\n    clearInterval(intervalId);\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"App updated. Reloading...\");\n    rootWindow.location.reload();\n  }\n  var search = self.location.search.toLowerCase();\n  var allowToHot = search.indexOf(\"webpack-dev-server-hot=false\") === -1;\n  var allowToLiveReload = search.indexOf(\"webpack-dev-server-live-reload=false\") === -1;\n  if (hot && allowToHot) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"App hot update...\");\n    webpack_hot_emitter_js__WEBPACK_IMPORTED_MODULE_1___default().emit(\"webpackHotUpdate\", currentStatus.currentHash);\n    if (typeof self !== \"undefined\" && self.window) {\n      // broadcast update to window\n      self.postMessage(\"webpackHotUpdate\".concat(currentStatus.currentHash), \"*\");\n    }\n  }\n  // allow refreshing the page only if liveReload isn't disabled\n  else if (liveReload && allowToLiveReload) {\n    var rootWindow = self;\n\n    // use parent window for reload (in case we're in an iframe with no valid src)\n    var intervalId = self.setInterval(function () {\n      if (rootWindow.location.protocol !== \"about:\") {\n        // reload immediately if protocol is valid\n        applyReload(rootWindow, intervalId);\n      } else {\n        rootWindow = rootWindow.parent;\n        if (rootWindow.parent === rootWindow) {\n          // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\n          applyReload(rootWindow, intervalId);\n        }\n      }\n    });\n  }\n};\nvar ansiRegex = new RegExp([\"[\\\\u001B\\\\u009B][[\\\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]+)*|[a-zA-Z\\\\d]+(?:;[-a-zA-Z\\\\d\\\\/#&.:=?%@~_]*)*)?\\\\u0007)\", \"(?:(?:\\\\d{1,4}(?:;\\\\d{0,4})*)?[\\\\dA-PR-TZcf-nq-uy=><~]))\"].join(\"|\"), \"g\");\n\n/**\n *\n * Strip [ANSI escape codes](https://en.wikipedia.org/wiki/ANSI_escape_code) from a string.\n * Adapted from code originally released by Sindre Sorhus\n * Licensed the MIT License\n *\n * @param {string} string\n * @return {string}\n */\nvar stripAnsi = function stripAnsi(string) {\n  if (typeof string !== \"string\") {\n    throw new TypeError(\"Expected a `string`, got `\".concat(_typeof(string), \"`\"));\n  }\n  return string.replace(ansiRegex, \"\");\n};\nvar onSocketMessage = {\n  hot: function hot() {\n    if (parsedResourceQuery.hot === \"false\") {\n      return;\n    }\n    options.hot = true;\n  },\n  liveReload: function liveReload() {\n    if (parsedResourceQuery[\"live-reload\"] === \"false\") {\n      return;\n    }\n    options.liveReload = true;\n  },\n  invalid: function invalid() {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"App updated. Recompiling...\");\n\n    // Fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.\n    if (options.overlay) {\n      overlay.send({\n        type: \"DISMISS\"\n      });\n    }\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Invalid\");\n  },\n  /**\n   * @param {string} hash\n   */\n  hash: function hash(_hash) {\n    status.previousHash = status.currentHash;\n    status.currentHash = _hash;\n  },\n  logging: setAllLogLevel,\n  /**\n   * @param {boolean} value\n   */\n  overlay: function overlay(value) {\n    if (typeof document === \"undefined\") {\n      return;\n    }\n    options.overlay = value;\n    decodeOverlayOptions(options.overlay);\n  },\n  /**\n   * @param {number} value\n   */\n  reconnect: function reconnect(value) {\n    if (parsedResourceQuery.reconnect === \"false\") {\n      return;\n    }\n    options.reconnect = value;\n  },\n  /**\n   * @param {boolean} value\n   */\n  progress: function progress(value) {\n    options.progress = value;\n  },\n  /**\n   * @param {{ pluginName?: string, percent: number, msg: string }} data\n   */\n  \"progress-update\": function progressUpdate(data) {\n    if (options.progress) {\n      _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"\".concat(data.pluginName ? \"[\".concat(data.pluginName, \"] \") : \"\").concat(data.percent, \"% - \").concat(data.msg, \".\"));\n    }\n    if ((0,_progress_js__WEBPACK_IMPORTED_MODULE_6__.isProgressSupported)()) {\n      if (typeof options.progress === \"string\") {\n        var progress = document.querySelector(\"wds-progress\");\n        if (!progress) {\n          (0,_progress_js__WEBPACK_IMPORTED_MODULE_6__.defineProgressElement)();\n          progress = document.createElement(\"wds-progress\");\n          document.body.appendChild(progress);\n        }\n        progress.setAttribute(\"progress\", data.percent);\n        progress.setAttribute(\"type\", options.progress);\n      }\n    }\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Progress\", data);\n  },\n  \"still-ok\": function stillOk() {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"Nothing changed.\");\n    if (options.overlay) {\n      overlay.send({\n        type: \"DISMISS\"\n      });\n    }\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"StillOk\");\n  },\n  ok: function ok() {\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Ok\");\n    if (options.overlay) {\n      overlay.send({\n        type: \"DISMISS\"\n      });\n    }\n    reloadApp(options, status);\n  },\n  /**\n   * @param {string} file\n   */\n  \"static-changed\": function staticChanged(file) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"\".concat(file ? \"\\\"\".concat(file, \"\\\"\") : \"Content\", \" from static directory was changed. Reloading...\"));\n    self.location.reload();\n  },\n  /**\n   * @param {Error[]} warnings\n   * @param {any} params\n   */\n  warnings: function warnings(_warnings, params) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.warn(\"Warnings while compiling.\");\n    var printableWarnings = _warnings.map(function (error) {\n      var _formatProblem = (0,_overlay_js__WEBPACK_IMPORTED_MODULE_3__.formatProblem)(\"warning\", error),\n        header = _formatProblem.header,\n        body = _formatProblem.body;\n      return \"\".concat(header, \"\\n\").concat(stripAnsi(body));\n    });\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Warnings\", printableWarnings);\n    for (var i = 0; i < printableWarnings.length; i++) {\n      _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.warn(printableWarnings[i]);\n    }\n    var overlayWarningsSetting = typeof options.overlay === \"boolean\" ? options.overlay : options.overlay && options.overlay.warnings;\n    if (overlayWarningsSetting) {\n      var warningsToDisplay = typeof overlayWarningsSetting === \"function\" ? _warnings.filter(overlayWarningsSetting) : _warnings;\n      if (warningsToDisplay.length) {\n        overlay.send({\n          type: \"BUILD_ERROR\",\n          level: \"warning\",\n          messages: _warnings\n        });\n      }\n    }\n    if (params && params.preventReloading) {\n      return;\n    }\n    reloadApp(options, status);\n  },\n  /**\n   * @param {Error[]} errors\n   */\n  errors: function errors(_errors) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.error(\"Errors while compiling. Reload prevented.\");\n    var printableErrors = _errors.map(function (error) {\n      var _formatProblem2 = (0,_overlay_js__WEBPACK_IMPORTED_MODULE_3__.formatProblem)(\"error\", error),\n        header = _formatProblem2.header,\n        body = _formatProblem2.body;\n      return \"\".concat(header, \"\\n\").concat(stripAnsi(body));\n    });\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Errors\", printableErrors);\n    for (var i = 0; i < printableErrors.length; i++) {\n      _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.error(printableErrors[i]);\n    }\n    var overlayErrorsSettings = typeof options.overlay === \"boolean\" ? options.overlay : options.overlay && options.overlay.errors;\n    if (overlayErrorsSettings) {\n      var errorsToDisplay = typeof overlayErrorsSettings === \"function\" ? _errors.filter(overlayErrorsSettings) : _errors;\n      if (errorsToDisplay.length) {\n        overlay.send({\n          type: \"BUILD_ERROR\",\n          level: \"error\",\n          messages: _errors\n        });\n      }\n    }\n  },\n  /**\n   * @param {Error} error\n   */\n  error: function error(_error) {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.error(_error);\n  },\n  close: function close() {\n    _utils_log_js__WEBPACK_IMPORTED_MODULE_4__.log.info(\"Disconnected!\");\n    if (options.overlay) {\n      overlay.send({\n        type: \"DISMISS\"\n      });\n    }\n    (0,_utils_sendMessage_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(\"Close\");\n  }\n};\n\n/**\n * @param {{ protocol?: string, auth?: string, hostname?: string, port?: string, pathname?: string, search?: string, hash?: string, slashes?: boolean }} objURL\n * @returns {string}\n */\nvar formatURL = function formatURL(objURL) {\n  var protocol = objURL.protocol || \"\";\n  if (protocol && protocol.substr(-1) !== \":\") {\n    protocol += \":\";\n  }\n  var auth = objURL.auth || \"\";\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, \":\");\n    auth += \"@\";\n  }\n  var host = \"\";\n  if (objURL.hostname) {\n    host = auth + (objURL.hostname.indexOf(\":\") === -1 ? objURL.hostname : \"[\".concat(objURL.hostname, \"]\"));\n    if (objURL.port) {\n      host += \":\".concat(objURL.port);\n    }\n  }\n  var pathname = objURL.pathname || \"\";\n  if (objURL.slashes) {\n    host = \"//\".concat(host || \"\");\n    if (pathname && pathname.charAt(0) !== \"/\") {\n      pathname = \"/\".concat(pathname);\n    }\n  } else if (!host) {\n    host = \"\";\n  }\n  var search = objURL.search || \"\";\n  if (search && search.charAt(0) !== \"?\") {\n    search = \"?\".concat(search);\n  }\n  var hash = objURL.hash || \"\";\n  if (hash && hash.charAt(0) !== \"#\") {\n    hash = \"#\".concat(hash);\n  }\n  pathname = pathname.replace(/[?#]/g,\n  /**\n   * @param {string} match\n   * @returns {string}\n   */\n  function (match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace(\"#\", \"%23\");\n  return \"\".concat(protocol).concat(host).concat(pathname).concat(search).concat(hash);\n};\n\n/**\n * @param {URL & { fromCurrentScript?: boolean }} parsedURL\n * @returns {string}\n */\nvar createSocketURL = function createSocketURL(parsedURL) {\n  var hostname = parsedURL.hostname;\n\n  // Node.js module parses it as `::`\n  // `new URL(urlString, [baseURLString])` parses it as '[::]'\n  var isInAddrAny = hostname === \"0.0.0.0\" || hostname === \"::\" || hostname === \"[::]\";\n\n  // why do we need this check?\n  // hostname n/a for file protocol (example, when using electron, ionic)\n  // see: https://github.com/webpack/webpack-dev-server/pull/384\n  if (isInAddrAny && self.location.hostname && self.location.protocol.indexOf(\"http\") === 0) {\n    hostname = self.location.hostname;\n  }\n  var socketURLProtocol = parsedURL.protocol || self.location.protocol;\n\n  // When https is used in the app, secure web sockets are always necessary because the browser doesn't accept non-secure web sockets.\n  if (socketURLProtocol === \"auto:\" || hostname && isInAddrAny && self.location.protocol === \"https:\") {\n    socketURLProtocol = self.location.protocol;\n  }\n  socketURLProtocol = socketURLProtocol.replace(/^(?:http|.+-extension|file)/i, \"ws\");\n  var socketURLAuth = \"\";\n\n  // `new URL(urlString, [baseURLstring])` doesn't have `auth` property\n  // Parse authentication credentials in case we need them\n  if (parsedURL.username) {\n    socketURLAuth = parsedURL.username;\n\n    // Since HTTP basic authentication does not allow empty username,\n    // we only include password if the username is not empty.\n    if (parsedURL.password) {\n      // Result: <username>:<password>\n      socketURLAuth = socketURLAuth.concat(\":\", parsedURL.password);\n    }\n  }\n\n  // In case the host is a raw IPv6 address, it can be enclosed in\n  // the brackets as the brackets are needed in the final URL string.\n  // Need to remove those as url.format blindly adds its own set of brackets\n  // if the host string contains colons. That would lead to non-working\n  // double brackets (e.g. [[::]]) host\n  //\n  // All of these web socket url params are optionally passed in through resourceQuery,\n  // so we need to fall back to the default if they are not provided\n  var socketURLHostname = (hostname || self.location.hostname || \"localhost\").replace(/^\\[(.*)\\]$/, \"$1\");\n  var socketURLPort = parsedURL.port;\n  if (!socketURLPort || socketURLPort === \"0\") {\n    socketURLPort = self.location.port;\n  }\n\n  // If path is provided it'll be passed in via the resourceQuery as a\n  // query param so it has to be parsed out of the querystring in order for the\n  // client to open the socket to the correct location.\n  var socketURLPathname = \"/ws\";\n  if (parsedURL.pathname && !parsedURL.fromCurrentScript) {\n    socketURLPathname = parsedURL.pathname;\n  }\n  return formatURL({\n    protocol: socketURLProtocol,\n    auth: socketURLAuth,\n    hostname: socketURLHostname,\n    port: socketURLPort,\n    pathname: socketURLPathname,\n    slashes: true\n  });\n};\nvar socketURL = createSocketURL(parsedResourceQuery);\n(0,_socket_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(socketURL, onSocketMessage, options.reconnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9pbmRleC5qcz9wcm90b2NvbD13cyUzQSZob3N0bmFtZT0wLjAuMC4wJnBvcnQ9MzAwMCZwYXRobmFtZT0lMkZ3cyZsb2dnaW5nPWluZm8mb3ZlcmxheT10cnVlJnJlY29ubmVjdD0xMCZob3Q9b25seSZsaXZlLXJlbG9hZD10cnVlIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnBhY2stZGV2LXNlcnZlci9jbGllbnQvaW5kZXguanM/ZjRlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0KSB7IHJldHVybiAociA9IF90b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHsgdmFsdWU6IHQsIGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAgfSkgOiBlW3JdID0gdCwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbi8qIGdsb2JhbCBfX3Jlc291cmNlUXVlcnksIF9fd2VicGFja19oYXNoX18gKi9cbi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwid2VicGFjay9tb2R1bGVcIiAvPlxuaW1wb3J0IHdlYnBhY2tIb3RMb2cgZnJvbSBcIndlYnBhY2svaG90L2xvZy5qc1wiO1xuaW1wb3J0IGhvdEVtaXR0ZXIgZnJvbSBcIndlYnBhY2svaG90L2VtaXR0ZXIuanNcIjtcbmltcG9ydCBzb2NrZXQgZnJvbSBcIi4vc29ja2V0LmpzXCI7XG5pbXBvcnQgeyBmb3JtYXRQcm9ibGVtLCBjcmVhdGVPdmVybGF5IH0gZnJvbSBcIi4vb3ZlcmxheS5qc1wiO1xuaW1wb3J0IHsgbG9nLCBzZXRMb2dMZXZlbCB9IGZyb20gXCIuL3V0aWxzL2xvZy5qc1wiO1xuaW1wb3J0IHNlbmRNZXNzYWdlIGZyb20gXCIuL3V0aWxzL3NlbmRNZXNzYWdlLmpzXCI7XG5pbXBvcnQgeyBpc1Byb2dyZXNzU3VwcG9ydGVkLCBkZWZpbmVQcm9ncmVzc0VsZW1lbnQgfSBmcm9tIFwiLi9wcm9ncmVzcy5qc1wiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE92ZXJsYXlPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW4gfCAoZXJyb3I6IEVycm9yKSA9PiBib29sZWFufSBbd2FybmluZ3NdXG4gKiBAcHJvcGVydHkge2Jvb2xlYW4gfCAoZXJyb3I6IEVycm9yKSA9PiBib29sZWFufSBbZXJyb3JzXVxuICogQHByb3BlcnR5IHtib29sZWFuIHwgKGVycm9yOiBFcnJvcikgPT4gYm9vbGVhbn0gW3J1bnRpbWVFcnJvcnNdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RydXN0ZWRUeXBlc1BvbGljeU5hbWVdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGhvdFxuICogQHByb3BlcnR5IHtib29sZWFufSBsaXZlUmVsb2FkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHByb2dyZXNzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW4gfCBPdmVybGF5T3B0aW9uc30gb3ZlcmxheVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtsb2dnaW5nXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZWNvbm5lY3RdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0dXNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gaXNVbmxvYWRpbmdcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjdXJyZW50SGFzaFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwcmV2aW91c0hhc2hdXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW4gfCB7IHdhcm5pbmdzPzogYm9vbGVhbiB8IHN0cmluZzsgZXJyb3JzPzogYm9vbGVhbiB8IHN0cmluZzsgcnVudGltZUVycm9ycz86IGJvb2xlYW4gfCBzdHJpbmc7IH19IG92ZXJsYXlPcHRpb25zXG4gKi9cbnZhciBkZWNvZGVPdmVybGF5T3B0aW9ucyA9IGZ1bmN0aW9uIGRlY29kZU92ZXJsYXlPcHRpb25zKG92ZXJsYXlPcHRpb25zKSB7XG4gIGlmIChfdHlwZW9mKG92ZXJsYXlPcHRpb25zKSA9PT0gXCJvYmplY3RcIikge1xuICAgIFtcIndhcm5pbmdzXCIsIFwiZXJyb3JzXCIsIFwicnVudGltZUVycm9yc1wiXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgaWYgKHR5cGVvZiBvdmVybGF5T3B0aW9uc1twcm9wZXJ0eV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIG92ZXJsYXlGaWx0ZXJGdW5jdGlvblN0cmluZyA9IGRlY29kZVVSSUNvbXBvbmVudChvdmVybGF5T3B0aW9uc1twcm9wZXJ0eV0pO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgICAgICBvdmVybGF5T3B0aW9uc1twcm9wZXJ0eV0gPSBuZXcgRnVuY3Rpb24oXCJtZXNzYWdlXCIsIFwidmFyIGNhbGxiYWNrID0gXCIuY29uY2F0KG92ZXJsYXlGaWx0ZXJGdW5jdGlvblN0cmluZywgXCJcXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhtZXNzYWdlKVwiKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQHR5cGUge1N0YXR1c31cbiAqL1xudmFyIHN0YXR1cyA9IHtcbiAgaXNVbmxvYWRpbmc6IGZhbHNlLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gIGN1cnJlbnRIYXNoOiBfX3dlYnBhY2tfaGFzaF9fXG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbnZhciBnZXRDdXJyZW50U2NyaXB0U291cmNlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFNjcmlwdFNvdXJjZSgpIHtcbiAgLy8gYGRvY3VtZW50LmN1cnJlbnRTY3JpcHRgIGlzIHRoZSBtb3N0IGFjY3VyYXRlIHdheSB0byBmaW5kIHRoZSBjdXJyZW50IHNjcmlwdCxcbiAgLy8gYnV0IGlzIG5vdCBzdXBwb3J0ZWQgaW4gYWxsIGJyb3dzZXJzLlxuICBpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdCkge1xuICAgIHJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIHRvIGdldHRpbmcgYWxsIHNjcmlwdHMgcnVubmluZyBpbiB0aGUgZG9jdW1lbnQuXG4gIHZhciBzY3JpcHRFbGVtZW50cyA9IGRvY3VtZW50LnNjcmlwdHMgfHwgW107XG4gIHZhciBzY3JpcHRFbGVtZW50c1dpdGhTcmMgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoc2NyaXB0RWxlbWVudHMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic3JjXCIpO1xuICB9KTtcbiAgaWYgKHNjcmlwdEVsZW1lbnRzV2l0aFNyYy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIGN1cnJlbnRTY3JpcHQgPSBzY3JpcHRFbGVtZW50c1dpdGhTcmNbc2NyaXB0RWxlbWVudHNXaXRoU3JjLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBjdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcbiAgfVxuXG4gIC8vIEZhaWwgYXMgdGhlcmUgd2FzIG5vIHNjcmlwdCB0byB1c2UuXG4gIHRocm93IG5ldyBFcnJvcihcIlt3ZWJwYWNrLWRldi1zZXJ2ZXJdIEZhaWxlZCB0byBnZXQgY3VycmVudCBzY3JpcHQgc291cmNlLlwiKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlc291cmNlUXVlcnlcbiAqIEByZXR1cm5zIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfX1cbiAqL1xudmFyIHBhcnNlVVJMID0gZnVuY3Rpb24gcGFyc2VVUkwocmVzb3VyY2VRdWVyeSkge1xuICAvKiogQHR5cGUge3sgW2tleTogc3RyaW5nXTogc3RyaW5nIH19ICovXG4gIHZhciByZXN1bHQgPSB7fTtcbiAgaWYgKHR5cGVvZiByZXNvdXJjZVF1ZXJ5ID09PSBcInN0cmluZ1wiICYmIHJlc291cmNlUXVlcnkgIT09IFwiXCIpIHtcbiAgICB2YXIgc2VhcmNoUGFyYW1zID0gcmVzb3VyY2VRdWVyeS5zbGljZSgxKS5zcGxpdChcIiZcIik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWFyY2hQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYWlyID0gc2VhcmNoUGFyYW1zW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgIHJlc3VsdFtwYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gRWxzZSwgZ2V0IHRoZSB1cmwgZnJvbSB0aGUgPHNjcmlwdD4gdGhpcyBmaWxlIHdhcyBjYWxsZWQgd2l0aC5cbiAgICB2YXIgc2NyaXB0U291cmNlID0gZ2V0Q3VycmVudFNjcmlwdFNvdXJjZSgpO1xuICAgIHZhciBzY3JpcHRTb3VyY2VVUkw7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoZSBwbGFjZWhvbGRlciBgYmFzZVVSTGAgd2l0aCBgd2luZG93LmxvY2F0aW9uLmhyZWZgLFxuICAgICAgLy8gaXMgdG8gYWxsb3cgcGFyc2luZyBvZiBwYXRoLXJlbGF0aXZlIG9yIHByb3RvY29sLXJlbGF0aXZlIFVSTHMsXG4gICAgICAvLyBhbmQgd2lsbCBoYXZlIG5vIGVmZmVjdCBpZiBgc2NyaXB0U291cmNlYCBpcyBhIGZ1bGx5IHZhbGlkIFVSTC5cbiAgICAgIHNjcmlwdFNvdXJjZVVSTCA9IG5ldyBVUkwoc2NyaXB0U291cmNlLCBzZWxmLmxvY2F0aW9uLmhyZWYpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBVUkwgcGFyc2luZyBmYWlsZWQsIGRvIG5vdGhpbmcuXG4gICAgICAvLyBXZSB3aWxsIHN0aWxsIHByb2NlZWQgdG8gc2VlIGlmIHdlIGNhbiByZWNvdmVyIHVzaW5nIGByZXNvdXJjZVF1ZXJ5YFxuICAgIH1cbiAgICBpZiAoc2NyaXB0U291cmNlVVJMKSB7XG4gICAgICByZXN1bHQgPSBzY3JpcHRTb3VyY2VVUkw7XG4gICAgICByZXN1bHQuZnJvbUN1cnJlbnRTY3JpcHQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBwYXJzZWRSZXNvdXJjZVF1ZXJ5ID0gcGFyc2VVUkwoX19yZXNvdXJjZVF1ZXJ5KTtcbnZhciBlbmFibGVkRmVhdHVyZXMgPSB7XG4gIFwiSG90IE1vZHVsZSBSZXBsYWNlbWVudFwiOiBmYWxzZSxcbiAgXCJMaXZlIFJlbG9hZGluZ1wiOiBmYWxzZSxcbiAgUHJvZ3Jlc3M6IGZhbHNlLFxuICBPdmVybGF5OiBmYWxzZVxufTtcblxuLyoqIEB0eXBlIHtPcHRpb25zfSAqL1xudmFyIG9wdGlvbnMgPSB7XG4gIGhvdDogZmFsc2UsXG4gIGxpdmVSZWxvYWQ6IGZhbHNlLFxuICBwcm9ncmVzczogZmFsc2UsXG4gIG92ZXJsYXk6IGZhbHNlXG59O1xuaWYgKHBhcnNlZFJlc291cmNlUXVlcnkuaG90ID09PSBcInRydWVcIikge1xuICBvcHRpb25zLmhvdCA9IHRydWU7XG4gIGVuYWJsZWRGZWF0dXJlc1tcIkhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcIl0gPSB0cnVlO1xufVxuaWYgKHBhcnNlZFJlc291cmNlUXVlcnlbXCJsaXZlLXJlbG9hZFwiXSA9PT0gXCJ0cnVlXCIpIHtcbiAgb3B0aW9ucy5saXZlUmVsb2FkID0gdHJ1ZTtcbiAgZW5hYmxlZEZlYXR1cmVzW1wiTGl2ZSBSZWxvYWRpbmdcIl0gPSB0cnVlO1xufVxuaWYgKHBhcnNlZFJlc291cmNlUXVlcnkucHJvZ3Jlc3MgPT09IFwidHJ1ZVwiKSB7XG4gIG9wdGlvbnMucHJvZ3Jlc3MgPSB0cnVlO1xuICBlbmFibGVkRmVhdHVyZXMuUHJvZ3Jlc3MgPSB0cnVlO1xufVxuaWYgKHBhcnNlZFJlc291cmNlUXVlcnkub3ZlcmxheSkge1xuICB0cnkge1xuICAgIG9wdGlvbnMub3ZlcmxheSA9IEpTT04ucGFyc2UocGFyc2VkUmVzb3VyY2VRdWVyeS5vdmVybGF5KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZy5lcnJvcihcIkVycm9yIHBhcnNpbmcgb3ZlcmxheSBvcHRpb25zIGZyb20gcmVzb3VyY2UgcXVlcnk6XCIsIGUpO1xuICB9XG5cbiAgLy8gRmlsbCBpbiBkZWZhdWx0IFwidHJ1ZVwiIHBhcmFtcyBmb3IgcGFydGlhbGx5LXNwZWNpZmllZCBvYmplY3RzLlxuICBpZiAoX3R5cGVvZihvcHRpb25zLm92ZXJsYXkpID09PSBcIm9iamVjdFwiKSB7XG4gICAgb3B0aW9ucy5vdmVybGF5ID0gX29iamVjdFNwcmVhZCh7XG4gICAgICBlcnJvcnM6IHRydWUsXG4gICAgICB3YXJuaW5nczogdHJ1ZSxcbiAgICAgIHJ1bnRpbWVFcnJvcnM6IHRydWVcbiAgICB9LCBvcHRpb25zLm92ZXJsYXkpO1xuICAgIGRlY29kZU92ZXJsYXlPcHRpb25zKG9wdGlvbnMub3ZlcmxheSk7XG4gIH1cbiAgZW5hYmxlZEZlYXR1cmVzLk92ZXJsYXkgPSB0cnVlO1xufVxuaWYgKHBhcnNlZFJlc291cmNlUXVlcnkubG9nZ2luZykge1xuICBvcHRpb25zLmxvZ2dpbmcgPSBwYXJzZWRSZXNvdXJjZVF1ZXJ5LmxvZ2dpbmc7XG59XG5pZiAodHlwZW9mIHBhcnNlZFJlc291cmNlUXVlcnkucmVjb25uZWN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIG9wdGlvbnMucmVjb25uZWN0ID0gTnVtYmVyKHBhcnNlZFJlc291cmNlUXVlcnkucmVjb25uZWN0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGV2ZWxcbiAqL1xudmFyIHNldEFsbExvZ0xldmVsID0gZnVuY3Rpb24gc2V0QWxsTG9nTGV2ZWwobGV2ZWwpIHtcbiAgLy8gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgSE1SIGxvZ2dlciBvcGVyYXRlIHNlcGFyYXRlbHkgZnJvbSBkZXYgc2VydmVyIGxvZ2dlclxuICB3ZWJwYWNrSG90TG9nLnNldExvZ0xldmVsKGxldmVsID09PSBcInZlcmJvc2VcIiB8fCBsZXZlbCA9PT0gXCJsb2dcIiA/IFwiaW5mb1wiIDogbGV2ZWwpO1xuICBzZXRMb2dMZXZlbChsZXZlbCk7XG59O1xuaWYgKG9wdGlvbnMubG9nZ2luZykge1xuICBzZXRBbGxMb2dMZXZlbChvcHRpb25zLmxvZ2dpbmcpO1xufVxudmFyIGxvZ0VuYWJsZWRGZWF0dXJlcyA9IGZ1bmN0aW9uIGxvZ0VuYWJsZWRGZWF0dXJlcyhmZWF0dXJlcykge1xuICB2YXIgbGlzdEVuYWJsZWRGZWF0dXJlcyA9IE9iamVjdC5rZXlzKGZlYXR1cmVzKTtcbiAgaWYgKCFmZWF0dXJlcyB8fCBsaXN0RW5hYmxlZEZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbG9nU3RyaW5nID0gXCJTZXJ2ZXIgc3RhcnRlZDpcIjtcblxuICAvLyBTZXJ2ZXIgc3RhcnRlZDogSG90IE1vZHVsZSBSZXBsYWNlbWVudCBlbmFibGVkLCBMaXZlIFJlbG9hZGluZyBlbmFibGVkLCBPdmVybGF5IGRpc2FibGVkLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RFbmFibGVkRmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbGlzdEVuYWJsZWRGZWF0dXJlc1tpXTtcbiAgICBsb2dTdHJpbmcgKz0gXCIgXCIuY29uY2F0KGtleSwgXCIgXCIpLmNvbmNhdChmZWF0dXJlc1trZXldID8gXCJlbmFibGVkXCIgOiBcImRpc2FibGVkXCIsIFwiLFwiKTtcbiAgfVxuICAvLyByZXBsYWNlIGxhc3QgY29tbWEgd2l0aCBhIHBlcmlvZFxuICBsb2dTdHJpbmcgPSBsb2dTdHJpbmcuc2xpY2UoMCwgLTEpLmNvbmNhdChcIi5cIik7XG4gIGxvZy5pbmZvKGxvZ1N0cmluZyk7XG59O1xubG9nRW5hYmxlZEZlYXR1cmVzKGVuYWJsZWRGZWF0dXJlcyk7XG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICBzdGF0dXMuaXNVbmxvYWRpbmcgPSB0cnVlO1xufSk7XG52YXIgb3ZlcmxheSA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyBjcmVhdGVPdmVybGF5KF90eXBlb2Yob3B0aW9ucy5vdmVybGF5KSA9PT0gXCJvYmplY3RcIiA/IHtcbiAgdHJ1c3RlZFR5cGVzUG9saWN5TmFtZTogb3B0aW9ucy5vdmVybGF5LnRydXN0ZWRUeXBlc1BvbGljeU5hbWUsXG4gIGNhdGNoUnVudGltZUVycm9yOiBvcHRpb25zLm92ZXJsYXkucnVudGltZUVycm9yc1xufSA6IHtcbiAgdHJ1c3RlZFR5cGVzUG9saWN5TmFtZTogZmFsc2UsXG4gIGNhdGNoUnVudGltZUVycm9yOiBvcHRpb25zLm92ZXJsYXlcbn0pIDoge1xuICBzZW5kOiBmdW5jdGlvbiBzZW5kKCkge31cbn07XG5cbi8qKlxuICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zXG4gKiBAcGFyYW0ge1N0YXR1c30gY3VycmVudFN0YXR1c1xuICovXG52YXIgcmVsb2FkQXBwID0gZnVuY3Rpb24gcmVsb2FkQXBwKF9yZWYsIGN1cnJlbnRTdGF0dXMpIHtcbiAgdmFyIGhvdCA9IF9yZWYuaG90LFxuICAgIGxpdmVSZWxvYWQgPSBfcmVmLmxpdmVSZWxvYWQ7XG4gIGlmIChjdXJyZW50U3RhdHVzLmlzVW5sb2FkaW5nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjdXJyZW50SGFzaCA9IGN1cnJlbnRTdGF0dXMuY3VycmVudEhhc2gsXG4gICAgcHJldmlvdXNIYXNoID0gY3VycmVudFN0YXR1cy5wcmV2aW91c0hhc2g7XG4gIHZhciBpc0luaXRpYWwgPSBjdXJyZW50SGFzaC5pbmRleE9mKC8qKiBAdHlwZSB7c3RyaW5nfSAqL3ByZXZpb3VzSGFzaCkgPj0gMDtcbiAgaWYgKGlzSW5pdGlhbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1dpbmRvd30gcm9vdFdpbmRvd1xuICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWxJZFxuICAgKi9cbiAgZnVuY3Rpb24gYXBwbHlSZWxvYWQocm9vdFdpbmRvdywgaW50ZXJ2YWxJZCkge1xuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgbG9nLmluZm8oXCJBcHAgdXBkYXRlZC4gUmVsb2FkaW5nLi4uXCIpO1xuICAgIHJvb3RXaW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH1cbiAgdmFyIHNlYXJjaCA9IHNlbGYubG9jYXRpb24uc2VhcmNoLnRvTG93ZXJDYXNlKCk7XG4gIHZhciBhbGxvd1RvSG90ID0gc2VhcmNoLmluZGV4T2YoXCJ3ZWJwYWNrLWRldi1zZXJ2ZXItaG90PWZhbHNlXCIpID09PSAtMTtcbiAgdmFyIGFsbG93VG9MaXZlUmVsb2FkID0gc2VhcmNoLmluZGV4T2YoXCJ3ZWJwYWNrLWRldi1zZXJ2ZXItbGl2ZS1yZWxvYWQ9ZmFsc2VcIikgPT09IC0xO1xuICBpZiAoaG90ICYmIGFsbG93VG9Ib3QpIHtcbiAgICBsb2cuaW5mbyhcIkFwcCBob3QgdXBkYXRlLi4uXCIpO1xuICAgIGhvdEVtaXR0ZXIuZW1pdChcIndlYnBhY2tIb3RVcGRhdGVcIiwgY3VycmVudFN0YXR1cy5jdXJyZW50SGFzaCk7XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYud2luZG93KSB7XG4gICAgICAvLyBicm9hZGNhc3QgdXBkYXRlIHRvIHdpbmRvd1xuICAgICAgc2VsZi5wb3N0TWVzc2FnZShcIndlYnBhY2tIb3RVcGRhdGVcIi5jb25jYXQoY3VycmVudFN0YXR1cy5jdXJyZW50SGFzaCksIFwiKlwiKTtcbiAgICB9XG4gIH1cbiAgLy8gYWxsb3cgcmVmcmVzaGluZyB0aGUgcGFnZSBvbmx5IGlmIGxpdmVSZWxvYWQgaXNuJ3QgZGlzYWJsZWRcbiAgZWxzZSBpZiAobGl2ZVJlbG9hZCAmJiBhbGxvd1RvTGl2ZVJlbG9hZCkge1xuICAgIHZhciByb290V2luZG93ID0gc2VsZjtcblxuICAgIC8vIHVzZSBwYXJlbnQgd2luZG93IGZvciByZWxvYWQgKGluIGNhc2Ugd2UncmUgaW4gYW4gaWZyYW1lIHdpdGggbm8gdmFsaWQgc3JjKVxuICAgIHZhciBpbnRlcnZhbElkID0gc2VsZi5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocm9vdFdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAhPT0gXCJhYm91dDpcIikge1xuICAgICAgICAvLyByZWxvYWQgaW1tZWRpYXRlbHkgaWYgcHJvdG9jb2wgaXMgdmFsaWRcbiAgICAgICAgYXBwbHlSZWxvYWQocm9vdFdpbmRvdywgaW50ZXJ2YWxJZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb290V2luZG93ID0gcm9vdFdpbmRvdy5wYXJlbnQ7XG4gICAgICAgIGlmIChyb290V2luZG93LnBhcmVudCA9PT0gcm9vdFdpbmRvdykge1xuICAgICAgICAgIC8vIGlmIHBhcmVudCBlcXVhbHMgY3VycmVudCB3aW5kb3cgd2UndmUgcmVhY2hlZCB0aGUgcm9vdCB3aGljaCB3b3VsZCBjb250aW51ZSBmb3JldmVyLCBzbyB0cmlnZ2VyIGEgcmVsb2FkIGFueXdheXNcbiAgICAgICAgICBhcHBseVJlbG9hZChyb290V2luZG93LCBpbnRlcnZhbElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIGFuc2lSZWdleCA9IG5ldyBSZWdFeHAoW1wiW1xcXFx1MDAxQlxcXFx1MDA5Ql1bW1xcXFxdKCkjOz9dKig/Oig/Oig/Oig/OjtbLWEtekEtWlxcXFxkXFxcXC8jJi46PT8lQH5fXSspKnxbYS16QS1aXFxcXGRdKyg/OjtbLWEtekEtWlxcXFxkXFxcXC8jJi46PT8lQH5fXSopKik/XFxcXHUwMDA3KVwiLCBcIig/Oig/OlxcXFxkezEsNH0oPzo7XFxcXGR7MCw0fSkqKT9bXFxcXGRBLVBSLVRaY2YtbnEtdXk9Pjx+XSkpXCJdLmpvaW4oXCJ8XCIpLCBcImdcIik7XG5cbi8qKlxuICpcbiAqIFN0cmlwIFtBTlNJIGVzY2FwZSBjb2Rlc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSkgZnJvbSBhIHN0cmluZy5cbiAqIEFkYXB0ZWQgZnJvbSBjb2RlIG9yaWdpbmFsbHkgcmVsZWFzZWQgYnkgU2luZHJlIFNvcmh1c1xuICogTGljZW5zZWQgdGhlIE1JVCBMaWNlbnNlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG52YXIgc3RyaXBBbnNpID0gZnVuY3Rpb24gc3RyaXBBbnNpKHN0cmluZykge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBhIGBzdHJpbmdgLCBnb3QgYFwiLmNvbmNhdChfdHlwZW9mKHN0cmluZyksIFwiYFwiKSk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGFuc2lSZWdleCwgXCJcIik7XG59O1xudmFyIG9uU29ja2V0TWVzc2FnZSA9IHtcbiAgaG90OiBmdW5jdGlvbiBob3QoKSB7XG4gICAgaWYgKHBhcnNlZFJlc291cmNlUXVlcnkuaG90ID09PSBcImZhbHNlXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3B0aW9ucy5ob3QgPSB0cnVlO1xuICB9LFxuICBsaXZlUmVsb2FkOiBmdW5jdGlvbiBsaXZlUmVsb2FkKCkge1xuICAgIGlmIChwYXJzZWRSZXNvdXJjZVF1ZXJ5W1wibGl2ZS1yZWxvYWRcIl0gPT09IFwiZmFsc2VcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zLmxpdmVSZWxvYWQgPSB0cnVlO1xuICB9LFxuICBpbnZhbGlkOiBmdW5jdGlvbiBpbnZhbGlkKCkge1xuICAgIGxvZy5pbmZvKFwiQXBwIHVwZGF0ZWQuIFJlY29tcGlsaW5nLi4uXCIpO1xuXG4gICAgLy8gRml4ZXMgIzEwNDIuIG92ZXJsYXkgZG9lc24ndCBjbGVhciBpZiBlcnJvcnMgYXJlIGZpeGVkIGJ1dCB3YXJuaW5ncyByZW1haW4uXG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5zZW5kKHtcbiAgICAgICAgdHlwZTogXCJESVNNSVNTXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShcIkludmFsaWRcIik7XG4gIH0sXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGFzaFxuICAgKi9cbiAgaGFzaDogZnVuY3Rpb24gaGFzaChfaGFzaCkge1xuICAgIHN0YXR1cy5wcmV2aW91c0hhc2ggPSBzdGF0dXMuY3VycmVudEhhc2g7XG4gICAgc3RhdHVzLmN1cnJlbnRIYXNoID0gX2hhc2g7XG4gIH0sXG4gIGxvZ2dpbmc6IHNldEFsbExvZ0xldmVsLFxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgb3ZlcmxheTogZnVuY3Rpb24gb3ZlcmxheSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3B0aW9ucy5vdmVybGF5ID0gdmFsdWU7XG4gICAgZGVjb2RlT3ZlcmxheU9wdGlvbnMob3B0aW9ucy5vdmVybGF5KTtcbiAgfSxcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgKi9cbiAgcmVjb25uZWN0OiBmdW5jdGlvbiByZWNvbm5lY3QodmFsdWUpIHtcbiAgICBpZiAocGFyc2VkUmVzb3VyY2VRdWVyeS5yZWNvbm5lY3QgPT09IFwiZmFsc2VcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zLnJlY29ubmVjdCA9IHZhbHVlO1xuICB9LFxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIHByb2dyZXNzKHZhbHVlKSB7XG4gICAgb3B0aW9ucy5wcm9ncmVzcyA9IHZhbHVlO1xuICB9LFxuICAvKipcbiAgICogQHBhcmFtIHt7IHBsdWdpbk5hbWU/OiBzdHJpbmcsIHBlcmNlbnQ6IG51bWJlciwgbXNnOiBzdHJpbmcgfX0gZGF0YVxuICAgKi9cbiAgXCJwcm9ncmVzcy11cGRhdGVcIjogZnVuY3Rpb24gcHJvZ3Jlc3NVcGRhdGUoZGF0YSkge1xuICAgIGlmIChvcHRpb25zLnByb2dyZXNzKSB7XG4gICAgICBsb2cuaW5mbyhcIlwiLmNvbmNhdChkYXRhLnBsdWdpbk5hbWUgPyBcIltcIi5jb25jYXQoZGF0YS5wbHVnaW5OYW1lLCBcIl0gXCIpIDogXCJcIikuY29uY2F0KGRhdGEucGVyY2VudCwgXCIlIC0gXCIpLmNvbmNhdChkYXRhLm1zZywgXCIuXCIpKTtcbiAgICB9XG4gICAgaWYgKGlzUHJvZ3Jlc3NTdXBwb3J0ZWQoKSkge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnByb2dyZXNzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHZhciBwcm9ncmVzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ3ZHMtcHJvZ3Jlc3NcIik7XG4gICAgICAgIGlmICghcHJvZ3Jlc3MpIHtcbiAgICAgICAgICBkZWZpbmVQcm9ncmVzc0VsZW1lbnQoKTtcbiAgICAgICAgICBwcm9ncmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ3ZHMtcHJvZ3Jlc3NcIik7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcm9ncmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvZ3Jlc3Muc2V0QXR0cmlidXRlKFwicHJvZ3Jlc3NcIiwgZGF0YS5wZXJjZW50KTtcbiAgICAgICAgcHJvZ3Jlc3Muc2V0QXR0cmlidXRlKFwidHlwZVwiLCBvcHRpb25zLnByb2dyZXNzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2VuZE1lc3NhZ2UoXCJQcm9ncmVzc1wiLCBkYXRhKTtcbiAgfSxcbiAgXCJzdGlsbC1va1wiOiBmdW5jdGlvbiBzdGlsbE9rKCkge1xuICAgIGxvZy5pbmZvKFwiTm90aGluZyBjaGFuZ2VkLlwiKTtcbiAgICBpZiAob3B0aW9ucy5vdmVybGF5KSB7XG4gICAgICBvdmVybGF5LnNlbmQoe1xuICAgICAgICB0eXBlOiBcIkRJU01JU1NcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRNZXNzYWdlKFwiU3RpbGxPa1wiKTtcbiAgfSxcbiAgb2s6IGZ1bmN0aW9uIG9rKCkge1xuICAgIHNlbmRNZXNzYWdlKFwiT2tcIik7XG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5zZW5kKHtcbiAgICAgICAgdHlwZTogXCJESVNNSVNTXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZWxvYWRBcHAob3B0aW9ucywgc3RhdHVzKTtcbiAgfSxcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlXG4gICAqL1xuICBcInN0YXRpYy1jaGFuZ2VkXCI6IGZ1bmN0aW9uIHN0YXRpY0NoYW5nZWQoZmlsZSkge1xuICAgIGxvZy5pbmZvKFwiXCIuY29uY2F0KGZpbGUgPyBcIlxcXCJcIi5jb25jYXQoZmlsZSwgXCJcXFwiXCIpIDogXCJDb250ZW50XCIsIFwiIGZyb20gc3RhdGljIGRpcmVjdG9yeSB3YXMgY2hhbmdlZC4gUmVsb2FkaW5nLi4uXCIpKTtcbiAgICBzZWxmLmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9LFxuICAvKipcbiAgICogQHBhcmFtIHtFcnJvcltdfSB3YXJuaW5nc1xuICAgKiBAcGFyYW0ge2FueX0gcGFyYW1zXG4gICAqL1xuICB3YXJuaW5nczogZnVuY3Rpb24gd2FybmluZ3MoX3dhcm5pbmdzLCBwYXJhbXMpIHtcbiAgICBsb2cud2FybihcIldhcm5pbmdzIHdoaWxlIGNvbXBpbGluZy5cIik7XG4gICAgdmFyIHByaW50YWJsZVdhcm5pbmdzID0gX3dhcm5pbmdzLm1hcChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHZhciBfZm9ybWF0UHJvYmxlbSA9IGZvcm1hdFByb2JsZW0oXCJ3YXJuaW5nXCIsIGVycm9yKSxcbiAgICAgICAgaGVhZGVyID0gX2Zvcm1hdFByb2JsZW0uaGVhZGVyLFxuICAgICAgICBib2R5ID0gX2Zvcm1hdFByb2JsZW0uYm9keTtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChoZWFkZXIsIFwiXFxuXCIpLmNvbmNhdChzdHJpcEFuc2koYm9keSkpO1xuICAgIH0pO1xuICAgIHNlbmRNZXNzYWdlKFwiV2FybmluZ3NcIiwgcHJpbnRhYmxlV2FybmluZ3MpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJpbnRhYmxlV2FybmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvZy53YXJuKHByaW50YWJsZVdhcm5pbmdzW2ldKTtcbiAgICB9XG4gICAgdmFyIG92ZXJsYXlXYXJuaW5nc1NldHRpbmcgPSB0eXBlb2Ygb3B0aW9ucy5vdmVybGF5ID09PSBcImJvb2xlYW5cIiA/IG9wdGlvbnMub3ZlcmxheSA6IG9wdGlvbnMub3ZlcmxheSAmJiBvcHRpb25zLm92ZXJsYXkud2FybmluZ3M7XG4gICAgaWYgKG92ZXJsYXlXYXJuaW5nc1NldHRpbmcpIHtcbiAgICAgIHZhciB3YXJuaW5nc1RvRGlzcGxheSA9IHR5cGVvZiBvdmVybGF5V2FybmluZ3NTZXR0aW5nID09PSBcImZ1bmN0aW9uXCIgPyBfd2FybmluZ3MuZmlsdGVyKG92ZXJsYXlXYXJuaW5nc1NldHRpbmcpIDogX3dhcm5pbmdzO1xuICAgICAgaWYgKHdhcm5pbmdzVG9EaXNwbGF5Lmxlbmd0aCkge1xuICAgICAgICBvdmVybGF5LnNlbmQoe1xuICAgICAgICAgIHR5cGU6IFwiQlVJTERfRVJST1JcIixcbiAgICAgICAgICBsZXZlbDogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgbWVzc2FnZXM6IF93YXJuaW5nc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucHJldmVudFJlbG9hZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWxvYWRBcHAob3B0aW9ucywgc3RhdHVzKTtcbiAgfSxcbiAgLyoqXG4gICAqIEBwYXJhbSB7RXJyb3JbXX0gZXJyb3JzXG4gICAqL1xuICBlcnJvcnM6IGZ1bmN0aW9uIGVycm9ycyhfZXJyb3JzKSB7XG4gICAgbG9nLmVycm9yKFwiRXJyb3JzIHdoaWxlIGNvbXBpbGluZy4gUmVsb2FkIHByZXZlbnRlZC5cIik7XG4gICAgdmFyIHByaW50YWJsZUVycm9ycyA9IF9lcnJvcnMubWFwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgdmFyIF9mb3JtYXRQcm9ibGVtMiA9IGZvcm1hdFByb2JsZW0oXCJlcnJvclwiLCBlcnJvciksXG4gICAgICAgIGhlYWRlciA9IF9mb3JtYXRQcm9ibGVtMi5oZWFkZXIsXG4gICAgICAgIGJvZHkgPSBfZm9ybWF0UHJvYmxlbTIuYm9keTtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChoZWFkZXIsIFwiXFxuXCIpLmNvbmNhdChzdHJpcEFuc2koYm9keSkpO1xuICAgIH0pO1xuICAgIHNlbmRNZXNzYWdlKFwiRXJyb3JzXCIsIHByaW50YWJsZUVycm9ycyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmludGFibGVFcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvZy5lcnJvcihwcmludGFibGVFcnJvcnNbaV0pO1xuICAgIH1cbiAgICB2YXIgb3ZlcmxheUVycm9yc1NldHRpbmdzID0gdHlwZW9mIG9wdGlvbnMub3ZlcmxheSA9PT0gXCJib29sZWFuXCIgPyBvcHRpb25zLm92ZXJsYXkgOiBvcHRpb25zLm92ZXJsYXkgJiYgb3B0aW9ucy5vdmVybGF5LmVycm9ycztcbiAgICBpZiAob3ZlcmxheUVycm9yc1NldHRpbmdzKSB7XG4gICAgICB2YXIgZXJyb3JzVG9EaXNwbGF5ID0gdHlwZW9mIG92ZXJsYXlFcnJvcnNTZXR0aW5ncyA9PT0gXCJmdW5jdGlvblwiID8gX2Vycm9ycy5maWx0ZXIob3ZlcmxheUVycm9yc1NldHRpbmdzKSA6IF9lcnJvcnM7XG4gICAgICBpZiAoZXJyb3JzVG9EaXNwbGF5Lmxlbmd0aCkge1xuICAgICAgICBvdmVybGF5LnNlbmQoe1xuICAgICAgICAgIHR5cGU6IFwiQlVJTERfRVJST1JcIixcbiAgICAgICAgICBsZXZlbDogXCJlcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2VzOiBfZXJyb3JzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yXG4gICAqL1xuICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yKSB7XG4gICAgbG9nLmVycm9yKF9lcnJvcik7XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICBsb2cuaW5mbyhcIkRpc2Nvbm5lY3RlZCFcIik7XG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5zZW5kKHtcbiAgICAgICAgdHlwZTogXCJESVNNSVNTXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShcIkNsb3NlXCIpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7eyBwcm90b2NvbD86IHN0cmluZywgYXV0aD86IHN0cmluZywgaG9zdG5hbWU/OiBzdHJpbmcsIHBvcnQ/OiBzdHJpbmcsIHBhdGhuYW1lPzogc3RyaW5nLCBzZWFyY2g/OiBzdHJpbmcsIGhhc2g/OiBzdHJpbmcsIHNsYXNoZXM/OiBib29sZWFuIH19IG9ialVSTFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xudmFyIGZvcm1hdFVSTCA9IGZ1bmN0aW9uIGZvcm1hdFVSTChvYmpVUkwpIHtcbiAgdmFyIHByb3RvY29sID0gb2JqVVJMLnByb3RvY29sIHx8IFwiXCI7XG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSBcIjpcIikge1xuICAgIHByb3RvY29sICs9IFwiOlwiO1xuICB9XG4gIHZhciBhdXRoID0gb2JqVVJMLmF1dGggfHwgXCJcIjtcbiAgaWYgKGF1dGgpIHtcbiAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIGF1dGggPSBhdXRoLnJlcGxhY2UoLyUzQS9pLCBcIjpcIik7XG4gICAgYXV0aCArPSBcIkBcIjtcbiAgfVxuICB2YXIgaG9zdCA9IFwiXCI7XG4gIGlmIChvYmpVUkwuaG9zdG5hbWUpIHtcbiAgICBob3N0ID0gYXV0aCArIChvYmpVUkwuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikgPT09IC0xID8gb2JqVVJMLmhvc3RuYW1lIDogXCJbXCIuY29uY2F0KG9ialVSTC5ob3N0bmFtZSwgXCJdXCIpKTtcbiAgICBpZiAob2JqVVJMLnBvcnQpIHtcbiAgICAgIGhvc3QgKz0gXCI6XCIuY29uY2F0KG9ialVSTC5wb3J0KTtcbiAgICB9XG4gIH1cbiAgdmFyIHBhdGhuYW1lID0gb2JqVVJMLnBhdGhuYW1lIHx8IFwiXCI7XG4gIGlmIChvYmpVUkwuc2xhc2hlcykge1xuICAgIGhvc3QgPSBcIi8vXCIuY29uY2F0KGhvc3QgfHwgXCJcIik7XG4gICAgaWYgKHBhdGhuYW1lICYmIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gXCIvXCIpIHtcbiAgICAgIHBhdGhuYW1lID0gXCIvXCIuY29uY2F0KHBhdGhuYW1lKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIWhvc3QpIHtcbiAgICBob3N0ID0gXCJcIjtcbiAgfVxuICB2YXIgc2VhcmNoID0gb2JqVVJMLnNlYXJjaCB8fCBcIlwiO1xuICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09IFwiP1wiKSB7XG4gICAgc2VhcmNoID0gXCI/XCIuY29uY2F0KHNlYXJjaCk7XG4gIH1cbiAgdmFyIGhhc2ggPSBvYmpVUkwuaGFzaCB8fCBcIlwiO1xuICBpZiAoaGFzaCAmJiBoYXNoLmNoYXJBdCgwKSAhPT0gXCIjXCIpIHtcbiAgICBoYXNoID0gXCIjXCIuY29uY2F0KGhhc2gpO1xuICB9XG4gIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLFxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG1hdGNoKTtcbiAgfSk7XG4gIHNlYXJjaCA9IHNlYXJjaC5yZXBsYWNlKFwiI1wiLCBcIiUyM1wiKTtcbiAgcmV0dXJuIFwiXCIuY29uY2F0KHByb3RvY29sKS5jb25jYXQoaG9zdCkuY29uY2F0KHBhdGhuYW1lKS5jb25jYXQoc2VhcmNoKS5jb25jYXQoaGFzaCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7VVJMICYgeyBmcm9tQ3VycmVudFNjcmlwdD86IGJvb2xlYW4gfX0gcGFyc2VkVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG52YXIgY3JlYXRlU29ja2V0VVJMID0gZnVuY3Rpb24gY3JlYXRlU29ja2V0VVJMKHBhcnNlZFVSTCkge1xuICB2YXIgaG9zdG5hbWUgPSBwYXJzZWRVUkwuaG9zdG5hbWU7XG5cbiAgLy8gTm9kZS5qcyBtb2R1bGUgcGFyc2VzIGl0IGFzIGA6OmBcbiAgLy8gYG5ldyBVUkwodXJsU3RyaW5nLCBbYmFzZVVSTFN0cmluZ10pYCBwYXJzZXMgaXQgYXMgJ1s6Ol0nXG4gIHZhciBpc0luQWRkckFueSA9IGhvc3RuYW1lID09PSBcIjAuMC4wLjBcIiB8fCBob3N0bmFtZSA9PT0gXCI6OlwiIHx8IGhvc3RuYW1lID09PSBcIls6Ol1cIjtcblxuICAvLyB3aHkgZG8gd2UgbmVlZCB0aGlzIGNoZWNrP1xuICAvLyBob3N0bmFtZSBuL2EgZm9yIGZpbGUgcHJvdG9jb2wgKGV4YW1wbGUsIHdoZW4gdXNpbmcgZWxlY3Ryb24sIGlvbmljKVxuICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3dlYnBhY2stZGV2LXNlcnZlci9wdWxsLzM4NFxuICBpZiAoaXNJbkFkZHJBbnkgJiYgc2VsZi5sb2NhdGlvbi5ob3N0bmFtZSAmJiBzZWxmLmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoXCJodHRwXCIpID09PSAwKSB7XG4gICAgaG9zdG5hbWUgPSBzZWxmLmxvY2F0aW9uLmhvc3RuYW1lO1xuICB9XG4gIHZhciBzb2NrZXRVUkxQcm90b2NvbCA9IHBhcnNlZFVSTC5wcm90b2NvbCB8fCBzZWxmLmxvY2F0aW9uLnByb3RvY29sO1xuXG4gIC8vIFdoZW4gaHR0cHMgaXMgdXNlZCBpbiB0aGUgYXBwLCBzZWN1cmUgd2ViIHNvY2tldHMgYXJlIGFsd2F5cyBuZWNlc3NhcnkgYmVjYXVzZSB0aGUgYnJvd3NlciBkb2Vzbid0IGFjY2VwdCBub24tc2VjdXJlIHdlYiBzb2NrZXRzLlxuICBpZiAoc29ja2V0VVJMUHJvdG9jb2wgPT09IFwiYXV0bzpcIiB8fCBob3N0bmFtZSAmJiBpc0luQWRkckFueSAmJiBzZWxmLmxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiKSB7XG4gICAgc29ja2V0VVJMUHJvdG9jb2wgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sO1xuICB9XG4gIHNvY2tldFVSTFByb3RvY29sID0gc29ja2V0VVJMUHJvdG9jb2wucmVwbGFjZSgvXig/Omh0dHB8ListZXh0ZW5zaW9ufGZpbGUpL2ksIFwid3NcIik7XG4gIHZhciBzb2NrZXRVUkxBdXRoID0gXCJcIjtcblxuICAvLyBgbmV3IFVSTCh1cmxTdHJpbmcsIFtiYXNlVVJMc3RyaW5nXSlgIGRvZXNuJ3QgaGF2ZSBgYXV0aGAgcHJvcGVydHlcbiAgLy8gUGFyc2UgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgaW4gY2FzZSB3ZSBuZWVkIHRoZW1cbiAgaWYgKHBhcnNlZFVSTC51c2VybmFtZSkge1xuICAgIHNvY2tldFVSTEF1dGggPSBwYXJzZWRVUkwudXNlcm5hbWU7XG5cbiAgICAvLyBTaW5jZSBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uIGRvZXMgbm90IGFsbG93IGVtcHR5IHVzZXJuYW1lLFxuICAgIC8vIHdlIG9ubHkgaW5jbHVkZSBwYXNzd29yZCBpZiB0aGUgdXNlcm5hbWUgaXMgbm90IGVtcHR5LlxuICAgIGlmIChwYXJzZWRVUkwucGFzc3dvcmQpIHtcbiAgICAgIC8vIFJlc3VsdDogPHVzZXJuYW1lPjo8cGFzc3dvcmQ+XG4gICAgICBzb2NrZXRVUkxBdXRoID0gc29ja2V0VVJMQXV0aC5jb25jYXQoXCI6XCIsIHBhcnNlZFVSTC5wYXNzd29yZCk7XG4gICAgfVxuICB9XG5cbiAgLy8gSW4gY2FzZSB0aGUgaG9zdCBpcyBhIHJhdyBJUHY2IGFkZHJlc3MsIGl0IGNhbiBiZSBlbmNsb3NlZCBpblxuICAvLyB0aGUgYnJhY2tldHMgYXMgdGhlIGJyYWNrZXRzIGFyZSBuZWVkZWQgaW4gdGhlIGZpbmFsIFVSTCBzdHJpbmcuXG4gIC8vIE5lZWQgdG8gcmVtb3ZlIHRob3NlIGFzIHVybC5mb3JtYXQgYmxpbmRseSBhZGRzIGl0cyBvd24gc2V0IG9mIGJyYWNrZXRzXG4gIC8vIGlmIHRoZSBob3N0IHN0cmluZyBjb250YWlucyBjb2xvbnMuIFRoYXQgd291bGQgbGVhZCB0byBub24td29ya2luZ1xuICAvLyBkb3VibGUgYnJhY2tldHMgKGUuZy4gW1s6Ol1dKSBob3N0XG4gIC8vXG4gIC8vIEFsbCBvZiB0aGVzZSB3ZWIgc29ja2V0IHVybCBwYXJhbXMgYXJlIG9wdGlvbmFsbHkgcGFzc2VkIGluIHRocm91Z2ggcmVzb3VyY2VRdWVyeSxcbiAgLy8gc28gd2UgbmVlZCB0byBmYWxsIGJhY2sgdG8gdGhlIGRlZmF1bHQgaWYgdGhleSBhcmUgbm90IHByb3ZpZGVkXG4gIHZhciBzb2NrZXRVUkxIb3N0bmFtZSA9IChob3N0bmFtZSB8fCBzZWxmLmxvY2F0aW9uLmhvc3RuYW1lIHx8IFwibG9jYWxob3N0XCIpLnJlcGxhY2UoL15cXFsoLiopXFxdJC8sIFwiJDFcIik7XG4gIHZhciBzb2NrZXRVUkxQb3J0ID0gcGFyc2VkVVJMLnBvcnQ7XG4gIGlmICghc29ja2V0VVJMUG9ydCB8fCBzb2NrZXRVUkxQb3J0ID09PSBcIjBcIikge1xuICAgIHNvY2tldFVSTFBvcnQgPSBzZWxmLmxvY2F0aW9uLnBvcnQ7XG4gIH1cblxuICAvLyBJZiBwYXRoIGlzIHByb3ZpZGVkIGl0J2xsIGJlIHBhc3NlZCBpbiB2aWEgdGhlIHJlc291cmNlUXVlcnkgYXMgYVxuICAvLyBxdWVyeSBwYXJhbSBzbyBpdCBoYXMgdG8gYmUgcGFyc2VkIG91dCBvZiB0aGUgcXVlcnlzdHJpbmcgaW4gb3JkZXIgZm9yIHRoZVxuICAvLyBjbGllbnQgdG8gb3BlbiB0aGUgc29ja2V0IHRvIHRoZSBjb3JyZWN0IGxvY2F0aW9uLlxuICB2YXIgc29ja2V0VVJMUGF0aG5hbWUgPSBcIi93c1wiO1xuICBpZiAocGFyc2VkVVJMLnBhdGhuYW1lICYmICFwYXJzZWRVUkwuZnJvbUN1cnJlbnRTY3JpcHQpIHtcbiAgICBzb2NrZXRVUkxQYXRobmFtZSA9IHBhcnNlZFVSTC5wYXRobmFtZTtcbiAgfVxuICByZXR1cm4gZm9ybWF0VVJMKHtcbiAgICBwcm90b2NvbDogc29ja2V0VVJMUHJvdG9jb2wsXG4gICAgYXV0aDogc29ja2V0VVJMQXV0aCxcbiAgICBob3N0bmFtZTogc29ja2V0VVJMSG9zdG5hbWUsXG4gICAgcG9ydDogc29ja2V0VVJMUG9ydCxcbiAgICBwYXRobmFtZTogc29ja2V0VVJMUGF0aG5hbWUsXG4gICAgc2xhc2hlczogdHJ1ZVxuICB9KTtcbn07XG52YXIgc29ja2V0VVJMID0gY3JlYXRlU29ja2V0VVJMKHBhcnNlZFJlc291cmNlUXVlcnkpO1xuc29ja2V0KHNvY2tldFVSTCwgb25Tb2NrZXRNZXNzYWdlLCBvcHRpb25zLnJlY29ubmVjdCk7XG5leHBvcnQgeyBnZXRDdXJyZW50U2NyaXB0U291cmNlLCBwYXJzZVVSTCwgY3JlYXRlU29ja2V0VVJMIH07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/index.js?protocol=ws%3A&hostname=0.0.0.0&port=3000&pathname=%2Fws&logging=info&overlay=true&reconnect=10&hot=only&live-reload=true\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/modules/logger/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/modules/logger/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("/******/ (function() { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./client-src/modules/logger/tapable.js\":\n/*!**********************************************!*\\\n  !*** ./client-src/modules/logger/tapable.js ***!\n  \\**********************************************/\n/***/ (function(__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_372__) {\n\n__nested_webpack_require_372__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_372__.d(__nested_webpack_exports__, {\n/* harmony export */   SyncBailHook: function() { return /* binding */ SyncBailHook; }\n/* harmony export */ });\nfunction SyncBailHook() {\n  return {\n    call: function call() {}\n  };\n}\n\n/**\n * Client stub for tapable SyncBailHook\n */\n// eslint-disable-next-line import/prefer-default-export\n\n\n/***/ }),\n\n/***/ \"./node_modules/webpack/lib/logging/Logger.js\":\n/*!****************************************************!*\\\n  !*** ./node_modules/webpack/lib/logging/Logger.js ***!\n  \\****************************************************/\n/***/ (function(module) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && \"symbol\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && o.constructor === (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && o !== (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && null != r[(typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[(typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nvar LogType = Object.freeze({\n  error: (/** @type {\"error\"} */\"error\"),\n  // message, c style arguments\n  warn: (/** @type {\"warn\"} */\"warn\"),\n  // message, c style arguments\n  info: (/** @type {\"info\"} */\"info\"),\n  // message, c style arguments\n  log: (/** @type {\"log\"} */\"log\"),\n  // message, c style arguments\n  debug: (/** @type {\"debug\"} */\"debug\"),\n  // message, c style arguments\n\n  trace: (/** @type {\"trace\"} */\"trace\"),\n  // no arguments\n\n  group: (/** @type {\"group\"} */\"group\"),\n  // [label]\n  groupCollapsed: (/** @type {\"groupCollapsed\"} */\"groupCollapsed\"),\n  // [label]\n  groupEnd: (/** @type {\"groupEnd\"} */\"groupEnd\"),\n  // [label]\n\n  profile: (/** @type {\"profile\"} */\"profile\"),\n  // [profileName]\n  profileEnd: (/** @type {\"profileEnd\"} */\"profileEnd\"),\n  // [profileName]\n\n  time: (/** @type {\"time\"} */\"time\"),\n  // name, time as [seconds, nanoseconds]\n\n  clear: (/** @type {\"clear\"} */\"clear\"),\n  // no arguments\n  status: (/** @type {\"status\"} */\"status\") // message, arguments\n});\nmodule.exports.LogType = LogType;\n\n/** @typedef {typeof LogType[keyof typeof LogType]} LogTypeEnum */\n\nvar LOG_SYMBOL = (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; })(\"webpack logger raw log method\");\nvar TIMERS_SYMBOL = (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; })(\"webpack logger times\");\nvar TIMERS_AGGREGATES_SYMBOL = (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; })(\"webpack logger aggregated times\");\nvar WebpackLogger = /*#__PURE__*/function () {\n  /**\n   * @param {function(LogTypeEnum, EXPECTED_ANY[]=): void} log log function\n   * @param {function(string | function(): string): WebpackLogger} getChildLogger function to create child logger\n   */\n  function WebpackLogger(log, getChildLogger) {\n    _classCallCheck(this, WebpackLogger);\n    this[LOG_SYMBOL] = log;\n    this.getChildLogger = getChildLogger;\n  }\n\n  /**\n   * @param {...EXPECTED_ANY} args args\n   */\n  return _createClass(WebpackLogger, [{\n    key: \"error\",\n    value: function error() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      this[LOG_SYMBOL](LogType.error, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      this[LOG_SYMBOL](LogType.warn, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"info\",\n    value: function info() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      this[LOG_SYMBOL](LogType.info, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      this[LOG_SYMBOL](LogType.log, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"debug\",\n    value: function debug() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      this[LOG_SYMBOL](LogType.debug, args);\n    }\n\n    /**\n     * @param {EXPECTED_ANY} assertion assertion\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"assert\",\n    value: function assert(assertion) {\n      if (!assertion) {\n        for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n          args[_key6 - 1] = arguments[_key6];\n        }\n        this[LOG_SYMBOL](LogType.error, args);\n      }\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      this[LOG_SYMBOL](LogType.trace, [\"Trace\"]);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this[LOG_SYMBOL](LogType.clear);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"status\",\n    value: function status() {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n      this[LOG_SYMBOL](LogType.status, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"group\",\n    value: function group() {\n      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        args[_key8] = arguments[_key8];\n      }\n      this[LOG_SYMBOL](LogType.group, args);\n    }\n\n    /**\n     * @param {...EXPECTED_ANY} args args\n     */\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed() {\n      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        args[_key9] = arguments[_key9];\n      }\n      this[LOG_SYMBOL](LogType.groupCollapsed, args);\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd() {\n      this[LOG_SYMBOL](LogType.groupEnd);\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"profile\",\n    value: function profile(label) {\n      this[LOG_SYMBOL](LogType.profile, [label]);\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"profileEnd\",\n    value: function profileEnd(label) {\n      this[LOG_SYMBOL](LogType.profileEnd, [label]);\n    }\n\n    /**\n     * @param {string} label label\n     */\n  }, {\n    key: \"time\",\n    value: function time(label) {\n      /** @type {Map<string | undefined, [number, number]>} */\n      this[TIMERS_SYMBOL] = this[TIMERS_SYMBOL] || new Map();\n      this[TIMERS_SYMBOL].set(label, process.hrtime());\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"timeLog\",\n    value: function timeLog(label) {\n      var prev = this[TIMERS_SYMBOL] && this[TIMERS_SYMBOL].get(label);\n      if (!prev) {\n        throw new Error(\"No such label '\".concat(label, \"' for WebpackLogger.timeLog()\"));\n      }\n      var time = process.hrtime(prev);\n      this[LOG_SYMBOL](LogType.time, [label].concat(_toConsumableArray(time)));\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd(label) {\n      var prev = this[TIMERS_SYMBOL] && this[TIMERS_SYMBOL].get(label);\n      if (!prev) {\n        throw new Error(\"No such label '\".concat(label, \"' for WebpackLogger.timeEnd()\"));\n      }\n      var time = process.hrtime(prev);\n      /** @type {Map<string | undefined, [number, number]>} */\n      this[TIMERS_SYMBOL].delete(label);\n      this[LOG_SYMBOL](LogType.time, [label].concat(_toConsumableArray(time)));\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"timeAggregate\",\n    value: function timeAggregate(label) {\n      var prev = this[TIMERS_SYMBOL] && this[TIMERS_SYMBOL].get(label);\n      if (!prev) {\n        throw new Error(\"No such label '\".concat(label, \"' for WebpackLogger.timeAggregate()\"));\n      }\n      var time = process.hrtime(prev);\n      /** @type {Map<string | undefined, [number, number]>} */\n      this[TIMERS_SYMBOL].delete(label);\n      /** @type {Map<string | undefined, [number, number]>} */\n      this[TIMERS_AGGREGATES_SYMBOL] = this[TIMERS_AGGREGATES_SYMBOL] || new Map();\n      var current = this[TIMERS_AGGREGATES_SYMBOL].get(label);\n      if (current !== undefined) {\n        if (time[1] + current[1] > 1e9) {\n          time[0] += current[0] + 1;\n          time[1] = time[1] - 1e9 + current[1];\n        } else {\n          time[0] += current[0];\n          time[1] += current[1];\n        }\n      }\n      this[TIMERS_AGGREGATES_SYMBOL].set(label, time);\n    }\n\n    /**\n     * @param {string=} label label\n     */\n  }, {\n    key: \"timeAggregateEnd\",\n    value: function timeAggregateEnd(label) {\n      if (this[TIMERS_AGGREGATES_SYMBOL] === undefined) return;\n      var time = this[TIMERS_AGGREGATES_SYMBOL].get(label);\n      if (time === undefined) return;\n      this[TIMERS_AGGREGATES_SYMBOL].delete(label);\n      this[LOG_SYMBOL](LogType.time, [label].concat(_toConsumableArray(time)));\n    }\n  }]);\n}();\nmodule.exports.Logger = WebpackLogger;\n\n/***/ }),\n\n/***/ \"./node_modules/webpack/lib/logging/createConsoleLogger.js\":\n/*!*****************************************************************!*\\\n  !*** ./node_modules/webpack/lib/logging/createConsoleLogger.js ***!\n  \\*****************************************************************/\n/***/ (function(module, __unused_webpack_exports, __nested_webpack_require_12801__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\n\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && r[(typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && null != r[(typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && \"symbol\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && o.constructor === (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }) && o !== (typeof Symbol !== \"undefined\" ? Symbol : function (i) { return i; }).prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nvar _require = __nested_webpack_require_12801__(/*! ./Logger */ \"./node_modules/webpack/lib/logging/Logger.js\"),\n  LogType = _require.LogType;\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").FilterItemTypes} FilterItemTypes */\n/** @typedef {import(\"../../declarations/WebpackOptions\").FilterTypes} FilterTypes */\n/** @typedef {import(\"./Logger\").LogTypeEnum} LogTypeEnum */\n\n/** @typedef {function(string): boolean} FilterFunction */\n/** @typedef {function(string, LogTypeEnum, EXPECTED_ANY[]=): void} LoggingFunction */\n\n/**\n * @typedef {object} LoggerConsole\n * @property {function(): void} clear\n * @property {function(): void} trace\n * @property {(...args: EXPECTED_ANY[]) => void} info\n * @property {(...args: EXPECTED_ANY[]) => void} log\n * @property {(...args: EXPECTED_ANY[]) => void} warn\n * @property {(...args: EXPECTED_ANY[]) => void} error\n * @property {(...args: EXPECTED_ANY[]) => void=} debug\n * @property {(...args: EXPECTED_ANY[]) => void=} group\n * @property {(...args: EXPECTED_ANY[]) => void=} groupCollapsed\n * @property {(...args: EXPECTED_ANY[]) => void=} groupEnd\n * @property {(...args: EXPECTED_ANY[]) => void=} status\n * @property {(...args: EXPECTED_ANY[]) => void=} profile\n * @property {(...args: EXPECTED_ANY[]) => void=} profileEnd\n * @property {(...args: EXPECTED_ANY[]) => void=} logTime\n */\n\n/**\n * @typedef {object} LoggerOptions\n * @property {false|true|\"none\"|\"error\"|\"warn\"|\"info\"|\"log\"|\"verbose\"} level loglevel\n * @property {FilterTypes|boolean} debug filter for debug logging\n * @property {LoggerConsole} console the console to log to\n */\n\n/**\n * @param {FilterItemTypes} item an input item\n * @returns {FilterFunction | undefined} filter function\n */\nvar filterToFunction = function filterToFunction(item) {\n  if (typeof item === \"string\") {\n    var regExp = new RegExp(\"[\\\\\\\\/]\".concat(item.replace(/[-[\\]{}()*+?.\\\\^$|]/g, \"\\\\$&\"), \"([\\\\\\\\/]|$|!|\\\\?)\"));\n    return function (ident) {\n      return regExp.test(ident);\n    };\n  }\n  if (item && _typeof(item) === \"object\" && typeof item.test === \"function\") {\n    return function (ident) {\n      return item.test(ident);\n    };\n  }\n  if (typeof item === \"function\") {\n    return item;\n  }\n  if (typeof item === \"boolean\") {\n    return function () {\n      return item;\n    };\n  }\n};\n\n/**\n * @enum {number}\n */\nvar LogLevel = {\n  none: 6,\n  false: 6,\n  error: 5,\n  warn: 4,\n  info: 3,\n  log: 2,\n  true: 2,\n  verbose: 1\n};\n\n/**\n * @param {LoggerOptions} options options object\n * @returns {LoggingFunction} logging function\n */\nmodule.exports = function (_ref) {\n  var _ref$level = _ref.level,\n    level = _ref$level === void 0 ? \"info\" : _ref$level,\n    _ref$debug = _ref.debug,\n    debug = _ref$debug === void 0 ? false : _ref$debug,\n    console = _ref.console;\n  var debugFilters = /** @type {FilterFunction[]} */\n\n  typeof debug === \"boolean\" ? [function () {\n    return debug;\n  }] : /** @type {FilterItemTypes[]} */[].concat(debug).map(filterToFunction);\n  /** @type {number} */\n  var loglevel = LogLevel[\"\".concat(level)] || 0;\n\n  /**\n   * @param {string} name name of the logger\n   * @param {LogTypeEnum} type type of the log entry\n   * @param {EXPECTED_ANY[]=} args arguments of the log entry\n   * @returns {void}\n   */\n  var logger = function logger(name, type, args) {\n    var labeledArgs = function labeledArgs() {\n      if (Array.isArray(args)) {\n        if (args.length > 0 && typeof args[0] === \"string\") {\n          return [\"[\".concat(name, \"] \").concat(args[0])].concat(_toConsumableArray(args.slice(1)));\n        }\n        return [\"[\".concat(name, \"]\")].concat(_toConsumableArray(args));\n      }\n      return [];\n    };\n    var debug = debugFilters.some(function (f) {\n      return f(name);\n    });\n    switch (type) {\n      case LogType.debug:\n        if (!debug) return;\n        if (typeof console.debug === \"function\") {\n          console.debug.apply(console, _toConsumableArray(labeledArgs()));\n        } else {\n          console.log.apply(console, _toConsumableArray(labeledArgs()));\n        }\n        break;\n      case LogType.log:\n        if (!debug && loglevel > LogLevel.log) return;\n        console.log.apply(console, _toConsumableArray(labeledArgs()));\n        break;\n      case LogType.info:\n        if (!debug && loglevel > LogLevel.info) return;\n        console.info.apply(console, _toConsumableArray(labeledArgs()));\n        break;\n      case LogType.warn:\n        if (!debug && loglevel > LogLevel.warn) return;\n        console.warn.apply(console, _toConsumableArray(labeledArgs()));\n        break;\n      case LogType.error:\n        if (!debug && loglevel > LogLevel.error) return;\n        console.error.apply(console, _toConsumableArray(labeledArgs()));\n        break;\n      case LogType.trace:\n        if (!debug) return;\n        console.trace();\n        break;\n      case LogType.groupCollapsed:\n        if (!debug && loglevel > LogLevel.log) return;\n        if (!debug && loglevel > LogLevel.verbose) {\n          if (typeof console.groupCollapsed === \"function\") {\n            console.groupCollapsed.apply(console, _toConsumableArray(labeledArgs()));\n          } else {\n            console.log.apply(console, _toConsumableArray(labeledArgs()));\n          }\n          break;\n        }\n      // falls through\n      case LogType.group:\n        if (!debug && loglevel > LogLevel.log) return;\n        if (typeof console.group === \"function\") {\n          console.group.apply(console, _toConsumableArray(labeledArgs()));\n        } else {\n          console.log.apply(console, _toConsumableArray(labeledArgs()));\n        }\n        break;\n      case LogType.groupEnd:\n        if (!debug && loglevel > LogLevel.log) return;\n        if (typeof console.groupEnd === \"function\") {\n          console.groupEnd();\n        }\n        break;\n      case LogType.time:\n        {\n          if (!debug && loglevel > LogLevel.log) return;\n          var _args = _slicedToArray(/** @type {[string, number, number]} */\n            args, 3),\n            label = _args[0],\n            start = _args[1],\n            end = _args[2];\n          var ms = start * 1000 + end / 1000000;\n          var msg = \"[\".concat(name, \"] \").concat(label, \": \").concat(ms, \" ms\");\n          if (typeof console.logTime === \"function\") {\n            console.logTime(msg);\n          } else {\n            console.log(msg);\n          }\n          break;\n        }\n      case LogType.profile:\n        if (typeof console.profile === \"function\") {\n          console.profile.apply(console, _toConsumableArray(labeledArgs()));\n        }\n        break;\n      case LogType.profileEnd:\n        if (typeof console.profileEnd === \"function\") {\n          console.profileEnd.apply(console, _toConsumableArray(labeledArgs()));\n        }\n        break;\n      case LogType.clear:\n        if (!debug && loglevel > LogLevel.log) return;\n        if (typeof console.clear === \"function\") {\n          console.clear();\n        }\n        break;\n      case LogType.status:\n        if (!debug && loglevel > LogLevel.info) return;\n        if (typeof console.status === \"function\") {\n          if (!args || args.length === 0) {\n            console.status();\n          } else {\n            console.status.apply(console, _toConsumableArray(labeledArgs()));\n          }\n        } else if (args && args.length !== 0) {\n          console.info.apply(console, _toConsumableArray(labeledArgs()));\n        }\n        break;\n      default:\n        throw new Error(\"Unexpected LogType \".concat(type));\n    }\n  };\n  return logger;\n};\n\n/***/ }),\n\n/***/ \"./node_modules/webpack/lib/logging/runtime.js\":\n/*!*****************************************************!*\\\n  !*** ./node_modules/webpack/lib/logging/runtime.js ***!\n  \\*****************************************************/\n/***/ (function(module, __unused_webpack_exports, __nested_webpack_require_23799__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nvar _require = __nested_webpack_require_23799__(/*! tapable */ \"./client-src/modules/logger/tapable.js\"),\n  SyncBailHook = _require.SyncBailHook;\nvar _require2 = __nested_webpack_require_23799__(/*! ./Logger */ \"./node_modules/webpack/lib/logging/Logger.js\"),\n  Logger = _require2.Logger;\nvar createConsoleLogger = __nested_webpack_require_23799__(/*! ./createConsoleLogger */ \"./node_modules/webpack/lib/logging/createConsoleLogger.js\");\n\n/** @type {createConsoleLogger.LoggerOptions} */\nvar currentDefaultLoggerOptions = {\n  level: \"info\",\n  debug: false,\n  console: console\n};\nvar currentDefaultLogger = createConsoleLogger(currentDefaultLoggerOptions);\n\n/**\n * @param {string} name name of the logger\n * @returns {Logger} a logger\n */\nmodule.exports.getLogger = function (name) {\n  return new Logger(function (type, args) {\n    if (module.exports.hooks.log.call(name, type, args) === undefined) {\n      currentDefaultLogger(name, type, args);\n    }\n  }, function (childName) {\n    return module.exports.getLogger(\"\".concat(name, \"/\").concat(childName));\n  });\n};\n\n/**\n * @param {createConsoleLogger.LoggerOptions} options new options, merge with old options\n * @returns {void}\n */\nmodule.exports.configureDefaultLogger = function (options) {\n  _extends(currentDefaultLoggerOptions, options);\n  currentDefaultLogger = createConsoleLogger(currentDefaultLoggerOptions);\n};\nmodule.exports.hooks = {\n  log: new SyncBailHook([\"origin\", \"type\", \"args\"])\n};\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_25876__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_25876__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__nested_webpack_require_25876__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__nested_webpack_require_25876__.o(definition, key) && !__nested_webpack_require_25876__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__nested_webpack_require_25876__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t!function() {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__nested_webpack_require_25876__.r = function(exports) {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\nvar __nested_webpack_exports__ = {};\n// This entry needs to be wrapped in an IIFE because it needs to be isolated against other modules in the chunk.\n!function() {\n/*!********************************************!*\\\n  !*** ./client-src/modules/logger/index.js ***!\n  \\********************************************/\n__nested_webpack_require_25876__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_25876__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* reexport default export from named module */ webpack_lib_logging_runtime_js__WEBPACK_IMPORTED_MODULE_0__; }\n/* harmony export */ });\n/* harmony import */ var webpack_lib_logging_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_25876__(/*! webpack/lib/logging/runtime.js */ \"./node_modules/webpack/lib/logging/runtime.js\");\n\n}();\nvar __webpack_export_target__ = exports;\nfor(var __webpack_i__ in __nested_webpack_exports__) __webpack_export_target__[__webpack_i__] = __nested_webpack_exports__[__webpack_i__];\nif(__nested_webpack_exports__.__esModule) Object.defineProperty(__webpack_export_target__, \"__esModule\", { value: true });\n/******/ })()\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9tb2R1bGVzL2xvZ2dlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9tb2R1bGVzL2xvZ2dlci9pbmRleC5qcz9lMmE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbigpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHRcInVzZSBzdHJpY3RcIjtcbi8qKioqKiovIFx0dmFyIF9fd2VicGFja19tb2R1bGVzX18gPSAoe1xuXG4vKioqLyBcIi4vY2xpZW50LXNyYy9tb2R1bGVzL2xvZ2dlci90YXBhYmxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vY2xpZW50LXNyYy9tb2R1bGVzL2xvZ2dlci90YXBhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKGZ1bmN0aW9uKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFN5bmNCYWlsSG9vazogZnVuY3Rpb24oKSB7IHJldHVybiAvKiBiaW5kaW5nICovIFN5bmNCYWlsSG9vazsgfVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG5mdW5jdGlvbiBTeW5jQmFpbEhvb2soKSB7XG4gIHJldHVybiB7XG4gICAgY2FsbDogZnVuY3Rpb24gY2FsbCgpIHt9XG4gIH07XG59XG5cbi8qKlxuICogQ2xpZW50IHN0dWIgZm9yIHRhcGFibGUgU3luY0JhaWxIb29rXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9saWIvbG9nZ2luZy9Mb2dnZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvd2VicGFjay9saWIvbG9nZ2luZy9Mb2dnZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlKSB7XG5cbi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cblxuXG5mdW5jdGlvbiBfdHlwZW9mKG8pIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KSAmJiBcInN5bWJvbFwiID09IHR5cGVvZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KS5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pICYmIG8uY29uc3RydWN0b3IgPT09ICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pICYmIG8gIT09ICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheShyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkocikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIsIGEpIHtcbiAgaWYgKHIpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpO1xuICAgIHZhciB0ID0ge30udG9TdHJpbmcuY2FsbChyKS5zbGljZSg4LCAtMSk7XG4gICAgcmV0dXJuIFwiT2JqZWN0XCIgPT09IHQgJiYgci5jb25zdHJ1Y3RvciAmJiAodCA9IHIuY29uc3RydWN0b3IubmFtZSksIFwiTWFwXCIgPT09IHQgfHwgXCJTZXRcIiA9PT0gdCA/IEFycmF5LmZyb20ocikgOiBcIkFyZ3VtZW50c1wiID09PSB0IHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHQpID8gX2FycmF5TGlrZVRvQXJyYXkociwgYSkgOiB2b2lkIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkocikge1xuICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyBTeW1ib2wgOiBmdW5jdGlvbiAoaSkgeyByZXR1cm4gaTsgfSkgJiYgbnVsbCAhPSByWyh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pLml0ZXJhdG9yXSB8fCBudWxsICE9IHJbXCJAQGl0ZXJhdG9yXCJdKSByZXR1cm4gQXJyYXkuZnJvbShyKTtcbn1cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkocik7XG59XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSB7XG4gIChudWxsID09IGEgfHwgYSA+IHIubGVuZ3RoKSAmJiAoYSA9IHIubGVuZ3RoKTtcbiAgZm9yICh2YXIgZSA9IDAsIG4gPSBBcnJheShhKTsgZSA8IGE7IGUrKykgbltlXSA9IHJbZV07XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGEsIG4pIHtcbiAgaWYgKCEoYSBpbnN0YW5jZW9mIG4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikge1xuICBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHtcbiAgICB2YXIgbyA9IHJbdF07XG4gICAgby5lbnVtZXJhYmxlID0gby5lbnVtZXJhYmxlIHx8ICExLCBvLmNvbmZpZ3VyYWJsZSA9ICEwLCBcInZhbHVlXCIgaW4gbyAmJiAoby53cml0YWJsZSA9ICEwKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIF90b1Byb3BlcnR5S2V5KG8ua2V5KSwgbyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhlLCByLCB0KSB7XG4gIHJldHVybiByICYmIF9kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLCByKSwgdCAmJiBfZGVmaW5lUHJvcGVydGllcyhlLCB0KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogITFcbiAgfSksIGU7XG59XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7XG4gIHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpO1xuICByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiO1xufVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHtcbiAgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7XG4gIHZhciBlID0gdFsodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KS50b1ByaW1pdGl2ZV07XG4gIGlmICh2b2lkIDAgIT09IGUpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTtcbiAgICBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7XG4gIH1cbiAgcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTtcbn1cbnZhciBMb2dUeXBlID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGVycm9yOiAoLyoqIEB0eXBlIHtcImVycm9yXCJ9ICovXCJlcnJvclwiKSxcbiAgLy8gbWVzc2FnZSwgYyBzdHlsZSBhcmd1bWVudHNcbiAgd2FybjogKC8qKiBAdHlwZSB7XCJ3YXJuXCJ9ICovXCJ3YXJuXCIpLFxuICAvLyBtZXNzYWdlLCBjIHN0eWxlIGFyZ3VtZW50c1xuICBpbmZvOiAoLyoqIEB0eXBlIHtcImluZm9cIn0gKi9cImluZm9cIiksXG4gIC8vIG1lc3NhZ2UsIGMgc3R5bGUgYXJndW1lbnRzXG4gIGxvZzogKC8qKiBAdHlwZSB7XCJsb2dcIn0gKi9cImxvZ1wiKSxcbiAgLy8gbWVzc2FnZSwgYyBzdHlsZSBhcmd1bWVudHNcbiAgZGVidWc6ICgvKiogQHR5cGUge1wiZGVidWdcIn0gKi9cImRlYnVnXCIpLFxuICAvLyBtZXNzYWdlLCBjIHN0eWxlIGFyZ3VtZW50c1xuXG4gIHRyYWNlOiAoLyoqIEB0eXBlIHtcInRyYWNlXCJ9ICovXCJ0cmFjZVwiKSxcbiAgLy8gbm8gYXJndW1lbnRzXG5cbiAgZ3JvdXA6ICgvKiogQHR5cGUge1wiZ3JvdXBcIn0gKi9cImdyb3VwXCIpLFxuICAvLyBbbGFiZWxdXG4gIGdyb3VwQ29sbGFwc2VkOiAoLyoqIEB0eXBlIHtcImdyb3VwQ29sbGFwc2VkXCJ9ICovXCJncm91cENvbGxhcHNlZFwiKSxcbiAgLy8gW2xhYmVsXVxuICBncm91cEVuZDogKC8qKiBAdHlwZSB7XCJncm91cEVuZFwifSAqL1wiZ3JvdXBFbmRcIiksXG4gIC8vIFtsYWJlbF1cblxuICBwcm9maWxlOiAoLyoqIEB0eXBlIHtcInByb2ZpbGVcIn0gKi9cInByb2ZpbGVcIiksXG4gIC8vIFtwcm9maWxlTmFtZV1cbiAgcHJvZmlsZUVuZDogKC8qKiBAdHlwZSB7XCJwcm9maWxlRW5kXCJ9ICovXCJwcm9maWxlRW5kXCIpLFxuICAvLyBbcHJvZmlsZU5hbWVdXG5cbiAgdGltZTogKC8qKiBAdHlwZSB7XCJ0aW1lXCJ9ICovXCJ0aW1lXCIpLFxuICAvLyBuYW1lLCB0aW1lIGFzIFtzZWNvbmRzLCBuYW5vc2Vjb25kc11cblxuICBjbGVhcjogKC8qKiBAdHlwZSB7XCJjbGVhclwifSAqL1wiY2xlYXJcIiksXG4gIC8vIG5vIGFyZ3VtZW50c1xuICBzdGF0dXM6ICgvKiogQHR5cGUge1wic3RhdHVzXCJ9ICovXCJzdGF0dXNcIikgLy8gbWVzc2FnZSwgYXJndW1lbnRzXG59KTtcbm1vZHVsZS5leHBvcnRzLkxvZ1R5cGUgPSBMb2dUeXBlO1xuXG4vKiogQHR5cGVkZWYge3R5cGVvZiBMb2dUeXBlW2tleW9mIHR5cGVvZiBMb2dUeXBlXX0gTG9nVHlwZUVudW0gKi9cblxudmFyIExPR19TWU1CT0wgPSAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KShcIndlYnBhY2sgbG9nZ2VyIHJhdyBsb2cgbWV0aG9kXCIpO1xudmFyIFRJTUVSU19TWU1CT0wgPSAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KShcIndlYnBhY2sgbG9nZ2VyIHRpbWVzXCIpO1xudmFyIFRJTUVSU19BR0dSRUdBVEVTX1NZTUJPTCA9ICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pKFwid2VicGFjayBsb2dnZXIgYWdncmVnYXRlZCB0aW1lc1wiKTtcbnZhciBXZWJwYWNrTG9nZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oTG9nVHlwZUVudW0sIEVYUEVDVEVEX0FOWVtdPSk6IHZvaWR9IGxvZyBsb2cgZnVuY3Rpb25cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcgfCBmdW5jdGlvbigpOiBzdHJpbmcpOiBXZWJwYWNrTG9nZ2VyfSBnZXRDaGlsZExvZ2dlciBmdW5jdGlvbiB0byBjcmVhdGUgY2hpbGQgbG9nZ2VyXG4gICAqL1xuICBmdW5jdGlvbiBXZWJwYWNrTG9nZ2VyKGxvZywgZ2V0Q2hpbGRMb2dnZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2VicGFja0xvZ2dlcik7XG4gICAgdGhpc1tMT0dfU1lNQk9MXSA9IGxvZztcbiAgICB0aGlzLmdldENoaWxkTG9nZ2VyID0gZ2V0Q2hpbGRMb2dnZXI7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsuLi5FWFBFQ1RFRF9BTll9IGFyZ3MgYXJnc1xuICAgKi9cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhXZWJwYWNrTG9nZ2VyLCBbe1xuICAgIGtleTogXCJlcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLmVycm9yLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwid2FyblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3YXJuKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cbiAgICAgIHRoaXNbTE9HX1NZTUJPTF0oTG9nVHlwZS53YXJuLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiaW5mb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbmZvKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgIH1cbiAgICAgIHRoaXNbTE9HX1NZTUJPTF0oTG9nVHlwZS5pbmZvLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwibG9nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvZygpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUubG9nLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVidWdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVidWcoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjUpLCBfa2V5NSA9IDA7IF9rZXk1IDwgX2xlbjU7IF9rZXk1KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICAgICAgfVxuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLmRlYnVnLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VYUEVDVEVEX0FOWX0gYXNzZXJ0aW9uIGFzc2VydGlvblxuICAgICAqIEBwYXJhbSB7Li4uRVhQRUNURURfQU5ZfSBhcmdzIGFyZ3NcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJhc3NlcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYXNzZXJ0KGFzc2VydGlvbikge1xuICAgICAgaWYgKCFhc3NlcnRpb24pIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjYgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW42ID4gMSA/IF9sZW42IC0gMSA6IDApLCBfa2V5NiA9IDE7IF9rZXk2IDwgX2xlbjY7IF9rZXk2KyspIHtcbiAgICAgICAgICBhcmdzW19rZXk2IC0gMV0gPSBhcmd1bWVudHNbX2tleTZdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbTE9HX1NZTUJPTF0oTG9nVHlwZS5lcnJvciwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyYWNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyYWNlKCkge1xuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLnRyYWNlLCBbXCJUcmFjZVwiXSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsZWFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLmNsZWFyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwic3RhdHVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXR1cygpIHtcbiAgICAgIGZvciAodmFyIF9sZW43ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNyksIF9rZXk3ID0gMDsgX2tleTcgPCBfbGVuNzsgX2tleTcrKykge1xuICAgICAgICBhcmdzW19rZXk3XSA9IGFyZ3VtZW50c1tfa2V5N107XG4gICAgICB9XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUuc3RhdHVzLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZ3JvdXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JvdXAoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuOCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjgpLCBfa2V5OCA9IDA7IF9rZXk4IDwgX2xlbjg7IF9rZXk4KyspIHtcbiAgICAgICAgYXJnc1tfa2V5OF0gPSBhcmd1bWVudHNbX2tleThdO1xuICAgICAgfVxuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLmdyb3VwLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLkVYUEVDVEVEX0FOWX0gYXJncyBhcmdzXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwiZ3JvdXBDb2xsYXBzZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JvdXBDb2xsYXBzZWQoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuOSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjkpLCBfa2V5OSA9IDA7IF9rZXk5IDwgX2xlbjk7IF9rZXk5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5OV0gPSBhcmd1bWVudHNbX2tleTldO1xuICAgICAgfVxuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLmdyb3VwQ29sbGFwc2VkLCBhcmdzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ3JvdXBFbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ3JvdXBFbmQoKSB7XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUuZ3JvdXBFbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbGFiZWwgbGFiZWxcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJwcm9maWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHByb2ZpbGUobGFiZWwpIHtcbiAgICAgIHRoaXNbTE9HX1NZTUJPTF0oTG9nVHlwZS5wcm9maWxlLCBbbGFiZWxdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGxhYmVsIGxhYmVsXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwicHJvZmlsZUVuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9maWxlRW5kKGxhYmVsKSB7XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUucHJvZmlsZUVuZCwgW2xhYmVsXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxhYmVsIGxhYmVsXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwidGltZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0aW1lKGxhYmVsKSB7XG4gICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcgfCB1bmRlZmluZWQsIFtudW1iZXIsIG51bWJlcl0+fSAqL1xuICAgICAgdGhpc1tUSU1FUlNfU1lNQk9MXSA9IHRoaXNbVElNRVJTX1NZTUJPTF0gfHwgbmV3IE1hcCgpO1xuICAgICAgdGhpc1tUSU1FUlNfU1lNQk9MXS5zZXQobGFiZWwsIHByb2Nlc3MuaHJ0aW1lKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbGFiZWwgbGFiZWxcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJ0aW1lTG9nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVMb2cobGFiZWwpIHtcbiAgICAgIHZhciBwcmV2ID0gdGhpc1tUSU1FUlNfU1lNQk9MXSAmJiB0aGlzW1RJTUVSU19TWU1CT0xdLmdldChsYWJlbCk7XG4gICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VjaCBsYWJlbCAnXCIuY29uY2F0KGxhYmVsLCBcIicgZm9yIFdlYnBhY2tMb2dnZXIudGltZUxvZygpXCIpKTtcbiAgICAgIH1cbiAgICAgIHZhciB0aW1lID0gcHJvY2Vzcy5ocnRpbWUocHJldik7XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUudGltZSwgW2xhYmVsXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRpbWUpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBsYWJlbCBsYWJlbFxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcInRpbWVFbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGltZUVuZChsYWJlbCkge1xuICAgICAgdmFyIHByZXYgPSB0aGlzW1RJTUVSU19TWU1CT0xdICYmIHRoaXNbVElNRVJTX1NZTUJPTF0uZ2V0KGxhYmVsKTtcbiAgICAgIGlmICghcHJldikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIGxhYmVsICdcIi5jb25jYXQobGFiZWwsIFwiJyBmb3IgV2VicGFja0xvZ2dlci50aW1lRW5kKClcIikpO1xuICAgICAgfVxuICAgICAgdmFyIHRpbWUgPSBwcm9jZXNzLmhydGltZShwcmV2KTtcbiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZyB8IHVuZGVmaW5lZCwgW251bWJlciwgbnVtYmVyXT59ICovXG4gICAgICB0aGlzW1RJTUVSU19TWU1CT0xdLmRlbGV0ZShsYWJlbCk7XG4gICAgICB0aGlzW0xPR19TWU1CT0xdKExvZ1R5cGUudGltZSwgW2xhYmVsXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRpbWUpKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBsYWJlbCBsYWJlbFxuICAgICAqL1xuICB9LCB7XG4gICAga2V5OiBcInRpbWVBZ2dyZWdhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGltZUFnZ3JlZ2F0ZShsYWJlbCkge1xuICAgICAgdmFyIHByZXYgPSB0aGlzW1RJTUVSU19TWU1CT0xdICYmIHRoaXNbVElNRVJTX1NZTUJPTF0uZ2V0KGxhYmVsKTtcbiAgICAgIGlmICghcHJldikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIGxhYmVsICdcIi5jb25jYXQobGFiZWwsIFwiJyBmb3IgV2VicGFja0xvZ2dlci50aW1lQWdncmVnYXRlKClcIikpO1xuICAgICAgfVxuICAgICAgdmFyIHRpbWUgPSBwcm9jZXNzLmhydGltZShwcmV2KTtcbiAgICAgIC8qKiBAdHlwZSB7TWFwPHN0cmluZyB8IHVuZGVmaW5lZCwgW251bWJlciwgbnVtYmVyXT59ICovXG4gICAgICB0aGlzW1RJTUVSU19TWU1CT0xdLmRlbGV0ZShsYWJlbCk7XG4gICAgICAvKiogQHR5cGUge01hcDxzdHJpbmcgfCB1bmRlZmluZWQsIFtudW1iZXIsIG51bWJlcl0+fSAqL1xuICAgICAgdGhpc1tUSU1FUlNfQUdHUkVHQVRFU19TWU1CT0xdID0gdGhpc1tUSU1FUlNfQUdHUkVHQVRFU19TWU1CT0xdIHx8IG5ldyBNYXAoKTtcbiAgICAgIHZhciBjdXJyZW50ID0gdGhpc1tUSU1FUlNfQUdHUkVHQVRFU19TWU1CT0xdLmdldChsYWJlbCk7XG4gICAgICBpZiAoY3VycmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0aW1lWzFdICsgY3VycmVudFsxXSA+IDFlOSkge1xuICAgICAgICAgIHRpbWVbMF0gKz0gY3VycmVudFswXSArIDE7XG4gICAgICAgICAgdGltZVsxXSA9IHRpbWVbMV0gLSAxZTkgKyBjdXJyZW50WzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRpbWVbMF0gKz0gY3VycmVudFswXTtcbiAgICAgICAgICB0aW1lWzFdICs9IGN1cnJlbnRbMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXNbVElNRVJTX0FHR1JFR0FURVNfU1lNQk9MXS5zZXQobGFiZWwsIHRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbGFiZWwgbGFiZWxcbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJ0aW1lQWdncmVnYXRlRW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRpbWVBZ2dyZWdhdGVFbmQobGFiZWwpIHtcbiAgICAgIGlmICh0aGlzW1RJTUVSU19BR0dSRUdBVEVTX1NZTUJPTF0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgdmFyIHRpbWUgPSB0aGlzW1RJTUVSU19BR0dSRUdBVEVTX1NZTUJPTF0uZ2V0KGxhYmVsKTtcbiAgICAgIGlmICh0aW1lID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIHRoaXNbVElNRVJTX0FHR1JFR0FURVNfU1lNQk9MXS5kZWxldGUobGFiZWwpO1xuICAgICAgdGhpc1tMT0dfU1lNQk9MXShMb2dUeXBlLnRpbWUsIFtsYWJlbF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aW1lKSkpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xubW9kdWxlLmV4cG9ydHMuTG9nZ2VyID0gV2VicGFja0xvZ2dlcjtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9saWIvbG9nZ2luZy9jcmVhdGVDb25zb2xlTG9nZ2VyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2xpYi9sb2dnaW5nL2NyZWF0ZUNvbnNvbGVMb2dnZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cblxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShyLCBlKSB7XG4gIHJldHVybiBfYXJyYXlXaXRoSG9sZXMocikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGUpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyLCBlKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyBTeW1ib2wgOiBmdW5jdGlvbiAoaSkgeyByZXR1cm4gaTsgfSkgJiYgclsodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KS5pdGVyYXRvcl0gfHwgcltcIkBAaXRlcmF0b3JcIl07XG4gIGlmIChudWxsICE9IHQpIHtcbiAgICB2YXIgZSxcbiAgICAgIG4sXG4gICAgICBpLFxuICAgICAgdSxcbiAgICAgIGEgPSBbXSxcbiAgICAgIGYgPSAhMCxcbiAgICAgIG8gPSAhMTtcbiAgICB0cnkge1xuICAgICAgaWYgKGkgPSAodCA9IHQuY2FsbChyKSkubmV4dCwgMCA9PT0gbCkge1xuICAgICAgICBpZiAoT2JqZWN0KHQpICE9PSB0KSByZXR1cm47XG4gICAgICAgIGYgPSAhMTtcbiAgICAgIH0gZWxzZSBmb3IgKDsgIShmID0gKGUgPSBpLmNhbGwodCkpLmRvbmUpICYmIChhLnB1c2goZS52YWx1ZSksIGEubGVuZ3RoICE9PSBsKTsgZiA9ICEwKTtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICBvID0gITAsIG4gPSByO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIWYgJiYgbnVsbCAhPSB0LnJldHVybiAmJiAodSA9IHQucmV0dXJuKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChvKSB0aHJvdyBuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxufVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKHIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiByO1xufVxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KHIpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhyKSB8fCBfaXRlcmFibGVUb0FycmF5KHIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTtcbn1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkge1xuICBpZiAocikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7XG4gICAgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTtcbiAgICByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDtcbiAgfVxufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShyKSB7XG4gIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KSAmJiBudWxsICE9IHJbKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyBTeW1ib2wgOiBmdW5jdGlvbiAoaSkgeyByZXR1cm4gaTsgfSkuaXRlcmF0b3JdIHx8IG51bGwgIT0gcltcIkBAaXRlcmF0b3JcIl0pIHJldHVybiBBcnJheS5mcm9tKHIpO1xufVxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKHIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShyKTtcbn1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHtcbiAgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpO1xuICBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KSAmJiBcInN5bWJvbFwiID09IHR5cGVvZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbCA6IGZ1bmN0aW9uIChpKSB7IHJldHVybiBpOyB9KS5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pICYmIG8uY29uc3RydWN0b3IgPT09ICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pICYmIG8gIT09ICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiID8gU3ltYm9sIDogZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGk7IH0pLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbnZhciBfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vTG9nZ2VyICovIFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9saWIvbG9nZ2luZy9Mb2dnZXIuanNcIiksXG4gIExvZ1R5cGUgPSBfcmVxdWlyZS5Mb2dUeXBlO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2RlY2xhcmF0aW9ucy9XZWJwYWNrT3B0aW9uc1wiKS5GaWx0ZXJJdGVtVHlwZXN9IEZpbHRlckl0ZW1UeXBlcyAqL1xuLyoqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi9kZWNsYXJhdGlvbnMvV2VicGFja09wdGlvbnNcIikuRmlsdGVyVHlwZXN9IEZpbHRlclR5cGVzICovXG4vKiogQHR5cGVkZWYge2ltcG9ydChcIi4vTG9nZ2VyXCIpLkxvZ1R5cGVFbnVtfSBMb2dUeXBlRW51bSAqL1xuXG4vKiogQHR5cGVkZWYge2Z1bmN0aW9uKHN0cmluZyk6IGJvb2xlYW59IEZpbHRlckZ1bmN0aW9uICovXG4vKiogQHR5cGVkZWYge2Z1bmN0aW9uKHN0cmluZywgTG9nVHlwZUVudW0sIEVYUEVDVEVEX0FOWVtdPSk6IHZvaWR9IExvZ2dpbmdGdW5jdGlvbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IExvZ2dlckNvbnNvbGVcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTogdm9pZH0gY2xlYXJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTogdm9pZH0gdHJhY2VcbiAqIEBwcm9wZXJ0eSB7KC4uLmFyZ3M6IEVYUEVDVEVEX0FOWVtdKSA9PiB2b2lkfSBpbmZvXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZH0gbG9nXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZH0gd2FyblxuICogQHByb3BlcnR5IHsoLi4uYXJnczogRVhQRUNURURfQU5ZW10pID0+IHZvaWR9IGVycm9yXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IGRlYnVnXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IGdyb3VwXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IGdyb3VwQ29sbGFwc2VkXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IGdyb3VwRW5kXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IHN0YXR1c1xuICogQHByb3BlcnR5IHsoLi4uYXJnczogRVhQRUNURURfQU5ZW10pID0+IHZvaWQ9fSBwcm9maWxlXG4gKiBAcHJvcGVydHkgeyguLi5hcmdzOiBFWFBFQ1RFRF9BTllbXSkgPT4gdm9pZD19IHByb2ZpbGVFbmRcbiAqIEBwcm9wZXJ0eSB7KC4uLmFyZ3M6IEVYUEVDVEVEX0FOWVtdKSA9PiB2b2lkPX0gbG9nVGltZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gTG9nZ2VyT3B0aW9uc1xuICogQHByb3BlcnR5IHtmYWxzZXx0cnVlfFwibm9uZVwifFwiZXJyb3JcInxcIndhcm5cInxcImluZm9cInxcImxvZ1wifFwidmVyYm9zZVwifSBsZXZlbCBsb2dsZXZlbFxuICogQHByb3BlcnR5IHtGaWx0ZXJUeXBlc3xib29sZWFufSBkZWJ1ZyBmaWx0ZXIgZm9yIGRlYnVnIGxvZ2dpbmdcbiAqIEBwcm9wZXJ0eSB7TG9nZ2VyQ29uc29sZX0gY29uc29sZSB0aGUgY29uc29sZSB0byBsb2cgdG9cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7RmlsdGVySXRlbVR5cGVzfSBpdGVtIGFuIGlucHV0IGl0ZW1cbiAqIEByZXR1cm5zIHtGaWx0ZXJGdW5jdGlvbiB8IHVuZGVmaW5lZH0gZmlsdGVyIGZ1bmN0aW9uXG4gKi9cbnZhciBmaWx0ZXJUb0Z1bmN0aW9uID0gZnVuY3Rpb24gZmlsdGVyVG9GdW5jdGlvbihpdGVtKSB7XG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHZhciByZWdFeHAgPSBuZXcgUmVnRXhwKFwiW1xcXFxcXFxcL11cIi5jb25jYXQoaXRlbS5yZXBsYWNlKC9bLVtcXF17fSgpKis/LlxcXFxeJHxdL2csIFwiXFxcXCQmXCIpLCBcIihbXFxcXFxcXFwvXXwkfCF8XFxcXD8pXCIpKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlkZW50KSB7XG4gICAgICByZXR1cm4gcmVnRXhwLnRlc3QoaWRlbnQpO1xuICAgIH07XG4gIH1cbiAgaWYgKGl0ZW0gJiYgX3R5cGVvZihpdGVtKSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgaXRlbS50ZXN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlkZW50KSB7XG4gICAgICByZXR1cm4gaXRlbS50ZXN0KGlkZW50KTtcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbnZhciBMb2dMZXZlbCA9IHtcbiAgbm9uZTogNixcbiAgZmFsc2U6IDYsXG4gIGVycm9yOiA1LFxuICB3YXJuOiA0LFxuICBpbmZvOiAzLFxuICBsb2c6IDIsXG4gIHRydWU6IDIsXG4gIHZlcmJvc2U6IDFcbn07XG5cbi8qKlxuICogQHBhcmFtIHtMb2dnZXJPcHRpb25zfSBvcHRpb25zIG9wdGlvbnMgb2JqZWN0XG4gKiBAcmV0dXJucyB7TG9nZ2luZ0Z1bmN0aW9ufSBsb2dnaW5nIGZ1bmN0aW9uXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKF9yZWYpIHtcbiAgdmFyIF9yZWYkbGV2ZWwgPSBfcmVmLmxldmVsLFxuICAgIGxldmVsID0gX3JlZiRsZXZlbCA9PT0gdm9pZCAwID8gXCJpbmZvXCIgOiBfcmVmJGxldmVsLFxuICAgIF9yZWYkZGVidWcgPSBfcmVmLmRlYnVnLFxuICAgIGRlYnVnID0gX3JlZiRkZWJ1ZyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGRlYnVnLFxuICAgIGNvbnNvbGUgPSBfcmVmLmNvbnNvbGU7XG4gIHZhciBkZWJ1Z0ZpbHRlcnMgPSAvKiogQHR5cGUge0ZpbHRlckZ1bmN0aW9uW119ICovXG5cbiAgdHlwZW9mIGRlYnVnID09PSBcImJvb2xlYW5cIiA/IFtmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRlYnVnO1xuICB9XSA6IC8qKiBAdHlwZSB7RmlsdGVySXRlbVR5cGVzW119ICovW10uY29uY2F0KGRlYnVnKS5tYXAoZmlsdGVyVG9GdW5jdGlvbik7XG4gIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICB2YXIgbG9nbGV2ZWwgPSBMb2dMZXZlbFtcIlwiLmNvbmNhdChsZXZlbCldIHx8IDA7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGxvZ2dlclxuICAgKiBAcGFyYW0ge0xvZ1R5cGVFbnVtfSB0eXBlIHR5cGUgb2YgdGhlIGxvZyBlbnRyeVxuICAgKiBAcGFyYW0ge0VYUEVDVEVEX0FOWVtdPX0gYXJncyBhcmd1bWVudHMgb2YgdGhlIGxvZyBlbnRyeVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHZhciBsb2dnZXIgPSBmdW5jdGlvbiBsb2dnZXIobmFtZSwgdHlwZSwgYXJncykge1xuICAgIHZhciBsYWJlbGVkQXJncyA9IGZ1bmN0aW9uIGxhYmVsZWRBcmdzKCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJldHVybiBbXCJbXCIuY29uY2F0KG5hbWUsIFwiXSBcIikuY29uY2F0KGFyZ3NbMF0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFyZ3Muc2xpY2UoMSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1wiW1wiLmNvbmNhdChuYW1lLCBcIl1cIildLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYXJncykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgdmFyIGRlYnVnID0gZGVidWdGaWx0ZXJzLnNvbWUoZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmKG5hbWUpO1xuICAgIH0pO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBMb2dUeXBlLmRlYnVnOlxuICAgICAgICBpZiAoIWRlYnVnKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5kZWJ1ZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5kZWJ1Zy5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUubG9nOlxuICAgICAgICBpZiAoIWRlYnVnICYmIGxvZ2xldmVsID4gTG9nTGV2ZWwubG9nKSByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMb2dUeXBlLmluZm86XG4gICAgICAgIGlmICghZGVidWcgJiYgbG9nbGV2ZWwgPiBMb2dMZXZlbC5pbmZvKSByZXR1cm47XG4gICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTG9nVHlwZS53YXJuOlxuICAgICAgICBpZiAoIWRlYnVnICYmIGxvZ2xldmVsID4gTG9nTGV2ZWwud2FybikgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgX3RvQ29uc3VtYWJsZUFycmF5KGxhYmVsZWRBcmdzKCkpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUuZXJyb3I6XG4gICAgICAgIGlmICghZGVidWcgJiYgbG9nbGV2ZWwgPiBMb2dMZXZlbC5lcnJvcikgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMb2dUeXBlLnRyYWNlOlxuICAgICAgICBpZiAoIWRlYnVnKSByZXR1cm47XG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUuZ3JvdXBDb2xsYXBzZWQ6XG4gICAgICAgIGlmICghZGVidWcgJiYgbG9nbGV2ZWwgPiBMb2dMZXZlbC5sb2cpIHJldHVybjtcbiAgICAgICAgaWYgKCFkZWJ1ZyAmJiBsb2dsZXZlbCA+IExvZ0xldmVsLnZlcmJvc2UpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZC5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBMb2dUeXBlLmdyb3VwOlxuICAgICAgICBpZiAoIWRlYnVnICYmIGxvZ2xldmVsID4gTG9nTGV2ZWwubG9nKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5ncm91cCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5ncm91cC5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUuZ3JvdXBFbmQ6XG4gICAgICAgIGlmICghZGVidWcgJiYgbG9nbGV2ZWwgPiBMb2dMZXZlbC5sb2cpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmdyb3VwRW5kID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUudGltZTpcbiAgICAgICAge1xuICAgICAgICAgIGlmICghZGVidWcgJiYgbG9nbGV2ZWwgPiBMb2dMZXZlbC5sb2cpIHJldHVybjtcbiAgICAgICAgICB2YXIgX2FyZ3MgPSBfc2xpY2VkVG9BcnJheSgvKiogQHR5cGUge1tzdHJpbmcsIG51bWJlciwgbnVtYmVyXX0gKi9cbiAgICAgICAgICAgIGFyZ3MsIDMpLFxuICAgICAgICAgICAgbGFiZWwgPSBfYXJnc1swXSxcbiAgICAgICAgICAgIHN0YXJ0ID0gX2FyZ3NbMV0sXG4gICAgICAgICAgICBlbmQgPSBfYXJnc1syXTtcbiAgICAgICAgICB2YXIgbXMgPSBzdGFydCAqIDEwMDAgKyBlbmQgLyAxMDAwMDAwO1xuICAgICAgICAgIHZhciBtc2cgPSBcIltcIi5jb25jYXQobmFtZSwgXCJdIFwiKS5jb25jYXQobGFiZWwsIFwiOiBcIikuY29uY2F0KG1zLCBcIiBtc1wiKTtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUubG9nVGltZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZ1RpbWUobXNnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgTG9nVHlwZS5wcm9maWxlOlxuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUucHJvZmlsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5wcm9maWxlLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZ1R5cGUucHJvZmlsZUVuZDpcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnByb2ZpbGVFbmQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnNvbGUucHJvZmlsZUVuZC5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMb2dUeXBlLmNsZWFyOlxuICAgICAgICBpZiAoIWRlYnVnICYmIGxvZ2xldmVsID4gTG9nTGV2ZWwubG9nKSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5jbGVhciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMb2dUeXBlLnN0YXR1czpcbiAgICAgICAgaWYgKCFkZWJ1ZyAmJiBsb2dsZXZlbCA+IExvZ0xldmVsLmluZm8pIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnN0YXR1cyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgaWYgKCFhcmdzIHx8IGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLnN0YXR1cygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLnN0YXR1cy5hcHBseShjb25zb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkobGFiZWxlZEFyZ3MoKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhcmdzICYmIGFyZ3MubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIF90b0NvbnN1bWFibGVBcnJheShsYWJlbGVkQXJncygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIExvZ1R5cGUgXCIuY29uY2F0KHR5cGUpKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBsb2dnZXI7XG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2xpYi9sb2dnaW5nL3J1bnRpbWUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL3dlYnBhY2svbGliL2xvZ2dpbmcvcnVudGltZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxuXG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICByZXR1cm4gX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAobikge1xuICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7XG4gICAgICB2YXIgdCA9IGFyZ3VtZW50c1tlXTtcbiAgICAgIGZvciAodmFyIHIgaW4gdCkgKHt9KS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIHIpICYmIChuW3JdID0gdFtyXSk7XG4gICAgfVxuICAgIHJldHVybiBuO1xuICB9LCBfZXh0ZW5kcy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxudmFyIF9yZXF1aXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgdGFwYWJsZSAqLyBcIi4vY2xpZW50LXNyYy9tb2R1bGVzL2xvZ2dlci90YXBhYmxlLmpzXCIpLFxuICBTeW5jQmFpbEhvb2sgPSBfcmVxdWlyZS5TeW5jQmFpbEhvb2s7XG52YXIgX3JlcXVpcmUyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9Mb2dnZXIgKi8gXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2xpYi9sb2dnaW5nL0xvZ2dlci5qc1wiKSxcbiAgTG9nZ2VyID0gX3JlcXVpcmUyLkxvZ2dlcjtcbnZhciBjcmVhdGVDb25zb2xlTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jcmVhdGVDb25zb2xlTG9nZ2VyICovIFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9saWIvbG9nZ2luZy9jcmVhdGVDb25zb2xlTG9nZ2VyLmpzXCIpO1xuXG4vKiogQHR5cGUge2NyZWF0ZUNvbnNvbGVMb2dnZXIuTG9nZ2VyT3B0aW9uc30gKi9cbnZhciBjdXJyZW50RGVmYXVsdExvZ2dlck9wdGlvbnMgPSB7XG4gIGxldmVsOiBcImluZm9cIixcbiAgZGVidWc6IGZhbHNlLFxuICBjb25zb2xlOiBjb25zb2xlXG59O1xudmFyIGN1cnJlbnREZWZhdWx0TG9nZ2VyID0gY3JlYXRlQ29uc29sZUxvZ2dlcihjdXJyZW50RGVmYXVsdExvZ2dlck9wdGlvbnMpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGxvZ2dlclxuICogQHJldHVybnMge0xvZ2dlcn0gYSBsb2dnZXJcbiAqL1xubW9kdWxlLmV4cG9ydHMuZ2V0TG9nZ2VyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBMb2dnZXIoZnVuY3Rpb24gKHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAobW9kdWxlLmV4cG9ydHMuaG9va3MubG9nLmNhbGwobmFtZSwgdHlwZSwgYXJncykgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY3VycmVudERlZmF1bHRMb2dnZXIobmFtZSwgdHlwZSwgYXJncyk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoY2hpbGROYW1lKSB7XG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLmdldExvZ2dlcihcIlwiLmNvbmNhdChuYW1lLCBcIi9cIikuY29uY2F0KGNoaWxkTmFtZSkpO1xuICB9KTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtjcmVhdGVDb25zb2xlTG9nZ2VyLkxvZ2dlck9wdGlvbnN9IG9wdGlvbnMgbmV3IG9wdGlvbnMsIG1lcmdlIHdpdGggb2xkIG9wdGlvbnNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5tb2R1bGUuZXhwb3J0cy5jb25maWd1cmVEZWZhdWx0TG9nZ2VyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgX2V4dGVuZHMoY3VycmVudERlZmF1bHRMb2dnZXJPcHRpb25zLCBvcHRpb25zKTtcbiAgY3VycmVudERlZmF1bHRMb2dnZXIgPSBjcmVhdGVDb25zb2xlTG9nZ2VyKGN1cnJlbnREZWZhdWx0TG9nZ2VyT3B0aW9ucyk7XG59O1xubW9kdWxlLmV4cG9ydHMuaG9va3MgPSB7XG4gIGxvZzogbmV3IFN5bmNCYWlsSG9vayhbXCJvcmlnaW5cIiwgXCJ0eXBlXCIsIFwiYXJnc1wiXSlcbn07XG5cbi8qKiovIH0pXG5cbi8qKioqKiovIFx0fSk7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyAqL1xuLyoqKioqKi8gXHQhZnVuY3Rpb24oKSB7XG4vKioqKioqLyBcdFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcbi8qKioqKiovIFx0XHRcdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcbi8qKioqKiovIFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdH0oKTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQgKi9cbi8qKioqKiovIFx0IWZ1bmN0aW9uKCkge1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH1cbi8qKioqKiovIFx0fSgpO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0Lyogd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCAqL1xuLyoqKioqKi8gXHQhZnVuY3Rpb24oKSB7XG4vKioqKioqLyBcdFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbi8qKioqKiovIFx0XHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuLyoqKioqKi8gXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0fSgpO1xuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IHt9O1xuLy8gVGhpcyBlbnRyeSBuZWVkcyB0byBiZSB3cmFwcGVkIGluIGFuIElJRkUgYmVjYXVzZSBpdCBuZWVkcyB0byBiZSBpc29sYXRlZCBhZ2FpbnN0IG90aGVyIG1vZHVsZXMgaW4gdGhlIGNodW5rLlxuIWZ1bmN0aW9uKCkge1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9jbGllbnQtc3JjL21vZHVsZXMvbG9nZ2VyL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiBmdW5jdGlvbigpIHsgcmV0dXJuIC8qIHJlZXhwb3J0IGRlZmF1bHQgZXhwb3J0IGZyb20gbmFtZWQgbW9kdWxlICovIHdlYnBhY2tfbGliX2xvZ2dpbmdfcnVudGltZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fOyB9XG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciB3ZWJwYWNrX2xpYl9sb2dnaW5nX3J1bnRpbWVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHdlYnBhY2svbGliL2xvZ2dpbmcvcnVudGltZS5qcyAqLyBcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svbGliL2xvZ2dpbmcvcnVudGltZS5qc1wiKTtcblxufSgpO1xudmFyIF9fd2VicGFja19leHBvcnRfdGFyZ2V0X18gPSBleHBvcnRzO1xuZm9yKHZhciBfX3dlYnBhY2tfaV9fIGluIF9fd2VicGFja19leHBvcnRzX18pIF9fd2VicGFja19leHBvcnRfdGFyZ2V0X19bX193ZWJwYWNrX2lfX10gPSBfX3dlYnBhY2tfZXhwb3J0c19fW19fd2VicGFja19pX19dO1xuaWYoX193ZWJwYWNrX2V4cG9ydHNfXy5fX2VzTW9kdWxlKSBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX2V4cG9ydF90YXJnZXRfXywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyB9KSgpXG47Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/modules/logger/index.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/overlay.js":
/*!***********************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/overlay.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOverlay: () => (/* binding */ createOverlay),\n/* harmony export */   formatProblem: () => (/* binding */ formatProblem)\n/* harmony export */ });\n/* harmony import */ var ansi_html_community__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-html-community */ \"./node_modules/ansi-html-community/index.js\");\n/* harmony import */ var ansi_html_community__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ansi_html_community__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// The error overlay is inspired (and mostly copied) from Create React App (https://github.com/facebookincubator/create-react-app)\n// They, in turn, got inspired by webpack-hot-middleware (https://github.com/glenjamin/webpack-hot-middleware).\n\n\n\n/**\n * @type {(input: string, position: number) => string}\n */\nvar getCodePoint = String.prototype.codePointAt ? function (input, position) {\n  return input.codePointAt(position);\n} : function (input, position) {\n  return (input.charCodeAt(position) - 0xd800) * 0x400 + input.charCodeAt(position + 1) - 0xdc00 + 0x10000;\n};\n\n/**\n * @param {string} macroText\n * @param {RegExp} macroRegExp\n * @param {(input: string) => string} macroReplacer\n * @returns {string}\n */\nvar replaceUsingRegExp = function replaceUsingRegExp(macroText, macroRegExp, macroReplacer) {\n  macroRegExp.lastIndex = 0;\n  var replaceMatch = macroRegExp.exec(macroText);\n  var replaceResult;\n  if (replaceMatch) {\n    replaceResult = \"\";\n    var replaceLastIndex = 0;\n    do {\n      if (replaceLastIndex !== replaceMatch.index) {\n        replaceResult += macroText.substring(replaceLastIndex, replaceMatch.index);\n      }\n      var replaceInput = replaceMatch[0];\n      replaceResult += macroReplacer(replaceInput);\n      replaceLastIndex = replaceMatch.index + replaceInput.length;\n      // eslint-disable-next-line no-cond-assign\n    } while (replaceMatch = macroRegExp.exec(macroText));\n    if (replaceLastIndex !== macroText.length) {\n      replaceResult += macroText.substring(replaceLastIndex);\n    }\n  } else {\n    replaceResult = macroText;\n  }\n  return replaceResult;\n};\nvar references = {\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&apos;\",\n  \"&\": \"&amp;\"\n};\n\n/**\n * @param {string} text text\n * @returns {string}\n */\nfunction encode(text) {\n  if (!text) {\n    return \"\";\n  }\n  return replaceUsingRegExp(text, /[<>'\"&]/g, function (input) {\n    var result = references[input];\n    if (!result) {\n      var code = input.length > 1 ? getCodePoint(input, 0) : input.charCodeAt(0);\n      result = \"&#\".concat(code, \";\");\n    }\n    return result;\n  });\n}\n\n/**\n * @typedef {Object} StateDefinitions\n * @property {{[event: string]: { target: string; actions?: Array<string> }}} [on]\n */\n\n/**\n * @typedef {Object} Options\n * @property {{[state: string]: StateDefinitions}} states\n * @property {object} context;\n * @property {string} initial\n */\n\n/**\n * @typedef {Object} Implementation\n * @property {{[actionName: string]: (ctx: object, event: any) => object}} actions\n */\n\n/**\n * A simplified `createMachine` from `@xstate/fsm` with the following differences:\n *\n *  - the returned machine is technically a \"service\". No `interpret(machine).start()` is needed.\n *  - the state definition only support `on` and target must be declared with { target: 'nextState', actions: [] } explicitly.\n *  - event passed to `send` must be an object with `type` property.\n *  - actions implementation will be [assign action](https://xstate.js.org/docs/guides/context.html#assign-action) if you return any value.\n *  Do not return anything if you just want to invoke side effect.\n *\n * The goal of this custom function is to avoid installing the entire `'xstate/fsm'` package, while enabling modeling using\n * state machine. You can copy the first parameter into the editor at https://stately.ai/viz to visualize the state machine.\n *\n * @param {Options} options\n * @param {Implementation} implementation\n */\nfunction createMachine(_ref, _ref2) {\n  var states = _ref.states,\n    context = _ref.context,\n    initial = _ref.initial;\n  var actions = _ref2.actions;\n  var currentState = initial;\n  var currentContext = context;\n  return {\n    send: function send(event) {\n      var currentStateOn = states[currentState].on;\n      var transitionConfig = currentStateOn && currentStateOn[event.type];\n      if (transitionConfig) {\n        currentState = transitionConfig.target;\n        if (transitionConfig.actions) {\n          transitionConfig.actions.forEach(function (actName) {\n            var actionImpl = actions[actName];\n            var nextContextValue = actionImpl && actionImpl(currentContext, event);\n            if (nextContextValue) {\n              currentContext = _objectSpread(_objectSpread({}, currentContext), nextContextValue);\n            }\n          });\n        }\n      }\n    }\n  };\n}\n\n/**\n * @typedef {Object} ShowOverlayData\n * @property {'warning' | 'error'} level\n * @property {Array<string  | { moduleIdentifier?: string, moduleName?: string, loc?: string, message?: string }>} messages\n * @property {'build' | 'runtime'} messageSource\n */\n\n/**\n * @typedef {Object} CreateOverlayMachineOptions\n * @property {(data: ShowOverlayData) => void} showOverlay\n * @property {() => void} hideOverlay\n */\n\n/**\n * @param {CreateOverlayMachineOptions} options\n */\nvar createOverlayMachine = function createOverlayMachine(options) {\n  var hideOverlay = options.hideOverlay,\n    showOverlay = options.showOverlay;\n  return createMachine({\n    initial: \"hidden\",\n    context: {\n      level: \"error\",\n      messages: [],\n      messageSource: \"build\"\n    },\n    states: {\n      hidden: {\n        on: {\n          BUILD_ERROR: {\n            target: \"displayBuildError\",\n            actions: [\"setMessages\", \"showOverlay\"]\n          },\n          RUNTIME_ERROR: {\n            target: \"displayRuntimeError\",\n            actions: [\"setMessages\", \"showOverlay\"]\n          }\n        }\n      },\n      displayBuildError: {\n        on: {\n          DISMISS: {\n            target: \"hidden\",\n            actions: [\"dismissMessages\", \"hideOverlay\"]\n          },\n          BUILD_ERROR: {\n            target: \"displayBuildError\",\n            actions: [\"appendMessages\", \"showOverlay\"]\n          }\n        }\n      },\n      displayRuntimeError: {\n        on: {\n          DISMISS: {\n            target: \"hidden\",\n            actions: [\"dismissMessages\", \"hideOverlay\"]\n          },\n          RUNTIME_ERROR: {\n            target: \"displayRuntimeError\",\n            actions: [\"appendMessages\", \"showOverlay\"]\n          },\n          BUILD_ERROR: {\n            target: \"displayBuildError\",\n            actions: [\"setMessages\", \"showOverlay\"]\n          }\n        }\n      }\n    }\n  }, {\n    actions: {\n      dismissMessages: function dismissMessages() {\n        return {\n          messages: [],\n          level: \"error\",\n          messageSource: \"build\"\n        };\n      },\n      appendMessages: function appendMessages(context, event) {\n        return {\n          messages: context.messages.concat(event.messages),\n          level: event.level || context.level,\n          messageSource: event.type === \"RUNTIME_ERROR\" ? \"runtime\" : \"build\"\n        };\n      },\n      setMessages: function setMessages(context, event) {\n        return {\n          messages: event.messages,\n          level: event.level || context.level,\n          messageSource: event.type === \"RUNTIME_ERROR\" ? \"runtime\" : \"build\"\n        };\n      },\n      hideOverlay: hideOverlay,\n      showOverlay: showOverlay\n    }\n  });\n};\n\n/**\n *\n * @param {Error} error\n */\nvar parseErrorToStacks = function parseErrorToStacks(error) {\n  if (!error || !(error instanceof Error)) {\n    throw new Error(\"parseErrorToStacks expects Error object\");\n  }\n  if (typeof error.stack === \"string\") {\n    return error.stack.split(\"\\n\").filter(function (stack) {\n      return stack !== \"Error: \".concat(error.message);\n    });\n  }\n};\n\n/**\n * @callback ErrorCallback\n * @param {ErrorEvent} error\n * @returns {void}\n */\n\n/**\n * @param {ErrorCallback} callback\n */\nvar listenToRuntimeError = function listenToRuntimeError(callback) {\n  window.addEventListener(\"error\", callback);\n  return function cleanup() {\n    window.removeEventListener(\"error\", callback);\n  };\n};\n\n/**\n * @callback UnhandledRejectionCallback\n * @param {PromiseRejectionEvent} rejectionEvent\n * @returns {void}\n */\n\n/**\n * @param {UnhandledRejectionCallback} callback\n */\nvar listenToUnhandledRejection = function listenToUnhandledRejection(callback) {\n  window.addEventListener(\"unhandledrejection\", callback);\n  return function cleanup() {\n    window.removeEventListener(\"unhandledrejection\", callback);\n  };\n};\n\n// Styles are inspired by `react-error-overlay`\n\nvar msgStyles = {\n  error: {\n    backgroundColor: \"rgba(206, 17, 38, 0.1)\",\n    color: \"#fccfcf\"\n  },\n  warning: {\n    backgroundColor: \"rgba(251, 245, 180, 0.1)\",\n    color: \"#fbf5b4\"\n  }\n};\nvar iframeStyle = {\n  position: \"fixed\",\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  width: \"100vw\",\n  height: \"100vh\",\n  border: \"none\",\n  \"z-index\": 9999999999\n};\nvar containerStyle = {\n  position: \"fixed\",\n  boxSizing: \"border-box\",\n  left: 0,\n  top: 0,\n  right: 0,\n  bottom: 0,\n  width: \"100vw\",\n  height: \"100vh\",\n  fontSize: \"large\",\n  padding: \"2rem 2rem 4rem 2rem\",\n  lineHeight: \"1.2\",\n  whiteSpace: \"pre-wrap\",\n  overflow: \"auto\",\n  backgroundColor: \"rgba(0, 0, 0, 0.9)\",\n  color: \"white\"\n};\nvar headerStyle = {\n  color: \"#e83b46\",\n  fontSize: \"2em\",\n  whiteSpace: \"pre-wrap\",\n  fontFamily: \"sans-serif\",\n  margin: \"0 2rem 2rem 0\",\n  flex: \"0 0 auto\",\n  maxHeight: \"50%\",\n  overflow: \"auto\"\n};\nvar dismissButtonStyle = {\n  color: \"#ffffff\",\n  lineHeight: \"1rem\",\n  fontSize: \"1.5rem\",\n  padding: \"1rem\",\n  cursor: \"pointer\",\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  backgroundColor: \"transparent\",\n  border: \"none\"\n};\nvar msgTypeStyle = {\n  color: \"#e83b46\",\n  fontSize: \"1.2em\",\n  marginBottom: \"1rem\",\n  fontFamily: \"sans-serif\"\n};\nvar msgTextStyle = {\n  lineHeight: \"1.5\",\n  fontSize: \"1rem\",\n  fontFamily: \"Menlo, Consolas, monospace\"\n};\n\n// ANSI HTML\n\nvar colors = {\n  reset: [\"transparent\", \"transparent\"],\n  black: \"181818\",\n  red: \"E36049\",\n  green: \"B3CB74\",\n  yellow: \"FFD080\",\n  blue: \"7CAFC2\",\n  magenta: \"7FACCA\",\n  cyan: \"C3C2EF\",\n  lightgrey: \"EBE7E3\",\n  darkgrey: \"6D7891\"\n};\nansi_html_community__WEBPACK_IMPORTED_MODULE_0___default().setColors(colors);\n\n/**\n * @param {string} type\n * @param {string  | { file?: string, moduleName?: string, loc?: string, message?: string; stack?: string[] }} item\n * @returns {{ header: string, body: string }}\n */\nvar formatProblem = function formatProblem(type, item) {\n  var header = type === \"warning\" ? \"WARNING\" : \"ERROR\";\n  var body = \"\";\n  if (typeof item === \"string\") {\n    body += item;\n  } else {\n    var file = item.file || \"\";\n    // eslint-disable-next-line no-nested-ternary\n    var moduleName = item.moduleName ? item.moduleName.indexOf(\"!\") !== -1 ? \"\".concat(item.moduleName.replace(/^(\\s|\\S)*!/, \"\"), \" (\").concat(item.moduleName, \")\") : \"\".concat(item.moduleName) : \"\";\n    var loc = item.loc;\n    header += \"\".concat(moduleName || file ? \" in \".concat(moduleName ? \"\".concat(moduleName).concat(file ? \" (\".concat(file, \")\") : \"\") : file).concat(loc ? \" \".concat(loc) : \"\") : \"\");\n    body += item.message || \"\";\n  }\n  if (Array.isArray(item.stack)) {\n    item.stack.forEach(function (stack) {\n      if (typeof stack === \"string\") {\n        body += \"\\r\\n\".concat(stack);\n      }\n    });\n  }\n  return {\n    header: header,\n    body: body\n  };\n};\n\n/**\n * @typedef {Object} CreateOverlayOptions\n * @property {string | null} trustedTypesPolicyName\n * @property {boolean | (error: Error) => void} [catchRuntimeError]\n */\n\n/**\n *\n * @param {CreateOverlayOptions} options\n */\nvar createOverlay = function createOverlay(options) {\n  /** @type {HTMLIFrameElement | null | undefined} */\n  var iframeContainerElement;\n  /** @type {HTMLDivElement | null | undefined} */\n  var containerElement;\n  /** @type {HTMLDivElement | null | undefined} */\n  var headerElement;\n  /** @type {Array<(element: HTMLDivElement) => void>} */\n  var onLoadQueue = [];\n  /** @type {TrustedTypePolicy | undefined} */\n  var overlayTrustedTypesPolicy;\n\n  /**\n   *\n   * @param {HTMLElement} element\n   * @param {CSSStyleDeclaration} style\n   */\n  function applyStyle(element, style) {\n    Object.keys(style).forEach(function (prop) {\n      element.style[prop] = style[prop];\n    });\n  }\n\n  /**\n   * @param {string | null} trustedTypesPolicyName\n   */\n  function createContainer(trustedTypesPolicyName) {\n    // Enable Trusted Types if they are available in the current browser.\n    if (window.trustedTypes) {\n      overlayTrustedTypesPolicy = window.trustedTypes.createPolicy(trustedTypesPolicyName || \"webpack-dev-server#overlay\", {\n        createHTML: function createHTML(value) {\n          return value;\n        }\n      });\n    }\n    iframeContainerElement = document.createElement(\"iframe\");\n    iframeContainerElement.id = \"webpack-dev-server-client-overlay\";\n    iframeContainerElement.src = \"about:blank\";\n    applyStyle(iframeContainerElement, iframeStyle);\n    iframeContainerElement.onload = function () {\n      var contentElement = /** @type {Document} */\n      (/** @type {HTMLIFrameElement} */\n      iframeContainerElement.contentDocument).createElement(\"div\");\n      containerElement = /** @type {Document} */\n      (/** @type {HTMLIFrameElement} */\n      iframeContainerElement.contentDocument).createElement(\"div\");\n      contentElement.id = \"webpack-dev-server-client-overlay-div\";\n      applyStyle(contentElement, containerStyle);\n      headerElement = document.createElement(\"div\");\n      headerElement.innerText = \"Compiled with problems:\";\n      applyStyle(headerElement, headerStyle);\n      var closeButtonElement = document.createElement(\"button\");\n      applyStyle(closeButtonElement, dismissButtonStyle);\n      closeButtonElement.innerText = \"\";\n      closeButtonElement.ariaLabel = \"Dismiss\";\n      closeButtonElement.addEventListener(\"click\", function () {\n        // eslint-disable-next-line no-use-before-define\n        overlayService.send({\n          type: \"DISMISS\"\n        });\n      });\n      contentElement.appendChild(headerElement);\n      contentElement.appendChild(closeButtonElement);\n      contentElement.appendChild(containerElement);\n\n      /** @type {Document} */\n      (/** @type {HTMLIFrameElement} */\n      iframeContainerElement.contentDocument).body.appendChild(contentElement);\n      onLoadQueue.forEach(function (onLoad) {\n        onLoad(/** @type {HTMLDivElement} */contentElement);\n      });\n      onLoadQueue = [];\n\n      /** @type {HTMLIFrameElement} */\n      iframeContainerElement.onload = null;\n    };\n    document.body.appendChild(iframeContainerElement);\n  }\n\n  /**\n   * @param {(element: HTMLDivElement) => void} callback\n   * @param {string | null} trustedTypesPolicyName\n   */\n  function ensureOverlayExists(callback, trustedTypesPolicyName) {\n    if (containerElement) {\n      containerElement.innerHTML = overlayTrustedTypesPolicy ? overlayTrustedTypesPolicy.createHTML(\"\") : \"\";\n      // Everything is ready, call the callback right away.\n      callback(containerElement);\n      return;\n    }\n    onLoadQueue.push(callback);\n    if (iframeContainerElement) {\n      return;\n    }\n    createContainer(trustedTypesPolicyName);\n  }\n\n  // Successful compilation.\n  function hide() {\n    if (!iframeContainerElement) {\n      return;\n    }\n\n    // Clean up and reset internal state.\n    document.body.removeChild(iframeContainerElement);\n    iframeContainerElement = null;\n    containerElement = null;\n  }\n\n  // Compilation with errors (e.g. syntax error or missing modules).\n  /**\n   * @param {string} type\n   * @param {Array<string  | { moduleIdentifier?: string, moduleName?: string, loc?: string, message?: string }>} messages\n   * @param {string | null} trustedTypesPolicyName\n   * @param {'build' | 'runtime'} messageSource\n   */\n  function show(type, messages, trustedTypesPolicyName, messageSource) {\n    ensureOverlayExists(function () {\n      headerElement.innerText = messageSource === \"runtime\" ? \"Uncaught runtime errors:\" : \"Compiled with problems:\";\n      messages.forEach(function (message) {\n        var entryElement = document.createElement(\"div\");\n        var msgStyle = type === \"warning\" ? msgStyles.warning : msgStyles.error;\n        applyStyle(entryElement, _objectSpread(_objectSpread({}, msgStyle), {}, {\n          padding: \"1rem 1rem 1.5rem 1rem\"\n        }));\n        var typeElement = document.createElement(\"div\");\n        var _formatProblem = formatProblem(type, message),\n          header = _formatProblem.header,\n          body = _formatProblem.body;\n        typeElement.innerText = header;\n        applyStyle(typeElement, msgTypeStyle);\n        if (message.moduleIdentifier) {\n          applyStyle(typeElement, {\n            cursor: \"pointer\"\n          });\n          // element.dataset not supported in IE\n          typeElement.setAttribute(\"data-can-open\", true);\n          typeElement.addEventListener(\"click\", function () {\n            fetch(\"/webpack-dev-server/open-editor?fileName=\".concat(message.moduleIdentifier));\n          });\n        }\n\n        // Make it look similar to our terminal.\n        var text = ansi_html_community__WEBPACK_IMPORTED_MODULE_0___default()(encode(body));\n        var messageTextNode = document.createElement(\"div\");\n        applyStyle(messageTextNode, msgTextStyle);\n        messageTextNode.innerHTML = overlayTrustedTypesPolicy ? overlayTrustedTypesPolicy.createHTML(text) : text;\n        entryElement.appendChild(typeElement);\n        entryElement.appendChild(messageTextNode);\n\n        /** @type {HTMLDivElement} */\n        containerElement.appendChild(entryElement);\n      });\n    }, trustedTypesPolicyName);\n  }\n  var overlayService = createOverlayMachine({\n    showOverlay: function showOverlay(_ref3) {\n      var _ref3$level = _ref3.level,\n        level = _ref3$level === void 0 ? \"error\" : _ref3$level,\n        messages = _ref3.messages,\n        messageSource = _ref3.messageSource;\n      return show(level, messages, options.trustedTypesPolicyName, messageSource);\n    },\n    hideOverlay: hide\n  });\n  if (options.catchRuntimeError) {\n    /**\n     * @param {Error | undefined} error\n     * @param {string} fallbackMessage\n     */\n    var handleError = function handleError(error, fallbackMessage) {\n      var errorObject = error instanceof Error ? error : new Error(error || fallbackMessage);\n      var shouldDisplay = typeof options.catchRuntimeError === \"function\" ? options.catchRuntimeError(errorObject) : true;\n      if (shouldDisplay) {\n        overlayService.send({\n          type: \"RUNTIME_ERROR\",\n          messages: [{\n            message: errorObject.message,\n            stack: parseErrorToStacks(errorObject)\n          }]\n        });\n      }\n    };\n    listenToRuntimeError(function (errorEvent) {\n      // error property may be empty in older browser like IE\n      var error = errorEvent.error,\n        message = errorEvent.message;\n      if (!error && !message) {\n        return;\n      }\n      // if error stack indicates a React error boundary caught the error, do not show overlay.\n      if (error.stack && error.stack.includes(\"invokeGuardedCallbackDev\")) {\n        return;\n      }\n      handleError(error, message);\n    });\n    listenToUnhandledRejection(function (promiseRejectionEvent) {\n      var reason = promiseRejectionEvent.reason;\n      handleError(reason, \"Unknown promise rejection reason\");\n    });\n  }\n  return overlayService;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9vdmVybGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJwYWNrLWRldi1zZXJ2ZXIvY2xpZW50L292ZXJsYXkuanM/ZmEwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0KSB7IHJldHVybiAociA9IF90b1Byb3BlcnR5S2V5KHIpKSBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIHsgdmFsdWU6IHQsIGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAgfSkgOiBlW3JdID0gdCwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbi8vIFRoZSBlcnJvciBvdmVybGF5IGlzIGluc3BpcmVkIChhbmQgbW9zdGx5IGNvcGllZCkgZnJvbSBDcmVhdGUgUmVhY3QgQXBwIChodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2tpbmN1YmF0b3IvY3JlYXRlLXJlYWN0LWFwcClcbi8vIFRoZXksIGluIHR1cm4sIGdvdCBpbnNwaXJlZCBieSB3ZWJwYWNrLWhvdC1taWRkbGV3YXJlIChodHRwczovL2dpdGh1Yi5jb20vZ2xlbmphbWluL3dlYnBhY2staG90LW1pZGRsZXdhcmUpLlxuXG5pbXBvcnQgYW5zaUhUTUwgZnJvbSBcImFuc2ktaHRtbC1jb21tdW5pdHlcIjtcblxuLyoqXG4gKiBAdHlwZSB7KGlucHV0OiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpID0+IHN0cmluZ31cbiAqL1xudmFyIGdldENvZGVQb2ludCA9IFN0cmluZy5wcm90b3R5cGUuY29kZVBvaW50QXQgPyBmdW5jdGlvbiAoaW5wdXQsIHBvc2l0aW9uKSB7XG4gIHJldHVybiBpbnB1dC5jb2RlUG9pbnRBdChwb3NpdGlvbik7XG59IDogZnVuY3Rpb24gKGlucHV0LCBwb3NpdGlvbikge1xuICByZXR1cm4gKGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24pIC0gMHhkODAwKSAqIDB4NDAwICsgaW5wdXQuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpIC0gMHhkYzAwICsgMHgxMDAwMDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hY3JvVGV4dFxuICogQHBhcmFtIHtSZWdFeHB9IG1hY3JvUmVnRXhwXG4gKiBAcGFyYW0geyhpbnB1dDogc3RyaW5nKSA9PiBzdHJpbmd9IG1hY3JvUmVwbGFjZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbnZhciByZXBsYWNlVXNpbmdSZWdFeHAgPSBmdW5jdGlvbiByZXBsYWNlVXNpbmdSZWdFeHAobWFjcm9UZXh0LCBtYWNyb1JlZ0V4cCwgbWFjcm9SZXBsYWNlcikge1xuICBtYWNyb1JlZ0V4cC5sYXN0SW5kZXggPSAwO1xuICB2YXIgcmVwbGFjZU1hdGNoID0gbWFjcm9SZWdFeHAuZXhlYyhtYWNyb1RleHQpO1xuICB2YXIgcmVwbGFjZVJlc3VsdDtcbiAgaWYgKHJlcGxhY2VNYXRjaCkge1xuICAgIHJlcGxhY2VSZXN1bHQgPSBcIlwiO1xuICAgIHZhciByZXBsYWNlTGFzdEluZGV4ID0gMDtcbiAgICBkbyB7XG4gICAgICBpZiAocmVwbGFjZUxhc3RJbmRleCAhPT0gcmVwbGFjZU1hdGNoLmluZGV4KSB7XG4gICAgICAgIHJlcGxhY2VSZXN1bHQgKz0gbWFjcm9UZXh0LnN1YnN0cmluZyhyZXBsYWNlTGFzdEluZGV4LCByZXBsYWNlTWF0Y2guaW5kZXgpO1xuICAgICAgfVxuICAgICAgdmFyIHJlcGxhY2VJbnB1dCA9IHJlcGxhY2VNYXRjaFswXTtcbiAgICAgIHJlcGxhY2VSZXN1bHQgKz0gbWFjcm9SZXBsYWNlcihyZXBsYWNlSW5wdXQpO1xuICAgICAgcmVwbGFjZUxhc3RJbmRleCA9IHJlcGxhY2VNYXRjaC5pbmRleCArIHJlcGxhY2VJbnB1dC5sZW5ndGg7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgICB9IHdoaWxlIChyZXBsYWNlTWF0Y2ggPSBtYWNyb1JlZ0V4cC5leGVjKG1hY3JvVGV4dCkpO1xuICAgIGlmIChyZXBsYWNlTGFzdEluZGV4ICE9PSBtYWNyb1RleHQubGVuZ3RoKSB7XG4gICAgICByZXBsYWNlUmVzdWx0ICs9IG1hY3JvVGV4dC5zdWJzdHJpbmcocmVwbGFjZUxhc3RJbmRleCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcGxhY2VSZXN1bHQgPSBtYWNyb1RleHQ7XG4gIH1cbiAgcmV0dXJuIHJlcGxhY2VSZXN1bHQ7XG59O1xudmFyIHJlZmVyZW5jZXMgPSB7XG4gIFwiPFwiOiBcIiZsdDtcIixcbiAgXCI+XCI6IFwiJmd0O1wiLFxuICAnXCInOiBcIiZxdW90O1wiLFxuICBcIidcIjogXCImYXBvcztcIixcbiAgXCImXCI6IFwiJmFtcDtcIlxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCB0ZXh0XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlbmNvZGUodGV4dCkge1xuICBpZiAoIXRleHQpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICByZXR1cm4gcmVwbGFjZVVzaW5nUmVnRXhwKHRleHQsIC9bPD4nXCImXS9nLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgcmVzdWx0ID0gcmVmZXJlbmNlc1tpbnB1dF07XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHZhciBjb2RlID0gaW5wdXQubGVuZ3RoID4gMSA/IGdldENvZGVQb2ludChpbnB1dCwgMCkgOiBpbnB1dC5jaGFyQ29kZUF0KDApO1xuICAgICAgcmVzdWx0ID0gXCImI1wiLmNvbmNhdChjb2RlLCBcIjtcIik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlRGVmaW5pdGlvbnNcbiAqIEBwcm9wZXJ0eSB7e1tldmVudDogc3RyaW5nXTogeyB0YXJnZXQ6IHN0cmluZzsgYWN0aW9ucz86IEFycmF5PHN0cmluZz4gfX19IFtvbl1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7e1tzdGF0ZTogc3RyaW5nXTogU3RhdGVEZWZpbml0aW9uc319IHN0YXRlc1xuICogQHByb3BlcnR5IHtvYmplY3R9IGNvbnRleHQ7XG4gKiBAcHJvcGVydHkge3N0cmluZ30gaW5pdGlhbFxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSW1wbGVtZW50YXRpb25cbiAqIEBwcm9wZXJ0eSB7e1thY3Rpb25OYW1lOiBzdHJpbmddOiAoY3R4OiBvYmplY3QsIGV2ZW50OiBhbnkpID0+IG9iamVjdH19IGFjdGlvbnNcbiAqL1xuXG4vKipcbiAqIEEgc2ltcGxpZmllZCBgY3JlYXRlTWFjaGluZWAgZnJvbSBgQHhzdGF0ZS9mc21gIHdpdGggdGhlIGZvbGxvd2luZyBkaWZmZXJlbmNlczpcbiAqXG4gKiAgLSB0aGUgcmV0dXJuZWQgbWFjaGluZSBpcyB0ZWNobmljYWxseSBhIFwic2VydmljZVwiLiBObyBgaW50ZXJwcmV0KG1hY2hpbmUpLnN0YXJ0KClgIGlzIG5lZWRlZC5cbiAqICAtIHRoZSBzdGF0ZSBkZWZpbml0aW9uIG9ubHkgc3VwcG9ydCBgb25gIGFuZCB0YXJnZXQgbXVzdCBiZSBkZWNsYXJlZCB3aXRoIHsgdGFyZ2V0OiAnbmV4dFN0YXRlJywgYWN0aW9uczogW10gfSBleHBsaWNpdGx5LlxuICogIC0gZXZlbnQgcGFzc2VkIHRvIGBzZW5kYCBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGB0eXBlYCBwcm9wZXJ0eS5cbiAqICAtIGFjdGlvbnMgaW1wbGVtZW50YXRpb24gd2lsbCBiZSBbYXNzaWduIGFjdGlvbl0oaHR0cHM6Ly94c3RhdGUuanMub3JnL2RvY3MvZ3VpZGVzL2NvbnRleHQuaHRtbCNhc3NpZ24tYWN0aW9uKSBpZiB5b3UgcmV0dXJuIGFueSB2YWx1ZS5cbiAqICBEbyBub3QgcmV0dXJuIGFueXRoaW5nIGlmIHlvdSBqdXN0IHdhbnQgdG8gaW52b2tlIHNpZGUgZWZmZWN0LlxuICpcbiAqIFRoZSBnb2FsIG9mIHRoaXMgY3VzdG9tIGZ1bmN0aW9uIGlzIHRvIGF2b2lkIGluc3RhbGxpbmcgdGhlIGVudGlyZSBgJ3hzdGF0ZS9mc20nYCBwYWNrYWdlLCB3aGlsZSBlbmFibGluZyBtb2RlbGluZyB1c2luZ1xuICogc3RhdGUgbWFjaGluZS4gWW91IGNhbiBjb3B5IHRoZSBmaXJzdCBwYXJhbWV0ZXIgaW50byB0aGUgZWRpdG9yIGF0IGh0dHBzOi8vc3RhdGVseS5haS92aXogdG8gdmlzdWFsaXplIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICpcbiAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9uc1xuICogQHBhcmFtIHtJbXBsZW1lbnRhdGlvbn0gaW1wbGVtZW50YXRpb25cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWFjaGluZShfcmVmLCBfcmVmMikge1xuICB2YXIgc3RhdGVzID0gX3JlZi5zdGF0ZXMsXG4gICAgY29udGV4dCA9IF9yZWYuY29udGV4dCxcbiAgICBpbml0aWFsID0gX3JlZi5pbml0aWFsO1xuICB2YXIgYWN0aW9ucyA9IF9yZWYyLmFjdGlvbnM7XG4gIHZhciBjdXJyZW50U3RhdGUgPSBpbml0aWFsO1xuICB2YXIgY3VycmVudENvbnRleHQgPSBjb250ZXh0O1xuICByZXR1cm4ge1xuICAgIHNlbmQ6IGZ1bmN0aW9uIHNlbmQoZXZlbnQpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGVPbiA9IHN0YXRlc1tjdXJyZW50U3RhdGVdLm9uO1xuICAgICAgdmFyIHRyYW5zaXRpb25Db25maWcgPSBjdXJyZW50U3RhdGVPbiAmJiBjdXJyZW50U3RhdGVPbltldmVudC50eXBlXTtcbiAgICAgIGlmICh0cmFuc2l0aW9uQ29uZmlnKSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IHRyYW5zaXRpb25Db25maWcudGFyZ2V0O1xuICAgICAgICBpZiAodHJhbnNpdGlvbkNvbmZpZy5hY3Rpb25zKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbkNvbmZpZy5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdE5hbWUpIHtcbiAgICAgICAgICAgIHZhciBhY3Rpb25JbXBsID0gYWN0aW9uc1thY3ROYW1lXTtcbiAgICAgICAgICAgIHZhciBuZXh0Q29udGV4dFZhbHVlID0gYWN0aW9uSW1wbCAmJiBhY3Rpb25JbXBsKGN1cnJlbnRDb250ZXh0LCBldmVudCk7XG4gICAgICAgICAgICBpZiAobmV4dENvbnRleHRWYWx1ZSkge1xuICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY3VycmVudENvbnRleHQpLCBuZXh0Q29udGV4dFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTaG93T3ZlcmxheURhdGFcbiAqIEBwcm9wZXJ0eSB7J3dhcm5pbmcnIHwgJ2Vycm9yJ30gbGV2ZWxcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nICB8IHsgbW9kdWxlSWRlbnRpZmllcj86IHN0cmluZywgbW9kdWxlTmFtZT86IHN0cmluZywgbG9jPzogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nIH0+fSBtZXNzYWdlc1xuICogQHByb3BlcnR5IHsnYnVpbGQnIHwgJ3J1bnRpbWUnfSBtZXNzYWdlU291cmNlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDcmVhdGVPdmVybGF5TWFjaGluZU9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7KGRhdGE6IFNob3dPdmVybGF5RGF0YSkgPT4gdm9pZH0gc2hvd092ZXJsYXlcbiAqIEBwcm9wZXJ0eSB7KCkgPT4gdm9pZH0gaGlkZU92ZXJsYXlcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7Q3JlYXRlT3ZlcmxheU1hY2hpbmVPcHRpb25zfSBvcHRpb25zXG4gKi9cbnZhciBjcmVhdGVPdmVybGF5TWFjaGluZSA9IGZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXlNYWNoaW5lKG9wdGlvbnMpIHtcbiAgdmFyIGhpZGVPdmVybGF5ID0gb3B0aW9ucy5oaWRlT3ZlcmxheSxcbiAgICBzaG93T3ZlcmxheSA9IG9wdGlvbnMuc2hvd092ZXJsYXk7XG4gIHJldHVybiBjcmVhdGVNYWNoaW5lKHtcbiAgICBpbml0aWFsOiBcImhpZGRlblwiLFxuICAgIGNvbnRleHQ6IHtcbiAgICAgIGxldmVsOiBcImVycm9yXCIsXG4gICAgICBtZXNzYWdlczogW10sXG4gICAgICBtZXNzYWdlU291cmNlOiBcImJ1aWxkXCJcbiAgICB9LFxuICAgIHN0YXRlczoge1xuICAgICAgaGlkZGVuOiB7XG4gICAgICAgIG9uOiB7XG4gICAgICAgICAgQlVJTERfRVJST1I6IHtcbiAgICAgICAgICAgIHRhcmdldDogXCJkaXNwbGF5QnVpbGRFcnJvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wic2V0TWVzc2FnZXNcIiwgXCJzaG93T3ZlcmxheVwiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgUlVOVElNRV9FUlJPUjoge1xuICAgICAgICAgICAgdGFyZ2V0OiBcImRpc3BsYXlSdW50aW1lRXJyb3JcIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcInNldE1lc3NhZ2VzXCIsIFwic2hvd092ZXJsYXlcIl1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkaXNwbGF5QnVpbGRFcnJvcjoge1xuICAgICAgICBvbjoge1xuICAgICAgICAgIERJU01JU1M6IHtcbiAgICAgICAgICAgIHRhcmdldDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImRpc21pc3NNZXNzYWdlc1wiLCBcImhpZGVPdmVybGF5XCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBCVUlMRF9FUlJPUjoge1xuICAgICAgICAgICAgdGFyZ2V0OiBcImRpc3BsYXlCdWlsZEVycm9yXCIsXG4gICAgICAgICAgICBhY3Rpb25zOiBbXCJhcHBlbmRNZXNzYWdlc1wiLCBcInNob3dPdmVybGF5XCJdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGlzcGxheVJ1bnRpbWVFcnJvcjoge1xuICAgICAgICBvbjoge1xuICAgICAgICAgIERJU01JU1M6IHtcbiAgICAgICAgICAgIHRhcmdldDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcImRpc21pc3NNZXNzYWdlc1wiLCBcImhpZGVPdmVybGF5XCJdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBSVU5USU1FX0VSUk9SOiB7XG4gICAgICAgICAgICB0YXJnZXQ6IFwiZGlzcGxheVJ1bnRpbWVFcnJvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wiYXBwZW5kTWVzc2FnZXNcIiwgXCJzaG93T3ZlcmxheVwiXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgQlVJTERfRVJST1I6IHtcbiAgICAgICAgICAgIHRhcmdldDogXCJkaXNwbGF5QnVpbGRFcnJvclwiLFxuICAgICAgICAgICAgYWN0aW9uczogW1wic2V0TWVzc2FnZXNcIiwgXCJzaG93T3ZlcmxheVwiXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGFjdGlvbnM6IHtcbiAgICAgIGRpc21pc3NNZXNzYWdlczogZnVuY3Rpb24gZGlzbWlzc01lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgICAgICBsZXZlbDogXCJlcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2VTb3VyY2U6IFwiYnVpbGRcIlxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIGFwcGVuZE1lc3NhZ2VzOiBmdW5jdGlvbiBhcHBlbmRNZXNzYWdlcyhjb250ZXh0LCBldmVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2VzOiBjb250ZXh0Lm1lc3NhZ2VzLmNvbmNhdChldmVudC5tZXNzYWdlcyksXG4gICAgICAgICAgbGV2ZWw6IGV2ZW50LmxldmVsIHx8IGNvbnRleHQubGV2ZWwsXG4gICAgICAgICAgbWVzc2FnZVNvdXJjZTogZXZlbnQudHlwZSA9PT0gXCJSVU5USU1FX0VSUk9SXCIgPyBcInJ1bnRpbWVcIiA6IFwiYnVpbGRcIlxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHNldE1lc3NhZ2VzOiBmdW5jdGlvbiBzZXRNZXNzYWdlcyhjb250ZXh0LCBldmVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2VzOiBldmVudC5tZXNzYWdlcyxcbiAgICAgICAgICBsZXZlbDogZXZlbnQubGV2ZWwgfHwgY29udGV4dC5sZXZlbCxcbiAgICAgICAgICBtZXNzYWdlU291cmNlOiBldmVudC50eXBlID09PSBcIlJVTlRJTUVfRVJST1JcIiA/IFwicnVudGltZVwiIDogXCJidWlsZFwiXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgaGlkZU92ZXJsYXk6IGhpZGVPdmVybGF5LFxuICAgICAgc2hvd092ZXJsYXk6IHNob3dPdmVybGF5XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yXG4gKi9cbnZhciBwYXJzZUVycm9yVG9TdGFja3MgPSBmdW5jdGlvbiBwYXJzZUVycm9yVG9TdGFja3MoZXJyb3IpIHtcbiAgaWYgKCFlcnJvciB8fCAhKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwicGFyc2VFcnJvclRvU3RhY2tzIGV4cGVjdHMgRXJyb3Igb2JqZWN0XCIpO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3Iuc3RhY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZXJyb3Iuc3RhY2suc3BsaXQoXCJcXG5cIikuZmlsdGVyKGZ1bmN0aW9uIChzdGFjaykge1xuICAgICAgcmV0dXJuIHN0YWNrICE9PSBcIkVycm9yOiBcIi5jb25jYXQoZXJyb3IubWVzc2FnZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQGNhbGxiYWNrIEVycm9yQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RXJyb3JFdmVudH0gZXJyb3JcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtFcnJvckNhbGxiYWNrfSBjYWxsYmFja1xuICovXG52YXIgbGlzdGVuVG9SdW50aW1lRXJyb3IgPSBmdW5jdGlvbiBsaXN0ZW5Ub1J1bnRpbWVFcnJvcihjYWxsYmFjaykge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGNhbGxiYWNrKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBjYWxsYmFjayk7XG4gIH07XG59O1xuXG4vKipcbiAqIEBjYWxsYmFjayBVbmhhbmRsZWRSZWplY3Rpb25DYWxsYmFja1xuICogQHBhcmFtIHtQcm9taXNlUmVqZWN0aW9uRXZlbnR9IHJlamVjdGlvbkV2ZW50XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7VW5oYW5kbGVkUmVqZWN0aW9uQ2FsbGJhY2t9IGNhbGxiYWNrXG4gKi9cbnZhciBsaXN0ZW5Ub1VuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uIGxpc3RlblRvVW5oYW5kbGVkUmVqZWN0aW9uKGNhbGxiYWNrKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidW5oYW5kbGVkcmVqZWN0aW9uXCIsIGNhbGxiYWNrKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmhhbmRsZWRyZWplY3Rpb25cIiwgY2FsbGJhY2spO1xuICB9O1xufTtcblxuLy8gU3R5bGVzIGFyZSBpbnNwaXJlZCBieSBgcmVhY3QtZXJyb3Itb3ZlcmxheWBcblxudmFyIG1zZ1N0eWxlcyA9IHtcbiAgZXJyb3I6IHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyMDYsIDE3LCAzOCwgMC4xKVwiLFxuICAgIGNvbG9yOiBcIiNmY2NmY2ZcIlxuICB9LFxuICB3YXJuaW5nOiB7XG4gICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjUxLCAyNDUsIDE4MCwgMC4xKVwiLFxuICAgIGNvbG9yOiBcIiNmYmY1YjRcIlxuICB9XG59O1xudmFyIGlmcmFtZVN0eWxlID0ge1xuICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIHJpZ2h0OiAwLFxuICBib3R0b206IDAsXG4gIHdpZHRoOiBcIjEwMHZ3XCIsXG4gIGhlaWdodDogXCIxMDB2aFwiLFxuICBib3JkZXI6IFwibm9uZVwiLFxuICBcInotaW5kZXhcIjogOTk5OTk5OTk5OVxufTtcbnZhciBjb250YWluZXJTdHlsZSA9IHtcbiAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgbGVmdDogMCxcbiAgdG9wOiAwLFxuICByaWdodDogMCxcbiAgYm90dG9tOiAwLFxuICB3aWR0aDogXCIxMDB2d1wiLFxuICBoZWlnaHQ6IFwiMTAwdmhcIixcbiAgZm9udFNpemU6IFwibGFyZ2VcIixcbiAgcGFkZGluZzogXCIycmVtIDJyZW0gNHJlbSAycmVtXCIsXG4gIGxpbmVIZWlnaHQ6IFwiMS4yXCIsXG4gIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgwLCAwLCAwLCAwLjkpXCIsXG4gIGNvbG9yOiBcIndoaXRlXCJcbn07XG52YXIgaGVhZGVyU3R5bGUgPSB7XG4gIGNvbG9yOiBcIiNlODNiNDZcIixcbiAgZm9udFNpemU6IFwiMmVtXCIsXG4gIHdoaXRlU3BhY2U6IFwicHJlLXdyYXBcIixcbiAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gIG1hcmdpbjogXCIwIDJyZW0gMnJlbSAwXCIsXG4gIGZsZXg6IFwiMCAwIGF1dG9cIixcbiAgbWF4SGVpZ2h0OiBcIjUwJVwiLFxuICBvdmVyZmxvdzogXCJhdXRvXCJcbn07XG52YXIgZGlzbWlzc0J1dHRvblN0eWxlID0ge1xuICBjb2xvcjogXCIjZmZmZmZmXCIsXG4gIGxpbmVIZWlnaHQ6IFwiMXJlbVwiLFxuICBmb250U2l6ZTogXCIxLjVyZW1cIixcbiAgcGFkZGluZzogXCIxcmVtXCIsXG4gIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gIHJpZ2h0OiAwLFxuICB0b3A6IDAsXG4gIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICBib3JkZXI6IFwibm9uZVwiXG59O1xudmFyIG1zZ1R5cGVTdHlsZSA9IHtcbiAgY29sb3I6IFwiI2U4M2I0NlwiLFxuICBmb250U2l6ZTogXCIxLjJlbVwiLFxuICBtYXJnaW5Cb3R0b206IFwiMXJlbVwiLFxuICBmb250RmFtaWx5OiBcInNhbnMtc2VyaWZcIlxufTtcbnZhciBtc2dUZXh0U3R5bGUgPSB7XG4gIGxpbmVIZWlnaHQ6IFwiMS41XCIsXG4gIGZvbnRTaXplOiBcIjFyZW1cIixcbiAgZm9udEZhbWlseTogXCJNZW5sbywgQ29uc29sYXMsIG1vbm9zcGFjZVwiXG59O1xuXG4vLyBBTlNJIEhUTUxcblxudmFyIGNvbG9ycyA9IHtcbiAgcmVzZXQ6IFtcInRyYW5zcGFyZW50XCIsIFwidHJhbnNwYXJlbnRcIl0sXG4gIGJsYWNrOiBcIjE4MTgxOFwiLFxuICByZWQ6IFwiRTM2MDQ5XCIsXG4gIGdyZWVuOiBcIkIzQ0I3NFwiLFxuICB5ZWxsb3c6IFwiRkZEMDgwXCIsXG4gIGJsdWU6IFwiN0NBRkMyXCIsXG4gIG1hZ2VudGE6IFwiN0ZBQ0NBXCIsXG4gIGN5YW46IFwiQzNDMkVGXCIsXG4gIGxpZ2h0Z3JleTogXCJFQkU3RTNcIixcbiAgZGFya2dyZXk6IFwiNkQ3ODkxXCJcbn07XG5hbnNpSFRNTC5zZXRDb2xvcnMoY29sb3JzKTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtzdHJpbmcgIHwgeyBmaWxlPzogc3RyaW5nLCBtb2R1bGVOYW1lPzogc3RyaW5nLCBsb2M/OiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmc7IHN0YWNrPzogc3RyaW5nW10gfX0gaXRlbVxuICogQHJldHVybnMge3sgaGVhZGVyOiBzdHJpbmcsIGJvZHk6IHN0cmluZyB9fVxuICovXG52YXIgZm9ybWF0UHJvYmxlbSA9IGZ1bmN0aW9uIGZvcm1hdFByb2JsZW0odHlwZSwgaXRlbSkge1xuICB2YXIgaGVhZGVyID0gdHlwZSA9PT0gXCJ3YXJuaW5nXCIgPyBcIldBUk5JTkdcIiA6IFwiRVJST1JcIjtcbiAgdmFyIGJvZHkgPSBcIlwiO1xuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICBib2R5ICs9IGl0ZW07XG4gIH0gZWxzZSB7XG4gICAgdmFyIGZpbGUgPSBpdGVtLmZpbGUgfHwgXCJcIjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICB2YXIgbW9kdWxlTmFtZSA9IGl0ZW0ubW9kdWxlTmFtZSA/IGl0ZW0ubW9kdWxlTmFtZS5pbmRleE9mKFwiIVwiKSAhPT0gLTEgPyBcIlwiLmNvbmNhdChpdGVtLm1vZHVsZU5hbWUucmVwbGFjZSgvXihcXHN8XFxTKSohLywgXCJcIiksIFwiIChcIikuY29uY2F0KGl0ZW0ubW9kdWxlTmFtZSwgXCIpXCIpIDogXCJcIi5jb25jYXQoaXRlbS5tb2R1bGVOYW1lKSA6IFwiXCI7XG4gICAgdmFyIGxvYyA9IGl0ZW0ubG9jO1xuICAgIGhlYWRlciArPSBcIlwiLmNvbmNhdChtb2R1bGVOYW1lIHx8IGZpbGUgPyBcIiBpbiBcIi5jb25jYXQobW9kdWxlTmFtZSA/IFwiXCIuY29uY2F0KG1vZHVsZU5hbWUpLmNvbmNhdChmaWxlID8gXCIgKFwiLmNvbmNhdChmaWxlLCBcIilcIikgOiBcIlwiKSA6IGZpbGUpLmNvbmNhdChsb2MgPyBcIiBcIi5jb25jYXQobG9jKSA6IFwiXCIpIDogXCJcIik7XG4gICAgYm9keSArPSBpdGVtLm1lc3NhZ2UgfHwgXCJcIjtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShpdGVtLnN0YWNrKSkge1xuICAgIGl0ZW0uc3RhY2suZm9yRWFjaChmdW5jdGlvbiAoc3RhY2spIHtcbiAgICAgIGlmICh0eXBlb2Ygc3RhY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgYm9keSArPSBcIlxcclxcblwiLmNvbmNhdChzdGFjayk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBoZWFkZXI6IGhlYWRlcixcbiAgICBib2R5OiBib2R5XG4gIH07XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENyZWF0ZU92ZXJsYXlPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZyB8IG51bGx9IHRydXN0ZWRUeXBlc1BvbGljeU5hbWVcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbiB8IChlcnJvcjogRXJyb3IpID0+IHZvaWR9IFtjYXRjaFJ1bnRpbWVFcnJvcl1cbiAqL1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge0NyZWF0ZU92ZXJsYXlPcHRpb25zfSBvcHRpb25zXG4gKi9cbnZhciBjcmVhdGVPdmVybGF5ID0gZnVuY3Rpb24gY3JlYXRlT3ZlcmxheShvcHRpb25zKSB7XG4gIC8qKiBAdHlwZSB7SFRNTElGcmFtZUVsZW1lbnQgfCBudWxsIHwgdW5kZWZpbmVkfSAqL1xuICB2YXIgaWZyYW1lQ29udGFpbmVyRWxlbWVudDtcbiAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWR9ICovXG4gIHZhciBjb250YWluZXJFbGVtZW50O1xuICAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50IHwgbnVsbCB8IHVuZGVmaW5lZH0gKi9cbiAgdmFyIGhlYWRlckVsZW1lbnQ7XG4gIC8qKiBAdHlwZSB7QXJyYXk8KGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSA9PiB2b2lkPn0gKi9cbiAgdmFyIG9uTG9hZFF1ZXVlID0gW107XG4gIC8qKiBAdHlwZSB7VHJ1c3RlZFR5cGVQb2xpY3kgfCB1bmRlZmluZWR9ICovXG4gIHZhciBvdmVybGF5VHJ1c3RlZFR5cGVzUG9saWN5O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7Q1NTU3R5bGVEZWNsYXJhdGlvbn0gc3R5bGVcbiAgICovXG4gIGZ1bmN0aW9uIGFwcGx5U3R5bGUoZWxlbWVudCwgc3R5bGUpIHtcbiAgICBPYmplY3Qua2V5cyhzdHlsZSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHN0eWxlW3Byb3BdO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbH0gdHJ1c3RlZFR5cGVzUG9saWN5TmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ29udGFpbmVyKHRydXN0ZWRUeXBlc1BvbGljeU5hbWUpIHtcbiAgICAvLyBFbmFibGUgVHJ1c3RlZCBUeXBlcyBpZiB0aGV5IGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAgICBpZiAod2luZG93LnRydXN0ZWRUeXBlcykge1xuICAgICAgb3ZlcmxheVRydXN0ZWRUeXBlc1BvbGljeSA9IHdpbmRvdy50cnVzdGVkVHlwZXMuY3JlYXRlUG9saWN5KHRydXN0ZWRUeXBlc1BvbGljeU5hbWUgfHwgXCJ3ZWJwYWNrLWRldi1zZXJ2ZXIjb3ZlcmxheVwiLCB7XG4gICAgICAgIGNyZWF0ZUhUTUw6IGZ1bmN0aW9uIGNyZWF0ZUhUTUwodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZnJhbWVDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICBpZnJhbWVDb250YWluZXJFbGVtZW50LmlkID0gXCJ3ZWJwYWNrLWRldi1zZXJ2ZXItY2xpZW50LW92ZXJsYXlcIjtcbiAgICBpZnJhbWVDb250YWluZXJFbGVtZW50LnNyYyA9IFwiYWJvdXQ6YmxhbmtcIjtcbiAgICBhcHBseVN0eWxlKGlmcmFtZUNvbnRhaW5lckVsZW1lbnQsIGlmcmFtZVN0eWxlKTtcbiAgICBpZnJhbWVDb250YWluZXJFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb250ZW50RWxlbWVudCA9IC8qKiBAdHlwZSB7RG9jdW1lbnR9ICovXG4gICAgICAoLyoqIEB0eXBlIHtIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICAgIGlmcmFtZUNvbnRhaW5lckVsZW1lbnQuY29udGVudERvY3VtZW50KS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29udGFpbmVyRWxlbWVudCA9IC8qKiBAdHlwZSB7RG9jdW1lbnR9ICovXG4gICAgICAoLyoqIEB0eXBlIHtIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICAgIGlmcmFtZUNvbnRhaW5lckVsZW1lbnQuY29udGVudERvY3VtZW50KS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29udGVudEVsZW1lbnQuaWQgPSBcIndlYnBhY2stZGV2LXNlcnZlci1jbGllbnQtb3ZlcmxheS1kaXZcIjtcbiAgICAgIGFwcGx5U3R5bGUoY29udGVudEVsZW1lbnQsIGNvbnRhaW5lclN0eWxlKTtcbiAgICAgIGhlYWRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaGVhZGVyRWxlbWVudC5pbm5lclRleHQgPSBcIkNvbXBpbGVkIHdpdGggcHJvYmxlbXM6XCI7XG4gICAgICBhcHBseVN0eWxlKGhlYWRlckVsZW1lbnQsIGhlYWRlclN0eWxlKTtcbiAgICAgIHZhciBjbG9zZUJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgYXBwbHlTdHlsZShjbG9zZUJ1dHRvbkVsZW1lbnQsIGRpc21pc3NCdXR0b25TdHlsZSk7XG4gICAgICBjbG9zZUJ1dHRvbkVsZW1lbnQuaW5uZXJUZXh0ID0gXCLDl1wiO1xuICAgICAgY2xvc2VCdXR0b25FbGVtZW50LmFyaWFMYWJlbCA9IFwiRGlzbWlzc1wiO1xuICAgICAgY2xvc2VCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBvdmVybGF5U2VydmljZS5zZW5kKHtcbiAgICAgICAgICB0eXBlOiBcIkRJU01JU1NcIlxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgY29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoaGVhZGVyRWxlbWVudCk7XG4gICAgICBjb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbkVsZW1lbnQpO1xuICAgICAgY29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyRWxlbWVudCk7XG5cbiAgICAgIC8qKiBAdHlwZSB7RG9jdW1lbnR9ICovXG4gICAgICAoLyoqIEB0eXBlIHtIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICAgIGlmcmFtZUNvbnRhaW5lckVsZW1lbnQuY29udGVudERvY3VtZW50KS5ib2R5LmFwcGVuZENoaWxkKGNvbnRlbnRFbGVtZW50KTtcbiAgICAgIG9uTG9hZFF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKG9uTG9hZCkge1xuICAgICAgICBvbkxvYWQoLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi9jb250ZW50RWxlbWVudCk7XG4gICAgICB9KTtcbiAgICAgIG9uTG9hZFF1ZXVlID0gW107XG5cbiAgICAgIC8qKiBAdHlwZSB7SFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgICBpZnJhbWVDb250YWluZXJFbGVtZW50Lm9ubG9hZCA9IG51bGw7XG4gICAgfTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZUNvbnRhaW5lckVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7KGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSA9PiB2b2lkfSBjYWxsYmFja1xuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGx9IHRydXN0ZWRUeXBlc1BvbGljeU5hbWVcbiAgICovXG4gIGZ1bmN0aW9uIGVuc3VyZU92ZXJsYXlFeGlzdHMoY2FsbGJhY2ssIHRydXN0ZWRUeXBlc1BvbGljeU5hbWUpIHtcbiAgICBpZiAoY29udGFpbmVyRWxlbWVudCkge1xuICAgICAgY29udGFpbmVyRWxlbWVudC5pbm5lckhUTUwgPSBvdmVybGF5VHJ1c3RlZFR5cGVzUG9saWN5ID8gb3ZlcmxheVRydXN0ZWRUeXBlc1BvbGljeS5jcmVhdGVIVE1MKFwiXCIpIDogXCJcIjtcbiAgICAgIC8vIEV2ZXJ5dGhpbmcgaXMgcmVhZHksIGNhbGwgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkuXG4gICAgICBjYWxsYmFjayhjb250YWluZXJFbGVtZW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb25Mb2FkUXVldWUucHVzaChjYWxsYmFjayk7XG4gICAgaWYgKGlmcmFtZUNvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY3JlYXRlQ29udGFpbmVyKHRydXN0ZWRUeXBlc1BvbGljeU5hbWUpO1xuICB9XG5cbiAgLy8gU3VjY2Vzc2Z1bCBjb21waWxhdGlvbi5cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoIWlmcmFtZUNvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCBhbmQgcmVzZXQgaW50ZXJuYWwgc3RhdGUuXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWVDb250YWluZXJFbGVtZW50KTtcbiAgICBpZnJhbWVDb250YWluZXJFbGVtZW50ID0gbnVsbDtcbiAgICBjb250YWluZXJFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8vIENvbXBpbGF0aW9uIHdpdGggZXJyb3JzIChlLmcuIHN5bnRheCBlcnJvciBvciBtaXNzaW5nIG1vZHVsZXMpLlxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmcgIHwgeyBtb2R1bGVJZGVudGlmaWVyPzogc3RyaW5nLCBtb2R1bGVOYW1lPzogc3RyaW5nLCBsb2M/OiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcgfT59IG1lc3NhZ2VzXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbH0gdHJ1c3RlZFR5cGVzUG9saWN5TmFtZVxuICAgKiBAcGFyYW0geydidWlsZCcgfCAncnVudGltZSd9IG1lc3NhZ2VTb3VyY2VcbiAgICovXG4gIGZ1bmN0aW9uIHNob3codHlwZSwgbWVzc2FnZXMsIHRydXN0ZWRUeXBlc1BvbGljeU5hbWUsIG1lc3NhZ2VTb3VyY2UpIHtcbiAgICBlbnN1cmVPdmVybGF5RXhpc3RzKGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlYWRlckVsZW1lbnQuaW5uZXJUZXh0ID0gbWVzc2FnZVNvdXJjZSA9PT0gXCJydW50aW1lXCIgPyBcIlVuY2F1Z2h0IHJ1bnRpbWUgZXJyb3JzOlwiIDogXCJDb21waWxlZCB3aXRoIHByb2JsZW1zOlwiO1xuICAgICAgbWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgZW50cnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFyIG1zZ1N0eWxlID0gdHlwZSA9PT0gXCJ3YXJuaW5nXCIgPyBtc2dTdHlsZXMud2FybmluZyA6IG1zZ1N0eWxlcy5lcnJvcjtcbiAgICAgICAgYXBwbHlTdHlsZShlbnRyeUVsZW1lbnQsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbXNnU3R5bGUpLCB7fSwge1xuICAgICAgICAgIHBhZGRpbmc6IFwiMXJlbSAxcmVtIDEuNXJlbSAxcmVtXCJcbiAgICAgICAgfSkpO1xuICAgICAgICB2YXIgdHlwZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB2YXIgX2Zvcm1hdFByb2JsZW0gPSBmb3JtYXRQcm9ibGVtKHR5cGUsIG1lc3NhZ2UpLFxuICAgICAgICAgIGhlYWRlciA9IF9mb3JtYXRQcm9ibGVtLmhlYWRlcixcbiAgICAgICAgICBib2R5ID0gX2Zvcm1hdFByb2JsZW0uYm9keTtcbiAgICAgICAgdHlwZUVsZW1lbnQuaW5uZXJUZXh0ID0gaGVhZGVyO1xuICAgICAgICBhcHBseVN0eWxlKHR5cGVFbGVtZW50LCBtc2dUeXBlU3R5bGUpO1xuICAgICAgICBpZiAobWVzc2FnZS5tb2R1bGVJZGVudGlmaWVyKSB7XG4gICAgICAgICAgYXBwbHlTdHlsZSh0eXBlRWxlbWVudCwge1xuICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIGVsZW1lbnQuZGF0YXNldCBub3Qgc3VwcG9ydGVkIGluIElFXG4gICAgICAgICAgdHlwZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jYW4tb3BlblwiLCB0cnVlKTtcbiAgICAgICAgICB0eXBlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZmV0Y2goXCIvd2VicGFjay1kZXYtc2VydmVyL29wZW4tZWRpdG9yP2ZpbGVOYW1lPVwiLmNvbmNhdChtZXNzYWdlLm1vZHVsZUlkZW50aWZpZXIpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgaXQgbG9vayBzaW1pbGFyIHRvIG91ciB0ZXJtaW5hbC5cbiAgICAgICAgdmFyIHRleHQgPSBhbnNpSFRNTChlbmNvZGUoYm9keSkpO1xuICAgICAgICB2YXIgbWVzc2FnZVRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgYXBwbHlTdHlsZShtZXNzYWdlVGV4dE5vZGUsIG1zZ1RleHRTdHlsZSk7XG4gICAgICAgIG1lc3NhZ2VUZXh0Tm9kZS5pbm5lckhUTUwgPSBvdmVybGF5VHJ1c3RlZFR5cGVzUG9saWN5ID8gb3ZlcmxheVRydXN0ZWRUeXBlc1BvbGljeS5jcmVhdGVIVE1MKHRleHQpIDogdGV4dDtcbiAgICAgICAgZW50cnlFbGVtZW50LmFwcGVuZENoaWxkKHR5cGVFbGVtZW50KTtcbiAgICAgICAgZW50cnlFbGVtZW50LmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0Tm9kZSk7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi9cbiAgICAgICAgY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChlbnRyeUVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSwgdHJ1c3RlZFR5cGVzUG9saWN5TmFtZSk7XG4gIH1cbiAgdmFyIG92ZXJsYXlTZXJ2aWNlID0gY3JlYXRlT3ZlcmxheU1hY2hpbmUoe1xuICAgIHNob3dPdmVybGF5OiBmdW5jdGlvbiBzaG93T3ZlcmxheShfcmVmMykge1xuICAgICAgdmFyIF9yZWYzJGxldmVsID0gX3JlZjMubGV2ZWwsXG4gICAgICAgIGxldmVsID0gX3JlZjMkbGV2ZWwgPT09IHZvaWQgMCA/IFwiZXJyb3JcIiA6IF9yZWYzJGxldmVsLFxuICAgICAgICBtZXNzYWdlcyA9IF9yZWYzLm1lc3NhZ2VzLFxuICAgICAgICBtZXNzYWdlU291cmNlID0gX3JlZjMubWVzc2FnZVNvdXJjZTtcbiAgICAgIHJldHVybiBzaG93KGxldmVsLCBtZXNzYWdlcywgb3B0aW9ucy50cnVzdGVkVHlwZXNQb2xpY3lOYW1lLCBtZXNzYWdlU291cmNlKTtcbiAgICB9LFxuICAgIGhpZGVPdmVybGF5OiBoaWRlXG4gIH0pO1xuICBpZiAob3B0aW9ucy5jYXRjaFJ1bnRpbWVFcnJvcikge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXJyb3IgfCB1bmRlZmluZWR9IGVycm9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZhbGxiYWNrTWVzc2FnZVxuICAgICAqL1xuICAgIHZhciBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yLCBmYWxsYmFja01lc3NhZ2UpIHtcbiAgICAgIHZhciBlcnJvck9iamVjdCA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvciB8fCBmYWxsYmFja01lc3NhZ2UpO1xuICAgICAgdmFyIHNob3VsZERpc3BsYXkgPSB0eXBlb2Ygb3B0aW9ucy5jYXRjaFJ1bnRpbWVFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucy5jYXRjaFJ1bnRpbWVFcnJvcihlcnJvck9iamVjdCkgOiB0cnVlO1xuICAgICAgaWYgKHNob3VsZERpc3BsYXkpIHtcbiAgICAgICAgb3ZlcmxheVNlcnZpY2Uuc2VuZCh7XG4gICAgICAgICAgdHlwZTogXCJSVU5USU1FX0VSUk9SXCIsXG4gICAgICAgICAgbWVzc2FnZXM6IFt7XG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvck9iamVjdC5tZXNzYWdlLFxuICAgICAgICAgICAgc3RhY2s6IHBhcnNlRXJyb3JUb1N0YWNrcyhlcnJvck9iamVjdClcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxpc3RlblRvUnVudGltZUVycm9yKGZ1bmN0aW9uIChlcnJvckV2ZW50KSB7XG4gICAgICAvLyBlcnJvciBwcm9wZXJ0eSBtYXkgYmUgZW1wdHkgaW4gb2xkZXIgYnJvd3NlciBsaWtlIElFXG4gICAgICB2YXIgZXJyb3IgPSBlcnJvckV2ZW50LmVycm9yLFxuICAgICAgICBtZXNzYWdlID0gZXJyb3JFdmVudC5tZXNzYWdlO1xuICAgICAgaWYgKCFlcnJvciAmJiAhbWVzc2FnZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBpZiBlcnJvciBzdGFjayBpbmRpY2F0ZXMgYSBSZWFjdCBlcnJvciBib3VuZGFyeSBjYXVnaHQgdGhlIGVycm9yLCBkbyBub3Qgc2hvdyBvdmVybGF5LlxuICAgICAgaWYgKGVycm9yLnN0YWNrICYmIGVycm9yLnN0YWNrLmluY2x1ZGVzKFwiaW52b2tlR3VhcmRlZENhbGxiYWNrRGV2XCIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUVycm9yKGVycm9yLCBtZXNzYWdlKTtcbiAgICB9KTtcbiAgICBsaXN0ZW5Ub1VuaGFuZGxlZFJlamVjdGlvbihmdW5jdGlvbiAocHJvbWlzZVJlamVjdGlvbkV2ZW50KSB7XG4gICAgICB2YXIgcmVhc29uID0gcHJvbWlzZVJlamVjdGlvbkV2ZW50LnJlYXNvbjtcbiAgICAgIGhhbmRsZUVycm9yKHJlYXNvbiwgXCJVbmtub3duIHByb21pc2UgcmVqZWN0aW9uIHJlYXNvblwiKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gb3ZlcmxheVNlcnZpY2U7XG59O1xuZXhwb3J0IHsgZm9ybWF0UHJvYmxlbSwgY3JlYXRlT3ZlcmxheSB9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/overlay.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/progress.js":
/*!************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/progress.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineProgressElement: () => (/* binding */ defineProgressElement),\n/* harmony export */   isProgressSupported: () => (/* binding */ isProgressSupported)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _wrapNativeSuper(t) { var r = \"function\" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf(\"[native code]\"); } catch (n) { return \"function\" == typeof t; } }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nfunction isProgressSupported() {\n  return \"customElements\" in self && !!HTMLElement.prototype.attachShadow;\n}\nfunction defineProgressElement() {\n  var _WebpackDevServerProgress;\n  if (customElements.get(\"wds-progress\")) {\n    return;\n  }\n  var _WebpackDevServerProgress_brand = /*#__PURE__*/new WeakSet();\n  var WebpackDevServerProgress = /*#__PURE__*/function (_HTMLElement) {\n    function WebpackDevServerProgress() {\n      var _this;\n      _classCallCheck(this, WebpackDevServerProgress);\n      _this = _callSuper(this, WebpackDevServerProgress);\n      _classPrivateMethodInitSpec(_this, _WebpackDevServerProgress_brand);\n      _this.attachShadow({\n        mode: \"open\"\n      });\n      _this.maxDashOffset = -219.99078369140625;\n      _this.animationTimer = null;\n      return _this;\n    }\n    _inherits(WebpackDevServerProgress, _HTMLElement);\n    return _createClass(WebpackDevServerProgress, [{\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _assertClassBrand(_WebpackDevServerProgress_brand, this, _reset).call(this);\n      }\n    }, {\n      key: \"attributeChangedCallback\",\n      value: function attributeChangedCallback(name, oldValue, newValue) {\n        if (name === \"progress\") {\n          _assertClassBrand(_WebpackDevServerProgress_brand, this, _update).call(this, Number(newValue));\n        } else if (name === \"type\") {\n          _assertClassBrand(_WebpackDevServerProgress_brand, this, _reset).call(this);\n        }\n      }\n    }], [{\n      key: \"observedAttributes\",\n      get: function get() {\n        return [\"progress\", \"type\"];\n      }\n    }]);\n  }(/*#__PURE__*/_wrapNativeSuper(HTMLElement));\n  _WebpackDevServerProgress = WebpackDevServerProgress;\n  function _reset() {\n    var _this$getAttribute, _Number;\n    clearTimeout(this.animationTimer);\n    this.animationTimer = null;\n    var typeAttr = (_this$getAttribute = this.getAttribute(\"type\")) === null || _this$getAttribute === void 0 ? void 0 : _this$getAttribute.toLowerCase();\n    this.type = typeAttr === \"circular\" ? \"circular\" : \"linear\";\n    var innerHTML = this.type === \"circular\" ? _circularTemplate.call(_WebpackDevServerProgress) : _linearTemplate.call(_WebpackDevServerProgress);\n    this.shadowRoot.innerHTML = innerHTML;\n    this.initialProgress = (_Number = Number(this.getAttribute(\"progress\"))) !== null && _Number !== void 0 ? _Number : 0;\n    _assertClassBrand(_WebpackDevServerProgress_brand, this, _update).call(this, this.initialProgress);\n  }\n  function _circularTemplate() {\n    return \"\\n        <style>\\n        :host {\\n            width: 200px;\\n            height: 200px;\\n            position: fixed;\\n            right: 5%;\\n            top: 5%;\\n            transition: opacity .25s ease-in-out;\\n            z-index: 2147483645;\\n        }\\n\\n        circle {\\n            fill: #282d35;\\n        }\\n\\n        path {\\n            fill: rgba(0, 0, 0, 0);\\n            stroke: rgb(186, 223, 172);\\n            stroke-dasharray: 219.99078369140625;\\n            stroke-dashoffset: -219.99078369140625;\\n            stroke-width: 10;\\n            transform: rotate(90deg) translate(0px, -80px);\\n        }\\n\\n        text {\\n            font-family: 'Open Sans', sans-serif;\\n            font-size: 18px;\\n            fill: #ffffff;\\n            dominant-baseline: middle;\\n            text-anchor: middle;\\n        }\\n\\n        tspan#percent-super {\\n            fill: #bdc3c7;\\n            font-size: 0.45em;\\n            baseline-shift: 10%;\\n        }\\n\\n        @keyframes fade {\\n            0% { opacity: 1; transform: scale(1); }\\n            100% { opacity: 0; transform: scale(0); }\\n        }\\n\\n        .disappear {\\n            animation: fade 0.3s;\\n            animation-fill-mode: forwards;\\n            animation-delay: 0.5s;\\n        }\\n\\n        .hidden {\\n            display: none;\\n        }\\n        </style>\\n        <svg id=\\\"progress\\\" class=\\\"hidden noselect\\\" viewBox=\\\"0 0 80 80\\\">\\n        <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"35\\\"></circle>\\n        <path d=\\\"M5,40a35,35 0 1,0 70,0a35,35 0 1,0 -70,0\\\"></path>\\n        <text x=\\\"50%\\\" y=\\\"51%\\\">\\n            <tspan id=\\\"percent-value\\\">0</tspan>\\n            <tspan id=\\\"percent-super\\\">%</tspan>\\n        </text>\\n        </svg>\\n      \";\n  }\n  function _linearTemplate() {\n    return \"\\n        <style>\\n        :host {\\n            position: fixed;\\n            top: 0;\\n            left: 0;\\n            height: 4px;\\n            width: 100vw;\\n            z-index: 2147483645;\\n        }\\n\\n        #bar {\\n            width: 0%;\\n            height: 4px;\\n            background-color: rgb(186, 223, 172);\\n        }\\n\\n        @keyframes fade {\\n            0% { opacity: 1; }\\n            100% { opacity: 0; }\\n        }\\n\\n        .disappear {\\n            animation: fade 0.3s;\\n            animation-fill-mode: forwards;\\n            animation-delay: 0.5s;\\n        }\\n\\n        .hidden {\\n            display: none;\\n        }\\n        </style>\\n        <div id=\\\"progress\\\"></div>\\n        \";\n  }\n  function _update(percent) {\n    var element = this.shadowRoot.querySelector(\"#progress\");\n    if (this.type === \"circular\") {\n      var path = this.shadowRoot.querySelector(\"path\");\n      var value = this.shadowRoot.querySelector(\"#percent-value\");\n      var offset = (100 - percent) / 100 * this.maxDashOffset;\n      path.style.strokeDashoffset = offset;\n      value.textContent = percent;\n    } else {\n      element.style.width = \"\".concat(percent, \"%\");\n    }\n    if (percent >= 100) {\n      _assertClassBrand(_WebpackDevServerProgress_brand, this, _hide).call(this);\n    } else if (percent > 0) {\n      _assertClassBrand(_WebpackDevServerProgress_brand, this, _show).call(this);\n    }\n  }\n  function _show() {\n    var element = this.shadowRoot.querySelector(\"#progress\");\n    element.classList.remove(\"hidden\");\n  }\n  function _hide() {\n    var _this2 = this;\n    var element = this.shadowRoot.querySelector(\"#progress\");\n    if (this.type === \"circular\") {\n      element.classList.add(\"disappear\");\n      element.addEventListener(\"animationend\", function () {\n        element.classList.add(\"hidden\");\n        _assertClassBrand(_WebpackDevServerProgress_brand, _this2, _update).call(_this2, 0);\n      }, {\n        once: true\n      });\n    } else if (this.type === \"linear\") {\n      element.classList.add(\"disappear\");\n      this.animationTimer = setTimeout(function () {\n        element.classList.remove(\"disappear\");\n        element.classList.add(\"hidden\");\n        element.style.width = \"0%\";\n        _this2.animationTimer = null;\n      }, 800);\n    }\n  }\n  customElements.define(\"wds-progress\", WebpackDevServerProgress);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9wcm9ncmVzcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9wcm9ncmVzcy5qcz9mMGJlIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhhLCBuKSB7IGlmICghKGEgaW5zdGFuY2VvZiBuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXMoZSwgcikgeyBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsgdmFyIG8gPSByW3RdOyBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsIG8uY29uZmlndXJhYmxlID0gITAsIFwidmFsdWVcIiBpbiBvICYmIChvLndyaXRhYmxlID0gITApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgX3RvUHJvcGVydHlLZXkoby5rZXkpLCBvKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoZSwgciwgdCkgeyByZXR1cm4gciAmJiBfZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSwgciksIHQgJiYgX2RlZmluZVByb3BlcnRpZXMoZSwgdCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiAhMSB9KSwgZTsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBlKSB7IGlmIChlICYmIChcIm9iamVjdFwiID09IF90eXBlb2YoZSkgfHwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlKSkgcmV0dXJuIGU7IGlmICh2b2lkIDAgIT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQodCk7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoZSkgeyBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IHJldHVybiBlOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHModCwgZSkgeyBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlICYmIG51bGwgIT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGUgJiYgZS5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHQsIHdyaXRhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCB9IH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogITEgfSksIGUgJiYgX3NldFByb3RvdHlwZU9mKHQsIGUpOyB9XG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKHQpIHsgdmFyIHIgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIE1hcCA/IG5ldyBNYXAoKSA6IHZvaWQgMDsgcmV0dXJuIF93cmFwTmF0aXZlU3VwZXIgPSBmdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKHQpIHsgaWYgKG51bGwgPT09IHQgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKHQpKSByZXR1cm4gdDsgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyBpZiAodm9pZCAwICE9PSByKSB7IGlmIChyLmhhcyh0KSkgcmV0dXJuIHIuZ2V0KHQpOyByLnNldCh0LCBXcmFwcGVyKTsgfSBmdW5jdGlvbiBXcmFwcGVyKCkgeyByZXR1cm4gX2NvbnN0cnVjdCh0LCBhcmd1bWVudHMsIF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7IH0gcmV0dXJuIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogV3JhcHBlciwgZW51bWVyYWJsZTogITEsIHdyaXRhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCB9IH0pLCBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgdCk7IH0sIF93cmFwTmF0aXZlU3VwZXIodCk7IH1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QodCwgZSwgcikgeyBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgdmFyIG8gPSBbbnVsbF07IG8ucHVzaC5hcHBseShvLCBlKTsgdmFyIHAgPSBuZXcgKHQuYmluZC5hcHBseSh0LCBvKSkoKTsgcmV0dXJuIHIgJiYgX3NldFByb3RvdHlwZU9mKHAsIHIucHJvdG90eXBlKSwgcDsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbih0KSB7IHRyeSB7IHJldHVybiAtMSAhPT0gRnVuY3Rpb24udG9TdHJpbmcuY2FsbCh0KS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKTsgfSBjYXRjaCAobikgeyByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0OyB9IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZih0LCBlKSB7IHJldHVybiBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gKHQsIGUpIHsgcmV0dXJuIHQuX19wcm90b19fID0gZSwgdDsgfSwgX3NldFByb3RvdHlwZU9mKHQsIGUpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YodCkgeyByZXR1cm4gX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7IH0sIF9nZXRQcm90b3R5cGVPZih0KTsgfVxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZU1ldGhvZEluaXRTcGVjKGUsIGEpIHsgX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24oZSwgYSksIGEuYWRkKGUpOyB9XG5mdW5jdGlvbiBfY2hlY2tQcml2YXRlUmVkZWNsYXJhdGlvbihlLCB0KSB7IGlmICh0LmhhcyhlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBpbml0aWFsaXplIHRoZSBzYW1lIHByaXZhdGUgZWxlbWVudHMgdHdpY2Ugb24gYW4gb2JqZWN0XCIpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0Q2xhc3NCcmFuZChlLCB0LCBuKSB7IGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBlID09PSB0IDogZS5oYXModCkpIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHQgOiBuOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBlbGVtZW50IGlzIG5vdCBwcmVzZW50IG9uIHRoaXMgb2JqZWN0XCIpOyB9XG5leHBvcnQgZnVuY3Rpb24gaXNQcm9ncmVzc1N1cHBvcnRlZCgpIHtcbiAgcmV0dXJuIFwiY3VzdG9tRWxlbWVudHNcIiBpbiBzZWxmICYmICEhSFRNTEVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVQcm9ncmVzc0VsZW1lbnQoKSB7XG4gIHZhciBfV2VicGFja0RldlNlcnZlclByb2dyZXNzO1xuICBpZiAoY3VzdG9tRWxlbWVudHMuZ2V0KFwid2RzLXByb2dyZXNzXCIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBfV2VicGFja0RldlNlcnZlclByb2dyZXNzX2JyYW5kID0gLyojX19QVVJFX18qL25ldyBXZWFrU2V0KCk7XG4gIHZhciBXZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9IVE1MRWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIFdlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzcygpIHtcbiAgICAgIHZhciBfdGhpcztcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MpO1xuICAgICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIFdlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzcyk7XG4gICAgICBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMoX3RoaXMsIF9XZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3NfYnJhbmQpO1xuICAgICAgX3RoaXMuYXR0YWNoU2hhZG93KHtcbiAgICAgICAgbW9kZTogXCJvcGVuXCJcbiAgICAgIH0pO1xuICAgICAgX3RoaXMubWF4RGFzaE9mZnNldCA9IC0yMTkuOTkwNzgzNjkxNDA2MjU7XG4gICAgICBfdGhpcy5hbmltYXRpb25UaW1lciA9IG51bGw7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIF9pbmhlcml0cyhXZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MsIF9IVE1MRWxlbWVudCk7XG4gICAgcmV0dXJuIF9jcmVhdGVDbGFzcyhXZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MsIFt7XG4gICAgICBrZXk6IFwiY29ubmVjdGVkQ2FsbGJhY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgX2Fzc2VydENsYXNzQnJhbmQoX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzc19icmFuZCwgdGhpcywgX3Jlc2V0KS5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChuYW1lID09PSBcInByb2dyZXNzXCIpIHtcbiAgICAgICAgICBfYXNzZXJ0Q2xhc3NCcmFuZChfV2VicGFja0RldlNlcnZlclByb2dyZXNzX2JyYW5kLCB0aGlzLCBfdXBkYXRlKS5jYWxsKHRoaXMsIE51bWJlcihuZXdWYWx1ZSkpO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IFwidHlwZVwiKSB7XG4gICAgICAgICAgX2Fzc2VydENsYXNzQnJhbmQoX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzc19icmFuZCwgdGhpcywgX3Jlc2V0KS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFtcInByb2dyZXNzXCIsIFwidHlwZVwiXTtcbiAgICAgIH1cbiAgICB9XSk7XG4gIH0oLyojX19QVVJFX18qL193cmFwTmF0aXZlU3VwZXIoSFRNTEVsZW1lbnQpKTtcbiAgX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzcyA9IFdlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzcztcbiAgZnVuY3Rpb24gX3Jlc2V0KCkge1xuICAgIHZhciBfdGhpcyRnZXRBdHRyaWJ1dGUsIF9OdW1iZXI7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuYW5pbWF0aW9uVGltZXIpO1xuICAgIHRoaXMuYW5pbWF0aW9uVGltZXIgPSBudWxsO1xuICAgIHZhciB0eXBlQXR0ciA9IChfdGhpcyRnZXRBdHRyaWJ1dGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09PSBudWxsIHx8IF90aGlzJGdldEF0dHJpYnV0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZ2V0QXR0cmlidXRlLnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy50eXBlID0gdHlwZUF0dHIgPT09IFwiY2lyY3VsYXJcIiA/IFwiY2lyY3VsYXJcIiA6IFwibGluZWFyXCI7XG4gICAgdmFyIGlubmVySFRNTCA9IHRoaXMudHlwZSA9PT0gXCJjaXJjdWxhclwiID8gX2NpcmN1bGFyVGVtcGxhdGUuY2FsbChfV2VicGFja0RldlNlcnZlclByb2dyZXNzKSA6IF9saW5lYXJUZW1wbGF0ZS5jYWxsKF9XZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MpO1xuICAgIHRoaXMuc2hhZG93Um9vdC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgdGhpcy5pbml0aWFsUHJvZ3Jlc3MgPSAoX051bWJlciA9IE51bWJlcih0aGlzLmdldEF0dHJpYnV0ZShcInByb2dyZXNzXCIpKSkgIT09IG51bGwgJiYgX051bWJlciAhPT0gdm9pZCAwID8gX051bWJlciA6IDA7XG4gICAgX2Fzc2VydENsYXNzQnJhbmQoX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzc19icmFuZCwgdGhpcywgX3VwZGF0ZSkuY2FsbCh0aGlzLCB0aGlzLmluaXRpYWxQcm9ncmVzcyk7XG4gIH1cbiAgZnVuY3Rpb24gX2NpcmN1bGFyVGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIFwiXFxuICAgICAgICA8c3R5bGU+XFxuICAgICAgICA6aG9zdCB7XFxuICAgICAgICAgICAgd2lkdGg6IDIwMHB4O1xcbiAgICAgICAgICAgIGhlaWdodDogMjAwcHg7XFxuICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgICAgICAgIHJpZ2h0OiA1JTtcXG4gICAgICAgICAgICB0b3A6IDUlO1xcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgLjI1cyBlYXNlLWluLW91dDtcXG4gICAgICAgICAgICB6LWluZGV4OiAyMTQ3NDgzNjQ1O1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgY2lyY2xlIHtcXG4gICAgICAgICAgICBmaWxsOiAjMjgyZDM1O1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgcGF0aCB7XFxuICAgICAgICAgICAgZmlsbDogcmdiYSgwLCAwLCAwLCAwKTtcXG4gICAgICAgICAgICBzdHJva2U6IHJnYigxODYsIDIyMywgMTcyKTtcXG4gICAgICAgICAgICBzdHJva2UtZGFzaGFycmF5OiAyMTkuOTkwNzgzNjkxNDA2MjU7XFxuICAgICAgICAgICAgc3Ryb2tlLWRhc2hvZmZzZXQ6IC0yMTkuOTkwNzgzNjkxNDA2MjU7XFxuICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAxMDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZykgdHJhbnNsYXRlKDBweCwgLTgwcHgpO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgdGV4dCB7XFxuICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnLCBzYW5zLXNlcmlmO1xcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcXG4gICAgICAgICAgICBmaWxsOiAjZmZmZmZmO1xcbiAgICAgICAgICAgIGRvbWluYW50LWJhc2VsaW5lOiBtaWRkbGU7XFxuICAgICAgICAgICAgdGV4dC1hbmNob3I6IG1pZGRsZTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHRzcGFuI3BlcmNlbnQtc3VwZXIge1xcbiAgICAgICAgICAgIGZpbGw6ICNiZGMzYzc7XFxuICAgICAgICAgICAgZm9udC1zaXplOiAwLjQ1ZW07XFxuICAgICAgICAgICAgYmFzZWxpbmUtc2hpZnQ6IDEwJTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIEBrZXlmcmFtZXMgZmFkZSB7XFxuICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9XFxuICAgICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogc2NhbGUoMCk7IH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC5kaXNhcHBlYXIge1xcbiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZSAwLjNzO1xcbiAgICAgICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xcbiAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC41cztcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC5oaWRkZW4ge1xcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgICAgICB9XFxuICAgICAgICA8L3N0eWxlPlxcbiAgICAgICAgPHN2ZyBpZD1cXFwicHJvZ3Jlc3NcXFwiIGNsYXNzPVxcXCJoaWRkZW4gbm9zZWxlY3RcXFwiIHZpZXdCb3g9XFxcIjAgMCA4MCA4MFxcXCI+XFxuICAgICAgICA8Y2lyY2xlIGN4PVxcXCI1MCVcXFwiIGN5PVxcXCI1MCVcXFwiIHI9XFxcIjM1XFxcIj48L2NpcmNsZT5cXG4gICAgICAgIDxwYXRoIGQ9XFxcIk01LDQwYTM1LDM1IDAgMSwwIDcwLDBhMzUsMzUgMCAxLDAgLTcwLDBcXFwiPjwvcGF0aD5cXG4gICAgICAgIDx0ZXh0IHg9XFxcIjUwJVxcXCIgeT1cXFwiNTElXFxcIj5cXG4gICAgICAgICAgICA8dHNwYW4gaWQ9XFxcInBlcmNlbnQtdmFsdWVcXFwiPjA8L3RzcGFuPlxcbiAgICAgICAgICAgIDx0c3BhbiBpZD1cXFwicGVyY2VudC1zdXBlclxcXCI+JTwvdHNwYW4+XFxuICAgICAgICA8L3RleHQ+XFxuICAgICAgICA8L3N2Zz5cXG4gICAgICBcIjtcbiAgfVxuICBmdW5jdGlvbiBfbGluZWFyVGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIFwiXFxuICAgICAgICA8c3R5bGU+XFxuICAgICAgICA6aG9zdCB7XFxuICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xcbiAgICAgICAgICAgIHRvcDogMDtcXG4gICAgICAgICAgICBsZWZ0OiAwO1xcbiAgICAgICAgICAgIGhlaWdodDogNHB4O1xcbiAgICAgICAgICAgIHdpZHRoOiAxMDB2dztcXG4gICAgICAgICAgICB6LWluZGV4OiAyMTQ3NDgzNjQ1O1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgI2JhciB7XFxuICAgICAgICAgICAgd2lkdGg6IDAlO1xcbiAgICAgICAgICAgIGhlaWdodDogNHB4O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigxODYsIDIyMywgMTcyKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIEBrZXlmcmFtZXMgZmFkZSB7XFxuICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAxOyB9XFxuICAgICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC5kaXNhcHBlYXIge1xcbiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZSAwLjNzO1xcbiAgICAgICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xcbiAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC41cztcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC5oaWRkZW4ge1xcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XFxuICAgICAgICB9XFxuICAgICAgICA8L3N0eWxlPlxcbiAgICAgICAgPGRpdiBpZD1cXFwicHJvZ3Jlc3NcXFwiPjwvZGl2PlxcbiAgICAgICAgXCI7XG4gIH1cbiAgZnVuY3Rpb24gX3VwZGF0ZShwZXJjZW50KSB7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNwcm9ncmVzc1wiKTtcbiAgICBpZiAodGhpcy50eXBlID09PSBcImNpcmN1bGFyXCIpIHtcbiAgICAgIHZhciBwYXRoID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJwYXRoXCIpO1xuICAgICAgdmFyIHZhbHVlID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjcGVyY2VudC12YWx1ZVwiKTtcbiAgICAgIHZhciBvZmZzZXQgPSAoMTAwIC0gcGVyY2VudCkgLyAxMDAgKiB0aGlzLm1heERhc2hPZmZzZXQ7XG4gICAgICBwYXRoLnN0eWxlLnN0cm9rZURhc2hvZmZzZXQgPSBvZmZzZXQ7XG4gICAgICB2YWx1ZS50ZXh0Q29udGVudCA9IHBlcmNlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBcIlwiLmNvbmNhdChwZXJjZW50LCBcIiVcIik7XG4gICAgfVxuICAgIGlmIChwZXJjZW50ID49IDEwMCkge1xuICAgICAgX2Fzc2VydENsYXNzQnJhbmQoX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzc19icmFuZCwgdGhpcywgX2hpZGUpLmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIGlmIChwZXJjZW50ID4gMCkge1xuICAgICAgX2Fzc2VydENsYXNzQnJhbmQoX1dlYnBhY2tEZXZTZXJ2ZXJQcm9ncmVzc19icmFuZCwgdGhpcywgX3Nob3cpLmNhbGwodGhpcyk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIF9zaG93KCkge1xuICAgIHZhciBlbGVtZW50ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZ3Jlc3NcIik7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICB9XG4gIGZ1bmN0aW9uIF9oaWRlKCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgIHZhciBlbGVtZW50ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZ3Jlc3NcIik7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gXCJjaXJjdWxhclwiKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhcHBlYXJcIik7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgIF9hc3NlcnRDbGFzc0JyYW5kKF9XZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3NfYnJhbmQsIF90aGlzMiwgX3VwZGF0ZSkuY2FsbChfdGhpczIsIDApO1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gXCJsaW5lYXJcIikge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYXBwZWFyXCIpO1xuICAgICAgdGhpcy5hbmltYXRpb25UaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhcHBlYXJcIik7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMCVcIjtcbiAgICAgICAgX3RoaXMyLmFuaW1hdGlvblRpbWVyID0gbnVsbDtcbiAgICAgIH0sIDgwMCk7XG4gICAgfVxuICB9XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIndkcy1wcm9ncmVzc1wiLCBXZWJwYWNrRGV2U2VydmVyUHJvZ3Jlc3MpO1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/progress.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/socket.js":
/*!**********************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/socket.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   client: () => (/* binding */ client),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _clients_WebSocketClient_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./clients/WebSocketClient.js */ \"./node_modules/webpack-dev-server/client/clients/WebSocketClient.js\");\n/* harmony import */ var _utils_log_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/log.js */ \"./node_modules/webpack-dev-server/client/utils/log.js\");\n/* provided dependency */ var __webpack_dev_server_client__ = __webpack_require__(/*! ./node_modules/webpack-dev-server/client/clients/WebSocketClient.js */ \"./node_modules/webpack-dev-server/client/clients/WebSocketClient.js\");\n/* global __webpack_dev_server_client__ */\n\n\n\n\n// this WebsocketClient is here as a default fallback, in case the client is not injected\n/* eslint-disable camelcase */\nvar Client =\n// eslint-disable-next-line no-nested-ternary\ntypeof __webpack_dev_server_client__ !== \"undefined\" ? typeof __webpack_dev_server_client__.default !== \"undefined\" ? __webpack_dev_server_client__.default : __webpack_dev_server_client__ : _clients_WebSocketClient_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n/* eslint-enable camelcase */\n\nvar retries = 0;\nvar maxRetries = 10;\n\n// Initialized client is exported so external consumers can utilize the same instance\n// It is mutable to enforce singleton\n// eslint-disable-next-line import/no-mutable-exports\nvar client = null;\nvar timeout;\n\n/**\n * @param {string} url\n * @param {{ [handler: string]: (data?: any, params?: any) => any }} handlers\n * @param {number} [reconnect]\n */\nvar socket = function initSocket(url, handlers, reconnect) {\n  client = new Client(url);\n  client.onOpen(function () {\n    retries = 0;\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    if (typeof reconnect !== \"undefined\") {\n      maxRetries = reconnect;\n    }\n  });\n  client.onClose(function () {\n    if (retries === 0) {\n      handlers.close();\n    }\n\n    // Try to reconnect.\n    client = null;\n\n    // After 10 retries stop trying, to prevent logspam.\n    if (retries < maxRetries) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n      _utils_log_js__WEBPACK_IMPORTED_MODULE_1__.log.info(\"Trying to reconnect...\");\n      timeout = setTimeout(function () {\n        socket(url, handlers, reconnect);\n      }, retryInMs);\n    }\n  });\n  client.onMessage(\n  /**\n   * @param {any} data\n   */\n  function (data) {\n    var message = JSON.parse(data);\n    if (handlers[message.type]) {\n      handlers[message.type](message.data, message.params);\n    }\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (socket);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC9zb2NrZXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJwYWNrLWRldi1zZXJ2ZXIvY2xpZW50L3NvY2tldC5qcz80N2EyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXyAqL1xuXG5pbXBvcnQgV2ViU29ja2V0Q2xpZW50IGZyb20gXCIuL2NsaWVudHMvV2ViU29ja2V0Q2xpZW50LmpzXCI7XG5pbXBvcnQgeyBsb2cgfSBmcm9tIFwiLi91dGlscy9sb2cuanNcIjtcblxuLy8gdGhpcyBXZWJzb2NrZXRDbGllbnQgaXMgaGVyZSBhcyBhIGRlZmF1bHQgZmFsbGJhY2ssIGluIGNhc2UgdGhlIGNsaWVudCBpcyBub3QgaW5qZWN0ZWRcbi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xudmFyIENsaWVudCA9XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbnR5cGVvZiBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXyAhPT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXy5kZWZhdWx0ICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX2Rldl9zZXJ2ZXJfY2xpZW50X18uZGVmYXVsdCA6IF9fd2VicGFja19kZXZfc2VydmVyX2NsaWVudF9fIDogV2ViU29ja2V0Q2xpZW50O1xuLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cblxudmFyIHJldHJpZXMgPSAwO1xudmFyIG1heFJldHJpZXMgPSAxMDtcblxuLy8gSW5pdGlhbGl6ZWQgY2xpZW50IGlzIGV4cG9ydGVkIHNvIGV4dGVybmFsIGNvbnN1bWVycyBjYW4gdXRpbGl6ZSB0aGUgc2FtZSBpbnN0YW5jZVxuLy8gSXQgaXMgbXV0YWJsZSB0byBlbmZvcmNlIHNpbmdsZXRvblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHNcbmV4cG9ydCB2YXIgY2xpZW50ID0gbnVsbDtcbnZhciB0aW1lb3V0O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7eyBbaGFuZGxlcjogc3RyaW5nXTogKGRhdGE/OiBhbnksIHBhcmFtcz86IGFueSkgPT4gYW55IH19IGhhbmRsZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gW3JlY29ubmVjdF1cbiAqL1xudmFyIHNvY2tldCA9IGZ1bmN0aW9uIGluaXRTb2NrZXQodXJsLCBoYW5kbGVycywgcmVjb25uZWN0KSB7XG4gIGNsaWVudCA9IG5ldyBDbGllbnQodXJsKTtcbiAgY2xpZW50Lm9uT3BlbihmdW5jdGlvbiAoKSB7XG4gICAgcmV0cmllcyA9IDA7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWNvbm5lY3QgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIG1heFJldHJpZXMgPSByZWNvbm5lY3Q7XG4gICAgfVxuICB9KTtcbiAgY2xpZW50Lm9uQ2xvc2UoZnVuY3Rpb24gKCkge1xuICAgIGlmIChyZXRyaWVzID09PSAwKSB7XG4gICAgICBoYW5kbGVycy5jbG9zZSgpO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byByZWNvbm5lY3QuXG4gICAgY2xpZW50ID0gbnVsbDtcblxuICAgIC8vIEFmdGVyIDEwIHJldHJpZXMgc3RvcCB0cnlpbmcsIHRvIHByZXZlbnQgbG9nc3BhbS5cbiAgICBpZiAocmV0cmllcyA8IG1heFJldHJpZXMpIHtcbiAgICAgIC8vIEV4cG9uZW50aWFsbHkgaW5jcmVhc2UgdGltZW91dCB0byByZWNvbm5lY3QuXG4gICAgICAvLyBSZXNwZWN0ZnVsbHkgY29waWVkIGZyb20gdGhlIHBhY2thZ2UgYGdvdGAuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG4gICAgICB2YXIgcmV0cnlJbk1zID0gMTAwMCAqIE1hdGgucG93KDIsIHJldHJpZXMpICsgTWF0aC5yYW5kb20oKSAqIDEwMDtcbiAgICAgIHJldHJpZXMgKz0gMTtcbiAgICAgIGxvZy5pbmZvKFwiVHJ5aW5nIHRvIHJlY29ubmVjdC4uLlwiKTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc29ja2V0KHVybCwgaGFuZGxlcnMsIHJlY29ubmVjdCk7XG4gICAgICB9LCByZXRyeUluTXMpO1xuICAgIH1cbiAgfSk7XG4gIGNsaWVudC5vbk1lc3NhZ2UoXG4gIC8qKlxuICAgKiBAcGFyYW0ge2FueX0gZGF0YVxuICAgKi9cbiAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgaWYgKGhhbmRsZXJzW21lc3NhZ2UudHlwZV0pIHtcbiAgICAgIGhhbmRsZXJzW21lc3NhZ2UudHlwZV0obWVzc2FnZS5kYXRhLCBtZXNzYWdlLnBhcmFtcyk7XG4gICAgfVxuICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBzb2NrZXQ7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/socket.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/log.js":
/*!*************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/utils/log.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel)\n/* harmony export */ });\n/* harmony import */ var _modules_logger_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/logger/index.js */ \"./node_modules/webpack-dev-server/client/modules/logger/index.js\");\n/* harmony import */ var _modules_logger_index_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_modules_logger_index_js__WEBPACK_IMPORTED_MODULE_0__);\n\nvar name = \"webpack-dev-server\";\n// default level is set on the client side, so it does not need\n// to be set by the CLI or API\nvar defaultLevel = \"info\";\n\n// options new options, merge with old options\n/**\n * @param {false | true | \"none\" | \"error\" | \"warn\" | \"info\" | \"log\" | \"verbose\"} level\n * @returns {void}\n */\nfunction setLogLevel(level) {\n  _modules_logger_index_js__WEBPACK_IMPORTED_MODULE_0___default().configureDefaultLogger({\n    level: level\n  });\n}\nsetLogLevel(defaultLevel);\nvar log = _modules_logger_index_js__WEBPACK_IMPORTED_MODULE_0___default().getLogger(name);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC91dGlscy9sb2cuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJwYWNrLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL2xvZy5qcz8wMzg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL21vZHVsZXMvbG9nZ2VyL2luZGV4LmpzXCI7XG52YXIgbmFtZSA9IFwid2VicGFjay1kZXYtc2VydmVyXCI7XG4vLyBkZWZhdWx0IGxldmVsIGlzIHNldCBvbiB0aGUgY2xpZW50IHNpZGUsIHNvIGl0IGRvZXMgbm90IG5lZWRcbi8vIHRvIGJlIHNldCBieSB0aGUgQ0xJIG9yIEFQSVxudmFyIGRlZmF1bHRMZXZlbCA9IFwiaW5mb1wiO1xuXG4vLyBvcHRpb25zIG5ldyBvcHRpb25zLCBtZXJnZSB3aXRoIG9sZCBvcHRpb25zXG4vKipcbiAqIEBwYXJhbSB7ZmFsc2UgfCB0cnVlIHwgXCJub25lXCIgfCBcImVycm9yXCIgfCBcIndhcm5cIiB8IFwiaW5mb1wiIHwgXCJsb2dcIiB8IFwidmVyYm9zZVwifSBsZXZlbFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XG4gIGxvZ2dlci5jb25maWd1cmVEZWZhdWx0TG9nZ2VyKHtcbiAgICBsZXZlbDogbGV2ZWxcbiAgfSk7XG59XG5zZXRMb2dMZXZlbChkZWZhdWx0TGV2ZWwpO1xudmFyIGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIobmFtZSk7XG5leHBvcnQgeyBsb2csIHNldExvZ0xldmVsIH07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/utils/log.js\n");

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/sendMessage.js":
/*!*********************************************************************!*\
  !*** ./node_modules/webpack-dev-server/client/utils/sendMessage.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* global __resourceQuery WorkerGlobalScope */\n\n// Send messages to the outside, so plugins can consume it.\n/**\n * @param {string} type\n * @param {any} [data]\n */\nfunction sendMsg(type, data) {\n  if (typeof self !== \"undefined\" && (typeof WorkerGlobalScope === \"undefined\" || !(self instanceof WorkerGlobalScope))) {\n    self.postMessage({\n      type: \"webpack\".concat(type),\n      data: data\n    }, \"*\");\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sendMsg);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC91dGlscy9zZW5kTWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicGFjay1kZXYtc2VydmVyL2NsaWVudC91dGlscy9zZW5kTWVzc2FnZS5qcz9hNWU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBfX3Jlc291cmNlUXVlcnkgV29ya2VyR2xvYmFsU2NvcGUgKi9cblxuLy8gU2VuZCBtZXNzYWdlcyB0byB0aGUgb3V0c2lkZSwgc28gcGx1Z2lucyBjYW4gY29uc3VtZSBpdC5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7YW55fSBbZGF0YV1cbiAqL1xuZnVuY3Rpb24gc2VuZE1zZyh0eXBlLCBkYXRhKSB7XG4gIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlID09PSBcInVuZGVmaW5lZFwiIHx8ICEoc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKSkpIHtcbiAgICBzZWxmLnBvc3RNZXNzYWdlKHtcbiAgICAgIHR5cGU6IFwid2VicGFja1wiLmNvbmNhdCh0eXBlKSxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9LCBcIipcIik7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IHNlbmRNc2c7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack-dev-server/client/utils/sendMessage.js\n");

/***/ }),

/***/ "./node_modules/webpack/hot/emitter.js":
/*!*********************************************!*\
  !*** ./node_modules/webpack/hot/emitter.js ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var EventEmitter = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\nmodule.exports = new EventEmitter();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3QvZW1pdHRlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnBhY2svaG90L2VtaXR0ZXIuanM/OTNlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/hot/emitter.js\n");

/***/ }),

/***/ "./node_modules/webpack/hot/log-apply-result.js":
/*!******************************************************!*\
  !*** ./node_modules/webpack/hot/log-apply-result.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n/**\n * @param {(string | number)[]} updatedModules updated modules\n * @param {(string | number)[] | null} renewedModules renewed modules\n */\nmodule.exports = function (updatedModules, renewedModules) {\n\tvar unacceptedModules = updatedModules.filter(function (moduleId) {\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\n\t});\n\tvar log = __webpack_require__(/*! ./log */ \"./node_modules/webpack/hot/log.js\");\n\n\tif (unacceptedModules.length > 0) {\n\t\tlog(\n\t\t\t\"warning\",\n\t\t\t\"[HMR] The following modules couldn't be hot updated: (They would need a full reload!)\"\n\t\t);\n\t\tunacceptedModules.forEach(function (moduleId) {\n\t\t\tlog(\"warning\", \"[HMR]  - \" + moduleId);\n\t\t});\n\t}\n\n\tif (!renewedModules || renewedModules.length === 0) {\n\t\tlog(\"info\", \"[HMR] Nothing hot updated.\");\n\t} else {\n\t\tlog(\"info\", \"[HMR] Updated modules:\");\n\t\trenewedModules.forEach(function (moduleId) {\n\t\t\tif (typeof moduleId === \"string\" && moduleId.indexOf(\"!\") !== -1) {\n\t\t\t\tvar parts = moduleId.split(\"!\");\n\t\t\t\tlog.groupCollapsed(\"info\", \"[HMR]  - \" + parts.pop());\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t\tlog.groupEnd(\"info\");\n\t\t\t} else {\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t}\n\t\t});\n\t\tvar numberIds = renewedModules.every(function (moduleId) {\n\t\t\treturn typeof moduleId === \"number\";\n\t\t});\n\t\tif (numberIds)\n\t\t\tlog(\n\t\t\t\t\"info\",\n\t\t\t\t'[HMR] Consider using the optimization.moduleIds: \"named\" for module names.'\n\t\t\t);\n\t}\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3QvbG9nLWFwcGx5LXJlc3VsdC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJwYWNrL2hvdC9sb2ctYXBwbHktcmVzdWx0LmpzPzY5ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxuLyoqXG4gKiBAcGFyYW0geyhzdHJpbmcgfCBudW1iZXIpW119IHVwZGF0ZWRNb2R1bGVzIHVwZGF0ZWQgbW9kdWxlc1xuICogQHBhcmFtIHsoc3RyaW5nIHwgbnVtYmVyKVtdIHwgbnVsbH0gcmVuZXdlZE1vZHVsZXMgcmVuZXdlZCBtb2R1bGVzXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVwZGF0ZWRNb2R1bGVzLCByZW5ld2VkTW9kdWxlcykge1xuXHR2YXIgdW5hY2NlcHRlZE1vZHVsZXMgPSB1cGRhdGVkTW9kdWxlcy5maWx0ZXIoZnVuY3Rpb24gKG1vZHVsZUlkKSB7XG5cdFx0cmV0dXJuIHJlbmV3ZWRNb2R1bGVzICYmIHJlbmV3ZWRNb2R1bGVzLmluZGV4T2YobW9kdWxlSWQpIDwgMDtcblx0fSk7XG5cdHZhciBsb2cgPSByZXF1aXJlKFwiLi9sb2dcIik7XG5cblx0aWYgKHVuYWNjZXB0ZWRNb2R1bGVzLmxlbmd0aCA+IDApIHtcblx0XHRsb2coXG5cdFx0XHRcIndhcm5pbmdcIixcblx0XHRcdFwiW0hNUl0gVGhlIGZvbGxvd2luZyBtb2R1bGVzIGNvdWxkbid0IGJlIGhvdCB1cGRhdGVkOiAoVGhleSB3b3VsZCBuZWVkIGEgZnVsbCByZWxvYWQhKVwiXG5cdFx0KTtcblx0XHR1bmFjY2VwdGVkTW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuXHRcdFx0bG9nKFwid2FybmluZ1wiLCBcIltITVJdICAtIFwiICsgbW9kdWxlSWQpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCFyZW5ld2VkTW9kdWxlcyB8fCByZW5ld2VkTW9kdWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRsb2coXCJpbmZvXCIsIFwiW0hNUl0gTm90aGluZyBob3QgdXBkYXRlZC5cIik7XG5cdH0gZWxzZSB7XG5cdFx0bG9nKFwiaW5mb1wiLCBcIltITVJdIFVwZGF0ZWQgbW9kdWxlczpcIik7XG5cdFx0cmVuZXdlZE1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlSWQpIHtcblx0XHRcdGlmICh0eXBlb2YgbW9kdWxlSWQgPT09IFwic3RyaW5nXCIgJiYgbW9kdWxlSWQuaW5kZXhPZihcIiFcIikgIT09IC0xKSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IG1vZHVsZUlkLnNwbGl0KFwiIVwiKTtcblx0XHRcdFx0bG9nLmdyb3VwQ29sbGFwc2VkKFwiaW5mb1wiLCBcIltITVJdICAtIFwiICsgcGFydHMucG9wKCkpO1xuXHRcdFx0XHRsb2coXCJpbmZvXCIsIFwiW0hNUl0gIC0gXCIgKyBtb2R1bGVJZCk7XG5cdFx0XHRcdGxvZy5ncm91cEVuZChcImluZm9cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsb2coXCJpbmZvXCIsIFwiW0hNUl0gIC0gXCIgKyBtb2R1bGVJZCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0dmFyIG51bWJlcklkcyA9IHJlbmV3ZWRNb2R1bGVzLmV2ZXJ5KGZ1bmN0aW9uIChtb2R1bGVJZCkge1xuXHRcdFx0cmV0dXJuIHR5cGVvZiBtb2R1bGVJZCA9PT0gXCJudW1iZXJcIjtcblx0XHR9KTtcblx0XHRpZiAobnVtYmVySWRzKVxuXHRcdFx0bG9nKFxuXHRcdFx0XHRcImluZm9cIixcblx0XHRcdFx0J1tITVJdIENvbnNpZGVyIHVzaW5nIHRoZSBvcHRpbWl6YXRpb24ubW9kdWxlSWRzOiBcIm5hbWVkXCIgZm9yIG1vZHVsZSBuYW1lcy4nXG5cdFx0XHQpO1xuXHR9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/hot/log-apply-result.js\n");

/***/ }),

/***/ "./node_modules/webpack/hot/log.js":
/*!*****************************************!*\
  !*** ./node_modules/webpack/hot/log.js ***!
  \*****************************************/
/***/ ((module) => {

eval("/** @typedef {\"info\" | \"warning\" | \"error\"} LogLevel */\n\n/** @type {LogLevel} */\nvar logLevel = \"info\";\n\nfunction dummy() {}\n\n/**\n * @param {LogLevel} level log level\n * @returns {boolean} true, if should log\n */\nfunction shouldLog(level) {\n\tvar shouldLog =\n\t\t(logLevel === \"info\" && level === \"info\") ||\n\t\t([\"info\", \"warning\"].indexOf(logLevel) >= 0 && level === \"warning\") ||\n\t\t([\"info\", \"warning\", \"error\"].indexOf(logLevel) >= 0 && level === \"error\");\n\treturn shouldLog;\n}\n\n/**\n * @param {(msg?: string) => void} logFn log function\n * @returns {(level: LogLevel, msg?: string) => void} function that logs when log level is sufficient\n */\nfunction logGroup(logFn) {\n\treturn function (level, msg) {\n\t\tif (shouldLog(level)) {\n\t\t\tlogFn(msg);\n\t\t}\n\t};\n}\n\n/**\n * @param {LogLevel} level log level\n * @param {string|Error} msg message\n */\nmodule.exports = function (level, msg) {\n\tif (shouldLog(level)) {\n\t\tif (level === \"info\") {\n\t\t\tconsole.log(msg);\n\t\t} else if (level === \"warning\") {\n\t\t\tconsole.warn(msg);\n\t\t} else if (level === \"error\") {\n\t\t\tconsole.error(msg);\n\t\t}\n\t}\n};\n\nvar group = console.group || dummy;\nvar groupCollapsed = console.groupCollapsed || dummy;\nvar groupEnd = console.groupEnd || dummy;\n\nmodule.exports.group = logGroup(group);\n\nmodule.exports.groupCollapsed = logGroup(groupCollapsed);\n\nmodule.exports.groupEnd = logGroup(groupEnd);\n\n/**\n * @param {LogLevel} level log level\n */\nmodule.exports.setLogLevel = function (level) {\n\tlogLevel = level;\n};\n\n/**\n * @param {Error} err error\n * @returns {string} formatted error\n */\nmodule.exports.formatError = function (err) {\n\tvar message = err.message;\n\tvar stack = err.stack;\n\tif (!stack) {\n\t\treturn message;\n\t} else if (stack.indexOf(message) < 0) {\n\t\treturn message + \"\\n\" + stack;\n\t}\n\treturn stack;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3QvbG9nLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJwYWNrL2hvdC9sb2cuanM/NzU5NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQHR5cGVkZWYge1wiaW5mb1wiIHwgXCJ3YXJuaW5nXCIgfCBcImVycm9yXCJ9IExvZ0xldmVsICovXG5cbi8qKiBAdHlwZSB7TG9nTGV2ZWx9ICovXG52YXIgbG9nTGV2ZWwgPSBcImluZm9cIjtcblxuZnVuY3Rpb24gZHVtbXkoKSB7fVxuXG4vKipcbiAqIEBwYXJhbSB7TG9nTGV2ZWx9IGxldmVsIGxvZyBsZXZlbFxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUsIGlmIHNob3VsZCBsb2dcbiAqL1xuZnVuY3Rpb24gc2hvdWxkTG9nKGxldmVsKSB7XG5cdHZhciBzaG91bGRMb2cgPVxuXHRcdChsb2dMZXZlbCA9PT0gXCJpbmZvXCIgJiYgbGV2ZWwgPT09IFwiaW5mb1wiKSB8fFxuXHRcdChbXCJpbmZvXCIsIFwid2FybmluZ1wiXS5pbmRleE9mKGxvZ0xldmVsKSA+PSAwICYmIGxldmVsID09PSBcIndhcm5pbmdcIikgfHxcblx0XHQoW1wiaW5mb1wiLCBcIndhcm5pbmdcIiwgXCJlcnJvclwiXS5pbmRleE9mKGxvZ0xldmVsKSA+PSAwICYmIGxldmVsID09PSBcImVycm9yXCIpO1xuXHRyZXR1cm4gc2hvdWxkTG9nO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7KG1zZz86IHN0cmluZykgPT4gdm9pZH0gbG9nRm4gbG9nIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7KGxldmVsOiBMb2dMZXZlbCwgbXNnPzogc3RyaW5nKSA9PiB2b2lkfSBmdW5jdGlvbiB0aGF0IGxvZ3Mgd2hlbiBsb2cgbGV2ZWwgaXMgc3VmZmljaWVudFxuICovXG5mdW5jdGlvbiBsb2dHcm91cChsb2dGbikge1xuXHRyZXR1cm4gZnVuY3Rpb24gKGxldmVsLCBtc2cpIHtcblx0XHRpZiAoc2hvdWxkTG9nKGxldmVsKSkge1xuXHRcdFx0bG9nRm4obXNnKTtcblx0XHR9XG5cdH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtMb2dMZXZlbH0gbGV2ZWwgbG9nIGxldmVsXG4gKiBAcGFyYW0ge3N0cmluZ3xFcnJvcn0gbXNnIG1lc3NhZ2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGV2ZWwsIG1zZykge1xuXHRpZiAoc2hvdWxkTG9nKGxldmVsKSkge1xuXHRcdGlmIChsZXZlbCA9PT0gXCJpbmZvXCIpIHtcblx0XHRcdGNvbnNvbGUubG9nKG1zZyk7XG5cdFx0fSBlbHNlIGlmIChsZXZlbCA9PT0gXCJ3YXJuaW5nXCIpIHtcblx0XHRcdGNvbnNvbGUud2Fybihtc2cpO1xuXHRcdH0gZWxzZSBpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihtc2cpO1xuXHRcdH1cblx0fVxufTtcblxudmFyIGdyb3VwID0gY29uc29sZS5ncm91cCB8fCBkdW1teTtcbnZhciBncm91cENvbGxhcHNlZCA9IGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQgfHwgZHVtbXk7XG52YXIgZ3JvdXBFbmQgPSBjb25zb2xlLmdyb3VwRW5kIHx8IGR1bW15O1xuXG5tb2R1bGUuZXhwb3J0cy5ncm91cCA9IGxvZ0dyb3VwKGdyb3VwKTtcblxubW9kdWxlLmV4cG9ydHMuZ3JvdXBDb2xsYXBzZWQgPSBsb2dHcm91cChncm91cENvbGxhcHNlZCk7XG5cbm1vZHVsZS5leHBvcnRzLmdyb3VwRW5kID0gbG9nR3JvdXAoZ3JvdXBFbmQpO1xuXG4vKipcbiAqIEBwYXJhbSB7TG9nTGV2ZWx9IGxldmVsIGxvZyBsZXZlbFxuICovXG5tb2R1bGUuZXhwb3J0cy5zZXRMb2dMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCkge1xuXHRsb2dMZXZlbCA9IGxldmVsO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgZXJyb3JcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGZvcm1hdHRlZCBlcnJvclxuICovXG5tb2R1bGUuZXhwb3J0cy5mb3JtYXRFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcblx0dmFyIG1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcblx0dmFyIHN0YWNrID0gZXJyLnN0YWNrO1xuXHRpZiAoIXN0YWNrKSB7XG5cdFx0cmV0dXJuIG1lc3NhZ2U7XG5cdH0gZWxzZSBpZiAoc3RhY2suaW5kZXhPZihtZXNzYWdlKSA8IDApIHtcblx0XHRyZXR1cm4gbWVzc2FnZSArIFwiXFxuXCIgKyBzdGFjaztcblx0fVxuXHRyZXR1cm4gc3RhY2s7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/hot/log.js\n");

/***/ }),

/***/ "./node_modules/webpack/hot/only-dev-server.js":
/*!*****************************************************!*\
  !*** ./node_modules/webpack/hot/only-dev-server.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n/* globals __webpack_hash__ */\nif (true) {\n\t/** @type {undefined|string} */\n\tvar lastHash;\n\tvar upToDate = function upToDate() {\n\t\treturn /** @type {string} */ (lastHash).indexOf(__webpack_require__.h()) >= 0;\n\t};\n\tvar log = __webpack_require__(/*! ./log */ \"./node_modules/webpack/hot/log.js\");\n\tvar check = function check() {\n\t\tmodule.hot\n\t\t\t.check()\n\t\t\t.then(function (updatedModules) {\n\t\t\t\tif (!updatedModules) {\n\t\t\t\t\tlog(\"warning\", \"[HMR] Cannot find update. Need to do a full reload!\");\n\t\t\t\t\tlog(\n\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\"[HMR] (Probably because of restarting the webpack-dev-server)\"\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\treturn module.hot\n\t\t\t\t\t.apply({\n\t\t\t\t\t\tignoreUnaccepted: true,\n\t\t\t\t\t\tignoreDeclined: true,\n\t\t\t\t\t\tignoreErrored: true,\n\t\t\t\t\t\tonUnaccepted: function (data) {\n\t\t\t\t\t\t\tlog(\n\t\t\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\t\t\"Ignored an update to unaccepted module \" +\n\t\t\t\t\t\t\t\t\tdata.chain.join(\" -> \")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDeclined: function (data) {\n\t\t\t\t\t\t\tlog(\n\t\t\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\t\t\"Ignored an update to declined module \" +\n\t\t\t\t\t\t\t\t\tdata.chain.join(\" -> \")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonErrored: function (data) {\n\t\t\t\t\t\t\tlog(\"error\", data.error);\n\t\t\t\t\t\t\tlog(\n\t\t\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\t\t\"Ignored an error while updating module \" +\n\t\t\t\t\t\t\t\t\tdata.moduleId +\n\t\t\t\t\t\t\t\t\t\" (\" +\n\t\t\t\t\t\t\t\t\tdata.type +\n\t\t\t\t\t\t\t\t\t\")\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(function (renewedModules) {\n\t\t\t\t\t\tif (!upToDate()) {\n\t\t\t\t\t\t\tcheck();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t__webpack_require__(/*! ./log-apply-result */ \"./node_modules/webpack/hot/log-apply-result.js\")(updatedModules, renewedModules);\n\n\t\t\t\t\t\tif (upToDate()) {\n\t\t\t\t\t\t\tlog(\"info\", \"[HMR] App is up to date.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tvar status = module.hot.status();\n\t\t\t\tif ([\"abort\", \"fail\"].indexOf(status) >= 0) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\"[HMR] Cannot check for update. Need to do a full reload!\"\n\t\t\t\t\t);\n\t\t\t\t\tlog(\"warning\", \"[HMR] \" + log.formatError(err));\n\t\t\t\t} else {\n\t\t\t\t\tlog(\"warning\", \"[HMR] Update check failed: \" + log.formatError(err));\n\t\t\t\t}\n\t\t\t});\n\t};\n\tvar hotEmitter = __webpack_require__(/*! ./emitter */ \"./node_modules/webpack/hot/emitter.js\");\n\thotEmitter.on(\"webpackHotUpdate\", function (currentHash) {\n\t\tlastHash = currentHash;\n\t\tif (!upToDate()) {\n\t\t\tvar status = module.hot.status();\n\t\t\tif (status === \"idle\") {\n\t\t\t\tlog(\"info\", \"[HMR] Checking for updates on the server...\");\n\t\t\t\tcheck();\n\t\t\t} else if ([\"abort\", \"fail\"].indexOf(status) >= 0) {\n\t\t\t\tlog(\n\t\t\t\t\t\"warning\",\n\t\t\t\t\t\"[HMR] Cannot apply update as a previous update \" +\n\t\t\t\t\t\tstatus +\n\t\t\t\t\t\t\"ed. Need to do a full reload!\"\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\tlog(\"info\", \"[HMR] Waiting for update signal from WDS...\");\n} else {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3Qvb25seS1kZXYtc2VydmVyLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3Qvb25seS1kZXYtc2VydmVyLmpzPzJlZDUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8qIGdsb2JhbHMgX193ZWJwYWNrX2hhc2hfXyAqL1xuaWYgKG1vZHVsZS5ob3QpIHtcblx0LyoqIEB0eXBlIHt1bmRlZmluZWR8c3RyaW5nfSAqL1xuXHR2YXIgbGFzdEhhc2g7XG5cdHZhciB1cFRvRGF0ZSA9IGZ1bmN0aW9uIHVwVG9EYXRlKCkge1xuXHRcdHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKGxhc3RIYXNoKS5pbmRleE9mKF9fd2VicGFja19oYXNoX18pID49IDA7XG5cdH07XG5cdHZhciBsb2cgPSByZXF1aXJlKFwiLi9sb2dcIik7XG5cdHZhciBjaGVjayA9IGZ1bmN0aW9uIGNoZWNrKCkge1xuXHRcdG1vZHVsZS5ob3Rcblx0XHRcdC5jaGVjaygpXG5cdFx0XHQudGhlbihmdW5jdGlvbiAodXBkYXRlZE1vZHVsZXMpIHtcblx0XHRcdFx0aWYgKCF1cGRhdGVkTW9kdWxlcykge1xuXHRcdFx0XHRcdGxvZyhcIndhcm5pbmdcIiwgXCJbSE1SXSBDYW5ub3QgZmluZCB1cGRhdGUuIE5lZWQgdG8gZG8gYSBmdWxsIHJlbG9hZCFcIik7XG5cdFx0XHRcdFx0bG9nKFxuXHRcdFx0XHRcdFx0XCJ3YXJuaW5nXCIsXG5cdFx0XHRcdFx0XHRcIltITVJdIChQcm9iYWJseSBiZWNhdXNlIG9mIHJlc3RhcnRpbmcgdGhlIHdlYnBhY2stZGV2LXNlcnZlcilcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5ob3Rcblx0XHRcdFx0XHQuYXBwbHkoe1xuXHRcdFx0XHRcdFx0aWdub3JlVW5hY2NlcHRlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdGlnbm9yZURlY2xpbmVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0aWdub3JlRXJyb3JlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdG9uVW5hY2NlcHRlZDogZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdFx0bG9nKFxuXHRcdFx0XHRcdFx0XHRcdFwid2FybmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFwiSWdub3JlZCBhbiB1cGRhdGUgdG8gdW5hY2NlcHRlZCBtb2R1bGUgXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5jaGFpbi5qb2luKFwiIC0+IFwiKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG9uRGVjbGluZWQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGxvZyhcblx0XHRcdFx0XHRcdFx0XHRcIndhcm5pbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcIklnbm9yZWQgYW4gdXBkYXRlIHRvIGRlY2xpbmVkIG1vZHVsZSBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhLmNoYWluLmpvaW4oXCIgLT4gXCIpXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0b25FcnJvcmVkOiBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRsb2coXCJlcnJvclwiLCBkYXRhLmVycm9yKTtcblx0XHRcdFx0XHRcdFx0bG9nKFxuXHRcdFx0XHRcdFx0XHRcdFwid2FybmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFwiSWdub3JlZCBhbiBlcnJvciB3aGlsZSB1cGRhdGluZyBtb2R1bGUgXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5tb2R1bGVJZCArXG5cdFx0XHRcdFx0XHRcdFx0XHRcIiAoXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS50eXBlICtcblx0XHRcdFx0XHRcdFx0XHRcdFwiKVwiXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVuZXdlZE1vZHVsZXMpIHtcblx0XHRcdFx0XHRcdGlmICghdXBUb0RhdGUoKSkge1xuXHRcdFx0XHRcdFx0XHRjaGVjaygpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXF1aXJlKFwiLi9sb2ctYXBwbHktcmVzdWx0XCIpKHVwZGF0ZWRNb2R1bGVzLCByZW5ld2VkTW9kdWxlcyk7XG5cblx0XHRcdFx0XHRcdGlmICh1cFRvRGF0ZSgpKSB7XG5cdFx0XHRcdFx0XHRcdGxvZyhcImluZm9cIiwgXCJbSE1SXSBBcHAgaXMgdXAgdG8gZGF0ZS5cIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0dmFyIHN0YXR1cyA9IG1vZHVsZS5ob3Quc3RhdHVzKCk7XG5cdFx0XHRcdGlmIChbXCJhYm9ydFwiLCBcImZhaWxcIl0uaW5kZXhPZihzdGF0dXMpID49IDApIHtcblx0XHRcdFx0XHRsb2coXG5cdFx0XHRcdFx0XHRcIndhcm5pbmdcIixcblx0XHRcdFx0XHRcdFwiW0hNUl0gQ2Fubm90IGNoZWNrIGZvciB1cGRhdGUuIE5lZWQgdG8gZG8gYSBmdWxsIHJlbG9hZCFcIlxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0bG9nKFwid2FybmluZ1wiLCBcIltITVJdIFwiICsgbG9nLmZvcm1hdEVycm9yKGVycikpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvZyhcIndhcm5pbmdcIiwgXCJbSE1SXSBVcGRhdGUgY2hlY2sgZmFpbGVkOiBcIiArIGxvZy5mb3JtYXRFcnJvcihlcnIpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH07XG5cdHZhciBob3RFbWl0dGVyID0gcmVxdWlyZShcIi4vZW1pdHRlclwiKTtcblx0aG90RW1pdHRlci5vbihcIndlYnBhY2tIb3RVcGRhdGVcIiwgZnVuY3Rpb24gKGN1cnJlbnRIYXNoKSB7XG5cdFx0bGFzdEhhc2ggPSBjdXJyZW50SGFzaDtcblx0XHRpZiAoIXVwVG9EYXRlKCkpIHtcblx0XHRcdHZhciBzdGF0dXMgPSBtb2R1bGUuaG90LnN0YXR1cygpO1xuXHRcdFx0aWYgKHN0YXR1cyA9PT0gXCJpZGxlXCIpIHtcblx0XHRcdFx0bG9nKFwiaW5mb1wiLCBcIltITVJdIENoZWNraW5nIGZvciB1cGRhdGVzIG9uIHRoZSBzZXJ2ZXIuLi5cIik7XG5cdFx0XHRcdGNoZWNrKCk7XG5cdFx0XHR9IGVsc2UgaWYgKFtcImFib3J0XCIsIFwiZmFpbFwiXS5pbmRleE9mKHN0YXR1cykgPj0gMCkge1xuXHRcdFx0XHRsb2coXG5cdFx0XHRcdFx0XCJ3YXJuaW5nXCIsXG5cdFx0XHRcdFx0XCJbSE1SXSBDYW5ub3QgYXBwbHkgdXBkYXRlIGFzIGEgcHJldmlvdXMgdXBkYXRlIFwiICtcblx0XHRcdFx0XHRcdHN0YXR1cyArXG5cdFx0XHRcdFx0XHRcImVkLiBOZWVkIHRvIGRvIGEgZnVsbCByZWxvYWQhXCJcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXHRsb2coXCJpbmZvXCIsIFwiW0hNUl0gV2FpdGluZyBmb3IgdXBkYXRlIHNpZ25hbCBmcm9tIFdEUy4uLlwiKTtcbn0gZWxzZSB7XG5cdHRocm93IG5ldyBFcnJvcihcIltITVJdIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQgaXMgZGlzYWJsZWQuXCIpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/hot/only-dev-server.js\n");

/***/ })

}]);